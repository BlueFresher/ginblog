{"ast":null,"code":"import tinymce from 'tinymce/tinymce';\nimport Editor from '@tinymce/tinymce-vue';\nimport './tinymce.min.js';\nimport './icons/default/icons.min.js';\nimport '../../assets/tinymce/themes/silver/theme.min.js';\nimport './langs/zh_CN';\n\n// 注册插件\nimport './plugins/preview/plugin.min.js';\nimport './plugins/paste/plugin.min.js';\nimport './plugins/wordcount/plugin.min.js';\nimport './plugins/code/plugin.min.js';\nimport './plugins/image/plugin.min.js';\nimport './plugins/imagetools/plugin.min.js';\nimport './plugins/media/plugin.min.js';\nimport './plugins/codesample/plugin.min.js';\nimport './plugins/lists/plugin.min.js';\nimport './plugins/table/plugin.min.js';\nexport default {\n  components: {\n    Editor\n  },\n  props: {\n    value: {\n      type: String,\n      default: ''\n    }\n  },\n  data() {\n    return {\n      init: {\n        language: 'zh_CN',\n        height: '600px',\n        plugins: 'preview paste wordcount code imagetools image media codesample lists table',\n        branding: false,\n        paste_data_images: true,\n        toolbar: ['undo redo | styleselect |fontsizeselect| bold italic underline strikethrough |alignleft aligncenter alignright alignjustify |blockquote removeformat |numlist bullist table', 'preview paste code codesample |image media'],\n        //上传图片\n        images_upload_handler: async (blobInfo, succFun, failFun) => {\n          let formdata = new FormData();\n          formdata.append('file', blobInfo.blob(), blobInfo.name());\n          const {\n            data: res\n          } = await this.$http.post('upload', formdata);\n          succFun(res.url);\n          failFun(this.$message.error('上传图片失败'));\n        },\n        imagetools_cors_hosts: ['*'],\n        imagetools_proxy: ''\n      },\n      content: this.value\n    };\n  },\n  watch: {\n    value(newV) {\n      this.content = newV;\n    },\n    content(newV) {\n      this.$emit('input', newV);\n    }\n  }\n};","map":{"version":3,"mappings":"AAQA;AAEA;AACA;AACA;AACA;AAEA;;AAEA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AAEA;EACAA;IAAAC;EAAA;EACAC;IACAC;MACAC;MACAC;IACA;EACA;EACAC;IACA;MACAC;QACAC;QACAC;QACAC;QACAC;QACAC;QACAC,UACA,+KACA,6CACA;QACA;QACAC;UACA;UACAC;UACA;YAAAT;UAAA;UACAU;UACAC;QACA;QACAC;QACAC;MACA;MACAC;IACA;EACA;EACAC;IACAlB;MACA;IACA;IACAiB;MACA;IACA;EACA;AACA","names":["components","Editor","props","value","type","default","data","init","language","height","plugins","branding","paste_data_images","toolbar","images_upload_handler","formdata","succFun","failFun","imagetools_cors_hosts","imagetools_proxy","content","watch"],"sourceRoot":"src/components/editor","sources":["index.vue"],"sourcesContent":["<template>\n  <div>\n    <Editor :init=\"init\" v-model=\"content\"></Editor>\n  </div>\n</template>\n\n<script>\n\nimport tinymce from 'tinymce/tinymce'\n\nimport Editor from '@tinymce/tinymce-vue'\nimport './tinymce.min.js'\nimport './icons/default/icons.min.js'\nimport '../../assets/tinymce/themes/silver/theme.min.js'\n\nimport './langs/zh_CN'\n\n// 注册插件\nimport './plugins/preview/plugin.min.js'\nimport './plugins/paste/plugin.min.js'\nimport './plugins/wordcount/plugin.min.js'\nimport './plugins/code/plugin.min.js'\n\nimport './plugins/image/plugin.min.js'\nimport './plugins/imagetools/plugin.min.js'\nimport './plugins/media/plugin.min.js'\nimport './plugins/codesample/plugin.min.js'\nimport './plugins/lists/plugin.min.js'\nimport './plugins/table/plugin.min.js'\n\nexport default {\n  components: { Editor },\n  props: {\n    value: {\n      type: String,\n      default: '',\n    },\n  },\n  data() {\n    return {\n      init: {\n        language: 'zh_CN',\n        height: '600px',\n        plugins: 'preview paste wordcount code imagetools image media codesample lists table',\n        branding: false,\n        paste_data_images: true,\n        toolbar: [\n          'undo redo | styleselect |fontsizeselect| bold italic underline strikethrough |alignleft aligncenter alignright alignjustify |blockquote removeformat |numlist bullist table',\n          'preview paste code codesample |image media',\n        ],\n        //上传图片\n        images_upload_handler: async (blobInfo, succFun, failFun) => {\n          let formdata = new FormData()\n          formdata.append('file', blobInfo.blob(), blobInfo.name())\n          const { data: res } = await this.$http.post('upload', formdata)\n          succFun(res.url)\n          failFun(this.$message.error('上传图片失败'))\n        },\n        imagetools_cors_hosts: ['*'],\n        imagetools_proxy: '',\n      },\n      content: this.value,\n    }\n  },\n  watch: {\n    value(newV) {\n      this.content = newV\n    },\n    content(newV) {\n      this.$emit('input', newV)\n    },\n  },\n}\n</script>\n\n<style scoped>\n@import url('../../assets/tinymce/skins/ui/oxide/skin.min.css');\n@import url('../../assets/tinymce/skins/content/default/content.min.css');\n</style>\n"]},"metadata":{},"sourceType":"module"}