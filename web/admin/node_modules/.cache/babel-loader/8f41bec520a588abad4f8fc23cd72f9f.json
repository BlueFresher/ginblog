{"ast":null,"code":"require(\"core-js/modules/es.array.push.js\");require(\"core-js/modules/web.dom-exception.stack.js\");require(\"core-js/modules/es.typed-array.find-last.js\");require(\"core-js/modules/es.typed-array.find-last-index.js\");/**\n * TinyMCE version 6.2.0 (2022-09-08)\n */(function(){'use strict';var typeOf$1=function(x){if(x===null){return'null';}if(x===undefined){return'undefined';}var t=typeof x;if(t==='object'&&(Array.prototype.isPrototypeOf(x)||x.constructor&&x.constructor.name==='Array')){return'array';}if(t==='object'&&(String.prototype.isPrototypeOf(x)||x.constructor&&x.constructor.name==='String')){return'string';}return t;};var isEquatableType=function(x){return['undefined','boolean','number','string','function','xml','null'].indexOf(x)!==-1;};var sort$1=function(xs,compareFn){var clone=Array.prototype.slice.call(xs);return clone.sort(compareFn);};var contramap=function(eqa,f){return eq$2(function(x,y){return eqa.eq(f(x),f(y));});};var eq$2=function(f){return{eq:f};};var tripleEq=eq$2(function(x,y){return x===y;});var eqString=tripleEq;var eqArray=function(eqa){return eq$2(function(x,y){if(x.length!==y.length){return false;}var len=x.length;for(var i=0;i<len;i++){if(!eqa.eq(x[i],y[i])){return false;}}return true;});};var eqSortedArray=function(eqa,compareFn){return contramap(eqArray(eqa),function(xs){return sort$1(xs,compareFn);});};var eqRecord=function(eqa){return eq$2(function(x,y){var kx=Object.keys(x);var ky=Object.keys(y);if(!eqSortedArray(eqString).eq(kx,ky)){return false;}var len=kx.length;for(var i=0;i<len;i++){var q=kx[i];if(!eqa.eq(x[q],y[q])){return false;}}return true;});};var eqAny=eq$2(function(x,y){if(x===y){return true;}var tx=typeOf$1(x);var ty=typeOf$1(y);if(tx!==ty){return false;}if(isEquatableType(tx)){return x===y;}else if(tx==='array'){return eqArray(eqAny).eq(x,y);}else if(tx==='object'){return eqRecord(eqAny).eq(x,y);}return false;});const getPrototypeOf$1=Object.getPrototypeOf;const hasProto=(v,constructor,predicate)=>{var _a;if(predicate(v,constructor.prototype)){return true;}else{return((_a=v.constructor)===null||_a===void 0?void 0:_a.name)===constructor.name;}};const typeOf=x=>{const t=typeof x;if(x===null){return'null';}else if(t==='object'&&Array.isArray(x)){return'array';}else if(t==='object'&&hasProto(x,String,(o,proto)=>proto.isPrototypeOf(o))){return'string';}else{return t;}};const isType$1=type=>value=>typeOf(value)===type;const isSimpleType=type=>value=>typeof value===type;const eq$1=t=>a=>t===a;const is$4=(value,constructor)=>isObject(value)&&hasProto(value,constructor,(o,proto)=>getPrototypeOf$1(o)===proto);const isString=isType$1('string');const isObject=isType$1('object');const isPlainObject=value=>is$4(value,Object);const isArray$1=isType$1('array');const isNull=eq$1(null);const isBoolean=isSimpleType('boolean');const isUndefined=eq$1(undefined);const isNullable=a=>a===null||a===undefined;const isNonNullable=a=>!isNullable(a);const isFunction=isSimpleType('function');const isNumber=isSimpleType('number');const isArrayOf=(value,pred)=>{if(isArray$1(value)){for(let i=0,len=value.length;i<len;++i){if(!pred(value[i])){return false;}}return true;}return false;};const noop=()=>{};const compose=(fa,fb)=>{return(...args)=>{return fa(fb.apply(null,args));};};const compose1=(fbc,fab)=>a=>fbc(fab(a));const constant=value=>{return()=>{return value;};};const identity=x=>{return x;};const tripleEquals=(a,b)=>{return a===b;};function curry(fn,...initialArgs){return(...restArgs)=>{const all=initialArgs.concat(restArgs);return fn.apply(null,all);};}const not=f=>t=>!f(t);const die=msg=>{return()=>{throw new Error(msg);};};const apply$1=f=>{return f();};const call=f=>{f();};const never=constant(false);const always=constant(true);class Optional{constructor(tag,value){this.tag=tag;this.value=value;}static some(value){return new Optional(true,value);}static none(){return Optional.singletonNone;}fold(onNone,onSome){if(this.tag){return onSome(this.value);}else{return onNone();}}isSome(){return this.tag;}isNone(){return!this.tag;}map(mapper){if(this.tag){return Optional.some(mapper(this.value));}else{return Optional.none();}}bind(binder){if(this.tag){return binder(this.value);}else{return Optional.none();}}exists(predicate){return this.tag&&predicate(this.value);}forall(predicate){return!this.tag||predicate(this.value);}filter(predicate){if(!this.tag||predicate(this.value)){return this;}else{return Optional.none();}}getOr(replacement){return this.tag?this.value:replacement;}or(replacement){return this.tag?this:replacement;}getOrThunk(thunk){return this.tag?this.value:thunk();}orThunk(thunk){return this.tag?this:thunk();}getOrDie(message){if(!this.tag){throw new Error(message!==null&&message!==void 0?message:'Called getOrDie on None');}else{return this.value;}}static from(value){return isNonNullable(value)?Optional.some(value):Optional.none();}getOrNull(){return this.tag?this.value:null;}getOrUndefined(){return this.value;}each(worker){if(this.tag){worker(this.value);}}toArray(){return this.tag?[this.value]:[];}toString(){return this.tag?`some(${this.value})`:'none()';}}Optional.singletonNone=new Optional(false);const nativeSlice=Array.prototype.slice;const nativeIndexOf=Array.prototype.indexOf;const nativePush=Array.prototype.push;const rawIndexOf=(ts,t)=>nativeIndexOf.call(ts,t);const indexOf$1=(xs,x)=>{const r=rawIndexOf(xs,x);return r===-1?Optional.none():Optional.some(r);};const contains$2=(xs,x)=>rawIndexOf(xs,x)>-1;const exists=(xs,pred)=>{for(let i=0,len=xs.length;i<len;i++){const x=xs[i];if(pred(x,i)){return true;}}return false;};const map$3=(xs,f)=>{const len=xs.length;const r=new Array(len);for(let i=0;i<len;i++){const x=xs[i];r[i]=f(x,i);}return r;};const each$e=(xs,f)=>{for(let i=0,len=xs.length;i<len;i++){const x=xs[i];f(x,i);}};const eachr=(xs,f)=>{for(let i=xs.length-1;i>=0;i--){const x=xs[i];f(x,i);}};const partition$2=(xs,pred)=>{const pass=[];const fail=[];for(let i=0,len=xs.length;i<len;i++){const x=xs[i];const arr=pred(x,i)?pass:fail;arr.push(x);}return{pass,fail};};const filter$5=(xs,pred)=>{const r=[];for(let i=0,len=xs.length;i<len;i++){const x=xs[i];if(pred(x,i)){r.push(x);}}return r;};const foldr=(xs,f,acc)=>{eachr(xs,(x,i)=>{acc=f(acc,x,i);});return acc;};const foldl=(xs,f,acc)=>{each$e(xs,(x,i)=>{acc=f(acc,x,i);});return acc;};const findUntil$1=(xs,pred,until)=>{for(let i=0,len=xs.length;i<len;i++){const x=xs[i];if(pred(x,i)){return Optional.some(x);}else if(until(x,i)){break;}}return Optional.none();};const find$2=(xs,pred)=>{return findUntil$1(xs,pred,never);};const findIndex$2=(xs,pred)=>{for(let i=0,len=xs.length;i<len;i++){const x=xs[i];if(pred(x,i)){return Optional.some(i);}}return Optional.none();};const flatten=xs=>{const r=[];for(let i=0,len=xs.length;i<len;++i){if(!isArray$1(xs[i])){throw new Error('Arr.flatten item '+i+' was not an array, input: '+xs);}nativePush.apply(r,xs[i]);}return r;};const bind$3=(xs,f)=>flatten(map$3(xs,f));const forall=(xs,pred)=>{for(let i=0,len=xs.length;i<len;++i){const x=xs[i];if(pred(x,i)!==true){return false;}}return true;};const reverse=xs=>{const r=nativeSlice.call(xs,0);r.reverse();return r;};const difference=(a1,a2)=>filter$5(a1,x=>!contains$2(a2,x));const mapToObject=(xs,f)=>{const r={};for(let i=0,len=xs.length;i<len;i++){const x=xs[i];r[String(x)]=f(x,i);}return r;};const sort=(xs,comparator)=>{const copy=nativeSlice.call(xs,0);copy.sort(comparator);return copy;};const get$b=(xs,i)=>i>=0&&i<xs.length?Optional.some(xs[i]):Optional.none();const head=xs=>get$b(xs,0);const last$3=xs=>get$b(xs,xs.length-1);const from=isFunction(Array.from)?Array.from:x=>nativeSlice.call(x);const findMap=(arr,f)=>{for(let i=0;i<arr.length;i++){const r=f(arr[i],i);if(r.isSome()){return r;}}return Optional.none();};const unique$1=(xs,comparator)=>{const r=[];const isDuplicated=isFunction(comparator)?x=>exists(r,i=>comparator(i,x)):x=>contains$2(r,x);for(let i=0,len=xs.length;i<len;i++){const x=xs[i];if(!isDuplicated(x)){r.push(x);}}return r;};const keys=Object.keys;const hasOwnProperty$2=Object.hasOwnProperty;const each$d=(obj,f)=>{const props=keys(obj);for(let k=0,len=props.length;k<len;k++){const i=props[k];const x=obj[i];f(x,i);}};const map$2=(obj,f)=>{return tupleMap(obj,(x,i)=>({k:i,v:f(x,i)}));};const tupleMap=(obj,f)=>{const r={};each$d(obj,(x,i)=>{const tuple=f(x,i);r[tuple.k]=tuple.v;});return r;};const objAcc=r=>(x,i)=>{r[i]=x;};const internalFilter=(obj,pred,onTrue,onFalse)=>{each$d(obj,(x,i)=>{(pred(x,i)?onTrue:onFalse)(x,i);});};const bifilter=(obj,pred)=>{const t={};const f={};internalFilter(obj,pred,objAcc(t),objAcc(f));return{t,f};};const filter$4=(obj,pred)=>{const t={};internalFilter(obj,pred,objAcc(t),noop);return t;};const mapToArray=(obj,f)=>{const r=[];each$d(obj,(value,name)=>{r.push(f(value,name));});return r;};const values=obj=>{return mapToArray(obj,identity);};const get$a=(obj,key)=>{return has$2(obj,key)?Optional.from(obj[key]):Optional.none();};const has$2=(obj,key)=>hasOwnProperty$2.call(obj,key);const hasNonNullableKey=(obj,key)=>has$2(obj,key)&&obj[key]!==undefined&&obj[key]!==null;const equal$1=(a1,a2,eq=eqAny)=>eqRecord(eq).eq(a1,a2);const stringArray=a=>{const all={};each$e(a,key=>{all[key]={};});return keys(all);};const isArrayLike=o=>o.length!==undefined;const isArray=Array.isArray;const toArray$1=obj=>{if(!isArray(obj)){const array=[];for(let i=0,l=obj.length;i<l;i++){array[i]=obj[i];}return array;}else{return obj;}};const each$c=(o,cb,s)=>{if(!o){return false;}s=s||o;if(isArrayLike(o)){for(let n=0,l=o.length;n<l;n++){if(cb.call(s,o[n],n,o)===false){return false;}}}else{for(const n in o){if(has$2(o,n)){if(cb.call(s,o[n],n,o)===false){return false;}}}}return true;};const map$1=(array,callback)=>{const out=[];each$c(array,(item,index)=>{out.push(callback(item,index,array));});return out;};const filter$3=(a,f)=>{const o=[];each$c(a,(v,index)=>{if(!f||f(v,index,a)){o.push(v);}});return o;};const indexOf=(a,v)=>{if(a){for(let i=0,l=a.length;i<l;i++){if(a[i]===v){return i;}}}return-1;};const reduce=(collection,iteratee,accumulator,thisArg)=>{let acc=isUndefined(accumulator)?collection[0]:accumulator;for(let i=0;i<collection.length;i++){acc=iteratee.call(thisArg,acc,collection[i],i);}return acc;};const findIndex$1=(array,predicate,thisArg)=>{for(let i=0,l=array.length;i<l;i++){if(predicate.call(thisArg,array[i],i,array)){return i;}}return-1;};const last$2=collection=>collection[collection.length-1];const cached=f=>{let called=false;let r;return(...args)=>{if(!called){called=true;r=f.apply(null,args);}return r;};};const DeviceType=(os,browser,userAgent,mediaMatch)=>{const isiPad=os.isiOS()&&/ipad/i.test(userAgent)===true;const isiPhone=os.isiOS()&&!isiPad;const isMobile=os.isiOS()||os.isAndroid();const isTouch=isMobile||mediaMatch('(pointer:coarse)');const isTablet=isiPad||!isiPhone&&isMobile&&mediaMatch('(min-device-width:768px)');const isPhone=isiPhone||isMobile&&!isTablet;const iOSwebview=browser.isSafari()&&os.isiOS()&&/safari/i.test(userAgent)===false;const isDesktop=!isPhone&&!isTablet&&!iOSwebview;return{isiPad:constant(isiPad),isiPhone:constant(isiPhone),isTablet:constant(isTablet),isPhone:constant(isPhone),isTouch:constant(isTouch),isAndroid:os.isAndroid,isiOS:os.isiOS,isWebView:constant(iOSwebview),isDesktop:constant(isDesktop)};};const firstMatch=(regexes,s)=>{for(let i=0;i<regexes.length;i++){const x=regexes[i];if(x.test(s)){return x;}}return undefined;};const find$1=(regexes,agent)=>{const r=firstMatch(regexes,agent);if(!r){return{major:0,minor:0};}const group=i=>{return Number(agent.replace(r,'$'+i));};return nu$3(group(1),group(2));};const detect$5=(versionRegexes,agent)=>{const cleanedAgent=String(agent).toLowerCase();if(versionRegexes.length===0){return unknown$2();}return find$1(versionRegexes,cleanedAgent);};const unknown$2=()=>{return nu$3(0,0);};const nu$3=(major,minor)=>{return{major,minor};};const Version={nu:nu$3,detect:detect$5,unknown:unknown$2};const detectBrowser$1=(browsers,userAgentData)=>{return findMap(userAgentData.brands,uaBrand=>{const lcBrand=uaBrand.brand.toLowerCase();return find$2(browsers,browser=>{var _a;return lcBrand===((_a=browser.brand)===null||_a===void 0?void 0:_a.toLowerCase());}).map(info=>({current:info.name,version:Version.nu(parseInt(uaBrand.version,10),0)}));});};const detect$4=(candidates,userAgent)=>{const agent=String(userAgent).toLowerCase();return find$2(candidates,candidate=>{return candidate.search(agent);});};const detectBrowser=(browsers,userAgent)=>{return detect$4(browsers,userAgent).map(browser=>{const version=Version.detect(browser.versionRegexes,userAgent);return{current:browser.name,version};});};const detectOs=(oses,userAgent)=>{return detect$4(oses,userAgent).map(os=>{const version=Version.detect(os.versionRegexes,userAgent);return{current:os.name,version};});};const removeFromStart=(str,numChars)=>{return str.substring(numChars);};const checkRange=(str,substr,start)=>substr===''||str.length>=substr.length&&str.substr(start,start+substr.length)===substr;const removeLeading=(str,prefix)=>{return startsWith(str,prefix)?removeFromStart(str,prefix.length):str;};const contains$1=(str,substr,start=0,end)=>{const idx=str.indexOf(substr,start);if(idx!==-1){return isUndefined(end)?true:idx+substr.length<=end;}else{return false;}};const startsWith=(str,prefix)=>{return checkRange(str,prefix,0);};const endsWith=(str,suffix)=>{return checkRange(str,suffix,str.length-suffix.length);};const blank=r=>s=>s.replace(r,'');const trim$3=blank(/^\\s+|\\s+$/g);const lTrim=blank(/^\\s+/g);const rTrim=blank(/\\s+$/g);const isNotEmpty=s=>s.length>0;const isEmpty$3=s=>!isNotEmpty(s);const repeat=(s,count)=>count<=0?'':new Array(count+1).join(s);const toInt=(value,radix=10)=>{const num=parseInt(value,radix);return isNaN(num)?Optional.none():Optional.some(num);};const normalVersionRegex=/.*?version\\/\\ ?([0-9]+)\\.([0-9]+).*/;const checkContains=target=>{return uastring=>{return contains$1(uastring,target);};};const browsers=[{name:'Edge',versionRegexes:[/.*?edge\\/ ?([0-9]+)\\.([0-9]+)$/],search:uastring=>{return contains$1(uastring,'edge/')&&contains$1(uastring,'chrome')&&contains$1(uastring,'safari')&&contains$1(uastring,'applewebkit');}},{name:'Chromium',brand:'Chromium',versionRegexes:[/.*?chrome\\/([0-9]+)\\.([0-9]+).*/,normalVersionRegex],search:uastring=>{return contains$1(uastring,'chrome')&&!contains$1(uastring,'chromeframe');}},{name:'IE',versionRegexes:[/.*?msie\\ ?([0-9]+)\\.([0-9]+).*/,/.*?rv:([0-9]+)\\.([0-9]+).*/],search:uastring=>{return contains$1(uastring,'msie')||contains$1(uastring,'trident');}},{name:'Opera',versionRegexes:[normalVersionRegex,/.*?opera\\/([0-9]+)\\.([0-9]+).*/],search:checkContains('opera')},{name:'Firefox',versionRegexes:[/.*?firefox\\/\\ ?([0-9]+)\\.([0-9]+).*/],search:checkContains('firefox')},{name:'Safari',versionRegexes:[normalVersionRegex,/.*?cpu os ([0-9]+)_([0-9]+).*/],search:uastring=>{return(contains$1(uastring,'safari')||contains$1(uastring,'mobile/'))&&contains$1(uastring,'applewebkit');}}];const oses=[{name:'Windows',search:checkContains('win'),versionRegexes:[/.*?windows\\ nt\\ ?([0-9]+)\\.([0-9]+).*/]},{name:'iOS',search:uastring=>{return contains$1(uastring,'iphone')||contains$1(uastring,'ipad');},versionRegexes:[/.*?version\\/\\ ?([0-9]+)\\.([0-9]+).*/,/.*cpu os ([0-9]+)_([0-9]+).*/,/.*cpu iphone os ([0-9]+)_([0-9]+).*/]},{name:'Android',search:checkContains('android'),versionRegexes:[/.*?android\\ ?([0-9]+)\\.([0-9]+).*/]},{name:'macOS',search:checkContains('mac os x'),versionRegexes:[/.*?mac\\ os\\ x\\ ?([0-9]+)_([0-9]+).*/]},{name:'Linux',search:checkContains('linux'),versionRegexes:[]},{name:'Solaris',search:checkContains('sunos'),versionRegexes:[]},{name:'FreeBSD',search:checkContains('freebsd'),versionRegexes:[]},{name:'ChromeOS',search:checkContains('cros'),versionRegexes:[/.*?chrome\\/([0-9]+)\\.([0-9]+).*/]}];const PlatformInfo={browsers:constant(browsers),oses:constant(oses)};const edge='Edge';const chromium='Chromium';const ie='IE';const opera='Opera';const firefox='Firefox';const safari='Safari';const unknown$1=()=>{return nu$2({current:undefined,version:Version.unknown()});};const nu$2=info=>{const current=info.current;const version=info.version;const isBrowser=name=>()=>current===name;return{current,version,isEdge:isBrowser(edge),isChromium:isBrowser(chromium),isIE:isBrowser(ie),isOpera:isBrowser(opera),isFirefox:isBrowser(firefox),isSafari:isBrowser(safari)};};const Browser={unknown:unknown$1,nu:nu$2,edge:constant(edge),chromium:constant(chromium),ie:constant(ie),opera:constant(opera),firefox:constant(firefox),safari:constant(safari)};const windows='Windows';const ios='iOS';const android='Android';const linux='Linux';const macos='macOS';const solaris='Solaris';const freebsd='FreeBSD';const chromeos='ChromeOS';const unknown=()=>{return nu$1({current:undefined,version:Version.unknown()});};const nu$1=info=>{const current=info.current;const version=info.version;const isOS=name=>()=>current===name;return{current,version,isWindows:isOS(windows),isiOS:isOS(ios),isAndroid:isOS(android),isMacOS:isOS(macos),isLinux:isOS(linux),isSolaris:isOS(solaris),isFreeBSD:isOS(freebsd),isChromeOS:isOS(chromeos)};};const OperatingSystem={unknown,nu:nu$1,windows:constant(windows),ios:constant(ios),android:constant(android),linux:constant(linux),macos:constant(macos),solaris:constant(solaris),freebsd:constant(freebsd),chromeos:constant(chromeos)};const detect$3=(userAgent,userAgentDataOpt,mediaMatch)=>{const browsers=PlatformInfo.browsers();const oses=PlatformInfo.oses();const browser=userAgentDataOpt.bind(userAgentData=>detectBrowser$1(browsers,userAgentData)).orThunk(()=>detectBrowser(browsers,userAgent)).fold(Browser.unknown,Browser.nu);const os=detectOs(oses,userAgent).fold(OperatingSystem.unknown,OperatingSystem.nu);const deviceType=DeviceType(os,browser,userAgent,mediaMatch);return{browser,os,deviceType};};const PlatformDetection={detect:detect$3};const mediaMatch=query=>window.matchMedia(query).matches;let platform$2=cached(()=>PlatformDetection.detect(navigator.userAgent,Optional.from(navigator.userAgentData),mediaMatch));const detect$2=()=>platform$2();const userAgent=navigator.userAgent;const platform$1=detect$2();const browser$1=platform$1.browser;const os=platform$1.os;const deviceType=platform$1.deviceType;const windowsPhone=userAgent.indexOf('Windows Phone')!==-1;const Env={transparentSrc:'data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7',documentMode:browser$1.isIE()?document.documentMode||7:10,cacheSuffix:null,container:null,canHaveCSP:!browser$1.isIE(),windowsPhone,browser:{current:browser$1.current,version:browser$1.version,isChromium:browser$1.isChromium,isEdge:browser$1.isEdge,isFirefox:browser$1.isFirefox,isIE:browser$1.isIE,isOpera:browser$1.isOpera,isSafari:browser$1.isSafari},os:{current:os.current,version:os.version,isAndroid:os.isAndroid,isChromeOS:os.isChromeOS,isFreeBSD:os.isFreeBSD,isiOS:os.isiOS,isLinux:os.isLinux,isMacOS:os.isMacOS,isSolaris:os.isSolaris,isWindows:os.isWindows},deviceType:{isDesktop:deviceType.isDesktop,isiPad:deviceType.isiPad,isiPhone:deviceType.isiPhone,isPhone:deviceType.isPhone,isTablet:deviceType.isTablet,isTouch:deviceType.isTouch,isWebView:deviceType.isWebView}};const whiteSpaceRegExp$1=/^\\s*|\\s*$/g;const trim$2=str=>{return isNullable(str)?'':(''+str).replace(whiteSpaceRegExp$1,'');};const is$3=(obj,type)=>{if(!type){return obj!==undefined;}if(type==='array'&&isArray(obj)){return true;}return typeof obj===type;};const makeMap$4=(items,delim,map={})=>{const resolvedItems=isString(items)?items.split(delim||','):items||[];let i=resolvedItems.length;while(i--){map[resolvedItems[i]]={};}return map;};const hasOwnProperty$1=has$2;const extend$3=(obj,...exts)=>{for(let i=0;i<exts.length;i++){const ext=exts[i];for(const name in ext){if(has$2(ext,name)){const value=ext[name];if(value!==undefined){obj[name]=value;}}}}return obj;};const walk$4=function(o,f,n,s){s=s||this;if(o){if(n){o=o[n];}each$c(o,(o,i)=>{if(f.call(s,o,i,n)===false){return false;}else{walk$4(o,f,n,s);return true;}});}};const resolve$2=(n,o=window)=>{const path=n.split('.');for(let i=0,l=path.length;i<l;i++){o=o[path[i]];if(!o){break;}}return o;};const explode$3=(s,d)=>{if(isArray$1(s)){return s;}else if(s===''){return[];}else{return map$1(s.split(d||','),trim$2);}};const _addCacheSuffix=url=>{const cacheSuffix=Env.cacheSuffix;if(cacheSuffix){url+=(url.indexOf('?')===-1?'?':'&')+cacheSuffix;}return url;};const Tools={trim:trim$2,isArray:isArray,is:is$3,toArray:toArray$1,makeMap:makeMap$4,each:each$c,map:map$1,grep:filter$3,inArray:indexOf,hasOwn:hasOwnProperty$1,extend:extend$3,walk:walk$4,resolve:resolve$2,explode:explode$3,_addCacheSuffix};const is$2=(lhs,rhs,comparator=tripleEquals)=>lhs.exists(left=>comparator(left,rhs));const cat=arr=>{const r=[];const push=x=>{r.push(x);};for(let i=0;i<arr.length;i++){arr[i].each(push);}return r;};const lift2=(oa,ob,f)=>oa.isSome()&&ob.isSome()?Optional.some(f(oa.getOrDie(),ob.getOrDie())):Optional.none();const lift3=(oa,ob,oc,f)=>oa.isSome()&&ob.isSome()&&oc.isSome()?Optional.some(f(oa.getOrDie(),ob.getOrDie(),oc.getOrDie())):Optional.none();const someIf=(b,a)=>b?Optional.some(a):Optional.none();typeof window!=='undefined'?window:Function('return this;')();const COMMENT=8;const DOCUMENT=9;const DOCUMENT_FRAGMENT=11;const ELEMENT=1;const TEXT=3;const name=element=>{const r=element.dom.nodeName;return r.toLowerCase();};const type$1=element=>element.dom.nodeType;const isType=t=>element=>type$1(element)===t;const isComment$1=element=>type$1(element)===COMMENT||name(element)==='#comment';const isElement$7=isType(ELEMENT);const isText$b=isType(TEXT);const isDocument$2=isType(DOCUMENT);const isDocumentFragment$1=isType(DOCUMENT_FRAGMENT);const isTag=tag=>e=>isElement$7(e)&&name(e)===tag;const rawSet=(dom,key,value)=>{if(isString(value)||isBoolean(value)||isNumber(value)){dom.setAttribute(key,value+'');}else{console.error('Invalid call to Attribute.set. Key ',key,':: Value ',value,':: Element ',dom);throw new Error('Attribute value was not simple');}};const set$2=(element,key,value)=>{rawSet(element.dom,key,value);};const setAll$1=(element,attrs)=>{const dom=element.dom;each$d(attrs,(v,k)=>{rawSet(dom,k,v);});};const get$9=(element,key)=>{const v=element.dom.getAttribute(key);return v===null?undefined:v;};const getOpt=(element,key)=>Optional.from(get$9(element,key));const has$1=(element,key)=>{const dom=element.dom;return dom&&dom.hasAttribute?dom.hasAttribute(key):false;};const remove$b=(element,key)=>{element.dom.removeAttribute(key);};const hasNone=element=>{const attrs=element.dom.attributes;return attrs===undefined||attrs===null||attrs.length===0;};const clone$4=element=>foldl(element.dom.attributes,(acc,attr)=>{acc[attr.name]=attr.value;return acc;},{});const read$4=(element,attr)=>{const value=get$9(element,attr);return value===undefined||value===''?[]:value.split(' ');};const add$4=(element,attr,id)=>{const old=read$4(element,attr);const nu=old.concat([id]);set$2(element,attr,nu.join(' '));return true;};const remove$a=(element,attr,id)=>{const nu=filter$5(read$4(element,attr),v=>v!==id);if(nu.length>0){set$2(element,attr,nu.join(' '));}else{remove$b(element,attr);}return false;};const supports=element=>element.dom.classList!==undefined;const get$8=element=>read$4(element,'class');const add$3=(element,clazz)=>add$4(element,'class',clazz);const remove$9=(element,clazz)=>remove$a(element,'class',clazz);const toggle$2=(element,clazz)=>{if(contains$2(get$8(element),clazz)){return remove$9(element,clazz);}else{return add$3(element,clazz);}};const add$2=(element,clazz)=>{if(supports(element)){element.dom.classList.add(clazz);}else{add$3(element,clazz);}};const cleanClass=element=>{const classList=supports(element)?element.dom.classList:get$8(element);if(classList.length===0){remove$b(element,'class');}};const remove$8=(element,clazz)=>{if(supports(element)){const classList=element.dom.classList;classList.remove(clazz);}else{remove$9(element,clazz);}cleanClass(element);};const toggle$1=(element,clazz)=>{const result=supports(element)?element.dom.classList.toggle(clazz):toggle$2(element,clazz);cleanClass(element);return result;};const has=(element,clazz)=>supports(element)&&element.dom.classList.contains(clazz);const isSupported$1=dom=>dom.style!==undefined&&isFunction(dom.style.getPropertyValue);const fromHtml$1=(html,scope)=>{const doc=scope||document;const div=doc.createElement('div');div.innerHTML=html;if(!div.hasChildNodes()||div.childNodes.length>1){const message='HTML does not have a single root node';console.error(message,html);throw new Error(message);}return fromDom$2(div.childNodes[0]);};const fromTag=(tag,scope)=>{const doc=scope||document;const node=doc.createElement(tag);return fromDom$2(node);};const fromText=(text,scope)=>{const doc=scope||document;const node=doc.createTextNode(text);return fromDom$2(node);};const fromDom$2=node=>{if(node===null||node===undefined){throw new Error('Node cannot be null or undefined');}return{dom:node};};const fromPoint$2=(docElm,x,y)=>Optional.from(docElm.dom.elementFromPoint(x,y)).map(fromDom$2);const SugarElement={fromHtml:fromHtml$1,fromTag,fromText,fromDom:fromDom$2,fromPoint:fromPoint$2};const toArray=(target,f)=>{const r=[];const recurse=e=>{r.push(e);return f(e);};let cur=f(target);do{cur=cur.bind(recurse);}while(cur.isSome());return r;};const is$1=(element,selector)=>{const dom=element.dom;if(dom.nodeType!==ELEMENT){return false;}else{const elem=dom;if(elem.matches!==undefined){return elem.matches(selector);}else if(elem.msMatchesSelector!==undefined){return elem.msMatchesSelector(selector);}else if(elem.webkitMatchesSelector!==undefined){return elem.webkitMatchesSelector(selector);}else if(elem.mozMatchesSelector!==undefined){return elem.mozMatchesSelector(selector);}else{throw new Error('Browser lacks native selectors');}}};const bypassSelector=dom=>dom.nodeType!==ELEMENT&&dom.nodeType!==DOCUMENT&&dom.nodeType!==DOCUMENT_FRAGMENT||dom.childElementCount===0;const all=(selector,scope)=>{const base=scope===undefined?document:scope.dom;return bypassSelector(base)?[]:map$3(base.querySelectorAll(selector),SugarElement.fromDom);};const one=(selector,scope)=>{const base=scope===undefined?document:scope.dom;return bypassSelector(base)?Optional.none():Optional.from(base.querySelector(selector)).map(SugarElement.fromDom);};const eq=(e1,e2)=>e1.dom===e2.dom;const contains=(e1,e2)=>{const d1=e1.dom;const d2=e2.dom;return d1===d2?false:d1.contains(d2);};const owner$1=element=>SugarElement.fromDom(element.dom.ownerDocument);const documentOrOwner=dos=>isDocument$2(dos)?dos:owner$1(dos);const documentElement=element=>SugarElement.fromDom(documentOrOwner(element).dom.documentElement);const defaultView=element=>SugarElement.fromDom(documentOrOwner(element).dom.defaultView);const parent=element=>Optional.from(element.dom.parentNode).map(SugarElement.fromDom);const parentElement=element=>Optional.from(element.dom.parentElement).map(SugarElement.fromDom);const parents$1=(element,isRoot)=>{const stop=isFunction(isRoot)?isRoot:never;let dom=element.dom;const ret=[];while(dom.parentNode!==null&&dom.parentNode!==undefined){const rawParent=dom.parentNode;const p=SugarElement.fromDom(rawParent);ret.push(p);if(stop(p)===true){break;}else{dom=rawParent;}}return ret;};const siblings=element=>{const filterSelf=elements=>filter$5(elements,x=>!eq(element,x));return parent(element).map(children).map(filterSelf).getOr([]);};const prevSibling=element=>Optional.from(element.dom.previousSibling).map(SugarElement.fromDom);const nextSibling=element=>Optional.from(element.dom.nextSibling).map(SugarElement.fromDom);const prevSiblings=element=>reverse(toArray(element,prevSibling));const nextSiblings=element=>toArray(element,nextSibling);const children=element=>map$3(element.dom.childNodes,SugarElement.fromDom);const child$1=(element,index)=>{const cs=element.dom.childNodes;return Optional.from(cs[index]).map(SugarElement.fromDom);};const firstChild=element=>child$1(element,0);const lastChild=element=>child$1(element,element.dom.childNodes.length-1);const childNodesCount=element=>element.dom.childNodes.length;const getHead=doc=>{const b=doc.dom.head;if(b===null||b===undefined){throw new Error('Head is not available yet');}return SugarElement.fromDom(b);};const isShadowRoot=dos=>isDocumentFragment$1(dos)&&isNonNullable(dos.dom.host);const supported=isFunction(Element.prototype.attachShadow)&&isFunction(Node.prototype.getRootNode);const isSupported=constant(supported);const getRootNode=supported?e=>SugarElement.fromDom(e.dom.getRootNode()):documentOrOwner;const getStyleContainer=dos=>isShadowRoot(dos)?dos:getHead(documentOrOwner(dos));const getContentContainer=dos=>isShadowRoot(dos)?dos:SugarElement.fromDom(documentOrOwner(dos).dom.body);const getShadowRoot=e=>{const r=getRootNode(e);return isShadowRoot(r)?Optional.some(r):Optional.none();};const getShadowHost=e=>SugarElement.fromDom(e.dom.host);const getOriginalEventTarget=event=>{if(isSupported()&&isNonNullable(event.target)){const el=SugarElement.fromDom(event.target);if(isElement$7(el)&&isOpenShadowHost(el)){if(event.composed&&event.composedPath){const composedPath=event.composedPath();if(composedPath){return head(composedPath);}}}}return Optional.from(event.target);};const isOpenShadowHost=element=>isNonNullable(element.dom.shadowRoot);const inBody=element=>{const dom=isText$b(element)?element.dom.parentNode:element.dom;if(dom===undefined||dom===null||dom.ownerDocument===null){return false;}const doc=dom.ownerDocument;return getShadowRoot(SugarElement.fromDom(dom)).fold(()=>doc.body.contains(dom),compose1(inBody,getShadowHost));};const internalSet=(dom,property,value)=>{if(!isString(value)){console.error('Invalid call to CSS.set. Property ',property,':: Value ',value,':: Element ',dom);throw new Error('CSS value must be a string: '+value);}if(isSupported$1(dom)){dom.style.setProperty(property,value);}};const internalRemove=(dom,property)=>{if(isSupported$1(dom)){dom.style.removeProperty(property);}};const set$1=(element,property,value)=>{const dom=element.dom;internalSet(dom,property,value);};const setAll=(element,css)=>{const dom=element.dom;each$d(css,(v,k)=>{internalSet(dom,k,v);});};const get$7=(element,property)=>{const dom=element.dom;const styles=window.getComputedStyle(dom);const r=styles.getPropertyValue(property);return r===''&&!inBody(element)?getUnsafeProperty(dom,property):r;};const getUnsafeProperty=(dom,property)=>isSupported$1(dom)?dom.style.getPropertyValue(property):'';const getRaw$1=(element,property)=>{const dom=element.dom;const raw=getUnsafeProperty(dom,property);return Optional.from(raw).filter(r=>r.length>0);};const getAllRaw=element=>{const css={};const dom=element.dom;if(isSupported$1(dom)){for(let i=0;i<dom.style.length;i++){const ruleName=dom.style.item(i);css[ruleName]=dom.style[ruleName];}}return css;};const remove$7=(element,property)=>{const dom=element.dom;internalRemove(dom,property);if(is$2(getOpt(element,'style').map(trim$3),'')){remove$b(element,'style');}};const reflow=e=>e.dom.offsetWidth;const before$3=(marker,element)=>{const parent$1=parent(marker);parent$1.each(v=>{v.dom.insertBefore(element.dom,marker.dom);});};const after$4=(marker,element)=>{const sibling=nextSibling(marker);sibling.fold(()=>{const parent$1=parent(marker);parent$1.each(v=>{append$1(v,element);});},v=>{before$3(v,element);});};const prepend=(parent,element)=>{const firstChild$1=firstChild(parent);firstChild$1.fold(()=>{append$1(parent,element);},v=>{parent.dom.insertBefore(element.dom,v.dom);});};const append$1=(parent,element)=>{parent.dom.appendChild(element.dom);};const wrap$2=(element,wrapper)=>{before$3(element,wrapper);append$1(wrapper,element);};const after$3=(marker,elements)=>{each$e(elements,(x,i)=>{const e=i===0?marker:elements[i-1];after$4(e,x);});};const append=(parent,elements)=>{each$e(elements,x=>{append$1(parent,x);});};const empty=element=>{element.dom.textContent='';each$e(children(element),rogue=>{remove$6(rogue);});};const remove$6=element=>{const dom=element.dom;if(dom.parentNode!==null){dom.parentNode.removeChild(dom);}};const unwrap=wrapper=>{const children$1=children(wrapper);if(children$1.length>0){after$3(wrapper,children$1);}remove$6(wrapper);};const fromHtml=(html,scope)=>{const doc=scope||document;const div=doc.createElement('div');div.innerHTML=html;return children(SugarElement.fromDom(div));};const fromDom$1=nodes=>map$3(nodes,SugarElement.fromDom);const get$6=element=>element.dom.innerHTML;const set=(element,content)=>{const owner=owner$1(element);const docDom=owner.dom;const fragment=SugarElement.fromDom(docDom.createDocumentFragment());const contentElements=fromHtml(content,docDom);append(fragment,contentElements);empty(element);append$1(element,fragment);};const getOuter=element=>{const container=SugarElement.fromTag('div');const clone=SugarElement.fromDom(element.dom.cloneNode(true));append$1(container,clone);return get$6(container);};const mkEvent=(target,x,y,stop,prevent,kill,raw)=>({target,x,y,stop,prevent,kill,raw});const fromRawEvent=rawEvent=>{const target=SugarElement.fromDom(getOriginalEventTarget(rawEvent).getOr(rawEvent.target));const stop=()=>rawEvent.stopPropagation();const prevent=()=>rawEvent.preventDefault();const kill=compose(prevent,stop);return mkEvent(target,rawEvent.clientX,rawEvent.clientY,stop,prevent,kill,rawEvent);};const handle$1=(filter,handler)=>rawEvent=>{if(filter(rawEvent)){handler(fromRawEvent(rawEvent));}};const binder=(element,event,filter,handler,useCapture)=>{const wrapped=handle$1(filter,handler);element.dom.addEventListener(event,wrapped,useCapture);return{unbind:curry(unbind,element,event,wrapped,useCapture)};};const bind$2=(element,event,filter,handler)=>binder(element,event,filter,handler,false);const unbind=(element,event,handler,useCapture)=>{element.dom.removeEventListener(event,handler,useCapture);};const r=(left,top)=>{const translate=(x,y)=>r(left+x,top+y);return{left,top,translate};};const SugarPosition=r;const boxPosition=dom=>{const box=dom.getBoundingClientRect();return SugarPosition(box.left,box.top);};const firstDefinedOrZero=(a,b)=>{if(a!==undefined){return a;}else{return b!==undefined?b:0;}};const absolute=element=>{const doc=element.dom.ownerDocument;const body=doc.body;const win=doc.defaultView;const html=doc.documentElement;if(body===element.dom){return SugarPosition(body.offsetLeft,body.offsetTop);}const scrollTop=firstDefinedOrZero(win===null||win===void 0?void 0:win.pageYOffset,html.scrollTop);const scrollLeft=firstDefinedOrZero(win===null||win===void 0?void 0:win.pageXOffset,html.scrollLeft);const clientTop=firstDefinedOrZero(html.clientTop,body.clientTop);const clientLeft=firstDefinedOrZero(html.clientLeft,body.clientLeft);return viewport(element).translate(scrollLeft-clientLeft,scrollTop-clientTop);};const viewport=element=>{const dom=element.dom;const doc=dom.ownerDocument;const body=doc.body;if(body===dom){return SugarPosition(body.offsetLeft,body.offsetTop);}if(!inBody(element)){return SugarPosition(0,0);}return boxPosition(dom);};const get$5=_DOC=>{const doc=_DOC!==undefined?_DOC.dom:document;const x=doc.body.scrollLeft||doc.documentElement.scrollLeft;const y=doc.body.scrollTop||doc.documentElement.scrollTop;return SugarPosition(x,y);};const to=(x,y,_DOC)=>{const doc=_DOC!==undefined?_DOC.dom:document;const win=doc.defaultView;if(win){win.scrollTo(x,y);}};const intoView=(element,alignToTop)=>{const isSafari=detect$2().browser.isSafari();if(isSafari&&isFunction(element.dom.scrollIntoViewIfNeeded)){element.dom.scrollIntoViewIfNeeded(false);}else{element.dom.scrollIntoView(alignToTop);}};const get$4=_win=>{const win=_win===undefined?window:_win;if(detect$2().browser.isFirefox()){return Optional.none();}else{return Optional.from(win.visualViewport);}};const bounds=(x,y,width,height)=>({x,y,width,height,right:x+width,bottom:y+height});const getBounds=_win=>{const win=_win===undefined?window:_win;const doc=win.document;const scroll=get$5(SugarElement.fromDom(doc));return get$4(win).fold(()=>{const html=win.document.documentElement;const width=html.clientWidth;const height=html.clientHeight;return bounds(scroll.left,scroll.top,width,height);},visualViewport=>bounds(Math.max(visualViewport.pageLeft,scroll.left),Math.max(visualViewport.pageTop,scroll.top),visualViewport.width,visualViewport.height));};const isNodeType=type=>{return node=>{return!!node&&node.nodeType===type;};};const isRestrictedNode=node=>!!node&&!Object.getPrototypeOf(node);const isElement$6=isNodeType(1);const matchNodeName=name=>{const lowerCasedName=name.toLowerCase();return node=>isNonNullable(node)&&node.nodeName.toLowerCase()===lowerCasedName;};const matchNodeNames=names=>{const lowerCasedNames=names.map(s=>s.toLowerCase());return node=>{if(node&&node.nodeName){const nodeName=node.nodeName.toLowerCase();return contains$2(lowerCasedNames,nodeName);}return false;};};const matchStyleValues=(name,values)=>{const items=values.toLowerCase().split(' ');return node=>{if(isElement$6(node)){const win=node.ownerDocument.defaultView;if(win){for(let i=0;i<items.length;i++){const computed=win.getComputedStyle(node,null);const cssValue=computed?computed.getPropertyValue(name):null;if(cssValue===items[i]){return true;}}}}return false;};};const hasAttribute=attrName=>{return node=>{return isElement$6(node)&&node.hasAttribute(attrName);};};const hasAttributeValue=(attrName,attrValue)=>{return node=>{return isElement$6(node)&&node.getAttribute(attrName)===attrValue;};};const isBogus$2=node=>isElement$6(node)&&node.hasAttribute('data-mce-bogus');const isBogusAll$1=node=>isElement$6(node)&&node.getAttribute('data-mce-bogus')==='all';const isTable$2=node=>isElement$6(node)&&node.tagName==='TABLE';const hasContentEditableState=value=>{return node=>{if(isElement$6(node)){if(node.contentEditable===value){return true;}if(node.getAttribute('data-mce-contenteditable')===value){return true;}}return false;};};const isTextareaOrInput=matchNodeNames(['textarea','input']);const isText$a=isNodeType(3);const isCData=isNodeType(4);const isPi=isNodeType(7);const isComment=isNodeType(8);const isDocument$1=isNodeType(9);const isDocumentFragment=isNodeType(11);const isBr$6=matchNodeName('br');const isImg=matchNodeName('img');const isContentEditableTrue$3=hasContentEditableState('true');const isContentEditableFalse$a=hasContentEditableState('false');const isTableCell$3=matchNodeNames(['td','th']);const isTableCellOrCaption=matchNodeNames(['td','th','caption']);const isMedia$2=matchNodeNames(['video','audio','object','embed']);const isListItem$2=matchNodeName('li');const browser=detect$2().browser;const firstElement=nodes=>find$2(nodes,isElement$7);const getTableCaptionDeltaY=elm=>{if(browser.isFirefox()&&name(elm)==='table'){return firstElement(children(elm)).filter(elm=>{return name(elm)==='caption';}).bind(caption=>{return firstElement(nextSiblings(caption)).map(body=>{const bodyTop=body.dom.offsetTop;const captionTop=caption.dom.offsetTop;const captionHeight=caption.dom.offsetHeight;return bodyTop<=captionTop?-captionHeight:0;});}).getOr(0);}else{return 0;}};const hasChild=(elm,child)=>elm.children&&contains$2(elm.children,child);const getPos=(body,elm,rootElm)=>{let x=0,y=0;const doc=body.ownerDocument;rootElm=rootElm?rootElm:body;if(elm){if(rootElm===body&&elm.getBoundingClientRect&&get$7(SugarElement.fromDom(body),'position')==='static'){const pos=elm.getBoundingClientRect();x=pos.left+(doc.documentElement.scrollLeft||body.scrollLeft)-doc.documentElement.clientLeft;y=pos.top+(doc.documentElement.scrollTop||body.scrollTop)-doc.documentElement.clientTop;return{x,y};}let offsetParent=elm;while(offsetParent&&offsetParent!==rootElm&&offsetParent.nodeType&&!hasChild(offsetParent,rootElm)){const castOffsetParent=offsetParent;x+=castOffsetParent.offsetLeft||0;y+=castOffsetParent.offsetTop||0;offsetParent=castOffsetParent.offsetParent;}offsetParent=elm.parentNode;while(offsetParent&&offsetParent!==rootElm&&offsetParent.nodeType&&!hasChild(offsetParent,rootElm)){x-=offsetParent.scrollLeft||0;y-=offsetParent.scrollTop||0;offsetParent=offsetParent.parentNode;}y+=getTableCaptionDeltaY(SugarElement.fromDom(elm));}return{x,y};};var ClosestOrAncestor=(is,ancestor,scope,a,isRoot)=>{if(is(scope,a)){return Optional.some(scope);}else if(isFunction(isRoot)&&isRoot(scope)){return Optional.none();}else{return ancestor(scope,a,isRoot);}};const ancestor$3=(scope,predicate,isRoot)=>{let element=scope.dom;const stop=isFunction(isRoot)?isRoot:never;while(element.parentNode){element=element.parentNode;const el=SugarElement.fromDom(element);if(predicate(el)){return Optional.some(el);}else if(stop(el)){break;}}return Optional.none();};const closest$4=(scope,predicate,isRoot)=>{const is=(s,test)=>test(s);return ClosestOrAncestor(is,ancestor$3,scope,predicate,isRoot);};const sibling$1=(scope,predicate)=>{const element=scope.dom;if(!element.parentNode){return Optional.none();}return child(SugarElement.fromDom(element.parentNode),x=>!eq(scope,x)&&predicate(x));};const child=(scope,predicate)=>{const pred=node=>predicate(SugarElement.fromDom(node));const result=find$2(scope.dom.childNodes,pred);return result.map(SugarElement.fromDom);};const descendant$1=(scope,predicate)=>{const descend=node=>{for(let i=0;i<node.childNodes.length;i++){const child=SugarElement.fromDom(node.childNodes[i]);if(predicate(child)){return Optional.some(child);}const res=descend(node.childNodes[i]);if(res.isSome()){return res;}}return Optional.none();};return descend(scope.dom);};const ancestor$2=(scope,selector,isRoot)=>ancestor$3(scope,e=>is$1(e,selector),isRoot);const descendant=(scope,selector)=>one(selector,scope);const closest$3=(scope,selector,isRoot)=>{const is=(element,selector)=>is$1(element,selector);return ClosestOrAncestor(is,ancestor$2,scope,selector,isRoot);};const StyleSheetLoader=(documentOrShadowRoot,settings={})=>{let idCount=0;const loadedStates={};const edos=SugarElement.fromDom(documentOrShadowRoot);const doc=documentOrOwner(edos);const maxLoadTime=settings.maxLoadTime||5000;const _setReferrerPolicy=referrerPolicy=>{settings.referrerPolicy=referrerPolicy;};const addStyle=element=>{append$1(getStyleContainer(edos),element);};const removeStyle=id=>{const styleContainer=getStyleContainer(edos);descendant(styleContainer,'#'+id).each(remove$6);};const getOrCreateState=url=>get$a(loadedStates,url).getOrThunk(()=>({id:'mce-u'+idCount++,passed:[],failed:[],count:0}));const load=url=>new Promise((success,failure)=>{let link;const urlWithSuffix=Tools._addCacheSuffix(url);const state=getOrCreateState(urlWithSuffix);loadedStates[urlWithSuffix]=state;state.count++;const resolve=(callbacks,status)=>{each$e(callbacks,call);state.status=status;state.passed=[];state.failed=[];if(link){link.onload=null;link.onerror=null;link=null;}};const passed=()=>resolve(state.passed,2);const failed=()=>resolve(state.failed,3);const wait=(testCallback,waitCallback)=>{if(!testCallback()){if(Date.now()-startTime<maxLoadTime){setTimeout(waitCallback);}else{failed();}}};const waitForWebKitLinkLoaded=()=>{wait(()=>{const styleSheets=documentOrShadowRoot.styleSheets;let i=styleSheets.length;while(i--){const styleSheet=styleSheets[i];const owner=styleSheet.ownerNode;if(owner&&link&&owner.id===link.id){passed();return true;}}return false;},waitForWebKitLinkLoaded);};if(success){state.passed.push(success);}if(failure){state.failed.push(failure);}if(state.status===1){return;}if(state.status===2){passed();return;}if(state.status===3){failed();return;}state.status=1;const linkElem=SugarElement.fromTag('link',doc.dom);setAll$1(linkElem,{rel:'stylesheet',type:'text/css',id:state.id});const startTime=Date.now();if(settings.contentCssCors){set$2(linkElem,'crossOrigin','anonymous');}if(settings.referrerPolicy){set$2(linkElem,'referrerpolicy',settings.referrerPolicy);}link=linkElem.dom;link.onload=waitForWebKitLinkLoaded;link.onerror=failed;addStyle(linkElem);set$2(linkElem,'href',urlWithSuffix);});const loadAll=urls=>{const loadedUrls=Promise.allSettled(map$3(urls,url=>load(url).then(constant(url))));return loadedUrls.then(results=>{const parts=partition$2(results,r=>r.status==='fulfilled');if(parts.fail.length>0){return Promise.reject(map$3(parts.fail,result=>result.reason));}else{return map$3(parts.pass,result=>result.value);}});};const unload=url=>{const urlWithSuffix=Tools._addCacheSuffix(url);get$a(loadedStates,urlWithSuffix).each(state=>{const count=--state.count;if(count===0){delete loadedStates[urlWithSuffix];removeStyle(state.id);}});};const unloadAll=urls=>{each$e(urls,url=>{unload(url);});};return{load,loadAll,unload,unloadAll,_setReferrerPolicy};};const create$d=()=>{const map=new WeakMap();const forElement=(referenceElement,settings)=>{const root=getRootNode(referenceElement);const rootDom=root.dom;return Optional.from(map.get(rootDom)).getOrThunk(()=>{const sl=StyleSheetLoader(rootDom,settings);map.set(rootDom,sl);return sl;});};return{forElement};};const instance=create$d();class DomTreeWalker{constructor(startNode,rootNode){this.node=startNode;this.rootNode=rootNode;this.current=this.current.bind(this);this.next=this.next.bind(this);this.prev=this.prev.bind(this);this.prev2=this.prev2.bind(this);}current(){return this.node;}next(shallow){this.node=this.findSibling(this.node,'firstChild','nextSibling',shallow);return this.node;}prev(shallow){this.node=this.findSibling(this.node,'lastChild','previousSibling',shallow);return this.node;}prev2(shallow){this.node=this.findPreviousNode(this.node,shallow);return this.node;}findSibling(node,startName,siblingName,shallow){if(node){if(!shallow&&node[startName]){return node[startName];}if(node!==this.rootNode){let sibling=node[siblingName];if(sibling){return sibling;}for(let parent=node.parentNode;parent&&parent!==this.rootNode;parent=parent.parentNode){sibling=parent[siblingName];if(sibling){return sibling;}}}}return undefined;}findPreviousNode(node,shallow){if(node){const sibling=node.previousSibling;if(this.rootNode&&sibling===this.rootNode){return;}if(sibling){if(!shallow){for(let child=sibling.lastChild;child;child=child.lastChild){if(!child.lastChild){return child;}}}return sibling;}const parent=node.parentNode;if(parent&&parent!==this.rootNode){return parent;}}return undefined;}}const blocks=['article','aside','details','div','dt','figcaption','footer','form','fieldset','header','hgroup','html','main','nav','section','summary','body','p','dl','multicol','dd','figure','address','center','blockquote','h1','h2','h3','h4','h5','h6','listing','xmp','pre','plaintext','menu','dir','ul','ol','li','hr','table','tbody','thead','tfoot','th','tr','td','caption'];const tableCells=['td','th'];const tableSections=['thead','tbody','tfoot'];const textBlocks=['h1','h2','h3','h4','h5','h6','p','div','address','pre','form','blockquote','center','dir','fieldset','header','footer','article','section','hgroup','aside','nav','figure'];const headings=['h1','h2','h3','h4','h5','h6'];const listItems$1=['li','dd','dt'];const lists=['ul','ol','dl'];const wsElements=['pre','script','textarea','style'];const wrapBlockElements=['pre'].concat(headings);const lazyLookup=items=>{let lookup;return node=>{lookup=lookup?lookup:mapToObject(items,always);return has$2(lookup,name(node));};};const isBlock$2=lazyLookup(blocks);const isTable$1=node=>name(node)==='table';const isInline$1=node=>isElement$7(node)&&!isBlock$2(node);const isBr$5=node=>isElement$7(node)&&name(node)==='br';const isTextBlock$2=lazyLookup(textBlocks);const isList=lazyLookup(lists);const isListItem$1=lazyLookup(listItems$1);const isTableSection=lazyLookup(tableSections);const isTableCell$2=lazyLookup(tableCells);const isWsPreserveElement=lazyLookup(wsElements);const isWrapBlockElement=lazyLookup(wrapBlockElements);const isWrapElement=node=>isWrapBlockElement(node)||isInline$1(node);const ancestor$1=(scope,selector,isRoot)=>ancestor$2(scope,selector,isRoot).isSome();const zeroWidth='\\uFEFF';const nbsp='\\xA0';const isZwsp$1=char=>char===zeroWidth;const removeZwsp=s=>s.replace(/\\uFEFF/g,'');const descendants$1=(scope,predicate)=>{let result=[];each$e(children(scope),x=>{if(predicate(x)){result=result.concat([x]);}result=result.concat(descendants$1(x,predicate));});return result;};const descendants=(scope,selector)=>all(selector,scope);const NodeValue=(is,name)=>{const get=element=>{if(!is(element)){throw new Error('Can only get '+name+' value of a '+name+' node');}return getOption(element).getOr('');};const getOption=element=>is(element)?Optional.from(element.dom.nodeValue):Optional.none();const set=(element,value)=>{if(!is(element)){throw new Error('Can only set raw '+name+' value of a '+name+' node');}element.dom.nodeValue=value;};return{get,getOption,set};};const api$1=NodeValue(isText$b,'text');const get$3=element=>api$1.get(element);const getOption=element=>api$1.getOption(element);const getLastChildren$1=elm=>{const children=[];let rawNode=elm.dom;while(rawNode){children.push(SugarElement.fromDom(rawNode));rawNode=rawNode.lastChild;}return children;};const removeTrailingBr=elm=>{const allBrs=descendants(elm,'br');const brs=filter$5(getLastChildren$1(elm).slice(-1),isBr$5);if(allBrs.length===brs.length){each$e(brs,remove$6);}};const createPaddingBr=()=>{const br=SugarElement.fromTag('br');set$2(br,'data-mce-bogus','1');return br;};const fillWithPaddingBr=elm=>{empty(elm);append$1(elm,createPaddingBr());};const trimBlockTrailingBr=elm=>{lastChild(elm).each(lastChild=>{prevSibling(lastChild).each(lastChildPrevSibling=>{if(isBlock$2(elm)&&isBr$5(lastChild)&&isBlock$2(lastChildPrevSibling)){remove$6(lastChild);}});});};const ZWSP$1=zeroWidth;const isZwsp=isZwsp$1;const trim$1=removeZwsp;const isElement$5=isElement$6;const isText$9=isText$a;const isCaretContainerBlock$1=node=>{if(isText$9(node)){node=node.parentNode;}return isElement$5(node)&&node.hasAttribute('data-mce-caret');};const isCaretContainerInline=node=>isText$9(node)&&isZwsp(node.data);const isCaretContainer$2=node=>isCaretContainerBlock$1(node)||isCaretContainerInline(node);const hasContent=node=>node.firstChild!==node.lastChild||!isBr$6(node.firstChild);const insertInline$1=(node,before)=>{var _a;const doc=(_a=node.ownerDocument)!==null&&_a!==void 0?_a:document;const textNode=doc.createTextNode(ZWSP$1);const parentNode=node.parentNode;if(!before){const sibling=node.nextSibling;if(isText$9(sibling)){if(isCaretContainer$2(sibling)){return sibling;}if(startsWithCaretContainer$1(sibling)){sibling.splitText(1);return sibling;}}if(node.nextSibling){parentNode===null||parentNode===void 0?void 0:parentNode.insertBefore(textNode,node.nextSibling);}else{parentNode===null||parentNode===void 0?void 0:parentNode.appendChild(textNode);}}else{const sibling=node.previousSibling;if(isText$9(sibling)){if(isCaretContainer$2(sibling)){return sibling;}if(endsWithCaretContainer$1(sibling)){return sibling.splitText(sibling.data.length-1);}}parentNode===null||parentNode===void 0?void 0:parentNode.insertBefore(textNode,node);}return textNode;};const isBeforeInline=pos=>{const container=pos.container();if(!isText$a(container)){return false;}return container.data.charAt(pos.offset())===ZWSP$1||pos.isAtStart()&&isCaretContainerInline(container.previousSibling);};const isAfterInline=pos=>{const container=pos.container();if(!isText$a(container)){return false;}return container.data.charAt(pos.offset()-1)===ZWSP$1||pos.isAtEnd()&&isCaretContainerInline(container.nextSibling);};const insertBlock=(blockName,node,before)=>{var _a;const doc=(_a=node.ownerDocument)!==null&&_a!==void 0?_a:document;const blockNode=doc.createElement(blockName);blockNode.setAttribute('data-mce-caret',before?'before':'after');blockNode.setAttribute('data-mce-bogus','all');blockNode.appendChild(createPaddingBr().dom);const parentNode=node.parentNode;if(!before){if(node.nextSibling){parentNode===null||parentNode===void 0?void 0:parentNode.insertBefore(blockNode,node.nextSibling);}else{parentNode===null||parentNode===void 0?void 0:parentNode.appendChild(blockNode);}}else{parentNode===null||parentNode===void 0?void 0:parentNode.insertBefore(blockNode,node);}return blockNode;};const startsWithCaretContainer$1=node=>isText$9(node)&&node.data[0]===ZWSP$1;const endsWithCaretContainer$1=node=>isText$9(node)&&node.data[node.data.length-1]===ZWSP$1;const trimBogusBr=elm=>{var _a;const brs=elm.getElementsByTagName('br');const lastBr=brs[brs.length-1];if(isBogus$2(lastBr)){(_a=lastBr.parentNode)===null||_a===void 0?void 0:_a.removeChild(lastBr);}};const showCaretContainerBlock=caretContainer=>{if(caretContainer&&caretContainer.hasAttribute('data-mce-caret')){trimBogusBr(caretContainer);caretContainer.removeAttribute('data-mce-caret');caretContainer.removeAttribute('data-mce-bogus');caretContainer.removeAttribute('style');caretContainer.removeAttribute('data-mce-style');caretContainer.removeAttribute('_moz_abspos');return caretContainer;}return null;};const isRangeInCaretContainerBlock=range=>isCaretContainerBlock$1(range.startContainer);const isContentEditableTrue$2=isContentEditableTrue$3;const isContentEditableFalse$9=isContentEditableFalse$a;const isBr$4=isBr$6;const isText$8=isText$a;const isInvalidTextElement=matchNodeNames(['script','style','textarea']);const isAtomicInline=matchNodeNames(['img','input','textarea','hr','iframe','video','audio','object','embed']);const isTable=matchNodeNames(['table']);const isCaretContainer$1=isCaretContainer$2;const isCaretCandidate$3=node=>{if(isCaretContainer$1(node)){return false;}if(isText$8(node)){return!isInvalidTextElement(node.parentNode);}return isAtomicInline(node)||isBr$4(node)||isTable(node)||isNonUiContentEditableFalse(node);};const isUnselectable=node=>isElement$6(node)&&node.getAttribute('unselectable')==='true';const isNonUiContentEditableFalse=node=>!isUnselectable(node)&&isContentEditableFalse$9(node);const isInEditable=(node,root)=>{for(let tempNode=node.parentNode;tempNode&&tempNode!==root;tempNode=tempNode.parentNode){if(isNonUiContentEditableFalse(tempNode)){return false;}if(isContentEditableTrue$2(tempNode)){return true;}}return true;};const isAtomicContentEditableFalse=node=>{if(!isNonUiContentEditableFalse(node)){return false;}return!foldl(from(node.getElementsByTagName('*')),(result,elm)=>{return result||isContentEditableTrue$2(elm);},false);};const isAtomic$1=node=>isAtomicInline(node)||isAtomicContentEditableFalse(node);const isEditableCaretCandidate$1=(node,root)=>isCaretCandidate$3(node)&&isInEditable(node,root);const whiteSpaceRegExp=/^[ \\t\\r\\n]*$/;const isWhitespaceText=text=>whiteSpaceRegExp.test(text);const isCollapsibleWhitespace$1=c=>' \\f\\t\\x0B'.indexOf(c)!==-1;const isNewLineChar=c=>c==='\\n'||c==='\\r';const isNewline=(text,idx)=>idx<text.length&&idx>=0?isNewLineChar(text[idx]):false;const normalize$4=(text,tabSpaces=4,isStartOfContent=true,isEndOfContent=true)=>{const tabSpace=repeat(' ',tabSpaces);const normalizedText=text.replace(/\\t/g,tabSpace);const result=foldl(normalizedText,(acc,c)=>{if(isCollapsibleWhitespace$1(c)||c===nbsp){if(acc.pcIsSpace||acc.str===''&&isStartOfContent||acc.str.length===normalizedText.length-1&&isEndOfContent||isNewline(normalizedText,acc.str.length+1)){return{pcIsSpace:false,str:acc.str+nbsp};}else{return{pcIsSpace:true,str:acc.str+' '};}}else{return{pcIsSpace:isNewLineChar(c),str:acc.str+c};}},{pcIsSpace:false,str:''});return result.str;};const hasWhitespacePreserveParent=(node,rootNode)=>{const rootElement=SugarElement.fromDom(rootNode);const startNode=SugarElement.fromDom(node);return ancestor$1(startNode,'pre,code',curry(eq,rootElement));};const isWhitespace$1=(node,rootNode)=>{return isText$a(node)&&isWhitespaceText(node.data)&&!hasWhitespacePreserveParent(node,rootNode);};const isNamedAnchor=node=>{return isElement$6(node)&&node.nodeName==='A'&&!node.hasAttribute('href')&&(node.hasAttribute('name')||node.hasAttribute('id'));};const isContent$1=(node,rootNode)=>{return isCaretCandidate$3(node)&&!isWhitespace$1(node,rootNode)||isNamedAnchor(node)||isBookmark(node);};const isBookmark=hasAttribute('data-mce-bookmark');const isBogus$1=hasAttribute('data-mce-bogus');const isBogusAll=hasAttributeValue('data-mce-bogus','all');const isEmptyNode=(targetNode,skipBogus)=>{let brCount=0;if(isContent$1(targetNode,targetNode)){return false;}else{let node=targetNode.firstChild;if(!node){return true;}const walker=new DomTreeWalker(node,targetNode);do{if(skipBogus){if(isBogusAll(node)){node=walker.next(true);continue;}if(isBogus$1(node)){node=walker.next();continue;}}if(isBr$6(node)){brCount++;node=walker.next();continue;}if(isContent$1(node,targetNode)){return false;}node=walker.next();}while(node);return brCount<=1;}};const isEmpty$2=(elm,skipBogus=true)=>isEmptyNode(elm.dom,skipBogus);const isSpan=node=>node.nodeName.toLowerCase()==='span';const isInlineContent=(node,root)=>isNonNullable(node)&&(isContent$1(node,root)||isInline$1(SugarElement.fromDom(node)));const surroundedByInlineContent=(node,root)=>{const prev=new DomTreeWalker(node,root).prev(false);const next=new DomTreeWalker(node,root).next(false);const prevIsInline=isUndefined(prev)||isInlineContent(prev,root);const nextIsInline=isUndefined(next)||isInlineContent(next,root);return prevIsInline&&nextIsInline;};const isBookmarkNode$2=node=>isSpan(node)&&node.getAttribute('data-mce-type')==='bookmark';const isKeepTextNode=(node,root)=>isText$a(node)&&node.data.length>0&&surroundedByInlineContent(node,root);const isKeepElement=node=>isElement$6(node)?node.childNodes.length>0:false;const isDocument=node=>isDocumentFragment(node)||isDocument$1(node);const trimNode=(dom,node,root)=>{var _a;const rootNode=root||node;if(isElement$6(node)&&isBookmarkNode$2(node)){return node;}const children=node.childNodes;for(let i=children.length-1;i>=0;i--){trimNode(dom,children[i],rootNode);}if(isElement$6(node)){const currentChildren=node.childNodes;if(currentChildren.length===1&&isBookmarkNode$2(currentChildren[0])){(_a=node.parentNode)===null||_a===void 0?void 0:_a.insertBefore(currentChildren[0],node);}}if(!isDocument(node)&&!isContent$1(node,rootNode)&&!isKeepElement(node)&&!isKeepTextNode(node,rootNode)){dom.remove(node);}return node;};const makeMap$3=Tools.makeMap;const attrsCharsRegExp=/[&<>\\\"\\u0060\\u007E-\\uD7FF\\uE000-\\uFFEF]|[\\uD800-\\uDBFF][\\uDC00-\\uDFFF]/g;const textCharsRegExp=/[<>&\\u007E-\\uD7FF\\uE000-\\uFFEF]|[\\uD800-\\uDBFF][\\uDC00-\\uDFFF]/g;const rawCharsRegExp=/[<>&\\\"\\']/g;const entityRegExp=/&#([a-z0-9]+);?|&([a-z0-9]+);/gi;const asciiMap={128:'\\u20AC',130:'\\u201A',131:'\\u0192',132:'\\u201E',133:'\\u2026',134:'\\u2020',135:'\\u2021',136:'\\u02c6',137:'\\u2030',138:'\\u0160',139:'\\u2039',140:'\\u0152',142:'\\u017d',145:'\\u2018',146:'\\u2019',147:'\\u201C',148:'\\u201D',149:'\\u2022',150:'\\u2013',151:'\\u2014',152:'\\u02DC',153:'\\u2122',154:'\\u0161',155:'\\u203A',156:'\\u0153',158:'\\u017e',159:'\\u0178'};const baseEntities={'\"':'&quot;','\\'':'&#39;','<':'&lt;','>':'&gt;','&':'&amp;','`':'&#96;'};const reverseEntities={'&lt;':'<','&gt;':'>','&amp;':'&','&quot;':'\"','&apos;':`'`};const nativeDecode=text=>{const elm=SugarElement.fromTag('div').dom;elm.innerHTML=text;return elm.textContent||elm.innerText||text;};const buildEntitiesLookup=(items,radix)=>{const lookup={};if(items){const itemList=items.split(',');radix=radix||10;for(let i=0;i<itemList.length;i+=2){const chr=String.fromCharCode(parseInt(itemList[i],radix));if(!baseEntities[chr]){const entity='&'+itemList[i+1]+';';lookup[chr]=entity;lookup[entity]=chr;}}return lookup;}else{return undefined;}};const namedEntities=buildEntitiesLookup('50,nbsp,51,iexcl,52,cent,53,pound,54,curren,55,yen,56,brvbar,57,sect,58,uml,59,copy,'+'5a,ordf,5b,laquo,5c,not,5d,shy,5e,reg,5f,macr,5g,deg,5h,plusmn,5i,sup2,5j,sup3,5k,acute,'+'5l,micro,5m,para,5n,middot,5o,cedil,5p,sup1,5q,ordm,5r,raquo,5s,frac14,5t,frac12,5u,frac34,'+'5v,iquest,60,Agrave,61,Aacute,62,Acirc,63,Atilde,64,Auml,65,Aring,66,AElig,67,Ccedil,'+'68,Egrave,69,Eacute,6a,Ecirc,6b,Euml,6c,Igrave,6d,Iacute,6e,Icirc,6f,Iuml,6g,ETH,6h,Ntilde,'+'6i,Ograve,6j,Oacute,6k,Ocirc,6l,Otilde,6m,Ouml,6n,times,6o,Oslash,6p,Ugrave,6q,Uacute,'+'6r,Ucirc,6s,Uuml,6t,Yacute,6u,THORN,6v,szlig,70,agrave,71,aacute,72,acirc,73,atilde,74,auml,'+'75,aring,76,aelig,77,ccedil,78,egrave,79,eacute,7a,ecirc,7b,euml,7c,igrave,7d,iacute,7e,icirc,'+'7f,iuml,7g,eth,7h,ntilde,7i,ograve,7j,oacute,7k,ocirc,7l,otilde,7m,ouml,7n,divide,7o,oslash,'+'7p,ugrave,7q,uacute,7r,ucirc,7s,uuml,7t,yacute,7u,thorn,7v,yuml,ci,fnof,sh,Alpha,si,Beta,'+'sj,Gamma,sk,Delta,sl,Epsilon,sm,Zeta,sn,Eta,so,Theta,sp,Iota,sq,Kappa,sr,Lambda,ss,Mu,'+'st,Nu,su,Xi,sv,Omicron,t0,Pi,t1,Rho,t3,Sigma,t4,Tau,t5,Upsilon,t6,Phi,t7,Chi,t8,Psi,'+'t9,Omega,th,alpha,ti,beta,tj,gamma,tk,delta,tl,epsilon,tm,zeta,tn,eta,to,theta,tp,iota,'+'tq,kappa,tr,lambda,ts,mu,tt,nu,tu,xi,tv,omicron,u0,pi,u1,rho,u2,sigmaf,u3,sigma,u4,tau,'+'u5,upsilon,u6,phi,u7,chi,u8,psi,u9,omega,uh,thetasym,ui,upsih,um,piv,812,bull,816,hellip,'+'81i,prime,81j,Prime,81u,oline,824,frasl,88o,weierp,88h,image,88s,real,892,trade,89l,alefsym,'+'8cg,larr,8ch,uarr,8ci,rarr,8cj,darr,8ck,harr,8dl,crarr,8eg,lArr,8eh,uArr,8ei,rArr,8ej,dArr,'+'8ek,hArr,8g0,forall,8g2,part,8g3,exist,8g5,empty,8g7,nabla,8g8,isin,8g9,notin,8gb,ni,8gf,prod,'+'8gh,sum,8gi,minus,8gn,lowast,8gq,radic,8gt,prop,8gu,infin,8h0,ang,8h7,and,8h8,or,8h9,cap,8ha,cup,'+'8hb,int,8hk,there4,8hs,sim,8i5,cong,8i8,asymp,8j0,ne,8j1,equiv,8j4,le,8j5,ge,8k2,sub,8k3,sup,8k4,'+'nsub,8k6,sube,8k7,supe,8kl,oplus,8kn,otimes,8l5,perp,8m5,sdot,8o8,lceil,8o9,rceil,8oa,lfloor,8ob,'+'rfloor,8p9,lang,8pa,rang,9ea,loz,9j0,spades,9j3,clubs,9j5,hearts,9j6,diams,ai,OElig,aj,oelig,b0,'+'Scaron,b1,scaron,bo,Yuml,m6,circ,ms,tilde,802,ensp,803,emsp,809,thinsp,80c,zwnj,80d,zwj,80e,lrm,'+'80f,rlm,80j,ndash,80k,mdash,80o,lsquo,80p,rsquo,80q,sbquo,80s,ldquo,80t,rdquo,80u,bdquo,810,dagger,'+'811,Dagger,81g,permil,81p,lsaquo,81q,rsaquo,85c,euro',32);const encodeRaw=(text,attr)=>text.replace(attr?attrsCharsRegExp:textCharsRegExp,chr=>{return baseEntities[chr]||chr;});const encodeAllRaw=text=>(''+text).replace(rawCharsRegExp,chr=>{return baseEntities[chr]||chr;});const encodeNumeric=(text,attr)=>text.replace(attr?attrsCharsRegExp:textCharsRegExp,chr=>{if(chr.length>1){return'&#'+((chr.charCodeAt(0)-55296)*1024+(chr.charCodeAt(1)-56320)+65536)+';';}return baseEntities[chr]||'&#'+chr.charCodeAt(0)+';';});const encodeNamed=(text,attr,entities)=>{const resolveEntities=entities||namedEntities;return text.replace(attr?attrsCharsRegExp:textCharsRegExp,chr=>{return baseEntities[chr]||resolveEntities[chr]||chr;});};const getEncodeFunc=(name,entities)=>{const entitiesMap=buildEntitiesLookup(entities)||namedEntities;const encodeNamedAndNumeric=(text,attr)=>text.replace(attr?attrsCharsRegExp:textCharsRegExp,chr=>{if(baseEntities[chr]!==undefined){return baseEntities[chr];}if(entitiesMap[chr]!==undefined){return entitiesMap[chr];}if(chr.length>1){return'&#'+((chr.charCodeAt(0)-55296)*1024+(chr.charCodeAt(1)-56320)+65536)+';';}return'&#'+chr.charCodeAt(0)+';';});const encodeCustomNamed=(text,attr)=>{return encodeNamed(text,attr,entitiesMap);};const nameMap=makeMap$3(name.replace(/\\+/g,','));if(nameMap.named&&nameMap.numeric){return encodeNamedAndNumeric;}if(nameMap.named){if(entities){return encodeCustomNamed;}return encodeNamed;}if(nameMap.numeric){return encodeNumeric;}return encodeRaw;};const decode=text=>text.replace(entityRegExp,(all,numeric)=>{if(numeric){if(numeric.charAt(0).toLowerCase()==='x'){numeric=parseInt(numeric.substr(1),16);}else{numeric=parseInt(numeric,10);}if(numeric>65535){numeric-=65536;return String.fromCharCode(55296+(numeric>>10),56320+(numeric&1023));}return asciiMap[numeric]||String.fromCharCode(numeric);}return reverseEntities[all]||namedEntities[all]||nativeDecode(all);});const Entities={encodeRaw,encodeAllRaw,encodeNumeric,encodeNamed,getEncodeFunc,decode};const lookupCache={};const mapCache={};const dummyObj={};const makeMap$2=Tools.makeMap,each$b=Tools.each,extend$2=Tools.extend,explode$2=Tools.explode,inArray=Tools.inArray;const split$1=(items,delim)=>{items=Tools.trim(items);return items?items.split(delim||' '):[];};const createMap=(defaultValue,extendWith={})=>{const value=makeMap$2(defaultValue,' ',makeMap$2(defaultValue.toUpperCase(),' '));return extend$2(value,extendWith);};const getTextRootBlockElements=schema=>createMap('td th li dt dd figcaption caption details summary',schema.getTextBlockElements());const compileSchema=type=>{const schema={};let globalAttributes,blockContent;let phrasingContent,flowContent;const add=(name,attributes='',children='')=>{const childNames=split$1(children);const names=split$1(name);let ni=names.length;while(ni--){const attributesOrder=split$1([globalAttributes,attributes].join(' '));schema[names[ni]]={attributes:mapToObject(attributesOrder,()=>({})),attributesOrder,children:mapToObject(childNames,constant(dummyObj))};}};const addAttrs=(name,attributes)=>{const names=split$1(name);const attrs=split$1(attributes);let ni=names.length;while(ni--){const schemaItem=schema[names[ni]];for(let i=0,l=attrs.length;i<l;i++){schemaItem.attributes[attrs[i]]={};schemaItem.attributesOrder.push(attrs[i]);}}};if(lookupCache[type]){return lookupCache[type];}globalAttributes='id accesskey class dir lang style tabindex title role';blockContent='address blockquote div dl fieldset form h1 h2 h3 h4 h5 h6 hr menu ol p pre table ul';phrasingContent='a abbr b bdo br button cite code del dfn em embed i iframe img input ins kbd '+'label map noscript object q s samp script select small span strong sub sup '+'textarea u var #text #comment';if(type!=='html4'){globalAttributes+=' contenteditable contextmenu draggable dropzone '+'hidden spellcheck translate';blockContent+=' article aside details dialog figure main header footer hgroup section nav';phrasingContent+=' audio canvas command datalist mark meter output picture '+'progress time wbr video ruby bdi keygen';}if(type!=='html5-strict'){globalAttributes+=' xml:lang';const html4PhrasingContent='acronym applet basefont big font strike tt';phrasingContent=[phrasingContent,html4PhrasingContent].join(' ');each$b(split$1(html4PhrasingContent),name=>{add(name,'',phrasingContent);});const html4BlockContent='center dir isindex noframes';blockContent=[blockContent,html4BlockContent].join(' ');flowContent=[blockContent,phrasingContent].join(' ');each$b(split$1(html4BlockContent),name=>{add(name,'',flowContent);});}flowContent=flowContent||[blockContent,phrasingContent].join(' ');add('html','manifest','head body');add('head','','base command link meta noscript script style title');add('title hr noscript br');add('base','href target');add('link','href rel media hreflang type sizes hreflang');add('meta','name http-equiv content charset');add('style','media type scoped');add('script','src async defer type charset');add('body','onafterprint onbeforeprint onbeforeunload onblur onerror onfocus '+'onhashchange onload onmessage onoffline ononline onpagehide onpageshow '+'onpopstate onresize onscroll onstorage onunload',flowContent);add('address dt dd div caption','',flowContent);add('h1 h2 h3 h4 h5 h6 pre p abbr code var samp kbd sub sup i b u bdo span legend em strong small s cite dfn','',phrasingContent);add('blockquote','cite',flowContent);add('ol','reversed start type','li');add('ul','','li');add('li','value',flowContent);add('dl','','dt dd');add('a','href target rel media hreflang type',phrasingContent);add('q','cite',phrasingContent);add('ins del','cite datetime',flowContent);add('img','src sizes srcset alt usemap ismap width height');add('iframe','src name width height',flowContent);add('embed','src type width height');add('object','data type typemustmatch name usemap form width height',[flowContent,'param'].join(' '));add('param','name value');add('map','name',[flowContent,'area'].join(' '));add('area','alt coords shape href target rel media hreflang type');add('table','border','caption colgroup thead tfoot tbody tr'+(type==='html4'?' col':''));add('colgroup','span','col');add('col','span');add('tbody thead tfoot','','tr');add('tr','','td th');add('td','colspan rowspan headers',flowContent);add('th','colspan rowspan headers scope abbr',flowContent);add('form','accept-charset action autocomplete enctype method name novalidate target',flowContent);add('fieldset','disabled form name',[flowContent,'legend'].join(' '));add('label','form for',phrasingContent);add('input','accept alt autocomplete checked dirname disabled form formaction formenctype formmethod formnovalidate '+'formtarget height list max maxlength min multiple name pattern readonly required size src step type value width');add('button','disabled form formaction formenctype formmethod formnovalidate formtarget name type value',type==='html4'?flowContent:phrasingContent);add('select','disabled form multiple name required size','option optgroup');add('optgroup','disabled label','option');add('option','disabled label selected value');add('textarea','cols dirname disabled form maxlength name readonly required rows wrap');add('menu','type label',[flowContent,'li'].join(' '));add('noscript','',flowContent);if(type!=='html4'){add('wbr');add('ruby','',[phrasingContent,'rt rp'].join(' '));add('figcaption','',flowContent);add('mark rt rp summary bdi','',phrasingContent);add('canvas','width height',flowContent);add('video','src crossorigin poster preload autoplay mediagroup loop '+'muted controls width height buffered',[flowContent,'track source'].join(' '));add('audio','src crossorigin preload autoplay mediagroup loop muted controls '+'buffered volume',[flowContent,'track source'].join(' '));add('picture','','img source');add('source','src srcset type media sizes');add('track','kind src srclang label default');add('datalist','',[phrasingContent,'option'].join(' '));add('article section nav aside main header footer','',flowContent);add('hgroup','','h1 h2 h3 h4 h5 h6');add('figure','',[flowContent,'figcaption'].join(' '));add('time','datetime',phrasingContent);add('dialog','open',flowContent);add('command','type label icon disabled checked radiogroup command');add('output','for form name',phrasingContent);add('progress','value max',phrasingContent);add('meter','value min max low high optimum',phrasingContent);add('details','open',[flowContent,'summary'].join(' '));add('keygen','autofocus challenge disabled form keytype name');}if(type!=='html5-strict'){addAttrs('script','language xml:space');addAttrs('style','xml:space');addAttrs('object','declare classid code codebase codetype archive standby align border hspace vspace');addAttrs('embed','align name hspace vspace');addAttrs('param','valuetype type');addAttrs('a','charset name rev shape coords');addAttrs('br','clear');addAttrs('applet','codebase archive code object alt name width height align hspace vspace');addAttrs('img','name longdesc align border hspace vspace');addAttrs('iframe','longdesc frameborder marginwidth marginheight scrolling align');addAttrs('font basefont','size color face');addAttrs('input','usemap align');addAttrs('select');addAttrs('textarea');addAttrs('h1 h2 h3 h4 h5 h6 div p legend caption','align');addAttrs('ul','type compact');addAttrs('li','type');addAttrs('ol dl menu dir','compact');addAttrs('pre','width xml:space');addAttrs('hr','align noshade size width');addAttrs('isindex','prompt');addAttrs('table','summary width frame rules cellspacing cellpadding align bgcolor');addAttrs('col','width align char charoff valign');addAttrs('colgroup','width align char charoff valign');addAttrs('thead','align char charoff valign');addAttrs('tr','align char charoff valign bgcolor');addAttrs('th','axis align char charoff valign nowrap bgcolor width height');addAttrs('form','accept');addAttrs('td','abbr axis scope align char charoff valign nowrap bgcolor width height');addAttrs('tfoot','align char charoff valign');addAttrs('tbody','align char charoff valign');addAttrs('area','nohref');addAttrs('body','background bgcolor text link vlink alink');}if(type!=='html4'){addAttrs('input button select textarea','autofocus');addAttrs('input textarea','placeholder');addAttrs('a','download');addAttrs('link script img','crossorigin');addAttrs('img','loading');addAttrs('iframe','sandbox seamless allow allowfullscreen loading');}if(type!=='html4'){each$e([schema.video,schema.audio],item=>{delete item.children.audio;delete item.children.video;});}each$b(split$1('a form meter progress dfn'),name=>{if(schema[name]){delete schema[name].children[name];}});delete schema.caption.children.table;delete schema.script;lookupCache[type]=schema;return schema;};const compileElementMap=(value,mode)=>{if(value){const styles={};if(isString(value)){value={'*':value};}each$b(value,(value,key)=>{styles[key]=styles[key.toUpperCase()]=mode==='map'?makeMap$2(value,/[, ]/):explode$2(value,/[, ]/);});return styles;}else{return undefined;}};const Schema=(settings={})=>{var _a;const elements={};const children={};let patternElements=[];const customElementsMap={};const specialElements={};const createLookupTable=(option,defaultValue,extendWith)=>{const value=settings[option];if(!value){let newValue=mapCache[option];if(!newValue){newValue=createMap(defaultValue,extendWith);mapCache[option]=newValue;}return newValue;}else{return makeMap$2(value,/[, ]/,makeMap$2(value.toUpperCase(),/[, ]/));}};const schemaType=(_a=settings.schema)!==null&&_a!==void 0?_a:'html5';const schemaItems=compileSchema(schemaType);if(settings.verify_html===false){settings.valid_elements='*[*]';}const validStyles=compileElementMap(settings.valid_styles);const invalidStyles=compileElementMap(settings.invalid_styles,'map');const validClasses=compileElementMap(settings.valid_classes,'map');const whitespaceElementsMap=createLookupTable('whitespace_elements','pre script noscript style textarea video audio iframe object code');const selfClosingElementsMap=createLookupTable('self_closing_elements','colgroup dd dt li option p td tfoot th thead tr');const voidElementsMap=createLookupTable('void_elements','area base basefont br col frame hr img input isindex link '+'meta param embed source wbr track');const boolAttrMap=createLookupTable('boolean_attributes','checked compact declare defer disabled ismap multiple nohref noresize '+'noshade nowrap readonly selected autoplay loop controls allowfullscreen');const nonEmptyOrMoveCaretBeforeOnEnter='td th iframe video audio object script code';const nonEmptyElementsMap=createLookupTable('non_empty_elements',nonEmptyOrMoveCaretBeforeOnEnter+' pre',voidElementsMap);const moveCaretBeforeOnEnterElementsMap=createLookupTable('move_caret_before_on_enter_elements',nonEmptyOrMoveCaretBeforeOnEnter+' table',voidElementsMap);const textBlockElementsMap=createLookupTable('text_block_elements','h1 h2 h3 h4 h5 h6 p div address pre form '+'blockquote center dir fieldset header footer article section hgroup aside main nav figure');const blockElementsMap=createLookupTable('block_elements','hr table tbody thead tfoot '+'th tr td li ol ul caption dl dt dd noscript menu isindex option '+'datalist select optgroup figcaption details summary',textBlockElementsMap);const textInlineElementsMap=createLookupTable('text_inline_elements','span strong b em i font s strike u var cite '+'dfn code mark q sup sub samp');each$b('script noscript iframe noframes noembed title style textarea xmp plaintext'.split(' '),name=>{specialElements[name]=new RegExp('</'+name+'[^>]*>','gi');});const patternToRegExp=str=>new RegExp('^'+str.replace(/([?+*])/g,'.$1')+'$');const addValidElements=validElements=>{const elementRuleRegExp=/^([#+\\-])?([^\\[!\\/]+)(?:\\/([^\\[!]+))?(?:(!?)\\[([^\\]]+)])?$/;const attrRuleRegExp=/^([!\\-])?(\\w+[\\\\:]:\\w+|[^=~<]+)?(?:([=~<])(.*))?$/;const hasPatternsRegExp=/[*?+]/;if(validElements){const validElementsArr=split$1(validElements,',');let globalAttributes;let globalAttributesOrder;if(elements['@']){globalAttributes=elements['@'].attributes;globalAttributesOrder=elements['@'].attributesOrder;}for(let ei=0,el=validElementsArr.length;ei<el;ei++){let matches=elementRuleRegExp.exec(validElementsArr[ei]);if(matches){const prefix=matches[1];const elementName=matches[2];const outputName=matches[3];const attrData=matches[5];const attributes={};const attributesOrder=[];const element={attributes,attributesOrder};if(prefix==='#'){element.paddEmpty=true;}if(prefix==='-'){element.removeEmpty=true;}if(matches[4]==='!'){element.removeEmptyAttrs=true;}if(globalAttributes){each$d(globalAttributes,(value,key)=>{attributes[key]=value;});if(globalAttributesOrder){attributesOrder.push(...globalAttributesOrder);}}if(attrData){const attrDatas=split$1(attrData,'|');for(let ai=0,al=attrDatas.length;ai<al;ai++){matches=attrRuleRegExp.exec(attrDatas[ai]);if(matches){const attr={};const attrType=matches[1];const attrName=matches[2].replace(/[\\\\:]:/g,':');const attrPrefix=matches[3];const value=matches[4];if(attrType==='!'){element.attributesRequired=element.attributesRequired||[];element.attributesRequired.push(attrName);attr.required=true;}if(attrType==='-'){delete attributes[attrName];attributesOrder.splice(inArray(attributesOrder,attrName),1);continue;}if(attrPrefix){if(attrPrefix==='='){element.attributesDefault=element.attributesDefault||[];element.attributesDefault.push({name:attrName,value});attr.defaultValue=value;}if(attrPrefix==='~'){element.attributesForced=element.attributesForced||[];element.attributesForced.push({name:attrName,value});attr.forcedValue=value;}if(attrPrefix==='<'){attr.validValues=makeMap$2(value,'?');}}if(hasPatternsRegExp.test(attrName)){const attrPattern=attr;element.attributePatterns=element.attributePatterns||[];attrPattern.pattern=patternToRegExp(attrName);element.attributePatterns.push(attrPattern);}else{if(!attributes[attrName]){attributesOrder.push(attrName);}attributes[attrName]=attr;}}}}if(!globalAttributes&&elementName==='@'){globalAttributes=attributes;globalAttributesOrder=attributesOrder;}if(outputName){element.outputName=elementName;elements[outputName]=element;}if(hasPatternsRegExp.test(elementName)){const patternElement=element;patternElement.pattern=patternToRegExp(elementName);patternElements.push(patternElement);}else{elements[elementName]=element;}}}}};const setValidElements=validElements=>{patternElements=[];each$e(keys(elements),name=>{delete elements[name];});addValidElements(validElements);each$b(schemaItems,(element,name)=>{children[name]=element.children;});};const addCustomElements=customElements=>{const customElementRegExp=/^(~)?(.+)$/;if(customElements){delete mapCache.text_block_elements;delete mapCache.block_elements;each$b(split$1(customElements,','),rule=>{const matches=customElementRegExp.exec(rule);if(matches){const inline=matches[1]==='~';const cloneName=inline?'span':'div';const name=matches[2];children[name]=children[cloneName];customElementsMap[name]=cloneName;nonEmptyElementsMap[name.toUpperCase()]={};nonEmptyElementsMap[name]={};if(!inline){blockElementsMap[name.toUpperCase()]={};blockElementsMap[name]={};}if(!elements[name]){let customRule=elements[cloneName];customRule=extend$2({},customRule);delete customRule.removeEmptyAttrs;delete customRule.removeEmpty;elements[name]=customRule;}each$b(children,(element,elmName)=>{if(element[cloneName]){children[elmName]=element=extend$2({},children[elmName]);element[name]=element[cloneName];}});}});}};const addValidChildren=validChildren=>{const childRuleRegExp=/^([+\\-]?)([A-Za-z0-9_\\-.\\u00b7\\u00c0-\\u00d6\\u00d8-\\u00f6\\u00f8-\\u037d\\u037f-\\u1fff\\u200c-\\u200d\\u203f-\\u2040\\u2070-\\u218f\\u2c00-\\u2fef\\u3001-\\ud7ff\\uf900-\\ufdcf\\ufdf0-\\ufffd]+)\\[([^\\]]+)]$/;delete lookupCache[schemaType];if(validChildren){each$b(split$1(validChildren,','),rule=>{const matches=childRuleRegExp.exec(rule);if(matches){const prefix=matches[1];let parent;if(prefix){parent=children[matches[2]];}else{parent=children[matches[2]]={'#comment':{}};}parent=children[matches[2]];each$b(split$1(matches[3],'|'),child=>{if(prefix==='-'){delete parent[child];}else{parent[child]={};}});}});}};const getElementRule=name=>{const element=elements[name];if(element){return element;}let i=patternElements.length;while(i--){const patternElement=patternElements[i];if(patternElement.pattern.test(name)){return patternElement;}}return undefined;};if(!settings.valid_elements){each$b(schemaItems,(element,name)=>{elements[name]={attributes:element.attributes,attributesOrder:element.attributesOrder};children[name]=element.children;});each$b(split$1('strong/b em/i'),item=>{const items=split$1(item,'/');elements[items[1]].outputName=items[0];});each$b(textInlineElementsMap,(_val,name)=>{if(elements[name]){if(settings.padd_empty_block_inline_children){elements[name].paddInEmptyBlock=true;}elements[name].removeEmpty=true;}});each$b(split$1('ol ul blockquote a table tbody'),name=>{if(elements[name]){elements[name].removeEmpty=true;}});each$b(split$1('p h1 h2 h3 h4 h5 h6 th td pre div address caption li'),name=>{elements[name].paddEmpty=true;});each$b(split$1('span'),name=>{elements[name].removeEmptyAttrs=true;});}else{setValidElements(settings.valid_elements);}addCustomElements(settings.custom_elements);addValidChildren(settings.valid_children);addValidElements(settings.extended_valid_elements);addValidChildren('+ol[ul|ol],+ul[ul|ol]');each$b({dd:'dl',dt:'dl',li:'ul ol',td:'tr',th:'tr',tr:'tbody thead tfoot',tbody:'table',thead:'table',tfoot:'table',legend:'fieldset',area:'map',param:'video audio object'},(parents,item)=>{if(elements[item]){elements[item].parentsRequired=split$1(parents);}});if(settings.invalid_elements){each$b(explode$2(settings.invalid_elements),item=>{if(elements[item]){delete elements[item];}});}if(!getElementRule('span')){addValidElements('span[!data-mce-type|*]');}const getValidStyles=constant(validStyles);const getInvalidStyles=constant(invalidStyles);const getValidClasses=constant(validClasses);const getBoolAttrs=constant(boolAttrMap);const getBlockElements=constant(blockElementsMap);const getTextBlockElements=constant(textBlockElementsMap);const getTextInlineElements=constant(textInlineElementsMap);const getVoidElements=constant(Object.seal(voidElementsMap));const getSelfClosingElements=constant(selfClosingElementsMap);const getNonEmptyElements=constant(nonEmptyElementsMap);const getMoveCaretBeforeOnEnterElements=constant(moveCaretBeforeOnEnterElementsMap);const getWhitespaceElements=constant(whitespaceElementsMap);const getSpecialElements=constant(Object.seal(specialElements));const isValidChild=(name,child)=>{const parent=children[name.toLowerCase()];return!!(parent&&parent[child.toLowerCase()]);};const isValid=(name,attr)=>{const rule=getElementRule(name);if(rule){if(attr){if(rule.attributes[attr]){return true;}const attrPatterns=rule.attributePatterns;if(attrPatterns){let i=attrPatterns.length;while(i--){if(attrPatterns[i].pattern.test(attr)){return true;}}}}else{return true;}}return false;};const getCustomElements=constant(customElementsMap);return{type:schemaType,children,elements,getValidStyles,getValidClasses,getBlockElements,getInvalidStyles,getVoidElements,getTextBlockElements,getTextInlineElements,getBoolAttrs,getElementRule,getSelfClosingElements,getNonEmptyElements,getMoveCaretBeforeOnEnterElements,getWhitespaceElements,getSpecialElements,isValidChild,isValid,getCustomElements,addValidElements,setValidElements,addCustomElements,addValidChildren};};const Styles=(settings={},schema)=>{const urlOrStrRegExp=/(?:url(?:(?:\\(\\s*\\\"([^\\\"]+)\\\"\\s*\\))|(?:\\(\\s*\\'([^\\']+)\\'\\s*\\))|(?:\\(\\s*([^)\\s]+)\\s*\\))))|(?:\\'([^\\']+)\\')|(?:\\\"([^\\\"]+)\\\")/gi;const styleRegExp=/\\s*([^:]+):\\s*([^;]+);?/g;const trimRightRegExp=/\\s+$/;const encodingLookup={};let validStyles;let invalidStyles;const invisibleChar=zeroWidth;if(schema){validStyles=schema.getValidStyles();invalidStyles=schema.getInvalidStyles();}const encodingItems=(`\\\\\" \\\\' \\\\; \\\\: ; : `+invisibleChar).split(' ');for(let i=0;i<encodingItems.length;i++){encodingLookup[encodingItems[i]]=invisibleChar+i;encodingLookup[invisibleChar+i]=encodingItems[i];}const self={parse:css=>{const styles={};let isEncoded=false;const urlConverter=settings.url_converter;const urlConverterScope=settings.url_converter_scope||self;const compress=(prefix,suffix,noJoin)=>{const top=styles[prefix+'-top'+suffix];if(!top){return;}const right=styles[prefix+'-right'+suffix];if(!right){return;}const bottom=styles[prefix+'-bottom'+suffix];if(!bottom){return;}const left=styles[prefix+'-left'+suffix];if(!left){return;}const box=[top,right,bottom,left];let i=box.length-1;while(i--){if(box[i]!==box[i+1]){break;}}if(i>-1&&noJoin){return;}styles[prefix+suffix]=i===-1?box[0]:box.join(' ');delete styles[prefix+'-top'+suffix];delete styles[prefix+'-right'+suffix];delete styles[prefix+'-bottom'+suffix];delete styles[prefix+'-left'+suffix];};const canCompress=key=>{const value=styles[key];if(!value){return;}const values=value.split(' ');let i=values.length;while(i--){if(values[i]!==values[0]){return false;}}styles[key]=values[0];return true;};const compress2=(target,a,b,c)=>{if(!canCompress(a)){return;}if(!canCompress(b)){return;}if(!canCompress(c)){return;}styles[target]=styles[a]+' '+styles[b]+' '+styles[c];delete styles[a];delete styles[b];delete styles[c];};const encode=str=>{isEncoded=true;return encodingLookup[str];};const decode=(str,keepSlashes)=>{if(isEncoded){str=str.replace(/\\uFEFF[0-9]/g,str=>{return encodingLookup[str];});}if(!keepSlashes){str=str.replace(/\\\\([\\'\\\";:])/g,'$1');}return str;};const decodeSingleHexSequence=escSeq=>{return String.fromCharCode(parseInt(escSeq.slice(1),16));};const decodeHexSequences=value=>{return value.replace(/\\\\[0-9a-f]+/gi,decodeSingleHexSequence);};const processUrl=(match,url,url2,url3,str,str2)=>{str=str||str2;if(str){str=decode(str);return`'`+str.replace(/\\'/g,`\\\\'`)+`'`;}url=decode(url||url2||url3||'');if(!settings.allow_script_urls){const scriptUrl=url.replace(/[\\s\\r\\n]+/g,'');if(/(java|vb)script:/i.test(scriptUrl)){return'';}if(!settings.allow_svg_data_urls&&/^data:image\\/svg/i.test(scriptUrl)){return'';}}if(urlConverter){url=urlConverter.call(urlConverterScope,url,'style');}return`url('`+url.replace(/\\'/g,`\\\\'`)+`')`;};if(css){css=css.replace(/[\\u0000-\\u001F]/g,'');css=css.replace(/\\\\[\\\"\\';:\\uFEFF]/g,encode).replace(/\\\"[^\\\"]+\\\"|\\'[^\\']+\\'/g,str=>{return str.replace(/[;:]/g,encode);});let matches;while(matches=styleRegExp.exec(css)){styleRegExp.lastIndex=matches.index+matches[0].length;let name=matches[1].replace(trimRightRegExp,'').toLowerCase();let value=matches[2].replace(trimRightRegExp,'');if(name&&value){name=decodeHexSequences(name);value=decodeHexSequences(value);if(name.indexOf(invisibleChar)!==-1||name.indexOf('\"')!==-1){continue;}if(!settings.allow_script_urls&&(name==='behavior'||/expression\\s*\\(|\\/\\*|\\*\\//.test(value))){continue;}if(name==='font-weight'&&value==='700'){value='bold';}else if(name==='color'||name==='background-color'){value=value.toLowerCase();}value=value.replace(urlOrStrRegExp,processUrl);styles[name]=isEncoded?decode(value,true):value;}}compress('border','',true);compress('border','-width');compress('border','-color');compress('border','-style');compress('padding','');compress('margin','');compress2('border','border-width','border-style','border-color');if(styles.border==='medium none'){delete styles.border;}if(styles['border-image']==='none'){delete styles['border-image'];}}return styles;},serialize:(styles,elementName)=>{let css='';const serializeStyles=(elemName,validStyleList)=>{const styleList=validStyleList[elemName];if(styleList){for(let i=0,l=styleList.length;i<l;i++){const name=styleList[i];const value=styles[name];if(value){css+=(css.length>0?' ':'')+name+': '+value+';';}}}};const isValid=(name,elemName)=>{if(!invalidStyles||!elemName){return true;}let styleMap=invalidStyles['*'];if(styleMap&&styleMap[name]){return false;}styleMap=invalidStyles[elemName];return!(styleMap&&styleMap[name]);};if(elementName&&validStyles){serializeStyles('*',validStyles);serializeStyles(elementName,validStyles);}else{each$d(styles,(value,name)=>{if(value&&isValid(name,elementName)){css+=(css.length>0?' ':'')+name+': '+value+';';}});}return css;}};return self;};const deprecated={keyLocation:true,layerX:true,layerY:true,returnValue:true,webkitMovementX:true,webkitMovementY:true,keyIdentifier:true,mozPressure:true};const isNativeEvent=event=>event instanceof Event||isFunction(event.initEvent);const hasIsDefaultPrevented=event=>event.isDefaultPrevented===always||event.isDefaultPrevented===never;const needsNormalizing=event=>isNullable(event.preventDefault)||isNativeEvent(event);const clone$3=(originalEvent,data)=>{const event=data!==null&&data!==void 0?data:{};for(const name in originalEvent){if(!has$2(deprecated,name)){event[name]=originalEvent[name];}}if(isNonNullable(originalEvent.composedPath)){event.composedPath=()=>originalEvent.composedPath();}return event;};const normalize$3=(type,originalEvent,fallbackTarget,data)=>{var _a;const event=clone$3(originalEvent,data);event.type=type;if(isNullable(event.target)){event.target=(_a=event.srcElement)!==null&&_a!==void 0?_a:fallbackTarget;}if(needsNormalizing(originalEvent)){event.preventDefault=()=>{event.defaultPrevented=true;event.isDefaultPrevented=always;if(isFunction(originalEvent.preventDefault)){originalEvent.preventDefault();}};event.stopPropagation=()=>{event.cancelBubble=true;event.isPropagationStopped=always;if(isFunction(originalEvent.stopPropagation)){originalEvent.stopPropagation();}};event.stopImmediatePropagation=()=>{event.isImmediatePropagationStopped=always;event.stopPropagation();};if(!hasIsDefaultPrevented(event)){event.isDefaultPrevented=event.defaultPrevented===true?always:never;event.isPropagationStopped=event.cancelBubble===true?always:never;event.isImmediatePropagationStopped=never;}}return event;};const eventExpandoPrefix='mce-data-';const mouseEventRe=/^(?:mouse|contextmenu)|click/;const addEvent=(target,name,callback,capture)=>{target.addEventListener(name,callback,capture||false);};const removeEvent=(target,name,callback,capture)=>{target.removeEventListener(name,callback,capture||false);};const isMouseEvent=event=>isNonNullable(event)&&mouseEventRe.test(event.type);const fix=(originalEvent,data)=>{const event=normalize$3(originalEvent.type,originalEvent,document,data);if(isMouseEvent(originalEvent)&&isUndefined(originalEvent.pageX)&&!isUndefined(originalEvent.clientX)){const eventDoc=event.target.ownerDocument||document;const doc=eventDoc.documentElement;const body=eventDoc.body;const mouseEvent=event;mouseEvent.pageX=originalEvent.clientX+(doc&&doc.scrollLeft||body&&body.scrollLeft||0)-(doc&&doc.clientLeft||body&&body.clientLeft||0);mouseEvent.pageY=originalEvent.clientY+(doc&&doc.scrollTop||body&&body.scrollTop||0)-(doc&&doc.clientTop||body&&body.clientTop||0);}return event;};const bindOnReady=(win,callback,eventUtils)=>{const doc=win.document,event={type:'ready'};if(eventUtils.domLoaded){callback(event);return;}const isDocReady=()=>{return doc.readyState==='complete'||doc.readyState==='interactive'&&doc.body;};const readyHandler=()=>{removeEvent(win,'DOMContentLoaded',readyHandler);removeEvent(win,'load',readyHandler);if(!eventUtils.domLoaded){eventUtils.domLoaded=true;callback(event);}win=null;};if(isDocReady()){readyHandler();}else{addEvent(win,'DOMContentLoaded',readyHandler);}if(!eventUtils.domLoaded){addEvent(win,'load',readyHandler);}};class EventUtils{constructor(){this.domLoaded=false;this.events={};this.count=1;this.expando=eventExpandoPrefix+(+new Date()).toString(32);this.hasFocusIn='onfocusin'in document.documentElement;this.count=1;}bind(target,names,callback,scope){const self=this;let callbackList;const win=window;const defaultNativeHandler=evt=>{self.executeHandlers(fix(evt||win.event),id);};if(!target||isText$a(target)||isComment(target)){return callback;}let id;if(!target[self.expando]){id=self.count++;target[self.expando]=id;self.events[id]={};}else{id=target[self.expando];}scope=scope||target;const namesList=names.split(' ');let i=namesList.length;while(i--){let name=namesList[i];let nativeHandler=defaultNativeHandler;let capture=false;let fakeName=false;if(name==='DOMContentLoaded'){name='ready';}if(self.domLoaded&&name==='ready'&&target.readyState==='complete'){callback.call(scope,fix({type:name}));continue;}if(!self.hasFocusIn&&(name==='focusin'||name==='focusout')){capture=true;fakeName=name==='focusin'?'focus':'blur';nativeHandler=evt=>{const event=fix(evt||win.event);event.type=event.type==='focus'?'focusin':'focusout';self.executeHandlers(event,id);};}callbackList=self.events[id][name];if(!callbackList){self.events[id][name]=callbackList=[{func:callback,scope}];callbackList.fakeName=fakeName;callbackList.capture=capture;callbackList.nativeHandler=nativeHandler;if(name==='ready'){bindOnReady(target,nativeHandler,self);}else{addEvent(target,fakeName||name,nativeHandler,capture);}}else{if(name==='ready'&&self.domLoaded){callback(fix({type:name}));}else{callbackList.push({func:callback,scope});}}}target=callbackList=null;return callback;}unbind(target,names,callback){if(!target||isText$a(target)||isComment(target)){return this;}const id=target[this.expando];if(id){let eventMap=this.events[id];if(names){const namesList=names.split(' ');let i=namesList.length;while(i--){const name=namesList[i];const callbackList=eventMap[name];if(callbackList){if(callback){let ci=callbackList.length;while(ci--){if(callbackList[ci].func===callback){const nativeHandler=callbackList.nativeHandler;const fakeName=callbackList.fakeName,capture=callbackList.capture;const newCallbackList=callbackList.slice(0,ci).concat(callbackList.slice(ci+1));newCallbackList.nativeHandler=nativeHandler;newCallbackList.fakeName=fakeName;newCallbackList.capture=capture;eventMap[name]=newCallbackList;}}}if(!callback||callbackList.length===0){delete eventMap[name];removeEvent(target,callbackList.fakeName||name,callbackList.nativeHandler,callbackList.capture);}}}}else{each$d(eventMap,(callbackList,name)=>{removeEvent(target,callbackList.fakeName||name,callbackList.nativeHandler,callbackList.capture);});eventMap={};}for(const name in eventMap){if(has$2(eventMap,name)){return this;}}delete this.events[id];try{delete target[this.expando];}catch(ex){target[this.expando]=null;}}return this;}fire(target,name,args){return this.dispatch(target,name,args);}dispatch(target,name,args){if(!target||isText$a(target)||isComment(target)){return this;}const event=fix({type:name,target},args);do{const id=target[this.expando];if(id){this.executeHandlers(event,id);}target=target.parentNode||target.ownerDocument||target.defaultView||target.parentWindow;}while(target&&!event.isPropagationStopped());return this;}clean(target){if(!target||isText$a(target)||isComment(target)){return this;}if(target[this.expando]){this.unbind(target);}if(!target.getElementsByTagName){target=target.document;}if(target&&target.getElementsByTagName){this.unbind(target);const children=target.getElementsByTagName('*');let i=children.length;while(i--){target=children[i];if(target[this.expando]){this.unbind(target);}}}return this;}destroy(){this.events={};}cancel(e){if(e){e.preventDefault();e.stopImmediatePropagation();}return false;}executeHandlers(evt,id){const container=this.events[id];const callbackList=container&&container[evt.type];if(callbackList){for(let i=0,l=callbackList.length;i<l;i++){const callback=callbackList[i];if(callback&&callback.func.call(callback.scope,evt)===false){evt.preventDefault();}if(evt.isImmediatePropagationStopped()){return;}}}}}EventUtils.Event=new EventUtils();const each$a=Tools.each;const grep=Tools.grep;const internalStyleName='data-mce-style';const numericalCssMap=Tools.makeMap('fill-opacity font-weight line-height opacity orphans widows z-index zoom',' ');const legacySetAttribute=(elm,name,value)=>{if(isNullable(value)||value===''){remove$b(elm,name);}else{set$2(elm,name,value);}};const camelCaseToHyphens=name=>name.replace(/[A-Z]/g,v=>'-'+v.toLowerCase());const findNodeIndex=(node,normalized)=>{let idx=0;if(node){for(let lastNodeType=node.nodeType,tempNode=node.previousSibling;tempNode;tempNode=tempNode.previousSibling){const nodeType=tempNode.nodeType;if(normalized&&isText$a(tempNode)){if(nodeType===lastNodeType||!tempNode.data.length){continue;}}idx++;lastNodeType=nodeType;}}return idx;};const updateInternalStyleAttr=(styles,elm)=>{const rawValue=get$9(elm,'style');const value=styles.serialize(styles.parse(rawValue),name(elm));legacySetAttribute(elm,internalStyleName,value);};const convertStyleToString=(cssValue,cssName)=>{if(isNumber(cssValue)){return has$2(numericalCssMap,cssName)?cssValue+'':cssValue+'px';}else{return cssValue;}};const applyStyle$1=($elm,cssName,cssValue)=>{const normalizedName=camelCaseToHyphens(cssName);if(isNullable(cssValue)||cssValue===''){remove$7($elm,normalizedName);}else{set$1($elm,normalizedName,convertStyleToString(cssValue,normalizedName));}};const setupAttrHooks=(styles,settings,getContext)=>{const keepValues=settings.keep_values;const keepUrlHook={set:(elm,value,name)=>{const sugarElm=SugarElement.fromDom(elm);if(isFunction(settings.url_converter)&&isNonNullable(value)){value=settings.url_converter.call(settings.url_converter_scope||getContext(),String(value),name,elm);}const internalName='data-mce-'+name;legacySetAttribute(sugarElm,internalName,value);legacySetAttribute(sugarElm,name,value);},get:(elm,name)=>{const sugarElm=SugarElement.fromDom(elm);return get$9(sugarElm,'data-mce-'+name)||get$9(sugarElm,name);}};const attrHooks={style:{set:(elm,value)=>{const sugarElm=SugarElement.fromDom(elm);if(keepValues){legacySetAttribute(sugarElm,internalStyleName,value);}remove$b(sugarElm,'style');if(isString(value)){setAll(sugarElm,styles.parse(value));}},get:elm=>{const sugarElm=SugarElement.fromDom(elm);const value=get$9(sugarElm,internalStyleName)||get$9(sugarElm,'style');return styles.serialize(styles.parse(value),name(sugarElm));}}};if(keepValues){attrHooks.href=attrHooks.src=keepUrlHook;}return attrHooks;};const DOMUtils=(doc,settings={})=>{const addedStyles={};const win=window;const files={};let counter=0;const stdMode=true;const boxModel=true;const styleSheetLoader=instance.forElement(SugarElement.fromDom(doc),{contentCssCors:settings.contentCssCors,referrerPolicy:settings.referrerPolicy});const boundEvents=[];const schema=settings.schema?settings.schema:Schema({});const styles=Styles({url_converter:settings.url_converter,url_converter_scope:settings.url_converter_scope},settings.schema);const events=settings.ownEvents?new EventUtils():EventUtils.Event;const blockElementsMap=schema.getBlockElements();const isBlock=node=>{if(isString(node)){return has$2(blockElementsMap,node);}else{return isElement$6(node)&&has$2(blockElementsMap,node.nodeName);}};const get=elm=>elm&&doc&&isString(elm)?doc.getElementById(elm):elm;const _get=elm=>{const value=get(elm);return isNonNullable(value)?SugarElement.fromDom(value):null;};const getAttrib=(elm,name,defaultVal='')=>{let value;const $elm=_get(elm);if(isNonNullable($elm)&&isElement$7($elm)){const hook=attrHooks[name];if(hook&&hook.get){value=hook.get($elm.dom,name);}else{value=get$9($elm,name);}}return isNonNullable(value)?value:defaultVal;};const getAttribs=elm=>{const node=get(elm);return isNullable(node)?[]:node.attributes;};const setAttrib=(elm,name,value)=>{run(elm,e=>{if(isElement$6(e)){const $elm=SugarElement.fromDom(e);const val=value===''?null:value;const originalValue=get$9($elm,name);const hook=attrHooks[name];if(hook&&hook.set){hook.set($elm.dom,val,name);}else{legacySetAttribute($elm,name,val);}if(originalValue!==val&&settings.onSetAttrib){settings.onSetAttrib({attrElm:$elm.dom,attrName:name,attrValue:val});}}});};const clone=(node,deep)=>{return node.cloneNode(deep);};const getRoot=()=>settings.root_element||doc.body;const getViewPort=argWin=>{const vp=getBounds(argWin);return{x:vp.x,y:vp.y,w:vp.width,h:vp.height};};const getPos$1=(elm,rootElm)=>getPos(doc.body,get(elm),rootElm);const setStyle=(elm,name,value)=>{run(elm,e=>{const $elm=SugarElement.fromDom(e);applyStyle$1($elm,name,value);if(settings.update_styles){updateInternalStyleAttr(styles,$elm);}});};const setStyles=(elm,stylesArg)=>{run(elm,e=>{const $elm=SugarElement.fromDom(e);each$d(stylesArg,(v,n)=>{applyStyle$1($elm,n,v);});if(settings.update_styles){updateInternalStyleAttr(styles,$elm);}});};const getStyle=(elm,name,computed)=>{const $elm=get(elm);if(isNullable($elm)||!isElement$6($elm)){return undefined;}if(computed){return get$7(SugarElement.fromDom($elm),camelCaseToHyphens(name));}else{name=name.replace(/-(\\D)/g,(a,b)=>b.toUpperCase());if(name==='float'){name='cssFloat';}return $elm.style?$elm.style[name]:undefined;}};const getSize=elm=>{const $elm=get(elm);if(!$elm){return{w:0,h:0};}let w=getStyle($elm,'width');let h=getStyle($elm,'height');if(!w||w.indexOf('px')===-1){w='0';}if(!h||h.indexOf('px')===-1){h='0';}return{w:parseInt(w,10)||$elm.offsetWidth||$elm.clientWidth,h:parseInt(h,10)||$elm.offsetHeight||$elm.clientHeight};};const getRect=elm=>{const $elm=get(elm);const pos=getPos$1($elm);const size=getSize($elm);return{x:pos.x,y:pos.y,w:size.w,h:size.h};};const is=(elm,selector)=>{if(!elm){return false;}const elms=isArray$1(elm)?elm:[elm];return exists(elms,e=>{return is$1(SugarElement.fromDom(e),selector);});};const getParents=(elm,selector,root,collect)=>{const result=[];let node=get(elm);collect=collect===undefined;const resolvedRoot=root||(getRoot().nodeName!=='BODY'?getRoot().parentNode:null);if(isString(selector)){if(selector==='*'){selector=isElement$6;}else{const selectorVal=selector;selector=node=>is(node,selectorVal);}}while(node){if(node===resolvedRoot||isNullable(node.nodeType)||isDocument$1(node)||isDocumentFragment(node)){break;}if(!selector||selector(node)){if(collect){result.push(node);}else{return[node];}}node=node.parentNode;}return collect?result:null;};const getParent=(node,selector,root)=>{const parents=getParents(node,selector,root,false);return parents&&parents.length>0?parents[0]:null;};const _findSib=(node,selector,name)=>{let func=selector;if(node){if(isString(selector)){func=node=>{return is(node,selector);};}for(let tempNode=node[name];tempNode;tempNode=tempNode[name]){if(isFunction(func)&&func(tempNode)){return tempNode;}}}return null;};const getNext=(node,selector)=>_findSib(node,selector,'nextSibling');const getPrev=(node,selector)=>_findSib(node,selector,'previousSibling');const isParentNode=node=>isFunction(node.querySelectorAll);const select=(selector,scope)=>{var _a,_b;const elm=(_b=(_a=get(scope))!==null&&_a!==void 0?_a:settings.root_element)!==null&&_b!==void 0?_b:doc;return isParentNode(elm)?from(elm.querySelectorAll(selector)):[];};const run=function(elm,func,scope){const context=scope!==null&&scope!==void 0?scope:this;if(isArray$1(elm)){const result=[];each$a(elm,(e,i)=>{const node=get(e);if(node){result.push(func.call(context,node,i));}});return result;}else{const node=get(elm);return!node?false:func.call(context,node);}};const setAttribs=(elm,attrs)=>{run(elm,$elm=>{each$d(attrs,(value,name)=>{setAttrib($elm,name,value);});});};const setHTML=(elm,html)=>{run(elm,e=>{const $elm=SugarElement.fromDom(e);set($elm,html);});};const add=(parentElm,name,attrs,html,create)=>run(parentElm,parentElm=>{const newElm=isString(name)?doc.createElement(name):name;if(isNonNullable(attrs)){setAttribs(newElm,attrs);}if(html){if(!isString(html)&&html.nodeType){newElm.appendChild(html);}else if(isString(html)){setHTML(newElm,html);}}return!create?parentElm.appendChild(newElm):newElm;});const create=(name,attrs,html)=>add(doc.createElement(name),name,attrs,html,true);const decode=Entities.decode;const encode=Entities.encodeAllRaw;const createHTML=(name,attrs,html='')=>{let outHtml='<'+name;for(const key in attrs){if(hasNonNullableKey(attrs,key)){outHtml+=' '+key+'=\"'+encode(attrs[key])+'\"';}}if(isEmpty$3(html)&&has$2(schema.getVoidElements(),name)){return outHtml+' />';}else{return outHtml+'>'+html+'</'+name+'>';}};const createFragment=html=>{const container=doc.createElement('div');const frag=doc.createDocumentFragment();frag.appendChild(container);if(html){container.innerHTML=html;}let node;while(node=container.firstChild){frag.appendChild(node);}frag.removeChild(container);return frag;};const remove=(node,keepChildren)=>{return run(node,n=>{const $node=SugarElement.fromDom(n);if(keepChildren){each$e(children($node),child=>{if(isText$b(child)&&child.dom.length===0){remove$6(child);}else{before$3($node,child);}});}remove$6($node);return $node.dom;});};const removeAllAttribs=e=>run(e,e=>{const attrs=e.attributes;for(let i=attrs.length-1;i>=0;i--){e.removeAttributeNode(attrs.item(i));}});const parseStyle=cssText=>styles.parse(cssText);const serializeStyle=(stylesArg,name)=>styles.serialize(stylesArg,name);const addStyle=cssText=>{if(self!==DOMUtils.DOM&&doc===document){if(addedStyles[cssText]){return;}addedStyles[cssText]=true;}let styleElm=doc.getElementById('mceDefaultStyles');if(!styleElm){styleElm=doc.createElement('style');styleElm.id='mceDefaultStyles';styleElm.type='text/css';const head=doc.head;if(head.firstChild){head.insertBefore(styleElm,head.firstChild);}else{head.appendChild(styleElm);}}if(styleElm.styleSheet){styleElm.styleSheet.cssText+=cssText;}else{styleElm.appendChild(doc.createTextNode(cssText));}};const loadCSS=urls=>{if(!urls){urls='';}each$e(urls.split(','),url=>{files[url]=true;styleSheetLoader.load(url).catch(noop);});};const toggleClass=(elm,cls,state)=>{run(elm,e=>{if(isElement$6(e)){const $elm=SugarElement.fromDom(e);const classes=cls.split(' ');each$e(classes,c=>{if(isNonNullable(state)){const fn=state?add$2:remove$8;fn($elm,c);}else{toggle$1($elm,c);}});}});};const addClass=(elm,cls)=>{toggleClass(elm,cls,true);};const removeClass=(elm,cls)=>{toggleClass(elm,cls,false);};const hasClass=(elm,cls)=>{const $elm=_get(elm);const classes=cls.split(' ');return isNonNullable($elm)&&forall(classes,c=>has($elm,c));};const show=elm=>{run(elm,e=>remove$7(SugarElement.fromDom(e),'display'));};const hide=elm=>{run(elm,e=>set$1(SugarElement.fromDom(e),'display','none'));};const isHidden=elm=>{const $elm=_get(elm);return isNonNullable($elm)&&is$2(getRaw$1($elm,'display'),'none');};const uniqueId=prefix=>(!prefix?'mce_':prefix)+counter++;const getOuterHTML=elm=>{const $elm=_get(elm);if(isNonNullable($elm)){return isElement$6($elm.dom)?$elm.dom.outerHTML:getOuter($elm);}else{return'';}};const setOuterHTML=(elm,html)=>{run(elm,$elm=>{if(isElement$6($elm)){$elm.outerHTML=html;}});};const insertAfter=(node,reference)=>{const referenceNode=get(reference);return run(node,node=>{const parent=referenceNode===null||referenceNode===void 0?void 0:referenceNode.parentNode;const nextSibling=referenceNode===null||referenceNode===void 0?void 0:referenceNode.nextSibling;if(parent){if(nextSibling){parent.insertBefore(node,nextSibling);}else{parent.appendChild(node);}}return node;});};const replace=(newElm,oldElm,keepChildren)=>run(oldElm,elm=>{var _a;const replacee=isArray$1(oldElm)?newElm.cloneNode(true):newElm;if(keepChildren){each$a(grep(elm.childNodes),node=>{replacee.appendChild(node);});}(_a=elm.parentNode)===null||_a===void 0?void 0:_a.replaceChild(replacee,elm);return elm;});const rename=(elm,name)=>{if(elm.nodeName!==name.toUpperCase()){const newElm=create(name);each$a(getAttribs(elm),attrNode=>{setAttrib(newElm,attrNode.nodeName,getAttrib(elm,attrNode.nodeName));});replace(newElm,elm,true);return newElm;}else{return elm;}};const findCommonAncestor=(a,b)=>{let ps=a;while(ps){let pe=b;while(pe&&ps!==pe){pe=pe.parentNode;}if(ps===pe){break;}ps=ps.parentNode;}if(!ps&&a.ownerDocument){return a.ownerDocument.documentElement;}else{return ps;}};const isNonEmptyElement=node=>{if(isElement$6(node)){const isNamedAnchor=node.nodeName.toLowerCase()==='a'&&!getAttrib(node,'href')&&getAttrib(node,'id');if(getAttrib(node,'name')||getAttrib(node,'data-mce-bookmark')||isNamedAnchor){return true;}}return false;};const isEmpty=(node,elements)=>{let brCount=0;if(isNonEmptyElement(node)){return false;}const firstChild=node.firstChild;if(firstChild){const walker=new DomTreeWalker(firstChild,node);const whitespaceElements=schema?schema.getWhitespaceElements():{};const nonEmptyElements=elements||(schema?schema.getNonEmptyElements():null);let tempNode=firstChild;do{if(isElement$6(tempNode)){const bogusVal=tempNode.getAttribute('data-mce-bogus');if(bogusVal){tempNode=walker.next(bogusVal==='all');continue;}const name=tempNode.nodeName.toLowerCase();if(nonEmptyElements&&nonEmptyElements[name]){if(name==='br'){brCount++;tempNode=walker.next();continue;}return false;}if(isNonEmptyElement(tempNode)){return false;}}if(isComment(tempNode)){return false;}if(isText$a(tempNode)&&!isWhitespaceText(tempNode.data)){return false;}if(isText$a(tempNode)&&tempNode.parentNode&&whitespaceElements[tempNode.parentNode.nodeName]&&isWhitespaceText(tempNode.data)){return false;}tempNode=walker.next();}while(tempNode);}return brCount<=1;};const createRng=()=>doc.createRange();const split=(parentElm,splitElm,replacementElm)=>{let range=createRng();let beforeFragment;let afterFragment;if(parentElm&&splitElm&&parentElm.parentNode&&splitElm.parentNode){const parentNode=parentElm.parentNode;range.setStart(parentNode,findNodeIndex(parentElm));range.setEnd(splitElm.parentNode,findNodeIndex(splitElm));beforeFragment=range.extractContents();range=createRng();range.setStart(splitElm.parentNode,findNodeIndex(splitElm)+1);range.setEnd(parentNode,findNodeIndex(parentElm)+1);afterFragment=range.extractContents();parentNode.insertBefore(trimNode(self,beforeFragment),parentElm);if(replacementElm){parentNode.insertBefore(replacementElm,parentElm);}else{parentNode.insertBefore(splitElm,parentElm);}parentNode.insertBefore(trimNode(self,afterFragment),parentElm);remove(parentElm);return replacementElm||splitElm;}else{return undefined;}};const bind=(target,name,func,scope)=>{if(isArray$1(target)){let i=target.length;const rv=[];while(i--){rv[i]=bind(target[i],name,func,scope);}return rv;}else{if(settings.collect&&(target===doc||target===win)){boundEvents.push([target,name,func,scope]);}return events.bind(target,name,func,scope||self);}};const unbind=(target,name,func)=>{if(isArray$1(target)){let i=target.length;const rv=[];while(i--){rv[i]=unbind(target[i],name,func);}return rv;}else{if(boundEvents.length>0&&(target===doc||target===win)){let i=boundEvents.length;while(i--){const[boundTarget,boundName,boundFunc]=boundEvents[i];if(target===boundTarget&&(!name||name===boundName)&&(!func||func===boundFunc)){events.unbind(boundTarget,boundName,boundFunc);}}}return events.unbind(target,name,func);}};const dispatch=(target,name,evt)=>events.dispatch(target,name,evt);const fire=(target,name,evt)=>events.dispatch(target,name,evt);const getContentEditable=node=>{if(node&&isElement$6(node)){const contentEditable=node.getAttribute('data-mce-contenteditable');if(contentEditable&&contentEditable!=='inherit'){return contentEditable;}return node.contentEditable!=='inherit'?node.contentEditable:null;}else{return null;}};const getContentEditableParent=node=>{const root=getRoot();let state=null;for(let tempNode=node;tempNode&&tempNode!==root;tempNode=tempNode.parentNode){state=getContentEditable(tempNode);if(state!==null){break;}}return state;};const destroy=()=>{if(boundEvents.length>0){let i=boundEvents.length;while(i--){const[boundTarget,boundName,boundFunc]=boundEvents[i];events.unbind(boundTarget,boundName,boundFunc);}}each$d(files,(_,url)=>{styleSheetLoader.unload(url);delete files[url];});};const isChildOf=(node,parent)=>{return node===parent||parent.contains(node);};const dumpRng=r=>'startContainer: '+r.startContainer.nodeName+', startOffset: '+r.startOffset+', endContainer: '+r.endContainer.nodeName+', endOffset: '+r.endOffset;const self={doc,settings,win,files,stdMode,boxModel,styleSheetLoader,boundEvents,styles,schema,events,isBlock:isBlock,root:null,clone,getRoot,getViewPort,getRect,getSize,getParent,getParents:getParents,get,getNext,getPrev,select,is,add,create,createHTML,createFragment,remove,setStyle,getStyle:getStyle,setStyles,removeAllAttribs,setAttrib,setAttribs,getAttrib,getPos:getPos$1,parseStyle,serializeStyle,addStyle,loadCSS,addClass,removeClass,hasClass,toggleClass,show,hide,isHidden,uniqueId,setHTML,getOuterHTML,setOuterHTML,decode,encode,insertAfter,replace,rename,findCommonAncestor,run,getAttribs,isEmpty,createRng,nodeIndex:findNodeIndex,split,bind:bind,unbind:unbind,fire,dispatch,getContentEditable,getContentEditableParent,destroy,isChildOf,dumpRng};const attrHooks=setupAttrHooks(styles,settings,constant(self));return self;};DOMUtils.DOM=DOMUtils(document);DOMUtils.nodeIndex=findNodeIndex;const DOM$b=DOMUtils.DOM;const QUEUED=0;const LOADING=1;const LOADED=2;const FAILED=3;class ScriptLoader{constructor(settings={}){this.states={};this.queue=[];this.scriptLoadedCallbacks={};this.queueLoadedCallbacks=[];this.loading=false;this.settings=settings;}_setReferrerPolicy(referrerPolicy){this.settings.referrerPolicy=referrerPolicy;}loadScript(url){return new Promise((resolve,reject)=>{const dom=DOM$b;let elm;const cleanup=()=>{dom.remove(id);if(elm){elm.onerror=elm.onload=elm=null;}};const done=()=>{cleanup();resolve();};const error=()=>{cleanup();reject('Failed to load script: '+url);};const id=dom.uniqueId();elm=document.createElement('script');elm.id=id;elm.type='text/javascript';elm.src=Tools._addCacheSuffix(url);if(this.settings.referrerPolicy){dom.setAttrib(elm,'referrerpolicy',this.settings.referrerPolicy);}elm.onload=done;elm.onerror=error;(document.getElementsByTagName('head')[0]||document.body).appendChild(elm);});}isDone(url){return this.states[url]===LOADED;}markDone(url){this.states[url]=LOADED;}add(url){const self=this;self.queue.push(url);const state=self.states[url];if(state===undefined){self.states[url]=QUEUED;}return new Promise((resolve,reject)=>{if(!self.scriptLoadedCallbacks[url]){self.scriptLoadedCallbacks[url]=[];}self.scriptLoadedCallbacks[url].push({resolve,reject});});}load(url){return this.add(url);}remove(url){delete this.states[url];delete this.scriptLoadedCallbacks[url];}loadQueue(){const queue=this.queue;this.queue=[];return this.loadScripts(queue);}loadScripts(scripts){const self=this;const execCallbacks=(name,url)=>{get$a(self.scriptLoadedCallbacks,url).each(callbacks=>{each$e(callbacks,callback=>callback[name](url));});delete self.scriptLoadedCallbacks[url];};const processResults=results=>{const failures=filter$5(results,result=>result.status==='rejected');if(failures.length>0){return Promise.reject(bind$3(failures,({reason})=>isArray$1(reason)?reason:[reason]));}else{return Promise.resolve();}};const load=urls=>Promise.allSettled(map$3(urls,url=>{if(self.states[url]===LOADED){execCallbacks('resolve',url);return Promise.resolve();}else if(self.states[url]===FAILED){execCallbacks('reject',url);return Promise.reject(url);}else{self.states[url]=LOADING;return self.loadScript(url).then(()=>{self.states[url]=LOADED;execCallbacks('resolve',url);const queue=self.queue;if(queue.length>0){self.queue=[];return load(queue).then(processResults);}else{return Promise.resolve();}},()=>{self.states[url]=FAILED;execCallbacks('reject',url);return Promise.reject(url);});}}));const processQueue=urls=>{self.loading=true;return load(urls).then(results=>{self.loading=false;const nextQueuedItem=self.queueLoadedCallbacks.shift();Optional.from(nextQueuedItem).each(call);return processResults(results);});};const uniqueScripts=stringArray(scripts);if(self.loading){return new Promise((resolve,reject)=>{self.queueLoadedCallbacks.push(()=>processQueue(uniqueScripts).then(resolve,reject));});}else{return processQueue(uniqueScripts);}}}ScriptLoader.ScriptLoader=new ScriptLoader();const Cell=initial=>{let value=initial;const get=()=>{return value;};const set=v=>{value=v;};return{get,set};};const isRaw=str=>isObject(str)&&has$2(str,'raw');const isTokenised=str=>isArray$1(str)&&str.length>1;const data={};const currentCode=Cell('en');const getLanguageData=()=>get$a(data,currentCode.get());const getData$1=()=>map$2(data,value=>({...value}));const setCode=newCode=>{if(newCode){currentCode.set(newCode);}};const getCode=()=>currentCode.get();const add$1=(code,items)=>{let langData=data[code];if(!langData){data[code]=langData={};}each$d(items,(translation,name)=>{langData[name.toLowerCase()]=translation;});};const translate=text=>{const langData=getLanguageData().getOr({});const toString=obj=>{if(isFunction(obj)){return Object.prototype.toString.call(obj);}return!isEmpty(obj)?''+obj:'';};const isEmpty=text=>text===''||text===null||text===undefined;const getLangData=text=>{const textstr=toString(text);return get$a(langData,textstr.toLowerCase()).map(toString).getOr(textstr);};const removeContext=str=>str.replace(/{context:\\w+}$/,'');if(isEmpty(text)){return'';}if(isRaw(text)){return toString(text.raw);}if(isTokenised(text)){const values=text.slice(1);const substitued=getLangData(text[0]).replace(/\\{([0-9]+)\\}/g,($1,$2)=>has$2(values,$2)?toString(values[$2]):$1);return removeContext(substitued);}return removeContext(getLangData(text));};const isRtl$1=()=>getLanguageData().bind(items=>get$a(items,'_dir')).exists(dir=>dir==='rtl');const hasCode=code=>has$2(data,code);const I18n={getData:getData$1,setCode,getCode,add:add$1,translate,isRtl:isRtl$1,hasCode};const AddOnManager=()=>{const items=[];const urls={};const lookup={};const _listeners=[];const runListeners=(name,state)=>{const matchedListeners=filter$5(_listeners,listener=>listener.name===name&&listener.state===state);each$e(matchedListeners,listener=>listener.resolve());};const isLoaded=name=>has$2(urls,name);const isAdded=name=>has$2(lookup,name);const get=name=>{if(lookup[name]){return lookup[name].instance;}return undefined;};const loadLanguagePack=(name,languages)=>{const language=I18n.getCode();const wrappedLanguages=','+(languages||'')+',';if(!language||languages&&wrappedLanguages.indexOf(','+language+',')===-1){return;}ScriptLoader.ScriptLoader.add(urls[name]+'/langs/'+language+'.js');};const requireLangPack=(name,languages)=>{if(AddOnManager.languageLoad!==false){if(isLoaded(name)){loadLanguagePack(name,languages);}else{waitFor(name,'loaded').then(()=>loadLanguagePack(name,languages));}}};const add=(id,addOn)=>{items.push(addOn);lookup[id]={instance:addOn};runListeners(id,'added');return addOn;};const remove=name=>{delete urls[name];delete lookup[name];};const createUrl=(baseUrl,dep)=>{if(isString(dep)){return isString(baseUrl)?{prefix:'',resource:dep,suffix:''}:{prefix:baseUrl.prefix,resource:dep,suffix:baseUrl.suffix};}else{return dep;}};const load=(name,addOnUrl)=>{if(urls[name]){return Promise.resolve();}let urlString=isString(addOnUrl)?addOnUrl:addOnUrl.prefix+addOnUrl.resource+addOnUrl.suffix;if(urlString.indexOf('/')!==0&&urlString.indexOf('://')===-1){urlString=AddOnManager.baseURL+'/'+urlString;}urls[name]=urlString.substring(0,urlString.lastIndexOf('/'));const done=()=>{runListeners(name,'loaded');return Promise.resolve();};if(lookup[name]){return done();}else{return ScriptLoader.ScriptLoader.add(urlString).then(done);}};const waitFor=(name,state='added')=>{if(state==='added'&&isAdded(name)){return Promise.resolve();}else if(state==='loaded'&&isLoaded(name)){return Promise.resolve();}else{return new Promise(resolve=>{_listeners.push({name,state,resolve});});}};return{items,urls,lookup,get,requireLangPack,add,remove,createUrl,load,waitFor};};AddOnManager.languageLoad=true;AddOnManager.baseURL='';AddOnManager.PluginManager=AddOnManager();AddOnManager.ThemeManager=AddOnManager();AddOnManager.ModelManager=AddOnManager();const singleton=doRevoke=>{const subject=Cell(Optional.none());const revoke=()=>subject.get().each(doRevoke);const clear=()=>{revoke();subject.set(Optional.none());};const isSet=()=>subject.get().isSome();const get=()=>subject.get();const set=s=>{revoke();subject.set(Optional.some(s));};return{clear,isSet,get,set};};const repeatable=delay=>{const intervalId=Cell(Optional.none());const revoke=()=>intervalId.get().each(id=>clearInterval(id));const clear=()=>{revoke();intervalId.set(Optional.none());};const isSet=()=>intervalId.get().isSome();const get=()=>intervalId.get();const set=functionToRepeat=>{revoke();intervalId.set(Optional.some(setInterval(functionToRepeat,delay)));};return{clear,isSet,get,set};};const value$2=()=>{const subject=singleton(noop);const on=f=>subject.get().each(f);return{...subject,on};};const first$1=(fn,rate)=>{let timer=null;const cancel=()=>{if(!isNull(timer)){clearTimeout(timer);timer=null;}};const throttle=(...args)=>{if(isNull(timer)){timer=setTimeout(()=>{timer=null;fn.apply(null,args);},rate);}};return{cancel,throttle};};const last$1=(fn,rate)=>{let timer=null;const cancel=()=>{if(!isNull(timer)){clearTimeout(timer);timer=null;}};const throttle=(...args)=>{cancel();timer=setTimeout(()=>{timer=null;fn.apply(null,args);},rate);};return{cancel,throttle};};const annotation=constant('mce-annotation');const dataAnnotation=constant('data-mce-annotation');const dataAnnotationId=constant('data-mce-annotation-uid');const dataAnnotationActive=constant('data-mce-annotation-active');const dataAnnotationClasses=constant('data-mce-annotation-classes');const dataAnnotationAttributes=constant('data-mce-annotation-attrs');const isRoot$1=root=>node=>eq(node,root);const identify=(editor,annotationName)=>{const rng=editor.selection.getRng();const start=SugarElement.fromDom(rng.startContainer);const root=SugarElement.fromDom(editor.getBody());const selector=annotationName.fold(()=>'.'+annotation(),an=>`[${dataAnnotation()}=\"${an}\"]`);const newStart=child$1(start,rng.startOffset).getOr(start);const closest=closest$3(newStart,selector,isRoot$1(root));return closest.bind(c=>getOpt(c,`${dataAnnotationId()}`).bind(uid=>getOpt(c,`${dataAnnotation()}`).map(name=>{const elements=findMarkers(editor,uid);return{uid,name,elements};})));};const isAnnotation=elem=>isElement$7(elem)&&has(elem,annotation());const isBogusElement=(elem,root)=>has$1(elem,'data-mce-bogus')||ancestor$1(elem,'[data-mce-bogus=\"all\"]',isRoot$1(root));const findMarkers=(editor,uid)=>{const body=SugarElement.fromDom(editor.getBody());const descendants$1=descendants(body,`[${dataAnnotationId()}=\"${uid}\"]`);return filter$5(descendants$1,descendant=>!isBogusElement(descendant,body));};const findAll=(editor,name)=>{const body=SugarElement.fromDom(editor.getBody());const markers=descendants(body,`[${dataAnnotation()}=\"${name}\"]`);const directory={};each$e(markers,m=>{if(!isBogusElement(m,body)){const uid=get$9(m,dataAnnotationId());const nodesAlready=get$a(directory,uid).getOr([]);directory[uid]=nodesAlready.concat([m]);}});return directory;};const setup$x=(editor,registry)=>{const changeCallbacks=Cell({});const initData=()=>({listeners:[],previous:value$2()});const withCallbacks=(name,f)=>{updateCallbacks(name,data=>{f(data);return data;});};const updateCallbacks=(name,f)=>{const callbackMap=changeCallbacks.get();const data=get$a(callbackMap,name).getOrThunk(initData);const outputData=f(data);callbackMap[name]=outputData;changeCallbacks.set(callbackMap);};const fireCallbacks=(name,uid,elements)=>{withCallbacks(name,data=>{each$e(data.listeners,f=>f(true,name,{uid,nodes:map$3(elements,elem=>elem.dom)}));});};const fireNoAnnotation=name=>{withCallbacks(name,data=>{each$e(data.listeners,f=>f(false,name));});};const toggleActiveAttr=(uid,state)=>{each$e(findMarkers(editor,uid),elem=>{if(state){set$2(elem,dataAnnotationActive(),'true');}else{remove$b(elem,dataAnnotationActive());}});};const onNodeChange=last$1(()=>{const annotations=sort(registry.getNames());each$e(annotations,name=>{updateCallbacks(name,data=>{const prev=data.previous.get();identify(editor,Optional.some(name)).fold(()=>{prev.each(uid=>{fireNoAnnotation(name);data.previous.clear();toggleActiveAttr(uid,false);});},({uid,name,elements})=>{if(!is$2(prev,uid)){prev.each(uid=>toggleActiveAttr(uid,false));fireCallbacks(name,uid,elements);data.previous.set(uid);toggleActiveAttr(uid,true);}});return{previous:data.previous,listeners:data.listeners};});});},30);editor.on('remove',()=>{onNodeChange.cancel();});editor.on('NodeChange',()=>{onNodeChange.throttle();});const addListener=(name,f)=>{updateCallbacks(name,data=>({previous:data.previous,listeners:data.listeners.concat([f])}));};return{addListener};};const setup$w=(editor,registry)=>{const dataAnnotation$1=dataAnnotation();const identifyParserNode=node=>Optional.from(node.attr(dataAnnotation$1)).bind(registry.lookup);const removeDirectAnnotation=node=>{var _a,_b;node.attr(dataAnnotationId(),null);node.attr(dataAnnotation(),null);node.attr(dataAnnotationActive(),null);const customAttrNames=Optional.from(node.attr(dataAnnotationAttributes())).map(names=>names.split(',')).getOr([]);const customClasses=Optional.from(node.attr(dataAnnotationClasses())).map(names=>names.split(',')).getOr([]);each$e(customAttrNames,name=>node.attr(name,null));const classList=(_b=(_a=node.attr('class'))===null||_a===void 0?void 0:_a.split(' '))!==null&&_b!==void 0?_b:[];const newClassList=difference(classList,[annotation()].concat(customClasses));node.attr('class',newClassList.length>0?newClassList.join(' '):null);node.attr(dataAnnotationClasses(),null);node.attr(dataAnnotationAttributes(),null);};editor.serializer.addTempAttr(dataAnnotationActive());editor.serializer.addAttributeFilter(dataAnnotation$1,nodes=>{for(const node of nodes){identifyParserNode(node).each(settings=>{if(settings.persistent===false){if(node.name==='span'){node.unwrap();}else{removeDirectAnnotation(node);}}});}});};const create$c=()=>{const annotations={};const register=(name,settings)=>{annotations[name]={name,settings};};const lookup=name=>get$a(annotations,name).map(a=>a.settings);const getNames=()=>keys(annotations);return{register,lookup,getNames};};let unique=0;const generate$1=prefix=>{const date=new Date();const time=date.getTime();const random=Math.floor(Math.random()*1000000000);unique++;return prefix+'_'+random+unique+String(time);};const add=(element,classes)=>{each$e(classes,x=>{add$2(element,x);});};const remove$5=(element,classes)=>{each$e(classes,x=>{remove$8(element,x);});};const clone$2=(original,isDeep)=>SugarElement.fromDom(original.dom.cloneNode(isDeep));const shallow$1=original=>clone$2(original,false);const deep$1=original=>clone$2(original,true);const shallowAs=(original,tag)=>{const nu=SugarElement.fromTag(tag);const attributes=clone$4(original);setAll$1(nu,attributes);return nu;};const mutate=(original,tag)=>{const nu=shallowAs(original,tag);after$4(original,nu);const children$1=children(original);append(nu,children$1);remove$6(original);return nu;};const TextWalker=(startNode,rootNode,isBoundary=never)=>{const walker=new DomTreeWalker(startNode,rootNode);const walk=direction=>{let next;do{next=walker[direction]();}while(next&&!isText$a(next)&&!isBoundary(next));return Optional.from(next).filter(isText$a);};return{current:()=>Optional.from(walker.current()).filter(isText$a),next:()=>walk('next'),prev:()=>walk('prev'),prev2:()=>walk('prev2')};};const TextSeeker=(dom,isBoundary)=>{const isBlockBoundary=isBoundary?isBoundary:node=>dom.isBlock(node)||isBr$6(node)||isContentEditableFalse$a(node);const walk=(node,offset,walker,process)=>{if(isText$a(node)){const newOffset=process(node,offset,node.data);if(newOffset!==-1){return Optional.some({container:node,offset:newOffset});}}return walker().bind(next=>walk(next.container,next.offset,walker,process));};const backwards=(node,offset,process,root)=>{const walker=TextWalker(node,root!==null&&root!==void 0?root:dom.getRoot(),isBlockBoundary);return walk(node,offset,()=>walker.prev().map(prev=>({container:prev,offset:prev.length})),process).getOrNull();};const forwards=(node,offset,process,root)=>{const walker=TextWalker(node,root!==null&&root!==void 0?root:dom.getRoot(),isBlockBoundary);return walk(node,offset,()=>walker.next().map(next=>({container:next,offset:0})),process).getOrNull();};return{backwards,forwards};};const round$2=Math.round;const clone$1=rect=>{if(!rect){return{left:0,top:0,bottom:0,right:0,width:0,height:0};}return{left:round$2(rect.left),top:round$2(rect.top),bottom:round$2(rect.bottom),right:round$2(rect.right),width:round$2(rect.width),height:round$2(rect.height)};};const collapse=(rect,toStart)=>{rect=clone$1(rect);if(toStart){rect.right=rect.left;}else{rect.left=rect.left+rect.width;rect.right=rect.left;}rect.width=0;return rect;};const isEqual=(rect1,rect2)=>rect1.left===rect2.left&&rect1.top===rect2.top&&rect1.bottom===rect2.bottom&&rect1.right===rect2.right;const isValidOverflow=(overflowY,rect1,rect2)=>overflowY>=0&&overflowY<=Math.min(rect1.height,rect2.height)/2;const isAbove$1=(rect1,rect2)=>{const halfHeight=Math.min(rect2.height/2,rect1.height/2);if(rect1.bottom-halfHeight<rect2.top){return true;}if(rect1.top>rect2.bottom){return false;}return isValidOverflow(rect2.top-rect1.bottom,rect1,rect2);};const isBelow$1=(rect1,rect2)=>{if(rect1.top>rect2.bottom){return true;}if(rect1.bottom<rect2.top){return false;}return isValidOverflow(rect2.bottom-rect1.top,rect1,rect2);};const containsXY=(rect,clientX,clientY)=>clientX>=rect.left&&clientX<=rect.right&&clientY>=rect.top&&clientY<=rect.bottom;const boundingClientRectFromRects=rects=>{return foldl(rects,(acc,rect)=>{return acc.fold(()=>Optional.some(rect),prevRect=>{const left=Math.min(rect.left,prevRect.left);const top=Math.min(rect.top,prevRect.top);const right=Math.max(rect.right,prevRect.right);const bottom=Math.max(rect.bottom,prevRect.bottom);return Optional.some({top,right,bottom,left,width:right-left,height:bottom-top});});},Optional.none());};const distanceToRectEdgeFromXY=(rect,x,y)=>{const cx=Math.max(Math.min(x,rect.left+rect.width),rect.left);const cy=Math.max(Math.min(y,rect.top+rect.height),rect.top);return Math.sqrt((x-cx)*(x-cx)+(y-cy)*(y-cy));};const overlapY=(r1,r2)=>Math.max(0,Math.min(r1.bottom,r2.bottom)-Math.max(r1.top,r2.top));const clamp$2=(value,min,max)=>Math.min(Math.max(value,min),max);const getSelectedNode=range=>{const startContainer=range.startContainer,startOffset=range.startOffset;if(startContainer===range.endContainer&&startContainer.hasChildNodes()&&range.endOffset===startOffset+1){return startContainer.childNodes[startOffset];}return null;};const getNode$1=(container,offset)=>{if(isElement$6(container)&&container.hasChildNodes()){const childNodes=container.childNodes;const safeOffset=clamp$2(offset,0,childNodes.length-1);return childNodes[safeOffset];}else{return container;}};const getNodeUnsafe=(container,offset)=>{if(offset<0&&isElement$6(container)&&container.hasChildNodes()){return undefined;}else{return getNode$1(container,offset);}};const extendingChars=new RegExp('[\\u0300-\\u036f\\u0483-\\u0487\\u0488-\\u0489\\u0591-\\u05bd\\u05bf\\u05c1-\\u05c2\\u05c4-\\u05c5\\u05c7\\u0610-\\u061a'+'\\u064b-\\u065f\\u0670\\u06d6-\\u06dc\\u06df-\\u06e4\\u06e7-\\u06e8\\u06ea-\\u06ed\\u0711\\u0730-\\u074a\\u07a6-\\u07b0'+'\\u07eb-\\u07f3\\u0816-\\u0819\\u081b-\\u0823\\u0825-\\u0827\\u0829-\\u082d\\u0859-\\u085b\\u08e3-\\u0902\\u093a\\u093c'+'\\u0941-\\u0948\\u094d\\u0951-\\u0957\\u0962-\\u0963\\u0981\\u09bc\\u09be\\u09c1-\\u09c4\\u09cd\\u09d7\\u09e2-\\u09e3'+'\\u0a01-\\u0a02\\u0a3c\\u0a41-\\u0a42\\u0a47-\\u0a48\\u0a4b-\\u0a4d\\u0a51\\u0a70-\\u0a71\\u0a75\\u0a81-\\u0a82\\u0abc'+'\\u0ac1-\\u0ac5\\u0ac7-\\u0ac8\\u0acd\\u0ae2-\\u0ae3\\u0b01\\u0b3c\\u0b3e\\u0b3f\\u0b41-\\u0b44\\u0b4d\\u0b56\\u0b57'+'\\u0b62-\\u0b63\\u0b82\\u0bbe\\u0bc0\\u0bcd\\u0bd7\\u0c00\\u0c3e-\\u0c40\\u0c46-\\u0c48\\u0c4a-\\u0c4d\\u0c55-\\u0c56'+'\\u0c62-\\u0c63\\u0c81\\u0cbc\\u0cbf\\u0cc2\\u0cc6\\u0ccc-\\u0ccd\\u0cd5-\\u0cd6\\u0ce2-\\u0ce3\\u0d01\\u0d3e\\u0d41-\\u0d44'+'\\u0d4d\\u0d57\\u0d62-\\u0d63\\u0dca\\u0dcf\\u0dd2-\\u0dd4\\u0dd6\\u0ddf\\u0e31\\u0e34-\\u0e3a\\u0e47-\\u0e4e\\u0eb1\\u0eb4-\\u0eb9'+'\\u0ebb-\\u0ebc\\u0ec8-\\u0ecd\\u0f18-\\u0f19\\u0f35\\u0f37\\u0f39\\u0f71-\\u0f7e\\u0f80-\\u0f84\\u0f86-\\u0f87\\u0f8d-\\u0f97'+'\\u0f99-\\u0fbc\\u0fc6\\u102d-\\u1030\\u1032-\\u1037\\u1039-\\u103a\\u103d-\\u103e\\u1058-\\u1059\\u105e-\\u1060\\u1071-\\u1074'+'\\u1082\\u1085-\\u1086\\u108d\\u109d\\u135d-\\u135f\\u1712-\\u1714\\u1732-\\u1734\\u1752-\\u1753\\u1772-\\u1773\\u17b4-\\u17b5'+'\\u17b7-\\u17bd\\u17c6\\u17c9-\\u17d3\\u17dd\\u180b-\\u180d\\u18a9\\u1920-\\u1922\\u1927-\\u1928\\u1932\\u1939-\\u193b\\u1a17-\\u1a18'+'\\u1a1b\\u1a56\\u1a58-\\u1a5e\\u1a60\\u1a62\\u1a65-\\u1a6c\\u1a73-\\u1a7c\\u1a7f\\u1ab0-\\u1abd\\u1ABE\\u1b00-\\u1b03\\u1b34'+'\\u1b36-\\u1b3a\\u1b3c\\u1b42\\u1b6b-\\u1b73\\u1b80-\\u1b81\\u1ba2-\\u1ba5\\u1ba8-\\u1ba9\\u1bab-\\u1bad\\u1be6\\u1be8-\\u1be9'+'\\u1bed\\u1bef-\\u1bf1\\u1c2c-\\u1c33\\u1c36-\\u1c37\\u1cd0-\\u1cd2\\u1cd4-\\u1ce0\\u1ce2-\\u1ce8\\u1ced\\u1cf4\\u1cf8-\\u1cf9'+'\\u1dc0-\\u1df5\\u1dfc-\\u1dff\\u200c-\\u200d\\u20d0-\\u20dc\\u20DD-\\u20E0\\u20e1\\u20E2-\\u20E4\\u20e5-\\u20f0\\u2cef-\\u2cf1'+'\\u2d7f\\u2de0-\\u2dff\\u302a-\\u302d\\u302e-\\u302f\\u3099-\\u309a\\ua66f\\uA670-\\uA672\\ua674-\\ua67d\\ua69e-\\ua69f\\ua6f0-\\ua6f1'+'\\ua802\\ua806\\ua80b\\ua825-\\ua826\\ua8c4\\ua8e0-\\ua8f1\\ua926-\\ua92d\\ua947-\\ua951\\ua980-\\ua982\\ua9b3\\ua9b6-\\ua9b9\\ua9bc'+'\\ua9e5\\uaa29-\\uaa2e\\uaa31-\\uaa32\\uaa35-\\uaa36\\uaa43\\uaa4c\\uaa7c\\uaab0\\uaab2-\\uaab4\\uaab7-\\uaab8\\uaabe-\\uaabf\\uaac1'+'\\uaaec-\\uaaed\\uaaf6\\uabe5\\uabe8\\uabed\\ufb1e\\ufe00-\\ufe0f\\ufe20-\\ufe2f\\uff9e-\\uff9f]');const isExtendingChar=ch=>isString(ch)&&ch.charCodeAt(0)>=768&&extendingChars.test(ch);const or=(...args)=>{return x=>{for(let i=0;i<args.length;i++){if(args[i](x)){return true;}}return false;};};const and=(...args)=>{return x=>{for(let i=0;i<args.length;i++){if(!args[i](x)){return false;}}return true;};};const isElement$4=isElement$6;const isCaretCandidate$2=isCaretCandidate$3;const isBlock$1=matchStyleValues('display','block table');const isFloated=matchStyleValues('float','left right');const isValidElementCaretCandidate=and(isElement$4,isCaretCandidate$2,not(isFloated));const isNotPre=not(matchStyleValues('white-space','pre pre-line pre-wrap'));const isText$7=isText$a;const isBr$3=isBr$6;const nodeIndex$1=DOMUtils.nodeIndex;const resolveIndex$1=getNodeUnsafe;const createRange$1=doc=>doc?doc.createRange():DOMUtils.DOM.createRng();const isWhiteSpace$1=chr=>isString(chr)&&/[\\r\\n\\t ]/.test(chr);const isRange=rng=>!!rng.setStart&&!!rng.setEnd;const isHiddenWhiteSpaceRange=range=>{const container=range.startContainer;const offset=range.startOffset;if(isWhiteSpace$1(range.toString())&&isNotPre(container.parentNode)&&isText$a(container)){const text=container.data;if(isWhiteSpace$1(text[offset-1])||isWhiteSpace$1(text[offset+1])){return true;}}return false;};const getBrClientRect=brNode=>{const doc=brNode.ownerDocument;const rng=createRange$1(doc);const nbsp$1=doc.createTextNode(nbsp);const parentNode=brNode.parentNode;parentNode.insertBefore(nbsp$1,brNode);rng.setStart(nbsp$1,0);rng.setEnd(nbsp$1,1);const clientRect=clone$1(rng.getBoundingClientRect());parentNode.removeChild(nbsp$1);return clientRect;};const getBoundingClientRectWebKitText=rng=>{const sc=rng.startContainer;const ec=rng.endContainer;const so=rng.startOffset;const eo=rng.endOffset;if(sc===ec&&isText$a(ec)&&so===0&&eo===1){const newRng=rng.cloneRange();newRng.setEndAfter(ec);return getBoundingClientRect$1(newRng);}else{return null;}};const isZeroRect=r=>r.left===0&&r.right===0&&r.top===0&&r.bottom===0;const getBoundingClientRect$1=item=>{var _a;let clientRect;const clientRects=item.getClientRects();if(clientRects.length>0){clientRect=clone$1(clientRects[0]);}else{clientRect=clone$1(item.getBoundingClientRect());}if(!isRange(item)&&isBr$3(item)&&isZeroRect(clientRect)){return getBrClientRect(item);}if(isZeroRect(clientRect)&&isRange(item)){return(_a=getBoundingClientRectWebKitText(item))!==null&&_a!==void 0?_a:clientRect;}return clientRect;};const collapseAndInflateWidth=(clientRect,toStart)=>{const newClientRect=collapse(clientRect,toStart);newClientRect.width=1;newClientRect.right=newClientRect.left+1;return newClientRect;};const getCaretPositionClientRects=caretPosition=>{const clientRects=[];const addUniqueAndValidRect=clientRect=>{if(clientRect.height===0){return;}if(clientRects.length>0){if(isEqual(clientRect,clientRects[clientRects.length-1])){return;}}clientRects.push(clientRect);};const addCharacterOffset=(container,offset)=>{const range=createRange$1(container.ownerDocument);if(offset<container.data.length){if(isExtendingChar(container.data[offset])){return;}if(isExtendingChar(container.data[offset-1])){range.setStart(container,offset);range.setEnd(container,offset+1);if(!isHiddenWhiteSpaceRange(range)){addUniqueAndValidRect(collapseAndInflateWidth(getBoundingClientRect$1(range),false));return;}}}if(offset>0){range.setStart(container,offset-1);range.setEnd(container,offset);if(!isHiddenWhiteSpaceRange(range)){addUniqueAndValidRect(collapseAndInflateWidth(getBoundingClientRect$1(range),false));}}if(offset<container.data.length){range.setStart(container,offset);range.setEnd(container,offset+1);if(!isHiddenWhiteSpaceRange(range)){addUniqueAndValidRect(collapseAndInflateWidth(getBoundingClientRect$1(range),true));}}};const container=caretPosition.container();const offset=caretPosition.offset();if(isText$7(container)){addCharacterOffset(container,offset);return clientRects;}if(isElement$4(container)){if(caretPosition.isAtEnd()){const node=resolveIndex$1(container,offset);if(isText$7(node)){addCharacterOffset(node,node.data.length);}if(isValidElementCaretCandidate(node)&&!isBr$3(node)){addUniqueAndValidRect(collapseAndInflateWidth(getBoundingClientRect$1(node),false));}}else{const node=resolveIndex$1(container,offset);if(isText$7(node)){addCharacterOffset(node,0);}if(isValidElementCaretCandidate(node)&&caretPosition.isAtEnd()){addUniqueAndValidRect(collapseAndInflateWidth(getBoundingClientRect$1(node),false));return clientRects;}const beforeNode=resolveIndex$1(caretPosition.container(),caretPosition.offset()-1);if(isValidElementCaretCandidate(beforeNode)&&!isBr$3(beforeNode)){if(isBlock$1(beforeNode)||isBlock$1(node)||!isValidElementCaretCandidate(node)){addUniqueAndValidRect(collapseAndInflateWidth(getBoundingClientRect$1(beforeNode),false));}}if(isValidElementCaretCandidate(node)){addUniqueAndValidRect(collapseAndInflateWidth(getBoundingClientRect$1(node),true));}}}return clientRects;};const CaretPosition=(container,offset,clientRects)=>{const isAtStart=()=>{if(isText$7(container)){return offset===0;}return offset===0;};const isAtEnd=()=>{if(isText$7(container)){return offset>=container.data.length;}return offset>=container.childNodes.length;};const toRange=()=>{const range=createRange$1(container.ownerDocument);range.setStart(container,offset);range.setEnd(container,offset);return range;};const getClientRects=()=>{if(!clientRects){clientRects=getCaretPositionClientRects(CaretPosition(container,offset));}return clientRects;};const isVisible=()=>getClientRects().length>0;const isEqual=caretPosition=>caretPosition&&container===caretPosition.container()&&offset===caretPosition.offset();const getNode=before=>resolveIndex$1(container,before?offset-1:offset);return{container:constant(container),offset:constant(offset),toRange,getClientRects,isVisible,isAtStart,isAtEnd,isEqual,getNode};};CaretPosition.fromRangeStart=range=>CaretPosition(range.startContainer,range.startOffset);CaretPosition.fromRangeEnd=range=>CaretPosition(range.endContainer,range.endOffset);CaretPosition.after=node=>CaretPosition(node.parentNode,nodeIndex$1(node)+1);CaretPosition.before=node=>CaretPosition(node.parentNode,nodeIndex$1(node));CaretPosition.isAbove=(pos1,pos2)=>lift2(head(pos2.getClientRects()),last$3(pos1.getClientRects()),isAbove$1).getOr(false);CaretPosition.isBelow=(pos1,pos2)=>lift2(last$3(pos2.getClientRects()),head(pos1.getClientRects()),isBelow$1).getOr(false);CaretPosition.isAtStart=pos=>pos?pos.isAtStart():false;CaretPosition.isAtEnd=pos=>pos?pos.isAtEnd():false;CaretPosition.isTextPosition=pos=>pos?isText$a(pos.container()):false;CaretPosition.isElementPosition=pos=>!CaretPosition.isTextPosition(pos);const trimEmptyTextNode$1=(dom,node)=>{if(isText$a(node)&&node.data.length===0){dom.remove(node);}};const insertNode=(dom,rng,node)=>{rng.insertNode(node);trimEmptyTextNode$1(dom,node.previousSibling);trimEmptyTextNode$1(dom,node.nextSibling);};const insertFragment=(dom,rng,frag)=>{const firstChild=Optional.from(frag.firstChild);const lastChild=Optional.from(frag.lastChild);rng.insertNode(frag);firstChild.each(child=>trimEmptyTextNode$1(dom,child.previousSibling));lastChild.each(child=>trimEmptyTextNode$1(dom,child.nextSibling));};const rangeInsertNode=(dom,rng,node)=>{if(isDocumentFragment(node)){insertFragment(dom,rng,node);}else{insertNode(dom,rng,node);}};const isText$6=isText$a;const isBogus=isBogus$2;const nodeIndex=DOMUtils.nodeIndex;const normalizedParent=node=>{const parentNode=node.parentNode;if(isBogus(parentNode)){return normalizedParent(parentNode);}return parentNode;};const getChildNodes=node=>{if(!node){return[];}return reduce(node.childNodes,(result,node)=>{if(isBogus(node)&&node.nodeName!=='BR'){result=result.concat(getChildNodes(node));}else{result.push(node);}return result;},[]);};const normalizedTextOffset=(node,offset)=>{let tempNode=node;while(tempNode=tempNode.previousSibling){if(!isText$6(tempNode)){break;}offset+=tempNode.data.length;}return offset;};const equal=a=>b=>a===b;const normalizedNodeIndex=node=>{let nodes,index;nodes=getChildNodes(normalizedParent(node));index=findIndex$1(nodes,equal(node),node);nodes=nodes.slice(0,index+1);const numTextFragments=reduce(nodes,(result,node,i)=>{if(isText$6(node)&&isText$6(nodes[i-1])){result++;}return result;},0);nodes=filter$3(nodes,matchNodeNames([node.nodeName]));index=findIndex$1(nodes,equal(node),node);return index-numTextFragments;};const createPathItem=node=>{const name=isText$6(node)?'text()':node.nodeName.toLowerCase();return name+'['+normalizedNodeIndex(node)+']';};const parentsUntil$1=(root,node,predicate)=>{const parents=[];for(let tempNode=node.parentNode;tempNode&&tempNode!==root;tempNode=tempNode.parentNode){if(predicate&&predicate(tempNode)){break;}parents.push(tempNode);}return parents;};const create$b=(root,caretPosition)=>{let path=[];let container=caretPosition.container();let offset=caretPosition.offset();let outputOffset;if(isText$6(container)){outputOffset=normalizedTextOffset(container,offset);}else{const childNodes=container.childNodes;if(offset>=childNodes.length){outputOffset='after';offset=childNodes.length-1;}else{outputOffset='before';}container=childNodes[offset];}path.push(createPathItem(container));let parents=parentsUntil$1(root,container);parents=filter$3(parents,not(isBogus$2));path=path.concat(map$1(parents,node=>{return createPathItem(node);}));return path.reverse().join('/')+','+outputOffset;};const resolvePathItem=(node,name,index)=>{let nodes=getChildNodes(node);nodes=filter$3(nodes,(node,index)=>{return!isText$6(node)||!isText$6(nodes[index-1]);});nodes=filter$3(nodes,matchNodeNames([name]));return nodes[index];};const findTextPosition=(container,offset)=>{let node=container;let targetOffset=0;while(isText$6(node)){const dataLen=node.data.length;if(offset>=targetOffset&&offset<=targetOffset+dataLen){container=node;offset=offset-targetOffset;break;}if(!isText$6(node.nextSibling)){container=node;offset=dataLen;break;}targetOffset+=dataLen;node=node.nextSibling;}if(isText$6(container)&&offset>container.data.length){offset=container.data.length;}return CaretPosition(container,offset);};const resolve$1=(root,path)=>{if(!path){return null;}const parts=path.split(',');const paths=parts[0].split('/');const offset=parts.length>1?parts[1]:'before';const container=reduce(paths,(result,value)=>{const match=/([\\w\\-\\(\\)]+)\\[([0-9]+)\\]/.exec(value);if(!match){return null;}if(match[1]==='text()'){match[1]='#text';}return resolvePathItem(result,match[1],parseInt(match[2],10));},root);if(!container){return null;}if(!isText$6(container)&&container.parentNode){let nodeOffset;if(offset==='after'){nodeOffset=nodeIndex(container)+1;}else{nodeOffset=nodeIndex(container);}return CaretPosition(container.parentNode,nodeOffset);}return findTextPosition(container,parseInt(offset,10));};const isContentEditableFalse$8=isContentEditableFalse$a;const getNormalizedTextOffset$1=(trim,container,offset)=>{let trimmedOffset=trim(container.data.slice(0,offset)).length;for(let node=container.previousSibling;node&&isText$a(node);node=node.previousSibling){trimmedOffset+=trim(node.data).length;}return trimmedOffset;};const getPoint=(dom,trim,normalized,rng,start)=>{const container=start?rng.startContainer:rng.endContainer;let offset=start?rng.startOffset:rng.endOffset;const point=[];const root=dom.getRoot();if(isText$a(container)){point.push(normalized?getNormalizedTextOffset$1(trim,container,offset):offset);}else{let after=0;const childNodes=container.childNodes;if(offset>=childNodes.length&&childNodes.length){after=1;offset=Math.max(0,childNodes.length-1);}point.push(dom.nodeIndex(childNodes[offset],normalized)+after);}for(let node=container;node&&node!==root;node=node.parentNode){point.push(dom.nodeIndex(node,normalized));}return point;};const getLocation=(trim,selection,normalized,rng)=>{const dom=selection.dom;const start=getPoint(dom,trim,normalized,rng,true);const forward=selection.isForward();const fakeCaret=isRangeInCaretContainerBlock(rng)?{isFakeCaret:true}:{};if(!selection.isCollapsed()){const end=getPoint(dom,trim,normalized,rng,false);return{start,end,forward,...fakeCaret};}else{return{start,forward,...fakeCaret};}};const findIndex=(dom,name,element)=>{let count=0;Tools.each(dom.select(name),node=>{if(node.getAttribute('data-mce-bogus')==='all'){return;}else if(node===element){return false;}else{count++;return;}});return count;};const moveEndPoint$1=(rng,start)=>{let container=start?rng.startContainer:rng.endContainer;let offset=start?rng.startOffset:rng.endOffset;if(isElement$6(container)&&container.nodeName==='TR'){const childNodes=container.childNodes;container=childNodes[Math.min(start?offset:offset-1,childNodes.length-1)];if(container){offset=start?0:container.childNodes.length;if(start){rng.setStart(container,offset);}else{rng.setEnd(container,offset);}}}};const normalizeTableCellSelection=rng=>{moveEndPoint$1(rng,true);moveEndPoint$1(rng,false);return rng;};const findSibling=(node,offset)=>{if(isElement$6(node)){node=getNode$1(node,offset);if(isContentEditableFalse$8(node)){return node;}}if(isCaretContainer$2(node)){if(isText$a(node)&&isCaretContainerBlock$1(node)){node=node.parentNode;}let sibling=node.previousSibling;if(isContentEditableFalse$8(sibling)){return sibling;}sibling=node.nextSibling;if(isContentEditableFalse$8(sibling)){return sibling;}}return undefined;};const findAdjacentContentEditableFalseElm=rng=>{return findSibling(rng.startContainer,rng.startOffset)||findSibling(rng.endContainer,rng.endOffset);};const getOffsetBookmark=(trim,normalized,selection)=>{const element=selection.getNode();const rng=selection.getRng();if(element.nodeName==='IMG'||isContentEditableFalse$8(element)){const name=element.nodeName;return{name,index:findIndex(selection.dom,name,element)};}const sibling=findAdjacentContentEditableFalseElm(rng);if(sibling){const name=sibling.tagName;return{name,index:findIndex(selection.dom,name,sibling)};}return getLocation(trim,selection,normalized,rng);};const getCaretBookmark=selection=>{const rng=selection.getRng();return{start:create$b(selection.dom.getRoot(),CaretPosition.fromRangeStart(rng)),end:create$b(selection.dom.getRoot(),CaretPosition.fromRangeEnd(rng)),forward:selection.isForward()};};const getRangeBookmark=selection=>{return{rng:selection.getRng(),forward:selection.isForward()};};const createBookmarkSpan=(dom,id,filled)=>{const args={'data-mce-type':'bookmark',id,'style':'overflow:hidden;line-height:0px'};return filled?dom.create('span',args,'&#xFEFF;'):dom.create('span',args);};const getPersistentBookmark=(selection,filled)=>{const dom=selection.dom;let rng=selection.getRng();const id=dom.uniqueId();const collapsed=selection.isCollapsed();const element=selection.getNode();const name=element.nodeName;const forward=selection.isForward();if(name==='IMG'){return{name,index:findIndex(dom,name,element)};}const rng2=normalizeTableCellSelection(rng.cloneRange());if(!collapsed){rng2.collapse(false);const endBookmarkNode=createBookmarkSpan(dom,id+'_end',filled);rangeInsertNode(dom,rng2,endBookmarkNode);}rng=normalizeTableCellSelection(rng);rng.collapse(true);const startBookmarkNode=createBookmarkSpan(dom,id+'_start',filled);rangeInsertNode(dom,rng,startBookmarkNode);selection.moveToBookmark({id,keep:true,forward});return{id,forward};};const getBookmark$2=(selection,type,normalized=false)=>{if(type===2){return getOffsetBookmark(trim$1,normalized,selection);}else if(type===3){return getCaretBookmark(selection);}else if(type){return getRangeBookmark(selection);}else{return getPersistentBookmark(selection,false);}};const getUndoBookmark=curry(getOffsetBookmark,identity,true);const value$1=value=>{const applyHelper=fn=>fn(value);const constHelper=constant(value);const outputHelper=()=>output;const output={tag:true,inner:value,fold:(_onError,onValue)=>onValue(value),isValue:always,isError:never,map:mapper=>Result.value(mapper(value)),mapError:outputHelper,bind:applyHelper,exists:applyHelper,forall:applyHelper,getOr:constHelper,or:outputHelper,getOrThunk:constHelper,orThunk:outputHelper,getOrDie:constHelper,each:fn=>{fn(value);},toOptional:()=>Optional.some(value)};return output;};const error=error=>{const outputHelper=()=>output;const output={tag:false,inner:error,fold:(onError,_onValue)=>onError(error),isValue:never,isError:always,map:outputHelper,mapError:mapper=>Result.error(mapper(error)),bind:outputHelper,exists:never,forall:always,getOr:identity,or:identity,getOrThunk:apply$1,orThunk:apply$1,getOrDie:die(String(error)),each:noop,toOptional:Optional.none};return output;};const fromOption=(optional,err)=>optional.fold(()=>error(err),value$1);const Result={value:value$1,error,fromOption};const generate=cases=>{if(!isArray$1(cases)){throw new Error('cases must be an array');}if(cases.length===0){throw new Error('there must be at least one case');}const constructors=[];const adt={};each$e(cases,(acase,count)=>{const keys$1=keys(acase);if(keys$1.length!==1){throw new Error('one and only one name per case');}const key=keys$1[0];const value=acase[key];if(adt[key]!==undefined){throw new Error('duplicate key detected:'+key);}else if(key==='cata'){throw new Error('cannot have a case named cata (sorry)');}else if(!isArray$1(value)){throw new Error('case arguments must be an array');}constructors.push(key);adt[key]=(...args)=>{const argLength=args.length;if(argLength!==value.length){throw new Error('Wrong number of arguments to case '+key+'. Expected '+value.length+' ('+value+'), got '+argLength);}const match=branches=>{const branchKeys=keys(branches);if(constructors.length!==branchKeys.length){throw new Error('Wrong number of arguments to match. Expected: '+constructors.join(',')+'\\nActual: '+branchKeys.join(','));}const allReqd=forall(constructors,reqKey=>{return contains$2(branchKeys,reqKey);});if(!allReqd){throw new Error('Not all branches were specified when using match. Specified: '+branchKeys.join(', ')+'\\nRequired: '+constructors.join(', '));}return branches[key].apply(null,args);};return{fold:(...foldArgs)=>{if(foldArgs.length!==cases.length){throw new Error('Wrong number of arguments to fold. Expected '+cases.length+', got '+foldArgs.length);}const target=foldArgs[count];return target.apply(null,args);},match,log:label=>{console.log(label,{constructors,constructor:key,params:args});}};};});return adt;};const Adt={generate};Adt.generate([{bothErrors:['error1','error2']},{firstError:['error1','value2']},{secondError:['value1','error2']},{bothValues:['value1','value2']}]);const partition$1=results=>{const errors=[];const values=[];each$e(results,result=>{result.fold(err=>{errors.push(err);},value=>{values.push(value);});});return{errors,values};};const isInlinePattern=pattern=>pattern.type==='inline-command'||pattern.type==='inline-format';const isBlockPattern=pattern=>pattern.type==='block-command'||pattern.type==='block-format';const normalizePattern=pattern=>{const err=message=>Result.error({message,pattern});const formatOrCmd=(name,onFormat,onCommand)=>{if(pattern.format!==undefined){let formats;if(isArray$1(pattern.format)){if(!forall(pattern.format,isString)){return err(name+' pattern has non-string items in the `format` array');}formats=pattern.format;}else if(isString(pattern.format)){formats=[pattern.format];}else{return err(name+' pattern has non-string `format` parameter');}return Result.value(onFormat(formats));}else if(pattern.cmd!==undefined){if(!isString(pattern.cmd)){return err(name+' pattern has non-string `cmd` parameter');}return Result.value(onCommand(pattern.cmd,pattern.value));}else{return err(name+' pattern is missing both `format` and `cmd` parameters');}};if(!isObject(pattern)){return err('Raw pattern is not an object');}if(!isString(pattern.start)){return err('Raw pattern is missing `start` parameter');}if(pattern.end!==undefined){if(!isString(pattern.end)){return err('Inline pattern has non-string `end` parameter');}if(pattern.start.length===0&&pattern.end.length===0){return err('Inline pattern has empty `start` and `end` parameters');}let start=pattern.start;let end=pattern.end;if(end.length===0){end=start;start='';}return formatOrCmd('Inline',format=>({type:'inline-format',start,end,format}),(cmd,value)=>({type:'inline-command',start,end,cmd,value}));}else if(pattern.replacement!==undefined){if(!isString(pattern.replacement)){return err('Replacement pattern has non-string `replacement` parameter');}if(pattern.start.length===0){return err('Replacement pattern has empty `start` parameter');}return Result.value({type:'inline-command',start:'',end:pattern.start,cmd:'mceInsertContent',value:pattern.replacement});}else{if(pattern.start.length===0){return err('Block pattern has empty `start` parameter');}return formatOrCmd('Block',formats=>({type:'block-format',start:pattern.start,format:formats[0]}),(command,commandValue)=>({type:'block-command',start:pattern.start,cmd:command,value:commandValue}));}};const getBlockPatterns=patterns=>filter$5(patterns,isBlockPattern);const getInlinePatterns=patterns=>filter$5(patterns,isInlinePattern);const createPatternSet=(patterns,dynamicPatternsLookup)=>({inlinePatterns:getInlinePatterns(patterns),blockPatterns:getBlockPatterns(patterns),dynamicPatternsLookup});const fromRawPatterns=patterns=>{const normalized=partition$1(map$3(patterns,normalizePattern));each$e(normalized.errors,err=>console.error(err.message,err.pattern));return normalized.values;};const fromRawPatternsLookup=lookupFn=>{return ctx=>{const rawPatterns=lookupFn(ctx);return fromRawPatterns(rawPatterns);};};const deviceDetection$1=detect$2().deviceType;const isTouch=deviceDetection$1.isTouch();const DOM$a=DOMUtils.DOM;const getHash=value=>{const items=value.indexOf('=')>0?value.split(/[;,](?![^=;,]*(?:[;,]|$))/):value.split(',');return foldl(items,(output,item)=>{const arr=item.split('=');const key=arr[0];const val=arr.length>1?arr[1]:key;output[trim$3(key)]=trim$3(val);return output;},{});};const isRegExp=x=>is$4(x,RegExp);const option=name=>editor=>editor.options.get(name);const stringOrObjectProcessor=value=>isString(value)||isObject(value);const bodyOptionProcessor=(editor,defaultValue='')=>value=>{const valid=isString(value);if(valid){if(value.indexOf('=')!==-1){const bodyObj=getHash(value);return{value:get$a(bodyObj,editor.id).getOr(defaultValue),valid};}else{return{value,valid};}}else{return{valid:false,message:'Must be a string.'};}};const register$7=editor=>{const registerOption=editor.options.register;registerOption('id',{processor:'string',default:editor.id});registerOption('selector',{processor:'string'});registerOption('target',{processor:'object'});registerOption('suffix',{processor:'string'});registerOption('cache_suffix',{processor:'string'});registerOption('base_url',{processor:'string'});registerOption('referrer_policy',{processor:'string',default:''});registerOption('language_load',{processor:'boolean',default:true});registerOption('inline',{processor:'boolean',default:false});registerOption('iframe_attrs',{processor:'object',default:{}});registerOption('doctype',{processor:'string',default:'<!DOCTYPE html>'});registerOption('document_base_url',{processor:'string',default:editor.documentBaseUrl});registerOption('body_id',{processor:bodyOptionProcessor(editor,'tinymce'),default:'tinymce'});registerOption('body_class',{processor:bodyOptionProcessor(editor),default:''});registerOption('content_security_policy',{processor:'string',default:''});registerOption('br_in_pre',{processor:'boolean',default:true});registerOption('forced_root_block',{processor:value=>{const valid=isString(value)&&isNotEmpty(value);if(valid){return{value,valid};}else{return{valid:false,message:'Must be a non-empty string.'};}},default:'p'});registerOption('forced_root_block_attrs',{processor:'object',default:{}});registerOption('newline_behavior',{processor:value=>{const valid=contains$2(['block','linebreak','invert','default'],value);return valid?{value,valid}:{valid:false,message:'Must be one of: block, linebreak, invert or default.'};},default:'default'});registerOption('br_newline_selector',{processor:'string',default:'.mce-toc h2,figcaption,caption'});registerOption('no_newline_selector',{processor:'string',default:''});registerOption('keep_styles',{processor:'boolean',default:true});registerOption('end_container_on_empty_block',{processor:value=>{if(isBoolean(value)){return{valid:true,value};}else if(isString(value)){return{valid:true,value};}else{return{valid:false,message:'Must be boolean or a string'};}},default:'blockquote'});registerOption('font_size_style_values',{processor:'string',default:'xx-small,x-small,small,medium,large,x-large,xx-large'});registerOption('font_size_legacy_values',{processor:'string',default:'xx-small,small,medium,large,x-large,xx-large,300%'});registerOption('font_size_classes',{processor:'string',default:''});registerOption('automatic_uploads',{processor:'boolean',default:true});registerOption('images_reuse_filename',{processor:'boolean',default:false});registerOption('images_replace_blob_uris',{processor:'boolean',default:true});registerOption('icons',{processor:'string',default:''});registerOption('icons_url',{processor:'string',default:''});registerOption('images_upload_url',{processor:'string',default:''});registerOption('images_upload_base_path',{processor:'string',default:''});registerOption('images_upload_credentials',{processor:'boolean',default:false});registerOption('images_upload_handler',{processor:'function'});registerOption('language',{processor:'string',default:'en'});registerOption('language_url',{processor:'string',default:''});registerOption('entity_encoding',{processor:'string',default:'named'});registerOption('indent',{processor:'boolean',default:true});registerOption('indent_before',{processor:'string',default:'p,h1,h2,h3,h4,h5,h6,blockquote,div,title,style,pre,script,td,th,ul,ol,li,dl,dt,dd,area,table,thead,'+'tfoot,tbody,tr,section,summary,article,hgroup,aside,figure,figcaption,option,optgroup,datalist'});registerOption('indent_after',{processor:'string',default:'p,h1,h2,h3,h4,h5,h6,blockquote,div,title,style,pre,script,td,th,ul,ol,li,dl,dt,dd,area,table,thead,'+'tfoot,tbody,tr,section,summary,article,hgroup,aside,figure,figcaption,option,optgroup,datalist'});registerOption('indent_use_margin',{processor:'boolean',default:false});registerOption('indentation',{processor:'string',default:'40px'});registerOption('content_css',{processor:value=>{const valid=value===false||isString(value)||isArrayOf(value,isString);if(valid){if(isString(value)){return{value:map$3(value.split(','),trim$3),valid};}else if(isArray$1(value)){return{value,valid};}else if(value===false){return{value:[],valid};}else{return{value,valid};}}else{return{valid:false,message:'Must be false, a string or an array of strings.'};}},default:isInline(editor)?[]:['default']});registerOption('content_style',{processor:'string'});registerOption('content_css_cors',{processor:'boolean',default:false});registerOption('font_css',{processor:value=>{const valid=isString(value)||isArrayOf(value,isString);if(valid){const newValue=isArray$1(value)?value:map$3(value.split(','),trim$3);return{value:newValue,valid};}else{return{valid:false,message:'Must be a string or an array of strings.'};}},default:[]});registerOption('inline_boundaries',{processor:'boolean',default:true});registerOption('inline_boundaries_selector',{processor:'string',default:'a[href],code,span.mce-annotation'});registerOption('object_resizing',{processor:value=>{const valid=isBoolean(value)||isString(value);if(valid){if(value===false||deviceDetection$1.isiPhone()||deviceDetection$1.isiPad()){return{value:'',valid};}else{return{value:value===true?'table,img,figure.image,div,video,iframe':value,valid};}}else{return{valid:false,message:'Must be boolean or a string'};}},default:!isTouch});registerOption('resize_img_proportional',{processor:'boolean',default:true});registerOption('event_root',{processor:'object'});registerOption('service_message',{processor:'string'});registerOption('theme',{processor:value=>value===false||isString(value)||isFunction(value),default:'silver'});registerOption('theme_url',{processor:'string'});registerOption('formats',{processor:'object'});registerOption('format_empty_lines',{processor:'boolean',default:false});registerOption('format_noneditable_selector',{processor:'string',default:''});registerOption('preview_styles',{processor:value=>{const valid=value===false||isString(value);if(valid){return{value:value===false?'':value,valid};}else{return{valid:false,message:'Must be false or a string'};}},default:'font-family font-size font-weight font-style text-decoration text-transform color background-color border border-radius outline text-shadow'});registerOption('custom_ui_selector',{processor:'string',default:''});registerOption('hidden_input',{processor:'boolean',default:true});registerOption('submit_patch',{processor:'boolean',default:true});registerOption('encoding',{processor:'string'});registerOption('add_form_submit_trigger',{processor:'boolean',default:true});registerOption('add_unload_trigger',{processor:'boolean',default:true});registerOption('custom_undo_redo_levels',{processor:'number',default:0});registerOption('disable_nodechange',{processor:'boolean',default:false});registerOption('readonly',{processor:'boolean',default:false});registerOption('plugins',{processor:'string[]',default:[]});registerOption('external_plugins',{processor:'object'});registerOption('forced_plugins',{processor:'string[]'});registerOption('model',{processor:'string',default:editor.hasPlugin('rtc')?'plugin':'dom'});registerOption('model_url',{processor:'string'});registerOption('block_unsupported_drop',{processor:'boolean',default:true});registerOption('visual',{processor:'boolean',default:true});registerOption('visual_table_class',{processor:'string',default:'mce-item-table'});registerOption('visual_anchor_class',{processor:'string',default:'mce-item-anchor'});registerOption('iframe_aria_text',{processor:'string',default:'Rich Text Area. Press ALT-0 for help.'});registerOption('setup',{processor:'function'});registerOption('init_instance_callback',{processor:'function'});registerOption('url_converter',{processor:'function',default:editor.convertURL});registerOption('url_converter_scope',{processor:'object',default:editor});registerOption('urlconverter_callback',{processor:'function'});registerOption('allow_conditional_comments',{processor:'boolean',default:false});registerOption('allow_html_data_urls',{processor:'boolean',default:false});registerOption('allow_svg_data_urls',{processor:'boolean'});registerOption('allow_html_in_named_anchor',{processor:'boolean',default:false});registerOption('allow_script_urls',{processor:'boolean',default:false});registerOption('allow_unsafe_link_target',{processor:'boolean',default:false});registerOption('convert_fonts_to_spans',{processor:'boolean',default:true,deprecated:true});registerOption('fix_list_elements',{processor:'boolean',default:false});registerOption('preserve_cdata',{processor:'boolean',default:false});registerOption('remove_trailing_brs',{processor:'boolean'});registerOption('inline_styles',{processor:'boolean',default:true,deprecated:true});registerOption('element_format',{processor:'string',default:'html'});registerOption('entities',{processor:'string'});registerOption('schema',{processor:'string',default:'html5'});registerOption('convert_urls',{processor:'boolean',default:true});registerOption('relative_urls',{processor:'boolean',default:true});registerOption('remove_script_host',{processor:'boolean',default:true});registerOption('custom_elements',{processor:'string'});registerOption('extended_valid_elements',{processor:'string'});registerOption('invalid_elements',{processor:'string'});registerOption('invalid_styles',{processor:stringOrObjectProcessor});registerOption('valid_children',{processor:'string'});registerOption('valid_classes',{processor:stringOrObjectProcessor});registerOption('valid_elements',{processor:'string'});registerOption('valid_styles',{processor:stringOrObjectProcessor});registerOption('verify_html',{processor:'boolean',default:true});registerOption('auto_focus',{processor:value=>isString(value)||value===true});registerOption('browser_spellcheck',{processor:'boolean',default:false});registerOption('protect',{processor:'array'});registerOption('images_file_types',{processor:'string',default:'jpeg,jpg,jpe,jfi,jif,jfif,png,gif,bmp,webp'});registerOption('deprecation_warnings',{processor:'boolean',default:true});registerOption('a11y_advanced_options',{processor:'boolean',default:false});registerOption('api_key',{processor:'string'});registerOption('paste_block_drop',{processor:'boolean',default:false});registerOption('paste_data_images',{processor:'boolean',default:true});registerOption('paste_preprocess',{processor:'function'});registerOption('paste_postprocess',{processor:'function'});registerOption('paste_webkit_styles',{processor:'string',default:'none'});registerOption('paste_remove_styles_if_webkit',{processor:'boolean',default:true});registerOption('paste_merge_formats',{processor:'boolean',default:true});registerOption('smart_paste',{processor:'boolean',default:true});registerOption('paste_as_text',{processor:'boolean',default:false});registerOption('paste_tab_spaces',{processor:'number',default:4});registerOption('text_patterns',{processor:value=>{if(isArrayOf(value,isObject)||value===false){const patterns=value===false?[]:value;return{value:fromRawPatterns(patterns),valid:true};}else{return{valid:false,message:'Must be an array of objects or false.'};}},default:[{start:'*',end:'*',format:'italic'},{start:'**',end:'**',format:'bold'},{start:'#',format:'h1'},{start:'##',format:'h2'},{start:'###',format:'h3'},{start:'####',format:'h4'},{start:'#####',format:'h5'},{start:'######',format:'h6'},{start:'1. ',cmd:'InsertOrderedList'},{start:'* ',cmd:'InsertUnorderedList'},{start:'- ',cmd:'InsertUnorderedList'}]});registerOption('text_patterns_lookup',{processor:value=>{if(isFunction(value)){return{value:fromRawPatternsLookup(value),valid:true};}else{return{valid:false,message:'Must be a single function'};}},default:_ctx=>[]});registerOption('noneditable_class',{processor:'string',default:'mceNonEditable'});registerOption('editable_class',{processor:'string',default:'mceEditable'});registerOption('noneditable_regexp',{processor:value=>{if(isArrayOf(value,isRegExp)){return{value,valid:true};}else if(isRegExp(value)){return{value:[value],valid:true};}else{return{valid:false,message:'Must be a RegExp or an array of RegExp.'};}},default:[]});registerOption('table_tab_navigation',{processor:'boolean',default:true});editor.on('ScriptsLoaded',()=>{registerOption('directionality',{processor:'string',default:I18n.isRtl()?'rtl':undefined});registerOption('placeholder',{processor:'string',default:DOM$a.getAttrib(editor.getElement(),'placeholder')});});};const getIframeAttrs=option('iframe_attrs');const getDocType=option('doctype');const getDocumentBaseUrl=option('document_base_url');const getBodyId=option('body_id');const getBodyClass=option('body_class');const getContentSecurityPolicy=option('content_security_policy');const shouldPutBrInPre$1=option('br_in_pre');const getForcedRootBlock=option('forced_root_block');const getForcedRootBlockAttrs=option('forced_root_block_attrs');const getNewlineBehavior=option('newline_behavior');const getBrNewLineSelector=option('br_newline_selector');const getNoNewLineSelector=option('no_newline_selector');const shouldKeepStyles=option('keep_styles');const shouldEndContainerOnEmptyBlock=option('end_container_on_empty_block');const isAutomaticUploadsEnabled=option('automatic_uploads');const shouldReuseFileName=option('images_reuse_filename');const shouldReplaceBlobUris=option('images_replace_blob_uris');const getIconPackName=option('icons');const getIconsUrl=option('icons_url');const getImageUploadUrl=option('images_upload_url');const getImageUploadBasePath=option('images_upload_base_path');const getImagesUploadCredentials=option('images_upload_credentials');const getImagesUploadHandler=option('images_upload_handler');const shouldUseContentCssCors=option('content_css_cors');const getReferrerPolicy=option('referrer_policy');const getLanguageCode=option('language');const getLanguageUrl=option('language_url');const shouldIndentUseMargin=option('indent_use_margin');const getIndentation=option('indentation');const getContentCss=option('content_css');const getContentStyle=option('content_style');const getFontCss=option('font_css');const getDirectionality=option('directionality');const getInlineBoundarySelector=option('inline_boundaries_selector');const getObjectResizing=option('object_resizing');const getResizeImgProportional=option('resize_img_proportional');const getPlaceholder=option('placeholder');const getEventRoot=option('event_root');const getServiceMessage=option('service_message');const getTheme=option('theme');const getThemeUrl=option('theme_url');const getModel=option('model');const getModelUrl=option('model_url');const isInlineBoundariesEnabled=option('inline_boundaries');const getFormats=option('formats');const getPreviewStyles=option('preview_styles');const canFormatEmptyLines=option('format_empty_lines');const getFormatNoneditableSelector=option('format_noneditable_selector');const getCustomUiSelector=option('custom_ui_selector');const isInline=option('inline');const hasHiddenInput=option('hidden_input');const shouldPatchSubmit=option('submit_patch');const shouldAddFormSubmitTrigger=option('add_form_submit_trigger');const shouldAddUnloadTrigger=option('add_unload_trigger');const getCustomUndoRedoLevels=option('custom_undo_redo_levels');const shouldDisableNodeChange=option('disable_nodechange');const isReadOnly$1=option('readonly');const hasContentCssCors=option('content_css_cors');const getPlugins=option('plugins');const getExternalPlugins$1=option('external_plugins');const shouldBlockUnsupportedDrop=option('block_unsupported_drop');const isVisualAidsEnabled=option('visual');const getVisualAidsTableClass=option('visual_table_class');const getVisualAidsAnchorClass=option('visual_anchor_class');const getIframeAriaText=option('iframe_aria_text');const getSetupCallback=option('setup');const getInitInstanceCallback=option('init_instance_callback');const getUrlConverterCallback=option('urlconverter_callback');const getAutoFocus=option('auto_focus');const shouldBrowserSpellcheck=option('browser_spellcheck');const getProtect=option('protect');const shouldPasteBlockDrop=option('paste_block_drop');const shouldPasteDataImages=option('paste_data_images');const getPastePreProcess=option('paste_preprocess');const getPastePostProcess=option('paste_postprocess');const getPasteWebkitStyles=option('paste_webkit_styles');const shouldPasteRemoveWebKitStyles=option('paste_remove_styles_if_webkit');const shouldPasteMergeFormats=option('paste_merge_formats');const isSmartPasteEnabled=option('smart_paste');const isPasteAsTextEnabled=option('paste_as_text');const getPasteTabSpaces=option('paste_tab_spaces');const shouldAllowHtmlDataUrls=option('allow_html_data_urls');const getTextPatterns=option('text_patterns');const getTextPatternsLookup=option('text_patterns_lookup');const getNonEditableClass=option('noneditable_class');const getEditableClass=option('editable_class');const getNonEditableRegExps=option('noneditable_regexp');const shouldPreserveCData=option('preserve_cdata');const hasTextPatternsLookup=editor=>editor.options.isSet('text_patterns_lookup');const getFontStyleValues=editor=>Tools.explode(editor.options.get('font_size_style_values'));const getFontSizeClasses=editor=>Tools.explode(editor.options.get('font_size_classes'));const isEncodingXml=editor=>editor.options.get('encoding')==='xml';const getAllowedImageFileTypes=editor=>Tools.explode(editor.options.get('images_file_types'));const hasTableTabNavigation=option('table_tab_navigation');const isElement$3=isElement$6;const isText$5=isText$a;const removeNode$1=node=>{const parentNode=node.parentNode;if(parentNode){parentNode.removeChild(node);}};const trimCount=text=>{const trimmedText=trim$1(text);return{count:text.length-trimmedText.length,text:trimmedText};};const deleteZwspChars=caretContainer=>{let idx;while((idx=caretContainer.data.lastIndexOf(ZWSP$1))!==-1){caretContainer.deleteData(idx,1);}};const removeUnchanged=(caretContainer,pos)=>{remove$4(caretContainer);return pos;};const removeTextAndReposition=(caretContainer,pos)=>{const before=trimCount(caretContainer.data.substr(0,pos.offset()));const after=trimCount(caretContainer.data.substr(pos.offset()));const text=before.text+after.text;if(text.length>0){deleteZwspChars(caretContainer);return CaretPosition(caretContainer,pos.offset()-before.count);}else{return pos;}};const removeElementAndReposition=(caretContainer,pos)=>{const parentNode=pos.container();const newPosition=indexOf$1(from(parentNode.childNodes),caretContainer).map(index=>{return index<pos.offset()?CaretPosition(parentNode,pos.offset()-1):pos;}).getOr(pos);remove$4(caretContainer);return newPosition;};const removeTextCaretContainer=(caretContainer,pos)=>isText$5(caretContainer)&&pos.container()===caretContainer?removeTextAndReposition(caretContainer,pos):removeUnchanged(caretContainer,pos);const removeElementCaretContainer=(caretContainer,pos)=>pos.container()===caretContainer.parentNode?removeElementAndReposition(caretContainer,pos):removeUnchanged(caretContainer,pos);const removeAndReposition=(container,pos)=>CaretPosition.isTextPosition(pos)?removeTextCaretContainer(container,pos):removeElementCaretContainer(container,pos);const remove$4=caretContainerNode=>{if(isElement$3(caretContainerNode)&&isCaretContainer$2(caretContainerNode)){if(hasContent(caretContainerNode)){caretContainerNode.removeAttribute('data-mce-caret');}else{removeNode$1(caretContainerNode);}}if(isText$5(caretContainerNode)){deleteZwspChars(caretContainerNode);if(caretContainerNode.data.length===0){removeNode$1(caretContainerNode);}}};const isContentEditableFalse$7=isContentEditableFalse$a;const isMedia$1=isMedia$2;const isTableCell$1=isTableCell$3;const inlineFakeCaretSelector='*[contentEditable=false],video,audio,embed,object';const getAbsoluteClientRect=(root,element,before)=>{const clientRect=collapse(element.getBoundingClientRect(),before);let scrollX;let scrollY;if(root.tagName==='BODY'){const docElm=root.ownerDocument.documentElement;scrollX=root.scrollLeft||docElm.scrollLeft;scrollY=root.scrollTop||docElm.scrollTop;}else{const rootRect=root.getBoundingClientRect();scrollX=root.scrollLeft-rootRect.left;scrollY=root.scrollTop-rootRect.top;}clientRect.left+=scrollX;clientRect.right+=scrollX;clientRect.top+=scrollY;clientRect.bottom+=scrollY;clientRect.width=1;let margin=element.offsetWidth-element.clientWidth;if(margin>0){if(before){margin*=-1;}clientRect.left+=margin;clientRect.right+=margin;}return clientRect;};const trimInlineCaretContainers=root=>{var _a,_b;const fakeCaretTargetNodes=descendants(SugarElement.fromDom(root),inlineFakeCaretSelector);for(let i=0;i<fakeCaretTargetNodes.length;i++){const node=fakeCaretTargetNodes[i].dom;let sibling=node.previousSibling;if(endsWithCaretContainer$1(sibling)){const data=sibling.data;if(data.length===1){(_a=sibling.parentNode)===null||_a===void 0?void 0:_a.removeChild(sibling);}else{sibling.deleteData(data.length-1,1);}}sibling=node.nextSibling;if(startsWithCaretContainer$1(sibling)){const data=sibling.data;if(data.length===1){(_b=sibling.parentNode)===null||_b===void 0?void 0:_b.removeChild(sibling);}else{sibling.deleteData(0,1);}}}};const FakeCaret=(editor,root,isBlock,hasFocus)=>{const lastVisualCaret=value$2();let cursorInterval;let caretContainerNode;const caretBlock=getForcedRootBlock(editor);const dom=editor.dom;const show=(before,element)=>{let rng;hide();if(isTableCell$1(element)){return null;}if(isBlock(element)){const caretContainer=insertBlock(caretBlock,element,before);const clientRect=getAbsoluteClientRect(root,element,before);dom.setStyle(caretContainer,'top',clientRect.top);caretContainerNode=caretContainer;const caret=dom.create('div',{'class':'mce-visual-caret','data-mce-bogus':'all'});dom.setStyles(caret,{...clientRect});dom.add(root,caret);lastVisualCaret.set({caret,element,before});if(before){dom.addClass(caret,'mce-visual-caret-before');}startBlink();rng=element.ownerDocument.createRange();rng.setStart(caretContainer,0);rng.setEnd(caretContainer,0);}else{caretContainerNode=insertInline$1(element,before);rng=element.ownerDocument.createRange();if(isInlineFakeCaretTarget(caretContainerNode.nextSibling)){rng.setStart(caretContainerNode,0);rng.setEnd(caretContainerNode,0);}else{rng.setStart(caretContainerNode,1);rng.setEnd(caretContainerNode,1);}return rng;}return rng;};const hide=()=>{trimInlineCaretContainers(root);if(caretContainerNode){remove$4(caretContainerNode);caretContainerNode=null;}lastVisualCaret.on(caretState=>{dom.remove(caretState.caret);lastVisualCaret.clear();});if(cursorInterval){clearInterval(cursorInterval);cursorInterval=undefined;}};const startBlink=()=>{cursorInterval=setInterval(()=>{lastVisualCaret.on(caretState=>{if(hasFocus()){dom.toggleClass(caretState.caret,'mce-visual-caret-hidden');}else{dom.addClass(caretState.caret,'mce-visual-caret-hidden');}});},500);};const reposition=()=>{lastVisualCaret.on(caretState=>{const clientRect=getAbsoluteClientRect(root,caretState.element,caretState.before);dom.setStyles(caretState.caret,{...clientRect});});};const destroy=()=>clearInterval(cursorInterval);const getCss=()=>'.mce-visual-caret {'+'position: absolute;'+'background-color: black;'+'background-color: currentcolor;'+'}'+'.mce-visual-caret-hidden {'+'display: none;'+'}'+'*[data-mce-caret] {'+'position: absolute;'+'left: -1000px;'+'right: auto;'+'top: 0;'+'margin: 0;'+'padding: 0;'+'}';return{show,hide,getCss,reposition,destroy};};const isFakeCaretTableBrowser=()=>Env.browser.isFirefox();const isInlineFakeCaretTarget=node=>isContentEditableFalse$7(node)||isMedia$1(node);const isFakeCaretTarget=node=>isInlineFakeCaretTarget(node)||isTable$2(node)&&isFakeCaretTableBrowser();const isContentEditableTrue$1=isContentEditableTrue$3;const isContentEditableFalse$6=isContentEditableFalse$a;const isMedia=isMedia$2;const isBlockLike=matchStyleValues('display','block table table-cell table-caption list-item');const isCaretContainer=isCaretContainer$2;const isCaretContainerBlock=isCaretContainerBlock$1;const isElement$2=isElement$6;const isText$4=isText$a;const isCaretCandidate$1=isCaretCandidate$3;const isForwards=direction=>direction>0;const isBackwards=direction=>direction<0;const skipCaretContainers=(walk,shallow)=>{let node;while(node=walk(shallow)){if(!isCaretContainerBlock(node)){return node;}}return null;};const findNode=(node,direction,predicateFn,rootNode,shallow)=>{const walker=new DomTreeWalker(node,rootNode);const isCefOrCaretContainer=isContentEditableFalse$6(node)||isCaretContainerBlock(node);let tempNode;if(isBackwards(direction)){if(isCefOrCaretContainer){tempNode=skipCaretContainers(walker.prev.bind(walker),true);if(predicateFn(tempNode)){return tempNode;}}while(tempNode=skipCaretContainers(walker.prev.bind(walker),shallow)){if(predicateFn(tempNode)){return tempNode;}}}if(isForwards(direction)){if(isCefOrCaretContainer){tempNode=skipCaretContainers(walker.next.bind(walker),true);if(predicateFn(tempNode)){return tempNode;}}while(tempNode=skipCaretContainers(walker.next.bind(walker),shallow)){if(predicateFn(tempNode)){return tempNode;}}}return null;};const getEditingHost=(node,rootNode)=>{const isCETrue=node=>isContentEditableTrue$1(node.dom);const isRoot=node=>node.dom===rootNode;return ancestor$3(SugarElement.fromDom(node),isCETrue,isRoot).map(elm=>elm.dom).getOr(rootNode);};const getParentBlock$3=(node,rootNode)=>{while(node&&node!==rootNode){if(isBlockLike(node)){return node;}node=node.parentNode;}return null;};const isInSameBlock=(caretPosition1,caretPosition2,rootNode)=>getParentBlock$3(caretPosition1.container(),rootNode)===getParentBlock$3(caretPosition2.container(),rootNode);const getChildNodeAtRelativeOffset=(relativeOffset,caretPosition)=>{if(!caretPosition){return Optional.none();}const container=caretPosition.container();const offset=caretPosition.offset();if(!isElement$2(container)){return Optional.none();}return Optional.from(container.childNodes[offset+relativeOffset]);};const beforeAfter=(before,node)=>{var _a;const doc=(_a=node.ownerDocument)!==null&&_a!==void 0?_a:document;const range=doc.createRange();if(before){range.setStartBefore(node);range.setEndBefore(node);}else{range.setStartAfter(node);range.setEndAfter(node);}return range;};const isNodesInSameBlock=(root,node1,node2)=>getParentBlock$3(node1,root)===getParentBlock$3(node2,root);const lean=(left,root,node)=>{const siblingName=left?'previousSibling':'nextSibling';let tempNode=node;while(tempNode&&tempNode!==root){let sibling=tempNode[siblingName];if(sibling&&isCaretContainer(sibling)){sibling=sibling[siblingName];}if(isContentEditableFalse$6(sibling)||isMedia(sibling)){if(isNodesInSameBlock(root,sibling,tempNode)){return sibling;}break;}if(isCaretCandidate$1(sibling)){break;}tempNode=tempNode.parentNode;}return null;};const before$2=curry(beforeAfter,true);const after$2=curry(beforeAfter,false);const normalizeRange=(direction,root,range)=>{let node;const leanLeft=curry(lean,true,root);const leanRight=curry(lean,false,root);const container=range.startContainer;const offset=range.startOffset;if(isCaretContainerBlock$1(container)){const block=isText$4(container)?container.parentNode:container;const location=block.getAttribute('data-mce-caret');if(location==='before'){node=block.nextSibling;if(isFakeCaretTarget(node)){return before$2(node);}}if(location==='after'){node=block.previousSibling;if(isFakeCaretTarget(node)){return after$2(node);}}}if(!range.collapsed){return range;}if(isText$a(container)){if(isCaretContainer(container)){if(direction===1){node=leanRight(container);if(node){return before$2(node);}node=leanLeft(container);if(node){return after$2(node);}}if(direction===-1){node=leanLeft(container);if(node){return after$2(node);}node=leanRight(container);if(node){return before$2(node);}}return range;}if(endsWithCaretContainer$1(container)&&offset>=container.data.length-1){if(direction===1){node=leanRight(container);if(node){return before$2(node);}}return range;}if(startsWithCaretContainer$1(container)&&offset<=1){if(direction===-1){node=leanLeft(container);if(node){return after$2(node);}}return range;}if(offset===container.data.length){node=leanRight(container);if(node){return before$2(node);}return range;}if(offset===0){node=leanLeft(container);if(node){return after$2(node);}return range;}}return range;};const getRelativeCefElm=(forward,caretPosition)=>getChildNodeAtRelativeOffset(forward?0:-1,caretPosition).filter(isContentEditableFalse$6);const getNormalizedRangeEndPoint=(direction,root,range)=>{const normalizedRange=normalizeRange(direction,root,range);return direction===-1?CaretPosition.fromRangeStart(normalizedRange):CaretPosition.fromRangeEnd(normalizedRange);};const getElementFromPosition=pos=>Optional.from(pos.getNode()).map(SugarElement.fromDom);const getElementFromPrevPosition=pos=>Optional.from(pos.getNode(true)).map(SugarElement.fromDom);const getVisualCaretPosition=(walkFn,caretPosition)=>{let pos=caretPosition;while(pos=walkFn(pos)){if(pos.isVisible()){return pos;}}return pos;};const isMoveInsideSameBlock=(from,to)=>{const inSameBlock=isInSameBlock(from,to);if(!inSameBlock&&isBr$6(from.getNode())){return true;}return inSameBlock;};var HDirection;(function(HDirection){HDirection[HDirection['Backwards']=-1]='Backwards';HDirection[HDirection['Forwards']=1]='Forwards';})(HDirection||(HDirection={}));const isContentEditableFalse$5=isContentEditableFalse$a;const isText$3=isText$a;const isElement$1=isElement$6;const isBr$2=isBr$6;const isCaretCandidate=isCaretCandidate$3;const isAtomic=isAtomic$1;const isEditableCaretCandidate=isEditableCaretCandidate$1;const getParents$3=(node,root)=>{const parents=[];let tempNode=node;while(tempNode&&tempNode!==root){parents.push(tempNode);tempNode=tempNode.parentNode;}return parents;};const nodeAtIndex=(container,offset)=>{if(container.hasChildNodes()&&offset<container.childNodes.length){return container.childNodes[offset];}return null;};const getCaretCandidatePosition=(direction,node)=>{if(isForwards(direction)){if(isCaretCandidate(node.previousSibling)&&!isText$3(node.previousSibling)){return CaretPosition.before(node);}if(isText$3(node)){return CaretPosition(node,0);}}if(isBackwards(direction)){if(isCaretCandidate(node.nextSibling)&&!isText$3(node.nextSibling)){return CaretPosition.after(node);}if(isText$3(node)){return CaretPosition(node,node.data.length);}}if(isBackwards(direction)){if(isBr$2(node)){return CaretPosition.before(node);}return CaretPosition.after(node);}return CaretPosition.before(node);};const moveForwardFromBr=(root,nextNode)=>{const nextSibling=nextNode.nextSibling;if(nextSibling&&isCaretCandidate(nextSibling)){if(isText$3(nextSibling)){return CaretPosition(nextSibling,0);}else{return CaretPosition.before(nextSibling);}}else{return findCaretPosition$1(HDirection.Forwards,CaretPosition.after(nextNode),root);}};const findCaretPosition$1=(direction,startPos,root)=>{let node;let nextNode;let innerNode;let caretPosition;if(!isElement$1(root)||!startPos){return null;}if(startPos.isEqual(CaretPosition.after(root))&&root.lastChild){caretPosition=CaretPosition.after(root.lastChild);if(isBackwards(direction)&&isCaretCandidate(root.lastChild)&&isElement$1(root.lastChild)){return isBr$2(root.lastChild)?CaretPosition.before(root.lastChild):caretPosition;}}else{caretPosition=startPos;}const container=caretPosition.container();let offset=caretPosition.offset();if(isText$3(container)){if(isBackwards(direction)&&offset>0){return CaretPosition(container,--offset);}if(isForwards(direction)&&offset<container.length){return CaretPosition(container,++offset);}node=container;}else{if(isBackwards(direction)&&offset>0){nextNode=nodeAtIndex(container,offset-1);if(isCaretCandidate(nextNode)){if(!isAtomic(nextNode)){innerNode=findNode(nextNode,direction,isEditableCaretCandidate,nextNode);if(innerNode){if(isText$3(innerNode)){return CaretPosition(innerNode,innerNode.data.length);}return CaretPosition.after(innerNode);}}if(isText$3(nextNode)){return CaretPosition(nextNode,nextNode.data.length);}return CaretPosition.before(nextNode);}}if(isForwards(direction)&&offset<container.childNodes.length){nextNode=nodeAtIndex(container,offset);if(isCaretCandidate(nextNode)){if(isBr$2(nextNode)){return moveForwardFromBr(root,nextNode);}if(!isAtomic(nextNode)){innerNode=findNode(nextNode,direction,isEditableCaretCandidate,nextNode);if(innerNode){if(isText$3(innerNode)){return CaretPosition(innerNode,0);}return CaretPosition.before(innerNode);}}if(isText$3(nextNode)){return CaretPosition(nextNode,0);}return CaretPosition.after(nextNode);}}node=nextNode?nextNode:caretPosition.getNode();}if(node&&(isForwards(direction)&&caretPosition.isAtEnd()||isBackwards(direction)&&caretPosition.isAtStart())){node=findNode(node,direction,always,root,true);if(isEditableCaretCandidate(node,root)){return getCaretCandidatePosition(direction,node);}}nextNode=node?findNode(node,direction,isEditableCaretCandidate,root):node;const rootContentEditableFalseElm=last$2(filter$5(getParents$3(container,root),isContentEditableFalse$5));if(rootContentEditableFalseElm&&(!nextNode||!rootContentEditableFalseElm.contains(nextNode))){if(isForwards(direction)){caretPosition=CaretPosition.after(rootContentEditableFalseElm);}else{caretPosition=CaretPosition.before(rootContentEditableFalseElm);}return caretPosition;}if(nextNode){return getCaretCandidatePosition(direction,nextNode);}return null;};const CaretWalker=root=>({next:caretPosition=>{return findCaretPosition$1(HDirection.Forwards,caretPosition,root);},prev:caretPosition=>{return findCaretPosition$1(HDirection.Backwards,caretPosition,root);}});const walkToPositionIn=(forward,root,start)=>{const position=forward?CaretPosition.before(start):CaretPosition.after(start);return fromPosition(forward,root,position);};const afterElement=node=>isBr$6(node)?CaretPosition.before(node):CaretPosition.after(node);const isBeforeOrStart=position=>{if(CaretPosition.isTextPosition(position)){return position.offset()===0;}else{return isCaretCandidate$3(position.getNode());}};const isAfterOrEnd=position=>{if(CaretPosition.isTextPosition(position)){const container=position.container();return position.offset()===container.data.length;}else{return isCaretCandidate$3(position.getNode(true));}};const isBeforeAfterSameElement=(from,to)=>!CaretPosition.isTextPosition(from)&&!CaretPosition.isTextPosition(to)&&from.getNode()===to.getNode(true);const isAtBr=position=>!CaretPosition.isTextPosition(position)&&isBr$6(position.getNode());const shouldSkipPosition=(forward,from,to)=>{if(forward){return!isBeforeAfterSameElement(from,to)&&!isAtBr(from)&&isAfterOrEnd(from)&&isBeforeOrStart(to);}else{return!isBeforeAfterSameElement(to,from)&&isBeforeOrStart(from)&&isAfterOrEnd(to);}};const fromPosition=(forward,root,pos)=>{const walker=CaretWalker(root);return Optional.from(forward?walker.next(pos):walker.prev(pos));};const navigate=(forward,root,from)=>fromPosition(forward,root,from).bind(to=>{if(isInSameBlock(from,to,root)&&shouldSkipPosition(forward,from,to)){return fromPosition(forward,root,to);}else{return Optional.some(to);}});const navigateIgnore=(forward,root,from,ignoreFilter)=>navigate(forward,root,from).bind(pos=>ignoreFilter(pos)?navigateIgnore(forward,root,pos,ignoreFilter):Optional.some(pos));const positionIn=(forward,element)=>{const startNode=forward?element.firstChild:element.lastChild;if(isText$a(startNode)){return Optional.some(CaretPosition(startNode,forward?0:startNode.data.length));}else if(startNode){if(isCaretCandidate$3(startNode)){return Optional.some(forward?CaretPosition.before(startNode):afterElement(startNode));}else{return walkToPositionIn(forward,element,startNode);}}else{return Optional.none();}};const nextPosition=curry(fromPosition,true);const prevPosition=curry(fromPosition,false);const firstPositionIn=curry(positionIn,true);const lastPositionIn=curry(positionIn,false);const CARET_ID='_mce_caret';const isCaretNode=node=>isElement$6(node)&&node.id===CARET_ID;const getParentCaretContainer=(body,node)=>{let currentNode=node;while(currentNode&&currentNode!==body){if(isCaretNode(currentNode)){return currentNode;}currentNode=currentNode.parentNode;}return null;};const isStringPathBookmark=bookmark=>isString(bookmark.start);const isRangeBookmark=bookmark=>has$2(bookmark,'rng');const isIdBookmark=bookmark=>has$2(bookmark,'id');const isIndexBookmark=bookmark=>has$2(bookmark,'name');const isPathBookmark=bookmark=>Tools.isArray(bookmark.start);const isForwardBookmark=bookmark=>!isIndexBookmark(bookmark)&&isBoolean(bookmark.forward)?bookmark.forward:true;const addBogus=(dom,node)=>{if(isElement$6(node)&&dom.isBlock(node)&&!node.innerHTML){node.innerHTML='<br data-mce-bogus=\"1\" />';}return node;};const resolveCaretPositionBookmark=(dom,bookmark)=>{const startPos=Optional.from(resolve$1(dom.getRoot(),bookmark.start));const endPos=Optional.from(resolve$1(dom.getRoot(),bookmark.end));return lift2(startPos,endPos,(start,end)=>{const range=dom.createRng();range.setStart(start.container(),start.offset());range.setEnd(end.container(),end.offset());return{range,forward:isForwardBookmark(bookmark)};});};const insertZwsp=(node,rng)=>{var _a;const doc=(_a=node.ownerDocument)!==null&&_a!==void 0?_a:document;const textNode=doc.createTextNode(ZWSP$1);node.appendChild(textNode);rng.setStart(textNode,0);rng.setEnd(textNode,0);};const isEmpty$1=node=>!node.hasChildNodes();const tryFindRangePosition=(node,rng)=>lastPositionIn(node).fold(never,pos=>{rng.setStart(pos.container(),pos.offset());rng.setEnd(pos.container(),pos.offset());return true;});const padEmptyCaretContainer=(root,node,rng)=>{if(isEmpty$1(node)&&getParentCaretContainer(root,node)){insertZwsp(node,rng);return true;}else{return false;}};const setEndPoint=(dom,start,bookmark,rng)=>{const point=bookmark[start?'start':'end'];const root=dom.getRoot();if(point){let node=root;let offset=point[0];for(let i=point.length-1;node&&i>=1;i--){const children=node.childNodes;if(padEmptyCaretContainer(root,node,rng)){return true;}if(point[i]>children.length-1){if(padEmptyCaretContainer(root,node,rng)){return true;}return tryFindRangePosition(node,rng);}node=children[point[i]];}if(isText$a(node)){offset=Math.min(point[0],node.data.length);}if(isElement$6(node)){offset=Math.min(point[0],node.childNodes.length);}if(start){rng.setStart(node,offset);}else{rng.setEnd(node,offset);}}return true;};const isValidTextNode=node=>isText$a(node)&&node.data.length>0;const restoreEndPoint=(dom,suffix,bookmark)=>{const marker=dom.get(bookmark.id+'_'+suffix);const markerParent=marker===null||marker===void 0?void 0:marker.parentNode;const keep=bookmark.keep;if(marker&&markerParent){let container;let offset;if(suffix==='start'){if(!keep){container=markerParent;offset=dom.nodeIndex(marker);}else{if(marker.hasChildNodes()){container=marker.firstChild;offset=1;}else if(isValidTextNode(marker.nextSibling)){container=marker.nextSibling;offset=0;}else if(isValidTextNode(marker.previousSibling)){container=marker.previousSibling;offset=marker.previousSibling.data.length;}else{container=markerParent;offset=dom.nodeIndex(marker)+1;}}}else{if(!keep){container=markerParent;offset=dom.nodeIndex(marker);}else{if(marker.hasChildNodes()){container=marker.firstChild;offset=1;}else if(isValidTextNode(marker.previousSibling)){container=marker.previousSibling;offset=marker.previousSibling.data.length;}else{container=markerParent;offset=dom.nodeIndex(marker);}}}if(!keep){const prev=marker.previousSibling;const next=marker.nextSibling;Tools.each(Tools.grep(marker.childNodes),node=>{if(isText$a(node)){node.data=node.data.replace(/\\uFEFF/g,'');}});let otherMarker;while(otherMarker=dom.get(bookmark.id+'_'+suffix)){dom.remove(otherMarker,true);}if(isText$a(next)&&isText$a(prev)&&!Env.browser.isOpera()){const idx=prev.data.length;prev.appendData(next.data);dom.remove(next);container=prev;offset=idx;}}return Optional.some(CaretPosition(container,offset));}else{return Optional.none();}};const resolvePaths=(dom,bookmark)=>{const range=dom.createRng();if(setEndPoint(dom,true,bookmark,range)&&setEndPoint(dom,false,bookmark,range)){return Optional.some({range,forward:isForwardBookmark(bookmark)});}else{return Optional.none();}};const resolveId=(dom,bookmark)=>{const startPos=restoreEndPoint(dom,'start',bookmark);const endPos=restoreEndPoint(dom,'end',bookmark);return lift2(startPos,endPos.or(startPos),(spos,epos)=>{const range=dom.createRng();range.setStart(addBogus(dom,spos.container()),spos.offset());range.setEnd(addBogus(dom,epos.container()),epos.offset());return{range,forward:isForwardBookmark(bookmark)};});};const resolveIndex=(dom,bookmark)=>Optional.from(dom.select(bookmark.name)[bookmark.index]).map(elm=>{const range=dom.createRng();range.selectNode(elm);return{range,forward:true};});const resolve=(selection,bookmark)=>{const dom=selection.dom;if(bookmark){if(isPathBookmark(bookmark)){return resolvePaths(dom,bookmark);}else if(isStringPathBookmark(bookmark)){return resolveCaretPositionBookmark(dom,bookmark);}else if(isIdBookmark(bookmark)){return resolveId(dom,bookmark);}else if(isIndexBookmark(bookmark)){return resolveIndex(dom,bookmark);}else if(isRangeBookmark(bookmark)){return Optional.some({range:bookmark.rng,forward:isForwardBookmark(bookmark)});}}return Optional.none();};const getBookmark$1=(selection,type,normalized)=>{return getBookmark$2(selection,type,normalized);};const moveToBookmark=(selection,bookmark)=>{resolve(selection,bookmark).each(({range,forward})=>{selection.setRng(range,forward);});};const isBookmarkNode$1=node=>{return isElement$6(node)&&node.tagName==='SPAN'&&node.getAttribute('data-mce-type')==='bookmark';};const is=expected=>actual=>expected===actual;const isNbsp=is(nbsp);const isWhiteSpace=chr=>chr!==''&&' \\f\\n\\r\\t\\x0B'.indexOf(chr)!==-1;const isContent=chr=>!isWhiteSpace(chr)&&!isNbsp(chr)&&!isZwsp$1(chr);const hexColour=value=>({value});const toHex=component=>{const hex=component.toString(16);return(hex.length===1?'0'+hex:hex).toUpperCase();};const fromRgba=rgbaColour=>{const value=toHex(rgbaColour.red)+toHex(rgbaColour.green)+toHex(rgbaColour.blue);return hexColour(value);};const rgbRegex=/^\\s*rgb\\s*\\(\\s*(\\d+)\\s*,\\s*(\\d+)\\s*,\\s*(\\d+)\\s*\\)\\s*$/i;const rgbaRegex=/^\\s*rgba\\s*\\(\\s*(\\d+)\\s*,\\s*(\\d+)\\s*,\\s*(\\d+)\\s*,\\s*(\\d?(?:\\.\\d+)?)\\s*\\)\\s*$/i;const rgbaColour=(red,green,blue,alpha)=>({red,green,blue,alpha});const fromStringValues=(red,green,blue,alpha)=>{const r=parseInt(red,10);const g=parseInt(green,10);const b=parseInt(blue,10);const a=parseFloat(alpha);return rgbaColour(r,g,b,a);};const fromString=rgbaString=>{if(rgbaString==='transparent'){return Optional.some(rgbaColour(0,0,0,0));}const rgbMatch=rgbRegex.exec(rgbaString);if(rgbMatch!==null){return Optional.some(fromStringValues(rgbMatch[1],rgbMatch[2],rgbMatch[3],'1'));}const rgbaMatch=rgbaRegex.exec(rgbaString);if(rgbaMatch!==null){return Optional.some(fromStringValues(rgbaMatch[1],rgbaMatch[2],rgbaMatch[3],rgbaMatch[4]));}return Optional.none();};const rgbaToHexString=color=>fromString(color).map(fromRgba).map(h=>'#'+h.value).getOr(color);const getRanges$1=selection=>{const ranges=[];if(selection){for(let i=0;i<selection.rangeCount;i++){ranges.push(selection.getRangeAt(i));}}return ranges;};const getSelectedNodes=ranges=>{return bind$3(ranges,range=>{const node=getSelectedNode(range);return node?[SugarElement.fromDom(node)]:[];});};const hasMultipleRanges=selection=>{return getRanges$1(selection).length>1;};const getCellsFromRanges=ranges=>filter$5(getSelectedNodes(ranges),isTableCell$2);const getCellsFromElement=elm=>descendants(elm,'td[data-mce-selected],th[data-mce-selected]');const getCellsFromElementOrRanges=(ranges,element)=>{const selectedCells=getCellsFromElement(element);return selectedCells.length>0?selectedCells:getCellsFromRanges(ranges);};const getCellsFromEditor=editor=>getCellsFromElementOrRanges(getRanges$1(editor.selection.getSel()),SugarElement.fromDom(editor.getBody()));const getClosestTable=(cell,isRoot)=>ancestor$2(cell,'table',isRoot);const getStartNode=rng=>{const sc=rng.startContainer,so=rng.startOffset;if(isText$a(sc)){return so===0?Optional.some(SugarElement.fromDom(sc)):Optional.none();}else{return Optional.from(sc.childNodes[so]).map(SugarElement.fromDom);}};const getEndNode=rng=>{const ec=rng.endContainer,eo=rng.endOffset;if(isText$a(ec)){return eo===ec.data.length?Optional.some(SugarElement.fromDom(ec)):Optional.none();}else{return Optional.from(ec.childNodes[eo-1]).map(SugarElement.fromDom);}};const getFirstChildren=node=>{return firstChild(node).fold(constant([node]),child=>{return[node].concat(getFirstChildren(child));});};const getLastChildren=node=>{return lastChild(node).fold(constant([node]),child=>{if(name(child)==='br'){return prevSibling(child).map(sibling=>{return[node].concat(getLastChildren(sibling));}).getOr([]);}else{return[node].concat(getLastChildren(child));}});};const hasAllContentsSelected=(elm,rng)=>{return lift2(getStartNode(rng),getEndNode(rng),(startNode,endNode)=>{const start=find$2(getFirstChildren(elm),curry(eq,startNode));const end=find$2(getLastChildren(elm),curry(eq,endNode));return start.isSome()&&end.isSome();}).getOr(false);};const moveEndPoint=(dom,rng,node,start)=>{const root=node;const walker=new DomTreeWalker(node,root);const moveCaretBeforeOnEnterElementsMap=filter$4(dom.schema.getMoveCaretBeforeOnEnterElements(),(_,name)=>!contains$2(['td','th','table'],name.toLowerCase()));let currentNode=node;do{if(isText$a(currentNode)&&Tools.trim(currentNode.data).length!==0){if(start){rng.setStart(currentNode,0);}else{rng.setEnd(currentNode,currentNode.data.length);}return;}if(moveCaretBeforeOnEnterElementsMap[currentNode.nodeName]){if(start){rng.setStartBefore(currentNode);}else{if(currentNode.nodeName==='BR'){rng.setEndBefore(currentNode);}else{rng.setEndAfter(currentNode);}}return;}}while(currentNode=start?walker.next():walker.prev());if(root.nodeName==='BODY'){if(start){rng.setStart(root,0);}else{rng.setEnd(root,root.childNodes.length);}}};const hasAnyRanges=editor=>{const sel=editor.selection.getSel();return isNonNullable(sel)&&sel.rangeCount>0;};const runOnRanges=(editor,executor)=>{const fakeSelectionNodes=getCellsFromEditor(editor);if(fakeSelectionNodes.length>0){each$e(fakeSelectionNodes,elem=>{const node=elem.dom;const fakeNodeRng=editor.dom.createRng();fakeNodeRng.setStartBefore(node);fakeNodeRng.setEndAfter(node);executor(fakeNodeRng,true);});}else{executor(editor.selection.getRng(),false);}};const preserve=(selection,fillBookmark,executor)=>{const bookmark=getPersistentBookmark(selection,fillBookmark);executor(bookmark);selection.moveToBookmark(bookmark);};const isNode=node=>isNumber(node===null||node===void 0?void 0:node.nodeType);const isElementNode$1=node=>isElement$6(node)&&!isBookmarkNode$1(node)&&!isCaretNode(node)&&!isBogus$2(node);const isElementDirectlySelected=(dom,node)=>{if(isElementNode$1(node)&&!/^(TD|TH)$/.test(node.nodeName)){const selectedAttr=dom.getAttrib(node,'data-mce-selected');const value=parseInt(selectedAttr,10);return!isNaN(value)&&value>0;}else{return false;}};const isEditable$3=elm=>elm.isContentEditable===true;const preserveSelection=(editor,action,shouldMoveStart)=>{const{selection,dom}=editor;const selectedNodeBeforeAction=selection.getNode();const isSelectedBeforeNodeNoneditable=isContentEditableFalse$a(selectedNodeBeforeAction);preserve(selection,true,()=>{action();});const isBeforeNodeStillNoneditable=isSelectedBeforeNodeNoneditable&&isContentEditableFalse$a(selectedNodeBeforeAction);if(isBeforeNodeStillNoneditable&&dom.isChildOf(selectedNodeBeforeAction,editor.getBody())){editor.selection.select(selectedNodeBeforeAction);}else if(shouldMoveStart(selection.getStart())){moveStartToNearestText(dom,selection);}};const moveStartToNearestText=(dom,selection)=>{var _a,_b;const rng=selection.getRng();const{startContainer,startOffset}=rng;const selectedNode=selection.getNode();if(isElementDirectlySelected(dom,selectedNode)){return;}if(isElement$6(startContainer)){const nodes=startContainer.childNodes;const root=dom.getRoot();let walker;if(startOffset<nodes.length){const startNode=nodes[startOffset];walker=new DomTreeWalker(startNode,(_a=dom.getParent(startNode,dom.isBlock))!==null&&_a!==void 0?_a:root);}else{const startNode=nodes[nodes.length-1];walker=new DomTreeWalker(startNode,(_b=dom.getParent(startNode,dom.isBlock))!==null&&_b!==void 0?_b:root);walker.next(true);}for(let node=walker.current();node;node=walker.next()){if(dom.getContentEditable(node)==='false'){return;}else if(isText$a(node)&&!isWhiteSpaceNode$1(node)){rng.setStart(node,0);selection.setRng(rng);return;}}}};const getNonWhiteSpaceSibling=(node,next,inc)=>{if(node){const nextName=next?'nextSibling':'previousSibling';for(node=inc?node:node[nextName];node;node=node[nextName]){if(isElement$6(node)||!isWhiteSpaceNode$1(node)){return node;}}}return undefined;};const isTextBlock$1=(editor,name)=>{if(isNode(name)){name=name.nodeName;}return!!editor.schema.getTextBlockElements()[name.toLowerCase()];};const isValid=(ed,parent,child)=>{return ed.schema.isValidChild(parent,child);};const isWhiteSpaceNode$1=(node,allowSpaces=false)=>{if(isNonNullable(node)&&isText$a(node)){const data=allowSpaces?node.data.replace(/ /g,'\\xA0'):node.data;return isWhitespaceText(data);}else{return false;}};const isEmptyTextNode$1=node=>{return isNonNullable(node)&&isText$a(node)&&node.length===0;};const isWrapNoneditableTarget=(editor,node)=>{const baseDataSelector='[data-mce-cef-wrappable]';const formatNoneditableSelector=getFormatNoneditableSelector(editor);const selector=isEmpty$3(formatNoneditableSelector)?baseDataSelector:`${baseDataSelector},${formatNoneditableSelector}`;return is$1(SugarElement.fromDom(node),selector);};const isWrappableNoneditable=(editor,node)=>{const dom=editor.dom;return isElementNode$1(node)&&dom.getContentEditable(node)==='false'&&isWrapNoneditableTarget(editor,node)&&dom.select('[contenteditable=\"true\"]',node).length===0;};const replaceVars=(value,vars)=>{if(isFunction(value)){return value(vars);}else if(isNonNullable(vars)){value=value.replace(/%(\\w+)/g,(str,name)=>{return vars[name]||str;});}return value;};const isEq$5=(str1,str2)=>{str1=str1||'';str2=str2||'';str1=''+(str1.nodeName||str1);str2=''+(str2.nodeName||str2);return str1.toLowerCase()===str2.toLowerCase();};const normalizeStyleValue=(value,name)=>{if(isNullable(value)){return null;}else{let strValue=String(value);if(name==='color'||name==='backgroundColor'){strValue=rgbaToHexString(strValue);}if(name==='fontWeight'&&value===700){strValue='bold';}if(name==='fontFamily'){strValue=strValue.replace(/[\\'\\\"]/g,'').replace(/,\\s+/g,',');}return strValue;}};const getStyle=(dom,node,name)=>{const style=dom.getStyle(node,name);return normalizeStyleValue(style,name);};const getTextDecoration=(dom,node)=>{let decoration;dom.getParent(node,n=>{if(isElement$6(n)){decoration=dom.getStyle(n,'text-decoration');return!!decoration&&decoration!=='none';}else{return false;}});return decoration;};const getParents$2=(dom,node,selector)=>{return dom.getParents(node,selector,dom.getRoot());};const isFormatPredicate=(editor,formatName,predicate)=>{const formats=editor.formatter.get(formatName);return isNonNullable(formats)&&exists(formats,predicate);};const isVariableFormatName=(editor,formatName)=>{const hasVariableValues=format=>{const isVariableValue=val=>isFunction(val)||val.length>1&&val.charAt(0)==='%';return exists(['styles','attributes'],key=>get$a(format,key).exists(field=>{const fieldValues=isArray$1(field)?field:values(field);return exists(fieldValues,isVariableValue);}));};return isFormatPredicate(editor,formatName,hasVariableValues);};const areSimilarFormats=(editor,formatName,otherFormatName)=>{const validKeys=['inline','block','selector','attributes','styles','classes'];const filterObj=format=>filter$4(format,(_,key)=>exists(validKeys,validKey=>validKey===key));return isFormatPredicate(editor,formatName,fmt1=>{const filteredFmt1=filterObj(fmt1);return isFormatPredicate(editor,otherFormatName,fmt2=>{const filteredFmt2=filterObj(fmt2);return equal$1(filteredFmt1,filteredFmt2);});});};const isBlockFormat=format=>hasNonNullableKey(format,'block');const isWrappingBlockFormat=format=>isBlockFormat(format)&&format.wrapper===true;const isNonWrappingBlockFormat=format=>isBlockFormat(format)&&format.wrapper!==true;const isSelectorFormat=format=>hasNonNullableKey(format,'selector');const isInlineFormat=format=>hasNonNullableKey(format,'inline');const isMixedFormat=format=>isSelectorFormat(format)&&isInlineFormat(format)&&is$2(get$a(format,'mixed'),true);const shouldExpandToSelector=format=>isSelectorFormat(format)&&format.expand!==false&&!isInlineFormat(format);const isBookmarkNode=isBookmarkNode$1;const getParents$1=getParents$2;const isWhiteSpaceNode=isWhiteSpaceNode$1;const isTextBlock=isTextBlock$1;const isBogusBr=node=>{return isBr$6(node)&&node.getAttribute('data-mce-bogus')&&!node.nextSibling;};const findParentContentEditable=(dom,node)=>{let parent=node;while(parent){if(isElement$6(parent)&&dom.getContentEditable(parent)){return dom.getContentEditable(parent)==='false'?parent:node;}parent=parent.parentNode;}return node;};const walkText=(start,node,offset,predicate)=>{const str=node.data;for(let i=offset;start?i>=0:i<str.length;start?i--:i++){if(predicate(str.charAt(i))){return start?i+1:i;}}return-1;};const findSpace=(start,node,offset)=>walkText(start,node,offset,c=>isNbsp(c)||isWhiteSpace(c));const findContent=(start,node,offset)=>walkText(start,node,offset,isContent);const findWordEndPoint=(dom,body,container,offset,start,includeTrailingSpaces)=>{let lastTextNode;const rootNode=dom.getParent(container,dom.isBlock)||body;const walk=(container,offset,pred)=>{const textSeeker=TextSeeker(dom);const walker=start?textSeeker.backwards:textSeeker.forwards;return Optional.from(walker(container,offset,(text,textOffset)=>{if(isBookmarkNode(text.parentNode)){return-1;}else{lastTextNode=text;return pred(start,text,textOffset);}},rootNode));};const spaceResult=walk(container,offset,findSpace);return spaceResult.bind(result=>includeTrailingSpaces?walk(result.container,result.offset+(start?-1:0),findContent):Optional.some(result)).orThunk(()=>lastTextNode?Optional.some({container:lastTextNode,offset:start?0:lastTextNode.length}):Optional.none());};const findSelectorEndPoint=(dom,formatList,rng,container,siblingName)=>{const sibling=container[siblingName];if(isText$a(container)&&isEmpty$3(container.data)&&sibling){container=sibling;}const parents=getParents$1(dom,container);for(let i=0;i<parents.length;i++){for(let y=0;y<formatList.length;y++){const curFormat=formatList[y];if(isNonNullable(curFormat.collapsed)&&curFormat.collapsed!==rng.collapsed){continue;}if(isSelectorFormat(curFormat)&&dom.is(parents[i],curFormat.selector)){return parents[i];}}}return container;};const findBlockEndPoint=(editor,formatList,container,siblingName)=>{var _a;let node=container;const dom=editor.dom;const root=dom.getRoot();const format=formatList[0];if(isBlockFormat(format)){node=format.wrapper?null:dom.getParent(container,format.block,root);}if(!node){const scopeRoot=(_a=dom.getParent(container,'LI,TD,TH'))!==null&&_a!==void 0?_a:root;node=dom.getParent(isText$a(container)?container.parentNode:container,node=>node!==root&&isTextBlock(editor,node),scopeRoot);}if(node&&isBlockFormat(format)&&format.wrapper){node=getParents$1(dom,node,'ul,ol').reverse()[0]||node;}if(!node){node=container;while(node&&node[siblingName]&&!dom.isBlock(node[siblingName])){node=node[siblingName];if(isEq$5(node,'br')){break;}}}return node||container;};const isAtBlockBoundary$1=(dom,root,container,siblingName)=>{const parent=container.parentNode;if(isNonNullable(container[siblingName])){return false;}else if(parent===root||isNullable(parent)||dom.isBlock(parent)){return true;}else{return isAtBlockBoundary$1(dom,root,parent,siblingName);}};const findParentContainer=(dom,formatList,container,offset,start)=>{let parent=container;const siblingName=start?'previousSibling':'nextSibling';const root=dom.getRoot();if(isText$a(container)&&!isWhiteSpaceNode(container)){if(start?offset>0:offset<container.data.length){return container;}}while(parent){if(!formatList[0].block_expand&&dom.isBlock(parent)){return parent;}for(let sibling=parent[siblingName];sibling;sibling=sibling[siblingName]){const allowSpaces=isText$a(sibling)&&!isAtBlockBoundary$1(dom,root,sibling,siblingName);if(!isBookmarkNode(sibling)&&!isBogusBr(sibling)&&!isWhiteSpaceNode(sibling,allowSpaces)){return parent;}}if(parent===root||parent.parentNode===root){container=parent;break;}parent=parent.parentNode;}return container;};const isSelfOrParentBookmark=container=>isBookmarkNode(container.parentNode)||isBookmarkNode(container);const expandRng=(editor,rng,formatList,includeTrailingSpace=false)=>{let{startContainer,startOffset,endContainer,endOffset}=rng;const dom=editor.dom;const format=formatList[0];if(isElement$6(startContainer)&&startContainer.hasChildNodes()){startContainer=getNode$1(startContainer,startOffset);if(isText$a(startContainer)){startOffset=0;}}if(isElement$6(endContainer)&&endContainer.hasChildNodes()){endContainer=getNode$1(endContainer,rng.collapsed?endOffset:endOffset-1);if(isText$a(endContainer)){endOffset=endContainer.data.length;}}startContainer=findParentContentEditable(dom,startContainer);endContainer=findParentContentEditable(dom,endContainer);if(isSelfOrParentBookmark(startContainer)){startContainer=isBookmarkNode(startContainer)?startContainer:startContainer.parentNode;if(rng.collapsed){startContainer=startContainer.previousSibling||startContainer;}else{startContainer=startContainer.nextSibling||startContainer;}if(isText$a(startContainer)){startOffset=rng.collapsed?startContainer.length:0;}}if(isSelfOrParentBookmark(endContainer)){endContainer=isBookmarkNode(endContainer)?endContainer:endContainer.parentNode;if(rng.collapsed){endContainer=endContainer.nextSibling||endContainer;}else{endContainer=endContainer.previousSibling||endContainer;}if(isText$a(endContainer)){endOffset=rng.collapsed?0:endContainer.length;}}if(rng.collapsed){const startPoint=findWordEndPoint(dom,editor.getBody(),startContainer,startOffset,true,includeTrailingSpace);startPoint.each(({container,offset})=>{startContainer=container;startOffset=offset;});const endPoint=findWordEndPoint(dom,editor.getBody(),endContainer,endOffset,false,includeTrailingSpace);endPoint.each(({container,offset})=>{endContainer=container;endOffset=offset;});}if(isInlineFormat(format)||format.block_expand){if(!isInlineFormat(format)||!isText$a(startContainer)||startOffset===0){startContainer=findParentContainer(dom,formatList,startContainer,startOffset,true);}if(!isInlineFormat(format)||!isText$a(endContainer)||endOffset===endContainer.data.length){endContainer=findParentContainer(dom,formatList,endContainer,endOffset,false);}}if(shouldExpandToSelector(format)){startContainer=findSelectorEndPoint(dom,formatList,rng,startContainer,'previousSibling');endContainer=findSelectorEndPoint(dom,formatList,rng,endContainer,'nextSibling');}if(isBlockFormat(format)||isSelectorFormat(format)){startContainer=findBlockEndPoint(editor,formatList,startContainer,'previousSibling');endContainer=findBlockEndPoint(editor,formatList,endContainer,'nextSibling');if(isBlockFormat(format)){if(!dom.isBlock(startContainer)){startContainer=findParentContainer(dom,formatList,startContainer,startOffset,true);}if(!dom.isBlock(endContainer)){endContainer=findParentContainer(dom,formatList,endContainer,endOffset,false);}}}if(isElement$6(startContainer)&&startContainer.parentNode){startOffset=dom.nodeIndex(startContainer);startContainer=startContainer.parentNode;}if(isElement$6(endContainer)&&endContainer.parentNode){endOffset=dom.nodeIndex(endContainer)+1;endContainer=endContainer.parentNode;}return{startContainer,startOffset,endContainer,endOffset};};const walk$3=(dom,rng,callback)=>{var _a;const startOffset=rng.startOffset;const startContainer=getNode$1(rng.startContainer,startOffset);const endOffset=rng.endOffset;const endContainer=getNode$1(rng.endContainer,endOffset-1);const exclude=nodes=>{const firstNode=nodes[0];if(isText$a(firstNode)&&firstNode===startContainer&&startOffset>=firstNode.data.length){nodes.splice(0,1);}const lastNode=nodes[nodes.length-1];if(endOffset===0&&nodes.length>0&&lastNode===endContainer&&isText$a(lastNode)){nodes.splice(nodes.length-1,1);}return nodes;};const collectSiblings=(node,name,endNode)=>{const siblings=[];for(;node&&node!==endNode;node=node[name]){siblings.push(node);}return siblings;};const findEndPoint=(node,root)=>dom.getParent(node,node=>node.parentNode===root,root);const walkBoundary=(startNode,endNode,next)=>{const siblingName=next?'nextSibling':'previousSibling';for(let node=startNode,parent=node.parentNode;node&&node!==endNode;node=parent){parent=node.parentNode;const siblings=collectSiblings(node===startNode?node:node[siblingName],siblingName);if(siblings.length){if(!next){siblings.reverse();}callback(exclude(siblings));}}};if(startContainer===endContainer){return callback(exclude([startContainer]));}const ancestor=(_a=dom.findCommonAncestor(startContainer,endContainer))!==null&&_a!==void 0?_a:dom.getRoot();if(dom.isChildOf(startContainer,endContainer)){return walkBoundary(startContainer,ancestor,true);}if(dom.isChildOf(endContainer,startContainer)){return walkBoundary(endContainer,ancestor);}const startPoint=findEndPoint(startContainer,ancestor)||startContainer;const endPoint=findEndPoint(endContainer,ancestor)||endContainer;walkBoundary(startContainer,startPoint,true);const siblings=collectSiblings(startPoint===startContainer?startPoint:startPoint.nextSibling,'nextSibling',endPoint===endContainer?endPoint.nextSibling:endPoint);if(siblings.length){callback(exclude(siblings));}walkBoundary(endContainer,endPoint);};const validBlocks=['pre[class*=language-][contenteditable=\"false\"]','figure.image','div[data-ephox-embed-iri]','div.tiny-pageembed','div.mce-toc','div[data-mce-toc]'];const isZeroWidth=elem=>isText$b(elem)&&get$3(elem)===ZWSP$1;const context=(editor,elem,wrapName,nodeName)=>parent(elem).fold(()=>'skipping',parent=>{if(nodeName==='br'||isZeroWidth(elem)){return'valid';}else if(isAnnotation(elem)){return'existing';}else if(isCaretNode(elem.dom)){return'caret';}else if(exists(validBlocks,selector=>is$1(elem,selector))){return'valid-block';}else if(!isValid(editor,wrapName,nodeName)||!isValid(editor,name(parent),wrapName)){return'invalid-child';}else{return'valid';}});const applyWordGrab=(editor,rng)=>{const r=expandRng(editor,rng,[{inline:'span'}]);rng.setStart(r.startContainer,r.startOffset);rng.setEnd(r.endContainer,r.endOffset);editor.selection.setRng(rng);};const applyAnnotation=(elem,masterUId,data,annotationName,decorate,directAnnotation)=>{const{uid=masterUId,...otherData}=data;add$2(elem,annotation());set$2(elem,`${dataAnnotationId()}`,uid);set$2(elem,`${dataAnnotation()}`,annotationName);const{attributes={},classes=[]}=decorate(uid,otherData);setAll$1(elem,attributes);add(elem,classes);if(directAnnotation){if(classes.length>0){set$2(elem,`${dataAnnotationClasses()}`,classes.join(','));}const attributeNames=keys(attributes);if(attributeNames.length>0){set$2(elem,`${dataAnnotationAttributes()}`,attributeNames.join(','));}}};const removeDirectAnnotation=elem=>{remove$8(elem,annotation());remove$b(elem,`${dataAnnotationId()}`);remove$b(elem,`${dataAnnotation()}`);remove$b(elem,`${dataAnnotationActive()}`);const customAttrNames=getOpt(elem,`${dataAnnotationAttributes()}`).map(names=>names.split(',')).getOr([]);const customClasses=getOpt(elem,`${dataAnnotationClasses()}`).map(names=>names.split(',')).getOr([]);each$e(customAttrNames,name=>remove$b(elem,name));remove$5(elem,customClasses);remove$b(elem,`${dataAnnotationClasses()}`);remove$b(elem,`${dataAnnotationAttributes()}`);};const makeAnnotation=(eDoc,uid,data,annotationName,decorate)=>{const master=SugarElement.fromTag('span',eDoc);applyAnnotation(master,uid,data,annotationName,decorate,false);return master;};const annotate=(editor,rng,uid,annotationName,decorate,data)=>{const newWrappers=[];const master=makeAnnotation(editor.getDoc(),uid,data,annotationName,decorate);const wrapper=value$2();const finishWrapper=()=>{wrapper.clear();};const getOrOpenWrapper=()=>wrapper.get().getOrThunk(()=>{const nu=shallow$1(master);newWrappers.push(nu);wrapper.set(nu);return nu;});const processElements=elems=>{each$e(elems,processElement);};const processElement=elem=>{const ctx=context(editor,elem,'span',name(elem));switch(ctx){case'invalid-child':{finishWrapper();const children$1=children(elem);processElements(children$1);finishWrapper();break;}case'valid-block':{finishWrapper();applyAnnotation(elem,uid,data,annotationName,decorate,true);break;}case'valid':{const w=getOrOpenWrapper();wrap$2(elem,w);break;}}};const processNodes=nodes=>{const elems=map$3(nodes,SugarElement.fromDom);processElements(elems);};walk$3(editor.dom,rng,nodes=>{finishWrapper();processNodes(nodes);});return newWrappers;};const annotateWithBookmark=(editor,name,settings,data)=>{editor.undoManager.transact(()=>{const selection=editor.selection;const initialRng=selection.getRng();const hasFakeSelection=getCellsFromEditor(editor).length>0;const masterUid=generate$1('mce-annotation');if(initialRng.collapsed&&!hasFakeSelection){applyWordGrab(editor,initialRng);}if(selection.getRng().collapsed&&!hasFakeSelection){const wrapper=makeAnnotation(editor.getDoc(),masterUid,data,name,settings.decorate);set(wrapper,nbsp);selection.getRng().insertNode(wrapper.dom);selection.select(wrapper.dom);}else{preserve(selection,false,()=>{runOnRanges(editor,selectionRng=>{annotate(editor,selectionRng,masterUid,name,settings.decorate,data);});});}});};const Annotator=editor=>{const registry=create$c();setup$w(editor,registry);const changes=setup$x(editor,registry);const isSpan=isTag('span');const removeAnnotations=elements=>{each$e(elements,element=>{if(isSpan(element)){unwrap(element);}else{removeDirectAnnotation(element);}});};return{register:(name,settings)=>{registry.register(name,settings);},annotate:(name,data)=>{registry.lookup(name).each(settings=>{annotateWithBookmark(editor,name,settings,data);});},annotationChanged:(name,callback)=>{changes.addListener(name,callback);},remove:name=>{const bookmark=editor.selection.getBookmark();identify(editor,Optional.some(name)).each(({elements})=>{removeAnnotations(elements);});editor.selection.moveToBookmark(bookmark);},removeAll:name=>{const bookmark=editor.selection.getBookmark();each$d(findAll(editor,name),(elements,_)=>{removeAnnotations(elements);});editor.selection.moveToBookmark(bookmark);},getAll:name=>{const directory=findAll(editor,name);return map$2(directory,elems=>map$3(elems,elem=>elem.dom));}};};const BookmarkManager=selection=>{return{getBookmark:curry(getBookmark$1,selection),moveToBookmark:curry(moveToBookmark,selection)};};BookmarkManager.isBookmarkNode=isBookmarkNode$1;const isXYWithinRange=(clientX,clientY,range)=>{if(range.collapsed){return false;}else{return exists(range.getClientRects(),rect=>containsXY(rect,clientX,clientY));}};const firePreProcess=(editor,args)=>editor.dispatch('PreProcess',args);const firePostProcess=(editor,args)=>editor.dispatch('PostProcess',args);const fireRemove=editor=>{editor.dispatch('remove');};const fireDetach=editor=>{editor.dispatch('detach');};const fireSwitchMode=(editor,mode)=>{editor.dispatch('SwitchMode',{mode});};const fireObjectResizeStart=(editor,target,width,height,origin)=>{editor.dispatch('ObjectResizeStart',{target,width,height,origin});};const fireObjectResized=(editor,target,width,height,origin)=>{editor.dispatch('ObjectResized',{target,width,height,origin});};const firePreInit=editor=>{editor.dispatch('PreInit');};const firePostRender=editor=>{editor.dispatch('PostRender');};const fireInit=editor=>{editor.dispatch('Init');};const firePlaceholderToggle=(editor,state)=>{editor.dispatch('PlaceholderToggle',{state});};const fireError=(editor,errorType,error)=>{editor.dispatch(errorType,error);};const fireFormatApply=(editor,format,node,vars)=>{editor.dispatch('FormatApply',{format,node,vars});};const fireFormatRemove=(editor,format,node,vars)=>{editor.dispatch('FormatRemove',{format,node,vars});};const fireBeforeSetContent=(editor,args)=>editor.dispatch('BeforeSetContent',args);const fireSetContent=(editor,args)=>editor.dispatch('SetContent',args);const fireBeforeGetContent=(editor,args)=>editor.dispatch('BeforeGetContent',args);const fireGetContent=(editor,args)=>editor.dispatch('GetContent',args);const fireAutocompleterStart=(editor,args)=>{editor.dispatch('AutocompleterStart',args);};const fireAutocompleterUpdate=(editor,args)=>{editor.dispatch('AutocompleterUpdate',args);};const fireAutocompleterEnd=editor=>{editor.dispatch('AutocompleterEnd');};const firePastePreProcess=(editor,html,internal)=>editor.dispatch('PastePreProcess',{content:html,internal});const firePastePostProcess=(editor,node,internal)=>editor.dispatch('PastePostProcess',{node,internal});const firePastePlainTextToggle=(editor,state)=>editor.dispatch('PastePlainTextToggle',{state});const VK={BACKSPACE:8,DELETE:46,DOWN:40,ENTER:13,ESC:27,LEFT:37,RIGHT:39,SPACEBAR:32,TAB:9,UP:38,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,modifierPressed:e=>{return e.shiftKey||e.ctrlKey||e.altKey||VK.metaKeyPressed(e);},metaKeyPressed:e=>{return Env.os.isMacOS()||Env.os.isiOS()?e.metaKey:e.ctrlKey&&!e.altKey;}};const elementSelectionAttr='data-mce-selected';const controlElmSelector='table,img,figure.image,hr,video,span.mce-preview-object';const abs=Math.abs;const round$1=Math.round;const resizeHandles={nw:[0,0,-1,-1],ne:[1,0,1,-1],se:[1,1,1,1],sw:[0,1,-1,1]};const isTouchEvent=evt=>evt.type==='longpress'||evt.type.indexOf('touch')===0;const ControlSelection=(selection,editor)=>{const dom=editor.dom;const editableDoc=editor.getDoc();const rootDocument=document;const rootElement=editor.getBody();let selectedElm,selectedElmGhost,resizeHelper,selectedHandle,resizeBackdrop;let startX,startY,selectedElmX,selectedElmY,startW,startH,ratio,resizeStarted;let width;let height;let startScrollWidth;let startScrollHeight;const isImage=elm=>isNonNullable(elm)&&(isImg(elm)||dom.is(elm,'figure.image'));const isMedia=elm=>isMedia$2(elm)||dom.hasClass(elm,'mce-preview-object');const isEventOnImageOutsideRange=(evt,range)=>{if(isTouchEvent(evt)){const touch=evt.touches[0];return isImage(evt.target)&&!isXYWithinRange(touch.clientX,touch.clientY,range);}else{return isImage(evt.target)&&!isXYWithinRange(evt.clientX,evt.clientY,range);}};const contextMenuSelectImage=evt=>{const target=evt.target;if(isEventOnImageOutsideRange(evt,editor.selection.getRng())&&!evt.isDefaultPrevented()){editor.selection.select(target);}};const getResizeTargets=elm=>{if(dom.hasClass(elm,'mce-preview-object')&&isNonNullable(elm.firstElementChild)){return[elm,elm.firstElementChild];}else if(dom.is(elm,'figure.image')){return[elm.querySelector('img')];}else{return[elm];}};const isResizable=elm=>{const selector=getObjectResizing(editor);if(!selector){return false;}if(elm.getAttribute('data-mce-resize')==='false'){return false;}if(elm===editor.getBody()){return false;}if(dom.hasClass(elm,'mce-preview-object')&&isNonNullable(elm.firstElementChild)){return is$1(SugarElement.fromDom(elm.firstElementChild),selector);}else{return is$1(SugarElement.fromDom(elm),selector);}};const createGhostElement=elm=>{if(isMedia(elm)){return dom.create('img',{src:Env.transparentSrc});}else{return elm.cloneNode(true);}};const setSizeProp=(element,name,value)=>{if(isNonNullable(value)){const targets=getResizeTargets(element);each$e(targets,target=>{if(target.style[name]||!editor.schema.isValid(target.nodeName.toLowerCase(),name)){dom.setStyle(target,name,value);}else{dom.setAttrib(target,name,''+value);}});}};const setGhostElmSize=(ghostElm,width,height)=>{setSizeProp(ghostElm,'width',width);setSizeProp(ghostElm,'height',height);};const resizeGhostElement=e=>{let deltaX,deltaY,proportional;let resizeHelperX,resizeHelperY;deltaX=e.screenX-startX;deltaY=e.screenY-startY;width=deltaX*selectedHandle[2]+startW;height=deltaY*selectedHandle[3]+startH;width=width<5?5:width;height=height<5?5:height;if((isImage(selectedElm)||isMedia(selectedElm))&&getResizeImgProportional(editor)!==false){proportional=!VK.modifierPressed(e);}else{proportional=VK.modifierPressed(e);}if(proportional){if(abs(deltaX)>abs(deltaY)){height=round$1(width*ratio);width=round$1(height/ratio);}else{width=round$1(height/ratio);height=round$1(width*ratio);}}setGhostElmSize(selectedElmGhost,width,height);resizeHelperX=selectedHandle.startPos.x+deltaX;resizeHelperY=selectedHandle.startPos.y+deltaY;resizeHelperX=resizeHelperX>0?resizeHelperX:0;resizeHelperY=resizeHelperY>0?resizeHelperY:0;dom.setStyles(resizeHelper,{left:resizeHelperX,top:resizeHelperY,display:'block'});resizeHelper.innerHTML=width+' &times; '+height;if(selectedHandle[2]<0&&selectedElmGhost.clientWidth<=width){dom.setStyle(selectedElmGhost,'left',selectedElmX+(startW-width));}if(selectedHandle[3]<0&&selectedElmGhost.clientHeight<=height){dom.setStyle(selectedElmGhost,'top',selectedElmY+(startH-height));}deltaX=rootElement.scrollWidth-startScrollWidth;deltaY=rootElement.scrollHeight-startScrollHeight;if(deltaX+deltaY!==0){dom.setStyles(resizeHelper,{left:resizeHelperX-deltaX,top:resizeHelperY-deltaY});}if(!resizeStarted){fireObjectResizeStart(editor,selectedElm,startW,startH,'corner-'+selectedHandle.name);resizeStarted=true;}};const endGhostResize=()=>{const wasResizeStarted=resizeStarted;resizeStarted=false;if(wasResizeStarted){setSizeProp(selectedElm,'width',width);setSizeProp(selectedElm,'height',height);}dom.unbind(editableDoc,'mousemove',resizeGhostElement);dom.unbind(editableDoc,'mouseup',endGhostResize);if(rootDocument!==editableDoc){dom.unbind(rootDocument,'mousemove',resizeGhostElement);dom.unbind(rootDocument,'mouseup',endGhostResize);}dom.remove(selectedElmGhost);dom.remove(resizeHelper);dom.remove(resizeBackdrop);showResizeRect(selectedElm);if(wasResizeStarted){fireObjectResized(editor,selectedElm,width,height,'corner-'+selectedHandle.name);dom.setAttrib(selectedElm,'style',dom.getAttrib(selectedElm,'style'));}editor.nodeChanged();};const showResizeRect=targetElm=>{unbindResizeHandleEvents();const position=dom.getPos(targetElm,rootElement);const selectedElmX=position.x;const selectedElmY=position.y;const rect=targetElm.getBoundingClientRect();const targetWidth=rect.width||rect.right-rect.left;const targetHeight=rect.height||rect.bottom-rect.top;if(selectedElm!==targetElm){hideResizeRect();selectedElm=targetElm;width=height=0;}const e=editor.dispatch('ObjectSelected',{target:targetElm});if(isResizable(targetElm)&&!e.isDefaultPrevented()){each$d(resizeHandles,(handle,name)=>{const startDrag=e=>{const target=getResizeTargets(selectedElm)[0];startX=e.screenX;startY=e.screenY;startW=target.clientWidth;startH=target.clientHeight;ratio=startH/startW;selectedHandle=handle;selectedHandle.name=name;selectedHandle.startPos={x:targetWidth*handle[0]+selectedElmX,y:targetHeight*handle[1]+selectedElmY};startScrollWidth=rootElement.scrollWidth;startScrollHeight=rootElement.scrollHeight;resizeBackdrop=dom.add(rootElement,'div',{'class':'mce-resize-backdrop','data-mce-bogus':'all'});dom.setStyles(resizeBackdrop,{position:'fixed',left:'0',top:'0',width:'100%',height:'100%'});selectedElmGhost=createGhostElement(selectedElm);dom.addClass(selectedElmGhost,'mce-clonedresizable');dom.setAttrib(selectedElmGhost,'data-mce-bogus','all');selectedElmGhost.contentEditable='false';dom.setStyles(selectedElmGhost,{left:selectedElmX,top:selectedElmY,margin:0});setGhostElmSize(selectedElmGhost,targetWidth,targetHeight);selectedElmGhost.removeAttribute(elementSelectionAttr);rootElement.appendChild(selectedElmGhost);dom.bind(editableDoc,'mousemove',resizeGhostElement);dom.bind(editableDoc,'mouseup',endGhostResize);if(rootDocument!==editableDoc){dom.bind(rootDocument,'mousemove',resizeGhostElement);dom.bind(rootDocument,'mouseup',endGhostResize);}resizeHelper=dom.add(rootElement,'div',{'class':'mce-resize-helper','data-mce-bogus':'all'},startW+' &times; '+startH);};let handleElm=dom.get('mceResizeHandle'+name);if(handleElm){dom.remove(handleElm);}handleElm=dom.add(rootElement,'div',{'id':'mceResizeHandle'+name,'data-mce-bogus':'all','class':'mce-resizehandle','unselectable':true,'style':'cursor:'+name+'-resize; margin:0; padding:0'});dom.bind(handleElm,'mousedown',e=>{e.stopImmediatePropagation();e.preventDefault();startDrag(e);});handle.elm=handleElm;dom.setStyles(handleElm,{left:targetWidth*handle[0]+selectedElmX-handleElm.offsetWidth/2,top:targetHeight*handle[1]+selectedElmY-handleElm.offsetHeight/2});});}else{hideResizeRect(false);}};const throttledShowResizeRect=first$1(showResizeRect,0);const hideResizeRect=(removeSelected=true)=>{throttledShowResizeRect.cancel();unbindResizeHandleEvents();if(selectedElm&&removeSelected){selectedElm.removeAttribute(elementSelectionAttr);}each$d(resizeHandles,(value,name)=>{const handleElm=dom.get('mceResizeHandle'+name);if(handleElm){dom.unbind(handleElm);dom.remove(handleElm);}});};const isChildOrEqual=(node,parent)=>dom.isChildOf(node,parent);const updateResizeRect=e=>{if(resizeStarted||editor.removed||editor.composing){return;}const targetElm=e.type==='mousedown'?e.target:selection.getNode();const controlElm=closest$3(SugarElement.fromDom(targetElm),controlElmSelector).map(e=>e.dom).getOrUndefined();const selectedValue=isNonNullable(controlElm)?dom.getAttrib(controlElm,elementSelectionAttr,'1'):'1';each$e(dom.select(`img[${elementSelectionAttr}],hr[${elementSelectionAttr}]`),img=>{img.removeAttribute(elementSelectionAttr);});if(isNonNullable(controlElm)&&isChildOrEqual(controlElm,rootElement)){disableGeckoResize();const startElm=selection.getStart(true);if(isChildOrEqual(startElm,controlElm)&&isChildOrEqual(selection.getEnd(true),controlElm)){dom.setAttrib(controlElm,elementSelectionAttr,selectedValue);throttledShowResizeRect.throttle(controlElm);return;}}hideResizeRect();};const unbindResizeHandleEvents=()=>{each$d(resizeHandles,handle=>{if(handle.elm){dom.unbind(handle.elm);delete handle.elm;}});};const disableGeckoResize=()=>{try{editor.getDoc().execCommand('enableObjectResizing',false,'false');}catch(ex){}};editor.on('init',()=>{disableGeckoResize();editor.on('NodeChange ResizeEditor ResizeWindow ResizeContent drop',updateResizeRect);editor.on('keyup compositionend',e=>{if(selectedElm&&selectedElm.nodeName==='TABLE'){updateResizeRect(e);}});editor.on('hide blur',hideResizeRect);editor.on('contextmenu longpress',contextMenuSelectImage,true);});editor.on('remove',unbindResizeHandleEvents);const destroy=()=>{throttledShowResizeRect.cancel();selectedElm=selectedElmGhost=resizeBackdrop=null;};return{isResizable,showResizeRect,hideResizeRect,updateResizeRect,destroy};};const setStart=(rng,situ)=>{situ.fold(e=>{rng.setStartBefore(e.dom);},(e,o)=>{rng.setStart(e.dom,o);},e=>{rng.setStartAfter(e.dom);});};const setFinish=(rng,situ)=>{situ.fold(e=>{rng.setEndBefore(e.dom);},(e,o)=>{rng.setEnd(e.dom,o);},e=>{rng.setEndAfter(e.dom);});};const relativeToNative=(win,startSitu,finishSitu)=>{const range=win.document.createRange();setStart(range,startSitu);setFinish(range,finishSitu);return range;};const exactToNative=(win,start,soffset,finish,foffset)=>{const rng=win.document.createRange();rng.setStart(start.dom,soffset);rng.setEnd(finish.dom,foffset);return rng;};const adt$3=Adt.generate([{ltr:['start','soffset','finish','foffset']},{rtl:['start','soffset','finish','foffset']}]);const fromRange=(win,type,range)=>type(SugarElement.fromDom(range.startContainer),range.startOffset,SugarElement.fromDom(range.endContainer),range.endOffset);const getRanges=(win,selection)=>selection.match({domRange:rng=>{return{ltr:constant(rng),rtl:Optional.none};},relative:(startSitu,finishSitu)=>{return{ltr:cached(()=>relativeToNative(win,startSitu,finishSitu)),rtl:cached(()=>Optional.some(relativeToNative(win,finishSitu,startSitu)))};},exact:(start,soffset,finish,foffset)=>{return{ltr:cached(()=>exactToNative(win,start,soffset,finish,foffset)),rtl:cached(()=>Optional.some(exactToNative(win,finish,foffset,start,soffset)))};}});const doDiagnose=(win,ranges)=>{const rng=ranges.ltr();if(rng.collapsed){const reversed=ranges.rtl().filter(rev=>rev.collapsed===false);return reversed.map(rev=>adt$3.rtl(SugarElement.fromDom(rev.endContainer),rev.endOffset,SugarElement.fromDom(rev.startContainer),rev.startOffset)).getOrThunk(()=>fromRange(win,adt$3.ltr,rng));}else{return fromRange(win,adt$3.ltr,rng);}};const diagnose=(win,selection)=>{const ranges=getRanges(win,selection);return doDiagnose(win,ranges);};adt$3.ltr;adt$3.rtl;const create$a=(start,soffset,finish,foffset)=>({start,soffset,finish,foffset});const SimRange={create:create$a};const caretPositionFromPoint=(doc,x,y)=>{var _a,_b;return Optional.from((_b=(_a=doc.dom).caretPositionFromPoint)===null||_b===void 0?void 0:_b.call(_a,x,y)).bind(pos=>{if(pos.offsetNode===null){return Optional.none();}const r=doc.dom.createRange();r.setStart(pos.offsetNode,pos.offset);r.collapse();return Optional.some(r);});};const caretRangeFromPoint=(doc,x,y)=>{var _a,_b;return Optional.from((_b=(_a=doc.dom).caretRangeFromPoint)===null||_b===void 0?void 0:_b.call(_a,x,y));};const availableSearch=(()=>{if(document.caretPositionFromPoint){return caretPositionFromPoint;}else if(document.caretRangeFromPoint){return caretRangeFromPoint;}else{return Optional.none;}})();const fromPoint$1=(win,x,y)=>{const doc=SugarElement.fromDom(win.document);return availableSearch(doc,x,y).map(rng=>SimRange.create(SugarElement.fromDom(rng.startContainer),rng.startOffset,SugarElement.fromDom(rng.endContainer),rng.endOffset));};const adt$2=Adt.generate([{before:['element']},{on:['element','offset']},{after:['element']}]);const cata=(subject,onBefore,onOn,onAfter)=>subject.fold(onBefore,onOn,onAfter);const getStart$2=situ=>situ.fold(identity,identity,identity);const before$1=adt$2.before;const on=adt$2.on;const after$1=adt$2.after;const Situ={before:before$1,on,after:after$1,cata,getStart:getStart$2};const adt$1=Adt.generate([{domRange:['rng']},{relative:['startSitu','finishSitu']},{exact:['start','soffset','finish','foffset']}]);const exactFromRange=simRange=>adt$1.exact(simRange.start,simRange.soffset,simRange.finish,simRange.foffset);const getStart$1=selection=>selection.match({domRange:rng=>SugarElement.fromDom(rng.startContainer),relative:(startSitu,_finishSitu)=>Situ.getStart(startSitu),exact:(start,_soffset,_finish,_foffset)=>start});const domRange=adt$1.domRange;const relative=adt$1.relative;const exact=adt$1.exact;const getWin=selection=>{const start=getStart$1(selection);return defaultView(start);};const range=SimRange.create;const SimSelection={domRange,relative,exact,exactFromRange,getWin,range};const beforeSpecial=(element,offset)=>{const name$1=name(element);if('input'===name$1){return Situ.after(element);}else if(!contains$2(['br','img'],name$1)){return Situ.on(element,offset);}else{return offset===0?Situ.before(element):Situ.after(element);}};const preprocessRelative=(startSitu,finishSitu)=>{const start=startSitu.fold(Situ.before,beforeSpecial,Situ.after);const finish=finishSitu.fold(Situ.before,beforeSpecial,Situ.after);return SimSelection.relative(start,finish);};const preprocessExact=(start,soffset,finish,foffset)=>{const startSitu=beforeSpecial(start,soffset);const finishSitu=beforeSpecial(finish,foffset);return SimSelection.relative(startSitu,finishSitu);};const preprocess=selection=>selection.match({domRange:rng=>{const start=SugarElement.fromDom(rng.startContainer);const finish=SugarElement.fromDom(rng.endContainer);return preprocessExact(start,rng.startOffset,finish,rng.endOffset);},relative:preprocessRelative,exact:preprocessExact});const fromElements=(elements,scope)=>{const doc=scope||document;const fragment=doc.createDocumentFragment();each$e(elements,element=>{fragment.appendChild(element.dom);});return SugarElement.fromDom(fragment);};const toNative=selection=>{const win=SimSelection.getWin(selection).dom;const getDomRange=(start,soffset,finish,foffset)=>exactToNative(win,start,soffset,finish,foffset);const filtered=preprocess(selection);return diagnose(win,filtered).match({ltr:getDomRange,rtl:getDomRange});};const getAtPoint=(win,x,y)=>fromPoint$1(win,x,y);const fromPoint=(clientX,clientY,doc)=>{const win=defaultView(SugarElement.fromDom(doc));return getAtPoint(win.dom,clientX,clientY).map(simRange=>{const rng=doc.createRange();rng.setStart(simRange.start.dom,simRange.soffset);rng.setEnd(simRange.finish.dom,simRange.foffset);return rng;}).getOrUndefined();};const isEq$4=(rng1,rng2)=>{return isNonNullable(rng1)&&isNonNullable(rng2)&&rng1.startContainer===rng2.startContainer&&rng1.startOffset===rng2.startOffset&&rng1.endContainer===rng2.endContainer&&rng1.endOffset===rng2.endOffset;};const findParent=(node,rootNode,predicate)=>{let currentNode=node;while(currentNode&&currentNode!==rootNode){if(predicate(currentNode)){return currentNode;}currentNode=currentNode.parentNode;}return null;};const hasParent$1=(node,rootNode,predicate)=>findParent(node,rootNode,predicate)!==null;const hasParentWithName=(node,rootNode,name)=>hasParent$1(node,rootNode,node=>node.nodeName===name);const isCeFalseCaretContainer=(node,rootNode)=>isCaretContainer$2(node)&&!hasParent$1(node,rootNode,isCaretNode);const hasBrBeforeAfter=(dom,node,left)=>{const parentNode=node.parentNode;if(parentNode){const walker=new DomTreeWalker(node,dom.getParent(parentNode,dom.isBlock)||dom.getRoot());let currentNode;while(currentNode=walker[left?'prev':'next']()){if(isBr$6(currentNode)){return true;}}}return false;};const isPrevNode=(node,name)=>{var _a;return((_a=node.previousSibling)===null||_a===void 0?void 0:_a.nodeName)===name;};const hasContentEditableFalseParent=(root,node)=>{let currentNode=node;while(currentNode&&currentNode!==root){if(isContentEditableFalse$a(currentNode)){return true;}currentNode=currentNode.parentNode;}return false;};const findTextNodeRelative=(dom,isAfterNode,collapsed,left,startNode)=>{const body=dom.getRoot();const nonEmptyElementsMap=dom.schema.getNonEmptyElements();const parentNode=startNode.parentNode;let lastInlineElement;let node;if(!parentNode){return Optional.none();}const parentBlockContainer=dom.getParent(parentNode,dom.isBlock)||body;if(left&&isBr$6(startNode)&&isAfterNode&&dom.isEmpty(parentBlockContainer)){return Optional.some(CaretPosition(parentNode,dom.nodeIndex(startNode)));}const walker=new DomTreeWalker(startNode,parentBlockContainer);while(node=walker[left?'prev':'next']()){if(dom.getContentEditableParent(node)==='false'||isCeFalseCaretContainer(node,body)){return Optional.none();}if(isText$a(node)&&node.data.length>0){if(!hasParentWithName(node,body,'A')){return Optional.some(CaretPosition(node,left?node.data.length:0));}return Optional.none();}if(dom.isBlock(node)||nonEmptyElementsMap[node.nodeName.toLowerCase()]){return Optional.none();}lastInlineElement=node;}if(isComment(lastInlineElement)){return Optional.none();}if(collapsed&&lastInlineElement){return Optional.some(CaretPosition(lastInlineElement,0));}return Optional.none();};const normalizeEndPoint=(dom,collapsed,start,rng)=>{const body=dom.getRoot();let node;let normalized=false;let container=start?rng.startContainer:rng.endContainer;let offset=start?rng.startOffset:rng.endOffset;const isAfterNode=isElement$6(container)&&offset===container.childNodes.length;const nonEmptyElementsMap=dom.schema.getNonEmptyElements();let directionLeft=start;if(isCaretContainer$2(container)){return Optional.none();}if(isElement$6(container)&&offset>container.childNodes.length-1){directionLeft=false;}if(isDocument$1(container)){container=body;offset=0;}if(container===body){if(directionLeft){node=container.childNodes[offset>0?offset-1:0];if(node){if(isCaretContainer$2(node)){return Optional.none();}if(nonEmptyElementsMap[node.nodeName]||isTable$2(node)){return Optional.none();}}}if(container.hasChildNodes()){offset=Math.min(!directionLeft&&offset>0?offset-1:offset,container.childNodes.length-1);container=container.childNodes[offset];offset=isText$a(container)&&isAfterNode?container.data.length:0;if(!collapsed&&container===body.lastChild&&isTable$2(container)){return Optional.none();}if(hasContentEditableFalseParent(body,container)||isCaretContainer$2(container)){return Optional.none();}if(container.hasChildNodes()&&!isTable$2(container)){node=container;const walker=new DomTreeWalker(container,body);do{if(isContentEditableFalse$a(node)||isCaretContainer$2(node)){normalized=false;break;}if(isText$a(node)&&node.data.length>0){offset=directionLeft?0:node.data.length;container=node;normalized=true;break;}if(nonEmptyElementsMap[node.nodeName.toLowerCase()]&&!isTableCellOrCaption(node)){offset=dom.nodeIndex(node);container=node.parentNode;if(!directionLeft){offset++;}normalized=true;break;}}while(node=directionLeft?walker.next():walker.prev());}}}if(collapsed){if(isText$a(container)&&offset===0){findTextNodeRelative(dom,isAfterNode,collapsed,true,container).each(pos=>{container=pos.container();offset=pos.offset();normalized=true;});}if(isElement$6(container)){node=container.childNodes[offset];if(!node){node=container.childNodes[offset-1];}if(node&&isBr$6(node)&&!isPrevNode(node,'A')&&!hasBrBeforeAfter(dom,node,false)&&!hasBrBeforeAfter(dom,node,true)){findTextNodeRelative(dom,isAfterNode,collapsed,true,node).each(pos=>{container=pos.container();offset=pos.offset();normalized=true;});}}}if(directionLeft&&!collapsed&&isText$a(container)&&offset===container.data.length){findTextNodeRelative(dom,isAfterNode,collapsed,false,container).each(pos=>{container=pos.container();offset=pos.offset();normalized=true;});}return normalized&&container?Optional.some(CaretPosition(container,offset)):Optional.none();};const normalize$2=(dom,rng)=>{const collapsed=rng.collapsed,normRng=rng.cloneRange();const startPos=CaretPosition.fromRangeStart(rng);normalizeEndPoint(dom,collapsed,true,normRng).each(pos=>{if(!collapsed||!CaretPosition.isAbove(startPos,pos)){normRng.setStart(pos.container(),pos.offset());}});if(!collapsed){normalizeEndPoint(dom,collapsed,false,normRng).each(pos=>{normRng.setEnd(pos.container(),pos.offset());});}if(collapsed){normRng.collapse(true);}return isEq$4(rng,normRng)?Optional.none():Optional.some(normRng);};const splitText=(node,offset)=>{return node.splitText(offset);};const split=rng=>{let startContainer=rng.startContainer,startOffset=rng.startOffset,endContainer=rng.endContainer,endOffset=rng.endOffset;if(startContainer===endContainer&&isText$a(startContainer)){if(startOffset>0&&startOffset<startContainer.data.length){endContainer=splitText(startContainer,startOffset);startContainer=endContainer.previousSibling;if(endOffset>startOffset){endOffset=endOffset-startOffset;const newContainer=splitText(endContainer,endOffset).previousSibling;startContainer=endContainer=newContainer;endOffset=newContainer.data.length;startOffset=0;}else{endOffset=0;}}}else{if(isText$a(startContainer)&&startOffset>0&&startOffset<startContainer.data.length){startContainer=splitText(startContainer,startOffset);startOffset=0;}if(isText$a(endContainer)&&endOffset>0&&endOffset<endContainer.data.length){const newContainer=splitText(endContainer,endOffset).previousSibling;endContainer=newContainer;endOffset=newContainer.data.length;}}return{startContainer,startOffset,endContainer,endOffset};};const RangeUtils=dom=>{const walk=(rng,callback)=>{return walk$3(dom,rng,callback);};const split$1=split;const normalize=rng=>{return normalize$2(dom,rng).fold(never,normalizedRng=>{rng.setStart(normalizedRng.startContainer,normalizedRng.startOffset);rng.setEnd(normalizedRng.endContainer,normalizedRng.endOffset);return true;});};return{walk,split:split$1,normalize};};RangeUtils.compareRanges=isEq$4;RangeUtils.getCaretRangeFromPoint=fromPoint;RangeUtils.getSelectedNode=getSelectedNode;RangeUtils.getNode=getNode$1;const Dimension=(name,getOffset)=>{const set=(element,h)=>{if(!isNumber(h)&&!h.match(/^[0-9]+$/)){throw new Error(name+'.set accepts only positive integer values. Value was '+h);}const dom=element.dom;if(isSupported$1(dom)){dom.style[name]=h+'px';}};const get=element=>{const r=getOffset(element);if(r<=0||r===null){const css=get$7(element,name);return parseFloat(css)||0;}return r;};const getOuter=get;const aggregate=(element,properties)=>foldl(properties,(acc,property)=>{const val=get$7(element,property);const value=val===undefined?0:parseInt(val,10);return isNaN(value)?acc:acc+value;},0);const max=(element,value,properties)=>{const cumulativeInclusions=aggregate(element,properties);const absoluteMax=value>cumulativeInclusions?value-cumulativeInclusions:0;return absoluteMax;};return{set,get,getOuter,aggregate,max};};const api=Dimension('height',element=>{const dom=element.dom;return inBody(element)?dom.getBoundingClientRect().height:dom.offsetHeight;});const get$2=element=>api.get(element);const getDocument=()=>SugarElement.fromDom(document);const walkUp=(navigation,doc)=>{const frame=navigation.view(doc);return frame.fold(constant([]),f=>{const parent=navigation.owner(f);const rest=walkUp(navigation,parent);return[f].concat(rest);});};const pathTo=(element,navigation)=>{const d=navigation.owner(element);return walkUp(navigation,d);};const view=doc=>{var _a;const element=doc.dom===document?Optional.none():Optional.from((_a=doc.dom.defaultView)===null||_a===void 0?void 0:_a.frameElement);return element.map(SugarElement.fromDom);};const owner=element=>documentOrOwner(element);var Navigation=/*#__PURE__*/Object.freeze({__proto__:null,view:view,owner:owner});const find=element=>{const doc=getDocument();const scroll=get$5(doc);const frames=pathTo(element,Navigation);const offset=viewport(element);const r=foldr(frames,(b,a)=>{const loc=viewport(a);return{left:b.left+loc.left,top:b.top+loc.top};},{left:0,top:0});return SugarPosition(r.left+offset.left+scroll.left,r.top+offset.top+scroll.top);};const excludeFromDescend=element=>name(element)==='textarea';const fireScrollIntoViewEvent=(editor,data)=>{const scrollEvent=editor.dispatch('ScrollIntoView',data);return scrollEvent.isDefaultPrevented();};const fireAfterScrollIntoViewEvent=(editor,data)=>{editor.dispatch('AfterScrollIntoView',data);};const descend=(element,offset)=>{const children$1=children(element);if(children$1.length===0||excludeFromDescend(element)){return{element,offset};}else if(offset<children$1.length&&!excludeFromDescend(children$1[offset])){return{element:children$1[offset],offset:0};}else{const last=children$1[children$1.length-1];if(excludeFromDescend(last)){return{element,offset};}else{if(name(last)==='img'){return{element:last,offset:1};}else if(isText$b(last)){return{element:last,offset:get$3(last).length};}else{return{element:last,offset:children(last).length};}}}};const markerInfo=(element,cleanupFun)=>{const pos=absolute(element);const height=get$2(element);return{element,bottom:pos.top+height,height,pos,cleanup:cleanupFun};};const createMarker$1=(element,offset)=>{const startPoint=descend(element,offset);const span=SugarElement.fromHtml('<span data-mce-bogus=\"all\" style=\"display: inline-block;\">'+ZWSP$1+'</span>');before$3(startPoint.element,span);return markerInfo(span,()=>remove$6(span));};const elementMarker=element=>markerInfo(SugarElement.fromDom(element),noop);const withMarker=(editor,f,rng,alignToTop)=>{preserveWith(editor,(_s,_e)=>applyWithMarker(editor,f,rng,alignToTop),rng);};const withScrollEvents=(editor,doc,f,marker,alignToTop)=>{const data={elm:marker.element.dom,alignToTop};if(fireScrollIntoViewEvent(editor,data)){return;}const scrollTop=get$5(doc).top;f(doc,scrollTop,marker,alignToTop);fireAfterScrollIntoViewEvent(editor,data);};const applyWithMarker=(editor,f,rng,alignToTop)=>{const body=SugarElement.fromDom(editor.getBody());const doc=SugarElement.fromDom(editor.getDoc());reflow(body);const marker=createMarker$1(SugarElement.fromDom(rng.startContainer),rng.startOffset);withScrollEvents(editor,doc,f,marker,alignToTop);marker.cleanup();};const withElement=(editor,element,f,alignToTop)=>{const doc=SugarElement.fromDom(editor.getDoc());withScrollEvents(editor,doc,f,elementMarker(element),alignToTop);};const preserveWith=(editor,f,rng)=>{const startElement=rng.startContainer;const startOffset=rng.startOffset;const endElement=rng.endContainer;const endOffset=rng.endOffset;f(SugarElement.fromDom(startElement),SugarElement.fromDom(endElement));const newRng=editor.dom.createRng();newRng.setStart(startElement,startOffset);newRng.setEnd(endElement,endOffset);editor.selection.setRng(rng);};const scrollToMarker=(marker,viewHeight,alignToTop,doc)=>{const pos=marker.pos;if(alignToTop){to(pos.left,pos.top,doc);}else{const y=pos.top-viewHeight+marker.height;to(pos.left,y,doc);}};const intoWindowIfNeeded=(doc,scrollTop,viewHeight,marker,alignToTop)=>{const viewportBottom=viewHeight+scrollTop;const markerTop=marker.pos.top;const markerBottom=marker.bottom;const largerThanViewport=markerBottom-markerTop>=viewHeight;if(markerTop<scrollTop){scrollToMarker(marker,viewHeight,alignToTop!==false,doc);}else if(markerTop>viewportBottom){const align=largerThanViewport?alignToTop!==false:alignToTop===true;scrollToMarker(marker,viewHeight,align,doc);}else if(markerBottom>viewportBottom&&!largerThanViewport){scrollToMarker(marker,viewHeight,alignToTop===true,doc);}};const intoWindow=(doc,scrollTop,marker,alignToTop)=>{const viewHeight=defaultView(doc).dom.innerHeight;intoWindowIfNeeded(doc,scrollTop,viewHeight,marker,alignToTop);};const intoFrame=(doc,scrollTop,marker,alignToTop)=>{const frameViewHeight=defaultView(doc).dom.innerHeight;intoWindowIfNeeded(doc,scrollTop,frameViewHeight,marker,alignToTop);const op=find(marker.element);const viewportBounds=getBounds(window);if(op.top<viewportBounds.y){intoView(marker.element,alignToTop!==false);}else if(op.top>viewportBounds.bottom){intoView(marker.element,alignToTop===true);}};const rangeIntoWindow=(editor,rng,alignToTop)=>withMarker(editor,intoWindow,rng,alignToTop);const elementIntoWindow=(editor,element,alignToTop)=>withElement(editor,element,intoWindow,alignToTop);const rangeIntoFrame=(editor,rng,alignToTop)=>withMarker(editor,intoFrame,rng,alignToTop);const elementIntoFrame=(editor,element,alignToTop)=>withElement(editor,element,intoFrame,alignToTop);const scrollElementIntoView=(editor,element,alignToTop)=>{const scroller=editor.inline?elementIntoWindow:elementIntoFrame;scroller(editor,element,alignToTop);};const scrollRangeIntoView=(editor,rng,alignToTop)=>{const scroller=editor.inline?rangeIntoWindow:rangeIntoFrame;scroller(editor,rng,alignToTop);};const focus$1=element=>element.dom.focus();const hasFocus$1=element=>{const root=getRootNode(element).dom;return element.dom===root.activeElement;};const active$1=(root=getDocument())=>Optional.from(root.dom.activeElement).map(SugarElement.fromDom);const search=element=>active$1(getRootNode(element)).filter(e=>element.dom.contains(e.dom));const clamp$1=(offset,element)=>{const max=isText$b(element)?get$3(element).length:children(element).length+1;if(offset>max){return max;}else if(offset<0){return 0;}return offset;};const normalizeRng=rng=>SimSelection.range(rng.start,clamp$1(rng.soffset,rng.start),rng.finish,clamp$1(rng.foffset,rng.finish));const isOrContains=(root,elm)=>!isRestrictedNode(elm.dom)&&(contains(root,elm)||eq(root,elm));const isRngInRoot=root=>rng=>isOrContains(root,rng.start)&&isOrContains(root,rng.finish);const shouldStore=editor=>editor.inline;const nativeRangeToSelectionRange=r=>SimSelection.range(SugarElement.fromDom(r.startContainer),r.startOffset,SugarElement.fromDom(r.endContainer),r.endOffset);const readRange=win=>{const selection=win.getSelection();const rng=!selection||selection.rangeCount===0?Optional.none():Optional.from(selection.getRangeAt(0));return rng.map(nativeRangeToSelectionRange);};const getBookmark=root=>{const win=defaultView(root);return readRange(win.dom).filter(isRngInRoot(root));};const validate=(root,bookmark)=>Optional.from(bookmark).filter(isRngInRoot(root)).map(normalizeRng);const bookmarkToNativeRng=bookmark=>{const rng=document.createRange();try{rng.setStart(bookmark.start.dom,bookmark.soffset);rng.setEnd(bookmark.finish.dom,bookmark.foffset);return Optional.some(rng);}catch(_){return Optional.none();}};const store=editor=>{const newBookmark=shouldStore(editor)?getBookmark(SugarElement.fromDom(editor.getBody())):Optional.none();editor.bookmark=newBookmark.isSome()?newBookmark:editor.bookmark;};const getRng=editor=>{const bookmark=editor.bookmark?editor.bookmark:Optional.none();return bookmark.bind(x=>validate(SugarElement.fromDom(editor.getBody()),x)).bind(bookmarkToNativeRng);};const restore=editor=>{getRng(editor).each(rng=>editor.selection.setRng(rng));};const isEditorUIElement$1=elm=>{const className=elm.className.toString();return className.indexOf('tox-')!==-1||className.indexOf('mce-')!==-1;};const FocusManager={isEditorUIElement:isEditorUIElement$1};const wrappedSetTimeout=(callback,time)=>{if(!isNumber(time)){time=0;}return setTimeout(callback,time);};const wrappedSetInterval=(callback,time)=>{if(!isNumber(time)){time=0;}return setInterval(callback,time);};const Delay={setEditorTimeout:(editor,callback,time)=>{return wrappedSetTimeout(()=>{if(!editor.removed){callback();}},time);},setEditorInterval:(editor,callback,time)=>{const timer=wrappedSetInterval(()=>{if(!editor.removed){callback();}else{clearInterval(timer);}},time);return timer;}};const isManualNodeChange=e=>{return e.type==='nodechange'&&e.selectionChange;};const registerPageMouseUp=(editor,throttledStore)=>{const mouseUpPage=()=>{throttledStore.throttle();};DOMUtils.DOM.bind(document,'mouseup',mouseUpPage);editor.on('remove',()=>{DOMUtils.DOM.unbind(document,'mouseup',mouseUpPage);});};const registerMouseUp=(editor,throttledStore)=>{editor.on('mouseup touchend',_e=>{throttledStore.throttle();});};const registerEditorEvents=(editor,throttledStore)=>{registerMouseUp(editor,throttledStore);editor.on('keyup NodeChange AfterSetSelectionRange',e=>{if(!isManualNodeChange(e)){store(editor);}});};const register$6=editor=>{const throttledStore=first$1(()=>{store(editor);},0);editor.on('init',()=>{if(editor.inline){registerPageMouseUp(editor,throttledStore);}registerEditorEvents(editor,throttledStore);});editor.on('remove',()=>{throttledStore.cancel();});};let documentFocusInHandler;const DOM$9=DOMUtils.DOM;const isEditorUIElement=elm=>{return isElement$6(elm)&&FocusManager.isEditorUIElement(elm);};const isEditorContentAreaElement=elm=>{const classList=elm.classList;if(classList!==undefined){return classList.contains('tox-edit-area')||classList.contains('tox-edit-area__iframe')||classList.contains('mce-content-body');}else{return false;}};const isUIElement=(editor,elm)=>{const customSelector=getCustomUiSelector(editor);const parent=DOM$9.getParent(elm,elm=>{return isEditorUIElement(elm)||(customSelector?editor.dom.is(elm,customSelector):false);});return parent!==null;};const getActiveElement=editor=>{try{const root=getRootNode(SugarElement.fromDom(editor.getElement()));return active$1(root).fold(()=>document.body,x=>x.dom);}catch(ex){return document.body;}};const registerEvents$1=(editorManager,e)=>{const editor=e.editor;register$6(editor);editor.on('focusin',()=>{const focusedEditor=editorManager.focusedEditor;if(focusedEditor!==editor){if(focusedEditor){focusedEditor.dispatch('blur',{focusedEditor:editor});}editorManager.setActive(editor);editorManager.focusedEditor=editor;editor.dispatch('focus',{blurredEditor:focusedEditor});editor.focus(true);}});editor.on('focusout',()=>{Delay.setEditorTimeout(editor,()=>{const focusedEditor=editorManager.focusedEditor;if(!isUIElement(editor,getActiveElement(editor))&&focusedEditor===editor){editor.dispatch('blur',{focusedEditor:null});editorManager.focusedEditor=null;}});});if(!documentFocusInHandler){documentFocusInHandler=e=>{const activeEditor=editorManager.activeEditor;if(activeEditor){getOriginalEventTarget(e).each(target=>{const elem=target;if(elem.ownerDocument===document){if(elem!==document.body&&!isUIElement(activeEditor,elem)&&editorManager.focusedEditor===activeEditor){activeEditor.dispatch('blur',{focusedEditor:null});editorManager.focusedEditor=null;}}});}};DOM$9.bind(document,'focusin',documentFocusInHandler);}};const unregisterDocumentEvents=(editorManager,e)=>{if(editorManager.focusedEditor===e.editor){editorManager.focusedEditor=null;}if(!editorManager.activeEditor&&documentFocusInHandler){DOM$9.unbind(document,'focusin',documentFocusInHandler);documentFocusInHandler=null;}};const setup$v=editorManager=>{editorManager.on('AddEditor',curry(registerEvents$1,editorManager));editorManager.on('RemoveEditor',curry(unregisterDocumentEvents,editorManager));};const getContentEditableHost=(editor,node)=>editor.dom.getParent(node,node=>editor.dom.getContentEditable(node)==='true');const getCollapsedNode=rng=>rng.collapsed?Optional.from(getNode$1(rng.startContainer,rng.startOffset)).map(SugarElement.fromDom):Optional.none();const getFocusInElement=(root,rng)=>getCollapsedNode(rng).bind(node=>{if(isTableSection(node)){return Optional.some(node);}else if(!contains(root,node)){return Optional.some(root);}else{return Optional.none();}});const normalizeSelection=(editor,rng)=>{getFocusInElement(SugarElement.fromDom(editor.getBody()),rng).bind(elm=>{return firstPositionIn(elm.dom);}).fold(()=>{editor.selection.normalize();},caretPos=>editor.selection.setRng(caretPos.toRange()));};const focusBody=body=>{if(body.setActive){try{body.setActive();}catch(ex){body.focus();}}else{body.focus();}};const hasElementFocus=elm=>hasFocus$1(elm)||search(elm).isSome();const hasIframeFocus=editor=>isNonNullable(editor.iframeElement)&&hasFocus$1(SugarElement.fromDom(editor.iframeElement));const hasInlineFocus=editor=>{const rawBody=editor.getBody();return rawBody&&hasElementFocus(SugarElement.fromDom(rawBody));};const hasUiFocus=editor=>{const dos=getRootNode(SugarElement.fromDom(editor.getElement()));return active$1(dos).filter(elem=>!isEditorContentAreaElement(elem.dom)&&isUIElement(editor,elem.dom)).isSome();};const hasFocus=editor=>editor.inline?hasInlineFocus(editor):hasIframeFocus(editor);const hasEditorOrUiFocus=editor=>hasFocus(editor)||hasUiFocus(editor);const focusEditor=editor=>{const selection=editor.selection;const body=editor.getBody();let rng=selection.getRng();editor.quirks.refreshContentEditable();if(isNonNullable(editor.bookmark)&&!hasFocus(editor)){getRng(editor).each(bookmarkRng=>{editor.selection.setRng(bookmarkRng);rng=bookmarkRng;});}const contentEditableHost=getContentEditableHost(editor,selection.getNode());if(contentEditableHost&&editor.dom.isChildOf(contentEditableHost,body)){focusBody(contentEditableHost);normalizeSelection(editor,rng);activateEditor(editor);return;}if(!editor.inline){if(!Env.browser.isOpera()){focusBody(body);}editor.getWin().focus();}if(Env.browser.isFirefox()||editor.inline){focusBody(body);normalizeSelection(editor,rng);}activateEditor(editor);};const activateEditor=editor=>editor.editorManager.setActive(editor);const focus=(editor,skipFocus)=>{if(editor.removed){return;}if(skipFocus){activateEditor(editor);}else{focusEditor(editor);}};const getEndpointElement=(root,rng,start,real,resolve)=>{const container=start?rng.startContainer:rng.endContainer;const offset=start?rng.startOffset:rng.endOffset;return Optional.from(container).map(SugarElement.fromDom).map(elm=>!real||!rng.collapsed?child$1(elm,resolve(elm,offset)).getOr(elm):elm).bind(elm=>isElement$7(elm)?Optional.some(elm):parent(elm).filter(isElement$7)).map(elm=>elm.dom).getOr(root);};const getStart=(root,rng,real=false)=>getEndpointElement(root,rng,true,real,(elm,offset)=>Math.min(childNodesCount(elm),offset));const getEnd$1=(root,rng,real=false)=>getEndpointElement(root,rng,false,real,(elm,offset)=>offset>0?offset-1:offset);const skipEmptyTextNodes=(node,forwards)=>{const orig=node;while(node&&isText$a(node)&&node.length===0){node=forwards?node.nextSibling:node.previousSibling;}return node||orig;};const getNode=(root,rng)=>{if(!rng){return root;}let startContainer=rng.startContainer;let endContainer=rng.endContainer;const startOffset=rng.startOffset;const endOffset=rng.endOffset;let node=rng.commonAncestorContainer;if(!rng.collapsed){if(startContainer===endContainer){if(endOffset-startOffset<2){if(startContainer.hasChildNodes()){node=startContainer.childNodes[startOffset];}}}if(isText$a(startContainer)&&isText$a(endContainer)){if(startContainer.length===startOffset){startContainer=skipEmptyTextNodes(startContainer.nextSibling,true);}else{startContainer=startContainer.parentNode;}if(endOffset===0){endContainer=skipEmptyTextNodes(endContainer.previousSibling,false);}else{endContainer=endContainer.parentNode;}if(startContainer&&startContainer===endContainer){node=startContainer;}}}const elm=isText$a(node)?node.parentNode:node;return isElement$6(elm)?elm:root;};const getSelectedBlocks=(dom,rng,startElm,endElm)=>{const selectedBlocks=[];const root=dom.getRoot();const start=dom.getParent(startElm||getStart(root,rng,rng.collapsed),dom.isBlock);const end=dom.getParent(endElm||getEnd$1(root,rng,rng.collapsed),dom.isBlock);if(start&&start!==root){selectedBlocks.push(start);}if(start&&end&&start!==end){let node=start;const walker=new DomTreeWalker(start,root);while((node=walker.next())&&node!==end){if(dom.isBlock(node)){selectedBlocks.push(node);}}}if(end&&start!==end&&end!==root){selectedBlocks.push(end);}return selectedBlocks;};const select=(dom,node,content)=>Optional.from(node).bind(node=>Optional.from(node.parentNode).map(parent=>{const idx=dom.nodeIndex(node);const rng=dom.createRng();rng.setStart(parent,idx);rng.setEnd(parent,idx+1);if(content){moveEndPoint(dom,rng,node,true);moveEndPoint(dom,rng,node,false);}return rng;}));const processRanges=(editor,ranges)=>map$3(ranges,range=>{const evt=editor.dispatch('GetSelectionRange',{range});return evt.range!==range?evt.range:range;});const getEnd=element=>name(element)==='img'?1:getOption(element).fold(()=>children(element).length,v=>v.length);const isTextNodeWithCursorPosition=el=>getOption(el).filter(text=>text.trim().length!==0||text.indexOf(nbsp)>-1).isSome();const elementsWithCursorPosition=['img','br'];const isCursorPosition=elem=>{const hasCursorPosition=isTextNodeWithCursorPosition(elem);return hasCursorPosition||contains$2(elementsWithCursorPosition,name(elem));};const first=element=>descendant$1(element,isCursorPosition);const last=element=>descendantRtl(element,isCursorPosition);const descendantRtl=(scope,predicate)=>{const descend=element=>{const children$1=children(element);for(let i=children$1.length-1;i>=0;i--){const child=children$1[i];if(predicate(child)){return Optional.some(child);}const res=descend(child);if(res.isSome()){return res;}}return Optional.none();};return descend(scope);};const autocompleteSelector='[data-mce-autocompleter]';const create$9=(editor,range)=>{if(findIn(SugarElement.fromDom(editor.getBody())).isNone()){const wrapper=SugarElement.fromHtml('<span data-mce-autocompleter=\"1\" data-mce-bogus=\"1\"></span>',editor.getDoc());append$1(wrapper,SugarElement.fromDom(range.extractContents()));range.insertNode(wrapper.dom);parent(wrapper).each(elm=>elm.dom.normalize());last(wrapper).map(last=>{editor.selection.setCursorLocation(last.dom,getEnd(last));});}};const detect$1=elm=>closest$3(elm,autocompleteSelector);const findIn=elm=>descendant(elm,autocompleteSelector);const remove$3=(editor,elm)=>findIn(elm).each(wrapper=>{const bookmark=editor.selection.getBookmark();unwrap(wrapper);editor.selection.moveToBookmark(bookmark);});const typeLookup={'#text':3,'#comment':8,'#cdata':4,'#pi':7,'#doctype':10,'#document-fragment':11};const walk$2=(node,root,prev)=>{const startName=prev?'lastChild':'firstChild';const siblingName=prev?'prev':'next';if(node[startName]){return node[startName];}if(node!==root){let sibling=node[siblingName];if(sibling){return sibling;}for(let parent=node.parent;parent&&parent!==root;parent=parent.parent){sibling=parent[siblingName];if(sibling){return sibling;}}}return undefined;};const isEmptyTextNode=node=>{var _a;const text=(_a=node.value)!==null&&_a!==void 0?_a:'';if(!isWhitespaceText(text)){return false;}const parentNode=node.parent;if(parentNode&&(parentNode.name!=='span'||parentNode.attr('style'))&&/^[ ]+$/.test(text)){return false;}return true;};const isNonEmptyElement=node=>{const isNamedAnchor=node.name==='a'&&!node.attr('href')&&node.attr('id');return node.attr('name')||node.attr('id')&&!node.firstChild||node.attr('data-mce-bookmark')||isNamedAnchor;};class AstNode{constructor(name,type){this.name=name;this.type=type;if(type===1){this.attributes=[];this.attributes.map={};}}static create(name,attrs){const node=new AstNode(name,typeLookup[name]||1);if(attrs){each$d(attrs,(value,attrName)=>{node.attr(attrName,value);});}return node;}replace(node){const self=this;if(node.parent){node.remove();}self.insert(node,self);self.remove();return self;}attr(name,value){const self=this;if(!isString(name)){if(isNonNullable(name)){each$d(name,(value,key)=>{self.attr(key,value);});}return self;}const attrs=self.attributes;if(attrs){if(value!==undefined){if(value===null){if(name in attrs.map){delete attrs.map[name];let i=attrs.length;while(i--){if(attrs[i].name===name){attrs.splice(i,1);return self;}}}return self;}if(name in attrs.map){let i=attrs.length;while(i--){if(attrs[i].name===name){attrs[i].value=value;break;}}}else{attrs.push({name,value});}attrs.map[name]=value;return self;}return attrs.map[name];}return undefined;}clone(){const self=this;const clone=new AstNode(self.name,self.type);const selfAttrs=self.attributes;if(selfAttrs){const cloneAttrs=[];cloneAttrs.map={};for(let i=0,l=selfAttrs.length;i<l;i++){const selfAttr=selfAttrs[i];if(selfAttr.name!=='id'){cloneAttrs[cloneAttrs.length]={name:selfAttr.name,value:selfAttr.value};cloneAttrs.map[selfAttr.name]=selfAttr.value;}}clone.attributes=cloneAttrs;}clone.value=self.value;return clone;}wrap(wrapper){const self=this;if(self.parent){self.parent.insert(wrapper,self);wrapper.append(self);}return self;}unwrap(){const self=this;for(let node=self.firstChild;node;){const next=node.next;self.insert(node,self,true);node=next;}self.remove();}remove(){const self=this,parent=self.parent,next=self.next,prev=self.prev;if(parent){if(parent.firstChild===self){parent.firstChild=next;if(next){next.prev=null;}}else if(prev){prev.next=next;}if(parent.lastChild===self){parent.lastChild=prev;if(prev){prev.next=null;}}else if(next){next.prev=prev;}self.parent=self.next=self.prev=null;}return self;}append(node){const self=this;if(node.parent){node.remove();}const last=self.lastChild;if(last){last.next=node;node.prev=last;self.lastChild=node;}else{self.lastChild=self.firstChild=node;}node.parent=self;return node;}insert(node,refNode,before){if(node.parent){node.remove();}const parent=refNode.parent||this;if(before){if(refNode===parent.firstChild){parent.firstChild=node;}else if(refNode.prev){refNode.prev.next=node;}node.prev=refNode.prev;node.next=refNode;refNode.prev=node;}else{if(refNode===parent.lastChild){parent.lastChild=node;}else if(refNode.next){refNode.next.prev=node;}node.next=refNode.next;node.prev=refNode;refNode.next=node;}node.parent=parent;return node;}getAll(name){const self=this;const collection=[];for(let node=self.firstChild;node;node=walk$2(node,self)){if(node.name===name){collection.push(node);}}return collection;}children(){const self=this;const collection=[];for(let node=self.firstChild;node;node=node.next){collection.push(node);}return collection;}empty(){const self=this;if(self.firstChild){const nodes=[];for(let node=self.firstChild;node;node=walk$2(node,self)){nodes.push(node);}let i=nodes.length;while(i--){const node=nodes[i];node.parent=node.firstChild=node.lastChild=node.next=node.prev=null;}}self.firstChild=self.lastChild=null;return self;}isEmpty(elements,whitespace={},predicate){var _a;const self=this;let node=self.firstChild;if(isNonEmptyElement(self)){return false;}if(node){do{if(node.type===1){if(node.attr('data-mce-bogus')){continue;}if(elements[node.name]){return false;}if(isNonEmptyElement(node)){return false;}}if(node.type===8){return false;}if(node.type===3&&!isEmptyTextNode(node)){return false;}if(node.type===3&&node.parent&&whitespace[node.parent.name]&&isWhitespaceText((_a=node.value)!==null&&_a!==void 0?_a:'')){return false;}if(predicate&&predicate(node)){return false;}}while(node=walk$2(node,self));}return true;}walk(prev){return walk$2(this,null,prev);}}const isConditionalComment=(html,startIndex)=>/^\\s*\\[if [\\w\\W]+\\]>.*<!\\[endif\\](--!?)?>/.test(html.substr(startIndex));const findCommentEndIndex=(html,isBogus,startIndex=0)=>{const lcHtml=html.toLowerCase();if(lcHtml.indexOf('[if ',startIndex)!==-1&&isConditionalComment(lcHtml,startIndex)){const endIfIndex=lcHtml.indexOf('[endif]',startIndex);return lcHtml.indexOf('>',endIfIndex);}else{if(isBogus){const endIndex=lcHtml.indexOf('>',startIndex);return endIndex!==-1?endIndex:lcHtml.length;}else{const endCommentRegexp=/--!?>/g;endCommentRegexp.lastIndex=startIndex;const match=endCommentRegexp.exec(html);return match?match.index+match[0].length:lcHtml.length;}}};const findMatchingEndTagIndex=(schema,html,startIndex)=>{const startTagRegExp=/<([!?\\/])?([A-Za-z0-9\\-_:.]+)/g;const endTagRegExp=/(?:\\s(?:[^'\">]+(?:\"[^\"]*\"|'[^']*'))*[^\"'>]*(?:\"[^\">]*|'[^'>]*)?|\\s*|\\/)>/g;const voidElements=schema.getVoidElements();let count=1,index=startIndex;while(count!==0){startTagRegExp.lastIndex=index;while(true){const startMatch=startTagRegExp.exec(html);if(startMatch===null){return index;}else if(startMatch[1]==='!'){if(startsWith(startMatch[2],'--')){index=findCommentEndIndex(html,false,startMatch.index+'!--'.length);}else{index=findCommentEndIndex(html,true,startMatch.index+1);}break;}else{endTagRegExp.lastIndex=startTagRegExp.lastIndex;const endMatch=endTagRegExp.exec(html);if(isNull(endMatch)||endMatch.index!==startTagRegExp.lastIndex){continue;}if(startMatch[1]==='/'){count-=1;}else if(!has$2(voidElements,startMatch[2])){count+=1;}index=startTagRegExp.lastIndex+endMatch[0].length;break;}}}return index;};const trimHtml$1=(tempAttrs,html)=>{const trimContentRegExp=new RegExp(['\\\\s?('+tempAttrs.join('|')+')=\"[^\"]+\"'].join('|'),'gi');return html.replace(trimContentRegExp,'');};const trimInternal=(serializer,html)=>{const bogusAllRegExp=/<(\\w+) [^>]*data-mce-bogus=\"all\"[^>]*>/g;const schema=serializer.schema;let content=trimHtml$1(serializer.getTempAttrs(),html);const voidElements=schema.getVoidElements();let matches;while(matches=bogusAllRegExp.exec(content)){const index=bogusAllRegExp.lastIndex;const matchLength=matches[0].length;let endTagIndex;if(voidElements[matches[1]]){endTagIndex=index;}else{endTagIndex=findMatchingEndTagIndex(schema,content,index);}content=content.substring(0,index-matchLength)+content.substring(endTagIndex);bogusAllRegExp.lastIndex=index-matchLength;}return trim$1(content);};const trimExternal=trimInternal;const trimEmptyContents=(editor,html)=>{const blockName=getForcedRootBlock(editor);const emptyRegExp=new RegExp(`^(<${blockName}[^>]*>(&nbsp;|&#160;|\\\\s|\\u00a0|<br \\\\/>|)<\\\\/${blockName}>[\\r\\n]*|<br \\\\/>[\\r\\n]*)$`);return html.replace(emptyRegExp,'');};const getPlainTextContent=(editor,body)=>{const doc=editor.getDoc();const dos=getRootNode(SugarElement.fromDom(editor.getBody()));const offscreenDiv=SugarElement.fromTag('div',doc);set$2(offscreenDiv,'data-mce-bogus','all');setAll(offscreenDiv,{position:'fixed',left:'-9999999px',top:'0'});set(offscreenDiv,body.innerHTML);const bogusElements=descendants(offscreenDiv,'[data-mce-bogus]');each$e(bogusElements,elem=>{const bogusValue=get$9(elem,'data-mce-bogus');if(bogusValue==='all'){remove$6(elem);}else if(isBr$5(elem)){before$3(elem,SugarElement.fromText(zeroWidth));remove$6(elem);}else{unwrap(elem);}});const root=getContentContainer(dos);append$1(root,offscreenDiv);const content=trim$1(offscreenDiv.dom.innerText);remove$6(offscreenDiv);return content;};const getContentFromBody=(editor,args,body)=>{let content;if(args.format==='raw'){content=Tools.trim(trimExternal(editor.serializer,body.innerHTML));}else if(args.format==='text'){content=getPlainTextContent(editor,body);}else if(args.format==='tree'){content=editor.serializer.serialize(body,args);}else{content=trimEmptyContents(editor,editor.serializer.serialize(body,args));}const shouldTrim=args.format!=='text'&&!isWsPreserveElement(SugarElement.fromDom(body));return shouldTrim&&isString(content)?Tools.trim(content):content;};const getContentInternal=(editor,args)=>Optional.from(editor.getBody()).fold(constant(args.format==='tree'?new AstNode('body',11):''),body=>getContentFromBody(editor,args,body));const makeMap$1=Tools.makeMap;const Writer=settings=>{const html=[];settings=settings||{};const indent=settings.indent;const indentBefore=makeMap$1(settings.indent_before||'');const indentAfter=makeMap$1(settings.indent_after||'');const encode=Entities.getEncodeFunc(settings.entity_encoding||'raw',settings.entities);const htmlOutput=settings.element_format!=='xhtml';return{start:(name,attrs,empty)=>{if(indent&&indentBefore[name]&&html.length>0){const value=html[html.length-1];if(value.length>0&&value!=='\\n'){html.push('\\n');}}html.push('<',name);if(attrs){for(let i=0,l=attrs.length;i<l;i++){const attr=attrs[i];html.push(' ',attr.name,'=\"',encode(attr.value,true),'\"');}}if(!empty||htmlOutput){html[html.length]='>';}else{html[html.length]=' />';}if(empty&&indent&&indentAfter[name]&&html.length>0){const value=html[html.length-1];if(value.length>0&&value!=='\\n'){html.push('\\n');}}},end:name=>{let value;html.push('</',name,'>');if(indent&&indentAfter[name]&&html.length>0){value=html[html.length-1];if(value.length>0&&value!=='\\n'){html.push('\\n');}}},text:(text,raw)=>{if(text.length>0){html[html.length]=raw?text:encode(text);}},cdata:text=>{html.push('<![CDATA[',text,']]>');},comment:text=>{html.push('<!--',text,'-->');},pi:(name,text)=>{if(text){html.push('<?',name,' ',encode(text),'?>');}else{html.push('<?',name,'?>');}if(indent){html.push('\\n');}},doctype:text=>{html.push('<!DOCTYPE',text,'>',indent?'\\n':'');},reset:()=>{html.length=0;},getContent:()=>{return html.join('').replace(/\\n$/,'');}};};const HtmlSerializer=(settings={},schema=Schema())=>{const writer=Writer(settings);settings.validate='validate'in settings?settings.validate:true;const serialize=node=>{const validate=settings.validate;const handlers={3:node=>{var _a;writer.text((_a=node.value)!==null&&_a!==void 0?_a:'',node.raw);},8:node=>{var _a;writer.comment((_a=node.value)!==null&&_a!==void 0?_a:'');},7:node=>{writer.pi(node.name,node.value);},10:node=>{var _a;writer.doctype((_a=node.value)!==null&&_a!==void 0?_a:'');},4:node=>{var _a;writer.cdata((_a=node.value)!==null&&_a!==void 0?_a:'');},11:node=>{let tempNode=node;if(tempNode=tempNode.firstChild){do{walk(tempNode);}while(tempNode=tempNode.next);}}};writer.reset();const walk=node=>{var _a;const handler=handlers[node.type];if(!handler){const name=node.name;const isEmpty=(name in schema.getVoidElements());let attrs=node.attributes;if(validate&&attrs&&attrs.length>1){const sortedAttrs=[];sortedAttrs.map={};const elementRule=schema.getElementRule(node.name);if(elementRule){for(let i=0,l=elementRule.attributesOrder.length;i<l;i++){const attrName=elementRule.attributesOrder[i];if(attrName in attrs.map){const attrValue=attrs.map[attrName];sortedAttrs.map[attrName]=attrValue;sortedAttrs.push({name:attrName,value:attrValue});}}for(let i=0,l=attrs.length;i<l;i++){const attrName=attrs[i].name;if(!(attrName in sortedAttrs.map)){const attrValue=attrs.map[attrName];sortedAttrs.map[attrName]=attrValue;sortedAttrs.push({name:attrName,value:attrValue});}}attrs=sortedAttrs;}}writer.start(name,attrs,isEmpty);if(!isEmpty){let child=node.firstChild;if(child){if((name==='pre'||name==='textarea')&&child.type===3&&((_a=child.value)===null||_a===void 0?void 0:_a[0])==='\\n'){writer.text('\\n',true);}do{walk(child);}while(child=child.next);}writer.end(name);}}else{handler(node);}};if(node.type===1&&!settings.inner){walk(node);}else if(node.type===3){handlers[3](node);}else{handlers[11](node);}return writer.getContent();};return{serialize};};const nonInheritableStyles=new Set();(()=>{const nonInheritableStylesArr=['margin','margin-left','margin-right','margin-top','margin-bottom','padding','padding-left','padding-right','padding-top','padding-bottom','border','border-width','border-style','border-color','background','background-attachment','background-clip','background-color','background-image','background-origin','background-position','background-repeat','background-size','float','position','left','right','top','bottom','z-index','display','transform','width','max-width','min-width','height','max-height','min-height','overflow','overflow-x','overflow-y','text-overflow','vertical-align','transition','transition-delay','transition-duration','transition-property','transition-timing-function'];each$e(nonInheritableStylesArr,style=>{nonInheritableStyles.add(style);});})();const shorthandStyleProps=['font','text-decoration','text-emphasis'];const getStyleProps=(dom,node)=>keys(dom.parseStyle(dom.getAttrib(node,'style')));const isNonInheritableStyle=style=>nonInheritableStyles.has(style);const hasInheritableStyles=(dom,node)=>forall(getStyleProps(dom,node),style=>!isNonInheritableStyle(style));const getLonghandStyleProps=styles=>filter$5(styles,style=>exists(shorthandStyleProps,prop=>startsWith(style,prop)));const hasStyleConflict=(dom,node,parentNode)=>{const nodeStyleProps=getStyleProps(dom,node);const parentNodeStyleProps=getStyleProps(dom,parentNode);const valueMismatch=prop=>{var _a,_b;const nodeValue=(_a=dom.getStyle(node,prop))!==null&&_a!==void 0?_a:'';const parentValue=(_b=dom.getStyle(parentNode,prop))!==null&&_b!==void 0?_b:'';return isNotEmpty(nodeValue)&&isNotEmpty(parentValue)&&nodeValue!==parentValue;};return exists(nodeStyleProps,nodeStyleProp=>{const propExists=props=>exists(props,prop=>prop===nodeStyleProp);if(!propExists(parentNodeStyleProps)&&propExists(shorthandStyleProps)){const longhandProps=getLonghandStyleProps(parentNodeStyleProps);return exists(longhandProps,valueMismatch);}else{return valueMismatch(nodeStyleProp);}});};const isChar=(forward,predicate,pos)=>Optional.from(pos.container()).filter(isText$a).exists(text=>{const delta=forward?0:-1;return predicate(text.data.charAt(pos.offset()+delta));});const isBeforeSpace=curry(isChar,true,isWhiteSpace);const isAfterSpace=curry(isChar,false,isWhiteSpace);const isEmptyText=pos=>{const container=pos.container();return isText$a(container)&&(container.data.length===0||isZwsp(container.data)&&BookmarkManager.isBookmarkNode(container.parentNode));};const matchesElementPosition=(before,predicate)=>pos=>getChildNodeAtRelativeOffset(before?0:-1,pos).filter(predicate).isSome();const isImageBlock=node=>isImg(node)&&get$7(SugarElement.fromDom(node),'display')==='block';const isCefNode=node=>isContentEditableFalse$a(node)&&!isBogusAll$1(node);const isBeforeImageBlock=matchesElementPosition(true,isImageBlock);const isAfterImageBlock=matchesElementPosition(false,isImageBlock);const isBeforeMedia=matchesElementPosition(true,isMedia$2);const isAfterMedia=matchesElementPosition(false,isMedia$2);const isBeforeTable=matchesElementPosition(true,isTable$2);const isAfterTable=matchesElementPosition(false,isTable$2);const isBeforeContentEditableFalse=matchesElementPosition(true,isCefNode);const isAfterContentEditableFalse=matchesElementPosition(false,isCefNode);const dropLast=xs=>xs.slice(0,-1);const parentsUntil=(start,root,predicate)=>{if(contains(root,start)){return dropLast(parents$1(start,elm=>{return predicate(elm)||eq(elm,root);}));}else{return[];}};const parents=(start,root)=>parentsUntil(start,root,never);const parentsAndSelf=(start,root)=>[start].concat(parents(start,root));const navigateIgnoreEmptyTextNodes=(forward,root,from)=>navigateIgnore(forward,root,from,isEmptyText);const getClosestBlock$1=(root,pos)=>find$2(parentsAndSelf(SugarElement.fromDom(pos.container()),root),isBlock$2);const isAtBeforeAfterBlockBoundary=(forward,root,pos)=>navigateIgnoreEmptyTextNodes(forward,root.dom,pos).forall(newPos=>getClosestBlock$1(root,pos).fold(()=>!isInSameBlock(newPos,pos,root.dom),fromBlock=>!isInSameBlock(newPos,pos,root.dom)&&contains(fromBlock,SugarElement.fromDom(newPos.container()))));const isAtBlockBoundary=(forward,root,pos)=>getClosestBlock$1(root,pos).fold(()=>navigateIgnoreEmptyTextNodes(forward,root.dom,pos).forall(newPos=>!isInSameBlock(newPos,pos,root.dom)),parent=>navigateIgnoreEmptyTextNodes(forward,parent.dom,pos).isNone());const isAtStartOfBlock=curry(isAtBlockBoundary,false);const isAtEndOfBlock=curry(isAtBlockBoundary,true);const isBeforeBlock=curry(isAtBeforeAfterBlockBoundary,false);const isAfterBlock=curry(isAtBeforeAfterBlockBoundary,true);const isBr$1=pos=>getElementFromPosition(pos).exists(isBr$5);const findBr=(forward,root,pos)=>{const parentBlocks=filter$5(parentsAndSelf(SugarElement.fromDom(pos.container()),root),isBlock$2);const scope=head(parentBlocks).getOr(root);return fromPosition(forward,scope.dom,pos).filter(isBr$1);};const isBeforeBr$1=(root,pos)=>getElementFromPosition(pos).exists(isBr$5)||findBr(true,root,pos).isSome();const isAfterBr=(root,pos)=>getElementFromPrevPosition(pos).exists(isBr$5)||findBr(false,root,pos).isSome();const findPreviousBr=curry(findBr,false);const findNextBr=curry(findBr,true);const isInMiddleOfText=pos=>CaretPosition.isTextPosition(pos)&&!pos.isAtStart()&&!pos.isAtEnd();const getClosestBlock=(root,pos)=>{const parentBlocks=filter$5(parentsAndSelf(SugarElement.fromDom(pos.container()),root),isBlock$2);return head(parentBlocks).getOr(root);};const hasSpaceBefore=(root,pos)=>{if(isInMiddleOfText(pos)){return isAfterSpace(pos);}else{return isAfterSpace(pos)||prevPosition(getClosestBlock(root,pos).dom,pos).exists(isAfterSpace);}};const hasSpaceAfter=(root,pos)=>{if(isInMiddleOfText(pos)){return isBeforeSpace(pos);}else{return isBeforeSpace(pos)||nextPosition(getClosestBlock(root,pos).dom,pos).exists(isBeforeSpace);}};const isPreValue=value=>contains$2(['pre','pre-wrap'],value);const isInPre=pos=>getElementFromPosition(pos).bind(elm=>closest$4(elm,isElement$7)).exists(elm=>isPreValue(get$7(elm,'white-space')));const isAtBeginningOfBody=(root,pos)=>prevPosition(root.dom,pos).isNone();const isAtEndOfBody=(root,pos)=>nextPosition(root.dom,pos).isNone();const isAtLineBoundary=(root,pos)=>isAtBeginningOfBody(root,pos)||isAtEndOfBody(root,pos)||isAtStartOfBlock(root,pos)||isAtEndOfBlock(root,pos)||isAfterBr(root,pos)||isBeforeBr$1(root,pos);const isCefBlock=node=>isNonNullable(node)&&isContentEditableFalse$a(node)&&isBlockLike(node);const isSiblingCefBlock=(root,direction)=>container=>{return isCefBlock(new DomTreeWalker(container,root)[direction]());};const isBeforeCefBlock=(root,pos)=>{const nextPos=nextPosition(root.dom,pos).getOr(pos);const isNextCefBlock=isSiblingCefBlock(root.dom,'next');return pos.isAtEnd()&&(isNextCefBlock(pos.container())||isNextCefBlock(nextPos.container()));};const isAfterCefBlock=(root,pos)=>{const prevPos=prevPosition(root.dom,pos).getOr(pos);const isPrevCefBlock=isSiblingCefBlock(root.dom,'prev');return pos.isAtStart()&&(isPrevCefBlock(pos.container())||isPrevCefBlock(prevPos.container()));};const needsToHaveNbsp=(root,pos)=>{if(isInPre(pos)){return false;}else{return isAtLineBoundary(root,pos)||hasSpaceBefore(root,pos)||hasSpaceAfter(root,pos);}};const needsToBeNbspLeft=(root,pos)=>{if(isInPre(pos)){return false;}else{return isAtStartOfBlock(root,pos)||isBeforeBlock(root,pos)||isAfterBr(root,pos)||hasSpaceBefore(root,pos)||isAfterCefBlock(root,pos);}};const leanRight=pos=>{const container=pos.container();const offset=pos.offset();if(isText$a(container)&&offset<container.data.length){return CaretPosition(container,offset+1);}else{return pos;}};const needsToBeNbspRight=(root,pos)=>{if(isInPre(pos)){return false;}else{return isAtEndOfBlock(root,pos)||isAfterBlock(root,pos)||isBeforeBr$1(root,pos)||hasSpaceAfter(root,pos)||isBeforeCefBlock(root,pos);}};const needsToBeNbsp=(root,pos)=>needsToBeNbspLeft(root,pos)||needsToBeNbspRight(root,leanRight(pos));const isNbspAt=(text,offset)=>isNbsp(text.charAt(offset));const isWhiteSpaceAt=(text,offset)=>isWhiteSpace(text.charAt(offset));const hasNbsp=pos=>{const container=pos.container();return isText$a(container)&&contains$1(container.data,nbsp);};const normalizeNbspMiddle=text=>{const chars=text.split('');return map$3(chars,(chr,i)=>{if(isNbsp(chr)&&i>0&&i<chars.length-1&&isContent(chars[i-1])&&isContent(chars[i+1])){return' ';}else{return chr;}}).join('');};const normalizeNbspAtStart=(root,node,makeNbsp)=>{const text=node.data;const firstPos=CaretPosition(node,0);if(!makeNbsp&&isNbspAt(text,0)&&!needsToBeNbsp(root,firstPos)){node.data=' '+text.slice(1);return true;}else if(makeNbsp&&isWhiteSpaceAt(text,0)&&needsToBeNbspLeft(root,firstPos)){node.data=nbsp+text.slice(1);return true;}else{return false;}};const normalizeNbspInMiddleOfTextNode=node=>{const text=node.data;const newText=normalizeNbspMiddle(text);if(newText!==text){node.data=newText;return true;}else{return false;}};const normalizeNbspAtEnd=(root,node,makeNbsp)=>{const text=node.data;const lastPos=CaretPosition(node,text.length-1);if(!makeNbsp&&isNbspAt(text,text.length-1)&&!needsToBeNbsp(root,lastPos)){node.data=text.slice(0,-1)+' ';return true;}else if(makeNbsp&&isWhiteSpaceAt(text,text.length-1)&&needsToBeNbspRight(root,lastPos)){node.data=text.slice(0,-1)+nbsp;return true;}else{return false;}};const normalizeNbsps=(root,pos)=>{const container=pos.container();if(!isText$a(container)){return Optional.none();}if(hasNbsp(pos)){const normalized=normalizeNbspAtStart(root,container,false)||normalizeNbspInMiddleOfTextNode(container)||normalizeNbspAtEnd(root,container,false);return someIf(normalized,pos);}else if(needsToBeNbsp(root,pos)){const normalized=normalizeNbspAtStart(root,container,true)||normalizeNbspAtEnd(root,container,true);return someIf(normalized,pos);}else{return Optional.none();}};const normalizeNbspsInEditor=editor=>{const root=SugarElement.fromDom(editor.getBody());if(editor.selection.isCollapsed()){normalizeNbsps(root,CaretPosition.fromRangeStart(editor.selection.getRng())).each(pos=>{editor.selection.setRng(pos.toRange());});}};const normalize$1=(node,offset,count)=>{if(count===0){return;}const elm=SugarElement.fromDom(node);const root=ancestor$3(elm,isBlock$2).getOr(elm);const whitespace=node.data.slice(offset,offset+count);const isEndOfContent=offset+count>=node.data.length&&needsToBeNbspRight(root,CaretPosition(node,node.data.length));const isStartOfContent=offset===0&&needsToBeNbspLeft(root,CaretPosition(node,0));node.replaceData(offset,count,normalize$4(whitespace,4,isStartOfContent,isEndOfContent));};const normalizeWhitespaceAfter=(node,offset)=>{const content=node.data.slice(offset);const whitespaceCount=content.length-lTrim(content).length;normalize$1(node,offset,whitespaceCount);};const normalizeWhitespaceBefore=(node,offset)=>{const content=node.data.slice(0,offset);const whitespaceCount=content.length-rTrim(content).length;normalize$1(node,offset-whitespaceCount,whitespaceCount);};const mergeTextNodes=(prevNode,nextNode,normalizeWhitespace,mergeToPrev=true)=>{const whitespaceOffset=rTrim(prevNode.data).length;const newNode=mergeToPrev?prevNode:nextNode;const removeNode=mergeToPrev?nextNode:prevNode;if(mergeToPrev){newNode.appendData(removeNode.data);}else{newNode.insertData(0,removeNode.data);}remove$6(SugarElement.fromDom(removeNode));if(normalizeWhitespace){normalizeWhitespaceAfter(newNode,whitespaceOffset);}return newNode;};const needsReposition=(pos,elm)=>{const container=pos.container();const offset=pos.offset();return!CaretPosition.isTextPosition(pos)&&container===elm.parentNode&&offset>CaretPosition.before(elm).offset();};const reposition=(elm,pos)=>needsReposition(pos,elm)?CaretPosition(pos.container(),pos.offset()-1):pos;const beforeOrStartOf=node=>isText$a(node)?CaretPosition(node,0):CaretPosition.before(node);const afterOrEndOf=node=>isText$a(node)?CaretPosition(node,node.data.length):CaretPosition.after(node);const getPreviousSiblingCaretPosition=elm=>{if(isCaretCandidate$3(elm.previousSibling)){return Optional.some(afterOrEndOf(elm.previousSibling));}else{return elm.previousSibling?lastPositionIn(elm.previousSibling):Optional.none();}};const getNextSiblingCaretPosition=elm=>{if(isCaretCandidate$3(elm.nextSibling)){return Optional.some(beforeOrStartOf(elm.nextSibling));}else{return elm.nextSibling?firstPositionIn(elm.nextSibling):Optional.none();}};const findCaretPositionBackwardsFromElm=(rootElement,elm)=>{return Optional.from(elm.previousSibling?elm.previousSibling:elm.parentNode).bind(node=>prevPosition(rootElement,CaretPosition.before(node))).orThunk(()=>nextPosition(rootElement,CaretPosition.after(elm)));};const findCaretPositionForwardsFromElm=(rootElement,elm)=>nextPosition(rootElement,CaretPosition.after(elm)).orThunk(()=>prevPosition(rootElement,CaretPosition.before(elm)));const findCaretPositionBackwards=(rootElement,elm)=>getPreviousSiblingCaretPosition(elm).orThunk(()=>getNextSiblingCaretPosition(elm)).orThunk(()=>findCaretPositionBackwardsFromElm(rootElement,elm));const findCaretPositionForward=(rootElement,elm)=>getNextSiblingCaretPosition(elm).orThunk(()=>getPreviousSiblingCaretPosition(elm)).orThunk(()=>findCaretPositionForwardsFromElm(rootElement,elm));const findCaretPosition=(forward,rootElement,elm)=>forward?findCaretPositionForward(rootElement,elm):findCaretPositionBackwards(rootElement,elm);const findCaretPosOutsideElmAfterDelete=(forward,rootElement,elm)=>findCaretPosition(forward,rootElement,elm).map(curry(reposition,elm));const setSelection$1=(editor,forward,pos)=>{pos.fold(()=>{editor.focus();},pos=>{editor.selection.setRng(pos.toRange(),forward);});};const eqRawNode=rawNode=>elm=>elm.dom===rawNode;const isBlock=(editor,elm)=>elm&&has$2(editor.schema.getBlockElements(),name(elm));const paddEmptyBlock=elm=>{if(isEmpty$2(elm)){const br=SugarElement.fromHtml('<br data-mce-bogus=\"1\">');empty(elm);append$1(elm,br);return Optional.some(CaretPosition.before(br.dom));}else{return Optional.none();}};const deleteNormalized=(elm,afterDeletePosOpt,normalizeWhitespace)=>{const prevTextOpt=prevSibling(elm).filter(isText$b);const nextTextOpt=nextSibling(elm).filter(isText$b);remove$6(elm);return lift3(prevTextOpt,nextTextOpt,afterDeletePosOpt,(prev,next,pos)=>{const prevNode=prev.dom,nextNode=next.dom;const offset=prevNode.data.length;mergeTextNodes(prevNode,nextNode,normalizeWhitespace);return pos.container()===nextNode?CaretPosition(prevNode,offset):pos;}).orThunk(()=>{if(normalizeWhitespace){prevTextOpt.each(elm=>normalizeWhitespaceBefore(elm.dom,elm.dom.length));nextTextOpt.each(elm=>normalizeWhitespaceAfter(elm.dom,0));}return afterDeletePosOpt;});};const isInlineElement=(editor,element)=>has$2(editor.schema.getTextInlineElements(),name(element));const deleteElement$2=(editor,forward,elm,moveCaret=true)=>{const afterDeletePos=findCaretPosOutsideElmAfterDelete(forward,editor.getBody(),elm.dom);const parentBlock=ancestor$3(elm,curry(isBlock,editor),eqRawNode(editor.getBody()));const normalizedAfterDeletePos=deleteNormalized(elm,afterDeletePos,isInlineElement(editor,elm));if(editor.dom.isEmpty(editor.getBody())){editor.setContent('');editor.selection.setCursorLocation();}else{parentBlock.bind(paddEmptyBlock).fold(()=>{if(moveCaret){setSelection$1(editor,forward,normalizedAfterDeletePos);}},paddPos=>{if(moveCaret){setSelection$1(editor,forward,Optional.some(paddPos));}});}};const strongRtl=/[\\u0591-\\u07FF\\uFB1D-\\uFDFF\\uFE70-\\uFEFC]/;const hasStrongRtl=text=>strongRtl.test(text);const isInlineTarget=(editor,elm)=>is$1(SugarElement.fromDom(elm),getInlineBoundarySelector(editor));const isRtl=element=>{var _a;return DOMUtils.DOM.getStyle(element,'direction',true)==='rtl'||hasStrongRtl((_a=element.textContent)!==null&&_a!==void 0?_a:'');};const findInlineParents=(isInlineTarget,rootNode,pos)=>filter$5(DOMUtils.DOM.getParents(pos.container(),'*',rootNode),isInlineTarget);const findRootInline=(isInlineTarget,rootNode,pos)=>{const parents=findInlineParents(isInlineTarget,rootNode,pos);return Optional.from(parents[parents.length-1]);};const hasSameParentBlock=(rootNode,node1,node2)=>{const block1=getParentBlock$3(node1,rootNode);const block2=getParentBlock$3(node2,rootNode);return isNonNullable(block1)&&block1===block2;};const isAtZwsp=pos=>isBeforeInline(pos)||isAfterInline(pos);const normalizePosition=(forward,pos)=>{const container=pos.container(),offset=pos.offset();if(forward){if(isCaretContainerInline(container)){if(isText$a(container.nextSibling)){return CaretPosition(container.nextSibling,0);}else{return CaretPosition.after(container);}}else{return isBeforeInline(pos)?CaretPosition(container,offset+1):pos;}}else{if(isCaretContainerInline(container)){if(isText$a(container.previousSibling)){return CaretPosition(container.previousSibling,container.previousSibling.data.length);}else{return CaretPosition.before(container);}}else{return isAfterInline(pos)?CaretPosition(container,offset-1):pos;}}};const normalizeForwards=curry(normalizePosition,true);const normalizeBackwards=curry(normalizePosition,false);const execCommandIgnoreInputEvents=(editor,command)=>{const inputBlocker=e=>e.stopImmediatePropagation();editor.on('beforeinput input',inputBlocker,true);editor.getDoc().execCommand(command);editor.off('beforeinput input',inputBlocker);};const execEditorDeleteCommand=editor=>{editor.execCommand('delete');};const execNativeDeleteCommand=editor=>execCommandIgnoreInputEvents(editor,'Delete');const execNativeForwardDeleteCommand=editor=>execCommandIgnoreInputEvents(editor,'ForwardDelete');const isBeforeRoot=rootNode=>elm=>is$2(parent(elm),rootNode,eq);const isTextBlockOrListItem=element=>isTextBlock$2(element)||isListItem$1(element);const getParentBlock$2=(rootNode,elm)=>{if(contains(rootNode,elm)){return closest$4(elm,isTextBlockOrListItem,isBeforeRoot(rootNode));}else{return Optional.none();}};const paddEmptyBody=(editor,moveSelection=true)=>{if(editor.dom.isEmpty(editor.getBody())){editor.setContent('',{no_selection:!moveSelection});}};const willDeleteLastPositionInElement=(forward,fromPos,elm)=>lift2(firstPositionIn(elm),lastPositionIn(elm),(firstPos,lastPos)=>{const normalizedFirstPos=normalizePosition(true,firstPos);const normalizedLastPos=normalizePosition(false,lastPos);const normalizedFromPos=normalizePosition(false,fromPos);if(forward){return nextPosition(elm,normalizedFromPos).exists(nextPos=>nextPos.isEqual(normalizedLastPos)&&fromPos.isEqual(normalizedFirstPos));}else{return prevPosition(elm,normalizedFromPos).exists(prevPos=>prevPos.isEqual(normalizedFirstPos)&&fromPos.isEqual(normalizedLastPos));}}).getOr(true);const freefallRtl=root=>{const child=isComment$1(root)?prevSibling(root):lastChild(root);return child.bind(freefallRtl).orThunk(()=>Optional.some(root));};const deleteRangeContents=(editor,rng,root,moveSelection=true)=>{var _a;rng.deleteContents();const lastNode=freefallRtl(root).getOr(root);const lastBlock=SugarElement.fromDom((_a=editor.dom.getParent(lastNode.dom,editor.dom.isBlock))!==null&&_a!==void 0?_a:root.dom);if(lastBlock.dom===editor.getBody()){paddEmptyBody(editor,moveSelection);}else if(isEmpty$2(lastBlock)){fillWithPaddingBr(lastBlock);if(moveSelection){editor.selection.setCursorLocation(lastBlock.dom,0);}}if(!eq(root,lastBlock)){const additionalCleanupNodes=is$2(parent(lastBlock),root)?[]:siblings(lastBlock);each$e(additionalCleanupNodes.concat(children(root)),node=>{if(!eq(node,lastBlock)&&!contains(node,lastBlock)&&isEmpty$2(node)){remove$6(node);}});}};const isRootFromElement=root=>cur=>eq(root,cur);const getTableCells=table=>descendants(table,'td,th');const getTableDetailsFromRange=(rng,isRoot)=>{const getTable=node=>getClosestTable(SugarElement.fromDom(node),isRoot);const startTable=getTable(rng.startContainer);const endTable=getTable(rng.endContainer);const isStartInTable=startTable.isSome();const isEndInTable=endTable.isSome();const isSameTable=lift2(startTable,endTable,eq).getOr(false);const isMultiTable=!isSameTable&&isStartInTable&&isEndInTable;return{startTable,endTable,isStartInTable,isEndInTable,isSameTable,isMultiTable};};const tableCellRng=(start,end)=>({start,end});const tableSelection=(rng,table,cells)=>({rng,table,cells});const deleteAction=Adt.generate([{singleCellTable:['rng','cell']},{fullTable:['table']},{partialTable:['cells','outsideDetails']},{multiTable:['startTableCells','endTableCells','betweenRng']}]);const getClosestCell$1=(container,isRoot)=>closest$3(SugarElement.fromDom(container),'td,th',isRoot);const isExpandedCellRng=cellRng=>!eq(cellRng.start,cellRng.end);const getTableFromCellRng=(cellRng,isRoot)=>getClosestTable(cellRng.start,isRoot).bind(startParentTable=>getClosestTable(cellRng.end,isRoot).bind(endParentTable=>someIf(eq(startParentTable,endParentTable),startParentTable)));const isSingleCellTable=(cellRng,isRoot)=>!isExpandedCellRng(cellRng)&&getTableFromCellRng(cellRng,isRoot).exists(table=>{const rows=table.dom.rows;return rows.length===1&&rows[0].cells.length===1;});const getCellRng=(rng,isRoot)=>{const startCell=getClosestCell$1(rng.startContainer,isRoot);const endCell=getClosestCell$1(rng.endContainer,isRoot);return lift2(startCell,endCell,tableCellRng);};const getCellRangeFromStartTable=isRoot=>startCell=>getClosestTable(startCell,isRoot).bind(table=>last$3(getTableCells(table)).map(endCell=>tableCellRng(startCell,endCell)));const getCellRangeFromEndTable=isRoot=>endCell=>getClosestTable(endCell,isRoot).bind(table=>head(getTableCells(table)).map(startCell=>tableCellRng(startCell,endCell)));const getTableSelectionFromCellRng=isRoot=>cellRng=>getTableFromCellRng(cellRng,isRoot).map(table=>tableSelection(cellRng,table,getTableCells(table)));const getTableSelections=(cellRng,selectionDetails,rng,isRoot)=>{if(rng.collapsed||!cellRng.forall(isExpandedCellRng)){return Optional.none();}else if(selectionDetails.isSameTable){const sameTableSelection=cellRng.bind(getTableSelectionFromCellRng(isRoot));return Optional.some({start:sameTableSelection,end:sameTableSelection});}else{const startCell=getClosestCell$1(rng.startContainer,isRoot);const endCell=getClosestCell$1(rng.endContainer,isRoot);const startTableSelection=startCell.bind(getCellRangeFromStartTable(isRoot)).bind(getTableSelectionFromCellRng(isRoot));const endTableSelection=endCell.bind(getCellRangeFromEndTable(isRoot)).bind(getTableSelectionFromCellRng(isRoot));return Optional.some({start:startTableSelection,end:endTableSelection});}};const getCellIndex=(cells,cell)=>findIndex$2(cells,x=>eq(x,cell));const getSelectedCells=tableSelection=>lift2(getCellIndex(tableSelection.cells,tableSelection.rng.start),getCellIndex(tableSelection.cells,tableSelection.rng.end),(startIndex,endIndex)=>tableSelection.cells.slice(startIndex,endIndex+1));const isSingleCellTableContentSelected=(optCellRng,rng,isRoot)=>optCellRng.exists(cellRng=>isSingleCellTable(cellRng,isRoot)&&hasAllContentsSelected(cellRng.start,rng));const unselectCells=(rng,selectionDetails)=>{const{startTable,endTable}=selectionDetails;const otherContentRng=rng.cloneRange();startTable.each(table=>otherContentRng.setStartAfter(table.dom));endTable.each(table=>otherContentRng.setEndBefore(table.dom));return otherContentRng;};const handleSingleTable=(cellRng,selectionDetails,rng,isRoot)=>getTableSelections(cellRng,selectionDetails,rng,isRoot).bind(({start,end})=>start.or(end)).bind(tableSelection=>{const{isSameTable}=selectionDetails;const selectedCells=getSelectedCells(tableSelection).getOr([]);if(isSameTable&&tableSelection.cells.length===selectedCells.length){return Optional.some(deleteAction.fullTable(tableSelection.table));}else if(selectedCells.length>0){if(isSameTable){return Optional.some(deleteAction.partialTable(selectedCells,Optional.none()));}else{const otherContentRng=unselectCells(rng,selectionDetails);return Optional.some(deleteAction.partialTable(selectedCells,Optional.some({...selectionDetails,rng:otherContentRng})));}}else{return Optional.none();}});const handleMultiTable=(cellRng,selectionDetails,rng,isRoot)=>getTableSelections(cellRng,selectionDetails,rng,isRoot).bind(({start,end})=>{const startTableSelectedCells=start.bind(getSelectedCells).getOr([]);const endTableSelectedCells=end.bind(getSelectedCells).getOr([]);if(startTableSelectedCells.length>0&&endTableSelectedCells.length>0){const otherContentRng=unselectCells(rng,selectionDetails);return Optional.some(deleteAction.multiTable(startTableSelectedCells,endTableSelectedCells,otherContentRng));}else{return Optional.none();}});const getActionFromRange=(root,rng)=>{const isRoot=isRootFromElement(root);const optCellRng=getCellRng(rng,isRoot);const selectionDetails=getTableDetailsFromRange(rng,isRoot);if(isSingleCellTableContentSelected(optCellRng,rng,isRoot)){return optCellRng.map(cellRng=>deleteAction.singleCellTable(rng,cellRng.start));}else if(selectionDetails.isMultiTable){return handleMultiTable(optCellRng,selectionDetails,rng,isRoot);}else{return handleSingleTable(optCellRng,selectionDetails,rng,isRoot);}};const cleanCells=cells=>each$e(cells,cell=>{remove$b(cell,'contenteditable');fillWithPaddingBr(cell);});const getOutsideBlock=(editor,container)=>Optional.from(editor.dom.getParent(container,editor.dom.isBlock)).map(SugarElement.fromDom);const handleEmptyBlock=(editor,startInTable,emptyBlock)=>{emptyBlock.each(block=>{if(startInTable){remove$6(block);}else{fillWithPaddingBr(block);editor.selection.setCursorLocation(block.dom,0);}});};const deleteContentInsideCell=(editor,cell,rng,isFirstCellInSelection)=>{const insideTableRng=rng.cloneRange();if(isFirstCellInSelection){insideTableRng.setStart(rng.startContainer,rng.startOffset);insideTableRng.setEndAfter(cell.dom.lastChild);}else{insideTableRng.setStartBefore(cell.dom.firstChild);insideTableRng.setEnd(rng.endContainer,rng.endOffset);}deleteCellContents(editor,insideTableRng,cell,false).each(action=>action());};const collapseAndRestoreCellSelection=editor=>{const selectedCells=getCellsFromEditor(editor);const selectedNode=SugarElement.fromDom(editor.selection.getNode());if(isTableCell$3(selectedNode.dom)&&isEmpty$2(selectedNode)){editor.selection.setCursorLocation(selectedNode.dom,0);}else{editor.selection.collapse(true);}if(selectedCells.length>1&&exists(selectedCells,cell=>eq(cell,selectedNode))){set$2(selectedNode,'data-mce-selected','1');}};const emptySingleTableCells=(editor,cells,outsideDetails)=>Optional.some(()=>{const editorRng=editor.selection.getRng();const cellsToClean=outsideDetails.bind(({rng,isStartInTable})=>{const outsideBlock=getOutsideBlock(editor,isStartInTable?rng.endContainer:rng.startContainer);rng.deleteContents();handleEmptyBlock(editor,isStartInTable,outsideBlock.filter(isEmpty$2));const endPointCell=isStartInTable?cells[0]:cells[cells.length-1];deleteContentInsideCell(editor,endPointCell,editorRng,isStartInTable);if(!isEmpty$2(endPointCell)){return Optional.some(isStartInTable?cells.slice(1):cells.slice(0,-1));}else{return Optional.none();}}).getOr(cells);cleanCells(cellsToClean);collapseAndRestoreCellSelection(editor);});const emptyMultiTableCells=(editor,startTableCells,endTableCells,betweenRng)=>Optional.some(()=>{const rng=editor.selection.getRng();const startCell=startTableCells[0];const endCell=endTableCells[endTableCells.length-1];deleteContentInsideCell(editor,startCell,rng,true);deleteContentInsideCell(editor,endCell,rng,false);const startTableCellsToClean=isEmpty$2(startCell)?startTableCells:startTableCells.slice(1);const endTableCellsToClean=isEmpty$2(endCell)?endTableCells:endTableCells.slice(0,-1);cleanCells(startTableCellsToClean.concat(endTableCellsToClean));betweenRng.deleteContents();collapseAndRestoreCellSelection(editor);});const deleteCellContents=(editor,rng,cell,moveSelection=true)=>Optional.some(()=>{deleteRangeContents(editor,rng,cell,moveSelection);});const deleteTableElement=(editor,table)=>Optional.some(()=>deleteElement$2(editor,false,table));const deleteCellRange=(editor,rootElm,rng)=>getActionFromRange(rootElm,rng).bind(action=>action.fold(curry(deleteCellContents,editor),curry(deleteTableElement,editor),curry(emptySingleTableCells,editor),curry(emptyMultiTableCells,editor)));const deleteCaptionRange=(editor,caption)=>emptyElement(editor,caption);const deleteTableRange=(editor,rootElm,rng,startElm)=>getParentCaption(rootElm,startElm).fold(()=>deleteCellRange(editor,rootElm,rng),caption=>deleteCaptionRange(editor,caption));const deleteRange$2=(editor,startElm,selectedCells)=>{const rootNode=SugarElement.fromDom(editor.getBody());const rng=editor.selection.getRng();return selectedCells.length!==0?emptySingleTableCells(editor,selectedCells,Optional.none()):deleteTableRange(editor,rootNode,rng,startElm);};const getParentCell=(rootElm,elm)=>find$2(parentsAndSelf(elm,rootElm),isTableCell$2);const getParentCaption=(rootElm,elm)=>find$2(parentsAndSelf(elm,rootElm),isTag('caption'));const deleteBetweenCells=(editor,rootElm,forward,fromCell,from)=>navigate(forward,editor.getBody(),from).bind(to=>getParentCell(rootElm,SugarElement.fromDom(to.getNode())).bind(toCell=>eq(toCell,fromCell)?Optional.none():Optional.some(noop)));const emptyElement=(editor,elm)=>Optional.some(()=>{fillWithPaddingBr(elm);editor.selection.setCursorLocation(elm.dom,0);});const isDeleteOfLastCharPos=(fromCaption,forward,from,to)=>firstPositionIn(fromCaption.dom).bind(first=>lastPositionIn(fromCaption.dom).map(last=>forward?from.isEqual(first)&&to.isEqual(last):from.isEqual(last)&&to.isEqual(first))).getOr(true);const emptyCaretCaption=(editor,elm)=>emptyElement(editor,elm);const validateCaretCaption=(rootElm,fromCaption,to)=>getParentCaption(rootElm,SugarElement.fromDom(to.getNode())).fold(()=>Optional.some(noop),toCaption=>someIf(!eq(toCaption,fromCaption),noop));const deleteCaretInsideCaption=(editor,rootElm,forward,fromCaption,from)=>navigate(forward,editor.getBody(),from).fold(()=>Optional.some(noop),to=>isDeleteOfLastCharPos(fromCaption,forward,from,to)?emptyCaretCaption(editor,fromCaption):validateCaretCaption(rootElm,fromCaption,to));const deleteCaretCells=(editor,forward,rootElm,startElm)=>{const from=CaretPosition.fromRangeStart(editor.selection.getRng());return getParentCell(rootElm,startElm).bind(fromCell=>isEmpty$2(fromCell)?emptyElement(editor,fromCell):deleteBetweenCells(editor,rootElm,forward,fromCell,from));};const deleteCaretCaption=(editor,forward,rootElm,fromCaption)=>{const from=CaretPosition.fromRangeStart(editor.selection.getRng());return isEmpty$2(fromCaption)?emptyElement(editor,fromCaption):deleteCaretInsideCaption(editor,rootElm,forward,fromCaption,from);};const isNearTable=(forward,pos)=>forward?isBeforeTable(pos):isAfterTable(pos);const isBeforeOrAfterTable=(editor,forward)=>{const fromPos=CaretPosition.fromRangeStart(editor.selection.getRng());return isNearTable(forward,fromPos)||fromPosition(forward,editor.getBody(),fromPos).exists(pos=>isNearTable(forward,pos));};const deleteCaret$3=(editor,forward,startElm)=>{const rootElm=SugarElement.fromDom(editor.getBody());return getParentCaption(rootElm,startElm).fold(()=>deleteCaretCells(editor,forward,rootElm,startElm).orThunk(()=>someIf(isBeforeOrAfterTable(editor,forward),noop)),fromCaption=>deleteCaretCaption(editor,forward,rootElm,fromCaption));};const backspaceDelete$9=(editor,forward)=>{const startElm=SugarElement.fromDom(editor.selection.getStart(true));const cells=getCellsFromEditor(editor);return editor.selection.isCollapsed()&&cells.length===0?deleteCaret$3(editor,forward,startElm):deleteRange$2(editor,startElm,cells);};const getContentEditableRoot$1=(root,node)=>{let tempNode=node;while(tempNode&&tempNode!==root){if(isContentEditableTrue$3(tempNode)||isContentEditableFalse$a(tempNode)){return tempNode;}tempNode=tempNode.parentNode;}return null;};const internalAttributesPrefixes=['data-ephox-','data-mce-','data-alloy-','data-snooker-','_'];const each$9=Tools.each;const ElementUtils=editor=>{const dom=editor.dom;const internalAttributes=new Set(editor.serializer.getTempAttrs());const compare=(node1,node2)=>{if(node1.nodeName!==node2.nodeName||node1.nodeType!==node2.nodeType){return false;}const getAttribs=node=>{const attribs={};each$9(dom.getAttribs(node),attr=>{const name=attr.nodeName.toLowerCase();if(name!=='style'&&!isAttributeInternal(name)){attribs[name]=dom.getAttrib(node,name);}});return attribs;};const compareObjects=(obj1,obj2)=>{for(const name in obj1){if(has$2(obj1,name)){const value=obj2[name];if(isUndefined(value)){return false;}if(obj1[name]!==value){return false;}delete obj2[name];}}for(const name in obj2){if(has$2(obj2,name)){return false;}}return true;};if(isElement$6(node1)&&isElement$6(node2)){if(!compareObjects(getAttribs(node1),getAttribs(node2))){return false;}if(!compareObjects(dom.parseStyle(dom.getAttrib(node1,'style')),dom.parseStyle(dom.getAttrib(node2,'style')))){return false;}}return!isBookmarkNode$1(node1)&&!isBookmarkNode$1(node2);};const isAttributeInternal=attributeName=>exists(internalAttributesPrefixes,value=>startsWith(attributeName,value))||internalAttributes.has(attributeName);return{compare,isAttributeInternal};};const traverse=(root,fn)=>{let node=root;while(node=node.walk()){fn(node);}};const matchNode$1=(nodeFilters,attributeFilters,node,matches)=>{const name=node.name;for(let ni=0,nl=nodeFilters.length;ni<nl;ni++){const filter=nodeFilters[ni];if(filter.name===name){const match=matches.nodes[name];if(match){match.nodes.push(node);}else{matches.nodes[name]={filter,nodes:[node]};}}}if(node.attributes){for(let ai=0,al=attributeFilters.length;ai<al;ai++){const filter=attributeFilters[ai];const attrName=filter.name;if(attrName in node.attributes.map){const match=matches.attributes[attrName];if(match){match.nodes.push(node);}else{matches.attributes[attrName]={filter,nodes:[node]};}}}}};const findMatchingNodes=(nodeFilters,attributeFilters,node)=>{const matches={nodes:{},attributes:{}};if(node.firstChild){traverse(node,childNode=>{matchNode$1(nodeFilters,attributeFilters,childNode,matches);});}return matches;};const runFilters=(matches,args)=>{const run=(matchRecord,filteringAttributes)=>{each$d(matchRecord,match=>{const nodes=from(match.nodes);each$e(match.filter.callbacks,callback=>{for(let i=nodes.length-1;i>=0;i--){const node=nodes[i];const valueMatches=filteringAttributes?node.attr(match.filter.name)!==undefined:node.name===match.filter.name;if(!valueMatches||isNullable(node.parent)){nodes.splice(i,1);}}if(nodes.length>0){callback(nodes,match.filter.name,args);}});});};run(matches.nodes,false);run(matches.attributes,true);};const filter$2=(nodeFilters,attributeFilters,node,args={})=>{const matches=findMatchingNodes(nodeFilters,attributeFilters,node);runFilters(matches,args);};const paddEmptyNode=(settings,args,blockElements,node)=>{if(args.insert&&blockElements[node.name]){const astNode=new AstNode('br',1);astNode.attr('data-mce-bogus','1');node.empty().append(astNode);}else{node.empty().append(new AstNode('#text',3)).value=nbsp;}};const isPaddedWithNbsp=node=>{var _a;return hasOnlyChild(node,'#text')&&((_a=node===null||node===void 0?void 0:node.firstChild)===null||_a===void 0?void 0:_a.value)===nbsp;};const hasOnlyChild=(node,name)=>{const firstChild=node===null||node===void 0?void 0:node.firstChild;return isNonNullable(firstChild)&&firstChild===node.lastChild&&firstChild.name===name;};const isPadded=(schema,node)=>{const rule=schema.getElementRule(node.name);return(rule===null||rule===void 0?void 0:rule.paddEmpty)===true;};const isEmpty=(schema,nonEmptyElements,whitespaceElements,node)=>node.isEmpty(nonEmptyElements,whitespaceElements,node=>isPadded(schema,node));const isLineBreakNode=(node,blockElements)=>isNonNullable(node)&&(node.name in blockElements||node.name==='br');const removeOrUnwrapInvalidNode=(node,schema,originalNodeParent=node.parent)=>{if(schema.getSpecialElements()[node.name]){node.empty().remove();}else{const children=node.children();for(const childNode of children){if(originalNodeParent&&!schema.isValidChild(originalNodeParent.name,childNode.name)){removeOrUnwrapInvalidNode(childNode,schema,originalNodeParent);}}node.unwrap();}};const cleanInvalidNodes=(nodes,schema,onCreate=noop)=>{const textBlockElements=schema.getTextBlockElements();const nonEmptyElements=schema.getNonEmptyElements();const whitespaceElements=schema.getWhitespaceElements();const nonSplittableElements=Tools.makeMap('tr,td,th,tbody,thead,tfoot,table');const fixed=new Set();for(let ni=0;ni<nodes.length;ni++){const node=nodes[ni];let parent;let newParent;let tempNode;if(!node.parent||fixed.has(node)){continue;}if(textBlockElements[node.name]&&node.parent.name==='li'){let sibling=node.next;while(sibling){if(textBlockElements[sibling.name]){sibling.name='li';fixed.add(sibling);node.parent.insert(sibling,node.parent);}else{break;}sibling=sibling.next;}node.unwrap();continue;}const parents=[node];for(parent=node.parent;parent&&!schema.isValidChild(parent.name,node.name)&&!nonSplittableElements[parent.name];parent=parent.parent){parents.push(parent);}if(parent&&parents.length>1){if(schema.isValidChild(parent.name,node.name)){parents.reverse();newParent=parents[0].clone();onCreate(newParent);let currentNode=newParent;for(let i=0;i<parents.length-1;i++){if(schema.isValidChild(currentNode.name,parents[i].name)){tempNode=parents[i].clone();onCreate(tempNode);currentNode.append(tempNode);}else{tempNode=currentNode;}for(let childNode=parents[i].firstChild;childNode&&childNode!==parents[i+1];){const nextNode=childNode.next;tempNode.append(childNode);childNode=nextNode;}currentNode=tempNode;}if(!isEmpty(schema,nonEmptyElements,whitespaceElements,newParent)){parent.insert(newParent,parents[0],true);parent.insert(node,newParent);}else{parent.insert(node,parents[0],true);}parent=parents[0];if(isEmpty(schema,nonEmptyElements,whitespaceElements,parent)||hasOnlyChild(parent,'br')){parent.empty().remove();}}else{removeOrUnwrapInvalidNode(node,schema);}}else if(node.parent){if(node.name==='li'){let sibling=node.prev;if(sibling&&(sibling.name==='ul'||sibling.name==='ol')){sibling.append(node);continue;}sibling=node.next;if(sibling&&(sibling.name==='ul'||sibling.name==='ol')&&sibling.firstChild){sibling.insert(node,sibling.firstChild,true);continue;}const wrapper=new AstNode('ul',1);onCreate(wrapper);node.wrap(wrapper);continue;}if(schema.isValidChild(node.parent.name,'div')&&schema.isValidChild('div',node.name)){const wrapper=new AstNode('div',1);onCreate(wrapper);node.wrap(wrapper);}else{removeOrUnwrapInvalidNode(node,schema);}}}};const createRange=(sc,so,ec,eo)=>{const rng=document.createRange();rng.setStart(sc,so);rng.setEnd(ec,eo);return rng;};const normalizeBlockSelectionRange=rng=>{const startPos=CaretPosition.fromRangeStart(rng);const endPos=CaretPosition.fromRangeEnd(rng);const rootNode=rng.commonAncestorContainer;return fromPosition(false,rootNode,endPos).map(newEndPos=>{if(!isInSameBlock(startPos,endPos,rootNode)&&isInSameBlock(startPos,newEndPos,rootNode)){return createRange(startPos.container(),startPos.offset(),newEndPos.container(),newEndPos.offset());}else{return rng;}}).getOr(rng);};const normalize=rng=>rng.collapsed?rng:normalizeBlockSelectionRange(rng);const hasOnlyOneChild$1=node=>{return isNonNullable(node.firstChild)&&node.firstChild===node.lastChild;};const isPaddingNode=node=>{return node.name==='br'||node.value===nbsp;};const isPaddedEmptyBlock=(schema,node)=>{const blockElements=schema.getBlockElements();return blockElements[node.name]&&hasOnlyOneChild$1(node)&&isPaddingNode(node.firstChild);};const isEmptyFragmentElement=(schema,node)=>{const nonEmptyElements=schema.getNonEmptyElements();return isNonNullable(node)&&(node.isEmpty(nonEmptyElements)||isPaddedEmptyBlock(schema,node));};const isListFragment=(schema,fragment)=>{let firstChild=fragment.firstChild;let lastChild=fragment.lastChild;if(firstChild&&firstChild.name==='meta'){firstChild=firstChild.next;}if(lastChild&&lastChild.attr('id')==='mce_marker'){lastChild=lastChild.prev;}if(isEmptyFragmentElement(schema,lastChild)){lastChild=lastChild===null||lastChild===void 0?void 0:lastChild.prev;}if(!firstChild||firstChild!==lastChild){return false;}return firstChild.name==='ul'||firstChild.name==='ol';};const cleanupDomFragment=domFragment=>{var _a,_b;const firstChild=domFragment.firstChild;const lastChild=domFragment.lastChild;if(firstChild&&firstChild.nodeName==='META'){(_a=firstChild.parentNode)===null||_a===void 0?void 0:_a.removeChild(firstChild);}if(lastChild&&lastChild.id==='mce_marker'){(_b=lastChild.parentNode)===null||_b===void 0?void 0:_b.removeChild(lastChild);}return domFragment;};const toDomFragment=(dom,serializer,fragment)=>{const html=serializer.serialize(fragment);const domFragment=dom.createFragment(html);return cleanupDomFragment(domFragment);};const listItems=elm=>{var _a;return filter$5((_a=elm===null||elm===void 0?void 0:elm.childNodes)!==null&&_a!==void 0?_a:[],child=>{return child.nodeName==='LI';});};const isPadding=node=>{return node.data===nbsp||isBr$6(node);};const isListItemPadded=node=>{return isNonNullable(node===null||node===void 0?void 0:node.firstChild)&&node.firstChild===node.lastChild&&isPadding(node.firstChild);};const isEmptyOrPadded=elm=>{return!elm.firstChild||isListItemPadded(elm);};const trimListItems=elms=>{return elms.length>0&&isEmptyOrPadded(elms[elms.length-1])?elms.slice(0,-1):elms;};const getParentLi=(dom,node)=>{const parentBlock=dom.getParent(node,dom.isBlock);return parentBlock&&parentBlock.nodeName==='LI'?parentBlock:null;};const isParentBlockLi=(dom,node)=>{return!!getParentLi(dom,node);};const getSplit=(parentNode,rng)=>{const beforeRng=rng.cloneRange();const afterRng=rng.cloneRange();beforeRng.setStartBefore(parentNode);afterRng.setEndAfter(parentNode);return[beforeRng.cloneContents(),afterRng.cloneContents()];};const findFirstIn=(node,rootNode)=>{const caretPos=CaretPosition.before(node);const caretWalker=CaretWalker(rootNode);const newCaretPos=caretWalker.next(caretPos);return newCaretPos?newCaretPos.toRange():null;};const findLastOf=(node,rootNode)=>{const caretPos=CaretPosition.after(node);const caretWalker=CaretWalker(rootNode);const newCaretPos=caretWalker.prev(caretPos);return newCaretPos?newCaretPos.toRange():null;};const insertMiddle=(target,elms,rootNode,rng)=>{const parts=getSplit(target,rng);const parentElm=target.parentNode;if(parentElm){parentElm.insertBefore(parts[0],target);Tools.each(elms,li=>{parentElm.insertBefore(li,target);});parentElm.insertBefore(parts[1],target);parentElm.removeChild(target);}return findLastOf(elms[elms.length-1],rootNode);};const insertBefore$1=(target,elms,rootNode)=>{const parentElm=target.parentNode;if(parentElm){Tools.each(elms,elm=>{parentElm.insertBefore(elm,target);});}return findFirstIn(target,rootNode);};const insertAfter$1=(target,elms,rootNode,dom)=>{dom.insertAfter(elms.reverse(),target);return findLastOf(elms[0],rootNode);};const insertAtCaret$1=(serializer,dom,rng,fragment)=>{const domFragment=toDomFragment(dom,serializer,fragment);const liTarget=getParentLi(dom,rng.startContainer);const liElms=trimListItems(listItems(domFragment.firstChild));const BEGINNING=1,END=2;const rootNode=dom.getRoot();const isAt=location=>{const caretPos=CaretPosition.fromRangeStart(rng);const caretWalker=CaretWalker(dom.getRoot());const newPos=location===BEGINNING?caretWalker.prev(caretPos):caretWalker.next(caretPos);const newPosNode=newPos===null||newPos===void 0?void 0:newPos.getNode();return newPosNode?getParentLi(dom,newPosNode)!==liTarget:true;};if(!liTarget){return null;}else if(isAt(BEGINNING)){return insertBefore$1(liTarget,liElms,rootNode);}else if(isAt(END)){return insertAfter$1(liTarget,liElms,rootNode,dom);}else{return insertMiddle(liTarget,liElms,rootNode,rng);}};const mergeableWrappedElements=['pre'];const shouldPasteContentOnly=(dom,fragment,parentNode,root)=>{var _a;const firstNode=fragment.firstChild;const lastNode=fragment.lastChild;const last=lastNode.attr('data-mce-type')==='bookmark'?lastNode.prev:lastNode;const isPastingSingleElement=firstNode===last;const isWrappedElement=contains$2(mergeableWrappedElements,firstNode.name);if(isPastingSingleElement&&isWrappedElement){const isContentEditable=firstNode.attr('contenteditable')!=='false';const isPastingInTheSameBlockTag=((_a=dom.getParent(parentNode,dom.isBlock))===null||_a===void 0?void 0:_a.nodeName.toLowerCase())===firstNode.name;const isPastingInContentEditable=Optional.from(getContentEditableRoot$1(root,parentNode)).forall(isContentEditableTrue$3);return isContentEditable&&isPastingInTheSameBlockTag&&isPastingInContentEditable;}else{return false;}};const isTableCell=isTableCell$3;const isTableCellContentSelected=(dom,rng,cell)=>{if(isNonNullable(cell)){const endCell=dom.getParent(rng.endContainer,isTableCell);return cell===endCell&&hasAllContentsSelected(SugarElement.fromDom(cell),rng);}else{return false;}};const validInsertion=(editor,value,parentNode)=>{var _a;if(parentNode.getAttribute('data-mce-bogus')==='all'){(_a=parentNode.parentNode)===null||_a===void 0?void 0:_a.insertBefore(editor.dom.createFragment(value),parentNode);}else{const node=parentNode.firstChild;const node2=parentNode.lastChild;if(!node||node===node2&&node.nodeName==='BR'){editor.dom.setHTML(parentNode,value);}else{editor.selection.setContent(value,{no_events:true});}}};const trimBrsFromTableCell=(dom,elm)=>{Optional.from(dom.getParent(elm,'td,th')).map(SugarElement.fromDom).each(trimBlockTrailingBr);};const reduceInlineTextElements=(editor,merge)=>{const textInlineElements=editor.schema.getTextInlineElements();const dom=editor.dom;if(merge){const root=editor.getBody();const elementUtils=ElementUtils(editor);Tools.each(dom.select('*[data-mce-fragment]'),node=>{const isInline=isNonNullable(textInlineElements[node.nodeName.toLowerCase()]);if(isInline&&hasInheritableStyles(dom,node)){for(let parentNode=node.parentElement;isNonNullable(parentNode)&&parentNode!==root;parentNode=parentNode.parentElement){const styleConflict=hasStyleConflict(dom,node,parentNode);if(styleConflict){break;}if(elementUtils.compare(parentNode,node)){dom.remove(node,true);break;}}}});}};const markFragmentElements=fragment=>{let node=fragment;while(node=node.walk()){if(node.type===1){node.attr('data-mce-fragment','1');}}};const unmarkFragmentElements=elm=>{Tools.each(elm.getElementsByTagName('*'),elm=>{elm.removeAttribute('data-mce-fragment');});};const isPartOfFragment=node=>{return!!node.getAttribute('data-mce-fragment');};const canHaveChildren=(editor,node)=>{return isNonNullable(node)&&!editor.schema.getVoidElements()[node.nodeName];};const moveSelectionToMarker=(editor,marker)=>{var _a,_b,_c;let nextRng;const dom=editor.dom;const selection=editor.selection;if(!marker){return;}selection.scrollIntoView(marker);const parentEditableElm=getContentEditableRoot$1(editor.getBody(),marker);if(parentEditableElm&&dom.getContentEditable(parentEditableElm)==='false'){dom.remove(marker);selection.select(parentEditableElm);return;}let rng=dom.createRng();const node=marker.previousSibling;if(isText$a(node)){rng.setStart(node,(_b=(_a=node.nodeValue)===null||_a===void 0?void 0:_a.length)!==null&&_b!==void 0?_b:0);const node2=marker.nextSibling;if(isText$a(node2)){node.appendData(node2.data);(_c=node2.parentNode)===null||_c===void 0?void 0:_c.removeChild(node2);}}else{rng.setStartBefore(marker);rng.setEndBefore(marker);}const findNextCaretRng=rng=>{let caretPos=CaretPosition.fromRangeStart(rng);const caretWalker=CaretWalker(editor.getBody());caretPos=caretWalker.next(caretPos);return caretPos===null||caretPos===void 0?void 0:caretPos.toRange();};const parentBlock=dom.getParent(marker,dom.isBlock);dom.remove(marker);if(parentBlock&&dom.isEmpty(parentBlock)){empty(SugarElement.fromDom(parentBlock));rng.setStart(parentBlock,0);rng.setEnd(parentBlock,0);if(!isTableCell(parentBlock)&&!isPartOfFragment(parentBlock)&&(nextRng=findNextCaretRng(rng))){rng=nextRng;dom.remove(parentBlock);}else{dom.add(parentBlock,dom.create('br',{'data-mce-bogus':'1'}));}}selection.setRng(rng);};const deleteSelectedContent=editor=>{const dom=editor.dom;const rng=normalize(editor.selection.getRng());editor.selection.setRng(rng);const startCell=dom.getParent(rng.startContainer,isTableCell);if(isTableCellContentSelected(dom,rng,startCell)){deleteCellContents(editor,rng,SugarElement.fromDom(startCell));}else{editor.getDoc().execCommand('Delete',false);}};const insertHtmlAtCaret=(editor,value,details)=>{var _a,_b,_c;const selection=editor.selection;const dom=editor.dom;const parser=editor.parser;const merge=details.merge;const serializer=HtmlSerializer({validate:true},editor.schema);const bookmarkHtml='<span id=\"mce_marker\" data-mce-type=\"bookmark\">&#xFEFF;</span>';if(value.indexOf('{$caret}')===-1){value+='{$caret}';}value=value.replace(/\\{\\$caret\\}/,bookmarkHtml);let rng=selection.getRng();const caretElement=rng.startContainer;const body=editor.getBody();if(caretElement===body&&selection.isCollapsed()){if(dom.isBlock(body.firstChild)&&canHaveChildren(editor,body.firstChild)&&dom.isEmpty(body.firstChild)){rng=dom.createRng();rng.setStart(body.firstChild,0);rng.setEnd(body.firstChild,0);selection.setRng(rng);}}if(!selection.isCollapsed()){deleteSelectedContent(editor);}const parentNode=selection.getNode();const parserArgs={context:parentNode.nodeName.toLowerCase(),data:details.data,insert:true};const fragment=parser.parse(value,parserArgs);if(details.paste===true&&isListFragment(editor.schema,fragment)&&isParentBlockLi(dom,parentNode)){rng=insertAtCaret$1(serializer,dom,selection.getRng(),fragment);if(rng){selection.setRng(rng);}return value;}if(details.paste===true&&shouldPasteContentOnly(dom,fragment,parentNode,editor.getBody())){(_a=fragment.firstChild)===null||_a===void 0?void 0:_a.unwrap();}markFragmentElements(fragment);let node=fragment.lastChild;if(node&&node.attr('id')==='mce_marker'){const marker=node;for(node=node.prev;node;node=node.walk(true)){if(node.type===3||!dom.isBlock(node.name)){if(node.parent&&editor.schema.isValidChild(node.parent.name,'span')){node.parent.insert(marker,node,node.name==='br');}break;}}}editor._selectionOverrides.showBlockCaretContainer(parentNode);if(!parserArgs.invalid){value=serializer.serialize(fragment);validInsertion(editor,value,parentNode);}else{editor.selection.setContent(bookmarkHtml);let parentNode=selection.getNode();let tempNode;const rootNode=editor.getBody();if(isDocument$1(parentNode)){parentNode=tempNode=rootNode;}else{tempNode=parentNode;}while(tempNode&&tempNode!==rootNode){parentNode=tempNode;tempNode=tempNode.parentNode;}value=parentNode===rootNode?rootNode.innerHTML:dom.getOuterHTML(parentNode);const root=parser.parse(value);for(let markerNode=root;markerNode;markerNode=markerNode.walk()){if(markerNode.attr('id')==='mce_marker'){markerNode.replace(fragment);break;}}const toExtract=fragment.children();const parent=(_c=(_b=fragment.parent)===null||_b===void 0?void 0:_b.name)!==null&&_c!==void 0?_c:root.name;fragment.unwrap();const invalidChildren=filter$5(toExtract,node=>!editor.schema.isValidChild(parent,node.name));cleanInvalidNodes(invalidChildren,editor.schema);filter$2(parser.getNodeFilters(),parser.getAttributeFilters(),root);value=serializer.serialize(root);if(parentNode===rootNode){dom.setHTML(rootNode,value);}else{dom.setOuterHTML(parentNode,value);}}reduceInlineTextElements(editor,merge);moveSelectionToMarker(editor,dom.get('mce_marker'));unmarkFragmentElements(editor.getBody());trimBrsFromTableCell(dom,selection.getStart());return value;};const isTreeNode=content=>content instanceof AstNode;const moveSelection=editor=>{if(hasFocus(editor)){firstPositionIn(editor.getBody()).each(pos=>{const node=pos.getNode();const caretPos=isTable$2(node)?firstPositionIn(node).getOr(pos):pos;editor.selection.setRng(caretPos.toRange());});}};const setEditorHtml=(editor,html,noSelection)=>{editor.dom.setHTML(editor.getBody(),html);if(noSelection!==true){moveSelection(editor);}};const setContentString=(editor,body,content,args)=>{if(content.length===0||/^\\s+$/.test(content)){const padd='<br data-mce-bogus=\"1\">';if(body.nodeName==='TABLE'){content='<tr><td>'+padd+'</td></tr>';}else if(/^(UL|OL)$/.test(body.nodeName)){content='<li>'+padd+'</li>';}const forcedRootBlockName=getForcedRootBlock(editor);if(editor.schema.isValidChild(body.nodeName.toLowerCase(),forcedRootBlockName.toLowerCase())){content=padd;content=editor.dom.createHTML(forcedRootBlockName,getForcedRootBlockAttrs(editor),content);}else if(!content){content=padd;}setEditorHtml(editor,content,args.no_selection);return{content,html:content};}else{if(args.format!=='raw'){content=HtmlSerializer({validate:false},editor.schema).serialize(editor.parser.parse(content,{isRootContent:true,insert:true}));}const trimmedHtml=isWsPreserveElement(SugarElement.fromDom(body))?content:Tools.trim(content);setEditorHtml(editor,trimmedHtml,args.no_selection);return{content:trimmedHtml,html:trimmedHtml};}};const setContentTree=(editor,body,content,args)=>{filter$2(editor.parser.getNodeFilters(),editor.parser.getAttributeFilters(),content);const html=HtmlSerializer({validate:false},editor.schema).serialize(content);const trimmedHtml=isWsPreserveElement(SugarElement.fromDom(body))?html:Tools.trim(html);setEditorHtml(editor,trimmedHtml,args.no_selection);return{content,html:trimmedHtml};};const setContentInternal=(editor,content,args)=>{return Optional.from(editor.getBody()).map(body=>{if(isTreeNode(content)){return setContentTree(editor,body,content,args);}else{return setContentString(editor,body,content,args);}}).getOr({content,html:isTreeNode(args.content)?'':args.content});};const sibling=(scope,predicate)=>sibling$1(scope,predicate).isSome();const ensureIsRoot=isRoot=>isFunction(isRoot)?isRoot:never;const ancestor=(scope,transform,isRoot)=>{let element=scope.dom;const stop=ensureIsRoot(isRoot);while(element.parentNode){element=element.parentNode;const el=SugarElement.fromDom(element);const transformed=transform(el);if(transformed.isSome()){return transformed;}else if(stop(el)){break;}}return Optional.none();};const closest$2=(scope,transform,isRoot)=>{const current=transform(scope);const stop=ensureIsRoot(isRoot);return current.orThunk(()=>stop(scope)?Optional.none():ancestor(scope,transform,stop));};const isEq$3=isEq$5;const matchesUnInheritedFormatSelector=(ed,node,name)=>{const formatList=ed.formatter.get(name);if(formatList){for(let i=0;i<formatList.length;i++){const format=formatList[i];if(isSelectorFormat(format)&&format.inherit===false&&ed.dom.is(node,format.selector)){return true;}}}return false;};const matchParents=(editor,node,name,vars,similar)=>{const root=editor.dom.getRoot();if(node===root){return false;}const matchedNode=editor.dom.getParent(node,elm=>{if(matchesUnInheritedFormatSelector(editor,elm,name)){return true;}return elm.parentNode===root||!!matchNode(editor,elm,name,vars,true);});return!!matchNode(editor,matchedNode,name,vars,similar);};const matchName=(dom,node,format)=>{if(isInlineFormat(format)&&isEq$3(node,format.inline)){return true;}if(isBlockFormat(format)&&isEq$3(node,format.block)){return true;}if(isSelectorFormat(format)){return isElement$6(node)&&dom.is(node,format.selector);}return false;};const matchItems=(dom,node,format,itemName,similar,vars)=>{const items=format[itemName];const matchAttributes=itemName==='attributes';if(isFunction(format.onmatch)){return format.onmatch(node,format,itemName);}if(items){if(!isArrayLike(items)){for(const key in items){if(has$2(items,key)){const value=matchAttributes?dom.getAttrib(node,key):getStyle(dom,node,key);const expectedValue=replaceVars(items[key],vars);const isEmptyValue=isNullable(value)||isEmpty$3(value);if(isEmptyValue&&isNullable(expectedValue)){continue;}if(similar&&isEmptyValue&&!format.exact){return false;}if((!similar||format.exact)&&!isEq$3(value,normalizeStyleValue(expectedValue,key))){return false;}}}}else{for(let i=0;i<items.length;i++){if(matchAttributes?dom.getAttrib(node,items[i]):getStyle(dom,node,items[i])){return true;}}}}return true;};const matchNode=(ed,node,name,vars,similar)=>{const formatList=ed.formatter.get(name);const dom=ed.dom;if(formatList&&isElement$6(node)){for(let i=0;i<formatList.length;i++){const format=formatList[i];if(matchName(ed.dom,node,format)&&matchItems(dom,node,format,'attributes',similar,vars)&&matchItems(dom,node,format,'styles',similar,vars)){const classes=format.classes;if(classes){for(let x=0;x<classes.length;x++){if(!ed.dom.hasClass(node,replaceVars(classes[x],vars))){return;}}}return format;}}}return undefined;};const match$2=(editor,name,vars,node,similar)=>{if(node){return matchParents(editor,node,name,vars,similar);}node=editor.selection.getNode();if(matchParents(editor,node,name,vars,similar)){return true;}const startNode=editor.selection.getStart();if(startNode!==node){if(matchParents(editor,startNode,name,vars,similar)){return true;}}return false;};const matchAll=(editor,names,vars)=>{const matchedFormatNames=[];const checkedMap={};const startElement=editor.selection.getStart();editor.dom.getParent(startElement,node=>{for(let i=0;i<names.length;i++){const name=names[i];if(!checkedMap[name]&&matchNode(editor,node,name,vars)){checkedMap[name]=true;matchedFormatNames.push(name);}}},editor.dom.getRoot());return matchedFormatNames;};const closest$1=(editor,names)=>{const isRoot=elm=>eq(elm,SugarElement.fromDom(editor.getBody()));const match=(elm,name)=>matchNode(editor,elm.dom,name)?Optional.some(name):Optional.none();return Optional.from(editor.selection.getStart(true)).bind(rawElm=>closest$2(SugarElement.fromDom(rawElm),elm=>findMap(names,name=>match(elm,name)),isRoot)).getOrNull();};const canApply=(editor,name)=>{const formatList=editor.formatter.get(name);const dom=editor.dom;if(formatList){const startNode=editor.selection.getStart();const parents=getParents$2(dom,startNode);for(let x=formatList.length-1;x>=0;x--){const format=formatList[x];if(!isSelectorFormat(format)){return true;}for(let i=parents.length-1;i>=0;i--){if(dom.is(parents[i],format.selector)){return true;}}}}return false;};const matchAllOnNode=(editor,node,formatNames)=>foldl(formatNames,(acc,name)=>{const matchSimilar=isVariableFormatName(editor,name);if(editor.formatter.matchNode(node,name,{},matchSimilar)){return acc.concat([name]);}else{return acc;}},[]);const ZWSP=ZWSP$1;const importNode=(ownerDocument,node)=>{return ownerDocument.importNode(node,true);};const getEmptyCaretContainers=node=>{const nodes=[];let tempNode=node;while(tempNode){if(isText$a(tempNode)&&tempNode.data!==ZWSP||tempNode.childNodes.length>1){return[];}if(isElement$6(tempNode)){nodes.push(tempNode);}tempNode=tempNode.firstChild;}return nodes;};const isCaretContainerEmpty=node=>{return getEmptyCaretContainers(node).length>0;};const findFirstTextNode=node=>{if(node){const walker=new DomTreeWalker(node,node);for(let tempNode=walker.current();tempNode;tempNode=walker.next()){if(isText$a(tempNode)){return tempNode;}}}return null;};const createCaretContainer=fill=>{const caretContainer=SugarElement.fromTag('span');setAll$1(caretContainer,{'id':CARET_ID,'data-mce-bogus':'1','data-mce-type':'format-caret'});if(fill){append$1(caretContainer,SugarElement.fromText(ZWSP));}return caretContainer;};const trimZwspFromCaretContainer=caretContainerNode=>{const textNode=findFirstTextNode(caretContainerNode);if(textNode&&textNode.data.charAt(0)===ZWSP){textNode.deleteData(0,1);}return textNode;};const removeCaretContainerNode=(editor,node,moveCaret=true)=>{const dom=editor.dom,selection=editor.selection;if(isCaretContainerEmpty(node)){deleteElement$2(editor,false,SugarElement.fromDom(node),moveCaret);}else{const rng=selection.getRng();const block=dom.getParent(node,dom.isBlock);const startContainer=rng.startContainer;const startOffset=rng.startOffset;const endContainer=rng.endContainer;const endOffset=rng.endOffset;const textNode=trimZwspFromCaretContainer(node);dom.remove(node,true);if(startContainer===textNode&&startOffset>0){rng.setStart(textNode,startOffset-1);}if(endContainer===textNode&&endOffset>0){rng.setEnd(textNode,endOffset-1);}if(block&&dom.isEmpty(block)){fillWithPaddingBr(SugarElement.fromDom(block));}selection.setRng(rng);}};const removeCaretContainer=(editor,node,moveCaret=true)=>{const dom=editor.dom,selection=editor.selection;if(!node){node=getParentCaretContainer(editor.getBody(),selection.getStart());if(!node){while(node=dom.get(CARET_ID)){removeCaretContainerNode(editor,node,false);}}}else{removeCaretContainerNode(editor,node,moveCaret);}};const insertCaretContainerNode=(editor,caretContainer,formatNode)=>{var _a,_b;const dom=editor.dom;const block=dom.getParent(formatNode,curry(isTextBlock$1,editor));if(block&&dom.isEmpty(block)){(_a=formatNode.parentNode)===null||_a===void 0?void 0:_a.replaceChild(caretContainer,formatNode);}else{removeTrailingBr(SugarElement.fromDom(formatNode));if(dom.isEmpty(formatNode)){(_b=formatNode.parentNode)===null||_b===void 0?void 0:_b.replaceChild(caretContainer,formatNode);}else{dom.insertAfter(caretContainer,formatNode);}}};const appendNode=(parentNode,node)=>{parentNode.appendChild(node);return node;};const insertFormatNodesIntoCaretContainer=(formatNodes,caretContainer)=>{var _a;const innerMostFormatNode=foldr(formatNodes,(parentNode,formatNode)=>{return appendNode(parentNode,formatNode.cloneNode(false));},caretContainer);const doc=(_a=innerMostFormatNode.ownerDocument)!==null&&_a!==void 0?_a:document;return appendNode(innerMostFormatNode,doc.createTextNode(ZWSP));};const cleanFormatNode=(editor,caretContainer,formatNode,name,vars,similar)=>{const formatter=editor.formatter;const dom=editor.dom;const validFormats=filter$5(keys(formatter.get()),formatName=>formatName!==name&&!contains$1(formatName,'removeformat'));const matchedFormats=matchAllOnNode(editor,formatNode,validFormats);const uniqueFormats=filter$5(matchedFormats,fmtName=>!areSimilarFormats(editor,fmtName,name));if(uniqueFormats.length>0){const clonedFormatNode=formatNode.cloneNode(false);dom.add(caretContainer,clonedFormatNode);formatter.remove(name,vars,clonedFormatNode,similar);dom.remove(clonedFormatNode);return Optional.some(clonedFormatNode);}else{return Optional.none();}};const applyCaretFormat=(editor,name,vars)=>{let caretContainer;const selection=editor.selection;const formatList=editor.formatter.get(name);if(!formatList){return;}const selectionRng=selection.getRng();let offset=selectionRng.startOffset;const container=selectionRng.startContainer;const text=container.nodeValue;caretContainer=getParentCaretContainer(editor.getBody(),selection.getStart());const wordcharRegex=/[^\\s\\u00a0\\u00ad\\u200b\\ufeff]/;if(text&&offset>0&&offset<text.length&&wordcharRegex.test(text.charAt(offset))&&wordcharRegex.test(text.charAt(offset-1))){const bookmark=selection.getBookmark();selectionRng.collapse(true);let rng=expandRng(editor,selectionRng,formatList);rng=split(rng);editor.formatter.apply(name,vars,rng);selection.moveToBookmark(bookmark);}else{let textNode=caretContainer?findFirstTextNode(caretContainer):null;if(!caretContainer||(textNode===null||textNode===void 0?void 0:textNode.data)!==ZWSP){caretContainer=importNode(editor.getDoc(),createCaretContainer(true).dom);textNode=caretContainer.firstChild;selectionRng.insertNode(caretContainer);offset=1;editor.formatter.apply(name,vars,caretContainer);}else{editor.formatter.apply(name,vars,caretContainer);}selection.setCursorLocation(textNode,offset);}};const removeCaretFormat=(editor,name,vars,similar)=>{const dom=editor.dom;const selection=editor.selection;let hasContentAfter=false;const formatList=editor.formatter.get(name);if(!formatList){return;}const rng=selection.getRng();const container=rng.startContainer;const offset=rng.startOffset;let node=container;if(isText$a(container)){if(offset!==container.data.length){hasContentAfter=true;}node=node.parentNode;}const parents=[];let formatNode;while(node){if(matchNode(editor,node,name,vars,similar)){formatNode=node;break;}if(node.nextSibling){hasContentAfter=true;}parents.push(node);node=node.parentNode;}if(!formatNode){return;}if(hasContentAfter){const bookmark=selection.getBookmark();rng.collapse(true);let expandedRng=expandRng(editor,rng,formatList,true);expandedRng=split(expandedRng);editor.formatter.remove(name,vars,expandedRng,similar);selection.moveToBookmark(bookmark);}else{const caretContainer=getParentCaretContainer(editor.getBody(),formatNode);const newCaretContainer=createCaretContainer(false).dom;insertCaretContainerNode(editor,newCaretContainer,caretContainer!==null&&caretContainer!==void 0?caretContainer:formatNode);const cleanedFormatNode=cleanFormatNode(editor,newCaretContainer,formatNode,name,vars,similar);const caretTextNode=insertFormatNodesIntoCaretContainer(parents.concat(cleanedFormatNode.toArray()),newCaretContainer);if(caretContainer){removeCaretContainerNode(editor,caretContainer,false);}selection.setCursorLocation(caretTextNode,1);if(dom.isEmpty(formatNode)){dom.remove(formatNode);}}};const disableCaretContainer=(editor,keyCode)=>{const selection=editor.selection,body=editor.getBody();removeCaretContainer(editor,null,false);if((keyCode===8||keyCode===46)&&selection.isCollapsed()&&selection.getStart().innerHTML===ZWSP){removeCaretContainer(editor,getParentCaretContainer(body,selection.getStart()));}if(keyCode===37||keyCode===39){removeCaretContainer(editor,getParentCaretContainer(body,selection.getStart()));}};const setup$u=editor=>{editor.on('mouseup keydown',e=>{disableCaretContainer(editor,e.keyCode);});};const replaceWithCaretFormat=(targetNode,formatNodes)=>{const caretContainer=createCaretContainer(false);const innerMost=insertFormatNodesIntoCaretContainer(formatNodes,caretContainer.dom);before$3(SugarElement.fromDom(targetNode),caretContainer);remove$6(SugarElement.fromDom(targetNode));return CaretPosition(innerMost,0);};const isFormatElement=(editor,element)=>{const inlineElements=editor.schema.getTextInlineElements();return has$2(inlineElements,name(element))&&!isCaretNode(element.dom)&&!isBogus$2(element.dom);};const isEmptyCaretFormatElement=element=>{return isCaretNode(element.dom)&&isCaretContainerEmpty(element.dom);};const postProcessHooks={};const isPre=matchNodeNames(['pre']);const addPostProcessHook=(name,hook)=>{const hooks=postProcessHooks[name];if(!hooks){postProcessHooks[name]=[];}postProcessHooks[name].push(hook);};const postProcess$1=(name,editor)=>{if(has$2(postProcessHooks,name)){each$e(postProcessHooks[name],hook=>{hook(editor);});}};addPostProcessHook('pre',editor=>{const rng=editor.selection.getRng();const hasPreSibling=blocks=>pre=>{const prev=pre.previousSibling;return isPre(prev)&&contains$2(blocks,prev);};const joinPre=(pre1,pre2)=>{const sPre2=SugarElement.fromDom(pre2);const doc=documentOrOwner(sPre2).dom;remove$6(sPre2);append(SugarElement.fromDom(pre1),[SugarElement.fromTag('br',doc),SugarElement.fromTag('br',doc),...children(sPre2)]);};if(!rng.collapsed){const blocks=editor.selection.getSelectedBlocks();const preBlocks=filter$5(filter$5(blocks,isPre),hasPreSibling(blocks));each$e(preBlocks,pre=>{joinPre(pre.previousSibling,pre);});}});const listItemStyles=['fontWeight','fontStyle','color','fontSize','fontFamily'];const hasListStyles=fmt=>isObject(fmt.styles)&&exists(keys(fmt.styles),name=>contains$2(listItemStyles,name));const findExpandedListItemFormat=formats=>find$2(formats,fmt=>isInlineFormat(fmt)&&fmt.inline==='span'&&hasListStyles(fmt));const getExpandedListItemFormat=(formatter,format)=>{const formatList=formatter.get(format);return isArray$1(formatList)?findExpandedListItemFormat(formatList):Optional.none();};const isRngStartAtStartOfElement=(rng,elm)=>prevPosition(elm,CaretPosition.fromRangeStart(rng)).isNone();const isRngEndAtEndOfElement=(rng,elm)=>{return nextPosition(elm,CaretPosition.fromRangeEnd(rng)).exists(pos=>!isBr$6(pos.getNode())||nextPosition(elm,pos).isSome())===false;};const isEditableListItem=dom=>elm=>isListItem$2(elm)&&dom.getContentEditableParent(elm)!=='false';const getFullySelectedBlocks=selection=>{const blocks=selection.getSelectedBlocks();const rng=selection.getRng();if(selection.isCollapsed()){return[];}if(blocks.length===1){return isRngStartAtStartOfElement(rng,blocks[0])&&isRngEndAtEndOfElement(rng,blocks[0])?blocks:[];}else{const first=head(blocks).filter(elm=>isRngStartAtStartOfElement(rng,elm)).toArray();const last=last$3(blocks).filter(elm=>isRngEndAtEndOfElement(rng,elm)).toArray();const middle=blocks.slice(1,-1);return first.concat(middle).concat(last);}};const getFullySelectedListItems=selection=>filter$5(getFullySelectedBlocks(selection),isEditableListItem(selection.dom));const getPartiallySelectedListItems=selection=>filter$5(selection.getSelectedBlocks(),isEditableListItem(selection.dom));const each$8=Tools.each;const isElementNode=node=>isElement$6(node)&&!isBookmarkNode$1(node)&&!isCaretNode(node)&&!isBogus$2(node);const findElementSibling=(node,siblingName)=>{for(let sibling=node;sibling;sibling=sibling[siblingName]){if(isText$a(sibling)&&isNotEmpty(sibling.data)){return node;}if(isElement$6(sibling)&&!isBookmarkNode$1(sibling)){return sibling;}}return node;};const mergeSiblingsNodes=(editor,prev,next)=>{const elementUtils=ElementUtils(editor);const isPrevEditable=isElement$6(prev)&&isEditable$3(prev);const isNextEditable=isElement$6(next)&&isEditable$3(next);if(isPrevEditable&&isNextEditable){const prevSibling=findElementSibling(prev,'previousSibling');const nextSibling=findElementSibling(next,'nextSibling');if(elementUtils.compare(prevSibling,nextSibling)){for(let sibling=prevSibling.nextSibling;sibling&&sibling!==nextSibling;){const tmpSibling=sibling;sibling=sibling.nextSibling;prevSibling.appendChild(tmpSibling);}editor.dom.remove(nextSibling);Tools.each(Tools.grep(nextSibling.childNodes),node=>{prevSibling.appendChild(node);});return prevSibling;}}return next;};const mergeSiblings=(editor,format,vars,node)=>{var _a;if(node&&format.merge_siblings!==false){const newNode=(_a=mergeSiblingsNodes(editor,getNonWhiteSpaceSibling(node),node))!==null&&_a!==void 0?_a:node;mergeSiblingsNodes(editor,newNode,getNonWhiteSpaceSibling(newNode,true));}};const clearChildStyles=(dom,format,node)=>{if(format.clear_child_styles){const selector=format.links?'*:not(a)':'*';each$8(dom.select(selector,node),childNode=>{if(isElementNode(childNode)&&isEditable$3(childNode)){each$8(format.styles,(_value,name)=>{dom.setStyle(childNode,name,'');});}});}};const processChildElements=(node,filter,process)=>{each$8(node.childNodes,node=>{if(isElementNode(node)){if(filter(node)){process(node);}if(node.hasChildNodes()){processChildElements(node,filter,process);}}});};const unwrapEmptySpan=(dom,node)=>{if(node.nodeName==='SPAN'&&dom.getAttribs(node).length===0){dom.remove(node,true);}};const hasStyle=(dom,name)=>node=>!!(node&&getStyle(dom,node,name));const applyStyle=(dom,name,value)=>node=>{dom.setStyle(node,name,value);if(node.getAttribute('style')===''){node.removeAttribute('style');}unwrapEmptySpan(dom,node);};const removeResult=Adt.generate([{keep:[]},{rename:['name']},{removed:[]}]);const MCE_ATTR_RE=/^(src|href|style)$/;const each$7=Tools.each;const isEq$2=isEq$5;const isTableCellOrRow=node=>/^(TR|TH|TD)$/.test(node.nodeName);const isChildOfInlineParent=(dom,node,parent)=>dom.isChildOf(node,parent)&&node!==parent&&!dom.isBlock(parent);const getContainer=(ed,rng,start)=>{let container=rng[start?'startContainer':'endContainer'];let offset=rng[start?'startOffset':'endOffset'];if(isElement$6(container)){const lastIdx=container.childNodes.length-1;if(!start&&offset){offset--;}container=container.childNodes[offset>lastIdx?lastIdx:offset];}if(isText$a(container)&&start&&offset>=container.data.length){container=new DomTreeWalker(container,ed.getBody()).next()||container;}if(isText$a(container)&&!start&&offset===0){container=new DomTreeWalker(container,ed.getBody()).prev()||container;}return container;};const normalizeTableSelection=(node,start)=>{const prop=start?'firstChild':'lastChild';const childNode=node[prop];if(isTableCellOrRow(node)&&childNode){if(node.nodeName==='TR'){return childNode[prop]||childNode;}else{return childNode;}}return node;};const wrap$1=(dom,node,name,attrs)=>{var _a;const wrapper=dom.create(name,attrs);(_a=node.parentNode)===null||_a===void 0?void 0:_a.insertBefore(wrapper,node);wrapper.appendChild(node);return wrapper;};const wrapWithSiblings=(dom,node,next,name,attrs)=>{const start=SugarElement.fromDom(node);const wrapper=SugarElement.fromDom(dom.create(name,attrs));const siblings=next?nextSiblings(start):prevSiblings(start);append(wrapper,siblings);if(next){before$3(start,wrapper);prepend(wrapper,start);}else{after$4(start,wrapper);append$1(wrapper,start);}return wrapper.dom;};const isColorFormatAndAnchor=(node,format)=>format.links&&node.nodeName==='A';const removeNode=(ed,node,format)=>{const parentNode=node.parentNode;let rootBlockElm;const dom=ed.dom;const forcedRootBlock=getForcedRootBlock(ed);if(isBlockFormat(format)){if(parentNode===dom.getRoot()){if(!format.list_block||!isEq$2(node,format.list_block)){each$e(from(node.childNodes),node=>{if(isValid(ed,forcedRootBlock,node.nodeName.toLowerCase())){if(!rootBlockElm){rootBlockElm=wrap$1(dom,node,forcedRootBlock);dom.setAttribs(rootBlockElm,getForcedRootBlockAttrs(ed));}else{rootBlockElm.appendChild(node);}}else{rootBlockElm=null;}});}}}if(isMixedFormat(format)&&!isEq$2(format.inline,node)){return;}dom.remove(node,true);};const processFormatAttrOrStyle=(name,value,vars)=>{if(isNumber(name)){return{name:value,value:null};}else{return{name,value:replaceVars(value,vars)};}};const removeEmptyStyleAttributeIfNeeded=(dom,elm)=>{if(dom.getAttrib(elm,'style')===''){elm.removeAttribute('style');elm.removeAttribute('data-mce-style');}};const removeStyles=(dom,elm,format,vars,compareNode)=>{let stylesModified=false;each$7(format.styles,(value,name)=>{const{name:styleName,value:styleValue}=processFormatAttrOrStyle(name,value,vars);const normalizedStyleValue=normalizeStyleValue(styleValue,styleName);if(format.remove_similar||isNull(styleValue)||!isElement$6(compareNode)||isEq$2(getStyle(dom,compareNode,styleName),normalizedStyleValue)){dom.setStyle(elm,styleName,'');}stylesModified=true;});if(stylesModified){removeEmptyStyleAttributeIfNeeded(dom,elm);}};const removeListStyleFormats=(editor,name,vars)=>{if(name==='removeformat'){each$e(getPartiallySelectedListItems(editor.selection),li=>{each$e(listItemStyles,name=>editor.dom.setStyle(li,name,''));removeEmptyStyleAttributeIfNeeded(editor.dom,li);});}else{getExpandedListItemFormat(editor.formatter,name).each(liFmt=>{each$e(getPartiallySelectedListItems(editor.selection),li=>removeStyles(editor.dom,li,liFmt,vars,null));});}};const removeFormatInternal=(ed,format,vars,node,compareNode)=>{const dom=ed.dom;const elementUtils=ElementUtils(ed);if(!format.ceFalseOverride&&node&&dom.getContentEditableParent(node)==='false'){return removeResult.keep();}if(node&&!matchName(dom,node,format)&&!isColorFormatAndAnchor(node,format)){return removeResult.keep();}const elm=node;const preserveAttributes=format.preserve_attributes;if(isInlineFormat(format)&&format.remove==='all'&&isArray$1(preserveAttributes)){const attrsToPreserve=filter$5(dom.getAttribs(elm),attr=>contains$2(preserveAttributes,attr.name.toLowerCase()));dom.removeAllAttribs(elm);each$e(attrsToPreserve,attr=>dom.setAttrib(elm,attr.name,attr.value));if(attrsToPreserve.length>0){return removeResult.rename('span');}}if(format.remove!=='all'){removeStyles(dom,elm,format,vars,compareNode);each$7(format.attributes,(value,name)=>{const{name:attrName,value:attrValue}=processFormatAttrOrStyle(name,value,vars);if(format.remove_similar||isNull(attrValue)||!isElement$6(compareNode)||isEq$2(dom.getAttrib(compareNode,attrName),attrValue)){if(attrName==='class'){const currentValue=dom.getAttrib(elm,attrName);if(currentValue){let valueOut='';each$e(currentValue.split(/\\s+/),cls=>{if(/mce\\-\\w+/.test(cls)){valueOut+=(valueOut?' ':'')+cls;}});if(valueOut){dom.setAttrib(elm,attrName,valueOut);return;}}}if(MCE_ATTR_RE.test(attrName)){elm.removeAttribute('data-mce-'+attrName);}if(attrName==='style'&&matchNodeNames(['li'])(elm)&&dom.getStyle(elm,'list-style-type')==='none'){elm.removeAttribute(attrName);dom.setStyle(elm,'list-style-type','none');return;}if(attrName==='class'){elm.removeAttribute('className');}elm.removeAttribute(attrName);}});each$7(format.classes,value=>{value=replaceVars(value,vars);if(!isElement$6(compareNode)||dom.hasClass(compareNode,value)){dom.removeClass(elm,value);}});const attrs=dom.getAttribs(elm);for(let i=0;i<attrs.length;i++){const attrName=attrs[i].nodeName;if(!elementUtils.isAttributeInternal(attrName)){return removeResult.keep();}}}if(format.remove!=='none'){removeNode(ed,elm,format);return removeResult.removed();}return removeResult.keep();};const removeFormat$1=(ed,format,vars,node,compareNode)=>removeFormatInternal(ed,format,vars,node,compareNode).fold(never,newName=>{ed.dom.rename(node,newName);return true;},always);const findFormatRoot=(editor,container,name,vars,similar)=>{let formatRoot;if(container.parentNode){each$e(getParents$2(editor.dom,container.parentNode).reverse(),parent=>{if(!formatRoot&&isElement$6(parent)&&parent.id!=='_start'&&parent.id!=='_end'){const format=matchNode(editor,parent,name,vars,similar);if(format&&format.split!==false){formatRoot=parent;}}});}return formatRoot;};const removeFormatFromClone=(editor,format,vars,clone)=>removeFormatInternal(editor,format,vars,clone,clone).fold(constant(clone),newName=>{const fragment=editor.dom.createFragment();fragment.appendChild(clone);return editor.dom.rename(clone,newName);},constant(null));const wrapAndSplit=(editor,formatList,formatRoot,container,target,split,format,vars)=>{var _a,_b;let lastClone;let firstClone;const dom=editor.dom;if(formatRoot){const formatRootParent=formatRoot.parentNode;for(let parent=container.parentNode;parent&&parent!==formatRootParent;parent=parent.parentNode){let clone=dom.clone(parent,false);for(let i=0;i<formatList.length;i++){clone=removeFormatFromClone(editor,formatList[i],vars,clone);if(clone===null){break;}}if(clone){if(lastClone){clone.appendChild(lastClone);}if(!firstClone){firstClone=clone;}lastClone=clone;}}if(split&&(!format.mixed||!dom.isBlock(formatRoot))){container=(_a=dom.split(formatRoot,container))!==null&&_a!==void 0?_a:container;}if(lastClone&&firstClone){(_b=target.parentNode)===null||_b===void 0?void 0:_b.insertBefore(lastClone,target);firstClone.appendChild(target);if(isInlineFormat(format)){mergeSiblings(editor,format,vars,lastClone);}}}return container;};const remove$2=(ed,name,vars,node,similar)=>{const formatList=ed.formatter.get(name);const format=formatList[0];const dom=ed.dom;const selection=ed.selection;const splitToFormatRoot=container=>{const formatRoot=findFormatRoot(ed,container,name,vars,similar);return wrapAndSplit(ed,formatList,formatRoot,container,container,true,format,vars);};const isRemoveBookmarkNode=node=>isBookmarkNode$1(node)&&isElement$6(node)&&(node.id==='_start'||node.id==='_end');const removeNodeFormat=node=>exists(formatList,fmt=>removeFormat$1(ed,fmt,vars,node,node));const process=node=>{const children=from(node.childNodes);const removed=removeNodeFormat(node);const currentNodeMatches=removed||exists(formatList,f=>matchName(dom,node,f));const parentNode=node.parentNode;if(!currentNodeMatches&&isNonNullable(parentNode)&&shouldExpandToSelector(format)){removeNodeFormat(parentNode);}if(format.deep){if(children.length){for(let i=0;i<children.length;i++){process(children[i]);}}}const textDecorations=['underline','line-through','overline'];each$e(textDecorations,decoration=>{if(isElement$6(node)&&ed.dom.getStyle(node,'text-decoration')===decoration&&node.parentNode&&getTextDecoration(dom,node.parentNode)===decoration){removeFormat$1(ed,{deep:false,exact:true,inline:'span',styles:{textDecoration:decoration}},undefined,node);}});};const unwrap=start=>{const node=dom.get(start?'_start':'_end');if(node){let out=node[start?'firstChild':'lastChild'];if(isRemoveBookmarkNode(out)){out=out[start?'firstChild':'lastChild'];}if(isText$a(out)&&out.data.length===0){out=start?node.previousSibling||node.nextSibling:node.nextSibling||node.previousSibling;}dom.remove(node,true);return out;}else{return null;}};const removeRngStyle=rng=>{let startContainer;let endContainer;let expandedRng=expandRng(ed,rng,formatList,rng.collapsed);if(format.split){expandedRng=split(expandedRng);startContainer=getContainer(ed,expandedRng,true);endContainer=getContainer(ed,expandedRng);if(startContainer!==endContainer){startContainer=normalizeTableSelection(startContainer,true);endContainer=normalizeTableSelection(endContainer,false);if(isChildOfInlineParent(dom,startContainer,endContainer)){const marker=Optional.from(startContainer.firstChild).getOr(startContainer);splitToFormatRoot(wrapWithSiblings(dom,marker,true,'span',{'id':'_start','data-mce-type':'bookmark'}));unwrap(true);return;}if(isChildOfInlineParent(dom,endContainer,startContainer)){const marker=Optional.from(endContainer.lastChild).getOr(endContainer);splitToFormatRoot(wrapWithSiblings(dom,marker,false,'span',{'id':'_end','data-mce-type':'bookmark'}));unwrap(false);return;}startContainer=wrap$1(dom,startContainer,'span',{'id':'_start','data-mce-type':'bookmark'});endContainer=wrap$1(dom,endContainer,'span',{'id':'_end','data-mce-type':'bookmark'});const newRng=dom.createRng();newRng.setStartAfter(startContainer);newRng.setEndBefore(endContainer);walk$3(dom,newRng,nodes=>{each$e(nodes,n=>{if(!isBookmarkNode$1(n)&&!isBookmarkNode$1(n.parentNode)){splitToFormatRoot(n);}});});splitToFormatRoot(startContainer);splitToFormatRoot(endContainer);startContainer=unwrap(true);endContainer=unwrap();}else{startContainer=endContainer=splitToFormatRoot(startContainer);}expandedRng.startContainer=startContainer.parentNode?startContainer.parentNode:startContainer;expandedRng.startOffset=dom.nodeIndex(startContainer);expandedRng.endContainer=endContainer.parentNode?endContainer.parentNode:endContainer;expandedRng.endOffset=dom.nodeIndex(endContainer)+1;}walk$3(dom,expandedRng,nodes=>{each$e(nodes,process);});};if(node){if(isNode(node)){const rng=dom.createRng();rng.setStartBefore(node);rng.setEndAfter(node);removeRngStyle(rng);}else{removeRngStyle(node);}fireFormatRemove(ed,name,node,vars);return;}if(!selection.isCollapsed()||!isInlineFormat(format)||getCellsFromEditor(ed).length){preserveSelection(ed,()=>runOnRanges(ed,removeRngStyle),startNode=>isInlineFormat(format)&&match$2(ed,name,vars,startNode));ed.nodeChanged();}else{removeCaretFormat(ed,name,vars,similar);}removeListStyleFormats(ed,name,vars);fireFormatRemove(ed,name,node,vars);};const each$6=Tools.each;const mergeTextDecorationsAndColor=(dom,format,vars,node)=>{const processTextDecorationsAndColor=n=>{if(isElement$6(n)&&isElement$6(n.parentNode)&&isEditable$3(n)){const parentTextDecoration=getTextDecoration(dom,n.parentNode);if(dom.getStyle(n,'color')&&parentTextDecoration){dom.setStyle(n,'text-decoration',parentTextDecoration);}else if(dom.getStyle(n,'text-decoration')===parentTextDecoration){dom.setStyle(n,'text-decoration',null);}}};if(format.styles&&(format.styles.color||format.styles.textDecoration)){Tools.walk(node,processTextDecorationsAndColor,'childNodes');processTextDecorationsAndColor(node);}};const mergeBackgroundColorAndFontSize=(dom,format,vars,node)=>{if(format.styles&&format.styles.backgroundColor){const hasFontSize=hasStyle(dom,'fontSize');processChildElements(node,elm=>hasFontSize(elm)&&isEditable$3(elm),applyStyle(dom,'backgroundColor',replaceVars(format.styles.backgroundColor,vars)));}};const mergeSubSup=(dom,format,vars,node)=>{if(isInlineFormat(format)&&(format.inline==='sub'||format.inline==='sup')){const hasFontSize=hasStyle(dom,'fontSize');processChildElements(node,elm=>hasFontSize(elm)&&isEditable$3(elm),applyStyle(dom,'fontSize',''));const inverseTagDescendants=filter$5(dom.select(format.inline==='sup'?'sub':'sup',node),isEditable$3);dom.remove(inverseTagDescendants,true);}};const mergeWithChildren=(editor,formatList,vars,node)=>{each$6(formatList,format=>{if(isInlineFormat(format)){each$6(editor.dom.select(format.inline,node),child=>{if(isElementNode(child)){removeFormat$1(editor,format,vars,child,format.exact?child:null);}});}clearChildStyles(editor.dom,format,node);});};const mergeWithParents=(editor,format,name,vars,node)=>{const parentNode=node.parentNode;if(matchNode(editor,parentNode,name,vars)){if(removeFormat$1(editor,format,vars,node)){return;}}if(format.merge_with_parents&&parentNode){editor.dom.getParent(parentNode,parent=>{if(matchNode(editor,parent,name,vars)){removeFormat$1(editor,format,vars,node);return true;}else{return false;}});}};const each$5=Tools.each;const canFormatBR=(editor,format,node,parentName)=>{if(canFormatEmptyLines(editor)&&isInlineFormat(format)&&node.parentNode){const validBRParentElements=getTextRootBlockElements(editor.schema);const hasCaretNodeSibling=sibling(SugarElement.fromDom(node),sibling=>isCaretNode(sibling.dom));return hasNonNullableKey(validBRParentElements,parentName)&&isEmpty$2(SugarElement.fromDom(node.parentNode),false)&&!hasCaretNodeSibling;}else{return false;}};const applyStyles=(dom,elm,format,vars)=>{each$5(format.styles,(value,name)=>{dom.setStyle(elm,name,replaceVars(value,vars));});if(format.styles){const styleVal=dom.getAttrib(elm,'style');if(styleVal){dom.setAttrib(elm,'data-mce-style',styleVal);}}};const applyFormat$1=(ed,name,vars,node)=>{const formatList=ed.formatter.get(name);const format=formatList[0];const isCollapsed=!node&&ed.selection.isCollapsed();const dom=ed.dom;const selection=ed.selection;const setElementFormat=(elm,fmt=format)=>{if(isFunction(fmt.onformat)){fmt.onformat(elm,fmt,vars,node);}applyStyles(dom,elm,fmt,vars);each$5(fmt.attributes,(value,name)=>{dom.setAttrib(elm,name,replaceVars(value,vars));});each$5(fmt.classes,value=>{const newValue=replaceVars(value,vars);if(!dom.hasClass(elm,newValue)){dom.addClass(elm,newValue);}});};const applyNodeStyle=(formatList,node)=>{let found=false;each$5(formatList,format=>{if(!isSelectorFormat(format)){return false;}if(dom.getContentEditable(node)==='false'&&!format.ceFalseOverride){return true;}if(isNonNullable(format.collapsed)&&format.collapsed!==isCollapsed){return true;}if(dom.is(node,format.selector)&&!isCaretNode(node)){setElementFormat(node,format);found=true;return false;}return true;});return found;};const createWrapElement=wrapName=>{if(isString(wrapName)){const wrapElm=dom.create(wrapName);setElementFormat(wrapElm);return wrapElm;}else{return null;}};const applyRngStyle=(dom,rng,nodeSpecific)=>{const newWrappers=[];let contentEditable=true;const wrapName=format.inline||format.block;const wrapElm=createWrapElement(wrapName);const isMatchingWrappingBlock=node=>isWrappingBlockFormat(format)&&matchNode(ed,node,name,vars);const canRenameBlock=(nodeName,parentName,isEditableDescendant)=>{const isValidBlockFormatForNode=isNonWrappingBlockFormat(format)&&isTextBlock$1(ed,nodeName)&&isValid(ed,parentName,wrapName);return isEditableDescendant&&isValidBlockFormatForNode;};const canWrapNode=(node,parentName,isEditableDescendant,isWrappableNoneditableElm)=>{const nodeName=node.nodeName.toLowerCase();const isValidWrapNode=isValid(ed,wrapName,nodeName)&&isValid(ed,parentName,wrapName);const isZwsp$1=!nodeSpecific&&isText$a(node)&&isZwsp(node.data);const isCaret=isCaretNode(node);const isCorrectFormatForNode=!isInlineFormat(format)||!dom.isBlock(node);return(isEditableDescendant||isWrappableNoneditableElm)&&isValidWrapNode&&!isZwsp$1&&!isCaret&&isCorrectFormatForNode;};walk$3(dom,rng,nodes=>{let currentWrapElm;const process=node=>{let hasContentEditableState=false;let lastContentEditable=contentEditable;let isWrappableNoneditableElm=false;const nodeName=node.nodeName.toLowerCase();const parentNode=node.parentNode;const parentName=parentNode.nodeName.toLowerCase();const contentEditableValue=dom.getContentEditable(node);if(isNonNullable(contentEditableValue)){lastContentEditable=contentEditable;contentEditable=contentEditableValue==='true';hasContentEditableState=true;isWrappableNoneditableElm=isWrappableNoneditable(ed,node);}const isEditableDescendant=contentEditable&&!hasContentEditableState;if(isBr$6(node)&&!canFormatBR(ed,format,node,parentName)){currentWrapElm=null;if(isBlockFormat(format)){dom.remove(node);}return;}if(isMatchingWrappingBlock(node)){currentWrapElm=null;return;}if(canRenameBlock(nodeName,parentName,isEditableDescendant)){const elm=dom.rename(node,wrapName);setElementFormat(elm);newWrappers.push(elm);currentWrapElm=null;return;}if(isSelectorFormat(format)){let found=applyNodeStyle(formatList,node);if(!found&&isNonNullable(parentNode)&&shouldExpandToSelector(format)){found=applyNodeStyle(formatList,parentNode);}if(!isInlineFormat(format)||found){currentWrapElm=null;return;}}if(isNonNullable(wrapElm)&&canWrapNode(node,parentName,isEditableDescendant,isWrappableNoneditableElm)){if(!currentWrapElm){currentWrapElm=dom.clone(wrapElm,false);parentNode.insertBefore(currentWrapElm,node);newWrappers.push(currentWrapElm);}if(isWrappableNoneditableElm&&hasContentEditableState){contentEditable=lastContentEditable;}currentWrapElm.appendChild(node);}else{currentWrapElm=null;each$e(from(node.childNodes),process);if(hasContentEditableState){contentEditable=lastContentEditable;}currentWrapElm=null;}};each$e(nodes,process);});if(format.links===true){each$e(newWrappers,node=>{const process=node=>{if(node.nodeName==='A'){setElementFormat(node,format);}each$e(from(node.childNodes),process);};process(node);});}each$e(newWrappers,node=>{const getChildCount=node=>{let count=0;each$e(node.childNodes,node=>{if(!isEmptyTextNode$1(node)&&!isBookmarkNode$1(node)){count++;}});return count;};const mergeStyles=node=>{const childElement=find$2(node.childNodes,isElementNode$1).filter(child=>dom.getContentEditable(child)!=='false'&&matchName(dom,child,format));return childElement.map(child=>{const clone=dom.clone(child,false);setElementFormat(clone);dom.replace(clone,node,true);dom.remove(child,true);return clone;}).getOr(node);};const childCount=getChildCount(node);if((newWrappers.length>1||!dom.isBlock(node))&&childCount===0){dom.remove(node,true);return;}if(isInlineFormat(format)||isBlockFormat(format)&&format.wrapper){if(!format.exact&&childCount===1){node=mergeStyles(node);}mergeWithChildren(ed,formatList,vars,node);mergeWithParents(ed,format,name,vars,node);mergeBackgroundColorAndFontSize(dom,format,vars,node);mergeTextDecorationsAndColor(dom,format,vars,node);mergeSubSup(dom,format,vars,node);mergeSiblings(ed,format,vars,node);}});};const targetNode=isNode(node)?node:selection.getNode();if(dom.getContentEditable(targetNode)==='false'&&!isWrappableNoneditable(ed,targetNode)){node=targetNode;applyNodeStyle(formatList,node);fireFormatApply(ed,name,node,vars);return;}if(format){if(node){if(isNode(node)){if(!applyNodeStyle(formatList,node)){const rng=dom.createRng();rng.setStartBefore(node);rng.setEndAfter(node);applyRngStyle(dom,expandRng(ed,rng,formatList),true);}}else{applyRngStyle(dom,node,true);}}else{if(!isCollapsed||!isInlineFormat(format)||getCellsFromEditor(ed).length){selection.setRng(normalize(selection.getRng()));preserveSelection(ed,()=>{runOnRanges(ed,(selectionRng,fake)=>{const expandedRng=fake?selectionRng:expandRng(ed,selectionRng,formatList);applyRngStyle(dom,expandedRng,false);});},always);ed.nodeChanged();}else{applyCaretFormat(ed,name,vars);}getExpandedListItemFormat(ed.formatter,name).each(liFmt=>{each$e(getFullySelectedListItems(ed.selection),li=>applyStyles(dom,li,liFmt,vars));});}postProcess$1(name,ed);}fireFormatApply(ed,name,node,vars);};const hasVars=value=>has$2(value,'vars');const setup$t=(registeredFormatListeners,editor)=>{registeredFormatListeners.set({});editor.on('NodeChange',e=>{updateAndFireChangeCallbacks(editor,e.element,registeredFormatListeners.get());});editor.on('FormatApply FormatRemove',e=>{const element=Optional.from(e.node).map(nodeOrRange=>isNode(nodeOrRange)?nodeOrRange:nodeOrRange.startContainer).bind(node=>isElement$6(node)?Optional.some(node):Optional.from(node.parentElement)).getOrThunk(()=>fallbackElement(editor));updateAndFireChangeCallbacks(editor,element,registeredFormatListeners.get());});};const fallbackElement=editor=>editor.selection.getStart();const matchingNode=(editor,parents,format,similar,vars)=>{const isMatchingNode=node=>{const matchingFormat=editor.formatter.matchNode(node,format,vars!==null&&vars!==void 0?vars:{},similar);return!isUndefined(matchingFormat);};const isUnableToMatch=node=>{if(matchesUnInheritedFormatSelector(editor,node,format)){return true;}else{if(!similar){return isNonNullable(editor.formatter.matchNode(node,format,vars,true));}else{return false;}}};return findUntil$1(parents,isMatchingNode,isUnableToMatch);};const getParents=(editor,elm)=>{const element=elm!==null&&elm!==void 0?elm:fallbackElement(editor);return filter$5(getParents$2(editor.dom,element),node=>isElement$6(node)&&!isBogus$2(node));};const updateAndFireChangeCallbacks=(editor,elm,registeredCallbacks)=>{const parents=getParents(editor,elm);each$d(registeredCallbacks,(data,format)=>{const runIfChanged=spec=>{const match=matchingNode(editor,parents,format,spec.similar,hasVars(spec)?spec.vars:undefined);const isSet=match.isSome();if(spec.state.get()!==isSet){spec.state.set(isSet);const node=match.getOr(elm);if(hasVars(spec)){spec.callback(isSet,{node,format,parents});}else{each$e(spec.callbacks,callback=>callback(isSet,{node,format,parents}));}}};each$e([data.withSimilar,data.withoutSimilar],runIfChanged);each$e(data.withVars,runIfChanged);});};const addListeners=(editor,registeredFormatListeners,formats,callback,similar,vars)=>{const formatChangeItems=registeredFormatListeners.get();each$e(formats.split(','),format=>{const group=get$a(formatChangeItems,format).getOrThunk(()=>{const base={withSimilar:{state:Cell(false),similar:true,callbacks:[]},withoutSimilar:{state:Cell(false),similar:false,callbacks:[]},withVars:[]};formatChangeItems[format]=base;return base;});const getCurrent=()=>{const parents=getParents(editor);return matchingNode(editor,parents,format,similar,vars).isSome();};if(isUndefined(vars)){const toAppendTo=similar?group.withSimilar:group.withoutSimilar;toAppendTo.callbacks.push(callback);if(toAppendTo.callbacks.length===1){toAppendTo.state.set(getCurrent());}}else{group.withVars.push({state:Cell(getCurrent()),similar,vars,callback});}});registeredFormatListeners.set(formatChangeItems);};const removeListeners=(registeredFormatListeners,formats,callback)=>{const formatChangeItems=registeredFormatListeners.get();each$e(formats.split(','),format=>get$a(formatChangeItems,format).each(group=>{formatChangeItems[format]={withSimilar:{...group.withSimilar,callbacks:filter$5(group.withSimilar.callbacks,cb=>cb!==callback)},withoutSimilar:{...group.withoutSimilar,callbacks:filter$5(group.withoutSimilar.callbacks,cb=>cb!==callback)},withVars:filter$5(group.withVars,item=>item.callback!==callback)};}));registeredFormatListeners.set(formatChangeItems);};const formatChangedInternal=(editor,registeredFormatListeners,formats,callback,similar,vars)=>{addListeners(editor,registeredFormatListeners,formats,callback,similar,vars);return{unbind:()=>removeListeners(registeredFormatListeners,formats,callback)};};const toggle=(editor,name,vars,node)=>{const fmt=editor.formatter.get(name);if(fmt){if(match$2(editor,name,vars,node)&&(!('toggle'in fmt[0])||fmt[0].toggle)){remove$2(editor,name,vars,node);}else{applyFormat$1(editor,name,vars,node);}}};function _typeof(obj){'@babel/helpers - typeof';return _typeof='function'==typeof Symbol&&'symbol'==typeof Symbol.iterator?function(obj){return typeof obj;}:function(obj){return obj&&'function'==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?'symbol':typeof obj;},_typeof(obj);}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o;};return _setPrototypeOf(o,p);}function _isNativeReflectConstruct(){if(typeof Reflect==='undefined'||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if(typeof Proxy==='function')return true;try{Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}));return true;}catch(e){return false;}}function _construct(Parent,args,Class){if(_isNativeReflectConstruct()){_construct=Reflect.construct;}else{_construct=function _construct(Parent,args,Class){var a=[null];a.push.apply(a,args);var Constructor=Function.bind.apply(Parent,a);var instance=new Constructor();if(Class)_setPrototypeOf(instance,Class.prototype);return instance;};}return _construct.apply(null,arguments);}function _toConsumableArray(arr){return _arrayWithoutHoles(arr)||_iterableToArray(arr)||_unsupportedIterableToArray(arr)||_nonIterableSpread();}function _arrayWithoutHoles(arr){if(Array.isArray(arr))return _arrayLikeToArray(arr);}function _iterableToArray(iter){if(typeof Symbol!=='undefined'&&iter[Symbol.iterator]!=null||iter['@@iterator']!=null)return Array.from(iter);}function _unsupportedIterableToArray(o,minLen){if(!o)return;if(typeof o==='string')return _arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);if(n==='Object'&&o.constructor)n=o.constructor.name;if(n==='Map'||n==='Set')return Array.from(o);if(n==='Arguments'||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _arrayLikeToArray(o,minLen);}function _arrayLikeToArray(arr,len){if(len==null||len>arr.length)len=arr.length;for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2;}function _nonIterableSpread(){throw new TypeError('Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.');}var hasOwnProperty=Object.hasOwnProperty,setPrototypeOf=Object.setPrototypeOf,isFrozen=Object.isFrozen,getPrototypeOf=Object.getPrototypeOf,getOwnPropertyDescriptor=Object.getOwnPropertyDescriptor;var freeze=Object.freeze,seal=Object.seal,create$8=Object.create;var _ref=typeof Reflect!=='undefined'&&Reflect,apply=_ref.apply,construct=_ref.construct;if(!apply){apply=function apply(fun,thisValue,args){return fun.apply(thisValue,args);};}if(!freeze){freeze=function freeze(x){return x;};}if(!seal){seal=function seal(x){return x;};}if(!construct){construct=function construct(Func,args){return _construct(Func,_toConsumableArray(args));};}var arrayForEach=unapply(Array.prototype.forEach);var arrayPop=unapply(Array.prototype.pop);var arrayPush=unapply(Array.prototype.push);var stringToLowerCase=unapply(String.prototype.toLowerCase);var stringMatch=unapply(String.prototype.match);var stringReplace=unapply(String.prototype.replace);var stringIndexOf=unapply(String.prototype.indexOf);var stringTrim=unapply(String.prototype.trim);var regExpTest=unapply(RegExp.prototype.test);var typeErrorCreate=unconstruct(TypeError);function unapply(func){return function(thisArg){for(var _len=arguments.length,args=new Array(_len>1?_len-1:0),_key=1;_key<_len;_key++){args[_key-1]=arguments[_key];}return apply(func,thisArg,args);};}function unconstruct(func){return function(){for(var _len2=arguments.length,args=new Array(_len2),_key2=0;_key2<_len2;_key2++){args[_key2]=arguments[_key2];}return construct(func,args);};}function addToSet(set,array){if(setPrototypeOf){setPrototypeOf(set,null);}var l=array.length;while(l--){var element=array[l];if(typeof element==='string'){var lcElement=stringToLowerCase(element);if(lcElement!==element){if(!isFrozen(array)){array[l]=lcElement;}element=lcElement;}}set[element]=true;}return set;}function clone(object){var newObject=create$8(null);var property;for(property in object){if(apply(hasOwnProperty,object,[property])){newObject[property]=object[property];}}return newObject;}function lookupGetter(object,prop){while(object!==null){var desc=getOwnPropertyDescriptor(object,prop);if(desc){if(desc.get){return unapply(desc.get);}if(typeof desc.value==='function'){return unapply(desc.value);}}object=getPrototypeOf(object);}function fallbackValue(element){console.warn('fallback value for',element);return null;}return fallbackValue;}var html$1=freeze(['a','abbr','acronym','address','area','article','aside','audio','b','bdi','bdo','big','blink','blockquote','body','br','button','canvas','caption','center','cite','code','col','colgroup','content','data','datalist','dd','decorator','del','details','dfn','dialog','dir','div','dl','dt','element','em','fieldset','figcaption','figure','font','footer','form','h1','h2','h3','h4','h5','h6','head','header','hgroup','hr','html','i','img','input','ins','kbd','label','legend','li','main','map','mark','marquee','menu','menuitem','meter','nav','nobr','ol','optgroup','option','output','p','picture','pre','progress','q','rp','rt','ruby','s','samp','section','select','shadow','small','source','spacer','span','strike','strong','style','sub','summary','sup','table','tbody','td','template','textarea','tfoot','th','thead','time','tr','track','tt','u','ul','var','video','wbr']);var svg$1=freeze(['svg','a','altglyph','altglyphdef','altglyphitem','animatecolor','animatemotion','animatetransform','circle','clippath','defs','desc','ellipse','filter','font','g','glyph','glyphref','hkern','image','line','lineargradient','marker','mask','metadata','mpath','path','pattern','polygon','polyline','radialgradient','rect','stop','style','switch','symbol','text','textpath','title','tref','tspan','view','vkern']);var svgFilters=freeze(['feBlend','feColorMatrix','feComponentTransfer','feComposite','feConvolveMatrix','feDiffuseLighting','feDisplacementMap','feDistantLight','feFlood','feFuncA','feFuncB','feFuncG','feFuncR','feGaussianBlur','feImage','feMerge','feMergeNode','feMorphology','feOffset','fePointLight','feSpecularLighting','feSpotLight','feTile','feTurbulence']);var svgDisallowed=freeze(['animate','color-profile','cursor','discard','fedropshadow','font-face','font-face-format','font-face-name','font-face-src','font-face-uri','foreignobject','hatch','hatchpath','mesh','meshgradient','meshpatch','meshrow','missing-glyph','script','set','solidcolor','unknown','use']);var mathMl$1=freeze(['math','menclose','merror','mfenced','mfrac','mglyph','mi','mlabeledtr','mmultiscripts','mn','mo','mover','mpadded','mphantom','mroot','mrow','ms','mspace','msqrt','mstyle','msub','msup','msubsup','mtable','mtd','mtext','mtr','munder','munderover']);var mathMlDisallowed=freeze(['maction','maligngroup','malignmark','mlongdiv','mscarries','mscarry','msgroup','mstack','msline','msrow','semantics','annotation','annotation-xml','mprescripts','none']);var text=freeze(['#text']);var html=freeze(['accept','action','align','alt','autocapitalize','autocomplete','autopictureinpicture','autoplay','background','bgcolor','border','capture','cellpadding','cellspacing','checked','cite','class','clear','color','cols','colspan','controls','controlslist','coords','crossorigin','datetime','decoding','default','dir','disabled','disablepictureinpicture','disableremoteplayback','download','draggable','enctype','enterkeyhint','face','for','headers','height','hidden','high','href','hreflang','id','inputmode','integrity','ismap','kind','label','lang','list','loading','loop','low','max','maxlength','media','method','min','minlength','multiple','muted','name','nonce','noshade','novalidate','nowrap','open','optimum','pattern','placeholder','playsinline','poster','preload','pubdate','radiogroup','readonly','rel','required','rev','reversed','role','rows','rowspan','spellcheck','scope','selected','shape','size','sizes','span','srclang','start','src','srcset','step','style','summary','tabindex','title','translate','type','usemap','valign','value','width','xmlns','slot']);var svg=freeze(['accent-height','accumulate','additive','alignment-baseline','ascent','attributename','attributetype','azimuth','basefrequency','baseline-shift','begin','bias','by','class','clip','clippathunits','clip-path','clip-rule','color','color-interpolation','color-interpolation-filters','color-profile','color-rendering','cx','cy','d','dx','dy','diffuseconstant','direction','display','divisor','dur','edgemode','elevation','end','fill','fill-opacity','fill-rule','filter','filterunits','flood-color','flood-opacity','font-family','font-size','font-size-adjust','font-stretch','font-style','font-variant','font-weight','fx','fy','g1','g2','glyph-name','glyphref','gradientunits','gradienttransform','height','href','id','image-rendering','in','in2','k','k1','k2','k3','k4','kerning','keypoints','keysplines','keytimes','lang','lengthadjust','letter-spacing','kernelmatrix','kernelunitlength','lighting-color','local','marker-end','marker-mid','marker-start','markerheight','markerunits','markerwidth','maskcontentunits','maskunits','max','mask','media','method','mode','min','name','numoctaves','offset','operator','opacity','order','orient','orientation','origin','overflow','paint-order','path','pathlength','patterncontentunits','patterntransform','patternunits','points','preservealpha','preserveaspectratio','primitiveunits','r','rx','ry','radius','refx','refy','repeatcount','repeatdur','restart','result','rotate','scale','seed','shape-rendering','specularconstant','specularexponent','spreadmethod','startoffset','stddeviation','stitchtiles','stop-color','stop-opacity','stroke-dasharray','stroke-dashoffset','stroke-linecap','stroke-linejoin','stroke-miterlimit','stroke-opacity','stroke','stroke-width','style','surfacescale','systemlanguage','tabindex','targetx','targety','transform','transform-origin','text-anchor','text-decoration','text-rendering','textlength','type','u1','u2','unicode','values','viewbox','visibility','version','vert-adv-y','vert-origin-x','vert-origin-y','width','word-spacing','wrap','writing-mode','xchannelselector','ychannelselector','x','x1','x2','xmlns','y','y1','y2','z','zoomandpan']);var mathMl=freeze(['accent','accentunder','align','bevelled','close','columnsalign','columnlines','columnspan','denomalign','depth','dir','display','displaystyle','encoding','fence','frame','height','href','id','largeop','length','linethickness','lspace','lquote','mathbackground','mathcolor','mathsize','mathvariant','maxsize','minsize','movablelimits','notation','numalign','open','rowalign','rowlines','rowspacing','rowspan','rspace','rquote','scriptlevel','scriptminsize','scriptsizemultiplier','selection','separator','separators','stretchy','subscriptshift','supscriptshift','symmetric','voffset','width','xmlns']);var xml=freeze(['xlink:href','xml:id','xlink:title','xml:space','xmlns:xlink']);var MUSTACHE_EXPR=seal(/\\{\\{[\\w\\W]*|[\\w\\W]*\\}\\}/gm);var ERB_EXPR=seal(/<%[\\w\\W]*|[\\w\\W]*%>/gm);var DATA_ATTR=seal(/^data-[\\-\\w.\\u00B7-\\uFFFF]/);var ARIA_ATTR=seal(/^aria-[\\-\\w]+$/);var IS_ALLOWED_URI=seal(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|cid|xmpp):|[^a-z]|[a-z+.\\-]+(?:[^a-z+.\\-:]|$))/i);var IS_SCRIPT_OR_DATA=seal(/^(?:\\w+script|data):/i);var ATTR_WHITESPACE=seal(/[\\u0000-\\u0020\\u00A0\\u1680\\u180E\\u2000-\\u2029\\u205F\\u3000]/g);var DOCTYPE_NAME=seal(/^html$/i);var getGlobal=function getGlobal(){return typeof window==='undefined'?null:window;};var _createTrustedTypesPolicy=function _createTrustedTypesPolicy(trustedTypes,document){if(_typeof(trustedTypes)!=='object'||typeof trustedTypes.createPolicy!=='function'){return null;}var suffix=null;var ATTR_NAME='data-tt-policy-suffix';if(document.currentScript&&document.currentScript.hasAttribute(ATTR_NAME)){suffix=document.currentScript.getAttribute(ATTR_NAME);}var policyName='dompurify'+(suffix?'#'+suffix:'');try{return trustedTypes.createPolicy(policyName,{createHTML:function createHTML(html){return html;}});}catch(_){console.warn('TrustedTypes policy '+policyName+' could not be created.');return null;}};function createDOMPurify(){var window=arguments.length>0&&arguments[0]!==undefined?arguments[0]:getGlobal();var DOMPurify=function DOMPurify(root){return createDOMPurify(root);};DOMPurify.version='2.3.8';DOMPurify.removed=[];if(!window||!window.document||window.document.nodeType!==9){DOMPurify.isSupported=false;return DOMPurify;}var originalDocument=window.document;var document=window.document;var DocumentFragment=window.DocumentFragment,HTMLTemplateElement=window.HTMLTemplateElement,Node=window.Node,Element=window.Element,NodeFilter=window.NodeFilter,_window$NamedNodeMap=window.NamedNodeMap,NamedNodeMap=_window$NamedNodeMap===void 0?window.NamedNodeMap||window.MozNamedAttrMap:_window$NamedNodeMap,HTMLFormElement=window.HTMLFormElement,DOMParser=window.DOMParser,trustedTypes=window.trustedTypes;var ElementPrototype=Element.prototype;var cloneNode=lookupGetter(ElementPrototype,'cloneNode');var getNextSibling=lookupGetter(ElementPrototype,'nextSibling');var getChildNodes=lookupGetter(ElementPrototype,'childNodes');var getParentNode=lookupGetter(ElementPrototype,'parentNode');if(typeof HTMLTemplateElement==='function'){var template=document.createElement('template');if(template.content&&template.content.ownerDocument){document=template.content.ownerDocument;}}var trustedTypesPolicy=_createTrustedTypesPolicy(trustedTypes,originalDocument);var emptyHTML=trustedTypesPolicy?trustedTypesPolicy.createHTML(''):'';var _document=document,implementation=_document.implementation,createNodeIterator=_document.createNodeIterator,createDocumentFragment=_document.createDocumentFragment,getElementsByTagName=_document.getElementsByTagName;var importNode=originalDocument.importNode;var documentMode={};try{documentMode=clone(document).documentMode?document.documentMode:{};}catch(_){}var hooks={};DOMPurify.isSupported=typeof getParentNode==='function'&&implementation&&typeof implementation.createHTMLDocument!=='undefined'&&documentMode!==9;var MUSTACHE_EXPR$1=MUSTACHE_EXPR,ERB_EXPR$1=ERB_EXPR,DATA_ATTR$1=DATA_ATTR,ARIA_ATTR$1=ARIA_ATTR,IS_SCRIPT_OR_DATA$1=IS_SCRIPT_OR_DATA,ATTR_WHITESPACE$1=ATTR_WHITESPACE;var IS_ALLOWED_URI$1=IS_ALLOWED_URI;var ALLOWED_TAGS=null;var DEFAULT_ALLOWED_TAGS=addToSet({},[].concat(_toConsumableArray(html$1),_toConsumableArray(svg$1),_toConsumableArray(svgFilters),_toConsumableArray(mathMl$1),_toConsumableArray(text)));var ALLOWED_ATTR=null;var DEFAULT_ALLOWED_ATTR=addToSet({},[].concat(_toConsumableArray(html),_toConsumableArray(svg),_toConsumableArray(mathMl),_toConsumableArray(xml)));var CUSTOM_ELEMENT_HANDLING=Object.seal(Object.create(null,{tagNameCheck:{writable:true,configurable:false,enumerable:true,value:null},attributeNameCheck:{writable:true,configurable:false,enumerable:true,value:null},allowCustomizedBuiltInElements:{writable:true,configurable:false,enumerable:true,value:false}}));var FORBID_TAGS=null;var FORBID_ATTR=null;var ALLOW_ARIA_ATTR=true;var ALLOW_DATA_ATTR=true;var ALLOW_UNKNOWN_PROTOCOLS=false;var SAFE_FOR_TEMPLATES=false;var WHOLE_DOCUMENT=false;var SET_CONFIG=false;var FORCE_BODY=false;var RETURN_DOM=false;var RETURN_DOM_FRAGMENT=false;var RETURN_TRUSTED_TYPE=false;var SANITIZE_DOM=true;var KEEP_CONTENT=true;var IN_PLACE=false;var USE_PROFILES={};var FORBID_CONTENTS=null;var DEFAULT_FORBID_CONTENTS=addToSet({},['annotation-xml','audio','colgroup','desc','foreignobject','head','iframe','math','mi','mn','mo','ms','mtext','noembed','noframes','noscript','plaintext','script','style','svg','template','thead','title','video','xmp']);var DATA_URI_TAGS=null;var DEFAULT_DATA_URI_TAGS=addToSet({},['audio','video','img','source','image','track']);var URI_SAFE_ATTRIBUTES=null;var DEFAULT_URI_SAFE_ATTRIBUTES=addToSet({},['alt','class','for','id','label','name','pattern','placeholder','role','summary','title','value','style','xmlns']);var MATHML_NAMESPACE='http://www.w3.org/1998/Math/MathML';var SVG_NAMESPACE='http://www.w3.org/2000/svg';var HTML_NAMESPACE='http://www.w3.org/1999/xhtml';var NAMESPACE=HTML_NAMESPACE;var IS_EMPTY_INPUT=false;var PARSER_MEDIA_TYPE;var SUPPORTED_PARSER_MEDIA_TYPES=['application/xhtml+xml','text/html'];var DEFAULT_PARSER_MEDIA_TYPE='text/html';var transformCaseFunc;var CONFIG=null;var formElement=document.createElement('form');var isRegexOrFunction=function isRegexOrFunction(testValue){return testValue instanceof RegExp||testValue instanceof Function;};var _parseConfig=function _parseConfig(cfg){if(CONFIG&&CONFIG===cfg){return;}if(!cfg||_typeof(cfg)!=='object'){cfg={};}cfg=clone(cfg);ALLOWED_TAGS='ALLOWED_TAGS'in cfg?addToSet({},cfg.ALLOWED_TAGS):DEFAULT_ALLOWED_TAGS;ALLOWED_ATTR='ALLOWED_ATTR'in cfg?addToSet({},cfg.ALLOWED_ATTR):DEFAULT_ALLOWED_ATTR;URI_SAFE_ATTRIBUTES='ADD_URI_SAFE_ATTR'in cfg?addToSet(clone(DEFAULT_URI_SAFE_ATTRIBUTES),cfg.ADD_URI_SAFE_ATTR):DEFAULT_URI_SAFE_ATTRIBUTES;DATA_URI_TAGS='ADD_DATA_URI_TAGS'in cfg?addToSet(clone(DEFAULT_DATA_URI_TAGS),cfg.ADD_DATA_URI_TAGS):DEFAULT_DATA_URI_TAGS;FORBID_CONTENTS='FORBID_CONTENTS'in cfg?addToSet({},cfg.FORBID_CONTENTS):DEFAULT_FORBID_CONTENTS;FORBID_TAGS='FORBID_TAGS'in cfg?addToSet({},cfg.FORBID_TAGS):{};FORBID_ATTR='FORBID_ATTR'in cfg?addToSet({},cfg.FORBID_ATTR):{};USE_PROFILES='USE_PROFILES'in cfg?cfg.USE_PROFILES:false;ALLOW_ARIA_ATTR=cfg.ALLOW_ARIA_ATTR!==false;ALLOW_DATA_ATTR=cfg.ALLOW_DATA_ATTR!==false;ALLOW_UNKNOWN_PROTOCOLS=cfg.ALLOW_UNKNOWN_PROTOCOLS||false;SAFE_FOR_TEMPLATES=cfg.SAFE_FOR_TEMPLATES||false;WHOLE_DOCUMENT=cfg.WHOLE_DOCUMENT||false;RETURN_DOM=cfg.RETURN_DOM||false;RETURN_DOM_FRAGMENT=cfg.RETURN_DOM_FRAGMENT||false;RETURN_TRUSTED_TYPE=cfg.RETURN_TRUSTED_TYPE||false;FORCE_BODY=cfg.FORCE_BODY||false;SANITIZE_DOM=cfg.SANITIZE_DOM!==false;KEEP_CONTENT=cfg.KEEP_CONTENT!==false;IN_PLACE=cfg.IN_PLACE||false;IS_ALLOWED_URI$1=cfg.ALLOWED_URI_REGEXP||IS_ALLOWED_URI$1;NAMESPACE=cfg.NAMESPACE||HTML_NAMESPACE;if(cfg.CUSTOM_ELEMENT_HANDLING&&isRegexOrFunction(cfg.CUSTOM_ELEMENT_HANDLING.tagNameCheck)){CUSTOM_ELEMENT_HANDLING.tagNameCheck=cfg.CUSTOM_ELEMENT_HANDLING.tagNameCheck;}if(cfg.CUSTOM_ELEMENT_HANDLING&&isRegexOrFunction(cfg.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)){CUSTOM_ELEMENT_HANDLING.attributeNameCheck=cfg.CUSTOM_ELEMENT_HANDLING.attributeNameCheck;}if(cfg.CUSTOM_ELEMENT_HANDLING&&typeof cfg.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements==='boolean'){CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements=cfg.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements;}PARSER_MEDIA_TYPE=SUPPORTED_PARSER_MEDIA_TYPES.indexOf(cfg.PARSER_MEDIA_TYPE)===-1?PARSER_MEDIA_TYPE=DEFAULT_PARSER_MEDIA_TYPE:PARSER_MEDIA_TYPE=cfg.PARSER_MEDIA_TYPE;transformCaseFunc=PARSER_MEDIA_TYPE==='application/xhtml+xml'?function(x){return x;}:stringToLowerCase;if(SAFE_FOR_TEMPLATES){ALLOW_DATA_ATTR=false;}if(RETURN_DOM_FRAGMENT){RETURN_DOM=true;}if(USE_PROFILES){ALLOWED_TAGS=addToSet({},_toConsumableArray(text));ALLOWED_ATTR=[];if(USE_PROFILES.html===true){addToSet(ALLOWED_TAGS,html$1);addToSet(ALLOWED_ATTR,html);}if(USE_PROFILES.svg===true){addToSet(ALLOWED_TAGS,svg$1);addToSet(ALLOWED_ATTR,svg);addToSet(ALLOWED_ATTR,xml);}if(USE_PROFILES.svgFilters===true){addToSet(ALLOWED_TAGS,svgFilters);addToSet(ALLOWED_ATTR,svg);addToSet(ALLOWED_ATTR,xml);}if(USE_PROFILES.mathMl===true){addToSet(ALLOWED_TAGS,mathMl$1);addToSet(ALLOWED_ATTR,mathMl);addToSet(ALLOWED_ATTR,xml);}}if(cfg.ADD_TAGS){if(ALLOWED_TAGS===DEFAULT_ALLOWED_TAGS){ALLOWED_TAGS=clone(ALLOWED_TAGS);}addToSet(ALLOWED_TAGS,cfg.ADD_TAGS);}if(cfg.ADD_ATTR){if(ALLOWED_ATTR===DEFAULT_ALLOWED_ATTR){ALLOWED_ATTR=clone(ALLOWED_ATTR);}addToSet(ALLOWED_ATTR,cfg.ADD_ATTR);}if(cfg.ADD_URI_SAFE_ATTR){addToSet(URI_SAFE_ATTRIBUTES,cfg.ADD_URI_SAFE_ATTR);}if(cfg.FORBID_CONTENTS){if(FORBID_CONTENTS===DEFAULT_FORBID_CONTENTS){FORBID_CONTENTS=clone(FORBID_CONTENTS);}addToSet(FORBID_CONTENTS,cfg.FORBID_CONTENTS);}if(KEEP_CONTENT){ALLOWED_TAGS['#text']=true;}if(WHOLE_DOCUMENT){addToSet(ALLOWED_TAGS,['html','head','body']);}if(ALLOWED_TAGS.table){addToSet(ALLOWED_TAGS,['tbody']);delete FORBID_TAGS.tbody;}if(freeze){freeze(cfg);}CONFIG=cfg;};var MATHML_TEXT_INTEGRATION_POINTS=addToSet({},['mi','mo','mn','ms','mtext']);var HTML_INTEGRATION_POINTS=addToSet({},['foreignobject','desc','title','annotation-xml']);var COMMON_SVG_AND_HTML_ELEMENTS=addToSet({},['title','style','font','a','script']);var ALL_SVG_TAGS=addToSet({},svg$1);addToSet(ALL_SVG_TAGS,svgFilters);addToSet(ALL_SVG_TAGS,svgDisallowed);var ALL_MATHML_TAGS=addToSet({},mathMl$1);addToSet(ALL_MATHML_TAGS,mathMlDisallowed);var _checkValidNamespace=function _checkValidNamespace(element){var parent=getParentNode(element);if(!parent||!parent.tagName){parent={namespaceURI:HTML_NAMESPACE,tagName:'template'};}var tagName=stringToLowerCase(element.tagName);var parentTagName=stringToLowerCase(parent.tagName);if(element.namespaceURI===SVG_NAMESPACE){if(parent.namespaceURI===HTML_NAMESPACE){return tagName==='svg';}if(parent.namespaceURI===MATHML_NAMESPACE){return tagName==='svg'&&(parentTagName==='annotation-xml'||MATHML_TEXT_INTEGRATION_POINTS[parentTagName]);}return Boolean(ALL_SVG_TAGS[tagName]);}if(element.namespaceURI===MATHML_NAMESPACE){if(parent.namespaceURI===HTML_NAMESPACE){return tagName==='math';}if(parent.namespaceURI===SVG_NAMESPACE){return tagName==='math'&&HTML_INTEGRATION_POINTS[parentTagName];}return Boolean(ALL_MATHML_TAGS[tagName]);}if(element.namespaceURI===HTML_NAMESPACE){if(parent.namespaceURI===SVG_NAMESPACE&&!HTML_INTEGRATION_POINTS[parentTagName]){return false;}if(parent.namespaceURI===MATHML_NAMESPACE&&!MATHML_TEXT_INTEGRATION_POINTS[parentTagName]){return false;}return!ALL_MATHML_TAGS[tagName]&&(COMMON_SVG_AND_HTML_ELEMENTS[tagName]||!ALL_SVG_TAGS[tagName]);}return false;};var _forceRemove=function _forceRemove(node){arrayPush(DOMPurify.removed,{element:node});try{node.parentNode.removeChild(node);}catch(_){try{node.outerHTML=emptyHTML;}catch(_){node.remove();}}};var _removeAttribute=function _removeAttribute(name,node){try{arrayPush(DOMPurify.removed,{attribute:node.getAttributeNode(name),from:node});}catch(_){arrayPush(DOMPurify.removed,{attribute:null,from:node});}node.removeAttribute(name);if(name==='is'&&!ALLOWED_ATTR[name]){if(RETURN_DOM||RETURN_DOM_FRAGMENT){try{_forceRemove(node);}catch(_){}}else{try{node.setAttribute(name,'');}catch(_){}}}};var _initDocument=function _initDocument(dirty){var doc;var leadingWhitespace;if(FORCE_BODY){dirty='<remove></remove>'+dirty;}else{var matches=stringMatch(dirty,/^[\\r\\n\\t ]+/);leadingWhitespace=matches&&matches[0];}if(PARSER_MEDIA_TYPE==='application/xhtml+xml'){dirty='<html xmlns=\"http://www.w3.org/1999/xhtml\"><head></head><body>'+dirty+'</body></html>';}var dirtyPayload=trustedTypesPolicy?trustedTypesPolicy.createHTML(dirty):dirty;if(NAMESPACE===HTML_NAMESPACE){try{doc=new DOMParser().parseFromString(dirtyPayload,PARSER_MEDIA_TYPE);}catch(_){}}if(!doc||!doc.documentElement){doc=implementation.createDocument(NAMESPACE,'template',null);try{doc.documentElement.innerHTML=IS_EMPTY_INPUT?'':dirtyPayload;}catch(_){}}var body=doc.body||doc.documentElement;if(dirty&&leadingWhitespace){body.insertBefore(document.createTextNode(leadingWhitespace),body.childNodes[0]||null);}if(NAMESPACE===HTML_NAMESPACE){return getElementsByTagName.call(doc,WHOLE_DOCUMENT?'html':'body')[0];}return WHOLE_DOCUMENT?doc.documentElement:body;};var _createIterator=function _createIterator(root){return createNodeIterator.call(root.ownerDocument||root,root,NodeFilter.SHOW_ELEMENT|NodeFilter.SHOW_COMMENT|NodeFilter.SHOW_TEXT,null,false);};var _isClobbered=function _isClobbered(elm){return elm instanceof HTMLFormElement&&(typeof elm.nodeName!=='string'||typeof elm.textContent!=='string'||typeof elm.removeChild!=='function'||!(elm.attributes instanceof NamedNodeMap)||typeof elm.removeAttribute!=='function'||typeof elm.setAttribute!=='function'||typeof elm.namespaceURI!=='string'||typeof elm.insertBefore!=='function');};var _isNode=function _isNode(object){return _typeof(Node)==='object'?object instanceof Node:object&&_typeof(object)==='object'&&typeof object.nodeType==='number'&&typeof object.nodeName==='string';};var _executeHook=function _executeHook(entryPoint,currentNode,data){if(!hooks[entryPoint]){return;}arrayForEach(hooks[entryPoint],function(hook){hook.call(DOMPurify,currentNode,data,CONFIG);});};var _sanitizeElements=function _sanitizeElements(currentNode){var content;_executeHook('beforeSanitizeElements',currentNode,null);if(_isClobbered(currentNode)){_forceRemove(currentNode);return true;}if(regExpTest(/[\\u0080-\\uFFFF]/,currentNode.nodeName)){_forceRemove(currentNode);return true;}var tagName=transformCaseFunc(currentNode.nodeName);_executeHook('uponSanitizeElement',currentNode,{tagName:tagName,allowedTags:ALLOWED_TAGS});if(currentNode.hasChildNodes()&&!_isNode(currentNode.firstElementChild)&&(!_isNode(currentNode.content)||!_isNode(currentNode.content.firstElementChild))&&regExpTest(/<[/\\w]/g,currentNode.innerHTML)&&regExpTest(/<[/\\w]/g,currentNode.textContent)){_forceRemove(currentNode);return true;}if(tagName==='select'&&regExpTest(/<template/i,currentNode.innerHTML)){_forceRemove(currentNode);return true;}if(!ALLOWED_TAGS[tagName]||FORBID_TAGS[tagName]){if(!FORBID_TAGS[tagName]&&_basicCustomElementTest(tagName)){if(CUSTOM_ELEMENT_HANDLING.tagNameCheck instanceof RegExp&&regExpTest(CUSTOM_ELEMENT_HANDLING.tagNameCheck,tagName))return false;if(CUSTOM_ELEMENT_HANDLING.tagNameCheck instanceof Function&&CUSTOM_ELEMENT_HANDLING.tagNameCheck(tagName))return false;}if(KEEP_CONTENT&&!FORBID_CONTENTS[tagName]){var parentNode=getParentNode(currentNode)||currentNode.parentNode;var childNodes=getChildNodes(currentNode)||currentNode.childNodes;if(childNodes&&parentNode){var childCount=childNodes.length;for(var i=childCount-1;i>=0;--i){parentNode.insertBefore(cloneNode(childNodes[i],true),getNextSibling(currentNode));}}}_forceRemove(currentNode);return true;}if(currentNode instanceof Element&&!_checkValidNamespace(currentNode)){_forceRemove(currentNode);return true;}if((tagName==='noscript'||tagName==='noembed')&&regExpTest(/<\\/no(script|embed)/i,currentNode.innerHTML)){_forceRemove(currentNode);return true;}if(SAFE_FOR_TEMPLATES&&currentNode.nodeType===3){content=currentNode.textContent;content=stringReplace(content,MUSTACHE_EXPR$1,' ');content=stringReplace(content,ERB_EXPR$1,' ');if(currentNode.textContent!==content){arrayPush(DOMPurify.removed,{element:currentNode.cloneNode()});currentNode.textContent=content;}}_executeHook('afterSanitizeElements',currentNode,null);return false;};var _isValidAttribute=function _isValidAttribute(lcTag,lcName,value){if(SANITIZE_DOM&&(lcName==='id'||lcName==='name')&&(value in document||value in formElement)){return false;}if(ALLOW_DATA_ATTR&&!FORBID_ATTR[lcName]&&regExpTest(DATA_ATTR$1,lcName));else if(ALLOW_ARIA_ATTR&&regExpTest(ARIA_ATTR$1,lcName));else if(!ALLOWED_ATTR[lcName]||FORBID_ATTR[lcName]){if(_basicCustomElementTest(lcTag)&&(CUSTOM_ELEMENT_HANDLING.tagNameCheck instanceof RegExp&&regExpTest(CUSTOM_ELEMENT_HANDLING.tagNameCheck,lcTag)||CUSTOM_ELEMENT_HANDLING.tagNameCheck instanceof Function&&CUSTOM_ELEMENT_HANDLING.tagNameCheck(lcTag))&&(CUSTOM_ELEMENT_HANDLING.attributeNameCheck instanceof RegExp&&regExpTest(CUSTOM_ELEMENT_HANDLING.attributeNameCheck,lcName)||CUSTOM_ELEMENT_HANDLING.attributeNameCheck instanceof Function&&CUSTOM_ELEMENT_HANDLING.attributeNameCheck(lcName))||lcName==='is'&&CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements&&(CUSTOM_ELEMENT_HANDLING.tagNameCheck instanceof RegExp&&regExpTest(CUSTOM_ELEMENT_HANDLING.tagNameCheck,value)||CUSTOM_ELEMENT_HANDLING.tagNameCheck instanceof Function&&CUSTOM_ELEMENT_HANDLING.tagNameCheck(value)));else{return false;}}else if(URI_SAFE_ATTRIBUTES[lcName]);else if(regExpTest(IS_ALLOWED_URI$1,stringReplace(value,ATTR_WHITESPACE$1,'')));else if((lcName==='src'||lcName==='xlink:href'||lcName==='href')&&lcTag!=='script'&&stringIndexOf(value,'data:')===0&&DATA_URI_TAGS[lcTag]);else if(ALLOW_UNKNOWN_PROTOCOLS&&!regExpTest(IS_SCRIPT_OR_DATA$1,stringReplace(value,ATTR_WHITESPACE$1,'')));else if(!value);else{return false;}return true;};var _basicCustomElementTest=function _basicCustomElementTest(tagName){return tagName.indexOf('-')>0;};var _sanitizeAttributes=function _sanitizeAttributes(currentNode){var attr;var value;var lcName;var l;_executeHook('beforeSanitizeAttributes',currentNode,null);var attributes=currentNode.attributes;if(!attributes){return;}var hookEvent={attrName:'',attrValue:'',keepAttr:true,allowedAttributes:ALLOWED_ATTR};l=attributes.length;while(l--){attr=attributes[l];var _attr=attr,name=_attr.name,namespaceURI=_attr.namespaceURI;value=name==='value'?attr.value:stringTrim(attr.value);lcName=transformCaseFunc(name);var initValue=value;hookEvent.attrName=lcName;hookEvent.attrValue=value;hookEvent.keepAttr=true;hookEvent.forceKeepAttr=undefined;_executeHook('uponSanitizeAttribute',currentNode,hookEvent);value=hookEvent.attrValue;if(hookEvent.forceKeepAttr){continue;}if(!hookEvent.keepAttr){_removeAttribute(name,currentNode);continue;}if(regExpTest(/\\/>/i,value)){_removeAttribute(name,currentNode);continue;}if(SAFE_FOR_TEMPLATES){value=stringReplace(value,MUSTACHE_EXPR$1,' ');value=stringReplace(value,ERB_EXPR$1,' ');}var lcTag=transformCaseFunc(currentNode.nodeName);if(!_isValidAttribute(lcTag,lcName,value)){_removeAttribute(name,currentNode);continue;}if(value!==initValue){try{if(namespaceURI){currentNode.setAttributeNS(namespaceURI,name,value);}else{currentNode.setAttribute(name,value);}}catch(_){_removeAttribute(name,currentNode);}}}_executeHook('afterSanitizeAttributes',currentNode,null);};var _sanitizeShadowDOM=function _sanitizeShadowDOM(fragment){var shadowNode;var shadowIterator=_createIterator(fragment);_executeHook('beforeSanitizeShadowDOM',fragment,null);while(shadowNode=shadowIterator.nextNode()){_executeHook('uponSanitizeShadowNode',shadowNode,null);if(_sanitizeElements(shadowNode)){continue;}if(shadowNode.content instanceof DocumentFragment){_sanitizeShadowDOM(shadowNode.content);}_sanitizeAttributes(shadowNode);}_executeHook('afterSanitizeShadowDOM',fragment,null);};DOMPurify.sanitize=function(dirty,cfg){var body;var importedNode;var currentNode;var oldNode;var returnNode;IS_EMPTY_INPUT=!dirty;if(IS_EMPTY_INPUT){dirty='<!-->';}if(typeof dirty!=='string'&&!_isNode(dirty)){if(typeof dirty.toString!=='function'){throw typeErrorCreate('toString is not a function');}else{dirty=dirty.toString();if(typeof dirty!=='string'){throw typeErrorCreate('dirty is not a string, aborting');}}}if(!DOMPurify.isSupported){if(_typeof(window.toStaticHTML)==='object'||typeof window.toStaticHTML==='function'){if(typeof dirty==='string'){return window.toStaticHTML(dirty);}if(_isNode(dirty)){return window.toStaticHTML(dirty.outerHTML);}}return dirty;}if(!SET_CONFIG){_parseConfig(cfg);}DOMPurify.removed=[];if(typeof dirty==='string'){IN_PLACE=false;}if(IN_PLACE){if(dirty.nodeName){var tagName=transformCaseFunc(dirty.nodeName);if(!ALLOWED_TAGS[tagName]||FORBID_TAGS[tagName]){throw typeErrorCreate('root node is forbidden and cannot be sanitized in-place');}}}else if(dirty instanceof Node){body=_initDocument('<!---->');importedNode=body.ownerDocument.importNode(dirty,true);if(importedNode.nodeType===1&&importedNode.nodeName==='BODY'){body=importedNode;}else if(importedNode.nodeName==='HTML'){body=importedNode;}else{body.appendChild(importedNode);}}else{if(!RETURN_DOM&&!SAFE_FOR_TEMPLATES&&!WHOLE_DOCUMENT&&dirty.indexOf('<')===-1){return trustedTypesPolicy&&RETURN_TRUSTED_TYPE?trustedTypesPolicy.createHTML(dirty):dirty;}body=_initDocument(dirty);if(!body){return RETURN_DOM?null:RETURN_TRUSTED_TYPE?emptyHTML:'';}}if(body&&FORCE_BODY){_forceRemove(body.firstChild);}var nodeIterator=_createIterator(IN_PLACE?dirty:body);while(currentNode=nodeIterator.nextNode()){if(currentNode.nodeType===3&&currentNode===oldNode){continue;}if(_sanitizeElements(currentNode)){continue;}if(currentNode.content instanceof DocumentFragment){_sanitizeShadowDOM(currentNode.content);}_sanitizeAttributes(currentNode);oldNode=currentNode;}oldNode=null;if(IN_PLACE){return dirty;}if(RETURN_DOM){if(RETURN_DOM_FRAGMENT){returnNode=createDocumentFragment.call(body.ownerDocument);while(body.firstChild){returnNode.appendChild(body.firstChild);}}else{returnNode=body;}if(ALLOWED_ATTR.shadowroot){returnNode=importNode.call(originalDocument,returnNode,true);}return returnNode;}var serializedHTML=WHOLE_DOCUMENT?body.outerHTML:body.innerHTML;if(WHOLE_DOCUMENT&&ALLOWED_TAGS['!doctype']&&body.ownerDocument&&body.ownerDocument.doctype&&body.ownerDocument.doctype.name&&regExpTest(DOCTYPE_NAME,body.ownerDocument.doctype.name)){serializedHTML='<!DOCTYPE '+body.ownerDocument.doctype.name+'>\\n'+serializedHTML;}if(SAFE_FOR_TEMPLATES){serializedHTML=stringReplace(serializedHTML,MUSTACHE_EXPR$1,' ');serializedHTML=stringReplace(serializedHTML,ERB_EXPR$1,' ');}return trustedTypesPolicy&&RETURN_TRUSTED_TYPE?trustedTypesPolicy.createHTML(serializedHTML):serializedHTML;};DOMPurify.setConfig=function(cfg){_parseConfig(cfg);SET_CONFIG=true;};DOMPurify.clearConfig=function(){CONFIG=null;SET_CONFIG=false;};DOMPurify.isValidAttribute=function(tag,attr,value){if(!CONFIG){_parseConfig({});}var lcTag=transformCaseFunc(tag);var lcName=transformCaseFunc(attr);return _isValidAttribute(lcTag,lcName,value);};DOMPurify.addHook=function(entryPoint,hookFunction){if(typeof hookFunction!=='function'){return;}hooks[entryPoint]=hooks[entryPoint]||[];arrayPush(hooks[entryPoint],hookFunction);};DOMPurify.removeHook=function(entryPoint){if(hooks[entryPoint]){return arrayPop(hooks[entryPoint]);}};DOMPurify.removeHooks=function(entryPoint){if(hooks[entryPoint]){hooks[entryPoint]=[];}};DOMPurify.removeAllHooks=function(){hooks={};};return DOMPurify;}var purify=createDOMPurify();const explode$1=Tools.explode;const create$7=()=>{const filters={};const addFilter=(name,callback)=>{each$e(explode$1(name),name=>{if(!has$2(filters,name)){filters[name]={name,callbacks:[]};}filters[name].callbacks.push(callback);});};const getFilters=()=>values(filters);const removeFilter=(name,callback)=>{each$e(explode$1(name),name=>{if(has$2(filters,name)){if(isNonNullable(callback)){const filter=filters[name];const newCallbacks=filter$5(filter.callbacks,c=>c!==callback);if(newCallbacks.length>0){filter.callbacks=newCallbacks;}else{delete filters[name];}}else{delete filters[name];}}});};return{addFilter,getFilters,removeFilter};};const removeAttrs=(node,names)=>{each$e(names,name=>{node.attr(name,null);});};const addFontToSpansFilter=(domParser,styles,fontSizes)=>{domParser.addNodeFilter('font',nodes=>{each$e(nodes,node=>{const props=styles.parse(node.attr('style'));const color=node.attr('color');const face=node.attr('face');const size=node.attr('size');if(color){props.color=color;}if(face){props['font-family']=face;}if(size){toInt(size).each(num=>{props['font-size']=fontSizes[num-1];});}node.name='span';node.attr('style',styles.serialize(props));removeAttrs(node,['color','face','size']);});});};const addStrikeFilter=(domParser,schema,styles)=>{domParser.addNodeFilter('strike',nodes=>{const convertToSTag=schema.type!=='html4';each$e(nodes,node=>{if(convertToSTag){node.name='s';}else{const props=styles.parse(node.attr('style'));props['text-decoration']='line-through';node.name='span';node.attr('style',styles.serialize(props));}});});};const addFilters=(domParser,settings,schema)=>{var _a;const styles=Styles();if(settings.convert_fonts_to_spans){addFontToSpansFilter(domParser,styles,Tools.explode((_a=settings.font_size_legacy_values)!==null&&_a!==void 0?_a:''));}addStrikeFilter(domParser,schema,styles);};const register$5=(domParser,settings,schema)=>{if(settings.inline_styles){addFilters(domParser,settings,schema);}};const blobUriToBlob=url=>fetch(url).then(res=>res.ok?res.blob():Promise.reject()).catch(()=>Promise.reject(`Cannot convert ${url} to Blob. Resource might not exist or is inaccessible.`));const extractBase64Data=data=>{const matches=/([a-z0-9+\\/=\\s]+)/i.exec(data);return matches?matches[1]:'';};const parseDataUri=uri=>{const[type,...rest]=uri.split(',');const data=rest.join(',');const matches=/data:([^/]+\\/[^;]+)(;.+)?/.exec(type);if(matches){const base64Encoded=matches[2]===';base64';const extractedData=base64Encoded?extractBase64Data(data):decodeURIComponent(data);return Optional.some({type:matches[1],data:extractedData,base64Encoded});}else{return Optional.none();}};const buildBlob=(type,data,base64Encoded=true)=>{let str=data;if(base64Encoded){try{str=atob(data);}catch(e){return Optional.none();}}const arr=new Uint8Array(str.length);for(let i=0;i<arr.length;i++){arr[i]=str.charCodeAt(i);}return Optional.some(new Blob([arr],{type}));};const dataUriToBlob=uri=>{return new Promise((resolve,reject)=>{parseDataUri(uri).bind(({type,data,base64Encoded})=>buildBlob(type,data,base64Encoded)).fold(()=>reject('Invalid data URI'),resolve);});};const uriToBlob=url=>{if(startsWith(url,'blob:')){return blobUriToBlob(url);}else if(startsWith(url,'data:')){return dataUriToBlob(url);}else{return Promise.reject('Unknown URI format');}};const blobToDataUri=blob=>{return new Promise((resolve,reject)=>{const reader=new FileReader();reader.onloadend=()=>{resolve(reader.result);};reader.onerror=()=>{var _a;reject((_a=reader.error)===null||_a===void 0?void 0:_a.message);};reader.readAsDataURL(blob);});};let count$1=0;const uniqueId$1=prefix=>{return(prefix||'blobid')+count$1++;};const processDataUri=(dataUri,base64Only,generateBlobInfo)=>{return parseDataUri(dataUri).bind(({data,type,base64Encoded})=>{if(base64Only&&!base64Encoded){return Optional.none();}else{const base64=base64Encoded?data:btoa(data);return generateBlobInfo(base64,type);}});};const createBlobInfo$1=(blobCache,blob,base64)=>{const blobInfo=blobCache.create(uniqueId$1(),blob,base64);blobCache.add(blobInfo);return blobInfo;};const dataUriToBlobInfo=(blobCache,dataUri,base64Only=false)=>{return processDataUri(dataUri,base64Only,(base64,type)=>Optional.from(blobCache.getByData(base64,type)).orThunk(()=>buildBlob(type,base64).map(blob=>createBlobInfo$1(blobCache,blob,base64))));};const imageToBlobInfo=(blobCache,imageSrc)=>{const invalidDataUri=()=>Promise.reject('Invalid data URI');if(startsWith(imageSrc,'blob:')){const blobInfo=blobCache.getByUri(imageSrc);if(isNonNullable(blobInfo)){return Promise.resolve(blobInfo);}else{return uriToBlob(imageSrc).then(blob=>{return blobToDataUri(blob).then(dataUri=>{return processDataUri(dataUri,false,base64=>{return Optional.some(createBlobInfo$1(blobCache,blob,base64));}).getOrThunk(invalidDataUri);});});}}else if(startsWith(imageSrc,'data:')){return dataUriToBlobInfo(blobCache,imageSrc).fold(invalidDataUri,blobInfo=>Promise.resolve(blobInfo));}else{return Promise.reject('Unknown image data format');}};const isBogusImage=img=>isNonNullable(img.attr('data-mce-bogus'));const isInternalImageSource=img=>img.attr('src')===Env.transparentSrc||isNonNullable(img.attr('data-mce-placeholder'));const registerBase64ImageFilter=(parser,settings)=>{const{blob_cache:blobCache}=settings;if(blobCache){const processImage=img=>{const inputSrc=img.attr('src');if(isInternalImageSource(img)||isBogusImage(img)||isNullable(inputSrc)){return;}dataUriToBlobInfo(blobCache,inputSrc,true).each(blobInfo=>{img.attr('src',blobInfo.blobUri());});};parser.addAttributeFilter('src',nodes=>each$e(nodes,processImage));}};const register$4=(parser,settings)=>{const schema=parser.schema;if(settings.remove_trailing_brs){parser.addNodeFilter('br',(nodes,_,args)=>{const blockElements=Tools.extend({},schema.getBlockElements());const nonEmptyElements=schema.getNonEmptyElements();const whitespaceElements=schema.getWhitespaceElements();blockElements.body=1;for(let i=0,l=nodes.length;i<l;i++){let node=nodes[i];let parent=node.parent;if(parent&&blockElements[parent.name]&&node===parent.lastChild){let prev=node.prev;while(prev){const prevName=prev.name;if(prevName!=='span'||prev.attr('data-mce-type')!=='bookmark'){if(prevName==='br'){node=null;}break;}prev=prev.prev;}if(node){node.remove();if(isEmpty(schema,nonEmptyElements,whitespaceElements,parent)){const elementRule=schema.getElementRule(parent.name);if(elementRule){if(elementRule.removeEmpty){parent.remove();}else if(elementRule.paddEmpty){paddEmptyNode(settings,args,blockElements,parent);}}}}}else{let lastParent=node;while(parent&&parent.firstChild===lastParent&&parent.lastChild===lastParent){lastParent=parent;if(blockElements[parent.name]){break;}parent=parent.parent;}if(lastParent===parent){const textNode=new AstNode('#text',3);textNode.value=nbsp;node.replace(textNode);}}}});}parser.addAttributeFilter('href',nodes=>{let i=nodes.length;const appendRel=rel=>{const parts=rel.split(' ').filter(p=>p.length>0);return parts.concat(['noopener']).sort().join(' ');};const addNoOpener=rel=>{const newRel=rel?Tools.trim(rel):'';if(!/\\b(noopener)\\b/g.test(newRel)){return appendRel(newRel);}else{return newRel;}};if(!settings.allow_unsafe_link_target){while(i--){const node=nodes[i];if(node.name==='a'&&node.attr('target')==='_blank'){node.attr('rel',addNoOpener(node.attr('rel')));}}}});if(!settings.allow_html_in_named_anchor){parser.addAttributeFilter('id,name',nodes=>{let i=nodes.length,sibling,prevSibling,parent,node;while(i--){node=nodes[i];if(node.name==='a'&&node.firstChild&&!node.attr('href')){parent=node.parent;sibling=node.lastChild;while(sibling&&parent){prevSibling=sibling.prev;parent.insert(sibling,node);sibling=prevSibling;}}}});}if(settings.fix_list_elements){parser.addNodeFilter('ul,ol',nodes=>{let i=nodes.length,node,parentNode;while(i--){node=nodes[i];parentNode=node.parent;if(parentNode&&(parentNode.name==='ul'||parentNode.name==='ol')){if(node.prev&&node.prev.name==='li'){node.prev.append(node);}else{const li=new AstNode('li',1);li.attr('style','list-style-type: none');node.wrap(li);}}}});}const validClasses=schema.getValidClasses();if(settings.validate&&validClasses){parser.addAttributeFilter('class',nodes=>{var _a;let i=nodes.length;while(i--){const node=nodes[i];const clazz=(_a=node.attr('class'))!==null&&_a!==void 0?_a:'';const classList=Tools.explode(clazz,' ');let classValue='';for(let ci=0;ci<classList.length;ci++){const className=classList[ci];let valid=false;let validClassesMap=validClasses['*'];if(validClassesMap&&validClassesMap[className]){valid=true;}validClassesMap=validClasses[node.name];if(!valid&&validClassesMap&&validClassesMap[className]){valid=true;}if(valid){if(classValue){classValue+=' ';}classValue+=className;}}if(!classValue.length){classValue=null;}node.attr('class',classValue);}});}registerBase64ImageFilter(parser,settings);};const each$4=Tools.each,trim=Tools.trim;const queryParts=['source','protocol','authority','userInfo','user','password','host','port','relative','path','directory','file','query','anchor'];const DEFAULT_PORTS={ftp:21,http:80,https:443,mailto:25};const safeSvgDataUrlElements=['img','video'];const blockSvgDataUris=(allowSvgDataUrls,tagName)=>{if(isNonNullable(allowSvgDataUrls)){return!allowSvgDataUrls;}else{return isNonNullable(tagName)?!contains$2(safeSvgDataUrlElements,tagName):true;}};const decodeUri=encodedUri=>{try{return decodeURIComponent(encodedUri);}catch(ex){return unescape(encodedUri);}};const isInvalidUri=(settings,uri,tagName)=>{const decodedUri=decodeUri(uri);if(settings.allow_script_urls){return false;}else if(/((java|vb)script|mhtml):/i.test(decodedUri)){return true;}else if(settings.allow_html_data_urls){return false;}else if(/^data:image\\//i.test(decodedUri)){return blockSvgDataUris(settings.allow_svg_data_urls,tagName)&&/^data:image\\/svg\\+xml/i.test(decodedUri);}else{return /^data:/i.test(decodedUri);}};class URI{constructor(url,settings={}){this.path='';this.directory='';url=trim(url);this.settings=settings;const baseUri=settings.base_uri;const self=this;if(/^([\\w\\-]+):([^\\/]{2})/i.test(url)||/^\\s*#/.test(url)){self.source=url;return;}const isProtocolRelative=url.indexOf('//')===0;if(url.indexOf('/')===0&&!isProtocolRelative){url=(baseUri?baseUri.protocol||'http':'http')+'://mce_host'+url;}if(!/^[\\w\\-]*:?\\/\\//.test(url)){const baseUrl=baseUri?baseUri.path:new URI(document.location.href).directory;if((baseUri===null||baseUri===void 0?void 0:baseUri.protocol)===''){url='//mce_host'+self.toAbsPath(baseUrl,url);}else{const match=/([^#?]*)([#?]?.*)/.exec(url);if(match){url=(baseUri&&baseUri.protocol||'http')+'://mce_host'+self.toAbsPath(baseUrl,match[1])+match[2];}}}url=url.replace(/@@/g,'(mce_at)');const urlMatch=/^(?:(?![^:@]+:[^:@\\/]*@)([^:\\/?#.]+):)?(?:\\/\\/)?((?:(([^:@\\/]*):?([^:@\\/]*))?@)?(\\[[a-zA-Z0-9:.%]+\\]|[^:\\/?#]*)(?::(\\d*))?)(((\\/(?:[^?#](?![^?#\\/]*\\.[^?#\\/.]+(?:[?#]|$)))*\\/?)?([^?#\\/]*))(?:\\?([^#]*))?(?:#(.*))?)/.exec(url);if(urlMatch){each$4(queryParts,(v,i)=>{let part=urlMatch[i];if(part){part=part.replace(/\\(mce_at\\)/g,'@@');}self[v]=part;});}if(baseUri){if(!self.protocol){self.protocol=baseUri.protocol;}if(!self.userInfo){self.userInfo=baseUri.userInfo;}if(!self.port&&self.host==='mce_host'){self.port=baseUri.port;}if(!self.host||self.host==='mce_host'){self.host=baseUri.host;}self.source='';}if(isProtocolRelative){self.protocol='';}}static parseDataUri(uri){let type;const uriComponents=decodeURIComponent(uri).split(',');const matches=/data:([^;]+)/.exec(uriComponents[0]);if(matches){type=matches[1];}return{type,data:uriComponents[1]};}static isDomSafe(uri,context,options={}){if(options.allow_script_urls){return true;}else{const decodedUri=Entities.decode(uri).replace(/[\\s\\u0000-\\u001F]+/g,'');return!isInvalidUri(options,decodedUri,context);}}static getDocumentBaseUrl(loc){var _a;let baseUrl;if(loc.protocol.indexOf('http')!==0&&loc.protocol!=='file:'){baseUrl=(_a=loc.href)!==null&&_a!==void 0?_a:'';}else{baseUrl=loc.protocol+'//'+loc.host+loc.pathname;}if(/^[^:]+:\\/\\/\\/?[^\\/]+\\//.test(baseUrl)){baseUrl=baseUrl.replace(/[\\?#].*$/,'').replace(/[\\/\\\\][^\\/]+$/,'');if(!/[\\/\\\\]$/.test(baseUrl)){baseUrl+='/';}}return baseUrl;}setPath(path){const pathMatch=/^(.*?)\\/?(\\w+)?$/.exec(path);if(pathMatch){this.path=pathMatch[0];this.directory=pathMatch[1];this.file=pathMatch[2];}this.source='';this.getURI();}toRelative(uri){if(uri==='./'){return uri;}const relativeUri=new URI(uri,{base_uri:this});if(relativeUri.host!=='mce_host'&&this.host!==relativeUri.host&&relativeUri.host||this.port!==relativeUri.port||this.protocol!==relativeUri.protocol&&relativeUri.protocol!==''){return relativeUri.getURI();}const tu=this.getURI(),uu=relativeUri.getURI();if(tu===uu||tu.charAt(tu.length-1)==='/'&&tu.substr(0,tu.length-1)===uu){return tu;}let output=this.toRelPath(this.path,relativeUri.path);if(relativeUri.query){output+='?'+relativeUri.query;}if(relativeUri.anchor){output+='#'+relativeUri.anchor;}return output;}toAbsolute(uri,noHost){const absoluteUri=new URI(uri,{base_uri:this});return absoluteUri.getURI(noHost&&this.isSameOrigin(absoluteUri));}isSameOrigin(uri){if(this.host==uri.host&&this.protocol==uri.protocol){if(this.port==uri.port){return true;}const defaultPort=this.protocol?DEFAULT_PORTS[this.protocol]:null;if(defaultPort&&(this.port||defaultPort)==(uri.port||defaultPort)){return true;}}return false;}toRelPath(base,path){let breakPoint=0,out='',i,l;const normalizedBase=base.substring(0,base.lastIndexOf('/')).split('/');const items=path.split('/');if(normalizedBase.length>=items.length){for(i=0,l=normalizedBase.length;i<l;i++){if(i>=items.length||normalizedBase[i]!==items[i]){breakPoint=i+1;break;}}}if(normalizedBase.length<items.length){for(i=0,l=items.length;i<l;i++){if(i>=normalizedBase.length||normalizedBase[i]!==items[i]){breakPoint=i+1;break;}}}if(breakPoint===1){return path;}for(i=0,l=normalizedBase.length-(breakPoint-1);i<l;i++){out+='../';}for(i=breakPoint-1,l=items.length;i<l;i++){if(i!==breakPoint-1){out+='/'+items[i];}else{out+=items[i];}}return out;}toAbsPath(base,path){let nb=0;const tr=/\\/$/.test(path)?'/':'';const normalizedBase=base.split('/');const normalizedPath=path.split('/');const baseParts=[];each$4(normalizedBase,k=>{if(k){baseParts.push(k);}});const pathParts=[];for(let i=normalizedPath.length-1;i>=0;i--){if(normalizedPath[i].length===0||normalizedPath[i]==='.'){continue;}if(normalizedPath[i]==='..'){nb++;continue;}if(nb>0){nb--;continue;}pathParts.push(normalizedPath[i]);}const i=baseParts.length-nb;let outPath;if(i<=0){outPath=reverse(pathParts).join('/');}else{outPath=baseParts.slice(0,i).join('/')+'/'+reverse(pathParts).join('/');}if(outPath.indexOf('/')!==0){outPath='/'+outPath;}if(tr&&outPath.lastIndexOf('/')!==outPath.length-1){outPath+=tr;}return outPath;}getURI(noProtoHost=false){let s;if(!this.source||noProtoHost){s='';if(!noProtoHost){if(this.protocol){s+=this.protocol+'://';}else{s+='//';}if(this.userInfo){s+=this.userInfo+'@';}if(this.host){s+=this.host;}if(this.port){s+=':'+this.port;}}if(this.path){s+=this.path;}if(this.query){s+='?'+this.query;}if(this.anchor){s+='#'+this.anchor;}this.source=s;}return this.source;}}const makeMap=Tools.makeMap,extend$1=Tools.extend;const basePurifyConfig={IN_PLACE:true,ALLOW_UNKNOWN_PROTOCOLS:true,ALLOWED_TAGS:['#comment','#cdata-section','body'],ALLOWED_ATTR:[]};const filteredUrlAttrs=Tools.makeMap('src,href,data,background,action,formaction,poster,xlink:href');const internalElementAttr='data-mce-type';const getPurifyConfig=(settings,mimeType)=>{const config={...basePurifyConfig};config.PARSER_MEDIA_TYPE=mimeType;if(settings.allow_script_urls){config.ALLOWED_URI_REGEXP=/.*/;}else if(settings.allow_html_data_urls){config.ALLOWED_URI_REGEXP=/^(?!(\\w+script|mhtml):)/i;}return config;};const setupPurify=(settings,schema)=>{const purify$1=purify();const specialElements=schema.getSpecialElements();const validate=settings.validate;let uid=0;purify$1.addHook('uponSanitizeElement',(ele,evt)=>{var _a,_b,_c;if(ele.nodeType===COMMENT&&!settings.allow_conditional_comments&&/^\\[if/i.test((_a=ele.nodeValue)!==null&&_a!==void 0?_a:'')){ele.nodeValue=' '+ele.nodeValue;}const tagName=evt.tagName;if(ele.nodeType!==ELEMENT||tagName==='body'){return;}const element=SugarElement.fromDom(ele);const lcTagName=tagName.toLowerCase();const isInternalElement=has$1(element,internalElementAttr);const bogus=get$9(element,'data-mce-bogus');if(!isInternalElement&&isString(bogus)){if(bogus==='all'){remove$6(element);}else{unwrap(element);}return;}const rule=schema.getElementRule(lcTagName);if(validate&&!rule){if(has$2(specialElements,lcTagName)){remove$6(element);}else{unwrap(element);}return;}else{evt.allowedTags[tagName]=true;}if(validate&&rule&&!isInternalElement){each$e((_b=rule.attributesForced)!==null&&_b!==void 0?_b:[],attr=>{set$2(element,attr.name,attr.value==='{$uid}'?`mce_${uid++}`:attr.value);});each$e((_c=rule.attributesDefault)!==null&&_c!==void 0?_c:[],attr=>{if(!has$1(element,attr.name)){set$2(element,attr.name,attr.value==='{$uid}'?`mce_${uid++}`:attr.value);}});if(rule.attributesRequired&&!exists(rule.attributesRequired,attr=>has$1(element,attr))){unwrap(element);return;}if(rule.removeEmptyAttrs&&hasNone(element)){unwrap(element);return;}if(rule.outputName&&rule.outputName!==lcTagName){mutate(element,rule.outputName);}}});purify$1.addHook('uponSanitizeAttribute',(ele,evt)=>{const tagName=ele.tagName.toLowerCase();const{attrName,attrValue}=evt;evt.keepAttr=!validate||schema.isValid(tagName,attrName)||startsWith(attrName,'data-')||startsWith(attrName,'aria-');if(attrName in filteredUrlAttrs&&isInvalidUri(settings,attrValue,tagName)){evt.keepAttr=false;}if(evt.keepAttr){evt.allowedAttributes[attrName]=true;if(attrName in schema.getBoolAttrs()){evt.attrValue=attrName;}if(settings.allow_svg_data_urls&&startsWith(attrValue,'data:image/svg+xml')){evt.forceKeepAttr=true;}}else if(ele.hasAttribute(internalElementAttr)&&(attrName==='id'||attrName==='class'||attrName==='style')){evt.forceKeepAttr=true;}});return purify$1;};const transferChildren=(parent,nativeParent,specialElements)=>{const parentName=parent.name;const isSpecial=parentName in specialElements&&parentName!=='title'&&parentName!=='textarea';const childNodes=nativeParent.childNodes;for(let ni=0,nl=childNodes.length;ni<nl;ni++){const nativeChild=childNodes[ni];const child=new AstNode(nativeChild.nodeName.toLowerCase(),nativeChild.nodeType);if(isElement$6(nativeChild)){const attributes=nativeChild.attributes;for(let ai=0,al=attributes.length;ai<al;ai++){const attr=attributes[ai];child.attr(attr.name,attr.value);}}else if(isText$a(nativeChild)){child.value=nativeChild.data;if(isSpecial){child.raw=true;}}else if(isComment(nativeChild)||isCData(nativeChild)||isPi(nativeChild)){child.value=nativeChild.data;}transferChildren(child,nativeChild,specialElements);parent.append(child);}};const walkTree=(root,preprocessors,postprocessors)=>{const traverseOrder=[];for(let node=root,lastNode=node;node;lastNode=node,node=node.walk()){const tempNode=node;each$e(preprocessors,preprocess=>preprocess(tempNode));if(isNullable(tempNode.parent)&&tempNode!==root){node=lastNode;}else{traverseOrder.push(tempNode);}}for(let i=traverseOrder.length-1;i>=0;i--){const node=traverseOrder[i];each$e(postprocessors,postprocess=>postprocess(node));}};const whitespaceCleaner=(root,schema,settings,args)=>{const validate=settings.validate;const nonEmptyElements=schema.getNonEmptyElements();const whitespaceElements=schema.getWhitespaceElements();const blockElements=extend$1(makeMap('script,style,head,html,body,title,meta,param'),schema.getBlockElements());const textRootBlockElements=getTextRootBlockElements(schema);const allWhiteSpaceRegExp=/[ \\t\\r\\n]+/g;const startWhiteSpaceRegExp=/^[ \\t\\r\\n]+/;const endWhiteSpaceRegExp=/[ \\t\\r\\n]+$/;const hasWhitespaceParent=node=>{let tempNode=node.parent;while(isNonNullable(tempNode)){if(tempNode.name in whitespaceElements){return true;}else{tempNode=tempNode.parent;}}return false;};const isTextRootBlockEmpty=node=>{let tempNode=node;while(isNonNullable(tempNode)){if(tempNode.name in textRootBlockElements){return isEmpty(schema,nonEmptyElements,whitespaceElements,tempNode);}else{tempNode=tempNode.parent;}}return false;};const isAtEdgeOfBlock=(node,start)=>{const neighbour=start?node.prev:node.next;if(isNonNullable(neighbour)||isNullable(node.parent)){return false;}return node.parent.name in blockElements&&(node.parent!==root||args.isRootContent===true);};const preprocess=node=>{var _a;if(node.type===3){if(!hasWhitespaceParent(node)){let text=(_a=node.value)!==null&&_a!==void 0?_a:'';text=text.replace(allWhiteSpaceRegExp,' ');if(isLineBreakNode(node.prev,blockElements)||isAtEdgeOfBlock(node,true)){text=text.replace(startWhiteSpaceRegExp,'');}if(text.length===0){node.remove();}else{node.value=text;}}}};const postprocess=node=>{var _a;if(node.type===1){const elementRule=schema.getElementRule(node.name);if(validate&&elementRule){const isNodeEmpty=isEmpty(schema,nonEmptyElements,whitespaceElements,node);if(elementRule.paddInEmptyBlock&&isNodeEmpty&&isTextRootBlockEmpty(node)){paddEmptyNode(settings,args,blockElements,node);}else if(elementRule.removeEmpty&&isNodeEmpty){if(blockElements[node.name]){node.remove();}else{node.unwrap();}}else if(elementRule.paddEmpty&&(isNodeEmpty||isPaddedWithNbsp(node))){paddEmptyNode(settings,args,blockElements,node);}}}else if(node.type===3){if(!hasWhitespaceParent(node)){let text=(_a=node.value)!==null&&_a!==void 0?_a:'';if(node.next&&blockElements[node.next.name]||isAtEdgeOfBlock(node,false)){text=text.replace(endWhiteSpaceRegExp,'');}if(text.length===0){node.remove();}else{node.value=text;}}}};return[preprocess,postprocess];};const getRootBlockName=(settings,args)=>{var _a;const name=(_a=args.forced_root_block)!==null&&_a!==void 0?_a:settings.forced_root_block;if(name===false){return'';}else if(name===true){return'p';}else{return name;}};const DomParser=(settings={},schema=Schema())=>{const nodeFilterRegistry=create$7();const attributeFilterRegistry=create$7();const defaultedSettings={validate:true,root_name:'body',...settings};const parser=new DOMParser();const purify=setupPurify(defaultedSettings,schema);const parseAndSanitizeWithContext=(html,rootName,format='html')=>{const mimeType=format==='xhtml'?'application/xhtml+xml':'text/html';const isSpecialRoot=has$2(schema.getSpecialElements(),rootName.toLowerCase());const content=isSpecialRoot?`<${rootName}>${html}</${rootName}>`:html;const wrappedHtml=format==='xhtml'?`<html xmlns=\"http://www.w3.org/1999/xhtml\"><head></head><body>${content}</body></html>`:`<body>${content}</body>`;const body=parser.parseFromString(wrappedHtml,mimeType).body;purify.sanitize(body,getPurifyConfig(defaultedSettings,mimeType));purify.removed=[];return isSpecialRoot?body.firstChild:body;};const addNodeFilter=nodeFilterRegistry.addFilter;const getNodeFilters=nodeFilterRegistry.getFilters;const removeNodeFilter=nodeFilterRegistry.removeFilter;const addAttributeFilter=attributeFilterRegistry.addFilter;const getAttributeFilters=attributeFilterRegistry.getFilters;const removeAttributeFilter=attributeFilterRegistry.removeFilter;const findInvalidChildren=(node,invalidChildren)=>{const parent=node.parent;if(parent&&schema.children[node.name]&&!schema.isValidChild(parent.name,node.name)){invalidChildren.push(node);}};const addRootBlocks=(rootNode,rootBlockName)=>{const blockElements=extend$1(makeMap('script,style,head,html,body,title,meta,param'),schema.getBlockElements());const startWhiteSpaceRegExp=/^[ \\t\\r\\n]+/;const endWhiteSpaceRegExp=/[ \\t\\r\\n]+$/;let node=rootNode.firstChild,rootBlockNode=null;const trim=rootBlock=>{var _a,_b;if(rootBlock){node=rootBlock.firstChild;if(node&&node.type===3){node.value=(_a=node.value)===null||_a===void 0?void 0:_a.replace(startWhiteSpaceRegExp,'');}node=rootBlock.lastChild;if(node&&node.type===3){node.value=(_b=node.value)===null||_b===void 0?void 0:_b.replace(endWhiteSpaceRegExp,'');}}};if(!schema.isValidChild(rootNode.name,rootBlockName.toLowerCase())){return;}while(node){const next=node.next;if(node.type===3||node.type===1&&node.name!=='p'&&!blockElements[node.name]&&!node.attr(internalElementAttr)){if(!rootBlockNode){rootBlockNode=new AstNode(rootBlockName,1);rootBlockNode.attr(defaultedSettings.forced_root_block_attrs);rootNode.insert(rootBlockNode,node);rootBlockNode.append(node);}else{rootBlockNode.append(node);}}else{trim(rootBlockNode);rootBlockNode=null;}node=next;}trim(rootBlockNode);};const parse=(html,args={})=>{var _a;const validate=defaultedSettings.validate;const rootName=(_a=args.context)!==null&&_a!==void 0?_a:defaultedSettings.root_name;const element=parseAndSanitizeWithContext(html,rootName,args.format);const rootNode=new AstNode(rootName,11);transferChildren(rootNode,element,schema.getSpecialElements());const[whitespacePre,whitespacePost]=whitespaceCleaner(rootNode,schema,defaultedSettings,args);const invalidChildren=[];const invalidFinder=validate?node=>findInvalidChildren(node,invalidChildren):noop;const matches={nodes:{},attributes:{}};const matchFinder=node=>matchNode$1(getNodeFilters(),getAttributeFilters(),node,matches);walkTree(rootNode,[whitespacePre,matchFinder],[whitespacePost,invalidFinder]);invalidChildren.reverse();if(validate&&invalidChildren.length>0){if(args.context){const{pass:topLevelChildren,fail:otherChildren}=partition$2(invalidChildren,child=>child.parent===rootNode);cleanInvalidNodes(otherChildren,schema,matchFinder);args.invalid=topLevelChildren.length>0;}else{cleanInvalidNodes(invalidChildren,schema,matchFinder);}}const rootBlockName=getRootBlockName(defaultedSettings,args);if(rootBlockName&&(rootNode.name==='body'||args.isRootContent)){addRootBlocks(rootNode,rootBlockName);}if(!args.invalid){runFilters(matches,args);}return rootNode;};const exports={schema,addAttributeFilter,getAttributeFilters,removeAttributeFilter,addNodeFilter,getNodeFilters,removeNodeFilter,parse};register$4(exports,defaultedSettings);register$5(exports,defaultedSettings,schema);return exports;};const serializeContent=content=>isTreeNode(content)?HtmlSerializer({validate:false}).serialize(content):content;const withSerializedContent=(content,fireEvent)=>{const serializedContent=serializeContent(content);const eventArgs=fireEvent(serializedContent);if(eventArgs.isDefaultPrevented()){return eventArgs;}else if(isTreeNode(content)){if(eventArgs.content!==serializedContent){const rootNode=DomParser({validate:false,forced_root_block:false}).parse(eventArgs.content,{context:content.name});return{...eventArgs,content:rootNode};}else{return{...eventArgs,content};}}else{return eventArgs;}};const preProcessGetContent=(editor,args)=>{if(args.no_events){return Result.value(args);}else{const eventArgs=fireBeforeGetContent(editor,args);if(eventArgs.isDefaultPrevented()){return Result.error(fireGetContent(editor,{content:'',...eventArgs}).content);}else{return Result.value(eventArgs);}}};const postProcessGetContent=(editor,content,args)=>{if(args.no_events){return content;}else{const processedEventArgs=withSerializedContent(content,c=>fireGetContent(editor,{...args,content:c}));return processedEventArgs.content;}};const preProcessSetContent=(editor,args)=>{if(args.no_events){return Result.value(args);}else{const processedEventArgs=withSerializedContent(args.content,content=>fireBeforeSetContent(editor,{...args,content}));if(processedEventArgs.isDefaultPrevented()){fireSetContent(editor,processedEventArgs);return Result.error(undefined);}else{return Result.value(processedEventArgs);}}};const postProcessSetContent=(editor,content,args)=>{if(!args.no_events){fireSetContent(editor,{...args,content});}};const tableModel=(element,width,rows)=>({element,width,rows});const tableRow=(element,cells)=>({element,cells});const cellPosition=(x,y)=>({x,y});const getSpan=(td,key)=>{return getOpt(td,key).bind(toInt).getOr(1);};const fillout=(table,x,y,tr,td)=>{const rowspan=getSpan(td,'rowspan');const colspan=getSpan(td,'colspan');const rows=table.rows;for(let y2=y;y2<y+rowspan;y2++){if(!rows[y2]){rows[y2]=tableRow(deep$1(tr),[]);}for(let x2=x;x2<x+colspan;x2++){const cells=rows[y2].cells;cells[x2]=y2===y&&x2===x?td:shallow$1(td);}}};const cellExists=(table,x,y)=>{const rows=table.rows;const cells=rows[y]?rows[y].cells:[];return!!cells[x];};const skipCellsX=(table,x,y)=>{while(cellExists(table,x,y)){x++;}return x;};const getWidth=rows=>{return foldl(rows,(acc,row)=>{return row.cells.length>acc?row.cells.length:acc;},0);};const findElementPos=(table,element)=>{const rows=table.rows;for(let y=0;y<rows.length;y++){const cells=rows[y].cells;for(let x=0;x<cells.length;x++){if(eq(cells[x],element)){return Optional.some(cellPosition(x,y));}}}return Optional.none();};const extractRows=(table,sx,sy,ex,ey)=>{const newRows=[];const rows=table.rows;for(let y=sy;y<=ey;y++){const cells=rows[y].cells;const slice=sx<ex?cells.slice(sx,ex+1):cells.slice(ex,sx+1);newRows.push(tableRow(rows[y].element,slice));}return newRows;};const subTable=(table,startPos,endPos)=>{const sx=startPos.x,sy=startPos.y;const ex=endPos.x,ey=endPos.y;const newRows=sy<ey?extractRows(table,sx,sy,ex,ey):extractRows(table,sx,ey,ex,sy);return tableModel(table.element,getWidth(newRows),newRows);};const createDomTable=(table,rows)=>{const tableElement=shallow$1(table.element);const tableBody=SugarElement.fromTag('tbody');append(tableBody,rows);append$1(tableElement,tableBody);return tableElement;};const modelRowsToDomRows=table=>{return map$3(table.rows,row=>{const cells=map$3(row.cells,cell=>{const td=deep$1(cell);remove$b(td,'colspan');remove$b(td,'rowspan');return td;});const tr=shallow$1(row.element);append(tr,cells);return tr;});};const fromDom=tableElm=>{const table=tableModel(shallow$1(tableElm),0,[]);each$e(descendants(tableElm,'tr'),(tr,y)=>{each$e(descendants(tr,'td,th'),(td,x)=>{fillout(table,skipCellsX(table,x,y),y,tr,td);});});return tableModel(table.element,getWidth(table.rows),table.rows);};const toDom=table=>{return createDomTable(table,modelRowsToDomRows(table));};const subsection=(table,startElement,endElement)=>{return findElementPos(table,startElement).bind(startPos=>{return findElementPos(table,endElement).map(endPos=>{return subTable(table,startPos,endPos);});});};const findParentListContainer=parents=>find$2(parents,elm=>name(elm)==='ul'||name(elm)==='ol');const getFullySelectedListWrappers=(parents,rng)=>find$2(parents,elm=>name(elm)==='li'&&hasAllContentsSelected(elm,rng)).fold(constant([]),_li=>findParentListContainer(parents).map(listCont=>{const listElm=SugarElement.fromTag(name(listCont));const listStyles=filter$4(getAllRaw(listCont),(_style,name)=>startsWith(name,'list-style'));setAll(listElm,listStyles);return[SugarElement.fromTag('li'),listElm];}).getOr([]));const wrap=(innerElm,elms)=>{const wrapped=foldl(elms,(acc,elm)=>{append$1(elm,acc);return elm;},innerElm);return elms.length>0?fromElements([wrapped]):wrapped;};const directListWrappers=commonAnchorContainer=>{if(isListItem$1(commonAnchorContainer)){return parent(commonAnchorContainer).filter(isList).fold(constant([]),listElm=>[commonAnchorContainer,listElm]);}else{return isList(commonAnchorContainer)?[commonAnchorContainer]:[];}};const getWrapElements=(rootNode,rng)=>{const commonAnchorContainer=SugarElement.fromDom(rng.commonAncestorContainer);const parents=parentsAndSelf(commonAnchorContainer,rootNode);const wrapElements=filter$5(parents,isWrapElement);const listWrappers=getFullySelectedListWrappers(parents,rng);const allWrappers=wrapElements.concat(listWrappers.length?listWrappers:directListWrappers(commonAnchorContainer));return map$3(allWrappers,shallow$1);};const emptyFragment=()=>fromElements([]);const getFragmentFromRange=(rootNode,rng)=>wrap(SugarElement.fromDom(rng.cloneContents()),getWrapElements(rootNode,rng));const getParentTable=(rootElm,cell)=>ancestor$2(cell,'table',curry(eq,rootElm));const getTableFragment=(rootNode,selectedTableCells)=>getParentTable(rootNode,selectedTableCells[0]).bind(tableElm=>{const firstCell=selectedTableCells[0];const lastCell=selectedTableCells[selectedTableCells.length-1];const fullTableModel=fromDom(tableElm);return subsection(fullTableModel,firstCell,lastCell).map(sectionedTableModel=>fromElements([toDom(sectionedTableModel)]));}).getOrThunk(emptyFragment);const getSelectionFragment=(rootNode,ranges)=>ranges.length>0&&ranges[0].collapsed?emptyFragment():getFragmentFromRange(rootNode,ranges[0]);const read$3=(rootNode,ranges)=>{const selectedCells=getCellsFromElementOrRanges(ranges,rootNode);return selectedCells.length>0?getTableFragment(rootNode,selectedCells):getSelectionFragment(rootNode,ranges);};const isCollapsibleWhitespace=(text,index)=>index>=0&&index<text.length&&isWhiteSpace(text.charAt(index));const getInnerText=bin=>{return trim$1(bin.innerText);};const getContextNodeName=parentBlockOpt=>parentBlockOpt.map(block=>block.nodeName).getOr('div').toLowerCase();const getTextContent=editor=>Optional.from(editor.selection.getRng()).map(rng=>{var _a;const parentBlockOpt=Optional.from(editor.dom.getParent(rng.commonAncestorContainer,editor.dom.isBlock));const body=editor.getBody();const contextNodeName=getContextNodeName(parentBlockOpt);const bin=editor.dom.add(body,contextNodeName,{'data-mce-bogus':'all','style':'overflow: hidden; opacity: 0;'},rng.cloneContents());const text=getInnerText(bin);const nonRenderedText=trim$1((_a=bin.textContent)!==null&&_a!==void 0?_a:'');editor.dom.remove(bin);if(isCollapsibleWhitespace(nonRenderedText,0)||isCollapsibleWhitespace(nonRenderedText,nonRenderedText.length-1)){const parentBlock=parentBlockOpt.getOr(body);const parentBlockText=getInnerText(parentBlock);const textIndex=parentBlockText.indexOf(text);if(textIndex===-1){return text;}else{const hasProceedingSpace=isCollapsibleWhitespace(parentBlockText,textIndex-1);const hasTrailingSpace=isCollapsibleWhitespace(parentBlockText,textIndex+text.length);return(hasProceedingSpace?' ':'')+text+(hasTrailingSpace?' ':'');}}else{return text;}}).getOr('');const getSerializedContent=(editor,args)=>{const rng=editor.selection.getRng(),tmpElm=editor.dom.create('body');const sel=editor.selection.getSel();const ranges=processRanges(editor,getRanges$1(sel));const fragment=args.contextual?read$3(SugarElement.fromDom(editor.getBody()),ranges).dom:rng.cloneContents();if(fragment){tmpElm.appendChild(fragment);}return editor.selection.serializer.serialize(tmpElm,args);};const extractSelectedContent=(editor,args)=>{if(args.format==='text'){return getTextContent(editor);}else{const content=getSerializedContent(editor,args);if(args.format==='tree'){return content;}else{return editor.selection.isCollapsed()?'':content;}}};const setupArgs$3=(args,format)=>({...args,format,get:true,selection:true,getInner:true});const getSelectedContentInternal=(editor,format,args={})=>{const defaultedArgs=setupArgs$3(args,format);return preProcessGetContent(editor,defaultedArgs).fold(identity,updatedArgs=>{const content=extractSelectedContent(editor,updatedArgs);return postProcessGetContent(editor,content,updatedArgs);});};const KEEP=0,INSERT=1,DELETE=2;const diff=(left,right)=>{const size=left.length+right.length+2;const vDown=new Array(size);const vUp=new Array(size);const snake=(start,end,diag)=>{return{start,end,diag};};const buildScript=(start1,end1,start2,end2,script)=>{const middle=getMiddleSnake(start1,end1,start2,end2);if(middle===null||middle.start===end1&&middle.diag===end1-end2||middle.end===start1&&middle.diag===start1-start2){let i=start1;let j=start2;while(i<end1||j<end2){if(i<end1&&j<end2&&left[i]===right[j]){script.push([KEEP,left[i]]);++i;++j;}else{if(end1-start1>end2-start2){script.push([DELETE,left[i]]);++i;}else{script.push([INSERT,right[j]]);++j;}}}}else{buildScript(start1,middle.start,start2,middle.start-middle.diag,script);for(let i2=middle.start;i2<middle.end;++i2){script.push([KEEP,left[i2]]);}buildScript(middle.end,end1,middle.end-middle.diag,end2,script);}};const buildSnake=(start,diag,end1,end2)=>{let end=start;while(end-diag<end2&&end<end1&&left[end]===right[end-diag]){++end;}return snake(start,end,diag);};const getMiddleSnake=(start1,end1,start2,end2)=>{const m=end1-start1;const n=end2-start2;if(m===0||n===0){return null;}const delta=m-n;const sum=n+m;const offset=(sum%2===0?sum:sum+1)/2;vDown[1+offset]=start1;vUp[1+offset]=end1+1;let d,k,i,x,y;for(d=0;d<=offset;++d){for(k=-d;k<=d;k+=2){i=k+offset;if(k===-d||k!==d&&vDown[i-1]<vDown[i+1]){vDown[i]=vDown[i+1];}else{vDown[i]=vDown[i-1]+1;}x=vDown[i];y=x-start1+start2-k;while(x<end1&&y<end2&&left[x]===right[y]){vDown[i]=++x;++y;}if(delta%2!==0&&delta-d<=k&&k<=delta+d){if(vUp[i-delta]<=vDown[i]){return buildSnake(vUp[i-delta],k+start1-start2,end1,end2);}}}for(k=delta-d;k<=delta+d;k+=2){i=k+offset-delta;if(k===delta-d||k!==delta+d&&vUp[i+1]<=vUp[i-1]){vUp[i]=vUp[i+1]-1;}else{vUp[i]=vUp[i-1];}x=vUp[i]-1;y=x-start1+start2-k;while(x>=start1&&y>=start2&&left[x]===right[y]){vUp[i]=x--;y--;}if(delta%2===0&&-d<=k&&k<=d){if(vUp[i]<=vDown[i+delta]){return buildSnake(vUp[i],k+start1-start2,end1,end2);}}}}return null;};const script=[];buildScript(0,left.length,0,right.length,script);return script;};const getOuterHtml=elm=>{if(isElement$6(elm)){return elm.outerHTML;}else if(isText$a(elm)){return Entities.encodeRaw(elm.data,false);}else if(isComment(elm)){return'<!--'+elm.data+'-->';}return'';};const createFragment=html=>{let node;const container=document.createElement('div');const frag=document.createDocumentFragment();if(html){container.innerHTML=html;}while(node=container.firstChild){frag.appendChild(node);}return frag;};const insertAt=(elm,html,index)=>{const fragment=createFragment(html);if(elm.hasChildNodes()&&index<elm.childNodes.length){const target=elm.childNodes[index];elm.insertBefore(fragment,target);}else{elm.appendChild(fragment);}};const removeAt=(elm,index)=>{if(elm.hasChildNodes()&&index<elm.childNodes.length){const target=elm.childNodes[index];elm.removeChild(target);}};const applyDiff=(diff,elm)=>{let index=0;each$e(diff,action=>{if(action[0]===KEEP){index++;}else if(action[0]===INSERT){insertAt(elm,action[1],index);index++;}else if(action[0]===DELETE){removeAt(elm,index);}});};const read$2=elm=>{return filter$5(map$3(from(elm.childNodes),getOuterHtml),item=>{return item.length>0;});};const write=(fragments,elm)=>{const currentFragments=map$3(from(elm.childNodes),getOuterHtml);applyDiff(diff(currentFragments,fragments),elm);return elm;};const lazyTempDocument=cached(()=>document.implementation.createHTMLDocument('undo'));const hasIframes=html=>{return html.indexOf('</iframe>')!==-1;};const createFragmentedLevel=fragments=>{return{type:'fragmented',fragments,content:'',bookmark:null,beforeBookmark:null};};const createCompleteLevel=content=>{return{type:'complete',fragments:null,content,bookmark:null,beforeBookmark:null};};const createFromEditor=editor=>{const fragments=read$2(editor.getBody());const trimmedFragments=bind$3(fragments,html=>{const trimmed=trimInternal(editor.serializer,html);return trimmed.length>0?[trimmed]:[];});const content=trimmedFragments.join('');return hasIframes(content)?createFragmentedLevel(trimmedFragments):createCompleteLevel(content);};const applyToEditor=(editor,level,before)=>{const bookmark=before?level.beforeBookmark:level.bookmark;if(level.type==='fragmented'){write(level.fragments,editor.getBody());}else{editor.setContent(level.content,{format:'raw',no_selection:isNonNullable(bookmark)&&isPathBookmark(bookmark)?!bookmark.isFakeCaret:true});}if(bookmark){editor.selection.moveToBookmark(bookmark);}};const getLevelContent=level=>{return level.type==='fragmented'?level.fragments.join(''):level.content;};const getCleanLevelContent=level=>{const elm=SugarElement.fromTag('body',lazyTempDocument());set(elm,getLevelContent(level));each$e(descendants(elm,'*[data-mce-bogus]'),unwrap);return get$6(elm);};const hasEqualContent=(level1,level2)=>getLevelContent(level1)===getLevelContent(level2);const hasEqualCleanedContent=(level1,level2)=>getCleanLevelContent(level1)===getCleanLevelContent(level2);const isEq$1=(level1,level2)=>{if(!level1||!level2){return false;}else if(hasEqualContent(level1,level2)){return true;}else{return hasEqualCleanedContent(level1,level2);}};const isUnlocked=locks=>locks.get()===0;const setTyping=(undoManager,typing,locks)=>{if(isUnlocked(locks)){undoManager.typing=typing;}};const endTyping=(undoManager,locks)=>{if(undoManager.typing){setTyping(undoManager,false,locks);undoManager.add();}};const endTypingLevelIgnoreLocks=undoManager=>{if(undoManager.typing){undoManager.typing=false;undoManager.add();}};const beforeChange$1=(editor,locks,beforeBookmark)=>{if(isUnlocked(locks)){beforeBookmark.set(getUndoBookmark(editor.selection));}};const addUndoLevel$1=(editor,undoManager,index,locks,beforeBookmark,level,event)=>{const currentLevel=createFromEditor(editor);const newLevel=Tools.extend(level||{},currentLevel);if(!isUnlocked(locks)||editor.removed){return null;}const lastLevel=undoManager.data[index.get()];if(editor.dispatch('BeforeAddUndo',{level:newLevel,lastLevel,originalEvent:event}).isDefaultPrevented()){return null;}if(lastLevel&&isEq$1(lastLevel,newLevel)){return null;}if(undoManager.data[index.get()]){beforeBookmark.get().each(bm=>{undoManager.data[index.get()].beforeBookmark=bm;});}const customUndoRedoLevels=getCustomUndoRedoLevels(editor);if(customUndoRedoLevels){if(undoManager.data.length>customUndoRedoLevels){for(let i=0;i<undoManager.data.length-1;i++){undoManager.data[i]=undoManager.data[i+1];}undoManager.data.length--;index.set(undoManager.data.length);}}newLevel.bookmark=getUndoBookmark(editor.selection);if(index.get()<undoManager.data.length-1){undoManager.data.length=index.get()+1;}undoManager.data.push(newLevel);index.set(undoManager.data.length-1);const args={level:newLevel,lastLevel,originalEvent:event};if(index.get()>0){editor.setDirty(true);editor.dispatch('AddUndo',args);editor.dispatch('change',args);}else{editor.dispatch('AddUndo',args);}return newLevel;};const clear$1=(editor,undoManager,index)=>{undoManager.data=[];index.set(0);undoManager.typing=false;editor.dispatch('ClearUndos');};const extra$1=(editor,undoManager,index,callback1,callback2)=>{if(undoManager.transact(callback1)){const bookmark=undoManager.data[index.get()].bookmark;const lastLevel=undoManager.data[index.get()-1];applyToEditor(editor,lastLevel,true);if(undoManager.transact(callback2)){undoManager.data[index.get()-1].beforeBookmark=bookmark;}}};const redo$1=(editor,index,data)=>{let level;if(index.get()<data.length-1){index.set(index.get()+1);level=data[index.get()];applyToEditor(editor,level,false);editor.setDirty(true);editor.dispatch('Redo',{level});}return level;};const undo$1=(editor,undoManager,locks,index)=>{let level;if(undoManager.typing){undoManager.add();undoManager.typing=false;setTyping(undoManager,false,locks);}if(index.get()>0){index.set(index.get()-1);level=undoManager.data[index.get()];applyToEditor(editor,level,true);editor.setDirty(true);editor.dispatch('Undo',{level});}return level;};const reset$1=undoManager=>{undoManager.clear();undoManager.add();};const hasUndo$1=(editor,undoManager,index)=>index.get()>0||undoManager.typing&&undoManager.data[0]&&!isEq$1(createFromEditor(editor),undoManager.data[0]);const hasRedo$1=(undoManager,index)=>index.get()<undoManager.data.length-1&&!undoManager.typing;const transact$1=(undoManager,locks,callback)=>{endTyping(undoManager,locks);undoManager.beforeChange();undoManager.ignore(callback);return undoManager.add();};const ignore$1=(locks,callback)=>{try{locks.set(locks.get()+1);callback();}finally{locks.set(locks.get()-1);}};const addVisualInternal=(editor,elm)=>{const dom=editor.dom;const scope=isNonNullable(elm)?elm:editor.getBody();each$e(dom.select('table,a',scope),matchedElm=>{switch(matchedElm.nodeName){case'TABLE':const cls=getVisualAidsTableClass(editor);const value=dom.getAttrib(matchedElm,'border');if((!value||value==='0')&&editor.hasVisual){dom.addClass(matchedElm,cls);}else{dom.removeClass(matchedElm,cls);}break;case'A':if(!dom.getAttrib(matchedElm,'href')){const value=dom.getAttrib(matchedElm,'name')||matchedElm.id;const cls=getVisualAidsAnchorClass(editor);if(value&&editor.hasVisual){dom.addClass(matchedElm,cls);}else{dom.removeClass(matchedElm,cls);}}break;}});editor.dispatch('VisualAid',{element:elm,hasVisual:editor.hasVisual});};const makePlainAdaptor=editor=>({init:{bindEvents:noop},undoManager:{beforeChange:(locks,beforeBookmark)=>beforeChange$1(editor,locks,beforeBookmark),add:(undoManager,index,locks,beforeBookmark,level,event)=>addUndoLevel$1(editor,undoManager,index,locks,beforeBookmark,level,event),undo:(undoManager,locks,index)=>undo$1(editor,undoManager,locks,index),redo:(index,data)=>redo$1(editor,index,data),clear:(undoManager,index)=>clear$1(editor,undoManager,index),reset:undoManager=>reset$1(undoManager),hasUndo:(undoManager,index)=>hasUndo$1(editor,undoManager,index),hasRedo:(undoManager,index)=>hasRedo$1(undoManager,index),transact:(undoManager,locks,callback)=>transact$1(undoManager,locks,callback),ignore:(locks,callback)=>ignore$1(locks,callback),extra:(undoManager,index,callback1,callback2)=>extra$1(editor,undoManager,index,callback1,callback2)},formatter:{match:(name,vars,node,similar)=>match$2(editor,name,vars,node,similar),matchAll:(names,vars)=>matchAll(editor,names,vars),matchNode:(node,name,vars,similar)=>matchNode(editor,node,name,vars,similar),canApply:name=>canApply(editor,name),closest:names=>closest$1(editor,names),apply:(name,vars,node)=>applyFormat$1(editor,name,vars,node),remove:(name,vars,node,similar)=>remove$2(editor,name,vars,node,similar),toggle:(name,vars,node)=>toggle(editor,name,vars,node),formatChanged:(registeredFormatListeners,formats,callback,similar,vars)=>formatChangedInternal(editor,registeredFormatListeners,formats,callback,similar,vars)},editor:{getContent:args=>getContentInternal(editor,args),setContent:(content,args)=>setContentInternal(editor,content,args),insertContent:(value,details)=>insertHtmlAtCaret(editor,value,details),addVisual:elm=>addVisualInternal(editor,elm)},selection:{getContent:(format,args)=>getSelectedContentInternal(editor,format,args)},autocompleter:{addDecoration:range=>create$9(editor,range),removeDecoration:()=>remove$3(editor,SugarElement.fromDom(editor.getBody()))},raw:{getModel:()=>Optional.none()}});const makeRtcAdaptor=rtcEditor=>{const defaultVars=vars=>isObject(vars)?vars:{};const{init,undoManager,formatter,editor,selection,autocompleter,raw}=rtcEditor;return{init:{bindEvents:init.bindEvents},undoManager:{beforeChange:undoManager.beforeChange,add:undoManager.add,undo:undoManager.undo,redo:undoManager.redo,clear:undoManager.clear,reset:undoManager.reset,hasUndo:undoManager.hasUndo,hasRedo:undoManager.hasRedo,transact:(_undoManager,_locks,fn)=>undoManager.transact(fn),ignore:(_locks,callback)=>undoManager.ignore(callback),extra:(_undoManager,_index,callback1,callback2)=>undoManager.extra(callback1,callback2)},formatter:{match:(name,vars,_node,similar)=>formatter.match(name,defaultVars(vars),similar),matchAll:formatter.matchAll,matchNode:formatter.matchNode,canApply:name=>formatter.canApply(name),closest:names=>formatter.closest(names),apply:(name,vars,_node)=>formatter.apply(name,defaultVars(vars)),remove:(name,vars,_node,_similar)=>formatter.remove(name,defaultVars(vars)),toggle:(name,vars,_node)=>formatter.toggle(name,defaultVars(vars)),formatChanged:(_rfl,formats,callback,similar,vars)=>formatter.formatChanged(formats,callback,similar,vars)},editor:{getContent:args=>editor.getContent(args),setContent:(content,args)=>{return{content:editor.setContent(content,args),html:''};},insertContent:(content,_details)=>{editor.insertContent(content);return'';},addVisual:editor.addVisual},selection:{getContent:(_format,args)=>selection.getContent(args)},autocompleter:{addDecoration:autocompleter.addDecoration,removeDecoration:autocompleter.removeDecoration},raw:{getModel:()=>Optional.some(raw.getRawModel())}};};const makeNoopAdaptor=()=>{const nul=constant(null);const empty=constant('');return{init:{bindEvents:noop},undoManager:{beforeChange:noop,add:nul,undo:nul,redo:nul,clear:noop,reset:noop,hasUndo:never,hasRedo:never,transact:nul,ignore:noop,extra:noop},formatter:{match:never,matchAll:constant([]),matchNode:constant(undefined),canApply:never,closest:empty,apply:noop,remove:noop,toggle:noop,formatChanged:constant({unbind:noop})},editor:{getContent:empty,setContent:constant({content:'',html:''}),insertContent:constant(''),addVisual:noop},selection:{getContent:empty},autocompleter:{addDecoration:noop,removeDecoration:noop},raw:{getModel:constant(Optional.none())}};};const isRtc=editor=>has$2(editor.plugins,'rtc');const getRtcSetup=editor=>get$a(editor.plugins,'rtc').bind(rtcPlugin=>Optional.from(rtcPlugin.setup));const setup$s=editor=>{const editorCast=editor;return getRtcSetup(editor).fold(()=>{editorCast.rtcInstance=makePlainAdaptor(editor);return Optional.none();},setup=>{editorCast.rtcInstance=makeNoopAdaptor();return Optional.some(()=>setup().then(rtcEditor=>{editorCast.rtcInstance=makeRtcAdaptor(rtcEditor);return rtcEditor.rtc.isRemote;}));});};const getRtcInstanceWithFallback=editor=>editor.rtcInstance?editor.rtcInstance:makePlainAdaptor(editor);const getRtcInstanceWithError=editor=>{const rtcInstance=editor.rtcInstance;if(!rtcInstance){throw new Error('Failed to get RTC instance not yet initialized.');}else{return rtcInstance;}};const beforeChange=(editor,locks,beforeBookmark)=>{getRtcInstanceWithError(editor).undoManager.beforeChange(locks,beforeBookmark);};const addUndoLevel=(editor,undoManager,index,locks,beforeBookmark,level,event)=>getRtcInstanceWithError(editor).undoManager.add(undoManager,index,locks,beforeBookmark,level,event);const undo=(editor,undoManager,locks,index)=>getRtcInstanceWithError(editor).undoManager.undo(undoManager,locks,index);const redo=(editor,index,data)=>getRtcInstanceWithError(editor).undoManager.redo(index,data);const clear=(editor,undoManager,index)=>{getRtcInstanceWithError(editor).undoManager.clear(undoManager,index);};const reset=(editor,undoManager)=>{getRtcInstanceWithError(editor).undoManager.reset(undoManager);};const hasUndo=(editor,undoManager,index)=>getRtcInstanceWithError(editor).undoManager.hasUndo(undoManager,index);const hasRedo=(editor,undoManager,index)=>getRtcInstanceWithError(editor).undoManager.hasRedo(undoManager,index);const transact=(editor,undoManager,locks,callback)=>getRtcInstanceWithError(editor).undoManager.transact(undoManager,locks,callback);const ignore=(editor,locks,callback)=>{getRtcInstanceWithError(editor).undoManager.ignore(locks,callback);};const extra=(editor,undoManager,index,callback1,callback2)=>{getRtcInstanceWithError(editor).undoManager.extra(undoManager,index,callback1,callback2);};const matchFormat=(editor,name,vars,node,similar)=>getRtcInstanceWithError(editor).formatter.match(name,vars,node,similar);const matchAllFormats=(editor,names,vars)=>getRtcInstanceWithError(editor).formatter.matchAll(names,vars);const matchNodeFormat=(editor,node,name,vars,similar)=>getRtcInstanceWithError(editor).formatter.matchNode(node,name,vars,similar);const canApplyFormat=(editor,name)=>getRtcInstanceWithError(editor).formatter.canApply(name);const closestFormat=(editor,names)=>getRtcInstanceWithError(editor).formatter.closest(names);const applyFormat=(editor,name,vars,node)=>{getRtcInstanceWithError(editor).formatter.apply(name,vars,node);};const removeFormat=(editor,name,vars,node,similar)=>{getRtcInstanceWithError(editor).formatter.remove(name,vars,node,similar);};const toggleFormat=(editor,name,vars,node)=>{getRtcInstanceWithError(editor).formatter.toggle(name,vars,node);};const formatChanged=(editor,registeredFormatListeners,formats,callback,similar,vars)=>getRtcInstanceWithError(editor).formatter.formatChanged(registeredFormatListeners,formats,callback,similar,vars);const getContent$2=(editor,args)=>getRtcInstanceWithFallback(editor).editor.getContent(args);const setContent$2=(editor,content,args)=>getRtcInstanceWithFallback(editor).editor.setContent(content,args);const insertContent$1=(editor,value,details)=>getRtcInstanceWithFallback(editor).editor.insertContent(value,details);const getSelectedContent=(editor,format,args)=>getRtcInstanceWithError(editor).selection.getContent(format,args);const addVisual$1=(editor,elm)=>getRtcInstanceWithError(editor).editor.addVisual(elm);const bindEvents=editor=>getRtcInstanceWithError(editor).init.bindEvents();const addAutocompleterDecoration=(editor,range)=>getRtcInstanceWithError(editor).autocompleter.addDecoration(range);const removeAutocompleterDecoration=editor=>getRtcInstanceWithError(editor).autocompleter.removeDecoration();const getContent$1=(editor,args={})=>{const format=args.format?args.format:'html';return getSelectedContent(editor,format,args);};const removeEmpty=text=>{if(text.dom.length===0){remove$6(text);return Optional.none();}else{return Optional.some(text);}};const walkPastBookmark=(node,start)=>node.filter(elm=>BookmarkManager.isBookmarkNode(elm.dom)).bind(start?nextSibling:prevSibling);const merge$1=(outer,inner,rng,start)=>{const outerElm=outer.dom;const innerElm=inner.dom;const oldLength=start?outerElm.length:innerElm.length;if(start){mergeTextNodes(outerElm,innerElm,false,!start);rng.setStart(innerElm,oldLength);}else{mergeTextNodes(innerElm,outerElm,false,!start);rng.setEnd(innerElm,oldLength);}};const normalizeTextIfRequired=(inner,start)=>{parent(inner).each(root=>{const text=inner.dom;if(start&&needsToBeNbspLeft(root,CaretPosition(text,0))){normalizeWhitespaceAfter(text,0);}else if(!start&&needsToBeNbspRight(root,CaretPosition(text,text.length))){normalizeWhitespaceBefore(text,text.length);}});};const mergeAndNormalizeText=(outerNode,innerNode,rng,start)=>{outerNode.bind(outer=>{const normalizer=start?normalizeWhitespaceBefore:normalizeWhitespaceAfter;normalizer(outer.dom,start?outer.dom.length:0);return innerNode.filter(isText$b).map(inner=>merge$1(outer,inner,rng,start));}).orThunk(()=>{const innerTextNode=walkPastBookmark(innerNode,start).or(innerNode).filter(isText$b);return innerTextNode.map(inner=>normalizeTextIfRequired(inner,start));});};const rngSetContent=(rng,fragment)=>{const firstChild=Optional.from(fragment.firstChild).map(SugarElement.fromDom);const lastChild=Optional.from(fragment.lastChild).map(SugarElement.fromDom);rng.deleteContents();rng.insertNode(fragment);const prevText=firstChild.bind(prevSibling).filter(isText$b).bind(removeEmpty);const nextText=lastChild.bind(nextSibling).filter(isText$b).bind(removeEmpty);mergeAndNormalizeText(prevText,firstChild,rng,true);mergeAndNormalizeText(nextText,lastChild,rng,false);rng.collapse(false);};const setupArgs$2=(args,content)=>({format:'html',...args,set:true,selection:true,content});const cleanContent=(editor,args)=>{if(args.format!=='raw'){const rng=editor.selection.getRng();const contextBlock=editor.dom.getParent(rng.commonAncestorContainer,editor.dom.isBlock);const contextArgs=contextBlock?{context:contextBlock.nodeName.toLowerCase()}:{};const node=editor.parser.parse(args.content,{forced_root_block:false,...contextArgs,...args});return HtmlSerializer({validate:false},editor.schema).serialize(node);}else{return args.content;}};const setContent$1=(editor,content,args={})=>{const defaultedArgs=setupArgs$2(args,content);preProcessSetContent(editor,defaultedArgs).each(updatedArgs=>{const cleanedContent=cleanContent(editor,updatedArgs);const rng=editor.selection.getRng();rngSetContent(rng,rng.createContextualFragment(cleanedContent));editor.selection.setRng(rng);scrollRangeIntoView(editor,rng);postProcessSetContent(editor,cleanedContent,updatedArgs);});};const deleteFromCallbackMap=(callbackMap,selector,callback)=>{if(has$2(callbackMap,selector)){const newCallbacks=filter$5(callbackMap[selector],cb=>cb!==callback);if(newCallbacks.length===0){delete callbackMap[selector];}else{callbackMap[selector]=newCallbacks;}}};var SelectorChanged=(dom,editor)=>{let selectorChangedData;let currentSelectors;const findMatchingNode=(selector,nodes)=>find$2(nodes,node=>dom.is(node,selector));const getParents=elem=>dom.getParents(elem,undefined,dom.getRoot());const setup=()=>{selectorChangedData={};currentSelectors={};editor.on('NodeChange',e=>{const node=e.element;const parents=getParents(node);const matchedSelectors={};each$d(selectorChangedData,(callbacks,selector)=>{findMatchingNode(selector,parents).each(node=>{if(!currentSelectors[selector]){each$e(callbacks,callback=>{callback(true,{node,selector,parents});});currentSelectors[selector]=callbacks;}matchedSelectors[selector]=callbacks;});});each$d(currentSelectors,(callbacks,selector)=>{if(!matchedSelectors[selector]){delete currentSelectors[selector];each$e(callbacks,callback=>{callback(false,{node,selector,parents});});}});});};return{selectorChangedWithUnbind:(selector,callback)=>{if(!selectorChangedData){setup();}if(!selectorChangedData[selector]){selectorChangedData[selector]=[];}selectorChangedData[selector].push(callback);findMatchingNode(selector,getParents(editor.selection.getStart())).each(()=>{currentSelectors[selector]=selectorChangedData[selector];});return{unbind:()=>{deleteFromCallbackMap(selectorChangedData,selector,callback);deleteFromCallbackMap(currentSelectors,selector,callback);}};}};};const isAttachedToDom=node=>{return!!(node&&node.ownerDocument)&&contains(SugarElement.fromDom(node.ownerDocument),SugarElement.fromDom(node));};const isValidRange=rng=>{if(!rng){return false;}else{return isAttachedToDom(rng.startContainer)&&isAttachedToDom(rng.endContainer);}};const EditorSelection=(dom,win,serializer,editor)=>{let selectedRange;let explicitRange;const{selectorChangedWithUnbind}=SelectorChanged(dom,editor);const setCursorLocation=(node,offset)=>{const rng=dom.createRng();if(isNonNullable(node)&&isNonNullable(offset)){rng.setStart(node,offset);rng.setEnd(node,offset);setRng(rng);collapse(false);}else{moveEndPoint(dom,rng,editor.getBody(),true);setRng(rng);}};const getContent=args=>getContent$1(editor,args);const setContent=(content,args)=>setContent$1(editor,content,args);const getStart$1=real=>getStart(editor.getBody(),getRng$1(),real);const getEnd=real=>getEnd$1(editor.getBody(),getRng$1(),real);const getBookmark=(type,normalized)=>bookmarkManager.getBookmark(type,normalized);const moveToBookmark=bookmark=>bookmarkManager.moveToBookmark(bookmark);const select$1=(node,content)=>{select(dom,node,content).each(setRng);return node;};const isCollapsed=()=>{const rng=getRng$1(),sel=getSel();if(!rng||rng.item){return false;}if(rng.compareEndPoints){return rng.compareEndPoints('StartToEnd',rng)===0;}return!sel||rng.collapsed;};const collapse=toStart=>{const rng=getRng$1();rng.collapse(!!toStart);setRng(rng);};const getSel=()=>win.getSelection?win.getSelection():win.document.selection;const getRng$1=()=>{let rng;const tryCompareBoundaryPoints=(how,sourceRange,destinationRange)=>{try{return sourceRange.compareBoundaryPoints(how,destinationRange);}catch(ex){return-1;}};const doc=win.document;if(isNonNullable(editor.bookmark)&&!hasFocus(editor)){const bookmark=getRng(editor);if(bookmark.isSome()){return bookmark.map(r=>processRanges(editor,[r])[0]).getOr(doc.createRange());}}try{const selection=getSel();if(selection&&!isRestrictedNode(selection.anchorNode)){if(selection.rangeCount>0){rng=selection.getRangeAt(0);}else{rng=doc.createRange();}rng=processRanges(editor,[rng])[0];}}catch(ex){}if(!rng){rng=doc.createRange();}if(isDocument$1(rng.startContainer)&&rng.collapsed){const elm=dom.getRoot();rng.setStart(elm,0);rng.setEnd(elm,0);}if(selectedRange&&explicitRange){if(tryCompareBoundaryPoints(rng.START_TO_START,rng,selectedRange)===0&&tryCompareBoundaryPoints(rng.END_TO_END,rng,selectedRange)===0){rng=explicitRange;}else{selectedRange=null;explicitRange=null;}}return rng;};const setRng=(rng,forward)=>{if(!isValidRange(rng)){return;}const sel=getSel();const evt=editor.dispatch('SetSelectionRange',{range:rng,forward});rng=evt.range;if(sel){explicitRange=rng;try{sel.removeAllRanges();sel.addRange(rng);}catch(ex){}if(forward===false&&sel.extend){sel.collapse(rng.endContainer,rng.endOffset);sel.extend(rng.startContainer,rng.startOffset);}selectedRange=sel.rangeCount>0?sel.getRangeAt(0):null;}if(!rng.collapsed&&rng.startContainer===rng.endContainer&&(sel===null||sel===void 0?void 0:sel.setBaseAndExtent)){if(rng.endOffset-rng.startOffset<2){if(rng.startContainer.hasChildNodes()){const node=rng.startContainer.childNodes[rng.startOffset];if(node&&node.nodeName==='IMG'){sel.setBaseAndExtent(rng.startContainer,rng.startOffset,rng.endContainer,rng.endOffset);if(sel.anchorNode!==rng.startContainer||sel.focusNode!==rng.endContainer){sel.setBaseAndExtent(node,0,node,1);}}}}}editor.dispatch('AfterSetSelectionRange',{range:rng,forward});};const setNode=elm=>{setContent(dom.getOuterHTML(elm));return elm;};const getNode$1=()=>getNode(editor.getBody(),getRng$1());const getSelectedBlocks$1=(startElm,endElm)=>getSelectedBlocks(dom,getRng$1(),startElm,endElm);const isForward=()=>{const sel=getSel();const anchorNode=sel===null||sel===void 0?void 0:sel.anchorNode;const focusNode=sel===null||sel===void 0?void 0:sel.focusNode;if(!sel||!anchorNode||!focusNode||isRestrictedNode(anchorNode)||isRestrictedNode(focusNode)){return true;}const anchorRange=dom.createRng();const focusRange=dom.createRng();try{anchorRange.setStart(anchorNode,sel.anchorOffset);anchorRange.collapse(true);focusRange.setStart(focusNode,sel.focusOffset);focusRange.collapse(true);}catch(e){return true;}return anchorRange.compareBoundaryPoints(anchorRange.START_TO_START,focusRange)<=0;};const normalize=()=>{const rng=getRng$1();const sel=getSel();if(!hasMultipleRanges(sel)&&hasAnyRanges(editor)){const normRng=normalize$2(dom,rng);normRng.each(normRng=>{setRng(normRng,isForward());});return normRng.getOr(rng);}return rng;};const selectorChanged=(selector,callback)=>{selectorChangedWithUnbind(selector,callback);return exports;};const getScrollContainer=()=>{let scrollContainer;let node=dom.getRoot();while(node&&node.nodeName!=='BODY'){if(node.scrollHeight>node.clientHeight){scrollContainer=node;break;}node=node.parentNode;}return scrollContainer;};const scrollIntoView=(elm,alignToTop)=>{if(isNonNullable(elm)){scrollElementIntoView(editor,elm,alignToTop);}else{scrollRangeIntoView(editor,getRng$1(),alignToTop);}};const placeCaretAt=(clientX,clientY)=>setRng(fromPoint(clientX,clientY,editor.getDoc()));const getBoundingClientRect=()=>{const rng=getRng$1();return rng.collapsed?CaretPosition.fromRangeStart(rng).getClientRects()[0]:rng.getBoundingClientRect();};const destroy=()=>{win=selectedRange=explicitRange=null;controlSelection.destroy();};const exports={dom,win,serializer,editor,collapse,setCursorLocation,getContent,setContent,getBookmark,moveToBookmark,select:select$1,isCollapsed,isForward,setNode,getNode:getNode$1,getSel,setRng,getRng:getRng$1,getStart:getStart$1,getEnd,getSelectedBlocks:getSelectedBlocks$1,normalize,selectorChanged,selectorChangedWithUnbind,getScrollContainer,scrollIntoView,placeCaretAt,getBoundingClientRect,destroy};const bookmarkManager=BookmarkManager(exports);const controlSelection=ControlSelection(exports,editor);exports.bookmarkManager=bookmarkManager;exports.controlSelection=controlSelection;return exports;};const register$3=(htmlParser,settings,dom)=>{htmlParser.addAttributeFilter('data-mce-tabindex',(nodes,name)=>{let i=nodes.length;while(i--){const node=nodes[i];node.attr('tabindex',node.attr('data-mce-tabindex'));node.attr(name,null);}});htmlParser.addAttributeFilter('src,href,style',(nodes,name)=>{const internalName='data-mce-'+name;const urlConverter=settings.url_converter;const urlConverterScope=settings.url_converter_scope;let i=nodes.length;while(i--){const node=nodes[i];let value=node.attr(internalName);if(value!==undefined){node.attr(name,value.length>0?value:null);node.attr(internalName,null);}else{value=node.attr(name);if(name==='style'){value=dom.serializeStyle(dom.parseStyle(value),node.name);}else if(urlConverter){value=urlConverter.call(urlConverterScope,value,name,node.name);}node.attr(name,value.length>0?value:null);}}});htmlParser.addAttributeFilter('class',nodes=>{let i=nodes.length;while(i--){const node=nodes[i];let value=node.attr('class');if(value){value=value.replace(/(?:^|\\s)mce-item-\\w+(?!\\S)/g,'');node.attr('class',value.length>0?value:null);}}});htmlParser.addAttributeFilter('data-mce-type',(nodes,name,args)=>{let i=nodes.length;while(i--){const node=nodes[i];if(node.attr('data-mce-type')==='bookmark'&&!args.cleanup){const hasChildren=Optional.from(node.firstChild).exists(firstChild=>{var _a;return!isZwsp((_a=firstChild.value)!==null&&_a!==void 0?_a:'');});if(hasChildren){node.unwrap();}else{node.remove();}}}});htmlParser.addNodeFilter('noscript',nodes=>{var _a;let i=nodes.length;while(i--){const node=nodes[i].firstChild;if(node){node.value=Entities.decode((_a=node.value)!==null&&_a!==void 0?_a:'');}}});htmlParser.addNodeFilter('script,style',(nodes,name)=>{var _a;const trim=value=>{return value.replace(/(<!--\\[CDATA\\[|\\]\\]-->)/g,'\\n').replace(/^[\\r\\n]*|[\\r\\n]*$/g,'').replace(/^\\s*((<!--)?(\\s*\\/\\/)?\\s*<!\\[CDATA\\[|(<!--\\s*)?\\/\\*\\s*<!\\[CDATA\\[\\s*\\*\\/|(\\/\\/)?\\s*<!--|\\/\\*\\s*<!--\\s*\\*\\/)\\s*[\\r\\n]*/gi,'').replace(/\\s*(\\/\\*\\s*\\]\\]>\\s*\\*\\/(-->)?|\\s*\\/\\/\\s*\\]\\]>(-->)?|\\/\\/\\s*(-->)?|\\]\\]>|\\/\\*\\s*-->\\s*\\*\\/|\\s*-->\\s*)\\s*$/g,'');};let i=nodes.length;while(i--){const node=nodes[i];const firstChild=node.firstChild;const value=(_a=firstChild===null||firstChild===void 0?void 0:firstChild.value)!==null&&_a!==void 0?_a:'';if(name==='script'){const type=node.attr('type');if(type){node.attr('type',type==='mce-no/type'?null:type.replace(/^mce\\-/,''));}if(settings.element_format==='xhtml'&&firstChild&&value.length>0){firstChild.value='// <![CDATA[\\n'+trim(value)+'\\n// ]]>';}}else{if(settings.element_format==='xhtml'&&firstChild&&value.length>0){firstChild.value='<!--\\n'+trim(value)+'\\n-->';}}}});htmlParser.addNodeFilter('#comment',nodes=>{let i=nodes.length;while(i--){const node=nodes[i];const value=node.value;if(settings.preserve_cdata&&(value===null||value===void 0?void 0:value.indexOf('[CDATA['))===0){node.name='#cdata';node.type=4;node.value=dom.decode(value.replace(/^\\[CDATA\\[|\\]\\]$/g,''));}else if((value===null||value===void 0?void 0:value.indexOf('mce:protected '))===0){node.name='#text';node.type=3;node.raw=true;node.value=unescape(value).substr(14);}}});htmlParser.addNodeFilter('xml:namespace,input',(nodes,name)=>{let i=nodes.length;while(i--){const node=nodes[i];if(node.type===7){node.remove();}else if(node.type===1){if(name==='input'&&!node.attr('type')){node.attr('type','text');}}}});htmlParser.addAttributeFilter('data-mce-type',nodes=>{each$e(nodes,node=>{if(node.attr('data-mce-type')==='format-caret'){if(node.isEmpty(htmlParser.schema.getNonEmptyElements())){node.remove();}else{node.unwrap();}}});});htmlParser.addAttributeFilter('data-mce-src,data-mce-href,data-mce-style,'+'data-mce-selected,data-mce-expando,'+'data-mce-type,data-mce-resize,data-mce-placeholder',(nodes,name)=>{let i=nodes.length;while(i--){nodes[i].attr(name,null);}});};const trimTrailingBr=rootNode=>{const isBr=node=>{return(node===null||node===void 0?void 0:node.name)==='br';};const brNode1=rootNode.lastChild;if(isBr(brNode1)){const brNode2=brNode1.prev;if(isBr(brNode2)){brNode1.remove();brNode2.remove();}}};const preProcess$1=(editor,node,args)=>{let oldDoc;const dom=editor.dom;let clonedNode=node.cloneNode(true);const impl=document.implementation;if(impl.createHTMLDocument){const doc=impl.createHTMLDocument('');Tools.each(clonedNode.nodeName==='BODY'?clonedNode.childNodes:[clonedNode],node=>{doc.body.appendChild(doc.importNode(node,true));});if(clonedNode.nodeName!=='BODY'){clonedNode=doc.body.firstChild;}else{clonedNode=doc.body;}oldDoc=dom.doc;dom.doc=doc;}firePreProcess(editor,{...args,node:clonedNode});if(oldDoc){dom.doc=oldDoc;}return clonedNode;};const shouldFireEvent=(editor,args)=>{return isNonNullable(editor)&&editor.hasEventListeners('PreProcess')&&!args.no_events;};const process$1=(editor,node,args)=>{return shouldFireEvent(editor,args)?preProcess$1(editor,node,args):node;};const addTempAttr=(htmlParser,tempAttrs,name)=>{if(Tools.inArray(tempAttrs,name)===-1){htmlParser.addAttributeFilter(name,(nodes,name)=>{let i=nodes.length;while(i--){nodes[i].attr(name,null);}});tempAttrs.push(name);}};const postProcess=(editor,args,content)=>{if(!args.no_events&&editor){const outArgs=firePostProcess(editor,{...args,content});return outArgs.content;}else{return content;}};const getHtmlFromNode=(dom,node,args)=>{const html=trim$1(args.getInner?node.innerHTML:dom.getOuterHTML(node));return args.selection||isWsPreserveElement(SugarElement.fromDom(node))?html:Tools.trim(html);};const parseHtml=(htmlParser,html,args)=>{const parserArgs=args.selection?{forced_root_block:false,...args}:args;const rootNode=htmlParser.parse(html,parserArgs);trimTrailingBr(rootNode);return rootNode;};const serializeNode=(settings,schema,node)=>{const htmlSerializer=HtmlSerializer(settings,schema);return htmlSerializer.serialize(node);};const toHtml=(editor,settings,schema,rootNode,args)=>{const content=serializeNode(settings,schema,rootNode);return postProcess(editor,args,content);};const DomSerializerImpl=(settings,editor)=>{const tempAttrs=['data-mce-selected'];const dom=editor&&editor.dom?editor.dom:DOMUtils.DOM;const schema=editor&&editor.schema?editor.schema:Schema(settings);settings.entity_encoding=settings.entity_encoding||'named';settings.remove_trailing_brs='remove_trailing_brs'in settings?settings.remove_trailing_brs:true;const htmlParser=DomParser(settings,schema);register$3(htmlParser,settings,dom);const serialize=(node,parserArgs={})=>{const args={format:'html',...parserArgs};const targetNode=process$1(editor,node,args);const html=getHtmlFromNode(dom,targetNode,args);const rootNode=parseHtml(htmlParser,html,args);return args.format==='tree'?rootNode:toHtml(editor,settings,schema,rootNode,args);};return{schema,addNodeFilter:htmlParser.addNodeFilter,addAttributeFilter:htmlParser.addAttributeFilter,serialize:serialize,addRules:schema.addValidElements,setRules:schema.setValidElements,addTempAttr:curry(addTempAttr,htmlParser,tempAttrs),getTempAttrs:constant(tempAttrs),getNodeFilters:htmlParser.getNodeFilters,getAttributeFilters:htmlParser.getAttributeFilters,removeNodeFilter:htmlParser.removeNodeFilter,removeAttributeFilter:htmlParser.removeAttributeFilter};};const DomSerializer=(settings,editor)=>{const domSerializer=DomSerializerImpl(settings,editor);return{schema:domSerializer.schema,addNodeFilter:domSerializer.addNodeFilter,addAttributeFilter:domSerializer.addAttributeFilter,serialize:domSerializer.serialize,addRules:domSerializer.addRules,setRules:domSerializer.setRules,addTempAttr:domSerializer.addTempAttr,getTempAttrs:domSerializer.getTempAttrs,getNodeFilters:domSerializer.getNodeFilters,getAttributeFilters:domSerializer.getAttributeFilters,removeNodeFilter:domSerializer.removeNodeFilter,removeAttributeFilter:domSerializer.removeAttributeFilter};};const defaultFormat$1='html';const setupArgs$1=(args,format)=>({...args,format,get:true,getInner:true});const getContent=(editor,args={})=>{const format=args.format?args.format:defaultFormat$1;const defaultedArgs=setupArgs$1(args,format);return preProcessGetContent(editor,defaultedArgs).fold(identity,updatedArgs=>{const content=getContent$2(editor,updatedArgs);return postProcessGetContent(editor,content,updatedArgs);});};const defaultFormat='html';const setupArgs=(args,content)=>({format:defaultFormat,...args,set:true,content});const setContent=(editor,content,args={})=>{const defaultedArgs=setupArgs(args,content);return preProcessSetContent(editor,defaultedArgs).map(updatedArgs=>{const result=setContent$2(editor,updatedArgs.content,updatedArgs);postProcessSetContent(editor,result.html,updatedArgs);return result.content;}).getOr(content);};const removedOptions=('autoresize_on_init,content_editable_state,padd_empty_with_br,block_elements,'+'boolean_attributes,editor_deselector,editor_selector,elements,file_browser_callback_types,filepicker_validator_handler,'+'force_hex_style_colors,force_p_newlines,gecko_spellcheck,images_dataimg_filter,media_scripts,mode,move_caret_before_on_enter_elements,'+'non_empty_elements,self_closing_elements,short_ended_elements,special,spellchecker_select_languages,spellchecker_whitelist,'+'tab_focus,tabfocus_elements,table_responsive_width,text_block_elements,text_inline_elements,toolbar_drawer,types,validate,whitespace_elements,'+'paste_enable_default_filters,paste_filter_drop,paste_word_valid_elements,paste_retain_style_properties,paste_convert_word_fake_lists').split(',');const removedPlugins='bbcode,colorpicker,contextmenu,fullpage,legacyoutput,spellchecker,textcolor'.split(',');const getRemovedOptions=options=>{const settingNames=filter$5(removedOptions,setting=>has$2(options,setting));const forcedRootBlock=options.forced_root_block;if(forcedRootBlock===false||forcedRootBlock===''){settingNames.push('forced_root_block (false only)');}return sort(settingNames);};const getRemovedPlugins=options=>{const plugins=Tools.makeMap(options.plugins,' ');const hasPlugin=plugin=>has$2(plugins,plugin);const pluginNames=filter$5(removedPlugins,hasPlugin);return sort(pluginNames);};const logRemovedWarnings=(rawOptions,normalizedOptions)=>{const removedOptions=getRemovedOptions(rawOptions);const removedPlugins=getRemovedPlugins(normalizedOptions);const hasRemovedPlugins=removedPlugins.length>0;const hasRemovedOptions=removedOptions.length>0;const isLegacyMobileTheme=normalizedOptions.theme==='mobile';if(hasRemovedPlugins||hasRemovedOptions||isLegacyMobileTheme){const listJoiner='\\n- ';const themesMessage=isLegacyMobileTheme?`\\n\\nThemes:${listJoiner}mobile`:'';const pluginsMessage=hasRemovedPlugins?`\\n\\nPlugins:${listJoiner}${removedPlugins.join(listJoiner)}`:'';const optionsMessage=hasRemovedOptions?`\\n\\nOptions:${listJoiner}${removedOptions.join(listJoiner)}`:'';console.warn('The following deprecated features are currently enabled and have been removed in TinyMCE 6.0. These features will no longer work and should be removed from the TinyMCE configuration. '+'See https://www.tiny.cloud/docs/tinymce/6/migration-from-5x/ for more information.'+themesMessage+pluginsMessage+optionsMessage);}};const logWarnings=(rawOptions,normalizedOptions)=>{logRemovedWarnings(rawOptions,normalizedOptions);};const DOM$8=DOMUtils.DOM;const restoreOriginalStyles=editor=>{DOM$8.setStyle(editor.id,'display',editor.orgDisplay);};const safeDestroy=x=>Optional.from(x).each(x=>x.destroy());const clearDomReferences=editor=>{const ed=editor;ed.contentAreaContainer=ed.formElement=ed.container=ed.editorContainer=null;ed.bodyElement=ed.contentDocument=ed.contentWindow=null;ed.iframeElement=ed.targetElm=null;const selection=editor.selection;if(selection){const dom=selection.dom;ed.selection=selection.win=selection.dom=dom.doc=null;}};const restoreForm=editor=>{const form=editor.formElement;if(form){if(form._mceOldSubmit){form.submit=form._mceOldSubmit;delete form._mceOldSubmit;}DOM$8.unbind(form,'submit reset',editor.formEventDelegate);}};const remove$1=editor=>{if(!editor.removed){const{_selectionOverrides,editorUpload}=editor;const body=editor.getBody();const element=editor.getElement();if(body){editor.save({is_removing:true});}editor.removed=true;editor.unbindAllNativeEvents();if(editor.hasHiddenInput&&isNonNullable(element===null||element===void 0?void 0:element.nextSibling)){DOM$8.remove(element.nextSibling);}fireRemove(editor);editor.editorManager.remove(editor);if(!editor.inline&&body){restoreOriginalStyles(editor);}fireDetach(editor);DOM$8.remove(editor.getContainer());safeDestroy(_selectionOverrides);safeDestroy(editorUpload);editor.destroy();}};const destroy=(editor,automatic)=>{const{selection,dom}=editor;if(editor.destroyed){return;}if(!automatic&&!editor.removed){editor.remove();return;}if(!automatic){editor.editorManager.off('beforeunload',editor._beforeUnload);if(editor.theme&&editor.theme.destroy){editor.theme.destroy();}safeDestroy(selection);safeDestroy(dom);}restoreForm(editor);clearDomReferences(editor);editor.destroyed=true;};const CreateIconManager=()=>{const lookup={};const add=(id,iconPack)=>{lookup[id]=iconPack;};const get=id=>{if(lookup[id]){return lookup[id];}else{return{icons:{}};}};const has=id=>has$2(lookup,id);return{add,get,has};};const IconManager=CreateIconManager();const ModelManager=AddOnManager.ModelManager;const getProp=(propName,elm)=>{const rawElm=elm.dom;return rawElm[propName];};const getComputedSizeProp=(propName,elm)=>parseInt(get$7(elm,propName),10);const getClientWidth=curry(getProp,'clientWidth');const getClientHeight=curry(getProp,'clientHeight');const getMarginTop=curry(getComputedSizeProp,'margin-top');const getMarginLeft=curry(getComputedSizeProp,'margin-left');const getBoundingClientRect=elm=>elm.dom.getBoundingClientRect();const isInsideElementContentArea=(bodyElm,clientX,clientY)=>{const clientWidth=getClientWidth(bodyElm);const clientHeight=getClientHeight(bodyElm);return clientX>=0&&clientY>=0&&clientX<=clientWidth&&clientY<=clientHeight;};const transpose=(inline,elm,clientX,clientY)=>{const clientRect=getBoundingClientRect(elm);const deltaX=inline?clientRect.left+elm.dom.clientLeft+getMarginLeft(elm):0;const deltaY=inline?clientRect.top+elm.dom.clientTop+getMarginTop(elm):0;const x=clientX-deltaX;const y=clientY-deltaY;return{x,y};};const isXYInContentArea=(editor,clientX,clientY)=>{const bodyElm=SugarElement.fromDom(editor.getBody());const targetElm=editor.inline?bodyElm:documentElement(bodyElm);const transposedPoint=transpose(editor.inline,targetElm,clientX,clientY);return isInsideElementContentArea(targetElm,transposedPoint.x,transposedPoint.y);};const fromDomSafe=node=>Optional.from(node).map(SugarElement.fromDom);const isEditorAttachedToDom=editor=>{const rawContainer=editor.inline?editor.getBody():editor.getContentAreaContainer();return fromDomSafe(rawContainer).map(inBody).getOr(false);};var NotificationManagerImpl=()=>{const unimplemented=()=>{throw new Error('Theme did not provide a NotificationManager implementation.');};return{open:unimplemented,close:unimplemented,getArgs:unimplemented};};const NotificationManager=editor=>{const notifications=[];const getImplementation=()=>{const theme=editor.theme;return theme&&theme.getNotificationManagerImpl?theme.getNotificationManagerImpl():NotificationManagerImpl();};const getTopNotification=()=>{return Optional.from(notifications[0]);};const isEqual=(a,b)=>{return a.type===b.type&&a.text===b.text&&!a.progressBar&&!a.timeout&&!b.progressBar&&!b.timeout;};const reposition=()=>{each$e(notifications,notification=>{notification.reposition();});};const addNotification=notification=>{notifications.push(notification);};const closeNotification=notification=>{findIndex$2(notifications,otherNotification=>{return otherNotification===notification;}).each(index=>{notifications.splice(index,1);});};const open=(spec,fireEvent=true)=>{if(editor.removed||!isEditorAttachedToDom(editor)){return{};}if(fireEvent){editor.dispatch('BeforeOpenNotification',{notification:spec});}return find$2(notifications,notification=>{return isEqual(getImplementation().getArgs(notification),spec);}).getOrThunk(()=>{editor.editorManager.setActive(editor);const notification=getImplementation().open(spec,()=>{closeNotification(notification);reposition();getTopNotification().fold(()=>editor.focus(),top=>focus$1(SugarElement.fromDom(top.getEl())));});addNotification(notification);reposition();editor.dispatch('OpenNotification',{notification:{...notification}});return notification;});};const close=()=>{getTopNotification().each(notification=>{getImplementation().close(notification);closeNotification(notification);reposition();});};const getNotifications=constant(notifications);const registerEvents=editor=>{editor.on('SkinLoaded',()=>{const serviceMessage=getServiceMessage(editor);if(serviceMessage){open({text:serviceMessage,type:'warning',timeout:0},false);}reposition();});editor.on('show ResizeEditor ResizeWindow NodeChange',()=>{requestAnimationFrame(reposition);});editor.on('remove',()=>{each$e(notifications.slice(),notification=>{getImplementation().close(notification);});});};registerEvents(editor);return{open,close,getNotifications};};const PluginManager=AddOnManager.PluginManager;const ThemeManager=AddOnManager.ThemeManager;var WindowManagerImpl=()=>{const unimplemented=()=>{throw new Error('Theme did not provide a WindowManager implementation.');};return{open:unimplemented,openUrl:unimplemented,alert:unimplemented,confirm:unimplemented,close:unimplemented};};const WindowManager=editor=>{let dialogs=[];const getImplementation=()=>{const theme=editor.theme;return theme&&theme.getWindowManagerImpl?theme.getWindowManagerImpl():WindowManagerImpl();};const funcBind=(scope,f)=>{return(...args)=>{return f?f.apply(scope,args):undefined;};};const fireOpenEvent=dialog=>{editor.dispatch('OpenWindow',{dialog});};const fireCloseEvent=dialog=>{editor.dispatch('CloseWindow',{dialog});};const addDialog=dialog=>{dialogs.push(dialog);fireOpenEvent(dialog);};const closeDialog=dialog=>{fireCloseEvent(dialog);dialogs=filter$5(dialogs,otherDialog=>{return otherDialog!==dialog;});if(dialogs.length===0){editor.focus();}};const getTopDialog=()=>{return Optional.from(dialogs[dialogs.length-1]);};const storeSelectionAndOpenDialog=openDialog=>{editor.editorManager.setActive(editor);store(editor);editor.ui.show();const dialog=openDialog();addDialog(dialog);return dialog;};const open=(args,params)=>{return storeSelectionAndOpenDialog(()=>getImplementation().open(args,params,closeDialog));};const openUrl=args=>{return storeSelectionAndOpenDialog(()=>getImplementation().openUrl(args,closeDialog));};const alert=(message,callback,scope)=>{const windowManagerImpl=getImplementation();windowManagerImpl.alert(message,funcBind(scope?scope:windowManagerImpl,callback));};const confirm=(message,callback,scope)=>{const windowManagerImpl=getImplementation();windowManagerImpl.confirm(message,funcBind(scope?scope:windowManagerImpl,callback));};const close=()=>{getTopDialog().each(dialog=>{getImplementation().close(dialog);closeDialog(dialog);});};editor.on('remove',()=>{each$e(dialogs,dialog=>{getImplementation().close(dialog);});});return{open,openUrl,alert,confirm,close};};const displayNotification=(editor,message)=>{editor.notificationManager.open({type:'error',text:message});};const displayError=(editor,message)=>{if(editor._skinLoaded){displayNotification(editor,message);}else{editor.on('SkinLoaded',()=>{displayNotification(editor,message);});}};const uploadError=(editor,message)=>{displayError(editor,I18n.translate(['Failed to upload image: {0}',message]));};const logError=(editor,errorType,msg)=>{fireError(editor,errorType,{message:msg});console.error(msg);};const createLoadError=(type,url,name)=>name?`Failed to load ${type}: ${name} from url ${url}`:`Failed to load ${type} url: ${url}`;const pluginLoadError=(editor,url,name)=>{logError(editor,'PluginLoadError',createLoadError('plugin',url,name));};const iconsLoadError=(editor,url,name)=>{logError(editor,'IconsLoadError',createLoadError('icons',url,name));};const languageLoadError=(editor,url,name)=>{logError(editor,'LanguageLoadError',createLoadError('language',url,name));};const themeLoadError=(editor,url,name)=>{logError(editor,'ThemeLoadError',createLoadError('theme',url,name));};const modelLoadError=(editor,url,name)=>{logError(editor,'ModelLoadError',createLoadError('model',url,name));};const pluginInitError=(editor,name,err)=>{const message=I18n.translate(['Failed to initialize plugin: {0}',name]);fireError(editor,'PluginLoadError',{message});initError(message,err);displayError(editor,message);};const initError=(message,...x)=>{const console=window.console;if(console){if(console.error){console.error(message,...x);}else{console.log(message,...x);}}};const isContentCssSkinName=url=>/^[a-z0-9\\-]+$/i.test(url);const getContentCssUrls=editor=>{return transformToUrls(editor,getContentCss(editor));};const getFontCssUrls=editor=>{return transformToUrls(editor,getFontCss(editor));};const transformToUrls=(editor,cssLinks)=>{const skinUrl=editor.editorManager.baseURL+'/skins/content';const suffix=editor.editorManager.suffix;const contentCssFile=`content${suffix}.css`;return map$3(cssLinks,url=>{if(isContentCssSkinName(url)&&!editor.inline){return`${skinUrl}/${url}/${contentCssFile}`;}else{return editor.documentBaseURI.toAbsolute(url);}});};const appendContentCssFromSettings=editor=>{editor.contentCSS=editor.contentCSS.concat(getContentCssUrls(editor),getFontCssUrls(editor));};const filter$1=always;const bind$1=(element,event,handler)=>bind$2(element,event,filter$1,handler);const getAllImages=elm=>{return elm?from(elm.getElementsByTagName('img')):[];};const ImageScanner=(uploadStatus,blobCache)=>{const cachedPromises={};const findAll=(elm,predicate=always)=>{const images=filter$5(getAllImages(elm),img=>{const src=img.src;if(img.hasAttribute('data-mce-bogus')){return false;}if(img.hasAttribute('data-mce-placeholder')){return false;}if(!src||src===Env.transparentSrc){return false;}if(startsWith(src,'blob:')){return!uploadStatus.isUploaded(src)&&predicate(img);}if(startsWith(src,'data:')){return predicate(img);}return false;});const promises=map$3(images,img=>{const imageSrc=img.src;if(has$2(cachedPromises,imageSrc)){return cachedPromises[imageSrc].then(imageInfo=>{if(isString(imageInfo)){return imageInfo;}else{return{image:img,blobInfo:imageInfo.blobInfo};}});}else{const newPromise=imageToBlobInfo(blobCache,imageSrc).then(blobInfo=>{delete cachedPromises[imageSrc];return{image:img,blobInfo};}).catch(error=>{delete cachedPromises[imageSrc];return error;});cachedPromises[imageSrc]=newPromise;return newPromise;}});return Promise.all(promises);};return{findAll};};const UploadStatus=()=>{const PENDING=1,UPLOADED=2;let blobUriStatuses={};const createStatus=(status,resultUri)=>{return{status,resultUri};};const hasBlobUri=blobUri=>{return blobUri in blobUriStatuses;};const getResultUri=blobUri=>{const result=blobUriStatuses[blobUri];return result?result.resultUri:null;};const isPending=blobUri=>{return hasBlobUri(blobUri)?blobUriStatuses[blobUri].status===PENDING:false;};const isUploaded=blobUri=>{return hasBlobUri(blobUri)?blobUriStatuses[blobUri].status===UPLOADED:false;};const markPending=blobUri=>{blobUriStatuses[blobUri]=createStatus(PENDING,null);};const markUploaded=(blobUri,resultUri)=>{blobUriStatuses[blobUri]=createStatus(UPLOADED,resultUri);};const removeFailed=blobUri=>{delete blobUriStatuses[blobUri];};const destroy=()=>{blobUriStatuses={};};return{hasBlobUri,getResultUri,isPending,isUploaded,markPending,markUploaded,removeFailed,destroy};};let count=0;const seed=()=>{const rnd=()=>{return Math.round(Math.random()*4294967295).toString(36);};const now=new Date().getTime();return's'+now.toString(36)+rnd()+rnd()+rnd();};const uuid=prefix=>{return prefix+count++ +seed();};const BlobCache=()=>{let cache=[];const mimeToExt=mime=>{const mimes={'image/jpeg':'jpg','image/jpg':'jpg','image/gif':'gif','image/png':'png','image/apng':'apng','image/avif':'avif','image/svg+xml':'svg','image/webp':'webp','image/bmp':'bmp','image/tiff':'tiff'};return mimes[mime.toLowerCase()]||'dat';};const create=(o,blob,base64,name,filename)=>{if(isString(o)){const id=o;return toBlobInfo({id,name,filename,blob:blob,base64:base64});}else if(isObject(o)){return toBlobInfo(o);}else{throw new Error('Unknown input type');}};const toBlobInfo=o=>{if(!o.blob||!o.base64){throw new Error('blob and base64 representations of the image are required for BlobInfo to be created');}const id=o.id||uuid('blobid');const name=o.name||id;const blob=o.blob;return{id:constant(id),name:constant(name),filename:constant(o.filename||name+'.'+mimeToExt(blob.type)),blob:constant(blob),base64:constant(o.base64),blobUri:constant(o.blobUri||URL.createObjectURL(blob)),uri:constant(o.uri)};};const add=blobInfo=>{if(!get(blobInfo.id())){cache.push(blobInfo);}};const findFirst=predicate=>find$2(cache,predicate).getOrUndefined();const get=id=>findFirst(cachedBlobInfo=>cachedBlobInfo.id()===id);const getByUri=blobUri=>findFirst(blobInfo=>blobInfo.blobUri()===blobUri);const getByData=(base64,type)=>findFirst(blobInfo=>blobInfo.base64()===base64&&blobInfo.blob().type===type);const removeByUri=blobUri=>{cache=filter$5(cache,blobInfo=>{if(blobInfo.blobUri()===blobUri){URL.revokeObjectURL(blobInfo.blobUri());return false;}return true;});};const destroy=()=>{each$e(cache,cachedBlobInfo=>{URL.revokeObjectURL(cachedBlobInfo.blobUri());});cache=[];};return{create,add,get,getByUri,getByData,findFirst,removeByUri,destroy};};const Uploader=(uploadStatus,settings)=>{const pendingPromises={};const pathJoin=(path1,path2)=>{if(path1){return path1.replace(/\\/$/,'')+'/'+path2.replace(/^\\//,'');}return path2;};const defaultHandler=(blobInfo,progress)=>new Promise((success,failure)=>{const xhr=new XMLHttpRequest();xhr.open('POST',settings.url);xhr.withCredentials=settings.credentials;xhr.upload.onprogress=e=>{progress(e.loaded/e.total*100);};xhr.onerror=()=>{failure('Image upload failed due to a XHR Transport error. Code: '+xhr.status);};xhr.onload=()=>{if(xhr.status<200||xhr.status>=300){failure('HTTP Error: '+xhr.status);return;}const json=JSON.parse(xhr.responseText);if(!json||!isString(json.location)){failure('Invalid JSON: '+xhr.responseText);return;}success(pathJoin(settings.basePath,json.location));};const formData=new FormData();formData.append('file',blobInfo.blob(),blobInfo.filename());xhr.send(formData);});const uploadHandler=isFunction(settings.handler)?settings.handler:defaultHandler;const noUpload=()=>new Promise(resolve=>{resolve([]);});const handlerSuccess=(blobInfo,url)=>({url,blobInfo,status:true});const handlerFailure=(blobInfo,error)=>({url:'',blobInfo,status:false,error});const resolvePending=(blobUri,result)=>{Tools.each(pendingPromises[blobUri],resolve=>{resolve(result);});delete pendingPromises[blobUri];};const uploadBlobInfo=(blobInfo,handler,openNotification)=>{uploadStatus.markPending(blobInfo.blobUri());return new Promise(resolve=>{let notification;let progress;try{const closeNotification=()=>{if(notification){notification.close();progress=noop;}};const success=url=>{closeNotification();uploadStatus.markUploaded(blobInfo.blobUri(),url);resolvePending(blobInfo.blobUri(),handlerSuccess(blobInfo,url));resolve(handlerSuccess(blobInfo,url));};const failure=error=>{closeNotification();uploadStatus.removeFailed(blobInfo.blobUri());resolvePending(blobInfo.blobUri(),handlerFailure(blobInfo,error));resolve(handlerFailure(blobInfo,error));};progress=percent=>{if(percent<0||percent>100){return;}Optional.from(notification).orThunk(()=>Optional.from(openNotification).map(apply$1)).each(n=>{notification=n;n.progressBar.value(percent);});};handler(blobInfo,progress).then(success,err=>{failure(isString(err)?{message:err}:err);});}catch(ex){resolve(handlerFailure(blobInfo,ex));}});};const isDefaultHandler=handler=>handler===defaultHandler;const pendingUploadBlobInfo=blobInfo=>{const blobUri=blobInfo.blobUri();return new Promise(resolve=>{pendingPromises[blobUri]=pendingPromises[blobUri]||[];pendingPromises[blobUri].push(resolve);});};const uploadBlobs=(blobInfos,openNotification)=>{blobInfos=Tools.grep(blobInfos,blobInfo=>!uploadStatus.isUploaded(blobInfo.blobUri()));return Promise.all(Tools.map(blobInfos,blobInfo=>uploadStatus.isPending(blobInfo.blobUri())?pendingUploadBlobInfo(blobInfo):uploadBlobInfo(blobInfo,uploadHandler,openNotification)));};const upload=(blobInfos,openNotification)=>!settings.url&&isDefaultHandler(uploadHandler)?noUpload():uploadBlobs(blobInfos,openNotification);return{upload};};const openNotification=editor=>()=>editor.notificationManager.open({text:editor.translate('Image uploading...'),type:'info',timeout:-1,progressBar:true});const createUploader=(editor,uploadStatus)=>Uploader(uploadStatus,{url:getImageUploadUrl(editor),basePath:getImageUploadBasePath(editor),credentials:getImagesUploadCredentials(editor),handler:getImagesUploadHandler(editor)});const ImageUploader=editor=>{const uploadStatus=UploadStatus();const uploader=createUploader(editor,uploadStatus);return{upload:(blobInfos,showNotification=true)=>uploader.upload(blobInfos,showNotification?openNotification(editor):undefined)};};const EditorUpload=editor=>{const blobCache=BlobCache();let uploader,imageScanner;const uploadStatus=UploadStatus();const urlFilters=[];const aliveGuard=callback=>{return result=>{if(editor.selection){return callback(result);}return[];};};const cacheInvalidator=url=>url+(url.indexOf('?')===-1?'?':'&')+new Date().getTime();const replaceString=(content,search,replace)=>{let index=0;do{index=content.indexOf(search,index);if(index!==-1){content=content.substring(0,index)+replace+content.substr(index+search.length);index+=replace.length-search.length+1;}}while(index!==-1);return content;};const replaceImageUrl=(content,targetUrl,replacementUrl)=>{const replacementString=`src=\"${replacementUrl}\"${replacementUrl===Env.transparentSrc?' data-mce-placeholder=\"1\"':''}`;content=replaceString(content,`src=\"${targetUrl}\"`,replacementString);content=replaceString(content,'data-mce-src=\"'+targetUrl+'\"','data-mce-src=\"'+replacementUrl+'\"');return content;};const replaceUrlInUndoStack=(targetUrl,replacementUrl)=>{each$e(editor.undoManager.data,level=>{if(level.type==='fragmented'){level.fragments=map$3(level.fragments,fragment=>replaceImageUrl(fragment,targetUrl,replacementUrl));}else{level.content=replaceImageUrl(level.content,targetUrl,replacementUrl);}});};const replaceImageUriInView=(image,resultUri)=>{const src=editor.convertURL(resultUri,'src');replaceUrlInUndoStack(image.src,resultUri);setAll$1(SugarElement.fromDom(image),{'src':shouldReuseFileName(editor)?cacheInvalidator(resultUri):resultUri,'data-mce-src':src});};const uploadImages=()=>{if(!uploader){uploader=createUploader(editor,uploadStatus);}return scanForImages().then(aliveGuard(imageInfos=>{const blobInfos=map$3(imageInfos,imageInfo=>imageInfo.blobInfo);return uploader.upload(blobInfos,openNotification(editor)).then(aliveGuard(result=>{const imagesToRemove=[];let shouldDispatchChange=false;const filteredResult=map$3(result,(uploadInfo,index)=>{const{blobInfo,image}=imageInfos[index];let removed=false;if(uploadInfo.status&&shouldReplaceBlobUris(editor)){if(uploadInfo.url&&!contains$1(image.src,uploadInfo.url)){shouldDispatchChange=true;}blobCache.removeByUri(image.src);if(isRtc(editor));else{replaceImageUriInView(image,uploadInfo.url);}}else if(uploadInfo.error){if(uploadInfo.error.remove){replaceUrlInUndoStack(image.src,Env.transparentSrc);imagesToRemove.push(image);removed=true;}uploadError(editor,uploadInfo.error.message);}return{element:image,status:uploadInfo.status,uploadUri:uploadInfo.url,blobInfo,removed};});if(imagesToRemove.length>0&&!isRtc(editor)){editor.undoManager.transact(()=>{each$e(imagesToRemove,element=>{editor.dom.remove(element);blobCache.removeByUri(element.src);});});}else if(shouldDispatchChange){editor.undoManager.dispatchChange();}return filteredResult;}));}));};const uploadImagesAuto=()=>isAutomaticUploadsEnabled(editor)?uploadImages():Promise.resolve([]);const isValidDataUriImage=imgElm=>forall(urlFilters,filter=>filter(imgElm));const addFilter=filter=>{urlFilters.push(filter);};const scanForImages=()=>{if(!imageScanner){imageScanner=ImageScanner(uploadStatus,blobCache);}return imageScanner.findAll(editor.getBody(),isValidDataUriImage).then(aliveGuard(result=>{const filteredResult=filter$5(result,resultItem=>{if(isString(resultItem)){displayError(editor,resultItem);return false;}else{return true;}});if(isRtc(editor));else{each$e(filteredResult,resultItem=>{replaceUrlInUndoStack(resultItem.image.src,resultItem.blobInfo.blobUri());resultItem.image.src=resultItem.blobInfo.blobUri();resultItem.image.removeAttribute('data-mce-src');});}return filteredResult;}));};const destroy=()=>{blobCache.destroy();uploadStatus.destroy();imageScanner=uploader=null;};const replaceBlobUris=content=>{return content.replace(/src=\"(blob:[^\"]+)\"/g,(match,blobUri)=>{const resultUri=uploadStatus.getResultUri(blobUri);if(resultUri){return'src=\"'+resultUri+'\"';}let blobInfo=blobCache.getByUri(blobUri);if(!blobInfo){blobInfo=foldl(editor.editorManager.get(),(result,editor)=>{return result||editor.editorUpload&&editor.editorUpload.blobCache.getByUri(blobUri);},undefined);}if(blobInfo){const blob=blobInfo.blob();return'src=\"data:'+blob.type+';base64,'+blobInfo.base64()+'\"';}return match;});};editor.on('SetContent',()=>{if(isAutomaticUploadsEnabled(editor)){uploadImagesAuto();}else{scanForImages();}});editor.on('RawSaveContent',e=>{e.content=replaceBlobUris(e.content);});editor.on('GetContent',e=>{if(e.source_view||e.format==='raw'||e.format==='tree'){return;}e.content=replaceBlobUris(e.content);});editor.on('PostRender',()=>{editor.parser.addNodeFilter('img',images=>{each$e(images,img=>{const src=img.attr('src');if(!src||blobCache.getByUri(src)){return;}const resultUri=uploadStatus.getResultUri(src);if(resultUri){img.attr('src',resultUri);}});});});return{blobCache,addFilter,uploadImages,uploadImagesAuto,scanForImages,destroy};};const get$1=editor=>{const dom=editor.dom;const schemaType=editor.schema.type;const formats={valigntop:[{selector:'td,th',styles:{verticalAlign:'top'}}],valignmiddle:[{selector:'td,th',styles:{verticalAlign:'middle'}}],valignbottom:[{selector:'td,th',styles:{verticalAlign:'bottom'}}],alignleft:[{selector:'figure.image',collapsed:false,classes:'align-left',ceFalseOverride:true,preview:'font-family font-size'},{selector:'figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li,pre',styles:{textAlign:'left'},inherit:false,preview:false},{selector:'img,audio,video',collapsed:false,styles:{float:'left'},preview:'font-family font-size'},{selector:'table',collapsed:false,styles:{marginLeft:'0px',marginRight:'auto'},onformat:table=>{dom.setStyle(table,'float',null);},preview:'font-family font-size'},{selector:'.mce-preview-object,[data-ephox-embed-iri]',ceFalseOverride:true,styles:{float:'left'}}],aligncenter:[{selector:'figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li,pre',styles:{textAlign:'center'},inherit:false,preview:'font-family font-size'},{selector:'figure.image',collapsed:false,classes:'align-center',ceFalseOverride:true,preview:'font-family font-size'},{selector:'img,audio,video',collapsed:false,styles:{display:'block',marginLeft:'auto',marginRight:'auto'},preview:false},{selector:'table',collapsed:false,styles:{marginLeft:'auto',marginRight:'auto'},preview:'font-family font-size'},{selector:'.mce-preview-object',ceFalseOverride:true,styles:{display:'table',marginLeft:'auto',marginRight:'auto'},preview:false},{selector:'[data-ephox-embed-iri]',ceFalseOverride:true,styles:{marginLeft:'auto',marginRight:'auto'},preview:false}],alignright:[{selector:'figure.image',collapsed:false,classes:'align-right',ceFalseOverride:true,preview:'font-family font-size'},{selector:'figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li,pre',styles:{textAlign:'right'},inherit:false,preview:'font-family font-size'},{selector:'img,audio,video',collapsed:false,styles:{float:'right'},preview:'font-family font-size'},{selector:'table',collapsed:false,styles:{marginRight:'0px',marginLeft:'auto'},onformat:table=>{dom.setStyle(table,'float',null);},preview:'font-family font-size'},{selector:'.mce-preview-object,[data-ephox-embed-iri]',ceFalseOverride:true,styles:{float:'right'},preview:false}],alignjustify:[{selector:'figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li,pre',styles:{textAlign:'justify'},inherit:false,preview:'font-family font-size'}],bold:[{inline:'strong',remove:'all',preserve_attributes:['class','style']},{inline:'span',styles:{fontWeight:'bold'}},{inline:'b',remove:'all',preserve_attributes:['class','style']}],italic:[{inline:'em',remove:'all',preserve_attributes:['class','style']},{inline:'span',styles:{fontStyle:'italic'}},{inline:'i',remove:'all',preserve_attributes:['class','style']}],underline:[{inline:'span',styles:{textDecoration:'underline'},exact:true},{inline:'u',remove:'all',preserve_attributes:['class','style']}],strikethrough:(()=>{const span={inline:'span',styles:{textDecoration:'line-through'},exact:true};const strike={inline:'strike',remove:'all',preserve_attributes:['class','style']};const s={inline:'s',remove:'all',preserve_attributes:['class','style']};return schemaType!=='html4'?[s,span,strike]:[span,s,strike];})(),forecolor:{inline:'span',styles:{color:'%value'},links:true,remove_similar:true,clear_child_styles:true},hilitecolor:{inline:'span',styles:{backgroundColor:'%value'},links:true,remove_similar:true,clear_child_styles:true},fontname:{inline:'span',toggle:false,styles:{fontFamily:'%value'},clear_child_styles:true},fontsize:{inline:'span',toggle:false,styles:{fontSize:'%value'},clear_child_styles:true},lineheight:{selector:'h1,h2,h3,h4,h5,h6,p,li,td,th,div',styles:{lineHeight:'%value'}},fontsize_class:{inline:'span',attributes:{class:'%value'}},blockquote:{block:'blockquote',wrapper:true,remove:'all'},subscript:{inline:'sub'},superscript:{inline:'sup'},code:{inline:'code'},link:{inline:'a',selector:'a',remove:'all',split:true,deep:true,onmatch:(node,_fmt,_itemName)=>{return isElement$6(node)&&node.hasAttribute('href');},onformat:(elm,_fmt,vars)=>{Tools.each(vars,(value,key)=>{dom.setAttrib(elm,key,value);});}},lang:{inline:'span',clear_child_styles:true,remove_similar:true,attributes:{'lang':'%value','data-mce-lang':vars=>{var _a;return(_a=vars===null||vars===void 0?void 0:vars.customValue)!==null&&_a!==void 0?_a:null;}}},removeformat:[{selector:'b,strong,em,i,font,u,strike,s,sub,sup,dfn,code,samp,kbd,var,cite,mark,q,del,ins,small',remove:'all',split:true,expand:false,block_expand:true,deep:true},{selector:'span',attributes:['style','class'],remove:'empty',split:true,expand:false,deep:true},{selector:'*',attributes:['style','class'],split:false,expand:false,deep:true}]};Tools.each('p h1 h2 h3 h4 h5 h6 div address pre dt dd samp'.split(/\\s/),name=>{formats[name]={block:name,remove:'all'};});return formats;};const genericBase={remove_similar:true,inherit:false};const cellBase={selector:'td,th',...genericBase};const cellFormats={tablecellbackgroundcolor:{styles:{backgroundColor:'%value'},...cellBase},tablecellverticalalign:{styles:{'vertical-align':'%value'},...cellBase},tablecellbordercolor:{styles:{borderColor:'%value'},...cellBase},tablecellclass:{classes:['%value'],...cellBase},tableclass:{selector:'table',classes:['%value'],...genericBase},tablecellborderstyle:{styles:{borderStyle:'%value'},...cellBase},tablecellborderwidth:{styles:{borderWidth:'%value'},...cellBase}};const get=constant(cellFormats);const FormatRegistry=editor=>{const formats={};const get$2=name=>isNonNullable(name)?formats[name]:formats;const has=name=>has$2(formats,name);const register=(name,format)=>{if(name){if(!isString(name)){each$d(name,(format,name)=>{register(name,format);});}else{if(!isArray$1(format)){format=[format];}each$e(format,format=>{if(isUndefined(format.deep)){format.deep=!isSelectorFormat(format);}if(isUndefined(format.split)){format.split=!isSelectorFormat(format)||isInlineFormat(format);}if(isUndefined(format.remove)&&isSelectorFormat(format)&&!isInlineFormat(format)){format.remove='none';}if(isSelectorFormat(format)&&isInlineFormat(format)){format.mixed=true;format.block_expand=true;}if(isString(format.classes)){format.classes=format.classes.split(/\\s+/);}});formats[name]=format;}}};const unregister=name=>{if(name&&formats[name]){delete formats[name];}return formats;};register(get$1(editor));register(get());register(getFormats(editor));return{get:get$2,has,register,unregister};};const each$3=Tools.each;const dom=DOMUtils.DOM;const isPreviewItem=item=>isNonNullable(item)&&isObject(item);const parsedSelectorToHtml=(ancestry,editor)=>{const schema=editor&&editor.schema||Schema({});const decorate=(elm,item)=>{if(item.classes.length>0){dom.addClass(elm,item.classes.join(' '));}dom.setAttribs(elm,item.attrs);};const createElement=sItem=>{const item=isString(sItem)?{name:sItem,classes:[],attrs:{}}:sItem;const elm=dom.create(item.name);decorate(elm,item);return elm;};const getRequiredParent=(elm,candidate)=>{const elmRule=schema.getElementRule(elm.nodeName.toLowerCase());const parentsRequired=elmRule===null||elmRule===void 0?void 0:elmRule.parentsRequired;if(parentsRequired&&parentsRequired.length){return candidate&&contains$2(parentsRequired,candidate)?candidate:parentsRequired[0];}else{return false;}};const wrapInHtml=(elm,ancestors,siblings)=>{let parentCandidate;const ancestor=ancestors[0];const ancestorName=isPreviewItem(ancestor)?ancestor.name:undefined;const parentRequired=getRequiredParent(elm,ancestorName);if(parentRequired){if(ancestorName===parentRequired){parentCandidate=ancestor;ancestors=ancestors.slice(1);}else{parentCandidate=parentRequired;}}else if(ancestor){parentCandidate=ancestor;ancestors=ancestors.slice(1);}else if(!siblings){return elm;}const parent=parentCandidate?createElement(parentCandidate):dom.create('div');parent.appendChild(elm);if(siblings){Tools.each(siblings,sibling=>{const siblingElm=createElement(sibling);parent.insertBefore(siblingElm,elm);});}const parentSiblings=isPreviewItem(parentCandidate)?parentCandidate.siblings:undefined;return wrapInHtml(parent,ancestors,parentSiblings);};const fragment=dom.create('div');if(ancestry.length>0){const item=ancestry[0];const elm=createElement(item);const siblings=isPreviewItem(item)?item.siblings:undefined;fragment.appendChild(wrapInHtml(elm,ancestry.slice(1),siblings));}return fragment;};const parseSelectorItem=item=>{item=Tools.trim(item);let tagName='div';const obj={name:tagName,classes:[],attrs:{},selector:item};if(item!=='*'){tagName=item.replace(/(?:([#\\.]|::?)([\\w\\-]+)|(\\[)([^\\]]+)\\]?)/g,($0,$1,$2,$3,$4)=>{switch($1){case'#':obj.attrs.id=$2;break;case'.':obj.classes.push($2);break;case':':if(Tools.inArray('checked disabled enabled read-only required'.split(' '),$2)!==-1){obj.attrs[$2]=$2;}break;}if($3==='['){const m=$4.match(/([\\w\\-]+)(?:\\=\\\"([^\\\"]+))?/);if(m){obj.attrs[m[1]]=m[2];}}return'';});}obj.name=tagName||'div';return obj;};const parseSelector=selector=>{if(!isString(selector)){return[];}selector=selector.split(/\\s*,\\s*/)[0];selector=selector.replace(/\\s*(~\\+|~|\\+|>)\\s*/g,'$1');return Tools.map(selector.split(/(?:>|\\s+(?![^\\[\\]]+\\]))/),item=>{const siblings=Tools.map(item.split(/(?:~\\+|~|\\+)/),parseSelectorItem);const obj=siblings.pop();if(siblings.length){obj.siblings=siblings;}return obj;}).reverse();};const getCssText=(editor,format)=>{let previewCss='';let previewStyles=getPreviewStyles(editor);if(previewStyles===''){return'';}const removeVars=val=>{return isString(val)?val.replace(/%(\\w+)/g,''):'';};const getComputedStyle=(name,elm)=>{return dom.getStyle(elm!==null&&elm!==void 0?elm:editor.getBody(),name,true);};if(isString(format)){const formats=editor.formatter.get(format);if(!formats){return'';}format=formats[0];}if('preview'in format){const preview=format.preview;if(preview===false){return'';}else{previewStyles=preview||previewStyles;}}let name=format.block||format.inline||'span';let previewFrag;const items=parseSelector(format.selector);if(items.length>0){if(!items[0].name){items[0].name=name;}name=format.selector;previewFrag=parsedSelectorToHtml(items,editor);}else{previewFrag=parsedSelectorToHtml([name],editor);}const previewElm=dom.select(name,previewFrag)[0]||previewFrag.firstChild;each$3(format.styles,(value,name)=>{const newValue=removeVars(value);if(newValue){dom.setStyle(previewElm,name,newValue);}});each$3(format.attributes,(value,name)=>{const newValue=removeVars(value);if(newValue){dom.setAttrib(previewElm,name,newValue);}});each$3(format.classes,value=>{const newValue=removeVars(value);if(!dom.hasClass(previewElm,newValue)){dom.addClass(previewElm,newValue);}});editor.dispatch('PreviewFormats');dom.setStyles(previewFrag,{position:'absolute',left:-65535});editor.getBody().appendChild(previewFrag);const rawParentFontSize=getComputedStyle('fontSize');const parentFontSize=/px$/.test(rawParentFontSize)?parseInt(rawParentFontSize,10):0;each$3(previewStyles.split(' '),name=>{let value=getComputedStyle(name,previewElm);if(name==='background-color'&&/transparent|rgba\\s*\\([^)]+,\\s*0\\)/.test(value)){value=getComputedStyle(name);if(rgbaToHexString(value).toLowerCase()==='#ffffff'){return;}}if(name==='color'){if(rgbaToHexString(value).toLowerCase()==='#000000'){return;}}if(name==='font-size'){if(/em|%$/.test(value)){if(parentFontSize===0){return;}const numValue=parseFloat(value)/(/%$/.test(value)?100:1);value=numValue*parentFontSize+'px';}}if(name==='border'&&value){previewCss+='padding:0 2px;';}previewCss+=name+':'+value+';';});editor.dispatch('AfterPreviewFormats');dom.remove(previewFrag);return previewCss;};const setup$r=editor=>{editor.addShortcut('meta+b','','Bold');editor.addShortcut('meta+i','','Italic');editor.addShortcut('meta+u','','Underline');for(let i=1;i<=6;i++){editor.addShortcut('access+'+i,'',['FormatBlock',false,'h'+i]);}editor.addShortcut('access+7','',['FormatBlock',false,'p']);editor.addShortcut('access+8','',['FormatBlock',false,'div']);editor.addShortcut('access+9','',['FormatBlock',false,'address']);};const Formatter=editor=>{const formats=FormatRegistry(editor);const formatChangeState=Cell({});setup$r(editor);setup$u(editor);if(!isRtc(editor)){setup$t(formatChangeState,editor);}return{get:formats.get,has:formats.has,register:formats.register,unregister:formats.unregister,apply:(name,vars,node)=>{applyFormat(editor,name,vars,node);},remove:(name,vars,node,similar)=>{removeFormat(editor,name,vars,node,similar);},toggle:(name,vars,node)=>{toggleFormat(editor,name,vars,node);},match:(name,vars,node,similar)=>matchFormat(editor,name,vars,node,similar),closest:names=>closestFormat(editor,names),matchAll:(names,vars)=>matchAllFormats(editor,names,vars),matchNode:(node,name,vars,similar)=>matchNodeFormat(editor,node,name,vars,similar),canApply:name=>canApplyFormat(editor,name),formatChanged:(formats,callback,similar,vars)=>formatChanged(editor,formatChangeState,formats,callback,similar,vars),getCssText:curry(getCssText,editor)};};const shouldIgnoreCommand=cmd=>{switch(cmd.toLowerCase()){case'undo':case'redo':case'mcefocus':return true;default:return false;}};const registerEvents=(editor,undoManager,locks)=>{const isFirstTypedCharacter=Cell(false);const addNonTypingUndoLevel=e=>{setTyping(undoManager,false,locks);undoManager.add({},e);};editor.on('init',()=>{undoManager.add();});editor.on('BeforeExecCommand',e=>{const cmd=e.command;if(!shouldIgnoreCommand(cmd)){endTyping(undoManager,locks);undoManager.beforeChange();}});editor.on('ExecCommand',e=>{const cmd=e.command;if(!shouldIgnoreCommand(cmd)){addNonTypingUndoLevel(e);}});editor.on('ObjectResizeStart cut',()=>{undoManager.beforeChange();});editor.on('SaveContent ObjectResized blur',addNonTypingUndoLevel);editor.on('dragend',addNonTypingUndoLevel);editor.on('keyup',e=>{const keyCode=e.keyCode;if(e.isDefaultPrevented()){return;}if(keyCode>=33&&keyCode<=36||keyCode>=37&&keyCode<=40||keyCode===45||e.ctrlKey){addNonTypingUndoLevel();editor.nodeChanged();}if(keyCode===46||keyCode===8){editor.nodeChanged();}if(isFirstTypedCharacter.get()&&undoManager.typing&&!isEq$1(createFromEditor(editor),undoManager.data[0])){if(!editor.isDirty()){editor.setDirty(true);}editor.dispatch('TypingUndo');isFirstTypedCharacter.set(false);editor.nodeChanged();}});editor.on('keydown',e=>{const keyCode=e.keyCode;if(e.isDefaultPrevented()){return;}if(keyCode>=33&&keyCode<=36||keyCode>=37&&keyCode<=40||keyCode===45){if(undoManager.typing){addNonTypingUndoLevel(e);}return;}const modKey=e.ctrlKey&&!e.altKey||e.metaKey;if((keyCode<16||keyCode>20)&&keyCode!==224&&keyCode!==91&&!undoManager.typing&&!modKey){undoManager.beforeChange();setTyping(undoManager,true,locks);undoManager.add({},e);isFirstTypedCharacter.set(true);}});editor.on('mousedown',e=>{if(undoManager.typing){addNonTypingUndoLevel(e);}});const isInsertReplacementText=event=>event.inputType==='insertReplacementText';const isInsertTextDataNull=event=>event.inputType==='insertText'&&event.data===null;const isInsertFromPasteOrDrop=event=>event.inputType==='insertFromPaste'||event.inputType==='insertFromDrop';editor.on('input',e=>{if(e.inputType&&(isInsertReplacementText(e)||isInsertTextDataNull(e)||isInsertFromPasteOrDrop(e))){addNonTypingUndoLevel(e);}});editor.on('AddUndo Undo Redo ClearUndos',e=>{if(!e.isDefaultPrevented()){editor.nodeChanged();}});};const addKeyboardShortcuts=editor=>{editor.addShortcut('meta+z','','Undo');editor.addShortcut('meta+y,meta+shift+z','','Redo');};const UndoManager=editor=>{const beforeBookmark=value$2();const locks=Cell(0);const index=Cell(0);const undoManager={data:[],typing:false,beforeChange:()=>{beforeChange(editor,locks,beforeBookmark);},add:(level,event)=>{return addUndoLevel(editor,undoManager,index,locks,beforeBookmark,level,event);},dispatchChange:()=>{editor.setDirty(true);const level=createFromEditor(editor);level.bookmark=getUndoBookmark(editor.selection);editor.dispatch('change',{level,lastLevel:get$b(undoManager.data,index.get()).getOrUndefined()});},undo:()=>{return undo(editor,undoManager,locks,index);},redo:()=>{return redo(editor,index,undoManager.data);},clear:()=>{clear(editor,undoManager,index);},reset:()=>{reset(editor,undoManager);},hasUndo:()=>{return hasUndo(editor,undoManager,index);},hasRedo:()=>{return hasRedo(editor,undoManager,index);},transact:callback=>{return transact(editor,undoManager,locks,callback);},ignore:callback=>{ignore(editor,locks,callback);},extra:(callback1,callback2)=>{extra(editor,undoManager,index,callback1,callback2);}};if(!isRtc(editor)){registerEvents(editor,undoManager,locks);}addKeyboardShortcuts(editor);return undoManager;};const nonTypingKeycodes=[9,27,VK.HOME,VK.END,19,20,44,144,145,33,34,45,16,17,18,91,92,93,VK.DOWN,VK.UP,VK.LEFT,VK.RIGHT].concat(Env.browser.isFirefox()?[224]:[]);const placeholderAttr='data-mce-placeholder';const isKeyboardEvent=e=>e.type==='keydown'||e.type==='keyup';const isDeleteEvent=e=>{const keyCode=e.keyCode;return keyCode===VK.BACKSPACE||keyCode===VK.DELETE;};const isNonTypingKeyboardEvent=e=>{if(isKeyboardEvent(e)){const keyCode=e.keyCode;return!isDeleteEvent(e)&&(VK.metaKeyPressed(e)||e.altKey||keyCode>=112&&keyCode<=123||contains$2(nonTypingKeycodes,keyCode));}else{return false;}};const isTypingKeyboardEvent=e=>isKeyboardEvent(e)&&!(isDeleteEvent(e)||e.type==='keyup'&&e.keyCode===229);const isVisuallyEmpty=(dom,rootElm,forcedRootBlock)=>{if(isEmpty$2(SugarElement.fromDom(rootElm),false)){const firstElement=rootElm.firstElementChild;if(!firstElement){return true;}else if(dom.getStyle(rootElm.firstElementChild,'padding-left')||dom.getStyle(rootElm.firstElementChild,'padding-right')){return false;}else{return forcedRootBlock===firstElement.nodeName.toLowerCase();}}else{return false;}};const setup$q=editor=>{var _a;const dom=editor.dom;const rootBlock=getForcedRootBlock(editor);const placeholder=(_a=getPlaceholder(editor))!==null&&_a!==void 0?_a:'';const updatePlaceholder=(e,initial)=>{if(isNonTypingKeyboardEvent(e)){return;}const body=editor.getBody();const showPlaceholder=isTypingKeyboardEvent(e)?false:isVisuallyEmpty(dom,body,rootBlock);const isPlaceholderShown=dom.getAttrib(body,placeholderAttr)!=='';if(isPlaceholderShown!==showPlaceholder||initial){dom.setAttrib(body,placeholderAttr,showPlaceholder?placeholder:null);dom.setAttrib(body,'aria-placeholder',showPlaceholder?placeholder:null);firePlaceholderToggle(editor,showPlaceholder);editor.on(showPlaceholder?'keydown':'keyup',updatePlaceholder);editor.off(showPlaceholder?'keyup':'keydown',updatePlaceholder);}};if(isNotEmpty(placeholder)){editor.on('init',e=>{updatePlaceholder(e,true);editor.on('change SetContent ExecCommand',updatePlaceholder);editor.on('paste',e=>Delay.setEditorTimeout(editor,()=>updatePlaceholder(e)));});}};const blockPosition=(block,position)=>({block,position});const blockBoundary=(from,to)=>({from,to});const getBlockPosition=(rootNode,pos)=>{const rootElm=SugarElement.fromDom(rootNode);const containerElm=SugarElement.fromDom(pos.container());return getParentBlock$2(rootElm,containerElm).map(block=>blockPosition(block,pos));};const isDifferentBlocks=blockBoundary=>!eq(blockBoundary.from.block,blockBoundary.to.block);const hasSameParent=blockBoundary=>parent(blockBoundary.from.block).bind(parent1=>parent(blockBoundary.to.block).filter(parent2=>eq(parent1,parent2))).isSome();const isEditable$2=blockBoundary=>isContentEditableFalse$a(blockBoundary.from.block.dom)===false&&isContentEditableFalse$a(blockBoundary.to.block.dom)===false;const skipLastBr=(rootNode,forward,blockPosition)=>{if(isBr$6(blockPosition.position.getNode())&&!isEmpty$2(blockPosition.block)){return positionIn(false,blockPosition.block.dom).bind(lastPositionInBlock=>{if(lastPositionInBlock.isEqual(blockPosition.position)){return fromPosition(forward,rootNode,lastPositionInBlock).bind(to=>getBlockPosition(rootNode,to));}else{return Optional.some(blockPosition);}}).getOr(blockPosition);}else{return blockPosition;}};const readFromRange=(rootNode,forward,rng)=>{const fromBlockPos=getBlockPosition(rootNode,CaretPosition.fromRangeStart(rng));const toBlockPos=fromBlockPos.bind(blockPos=>fromPosition(forward,rootNode,blockPos.position).bind(to=>getBlockPosition(rootNode,to).map(blockPos=>skipLastBr(rootNode,forward,blockPos))));return lift2(fromBlockPos,toBlockPos,blockBoundary).filter(blockBoundary=>isDifferentBlocks(blockBoundary)&&hasSameParent(blockBoundary)&&isEditable$2(blockBoundary));};const read$1=(rootNode,forward,rng)=>rng.collapsed?readFromRange(rootNode,forward,rng):Optional.none();const getChildrenUntilBlockBoundary=block=>{const children$1=children(block);return findIndex$2(children$1,isBlock$2).fold(constant(children$1),index=>children$1.slice(0,index));};const extractChildren=block=>{const children=getChildrenUntilBlockBoundary(block);each$e(children,remove$6);return children;};const removeEmptyRoot=(rootNode,block)=>{const parents=parentsAndSelf(block,rootNode);return find$2(parents.reverse(),element=>isEmpty$2(element)).each(remove$6);};const isEmptyBefore=el=>filter$5(prevSiblings(el),el=>!isEmpty$2(el)).length===0;const nestedBlockMerge=(rootNode,fromBlock,toBlock,insertionPoint)=>{if(isEmpty$2(toBlock)){fillWithPaddingBr(toBlock);return firstPositionIn(toBlock.dom);}if(isEmptyBefore(insertionPoint)&&isEmpty$2(fromBlock)){before$3(insertionPoint,SugarElement.fromTag('br'));}const position=prevPosition(toBlock.dom,CaretPosition.before(insertionPoint.dom));each$e(extractChildren(fromBlock),child=>{before$3(insertionPoint,child);});removeEmptyRoot(rootNode,fromBlock);return position;};const sidelongBlockMerge=(rootNode,fromBlock,toBlock)=>{if(isEmpty$2(toBlock)){remove$6(toBlock);if(isEmpty$2(fromBlock)){fillWithPaddingBr(fromBlock);}return firstPositionIn(fromBlock.dom);}const position=lastPositionIn(toBlock.dom);each$e(extractChildren(fromBlock),child=>{append$1(toBlock,child);});removeEmptyRoot(rootNode,fromBlock);return position;};const findInsertionPoint=(toBlock,block)=>{const parentsAndSelf$1=parentsAndSelf(block,toBlock);return Optional.from(parentsAndSelf$1[parentsAndSelf$1.length-1]);};const getInsertionPoint=(fromBlock,toBlock)=>contains(toBlock,fromBlock)?findInsertionPoint(toBlock,fromBlock):Optional.none();const trimBr=(first,block)=>{positionIn(first,block.dom).bind(position=>Optional.from(position.getNode())).map(SugarElement.fromDom).filter(isBr$5).each(remove$6);};const mergeBlockInto=(rootNode,fromBlock,toBlock)=>{trimBr(true,fromBlock);trimBr(false,toBlock);return getInsertionPoint(fromBlock,toBlock).fold(curry(sidelongBlockMerge,rootNode,fromBlock,toBlock),curry(nestedBlockMerge,rootNode,fromBlock,toBlock));};const mergeBlocks=(rootNode,forward,block1,block2)=>forward?mergeBlockInto(rootNode,block2,block1):mergeBlockInto(rootNode,block1,block2);const backspaceDelete$8=(editor,forward)=>{const rootNode=SugarElement.fromDom(editor.getBody());const position=read$1(rootNode.dom,forward,editor.selection.getRng()).map(blockBoundary=>()=>{mergeBlocks(rootNode,forward,blockBoundary.from.block,blockBoundary.to.block).each(pos=>{editor.selection.setRng(pos.toRange());});});return position;};const deleteRangeMergeBlocks=(rootNode,selection)=>{const rng=selection.getRng();return lift2(getParentBlock$2(rootNode,SugarElement.fromDom(rng.startContainer)),getParentBlock$2(rootNode,SugarElement.fromDom(rng.endContainer)),(block1,block2)=>{if(!eq(block1,block2)){return Optional.some(()=>{rng.deleteContents();mergeBlocks(rootNode,true,block1,block2).each(pos=>{selection.setRng(pos.toRange());});});}else{return Optional.none();}}).getOr(Optional.none());};const isRawNodeInTable=(root,rawNode)=>{const node=SugarElement.fromDom(rawNode);const isRoot=curry(eq,root);return ancestor$3(node,isTableCell$2,isRoot).isSome();};const isSelectionInTable=(root,rng)=>isRawNodeInTable(root,rng.startContainer)||isRawNodeInTable(root,rng.endContainer);const isEverythingSelected=(root,rng)=>{const noPrevious=prevPosition(root.dom,CaretPosition.fromRangeStart(rng)).isNone();const noNext=nextPosition(root.dom,CaretPosition.fromRangeEnd(rng)).isNone();return!isSelectionInTable(root,rng)&&noPrevious&&noNext;};const emptyEditor=editor=>{return Optional.some(()=>{editor.setContent('');editor.selection.setCursorLocation();});};const deleteRange$1=editor=>{const rootNode=SugarElement.fromDom(editor.getBody());const rng=editor.selection.getRng();return isEverythingSelected(rootNode,rng)?emptyEditor(editor):deleteRangeMergeBlocks(rootNode,editor.selection);};const backspaceDelete$7=(editor,_forward)=>editor.selection.isCollapsed()?Optional.none():deleteRange$1(editor);const showCaret=(direction,editor,node,before,scrollIntoView)=>Optional.from(editor._selectionOverrides.showCaret(direction,node,before,scrollIntoView));const getNodeRange=node=>{const rng=node.ownerDocument.createRange();rng.selectNode(node);return rng;};const selectNode=(editor,node)=>{const e=editor.dispatch('BeforeObjectSelected',{target:node});if(e.isDefaultPrevented()){return Optional.none();}return Optional.some(getNodeRange(node));};const renderCaretAtRange=(editor,range,scrollIntoView)=>{const normalizedRange=normalizeRange(1,editor.getBody(),range);const caretPosition=CaretPosition.fromRangeStart(normalizedRange);const caretPositionNode=caretPosition.getNode();if(isInlineFakeCaretTarget(caretPositionNode)){return showCaret(1,editor,caretPositionNode,!caretPosition.isAtEnd(),false);}const caretPositionBeforeNode=caretPosition.getNode(true);if(isInlineFakeCaretTarget(caretPositionBeforeNode)){return showCaret(1,editor,caretPositionBeforeNode,false,false);}const ceRoot=getContentEditableRoot$1(editor.dom.getRoot(),caretPosition.getNode());if(isInlineFakeCaretTarget(ceRoot)){return showCaret(1,editor,ceRoot,false,scrollIntoView);}return Optional.none();};const renderRangeCaret=(editor,range,scrollIntoView)=>range.collapsed?renderCaretAtRange(editor,range,scrollIntoView).getOr(range):range;const isBeforeBoundary=pos=>isBeforeContentEditableFalse(pos)||isBeforeMedia(pos);const isAfterBoundary=pos=>isAfterContentEditableFalse(pos)||isAfterMedia(pos);const trimEmptyTextNode=(dom,node)=>{if(isText$a(node)&&node.data.length===0){dom.remove(node);}};const deleteContentAndShowCaret=(editor,range,node,direction,forward,peekCaretPosition)=>{showCaret(direction,editor,peekCaretPosition.getNode(!forward),forward,true).each(caretRange=>{if(range.collapsed){const deleteRange=range.cloneRange();if(forward){deleteRange.setEnd(caretRange.startContainer,caretRange.startOffset);}else{deleteRange.setStart(caretRange.endContainer,caretRange.endOffset);}deleteRange.deleteContents();}else{range.deleteContents();}editor.selection.setRng(caretRange);});trimEmptyTextNode(editor.dom,node);};const deleteBoundaryText=(editor,forward)=>{const range=editor.selection.getRng();if(!isText$a(range.commonAncestorContainer)){return Optional.none();}const direction=forward?HDirection.Forwards:HDirection.Backwards;const caretWalker=CaretWalker(editor.getBody());const getNextPosFn=curry(getVisualCaretPosition,forward?caretWalker.next:caretWalker.prev);const isBeforeFn=forward?isBeforeBoundary:isAfterBoundary;const caretPosition=getNormalizedRangeEndPoint(direction,editor.getBody(),range);const nextCaretPosition=getNextPosFn(caretPosition);const normalizedNextCaretPosition=nextCaretPosition?normalizePosition(forward,nextCaretPosition):nextCaretPosition;if(!normalizedNextCaretPosition||!isMoveInsideSameBlock(caretPosition,normalizedNextCaretPosition)){return Optional.none();}else if(isBeforeFn(normalizedNextCaretPosition)){return Optional.some(()=>deleteContentAndShowCaret(editor,range,caretPosition.getNode(),direction,forward,normalizedNextCaretPosition));}const peekCaretPosition=getNextPosFn(normalizedNextCaretPosition);if(peekCaretPosition&&isBeforeFn(peekCaretPosition)){if(isMoveInsideSameBlock(normalizedNextCaretPosition,peekCaretPosition)){return Optional.some(()=>deleteContentAndShowCaret(editor,range,caretPosition.getNode(),direction,forward,peekCaretPosition));}}return Optional.none();};const backspaceDelete$6=(editor,forward)=>deleteBoundaryText(editor,forward);const getEdgeCefPosition=(editor,atStart)=>{const root=editor.getBody();return atStart?firstPositionIn(root).filter(isBeforeContentEditableFalse):lastPositionIn(root).filter(isAfterContentEditableFalse);};const isCefAtEdgeSelected=editor=>{const rng=editor.selection.getRng();return!rng.collapsed&&(getEdgeCefPosition(editor,true).exists(pos=>pos.isEqual(CaretPosition.fromRangeStart(rng)))||getEdgeCefPosition(editor,false).exists(pos=>pos.isEqual(CaretPosition.fromRangeEnd(rng))));};const isCompoundElement=node=>isNonNullable(node)&&(isTableCell$2(SugarElement.fromDom(node))||isListItem$1(SugarElement.fromDom(node)));const DeleteAction=Adt.generate([{remove:['element']},{moveToElement:['element']},{moveToPosition:['position']}]);const isAtContentEditableBlockCaret=(forward,from)=>{const elm=from.getNode(!forward);const caretLocation=forward?'after':'before';return isElement$6(elm)&&elm.getAttribute('data-mce-caret')===caretLocation;};const isDeleteFromCefDifferentBlocks=(root,forward,from,to)=>{const inSameBlock=elm=>isInline$1(SugarElement.fromDom(elm))&&!isInSameBlock(from,to,root);return getRelativeCefElm(!forward,from).fold(()=>getRelativeCefElm(forward,to).fold(never,inSameBlock),inSameBlock);};const deleteEmptyBlockOrMoveToCef=(root,forward,from,to)=>{const toCefElm=to.getNode(!forward);return getParentBlock$2(SugarElement.fromDom(root),SugarElement.fromDom(from.getNode())).map(blockElm=>isEmpty$2(blockElm)?DeleteAction.remove(blockElm.dom):DeleteAction.moveToElement(toCefElm)).orThunk(()=>Optional.some(DeleteAction.moveToElement(toCefElm)));};const findCefPosition=(root,forward,from)=>fromPosition(forward,root,from).bind(to=>{if(isCompoundElement(to.getNode())){return Optional.none();}else if(isDeleteFromCefDifferentBlocks(root,forward,from,to)){return Optional.none();}else if(forward&&isContentEditableFalse$a(to.getNode())){return deleteEmptyBlockOrMoveToCef(root,forward,from,to);}else if(!forward&&isContentEditableFalse$a(to.getNode(true))){return deleteEmptyBlockOrMoveToCef(root,forward,from,to);}else if(forward&&isAfterContentEditableFalse(from)){return Optional.some(DeleteAction.moveToPosition(to));}else if(!forward&&isBeforeContentEditableFalse(from)){return Optional.some(DeleteAction.moveToPosition(to));}else{return Optional.none();}});const getContentEditableBlockAction=(forward,elm)=>{if(isNullable(elm)){return Optional.none();}else if(forward&&isContentEditableFalse$a(elm.nextSibling)){return Optional.some(DeleteAction.moveToElement(elm.nextSibling));}else if(!forward&&isContentEditableFalse$a(elm.previousSibling)){return Optional.some(DeleteAction.moveToElement(elm.previousSibling));}else{return Optional.none();}};const skipMoveToActionFromInlineCefToContent=(root,from,deleteAction)=>deleteAction.fold(elm=>Optional.some(DeleteAction.remove(elm)),elm=>Optional.some(DeleteAction.moveToElement(elm)),to=>{if(isInSameBlock(from,to,root)){return Optional.none();}else{return Optional.some(DeleteAction.moveToPosition(to));}});const getContentEditableAction=(root,forward,from)=>{if(isAtContentEditableBlockCaret(forward,from)){return getContentEditableBlockAction(forward,from.getNode(!forward)).orThunk(()=>findCefPosition(root,forward,from));}else{return findCefPosition(root,forward,from).bind(deleteAction=>skipMoveToActionFromInlineCefToContent(root,from,deleteAction));}};const read=(root,forward,rng)=>{const normalizedRange=normalizeRange(forward?1:-1,root,rng);const from=CaretPosition.fromRangeStart(normalizedRange);const rootElement=SugarElement.fromDom(root);if(!forward&&isAfterContentEditableFalse(from)){return Optional.some(DeleteAction.remove(from.getNode(true)));}else if(forward&&isBeforeContentEditableFalse(from)){return Optional.some(DeleteAction.remove(from.getNode()));}else if(!forward&&isBeforeContentEditableFalse(from)&&isAfterBr(rootElement,from)){return findPreviousBr(rootElement,from).map(br=>DeleteAction.remove(br.getNode()));}else if(forward&&isAfterContentEditableFalse(from)&&isBeforeBr$1(rootElement,from)){return findNextBr(rootElement,from).map(br=>DeleteAction.remove(br.getNode()));}else{return getContentEditableAction(root,forward,from);}};const deleteElement$1=(editor,forward)=>element=>{editor._selectionOverrides.hideFakeCaret();deleteElement$2(editor,forward,SugarElement.fromDom(element));return true;};const moveToElement=(editor,forward)=>element=>{const pos=forward?CaretPosition.before(element):CaretPosition.after(element);editor.selection.setRng(pos.toRange());return true;};const moveToPosition=editor=>pos=>{editor.selection.setRng(pos.toRange());return true;};const getAncestorCe=(editor,node)=>Optional.from(getContentEditableRoot$1(editor.getBody(),node));const backspaceDeleteCaret=(editor,forward)=>{const selectedNode=editor.selection.getNode();return getAncestorCe(editor,selectedNode).filter(isContentEditableFalse$a).fold(()=>read(editor.getBody(),forward,editor.selection.getRng()).map(deleteAction=>()=>deleteAction.fold(deleteElement$1(editor,forward),moveToElement(editor,forward),moveToPosition(editor))),()=>Optional.some(noop));};const deleteOffscreenSelection=rootElement=>{each$e(descendants(rootElement,'.mce-offscreen-selection'),remove$6);};const backspaceDeleteRange=(editor,forward)=>{const selectedNode=editor.selection.getNode();if(isContentEditableFalse$a(selectedNode)&&!isTableCell$3(selectedNode)){const hasCefAncestor=getAncestorCe(editor,selectedNode.parentNode).filter(isContentEditableFalse$a);return hasCefAncestor.fold(()=>Optional.some(()=>{deleteOffscreenSelection(SugarElement.fromDom(editor.getBody()));deleteElement$2(editor,forward,SugarElement.fromDom(editor.selection.getNode()));paddEmptyBody(editor);}),()=>Optional.some(noop));}if(isCefAtEdgeSelected(editor)){return Optional.some(()=>{deleteRangeContents(editor,editor.selection.getRng(),SugarElement.fromDom(editor.getBody()));});}return Optional.none();};const paddEmptyElement=editor=>{const dom=editor.dom,selection=editor.selection;const ceRoot=getContentEditableRoot$1(editor.getBody(),selection.getNode());if(isContentEditableTrue$3(ceRoot)&&dom.isBlock(ceRoot)&&dom.isEmpty(ceRoot)){const br=dom.create('br',{'data-mce-bogus':'1'});dom.setHTML(ceRoot,'');ceRoot.appendChild(br);selection.setRng(CaretPosition.before(br).toRange());}return true;};const backspaceDelete$5=(editor,forward)=>{if(editor.selection.isCollapsed()){return backspaceDeleteCaret(editor,forward);}else{return backspaceDeleteRange(editor,forward);}};const deleteCaret$2=(editor,forward)=>{const fromPos=CaretPosition.fromRangeStart(editor.selection.getRng());return fromPosition(forward,editor.getBody(),fromPos).filter(pos=>forward?isBeforeImageBlock(pos):isAfterImageBlock(pos)).bind(pos=>getChildNodeAtRelativeOffset(forward?0:-1,pos)).map(elm=>()=>editor.selection.select(elm));};const backspaceDelete$4=(editor,forward)=>editor.selection.isCollapsed()?deleteCaret$2(editor,forward):Optional.none();const isText$2=isText$a;const startsWithCaretContainer=node=>isText$2(node)&&node.data[0]===ZWSP$1;const endsWithCaretContainer=node=>isText$2(node)&&node.data[node.data.length-1]===ZWSP$1;const createZwsp=node=>{var _a;const doc=(_a=node.ownerDocument)!==null&&_a!==void 0?_a:document;return doc.createTextNode(ZWSP$1);};const insertBefore=node=>{var _a;if(isText$2(node.previousSibling)){if(endsWithCaretContainer(node.previousSibling)){return node.previousSibling;}else{node.previousSibling.appendData(ZWSP$1);return node.previousSibling;}}else if(isText$2(node)){if(startsWithCaretContainer(node)){return node;}else{node.insertData(0,ZWSP$1);return node;}}else{const newNode=createZwsp(node);(_a=node.parentNode)===null||_a===void 0?void 0:_a.insertBefore(newNode,node);return newNode;}};const insertAfter=node=>{var _a,_b;if(isText$2(node.nextSibling)){if(startsWithCaretContainer(node.nextSibling)){return node.nextSibling;}else{node.nextSibling.insertData(0,ZWSP$1);return node.nextSibling;}}else if(isText$2(node)){if(endsWithCaretContainer(node)){return node;}else{node.appendData(ZWSP$1);return node;}}else{const newNode=createZwsp(node);if(node.nextSibling){(_a=node.parentNode)===null||_a===void 0?void 0:_a.insertBefore(newNode,node.nextSibling);}else{(_b=node.parentNode)===null||_b===void 0?void 0:_b.appendChild(newNode);}return newNode;}};const insertInline=(before,node)=>before?insertBefore(node):insertAfter(node);const insertInlineBefore=curry(insertInline,true);const insertInlineAfter=curry(insertInline,false);const insertInlinePos=(pos,before)=>{if(isText$a(pos.container())){return insertInline(before,pos.container());}else{return insertInline(before,pos.getNode());}};const isPosCaretContainer=(pos,caret)=>{const caretNode=caret.get();return caretNode&&pos.container()===caretNode&&isCaretContainerInline(caretNode);};const renderCaret=(caret,location)=>location.fold(element=>{remove$4(caret.get());const text=insertInlineBefore(element);caret.set(text);return Optional.some(CaretPosition(text,text.length-1));},element=>firstPositionIn(element).map(pos=>{if(!isPosCaretContainer(pos,caret)){remove$4(caret.get());const text=insertInlinePos(pos,true);caret.set(text);return CaretPosition(text,1);}else{const node=caret.get();return CaretPosition(node,1);}}),element=>lastPositionIn(element).map(pos=>{if(!isPosCaretContainer(pos,caret)){remove$4(caret.get());const text=insertInlinePos(pos,false);caret.set(text);return CaretPosition(text,text.length-1);}else{const node=caret.get();return CaretPosition(node,node.length-1);}}),element=>{remove$4(caret.get());const text=insertInlineAfter(element);caret.set(text);return Optional.some(CaretPosition(text,1));});const evaluateUntil=(fns,args)=>{for(let i=0;i<fns.length;i++){const result=fns[i].apply(null,args);if(result.isSome()){return result;}}return Optional.none();};const Location=Adt.generate([{before:['element']},{start:['element']},{end:['element']},{after:['element']}]);const rescope$1=(rootNode,node)=>{const parentBlock=getParentBlock$3(node,rootNode);return parentBlock?parentBlock:rootNode;};const before=(isInlineTarget,rootNode,pos)=>{const nPos=normalizeForwards(pos);const scope=rescope$1(rootNode,nPos.container());return findRootInline(isInlineTarget,scope,nPos).fold(()=>nextPosition(scope,nPos).bind(curry(findRootInline,isInlineTarget,scope)).map(inline=>Location.before(inline)),Optional.none);};const isNotInsideFormatCaretContainer=(rootNode,elm)=>getParentCaretContainer(rootNode,elm)===null;const findInsideRootInline=(isInlineTarget,rootNode,pos)=>findRootInline(isInlineTarget,rootNode,pos).filter(curry(isNotInsideFormatCaretContainer,rootNode));const start$1=(isInlineTarget,rootNode,pos)=>{const nPos=normalizeBackwards(pos);return findInsideRootInline(isInlineTarget,rootNode,nPos).bind(inline=>{const prevPos=prevPosition(inline,nPos);return prevPos.isNone()?Optional.some(Location.start(inline)):Optional.none();});};const end=(isInlineTarget,rootNode,pos)=>{const nPos=normalizeForwards(pos);return findInsideRootInline(isInlineTarget,rootNode,nPos).bind(inline=>{const nextPos=nextPosition(inline,nPos);return nextPos.isNone()?Optional.some(Location.end(inline)):Optional.none();});};const after=(isInlineTarget,rootNode,pos)=>{const nPos=normalizeBackwards(pos);const scope=rescope$1(rootNode,nPos.container());return findRootInline(isInlineTarget,scope,nPos).fold(()=>prevPosition(scope,nPos).bind(curry(findRootInline,isInlineTarget,scope)).map(inline=>Location.after(inline)),Optional.none);};const isValidLocation=location=>!isRtl(getElement(location));const readLocation=(isInlineTarget,rootNode,pos)=>{const location=evaluateUntil([before,start$1,end,after],[isInlineTarget,rootNode,pos]);return location.filter(isValidLocation);};const getElement=location=>location.fold(identity,identity,identity,identity);const getName=location=>location.fold(constant('before'),constant('start'),constant('end'),constant('after'));const outside=location=>location.fold(Location.before,Location.before,Location.after,Location.after);const inside=location=>location.fold(Location.start,Location.start,Location.end,Location.end);const isEq=(location1,location2)=>getName(location1)===getName(location2)&&getElement(location1)===getElement(location2);const betweenInlines=(forward,isInlineTarget,rootNode,from,to,location)=>lift2(findRootInline(isInlineTarget,rootNode,from),findRootInline(isInlineTarget,rootNode,to),(fromInline,toInline)=>{if(fromInline!==toInline&&hasSameParentBlock(rootNode,fromInline,toInline)){return Location.after(forward?fromInline:toInline);}else{return location;}}).getOr(location);const skipNoMovement=(fromLocation,toLocation)=>fromLocation.fold(always,fromLocation=>!isEq(fromLocation,toLocation));const findLocationTraverse=(forward,isInlineTarget,rootNode,fromLocation,pos)=>{const from=normalizePosition(forward,pos);const to=fromPosition(forward,rootNode,from).map(curry(normalizePosition,forward));const location=to.fold(()=>fromLocation.map(outside),to=>readLocation(isInlineTarget,rootNode,to).map(curry(betweenInlines,forward,isInlineTarget,rootNode,from,to)).filter(curry(skipNoMovement,fromLocation)));return location.filter(isValidLocation);};const findLocationSimple=(forward,location)=>{if(forward){return location.fold(compose(Optional.some,Location.start),Optional.none,compose(Optional.some,Location.after),Optional.none);}else{return location.fold(Optional.none,compose(Optional.some,Location.before),Optional.none,compose(Optional.some,Location.end));}};const findLocation$1=(forward,isInlineTarget,rootNode,pos)=>{const from=normalizePosition(forward,pos);const fromLocation=readLocation(isInlineTarget,rootNode,from);return readLocation(isInlineTarget,rootNode,from).bind(curry(findLocationSimple,forward)).orThunk(()=>findLocationTraverse(forward,isInlineTarget,rootNode,fromLocation,pos));};const hasSelectionModifyApi=editor=>{return isFunction(editor.selection.getSel().modify);};const moveRel=(forward,selection,pos)=>{const delta=forward?1:-1;selection.setRng(CaretPosition(pos.container(),pos.offset()+delta).toRange());selection.getSel().modify('move',forward?'forward':'backward','word');return true;};const moveByWord=(forward,editor)=>{const rng=editor.selection.getRng();const pos=forward?CaretPosition.fromRangeEnd(rng):CaretPosition.fromRangeStart(rng);if(!hasSelectionModifyApi(editor)){return false;}else if(forward&&isBeforeInline(pos)){return moveRel(true,editor.selection,pos);}else if(!forward&&isAfterInline(pos)){return moveRel(false,editor.selection,pos);}else{return false;}};var BreakType;(function(BreakType){BreakType[BreakType['Br']=0]='Br';BreakType[BreakType['Block']=1]='Block';BreakType[BreakType['Wrap']=2]='Wrap';BreakType[BreakType['Eol']=3]='Eol';})(BreakType||(BreakType={}));const flip=(direction,positions)=>direction===HDirection.Backwards?reverse(positions):positions;const walk$1=(direction,caretWalker,pos)=>direction===HDirection.Forwards?caretWalker.next(pos):caretWalker.prev(pos);const getBreakType=(scope,direction,currentPos,nextPos)=>{if(isBr$6(nextPos.getNode(direction===HDirection.Forwards))){return BreakType.Br;}else if(isInSameBlock(currentPos,nextPos)===false){return BreakType.Block;}else{return BreakType.Wrap;}};const getPositionsUntil=(predicate,direction,scope,start)=>{const caretWalker=CaretWalker(scope);let currentPos=start;const positions=[];while(currentPos){const nextPos=walk$1(direction,caretWalker,currentPos);if(!nextPos){break;}if(isBr$6(nextPos.getNode(false))){if(direction===HDirection.Forwards){return{positions:flip(direction,positions).concat([nextPos]),breakType:BreakType.Br,breakAt:Optional.some(nextPos)};}else{return{positions:flip(direction,positions),breakType:BreakType.Br,breakAt:Optional.some(nextPos)};}}if(!nextPos.isVisible()){currentPos=nextPos;continue;}if(predicate(currentPos,nextPos)){const breakType=getBreakType(scope,direction,currentPos,nextPos);return{positions:flip(direction,positions),breakType,breakAt:Optional.some(nextPos)};}positions.push(nextPos);currentPos=nextPos;}return{positions:flip(direction,positions),breakType:BreakType.Eol,breakAt:Optional.none()};};const getAdjacentLinePositions=(direction,getPositionsUntilBreak,scope,start)=>getPositionsUntilBreak(scope,start).breakAt.map(pos=>{const positions=getPositionsUntilBreak(scope,pos).positions;return direction===HDirection.Backwards?positions.concat(pos):[pos].concat(positions);}).getOr([]);const findClosestHorizontalPositionFromPoint=(positions,x)=>foldl(positions,(acc,newPos)=>acc.fold(()=>Optional.some(newPos),lastPos=>lift2(head(lastPos.getClientRects()),head(newPos.getClientRects()),(lastRect,newRect)=>{const lastDist=Math.abs(x-lastRect.left);const newDist=Math.abs(x-newRect.left);return newDist<=lastDist?newPos:lastPos;}).or(acc)),Optional.none());const findClosestHorizontalPosition=(positions,pos)=>head(pos.getClientRects()).bind(targetRect=>findClosestHorizontalPositionFromPoint(positions,targetRect.left));const getPositionsUntilPreviousLine=curry(getPositionsUntil,CaretPosition.isAbove,-1);const getPositionsUntilNextLine=curry(getPositionsUntil,CaretPosition.isBelow,1);const getPositionsAbove=curry(getAdjacentLinePositions,-1,getPositionsUntilPreviousLine);const getPositionsBelow=curry(getAdjacentLinePositions,1,getPositionsUntilNextLine);const isAtFirstLine=(scope,pos)=>getPositionsUntilPreviousLine(scope,pos).breakAt.isNone();const isAtLastLine=(scope,pos)=>getPositionsUntilNextLine(scope,pos).breakAt.isNone();const getFirstLinePositions=scope=>firstPositionIn(scope).map(pos=>[pos].concat(getPositionsUntilNextLine(scope,pos).positions)).getOr([]);const getLastLinePositions=scope=>lastPositionIn(scope).map(pos=>getPositionsUntilPreviousLine(scope,pos).positions.concat(pos)).getOr([]);const getClosestPositionAbove=(scope,pos)=>findClosestHorizontalPosition(getPositionsAbove(scope,pos),pos);const getClosestPositionBelow=(scope,pos)=>findClosestHorizontalPosition(getPositionsBelow(scope,pos),pos);const isContentEditableFalse$4=isContentEditableFalse$a;const distanceToRectLeft$1=(clientRect,clientX)=>Math.abs(clientRect.left-clientX);const distanceToRectRight$1=(clientRect,clientX)=>Math.abs(clientRect.right-clientX);const isNodeClientRect=rect=>hasNonNullableKey(rect,'node');const findClosestClientRect=(clientRects,clientX)=>reduce(clientRects,(oldClientRect,clientRect)=>{const oldDistance=Math.min(distanceToRectLeft$1(oldClientRect,clientX),distanceToRectRight$1(oldClientRect,clientX));const newDistance=Math.min(distanceToRectLeft$1(clientRect,clientX),distanceToRectRight$1(clientRect,clientX));if(newDistance===oldDistance&&isNodeClientRect(clientRect)&&isContentEditableFalse$4(clientRect.node)){return clientRect;}if(newDistance<oldDistance){return clientRect;}return oldClientRect;});const getNodeClientRects=node=>{const toArrayWithNode=clientRects=>{return map$3(clientRects,rect=>{const clientRect=clone$1(rect);clientRect.node=node;return clientRect;});};if(isElement$6(node)){return toArrayWithNode(node.getClientRects());}else if(isText$a(node)){const rng=node.ownerDocument.createRange();rng.setStart(node,0);rng.setEnd(node,node.data.length);return toArrayWithNode(rng.getClientRects());}else{return[];}};const getClientRects=nodes=>bind$3(nodes,getNodeClientRects);var VDirection;(function(VDirection){VDirection[VDirection['Up']=-1]='Up';VDirection[VDirection['Down']=1]='Down';})(VDirection||(VDirection={}));const findUntil=(direction,root,predicateFn,node)=>{let currentNode=node;while(currentNode=findNode(currentNode,direction,isEditableCaretCandidate$1,root)){if(predicateFn(currentNode)){return;}}};const walkUntil=(direction,isAboveFn,isBeflowFn,root,predicateFn,caretPosition)=>{let line=0;const result=[];const add=node=>{let clientRects=getClientRects([node]);if(direction===-1){clientRects=clientRects.reverse();}for(let i=0;i<clientRects.length;i++){const clientRect=clientRects[i];if(isBeflowFn(clientRect,targetClientRect)){continue;}if(result.length>0&&isAboveFn(clientRect,last$2(result))){line++;}clientRect.line=line;if(predicateFn(clientRect)){return true;}result.push(clientRect);}return false;};const targetClientRect=last$2(caretPosition.getClientRects());if(!targetClientRect){return result;}const node=caretPosition.getNode();if(node){add(node);findUntil(direction,root,add,node);}return result;};const aboveLineNumber=(lineNumber,clientRect)=>clientRect.line>lineNumber;const isLineNumber=(lineNumber,clientRect)=>clientRect.line===lineNumber;const upUntil=curry(walkUntil,VDirection.Up,isAbove$1,isBelow$1);const downUntil=curry(walkUntil,VDirection.Down,isBelow$1,isAbove$1);const getLastClientRect=caretPosition=>{return last$2(caretPosition.getClientRects());};const positionsUntil=(direction,root,predicateFn,node)=>{const caretWalker=CaretWalker(root);let walkFn;let isBelowFn;let isAboveFn;let caretPosition;const result=[];let line=0;if(direction===1){walkFn=caretWalker.next;isBelowFn=isBelow$1;isAboveFn=isAbove$1;caretPosition=CaretPosition.after(node);}else{walkFn=caretWalker.prev;isBelowFn=isAbove$1;isAboveFn=isBelow$1;caretPosition=CaretPosition.before(node);}const targetClientRect=getLastClientRect(caretPosition);do{if(!caretPosition.isVisible()){continue;}const rect=getLastClientRect(caretPosition);if(isAboveFn(rect,targetClientRect)){continue;}if(result.length>0&&isBelowFn(rect,last$2(result))){line++;}const clientRect=clone$1(rect);clientRect.position=caretPosition;clientRect.line=line;if(predicateFn(clientRect)){return result;}result.push(clientRect);}while(caretPosition=walkFn(caretPosition));return result;};const isAboveLine=lineNumber=>clientRect=>aboveLineNumber(lineNumber,clientRect);const isLine=lineNumber=>clientRect=>isLineNumber(lineNumber,clientRect);const moveToRange=(editor,rng)=>{editor.selection.setRng(rng);scrollRangeIntoView(editor,editor.selection.getRng());};const renderRangeCaretOpt=(editor,range,scrollIntoView)=>Optional.some(renderRangeCaret(editor,range,scrollIntoView));const moveHorizontally=(editor,direction,range,isBefore,isAfter,isElement)=>{const forwards=direction===HDirection.Forwards;const caretWalker=CaretWalker(editor.getBody());const getNextPosFn=curry(getVisualCaretPosition,forwards?caretWalker.next:caretWalker.prev);const isBeforeFn=forwards?isBefore:isAfter;if(!range.collapsed){const node=getSelectedNode(range);if(isElement(node)){return showCaret(direction,editor,node,direction===HDirection.Backwards,false);}else if(isCefAtEdgeSelected(editor)){const newRange=range.cloneRange();newRange.collapse(direction===HDirection.Backwards);return Optional.from(newRange);}}const caretPosition=getNormalizedRangeEndPoint(direction,editor.getBody(),range);if(isBeforeFn(caretPosition)){return selectNode(editor,caretPosition.getNode(!forwards));}let nextCaretPosition=getNextPosFn(caretPosition);const rangeIsInContainerBlock=isRangeInCaretContainerBlock(range);if(!nextCaretPosition){return rangeIsInContainerBlock?Optional.some(range):Optional.none();}else{nextCaretPosition=normalizePosition(forwards,nextCaretPosition);}if(isBeforeFn(nextCaretPosition)){return showCaret(direction,editor,nextCaretPosition.getNode(!forwards),forwards,false);}const peekCaretPosition=getNextPosFn(nextCaretPosition);if(peekCaretPosition&&isBeforeFn(peekCaretPosition)){if(isMoveInsideSameBlock(nextCaretPosition,peekCaretPosition)){return showCaret(direction,editor,peekCaretPosition.getNode(!forwards),forwards,false);}}if(rangeIsInContainerBlock){return renderRangeCaretOpt(editor,nextCaretPosition.toRange(),false);}return Optional.none();};const moveVertically=(editor,direction,range,isBefore,isAfter,isElement)=>{const caretPosition=getNormalizedRangeEndPoint(direction,editor.getBody(),range);const caretClientRect=last$2(caretPosition.getClientRects());const forwards=direction===VDirection.Down;const root=editor.getBody();if(!caretClientRect){return Optional.none();}if(isCefAtEdgeSelected(editor)){const caretPosition=forwards?CaretPosition.fromRangeEnd(range):CaretPosition.fromRangeStart(range);const getClosestFn=!forwards?getClosestPositionAbove:getClosestPositionBelow;return getClosestFn(root,caretPosition).orThunk(()=>Optional.from(caretPosition)).map(pos=>pos.toRange());}const walkerFn=forwards?downUntil:upUntil;const linePositions=walkerFn(root,isAboveLine(1),caretPosition);const nextLinePositions=filter$5(linePositions,isLine(1));const clientX=caretClientRect.left;const nextLineRect=findClosestClientRect(nextLinePositions,clientX);if(nextLineRect&&isElement(nextLineRect.node)){const dist1=Math.abs(clientX-nextLineRect.left);const dist2=Math.abs(clientX-nextLineRect.right);return showCaret(direction,editor,nextLineRect.node,dist1<dist2,false);}let currentNode;if(isBefore(caretPosition)){currentNode=caretPosition.getNode();}else if(isAfter(caretPosition)){currentNode=caretPosition.getNode(true);}else{currentNode=getSelectedNode(range);}if(currentNode){const caretPositions=positionsUntil(direction,root,isAboveLine(1),currentNode);let closestNextLineRect=findClosestClientRect(filter$5(caretPositions,isLine(1)),clientX);if(closestNextLineRect){return renderRangeCaretOpt(editor,closestNextLineRect.position.toRange(),false);}closestNextLineRect=last$2(filter$5(caretPositions,isLine(0)));if(closestNextLineRect){return renderRangeCaretOpt(editor,closestNextLineRect.position.toRange(),false);}}if(nextLinePositions.length===0){return getLineEndPoint(editor,forwards).filter(forwards?isAfter:isBefore).map(pos=>renderRangeCaret(editor,pos.toRange(),false));}return Optional.none();};const getLineEndPoint=(editor,forward)=>{const rng=editor.selection.getRng();const from=forward?CaretPosition.fromRangeEnd(rng):CaretPosition.fromRangeStart(rng);const host=getEditingHost(from.container(),editor.getBody());if(forward){const lineInfo=getPositionsUntilNextLine(host,from);return last$3(lineInfo.positions);}else{const lineInfo=getPositionsUntilPreviousLine(host,from);return head(lineInfo.positions);}};const moveToLineEndPoint$3=(editor,forward,isElementPosition)=>getLineEndPoint(editor,forward).filter(isElementPosition).exists(pos=>{editor.selection.setRng(pos.toRange());return true;});const setCaretPosition=(editor,pos)=>{const rng=editor.dom.createRng();rng.setStart(pos.container(),pos.offset());rng.setEnd(pos.container(),pos.offset());editor.selection.setRng(rng);};const setSelected=(state,elm)=>{if(state){elm.setAttribute('data-mce-selected','inline-boundary');}else{elm.removeAttribute('data-mce-selected');}};const renderCaretLocation=(editor,caret,location)=>renderCaret(caret,location).map(pos=>{setCaretPosition(editor,pos);return location;});const getPositionFromRange=(range,root,forward)=>{const start=CaretPosition.fromRangeStart(range);if(range.collapsed){return start;}else{const end=CaretPosition.fromRangeEnd(range);return forward?prevPosition(root,end).getOr(end):nextPosition(root,start).getOr(start);}};const findLocation=(editor,caret,forward)=>{const rootNode=editor.getBody();const from=getPositionFromRange(editor.selection.getRng(),rootNode,forward);const isInlineTarget$1=curry(isInlineTarget,editor);const location=findLocation$1(forward,isInlineTarget$1,rootNode,from);return location.bind(location=>renderCaretLocation(editor,caret,location));};const toggleInlines=(isInlineTarget,dom,elms)=>{const inlineBoundaries=map$3(descendants(SugarElement.fromDom(dom.getRoot()),'*[data-mce-selected=\"inline-boundary\"]'),e=>e.dom);const selectedInlines=filter$5(inlineBoundaries,isInlineTarget);const targetInlines=filter$5(elms,isInlineTarget);each$e(difference(selectedInlines,targetInlines),curry(setSelected,false));each$e(difference(targetInlines,selectedInlines),curry(setSelected,true));};const safeRemoveCaretContainer=(editor,caret)=>{const caretValue=caret.get();if(editor.selection.isCollapsed()&&!editor.composing&&caretValue){const pos=CaretPosition.fromRangeStart(editor.selection.getRng());if(CaretPosition.isTextPosition(pos)&&!isAtZwsp(pos)){setCaretPosition(editor,removeAndReposition(caretValue,pos));caret.set(null);}}};const renderInsideInlineCaret=(isInlineTarget,editor,caret,elms)=>{if(editor.selection.isCollapsed()){const inlines=filter$5(elms,isInlineTarget);each$e(inlines,_inline=>{const pos=CaretPosition.fromRangeStart(editor.selection.getRng());readLocation(isInlineTarget,editor.getBody(),pos).bind(location=>renderCaretLocation(editor,caret,location));});}};const move$2=(editor,caret,forward)=>isInlineBoundariesEnabled(editor)?findLocation(editor,caret,forward).isSome():false;const moveWord=(forward,editor,_caret)=>isInlineBoundariesEnabled(editor)?moveByWord(forward,editor):false;const setupSelectedState=editor=>{const caret=Cell(null);const isInlineTarget$1=curry(isInlineTarget,editor);editor.on('NodeChange',e=>{if(isInlineBoundariesEnabled(editor)){toggleInlines(isInlineTarget$1,editor.dom,e.parents);safeRemoveCaretContainer(editor,caret);renderInsideInlineCaret(isInlineTarget$1,editor,caret,e.parents);}});return caret;};const moveNextWord=curry(moveWord,true);const movePrevWord=curry(moveWord,false);const moveToLineEndPoint$2=(editor,forward,caret)=>{if(isInlineBoundariesEnabled(editor)){const linePoint=getLineEndPoint(editor,forward).getOrThunk(()=>{const rng=editor.selection.getRng();return forward?CaretPosition.fromRangeEnd(rng):CaretPosition.fromRangeStart(rng);});return readLocation(curry(isInlineTarget,editor),editor.getBody(),linePoint).exists(loc=>{const outsideLoc=outside(loc);return renderCaret(caret,outsideLoc).exists(pos=>{setCaretPosition(editor,pos);return true;});});}else{return false;}};const rangeFromPositions=(from,to)=>{const range=document.createRange();range.setStart(from.container(),from.offset());range.setEnd(to.container(),to.offset());return range;};const hasOnlyTwoOrLessPositionsLeft=elm=>lift2(firstPositionIn(elm),lastPositionIn(elm),(firstPos,lastPos)=>{const normalizedFirstPos=normalizePosition(true,firstPos);const normalizedLastPos=normalizePosition(false,lastPos);return nextPosition(elm,normalizedFirstPos).forall(pos=>pos.isEqual(normalizedLastPos));}).getOr(true);const setCaretLocation=(editor,caret)=>location=>renderCaret(caret,location).map(pos=>()=>setCaretPosition(editor,pos));const deleteFromTo=(editor,caret,from,to)=>{const rootNode=editor.getBody();const isInlineTarget$1=curry(isInlineTarget,editor);editor.undoManager.ignore(()=>{editor.selection.setRng(rangeFromPositions(from,to));execNativeDeleteCommand(editor);readLocation(isInlineTarget$1,rootNode,CaretPosition.fromRangeStart(editor.selection.getRng())).map(inside).bind(setCaretLocation(editor,caret)).each(call);});editor.nodeChanged();};const rescope=(rootNode,node)=>{const parentBlock=getParentBlock$3(node,rootNode);return parentBlock?parentBlock:rootNode;};const backspaceDeleteCollapsed=(editor,caret,forward,from)=>{const rootNode=rescope(editor.getBody(),from.container());const isInlineTarget$1=curry(isInlineTarget,editor);const fromLocation=readLocation(isInlineTarget$1,rootNode,from);const location=fromLocation.bind(location=>{if(forward){return location.fold(constant(Optional.some(inside(location))),Optional.none,constant(Optional.some(outside(location))),Optional.none);}else{return location.fold(Optional.none,constant(Optional.some(outside(location))),Optional.none,constant(Optional.some(inside(location))));}});return location.map(setCaretLocation(editor,caret)).getOrThunk(()=>{const toPosition=navigate(forward,rootNode,from);const toLocation=toPosition.bind(pos=>readLocation(isInlineTarget$1,rootNode,pos));return lift2(fromLocation,toLocation,()=>findRootInline(isInlineTarget$1,rootNode,from).bind(elm=>{if(hasOnlyTwoOrLessPositionsLeft(elm)){return Optional.some(()=>{deleteElement$2(editor,forward,SugarElement.fromDom(elm));});}else{return Optional.none();}})).getOrThunk(()=>toLocation.bind(()=>toPosition.map(to=>{return()=>{if(forward){deleteFromTo(editor,caret,from,to);}else{deleteFromTo(editor,caret,to,from);}};})));});};const backspaceDelete$3=(editor,caret,forward)=>{if(editor.selection.isCollapsed()&&isInlineBoundariesEnabled(editor)){const from=CaretPosition.fromRangeStart(editor.selection.getRng());return backspaceDeleteCollapsed(editor,caret,forward,from);}return Optional.none();};const getParentInlines=(rootElm,startElm)=>{const parents=parentsAndSelf(startElm,rootElm);return findIndex$2(parents,isBlock$2).fold(constant(parents),index=>parents.slice(0,index));};const hasOnlyOneChild=elm=>childNodesCount(elm)===1;const deleteLastPosition=(forward,editor,target,parentInlines)=>{const isFormatElement$1=curry(isFormatElement,editor);const formatNodes=map$3(filter$5(parentInlines,isFormatElement$1),elm=>elm.dom);if(formatNodes.length===0){deleteElement$2(editor,forward,target);}else{const pos=replaceWithCaretFormat(target.dom,formatNodes);editor.selection.setRng(pos.toRange());}};const deleteCaret$1=(editor,forward)=>{const rootElm=SugarElement.fromDom(editor.getBody());const startElm=SugarElement.fromDom(editor.selection.getStart());const parentInlines=filter$5(getParentInlines(rootElm,startElm),hasOnlyOneChild);return last$3(parentInlines).bind(target=>{const fromPos=CaretPosition.fromRangeStart(editor.selection.getRng());if(willDeleteLastPositionInElement(forward,fromPos,target.dom)&&!isEmptyCaretFormatElement(target)){return Optional.some(()=>deleteLastPosition(forward,editor,target,parentInlines));}else{return Optional.none();}});};const backspaceDelete$2=(editor,forward)=>editor.selection.isCollapsed()?deleteCaret$1(editor,forward):Optional.none();const deleteElement=(editor,forward,element)=>{if(isNonNullable(element)){return Optional.some(()=>{editor._selectionOverrides.hideFakeCaret();deleteElement$2(editor,forward,SugarElement.fromDom(element));});}else{return Optional.none();}};const deleteCaret=(editor,forward)=>{const isNearMedia=forward?isBeforeMedia:isAfterMedia;const direction=forward?HDirection.Forwards:HDirection.Backwards;const fromPos=getNormalizedRangeEndPoint(direction,editor.getBody(),editor.selection.getRng());if(isNearMedia(fromPos)){return deleteElement(editor,forward,fromPos.getNode(!forward));}else{return Optional.from(normalizePosition(forward,fromPos)).filter(pos=>isNearMedia(pos)&&isMoveInsideSameBlock(fromPos,pos)).bind(pos=>deleteElement(editor,forward,pos.getNode(!forward)));}};const deleteRange=(editor,forward)=>{const selectedNode=editor.selection.getNode();return isMedia$2(selectedNode)?deleteElement(editor,forward,selectedNode):Optional.none();};const backspaceDelete$1=(editor,forward)=>editor.selection.isCollapsed()?deleteCaret(editor,forward):deleteRange(editor,forward);const isEditable$1=target=>closest$4(target,elm=>isContentEditableTrue$3(elm.dom)||isContentEditableFalse$a(elm.dom)).exists(elm=>isContentEditableTrue$3(elm.dom));const parseIndentValue=value=>toInt(value!==null&&value!==void 0?value:'').getOr(0);const getIndentStyleName=(useMargin,element)=>{const indentStyleName=useMargin||isTable$1(element)?'margin':'padding';const suffix=get$7(element,'direction')==='rtl'?'-right':'-left';return indentStyleName+suffix;};const indentElement=(dom,command,useMargin,value,unit,element)=>{const indentStyleName=getIndentStyleName(useMargin,SugarElement.fromDom(element));const parsedValue=parseIndentValue(dom.getStyle(element,indentStyleName));if(command==='outdent'){const styleValue=Math.max(0,parsedValue-value);dom.setStyle(element,indentStyleName,styleValue?styleValue+unit:'');}else{const styleValue=parsedValue+value+unit;dom.setStyle(element,indentStyleName,styleValue);}};const validateBlocks=(editor,blocks)=>forall(blocks,block=>{const indentStyleName=getIndentStyleName(shouldIndentUseMargin(editor),block);const intentValue=getRaw$1(block,indentStyleName).map(parseIndentValue).getOr(0);const contentEditable=editor.dom.getContentEditable(block.dom);return contentEditable!=='false'&&intentValue>0;});const canOutdent=editor=>{const blocks=getBlocksToIndent(editor);return!editor.mode.isReadOnly()&&(blocks.length>1||validateBlocks(editor,blocks));};const isListComponent=el=>isList(el)||isListItem$1(el);const parentIsListComponent=el=>parent(el).exists(isListComponent);const getBlocksToIndent=editor=>filter$5(fromDom$1(editor.selection.getSelectedBlocks()),el=>!isListComponent(el)&&!parentIsListComponent(el)&&isEditable$1(el));const handle=(editor,command)=>{var _a,_b;const{dom}=editor;const indentation=getIndentation(editor);const indentUnit=(_b=(_a=/[a-z%]+$/i.exec(indentation))===null||_a===void 0?void 0:_a[0])!==null&&_b!==void 0?_b:'px';const indentValue=parseIndentValue(indentation);const useMargin=shouldIndentUseMargin(editor);each$e(getBlocksToIndent(editor),block=>{indentElement(dom,command,useMargin,indentValue,indentUnit,block.dom);});};const indent=editor=>handle(editor,'indent');const outdent=editor=>handle(editor,'outdent');const backspaceDelete=editor=>{if(editor.selection.isCollapsed()&&canOutdent(editor)){const dom=editor.dom;const rng=editor.selection.getRng();const pos=CaretPosition.fromRangeStart(rng);const block=dom.getParent(rng.startContainer,dom.isBlock);if(block!==null&&isAtStartOfBlock(SugarElement.fromDom(block),pos)){return Optional.some(()=>outdent(editor));}}return Optional.none();};const findAction=(editor,caret,forward)=>findMap([backspaceDelete,backspaceDelete$5,backspaceDelete$6,(editor,forward)=>backspaceDelete$3(editor,caret,forward),backspaceDelete$8,backspaceDelete$9,backspaceDelete$4,backspaceDelete$1,backspaceDelete$7,backspaceDelete$2],item=>item(editor,forward));const deleteCommand=(editor,caret)=>{const result=findAction(editor,caret,false);result.fold(()=>{execNativeDeleteCommand(editor);paddEmptyBody(editor);},call);};const forwardDeleteCommand=(editor,caret)=>{const result=findAction(editor,caret,true);result.fold(()=>execNativeForwardDeleteCommand(editor),call);};const setup$p=(editor,caret)=>{editor.addCommand('delete',()=>{deleteCommand(editor,caret);});editor.addCommand('forwardDelete',()=>{forwardDeleteCommand(editor,caret);});};const SIGNIFICANT_MOVE=5;const LONGPRESS_DELAY=400;const getTouch=event=>{if(event.touches===undefined||event.touches.length!==1){return Optional.none();}return Optional.some(event.touches[0]);};const isFarEnough=(touch,data)=>{const distX=Math.abs(touch.clientX-data.x);const distY=Math.abs(touch.clientY-data.y);return distX>SIGNIFICANT_MOVE||distY>SIGNIFICANT_MOVE;};const setup$o=editor=>{const startData=value$2();const longpressFired=Cell(false);const debounceLongpress=last$1(e=>{editor.dispatch('longpress',{...e,type:'longpress'});longpressFired.set(true);},LONGPRESS_DELAY);editor.on('touchstart',e=>{getTouch(e).each(touch=>{debounceLongpress.cancel();const data={x:touch.clientX,y:touch.clientY,target:e.target};debounceLongpress.throttle(e);longpressFired.set(false);startData.set(data);});},true);editor.on('touchmove',e=>{debounceLongpress.cancel();getTouch(e).each(touch=>{startData.on(data=>{if(isFarEnough(touch,data)){startData.clear();longpressFired.set(false);editor.dispatch('longpresscancel');}});});},true);editor.on('touchend touchcancel',e=>{debounceLongpress.cancel();if(e.type==='touchcancel'){return;}startData.get().filter(data=>data.target.isEqualNode(e.target)).each(()=>{if(longpressFired.get()){e.preventDefault();}else{editor.dispatch('tap',{...e,type:'tap'});}});},true);};const isBlockElement=(blockElements,node)=>has$2(blockElements,node.nodeName);const isValidTarget=(blockElements,node)=>{if(isText$a(node)){return true;}else if(isElement$6(node)){return!isBlockElement(blockElements,node)&&!isBookmarkNode$1(node);}else{return false;}};const hasBlockParent=(blockElements,root,node)=>{return exists(parents(SugarElement.fromDom(node),SugarElement.fromDom(root)),elm=>{return isBlockElement(blockElements,elm.dom);});};const shouldRemoveTextNode=(blockElements,node)=>{if(isText$a(node)){if(node.data.length===0){return true;}else if(/^\\s+$/.test(node.data)&&(!node.nextSibling||isBlockElement(blockElements,node.nextSibling))){return true;}}return false;};const createRootBlock=editor=>editor.dom.create(getForcedRootBlock(editor),getForcedRootBlockAttrs(editor));const addRootBlocks=editor=>{const dom=editor.dom,selection=editor.selection;const schema=editor.schema,blockElements=schema.getBlockElements();const startNode=selection.getStart();const rootNode=editor.getBody();let rootBlockNode;let tempNode;let wrapped=false;const forcedRootBlock=getForcedRootBlock(editor);if(!startNode||!isElement$6(startNode)){return;}const rootNodeName=rootNode.nodeName.toLowerCase();if(!schema.isValidChild(rootNodeName,forcedRootBlock.toLowerCase())||hasBlockParent(blockElements,rootNode,startNode)){return;}const rng=selection.getRng();const{startContainer,startOffset,endContainer,endOffset}=rng;const restoreSelection=hasFocus(editor);let node=rootNode.firstChild;while(node){if(isValidTarget(blockElements,node)){if(shouldRemoveTextNode(blockElements,node)){tempNode=node;node=node.nextSibling;dom.remove(tempNode);continue;}if(!rootBlockNode){rootBlockNode=createRootBlock(editor);rootNode.insertBefore(rootBlockNode,node);wrapped=true;}tempNode=node;node=node.nextSibling;rootBlockNode.appendChild(tempNode);}else{rootBlockNode=null;node=node.nextSibling;}}if(wrapped&&restoreSelection){rng.setStart(startContainer,startOffset);rng.setEnd(endContainer,endOffset);selection.setRng(rng);editor.nodeChanged();}};const insertEmptyLine=(editor,root,insertBlock)=>{const block=SugarElement.fromDom(createRootBlock(editor));const br=createPaddingBr();append$1(block,br);insertBlock(root,block);const rng=document.createRange();rng.setStartBefore(br.dom);rng.setEndBefore(br.dom);return rng;};const setup$n=editor=>{editor.on('NodeChange',curry(addRootBlocks,editor));};const hasClass=checkClassName=>node=>(' '+node.attr('class')+' ').indexOf(checkClassName)!==-1;const replaceMatchWithSpan=(editor,content,cls)=>{return function(match){const args=arguments,index=args[args.length-2];const prevChar=index>0?content.charAt(index-1):'';if(prevChar==='\"'){return match;}if(prevChar==='>'){const findStartTagIndex=content.lastIndexOf('<',index);if(findStartTagIndex!==-1){const tagHtml=content.substring(findStartTagIndex,index);if(tagHtml.indexOf('contenteditable=\"false\"')!==-1){return match;}}}return'<span class=\"'+cls+'\" data-mce-content=\"'+editor.dom.encode(args[0])+'\">'+editor.dom.encode(typeof args[1]==='string'?args[1]:args[0])+'</span>';};};const convertRegExpsToNonEditable=(editor,nonEditableRegExps,e)=>{let i=nonEditableRegExps.length,content=e.content;if(e.format==='raw'){return;}while(i--){content=content.replace(nonEditableRegExps[i],replaceMatchWithSpan(editor,content,getNonEditableClass(editor)));}e.content=content;};const setup$m=editor=>{const contentEditableAttrName='contenteditable';const editClass=' '+Tools.trim(getEditableClass(editor))+' ';const nonEditClass=' '+Tools.trim(getNonEditableClass(editor))+' ';const hasEditClass=hasClass(editClass);const hasNonEditClass=hasClass(nonEditClass);const nonEditableRegExps=getNonEditableRegExps(editor);if(nonEditableRegExps.length>0){editor.on('BeforeSetContent',e=>{convertRegExpsToNonEditable(editor,nonEditableRegExps,e);});}editor.parser.addAttributeFilter('class',nodes=>{let i=nodes.length;while(i--){const node=nodes[i];if(hasEditClass(node)){node.attr(contentEditableAttrName,'true');}else if(hasNonEditClass(node)){node.attr(contentEditableAttrName,'false');}}});editor.serializer.addAttributeFilter(contentEditableAttrName,nodes=>{let i=nodes.length;while(i--){const node=nodes[i];if(!hasEditClass(node)&&!hasNonEditClass(node)){continue;}if(nonEditableRegExps.length>0&&node.attr('data-mce-content')){node.name='#text';node.type=3;node.raw=true;node.value=node.attr('data-mce-content');}else{node.attr(contentEditableAttrName,null);}}});};const findBlockCaretContainer=editor=>descendant(SugarElement.fromDom(editor.getBody()),'*[data-mce-caret]').map(elm=>elm.dom).getOrNull();const showBlockCaretContainer=(editor,blockCaretContainer)=>{if(blockCaretContainer.hasAttribute('data-mce-caret')){showCaretContainerBlock(blockCaretContainer);editor.selection.setRng(editor.selection.getRng());editor.selection.scrollIntoView(blockCaretContainer);}};const handleBlockContainer=(editor,e)=>{const blockCaretContainer=findBlockCaretContainer(editor);if(!blockCaretContainer){return;}if(e.type==='compositionstart'){e.preventDefault();e.stopPropagation();showBlockCaretContainer(editor,blockCaretContainer);return;}if(hasContent(blockCaretContainer)){showBlockCaretContainer(editor,blockCaretContainer);editor.undoManager.add();}};const setup$l=editor=>{editor.on('keyup compositionstart',curry(handleBlockContainer,editor));};const isContentEditableFalse$3=isContentEditableFalse$a;const moveToCeFalseHorizontally=(direction,editor,range)=>moveHorizontally(editor,direction,range,isBeforeContentEditableFalse,isAfterContentEditableFalse,isContentEditableFalse$3);const moveToCeFalseVertically=(direction,editor,range)=>{const isBefore=caretPosition=>isBeforeContentEditableFalse(caretPosition)||isBeforeTable(caretPosition);const isAfter=caretPosition=>isAfterContentEditableFalse(caretPosition)||isAfterTable(caretPosition);return moveVertically(editor,direction,range,isBefore,isAfter,isContentEditableFalse$3);};const createTextBlock=editor=>{const textBlock=editor.dom.create(getForcedRootBlock(editor));textBlock.innerHTML='<br data-mce-bogus=\"1\">';return textBlock;};const exitPreBlock=(editor,direction,range)=>{const caretWalker=CaretWalker(editor.getBody());const getVisualCaretPosition$1=curry(getVisualCaretPosition,direction===1?caretWalker.next:caretWalker.prev);if(range.collapsed){const pre=editor.dom.getParent(range.startContainer,'PRE');if(!pre){return;}const caretPos=getVisualCaretPosition$1(CaretPosition.fromRangeStart(range));if(!caretPos){const newBlock=SugarElement.fromDom(createTextBlock(editor));if(direction===1){after$4(SugarElement.fromDom(pre),newBlock);}else{before$3(SugarElement.fromDom(pre),newBlock);}editor.selection.select(newBlock.dom,true);editor.selection.collapse();}}};const getHorizontalRange=(editor,forward)=>{const direction=forward?HDirection.Forwards:HDirection.Backwards;const range=editor.selection.getRng();return moveToCeFalseHorizontally(direction,editor,range).orThunk(()=>{exitPreBlock(editor,direction,range);return Optional.none();});};const getVerticalRange=(editor,down)=>{const direction=down?1:-1;const range=editor.selection.getRng();return moveToCeFalseVertically(direction,editor,range).orThunk(()=>{exitPreBlock(editor,direction,range);return Optional.none();});};const moveH$2=(editor,forward)=>getHorizontalRange(editor,forward).exists(newRange=>{moveToRange(editor,newRange);return true;});const moveV$3=(editor,down)=>getVerticalRange(editor,down).exists(newRange=>{moveToRange(editor,newRange);return true;});const moveToLineEndPoint$1=(editor,forward)=>{const isCefPosition=forward?isAfterContentEditableFalse:isBeforeContentEditableFalse;return moveToLineEndPoint$3(editor,forward,isCefPosition);};const selectToEndPoint=(editor,forward)=>getEdgeCefPosition(editor,!forward).map(pos=>{const rng=pos.toRange();const curRng=editor.selection.getRng();if(forward){rng.setStart(curRng.startContainer,curRng.startOffset);}else{rng.setEnd(curRng.endContainer,curRng.endOffset);}return rng;}).exists(rng=>{moveToRange(editor,rng);return true;});const isTarget=node=>contains$2(['figcaption'],name(node));const getClosestTargetBlock=(pos,root)=>{const isRoot=curry(eq,root);return closest$4(SugarElement.fromDom(pos.container()),isBlock$2,isRoot).filter(isTarget);};const isAtFirstOrLastLine=(root,forward,pos)=>forward?isAtLastLine(root.dom,pos):isAtFirstLine(root.dom,pos);const moveCaretToNewEmptyLine=(editor,forward)=>{const root=SugarElement.fromDom(editor.getBody());const pos=CaretPosition.fromRangeStart(editor.selection.getRng());return getClosestTargetBlock(pos,root).exists(()=>{if(isAtFirstOrLastLine(root,forward,pos)){const insertFn=forward?append$1:prepend;const rng=insertEmptyLine(editor,root,insertFn);editor.selection.setRng(rng);return true;}else{return false;}});};const moveV$2=(editor,forward)=>{if(editor.selection.isCollapsed()){return moveCaretToNewEmptyLine(editor,forward);}else{return false;}};const baseKeyPattern={shiftKey:false,altKey:false,ctrlKey:false,metaKey:false,keyCode:0};const defaultPatterns=patterns=>map$3(patterns,pattern=>({...baseKeyPattern,...pattern}));const defaultDelayedPatterns=patterns=>map$3(patterns,pattern=>({...baseKeyPattern,...pattern}));const matchesEvent=(pattern,evt)=>evt.keyCode===pattern.keyCode&&evt.shiftKey===pattern.shiftKey&&evt.altKey===pattern.altKey&&evt.ctrlKey===pattern.ctrlKey&&evt.metaKey===pattern.metaKey;const match$1=(patterns,evt)=>bind$3(defaultPatterns(patterns),pattern=>matchesEvent(pattern,evt)?[pattern]:[]);const matchDelayed=(patterns,evt)=>bind$3(defaultDelayedPatterns(patterns),pattern=>matchesEvent(pattern,evt)?[pattern]:[]);const action=(f,...x)=>()=>f.apply(null,x);const execute=(patterns,evt)=>find$2(match$1(patterns,evt),pattern=>pattern.action());const executeWithDelayedAction=(patterns,evt)=>findMap(matchDelayed(patterns,evt),pattern=>pattern.action());const moveH$1=(editor,forward)=>{const direction=forward?HDirection.Forwards:HDirection.Backwards;const range=editor.selection.getRng();return moveHorizontally(editor,direction,range,isBeforeMedia,isAfterMedia,isMedia$2).exists(newRange=>{moveToRange(editor,newRange);return true;});};const moveV$1=(editor,down)=>{const direction=down?1:-1;const range=editor.selection.getRng();return moveVertically(editor,direction,range,isBeforeMedia,isAfterMedia,isMedia$2).exists(newRange=>{moveToRange(editor,newRange);return true;});};const moveToLineEndPoint=(editor,forward)=>{const isNearMedia=forward?isAfterMedia:isBeforeMedia;return moveToLineEndPoint$3(editor,forward,isNearMedia);};const adt=Adt.generate([{none:['current']},{first:['current']},{middle:['current','target']},{last:['current']}]);const none=current=>adt.none(current);const CellLocation={...adt,none};const firstLayer=(scope,selector)=>{return filterFirstLayer(scope,selector,always);};const filterFirstLayer=(scope,selector,predicate)=>{return bind$3(children(scope),x=>{if(is$1(x,selector)){return predicate(x)?[x]:[];}else{return filterFirstLayer(x,selector,predicate);}});};const lookup$1=(tags,element,isRoot=never)=>{if(isRoot(element)){return Optional.none();}if(contains$2(tags,name(element))){return Optional.some(element);}const isRootOrUpperTable=elm=>is$1(elm,'table')||isRoot(elm);return ancestor$2(element,tags.join(','),isRootOrUpperTable);};const cell=(element,isRoot)=>lookup$1(['td','th'],element,isRoot);const cells=ancestor=>firstLayer(ancestor,'th,td');const table=(element,isRoot)=>closest$3(element,'table',isRoot);const walk=(all,current,index,direction,isEligible=always)=>{const forwards=direction===1;if(!forwards&&index<=0){return CellLocation.first(all[0]);}else if(forwards&&index>=all.length-1){return CellLocation.last(all[all.length-1]);}else{const newIndex=index+direction;const elem=all[newIndex];return isEligible(elem)?CellLocation.middle(current,elem):walk(all,current,newIndex,direction,isEligible);}};const detect=(current,isRoot)=>{return table(current,isRoot).bind(table=>{const all=cells(table);const index=findIndex$2(all,x=>eq(current,x));return index.map(index=>({index,all}));});};const next=(current,isEligible,isRoot)=>{const detection=detect(current,isRoot);return detection.fold(()=>{return CellLocation.none(current);},info=>{return walk(info.all,current,info.index,1,isEligible);});};const prev=(current,isEligible,isRoot)=>{const detection=detect(current,isRoot);return detection.fold(()=>{return CellLocation.none();},info=>{return walk(info.all,current,info.index,-1,isEligible);});};const closest=target=>closest$3(target,'[contenteditable]');const isEditable=(element,assumeEditable=false)=>{if(inBody(element)){return element.dom.isContentEditable;}else{return closest(element).fold(constant(assumeEditable),editable=>getRaw(editable)==='true');}};const getRaw=element=>element.dom.contentEditable;const deflate=(rect,delta)=>({left:rect.left-delta,top:rect.top-delta,right:rect.right+delta*2,bottom:rect.bottom+delta*2,width:rect.width+delta,height:rect.height+delta});const getCorners=(getYAxisValue,tds)=>bind$3(tds,td=>{const rect=deflate(clone$1(td.getBoundingClientRect()),-1);return[{x:rect.left,y:getYAxisValue(rect),cell:td},{x:rect.right,y:getYAxisValue(rect),cell:td}];});const findClosestCorner=(corners,x,y)=>foldl(corners,(acc,newCorner)=>acc.fold(()=>Optional.some(newCorner),oldCorner=>{const oldDist=Math.sqrt(Math.abs(oldCorner.x-x)+Math.abs(oldCorner.y-y));const newDist=Math.sqrt(Math.abs(newCorner.x-x)+Math.abs(newCorner.y-y));return Optional.some(newDist<oldDist?newCorner:oldCorner);}),Optional.none());const getClosestCell=(getYAxisValue,isTargetCorner,table,x,y)=>{const cells=descendants(SugarElement.fromDom(table),'td,th,caption').map(e=>e.dom);const corners=filter$5(getCorners(getYAxisValue,cells),corner=>isTargetCorner(corner,y));return findClosestCorner(corners,x,y).map(corner=>corner.cell);};const getBottomValue=rect=>rect.bottom;const getTopValue=rect=>rect.top;const isAbove=(corner,y)=>corner.y<y;const isBelow=(corner,y)=>corner.y>y;const getClosestCellAbove=curry(getClosestCell,getBottomValue,isAbove);const getClosestCellBelow=curry(getClosestCell,getTopValue,isBelow);const findClosestPositionInAboveCell=(table,pos)=>head(pos.getClientRects()).bind(rect=>getClosestCellAbove(table,rect.left,rect.top)).bind(cell=>findClosestHorizontalPosition(getLastLinePositions(cell),pos));const findClosestPositionInBelowCell=(table,pos)=>last$3(pos.getClientRects()).bind(rect=>getClosestCellBelow(table,rect.left,rect.top)).bind(cell=>findClosestHorizontalPosition(getFirstLinePositions(cell),pos));const hasNextBreak=(getPositionsUntil,scope,lineInfo)=>lineInfo.breakAt.exists(breakPos=>getPositionsUntil(scope,breakPos).breakAt.isSome());const startsWithWrapBreak=lineInfo=>lineInfo.breakType===BreakType.Wrap&&lineInfo.positions.length===0;const startsWithBrBreak=lineInfo=>lineInfo.breakType===BreakType.Br&&lineInfo.positions.length===1;const isAtTableCellLine=(getPositionsUntil,scope,pos)=>{const lineInfo=getPositionsUntil(scope,pos);if(startsWithWrapBreak(lineInfo)||!isBr$6(pos.getNode())&&startsWithBrBreak(lineInfo)){return!hasNextBreak(getPositionsUntil,scope,lineInfo);}else{return lineInfo.breakAt.isNone();}};const isAtFirstTableCellLine=curry(isAtTableCellLine,getPositionsUntilPreviousLine);const isAtLastTableCellLine=curry(isAtTableCellLine,getPositionsUntilNextLine);const isCaretAtStartOrEndOfTable=(forward,rng,table)=>{const caretPos=CaretPosition.fromRangeStart(rng);return positionIn(!forward,table).exists(pos=>pos.isEqual(caretPos));};const navigateHorizontally=(editor,forward,table,_td)=>{const rng=editor.selection.getRng();const direction=forward?1:-1;if(isFakeCaretTableBrowser()&&isCaretAtStartOrEndOfTable(forward,rng,table)){showCaret(direction,editor,table,!forward,false).each(newRng=>{moveToRange(editor,newRng);});return true;}return false;};const getClosestAbovePosition=(root,table,start)=>findClosestPositionInAboveCell(table,start).orThunk(()=>head(start.getClientRects()).bind(rect=>findClosestHorizontalPositionFromPoint(getPositionsAbove(root,CaretPosition.before(table)),rect.left))).getOr(CaretPosition.before(table));const getClosestBelowPosition=(root,table,start)=>findClosestPositionInBelowCell(table,start).orThunk(()=>head(start.getClientRects()).bind(rect=>findClosestHorizontalPositionFromPoint(getPositionsBelow(root,CaretPosition.after(table)),rect.left))).getOr(CaretPosition.after(table));const getTable=(previous,pos)=>{const node=pos.getNode(previous);return isTable$2(node)?Optional.some(node):Optional.none();};const renderBlock=(down,editor,table)=>{editor.undoManager.transact(()=>{const insertFn=down?after$4:before$3;const rng=insertEmptyLine(editor,SugarElement.fromDom(table),insertFn);moveToRange(editor,rng);});};const moveCaret=(editor,down,pos)=>{const table=down?getTable(true,pos):getTable(false,pos);const last=down===false;table.fold(()=>moveToRange(editor,pos.toRange()),table=>positionIn(last,editor.getBody()).filter(lastPos=>lastPos.isEqual(pos)).fold(()=>moveToRange(editor,pos.toRange()),_=>renderBlock(down,editor,table)));};const navigateVertically=(editor,down,table,td)=>{const rng=editor.selection.getRng();const pos=CaretPosition.fromRangeStart(rng);const root=editor.getBody();if(!down&&isAtFirstTableCellLine(td,pos)){const newPos=getClosestAbovePosition(root,table,pos);moveCaret(editor,down,newPos);return true;}else if(down&&isAtLastTableCellLine(td,pos)){const newPos=getClosestBelowPosition(root,table,pos);moveCaret(editor,down,newPos);return true;}else{return false;}};const move$1=(editor,forward,mover)=>Optional.from(editor.dom.getParent(editor.selection.getNode(),'td,th')).bind(td=>Optional.from(editor.dom.getParent(td,'table')).map(table=>mover(editor,forward,table,td))).getOr(false);const moveH=(editor,forward)=>move$1(editor,forward,navigateHorizontally);const moveV=(editor,forward)=>move$1(editor,forward,navigateVertically);const getCellFirstCursorPosition=cell=>{const selection=SimSelection.exact(cell,0,cell,0);return toNative(selection);};const tabGo=(editor,isRoot,cell)=>{return cell.fold(Optional.none,Optional.none,(_current,next)=>{return first(next).map(cell=>{return getCellFirstCursorPosition(cell);});},current=>{editor.execCommand('mceTableInsertRowAfter');return tabForward(editor,isRoot,current);});};const tabForward=(editor,isRoot,cell)=>tabGo(editor,isRoot,next(cell,isEditable));const tabBackward=(editor,isRoot,cell)=>tabGo(editor,isRoot,prev(cell,isEditable));const handleTab=(editor,forward)=>{const rootElements=['table','li','dl'];const body=SugarElement.fromDom(editor.getBody());const isRoot=element=>{const name$1=name(element);return eq(element,body)||contains$2(rootElements,name$1);};const rng=editor.selection.getRng();const container=SugarElement.fromDom(!forward?rng.startContainer:rng.endContainer);return cell(container,isRoot).map(cell=>{table(cell,isRoot).each(table=>{editor.model.table.clearSelectedCells(table.dom);});editor.selection.collapse(!forward);const navigation=!forward?tabBackward:tabForward;const rng=navigation(editor,isRoot,cell);rng.each(range=>{editor.selection.setRng(range);});return true;}).getOr(false);};const executeKeydownOverride$4=(editor,caret,evt)=>{const isMac=Env.os.isMacOS()||Env.os.isiOS();execute([{keyCode:VK.RIGHT,action:action(moveH$2,editor,true)},{keyCode:VK.LEFT,action:action(moveH$2,editor,false)},{keyCode:VK.UP,action:action(moveV$3,editor,false)},{keyCode:VK.DOWN,action:action(moveV$3,editor,true)},...(isMac?[{keyCode:VK.UP,action:action(selectToEndPoint,editor,false),metaKey:true,shiftKey:true},{keyCode:VK.DOWN,action:action(selectToEndPoint,editor,true),metaKey:true,shiftKey:true}]:[]),{keyCode:VK.RIGHT,action:action(moveH,editor,true)},{keyCode:VK.LEFT,action:action(moveH,editor,false)},{keyCode:VK.UP,action:action(moveV,editor,false)},{keyCode:VK.DOWN,action:action(moveV,editor,true)},{keyCode:VK.RIGHT,action:action(moveH$1,editor,true)},{keyCode:VK.LEFT,action:action(moveH$1,editor,false)},{keyCode:VK.UP,action:action(moveV$1,editor,false)},{keyCode:VK.DOWN,action:action(moveV$1,editor,true)},{keyCode:VK.RIGHT,action:action(move$2,editor,caret,true)},{keyCode:VK.LEFT,action:action(move$2,editor,caret,false)},{keyCode:VK.RIGHT,ctrlKey:!isMac,altKey:isMac,action:action(moveNextWord,editor,caret)},{keyCode:VK.LEFT,ctrlKey:!isMac,altKey:isMac,action:action(movePrevWord,editor,caret)},{keyCode:VK.UP,action:action(moveV$2,editor,false)},{keyCode:VK.DOWN,action:action(moveV$2,editor,true)}],evt).each(_=>{evt.preventDefault();});};const setup$k=(editor,caret)=>{editor.on('keydown',evt=>{if(!evt.isDefaultPrevented()){executeKeydownOverride$4(editor,caret,evt);}});};const point=(container,offset)=>({container,offset});const DOM$7=DOMUtils.DOM;const alwaysNext=startNode=>node=>startNode===node?-1:0;const isBoundary=dom=>node=>dom.isBlock(node)||contains$2(['BR','IMG','HR','INPUT'],node.nodeName)||dom.getContentEditable(node)==='false';const textBefore=(node,offset,rootNode)=>{if(isText$a(node)&&offset>=0){return Optional.some(point(node,offset));}else{const textSeeker=TextSeeker(DOM$7);return Optional.from(textSeeker.backwards(node,offset,alwaysNext(node),rootNode)).map(prev=>point(prev.container,prev.container.data.length));}};const textAfter=(node,offset,rootNode)=>{if(isText$a(node)&&offset>=node.length){return Optional.some(point(node,offset));}else{const textSeeker=TextSeeker(DOM$7);return Optional.from(textSeeker.forwards(node,offset,alwaysNext(node),rootNode)).map(prev=>point(prev.container,0));}};const scanLeft=(node,offset,rootNode)=>{if(!isText$a(node)){return Optional.none();}const text=node.data;if(offset>=0&&offset<=text.length){return Optional.some(point(node,offset));}else{const textSeeker=TextSeeker(DOM$7);return Optional.from(textSeeker.backwards(node,offset,alwaysNext(node),rootNode)).bind(prev=>{const prevText=prev.container.data;return scanLeft(prev.container,offset+prevText.length,rootNode);});}};const scanRight=(node,offset,rootNode)=>{if(!isText$a(node)){return Optional.none();}const text=node.data;if(offset<=text.length){return Optional.some(point(node,offset));}else{const textSeeker=TextSeeker(DOM$7);return Optional.from(textSeeker.forwards(node,offset,alwaysNext(node),rootNode)).bind(next=>scanRight(next.container,offset-text.length,rootNode));}};const repeatLeft=(dom,node,offset,process,rootNode)=>{const search=TextSeeker(dom,isBoundary(dom));return Optional.from(search.backwards(node,offset,process,rootNode));};const isValidTextRange=rng=>rng.collapsed&&isText$a(rng.startContainer);const getText=rng=>trim$1(rng.toString().replace(/\\u00A0/g,' '));const isWhitespace=chr=>chr!==''&&' \\xA0\\f\\n\\r\\t\\x0B'.indexOf(chr)!==-1;const stripTrigger=(text,trigger)=>text.substring(trigger.length);const findTrigger=(text,index,trigger)=>{let i;const firstChar=trigger.charAt(0);for(i=index-1;i>=0;i--){const char=text.charAt(i);if(isWhitespace(char)){return Optional.none();}if(firstChar===char&&contains$1(text,trigger,i,index)){break;}}return Optional.some(i);};const findStart=(dom,initRange,trigger,minChars=0)=>{if(!isValidTextRange(initRange)){return Optional.none();}const buffer={text:'',offset:0};const findTriggerIndex=(element,offset,text)=>{buffer.text=text+buffer.text;buffer.offset+=offset;return findTrigger(buffer.text,buffer.offset,trigger).getOr(offset);};const root=dom.getParent(initRange.startContainer,dom.isBlock)||dom.getRoot();return repeatLeft(dom,initRange.startContainer,initRange.startOffset,findTriggerIndex,root).bind(spot=>{const range=initRange.cloneRange();range.setStart(spot.container,spot.offset);range.setEnd(initRange.endContainer,initRange.endOffset);if(range.collapsed){return Optional.none();}const text=getText(range);const triggerIndex=text.lastIndexOf(trigger);if(triggerIndex!==0||stripTrigger(text,trigger).length<minChars){return Optional.none();}else{return Optional.some({text:stripTrigger(text,trigger),range,trigger});}});};const getContext=(dom,initRange,trigger,minChars=0)=>detect$1(SugarElement.fromDom(initRange.startContainer)).fold(()=>findStart(dom,initRange,trigger,minChars),elm=>{const range=dom.createRng();range.selectNode(elm.dom);const text=getText(range);return Optional.some({range,text:stripTrigger(text,trigger),trigger});});const isText$1=node=>node.nodeType===TEXT;const isElement=node=>node.nodeType===ELEMENT;const toLast=node=>{if(isText$1(node)){return point(node,node.data.length);}else{const children=node.childNodes;return children.length>0?toLast(children[children.length-1]):point(node,children.length);}};const toLeaf=(node,offset)=>{const children=node.childNodes;if(children.length>0&&offset<children.length){return toLeaf(children[offset],0);}else if(children.length>0&&isElement(node)&&children.length===offset){return toLast(children[children.length-1]);}else{return point(node,offset);}};const isPreviousCharContent=(dom,leaf)=>{var _a;const root=(_a=dom.getParent(leaf.container,dom.isBlock))!==null&&_a!==void 0?_a:dom.getRoot();return repeatLeft(dom,leaf.container,leaf.offset,(_element,offset)=>offset===0?-1:offset,root).filter(spot=>{const char=spot.container.data.charAt(spot.offset-1);return!isWhitespace(char);}).isSome();};const isStartOfWord=dom=>rng=>{const leaf=toLeaf(rng.startContainer,rng.startOffset);return!isPreviousCharContent(dom,leaf);};const getTriggerContext=(dom,initRange,database)=>findMap(database.triggers,trigger=>getContext(dom,initRange,trigger));const lookup=(editor,getDatabase)=>{const database=getDatabase();const rng=editor.selection.getRng();return getTriggerContext(editor.dom,rng,database).bind(context=>lookupWithContext(editor,getDatabase,context));};const lookupWithContext=(editor,getDatabase,context,fetchOptions={})=>{var _a;const database=getDatabase();const rng=editor.selection.getRng();const startText=(_a=rng.startContainer.nodeValue)!==null&&_a!==void 0?_a:'';const autocompleters=filter$5(database.lookupByTrigger(context.trigger),autocompleter=>context.text.length>=autocompleter.minChars&&autocompleter.matches.getOrThunk(()=>isStartOfWord(editor.dom))(context.range,startText,context.text));if(autocompleters.length===0){return Optional.none();}const lookupData=Promise.all(map$3(autocompleters,ac=>{const fetchResult=ac.fetch(context.text,ac.maxResults,fetchOptions);return fetchResult.then(results=>({matchText:context.text,items:results,columns:ac.columns,onAction:ac.onAction,highlightOn:ac.highlightOn}));}));return Optional.some({lookupData,context});};var SimpleResultType;(function(SimpleResultType){SimpleResultType[SimpleResultType['Error']=0]='Error';SimpleResultType[SimpleResultType['Value']=1]='Value';})(SimpleResultType||(SimpleResultType={}));const fold$1=(res,onError,onValue)=>res.stype===SimpleResultType.Error?onError(res.serror):onValue(res.svalue);const partition=results=>{const values=[];const errors=[];each$e(results,obj=>{fold$1(obj,err=>errors.push(err),val=>values.push(val));});return{values,errors};};const mapError=(res,f)=>{if(res.stype===SimpleResultType.Error){return{stype:SimpleResultType.Error,serror:f(res.serror)};}else{return res;}};const map=(res,f)=>{if(res.stype===SimpleResultType.Value){return{stype:SimpleResultType.Value,svalue:f(res.svalue)};}else{return res;}};const bind=(res,f)=>{if(res.stype===SimpleResultType.Value){return f(res.svalue);}else{return res;}};const bindError=(res,f)=>{if(res.stype===SimpleResultType.Error){return f(res.serror);}else{return res;}};const svalue=v=>({stype:SimpleResultType.Value,svalue:v});const serror=e=>({stype:SimpleResultType.Error,serror:e});const toResult=res=>fold$1(res,Result.error,Result.value);const fromResult=res=>res.fold(serror,svalue);const SimpleResult={fromResult,toResult,svalue,partition,serror,bind,bindError,map,mapError,fold:fold$1};const formatObj=input=>{return isObject(input)&&keys(input).length>100?' removed due to size':JSON.stringify(input,null,2);};const formatErrors=errors=>{const es=errors.length>10?errors.slice(0,10).concat([{path:[],getErrorInfo:constant('... (only showing first ten failures)')}]):errors;return map$3(es,e=>{return'Failed path: ('+e.path.join(' > ')+')\\n'+e.getErrorInfo();});};const nu=(path,getErrorInfo)=>{return SimpleResult.serror([{path,getErrorInfo}]);};const missingRequired=(path,key,obj)=>nu(path,()=>'Could not find valid *required* value for \"'+key+'\" in '+formatObj(obj));const missingKey=(path,key)=>nu(path,()=>'Choice schema did not contain choice key: \"'+key+'\"');const missingBranch=(path,branches,branch)=>nu(path,()=>'The chosen schema: \"'+branch+'\" did not exist in branches: '+formatObj(branches));const custom=(path,err)=>nu(path,constant(err));const chooseFrom=(path,input,branches,ch)=>{const fields=get$a(branches,ch);return fields.fold(()=>missingBranch(path,branches,ch),vp=>vp.extract(path.concat(['branch: '+ch]),input));};const choose$1=(key,branches)=>{const extract=(path,input)=>{const choice=get$a(input,key);return choice.fold(()=>missingKey(path,key),chosen=>chooseFrom(path,input,branches,chosen));};const toString=()=>'chooseOn('+key+'). Possible values: '+keys(branches);return{extract,toString};};const shallow=(old,nu)=>{return nu;};const deep=(old,nu)=>{const bothObjects=isPlainObject(old)&&isPlainObject(nu);return bothObjects?deepMerge(old,nu):nu;};const baseMerge=merger=>{return(...objects)=>{if(objects.length===0){throw new Error(`Can't merge zero objects`);}const ret={};for(let j=0;j<objects.length;j++){const curObject=objects[j];for(const key in curObject){if(has$2(curObject,key)){ret[key]=merger(ret[key],curObject[key]);}}}return ret;};};const deepMerge=baseMerge(deep);const merge=baseMerge(shallow);const required=()=>({tag:'required',process:{}});const defaultedThunk=fallbackThunk=>({tag:'defaultedThunk',process:fallbackThunk});const defaulted$1=fallback=>defaultedThunk(constant(fallback));const asOption=()=>({tag:'option',process:{}});const mergeValues=(values,base)=>values.length>0?SimpleResult.svalue(deepMerge(base,merge.apply(undefined,values))):SimpleResult.svalue(base);const mergeErrors=errors=>compose(SimpleResult.serror,flatten)(errors);const consolidateObj=(objects,base)=>{const partition=SimpleResult.partition(objects);return partition.errors.length>0?mergeErrors(partition.errors):mergeValues(partition.values,base);};const consolidateArr=objects=>{const partitions=SimpleResult.partition(objects);return partitions.errors.length>0?mergeErrors(partitions.errors):SimpleResult.svalue(partitions.values);};const ResultCombine={consolidateObj,consolidateArr};const field$1=(key,newKey,presence,prop)=>({tag:'field',key,newKey,presence,prop});const customField$1=(newKey,instantiator)=>({tag:'custom',newKey,instantiator});const fold=(value,ifField,ifCustom)=>{switch(value.tag){case'field':return ifField(value.key,value.newKey,value.presence,value.prop);case'custom':return ifCustom(value.newKey,value.instantiator);}};const value=validator=>{const extract=(path,val)=>{return SimpleResult.bindError(validator(val),err=>custom(path,err));};const toString=constant('val');return{extract,toString};};const anyValue$1=value(SimpleResult.svalue);const requiredAccess=(path,obj,key,bundle)=>get$a(obj,key).fold(()=>missingRequired(path,key,obj),bundle);const fallbackAccess=(obj,key,fallback,bundle)=>{const v=get$a(obj,key).getOrThunk(()=>fallback(obj));return bundle(v);};const optionAccess=(obj,key,bundle)=>bundle(get$a(obj,key));const optionDefaultedAccess=(obj,key,fallback,bundle)=>{const opt=get$a(obj,key).map(val=>val===true?fallback(obj):val);return bundle(opt);};const extractField=(field,path,obj,key,prop)=>{const bundle=av=>prop.extract(path.concat([key]),av);const bundleAsOption=optValue=>optValue.fold(()=>SimpleResult.svalue(Optional.none()),ov=>{const result=prop.extract(path.concat([key]),ov);return SimpleResult.map(result,Optional.some);});switch(field.tag){case'required':return requiredAccess(path,obj,key,bundle);case'defaultedThunk':return fallbackAccess(obj,key,field.process,bundle);case'option':return optionAccess(obj,key,bundleAsOption);case'defaultedOptionThunk':return optionDefaultedAccess(obj,key,field.process,bundleAsOption);case'mergeWithThunk':{return fallbackAccess(obj,key,constant({}),v=>{const result=deepMerge(field.process(obj),v);return bundle(result);});}}};const extractFields=(path,obj,fields)=>{const success={};const errors=[];for(const field of fields){fold(field,(key,newKey,presence,prop)=>{const result=extractField(presence,path,obj,key,prop);SimpleResult.fold(result,err=>{errors.push(...err);},res=>{success[newKey]=res;});},(newKey,instantiator)=>{success[newKey]=instantiator(obj);});}return errors.length>0?SimpleResult.serror(errors):SimpleResult.svalue(success);};const objOf=values=>{const extract=(path,o)=>extractFields(path,o,values);const toString=()=>{const fieldStrings=map$3(values,value=>fold(value,(key,_okey,_presence,prop)=>key+' -> '+prop.toString(),(newKey,_instantiator)=>'state('+newKey+')'));return'obj{\\n'+fieldStrings.join('\\n')+'}';};return{extract,toString};};const arrOf=prop=>{const extract=(path,array)=>{const results=map$3(array,(a,i)=>prop.extract(path.concat(['['+i+']']),a));return ResultCombine.consolidateArr(results);};const toString=()=>'array('+prop.toString()+')';return{extract,toString};};const valueOf=validator=>value(v=>validator(v).fold(SimpleResult.serror,SimpleResult.svalue));const extractValue=(label,prop,obj)=>{const res=prop.extract([label],obj);return SimpleResult.mapError(res,errs=>({input:obj,errors:errs}));};const asRaw=(label,prop,obj)=>SimpleResult.toResult(extractValue(label,prop,obj));const formatError=errInfo=>{return'Errors: \\n'+formatErrors(errInfo.errors).join('\\n')+'\\n\\nInput object: '+formatObj(errInfo.input);};const choose=(key,branches)=>choose$1(key,map$2(branches,objOf));const anyValue=constant(anyValue$1);const typedValue=(validator,expectedType)=>value(a=>{const actualType=typeof a;return validator(a)?SimpleResult.svalue(a):SimpleResult.serror(`Expected type: ${expectedType} but got: ${actualType}`);});const number=typedValue(isNumber,'number');const string=typedValue(isString,'string');const boolean=typedValue(isBoolean,'boolean');const functionProcessor=typedValue(isFunction,'function');const field=field$1;const customField=customField$1;const validateEnum=values=>valueOf(value=>contains$2(values,value)?Result.value(value):Result.error(`Unsupported value: \"${value}\", choose one of \"${values.join(', ')}\".`));const requiredOf=(key,schema)=>field(key,key,required(),schema);const requiredString=key=>requiredOf(key,string);const requiredFunction=key=>requiredOf(key,functionProcessor);const requiredArrayOf=(key,schema)=>field(key,key,required(),arrOf(schema));const optionOf=(key,schema)=>field(key,key,asOption(),schema);const optionString=key=>optionOf(key,string);const optionFunction=key=>optionOf(key,functionProcessor);const defaulted=(key,fallback)=>field(key,key,defaulted$1(fallback),anyValue());const defaultedOf=(key,fallback,schema)=>field(key,key,defaulted$1(fallback),schema);const defaultedNumber=(key,fallback)=>defaultedOf(key,fallback,number);const defaultedString=(key,fallback)=>defaultedOf(key,fallback,string);const defaultedStringEnum=(key,fallback,values)=>defaultedOf(key,fallback,validateEnum(values));const defaultedBoolean=(key,fallback)=>defaultedOf(key,fallback,boolean);const defaultedFunction=(key,fallback)=>defaultedOf(key,fallback,functionProcessor);const defaultedArrayOf=(key,fallback,schema)=>defaultedOf(key,fallback,arrOf(schema));const type=requiredString('type');const fetch$1=requiredFunction('fetch');const onAction=requiredFunction('onAction');const onSetup=defaultedFunction('onSetup',()=>noop);const optionalText=optionString('text');const optionalIcon=optionString('icon');const optionalTooltip=optionString('tooltip');const optionalLabel=optionString('label');const active=defaultedBoolean('active',false);const enabled=defaultedBoolean('enabled',true);const primary=defaultedBoolean('primary',false);const defaultedColumns=num=>defaulted('columns',num);const defaultedType=type=>defaultedString('type',type);const autocompleterSchema=objOf([type,requiredString('trigger'),defaultedNumber('minChars',1),defaultedColumns(1),defaultedNumber('maxResults',10),optionFunction('matches'),fetch$1,onAction,defaultedArrayOf('highlightOn',[],string)]);const createAutocompleter=spec=>asRaw('Autocompleter',autocompleterSchema,{trigger:spec.ch,...spec});const baseToolbarButtonFields=[enabled,optionalTooltip,optionalIcon,optionalText,onSetup];const baseToolbarToggleButtonFields=[active].concat(baseToolbarButtonFields);const contextBarFields=[defaultedFunction('predicate',never),defaultedStringEnum('scope','node',['node','editor']),defaultedStringEnum('position','selection',['node','selection','line'])];const contextButtonFields=baseToolbarButtonFields.concat([defaultedType('contextformbutton'),primary,onAction,customField('original',identity)]);const contextToggleButtonFields=baseToolbarToggleButtonFields.concat([defaultedType('contextformbutton'),primary,onAction,customField('original',identity)]);const launchButtonFields=baseToolbarButtonFields.concat([defaultedType('contextformbutton')]);const launchToggleButtonFields=baseToolbarToggleButtonFields.concat([defaultedType('contextformtogglebutton')]);const toggleOrNormal=choose('type',{contextformbutton:contextButtonFields,contextformtogglebutton:contextToggleButtonFields});objOf([defaultedType('contextform'),defaultedFunction('initValue',constant('')),optionalLabel,requiredArrayOf('commands',toggleOrNormal),optionOf('launch',choose('type',{contextformbutton:launchButtonFields,contextformtogglebutton:launchToggleButtonFields}))].concat(contextBarFields));const register$2=editor=>{const popups=editor.ui.registry.getAll().popups;const dataset=map$2(popups,popup=>createAutocompleter(popup).fold(err=>{throw new Error(formatError(err));},identity));const triggers=stringArray(mapToArray(dataset,v=>v.trigger));const datasetValues=values(dataset);const lookupByTrigger=trigger=>filter$5(datasetValues,dv=>dv.trigger===trigger);return{dataset,triggers,lookupByTrigger};};const setupEditorInput=(editor,api)=>{const update=last$1(api.load,50);editor.on('keypress compositionend',e=>{if(e.which===27){return;}update.throttle();});editor.on('keydown',e=>{const keyCode=e.which;if(keyCode===8){update.throttle();}else if(keyCode===27){api.cancelIfNecessary();}});editor.on('remove',update.cancel);};const setup$j=editor=>{const activeAutocompleter=value$2();const uiActive=Cell(false);const isActive=activeAutocompleter.isSet;const cancelIfNecessary=()=>{if(isActive()){removeAutocompleterDecoration(editor);fireAutocompleterEnd(editor);uiActive.set(false);activeAutocompleter.clear();}};const commenceIfNecessary=context=>{if(!isActive()){addAutocompleterDecoration(editor,context.range);activeAutocompleter.set({trigger:context.trigger,matchLength:context.text.length});}};const getAutocompleters=cached(()=>register$2(editor));const doLookup=fetchOptions=>activeAutocompleter.get().map(ac=>getContext(editor.dom,editor.selection.getRng(),ac.trigger).bind(newContext=>lookupWithContext(editor,getAutocompleters,newContext,fetchOptions))).getOrThunk(()=>lookup(editor,getAutocompleters));const load=fetchOptions=>{doLookup(fetchOptions).fold(cancelIfNecessary,lookupInfo=>{commenceIfNecessary(lookupInfo.context);lookupInfo.lookupData.then(lookupData=>{activeAutocompleter.get().map(ac=>{const context=lookupInfo.context;if(ac.trigger===context.trigger){if(context.text.length-ac.matchLength>=10){cancelIfNecessary();}else{activeAutocompleter.set({...ac,matchLength:context.text.length});if(uiActive.get()){fireAutocompleterUpdate(editor,{lookupData});}else{uiActive.set(true);fireAutocompleterStart(editor,{lookupData});}}}});});});};editor.addCommand('mceAutocompleterReload',(_ui,value)=>{const fetchOptions=isObject(value)?value.fetchOptions:{};load(fetchOptions);});editor.addCommand('mceAutocompleterClose',cancelIfNecessary);setupEditorInput(editor,{cancelIfNecessary,load});};const createAndFireInputEvent=eventType=>(editor,inputType,specifics={})=>{const target=editor.getBody();const overrides={bubbles:true,composed:true,data:null,isComposing:false,detail:0,view:null,target,currentTarget:target,eventPhase:Event.AT_TARGET,originalTarget:target,explicitOriginalTarget:target,isTrusted:false,srcElement:target,cancelable:false,preventDefault:noop,inputType};const input=clone$3(new InputEvent(eventType));return editor.dispatch(eventType,{...input,...overrides,...specifics});};const fireFakeInputEvent=createAndFireInputEvent('input');const fireFakeBeforeInputEvent=createAndFireInputEvent('beforeinput');const executeKeydownOverride$3=(editor,caret,evt)=>{const inputType=evt.keyCode===VK.BACKSPACE?'deleteContentBackward':'deleteContentForward';executeWithDelayedAction([{keyCode:VK.BACKSPACE,action:action(backspaceDelete,editor)},{keyCode:VK.BACKSPACE,action:action(backspaceDelete$5,editor,false)},{keyCode:VK.DELETE,action:action(backspaceDelete$5,editor,true)},{keyCode:VK.BACKSPACE,action:action(backspaceDelete$6,editor,false)},{keyCode:VK.DELETE,action:action(backspaceDelete$6,editor,true)},{keyCode:VK.BACKSPACE,action:action(backspaceDelete$3,editor,caret,false)},{keyCode:VK.DELETE,action:action(backspaceDelete$3,editor,caret,true)},{keyCode:VK.BACKSPACE,action:action(backspaceDelete$9,editor,false)},{keyCode:VK.DELETE,action:action(backspaceDelete$9,editor,true)},{keyCode:VK.BACKSPACE,action:action(backspaceDelete$4,editor,false)},{keyCode:VK.DELETE,action:action(backspaceDelete$4,editor,true)},{keyCode:VK.BACKSPACE,action:action(backspaceDelete$1,editor,false)},{keyCode:VK.DELETE,action:action(backspaceDelete$1,editor,true)},{keyCode:VK.BACKSPACE,action:action(backspaceDelete$7,editor,false)},{keyCode:VK.DELETE,action:action(backspaceDelete$7,editor,true)},{keyCode:VK.BACKSPACE,action:action(backspaceDelete$8,editor,false)},{keyCode:VK.DELETE,action:action(backspaceDelete$8,editor,true)},{keyCode:VK.BACKSPACE,action:action(backspaceDelete$2,editor,false)},{keyCode:VK.DELETE,action:action(backspaceDelete$2,editor,true)}],evt).each(applyAction=>{evt.preventDefault();const beforeInput=fireFakeBeforeInputEvent(editor,inputType);if(!beforeInput.isDefaultPrevented()){applyAction();fireFakeInputEvent(editor,inputType);}});};const executeKeyupOverride=(editor,evt)=>{execute([{keyCode:VK.BACKSPACE,action:action(paddEmptyElement,editor)},{keyCode:VK.DELETE,action:action(paddEmptyElement,editor)}],evt);};const setup$i=(editor,caret)=>{editor.on('keydown',evt=>{if(!evt.isDefaultPrevented()){executeKeydownOverride$3(editor,caret,evt);}});editor.on('keyup',evt=>{if(!evt.isDefaultPrevented()){executeKeyupOverride(editor,evt);}});};const firstNonWhiteSpaceNodeSibling=node=>{while(node){if(isElement$6(node)||isText$a(node)&&node.data&&/[\\r\\n\\s]/.test(node.data)){return node;}node=node.nextSibling;}return null;};const moveToCaretPosition=(editor,root)=>{const dom=editor.dom;const moveCaretBeforeOnEnterElementsMap=editor.schema.getMoveCaretBeforeOnEnterElements();if(!root){return;}if(/^(LI|DT|DD)$/.test(root.nodeName)){const firstChild=firstNonWhiteSpaceNodeSibling(root.firstChild);if(firstChild&&/^(UL|OL|DL)$/.test(firstChild.nodeName)){root.insertBefore(dom.doc.createTextNode(nbsp),root.firstChild);}}const rng=dom.createRng();root.normalize();if(root.hasChildNodes()){const walker=new DomTreeWalker(root,root);let lastNode=root;let node;while(node=walker.current()){if(isText$a(node)){rng.setStart(node,0);rng.setEnd(node,0);break;}if(moveCaretBeforeOnEnterElementsMap[node.nodeName.toLowerCase()]){rng.setStartBefore(node);rng.setEndBefore(node);break;}lastNode=node;node=walker.next();}if(!node){rng.setStart(lastNode,0);rng.setEnd(lastNode,0);}}else{if(isBr$6(root)){if(root.nextSibling&&dom.isBlock(root.nextSibling)){rng.setStartBefore(root);rng.setEndBefore(root);}else{rng.setStartAfter(root);rng.setEndAfter(root);}}else{rng.setStart(root,0);rng.setEnd(root,0);}}editor.selection.setRng(rng);scrollRangeIntoView(editor,rng);};const getEditableRoot=(dom,node)=>{const root=dom.getRoot();let editableRoot;let parent=node;while(parent!==root&&parent&&dom.getContentEditable(parent)!=='false'){if(dom.getContentEditable(parent)==='true'){editableRoot=parent;}parent=parent.parentNode;}return parent!==root?editableRoot:root;};const getParentBlock$1=editor=>{return Optional.from(editor.dom.getParent(editor.selection.getStart(true),editor.dom.isBlock));};const getParentBlockName=editor=>{return getParentBlock$1(editor).fold(constant(''),parentBlock=>{return parentBlock.nodeName.toUpperCase();});};const isListItemParentBlock=editor=>{return getParentBlock$1(editor).filter(elm=>{return isListItem$1(SugarElement.fromDom(elm));}).isSome();};const hasFirstChild=(elm,name)=>{return elm.firstChild&&elm.firstChild.nodeName===name;};const isFirstChild=elm=>{var _a;return((_a=elm.parentNode)===null||_a===void 0?void 0:_a.firstChild)===elm;};const hasParent=(elm,parentName)=>{const parentNode=elm===null||elm===void 0?void 0:elm.parentNode;return isNonNullable(parentNode)&&parentNode.nodeName===parentName;};const isListBlock=elm=>{return isNonNullable(elm)&&/^(OL|UL|LI)$/.test(elm.nodeName);};const isListItem=elm=>{return isNonNullable(elm)&&/^(LI|DT|DD)$/.test(elm.nodeName);};const isNestedList=elm=>{return isListBlock(elm)&&isListBlock(elm.parentNode);};const getContainerBlock=containerBlock=>{const containerBlockParent=containerBlock.parentNode;return isListItem(containerBlockParent)?containerBlockParent:containerBlock;};const isFirstOrLastLi=(containerBlock,parentBlock,first)=>{let node=containerBlock[first?'firstChild':'lastChild'];while(node){if(isElement$6(node)){break;}node=node[first?'nextSibling':'previousSibling'];}return node===parentBlock;};const insert$3=(editor,createNewBlock,containerBlock,parentBlock,newBlockName)=>{const dom=editor.dom;const rng=editor.selection.getRng();const containerParent=containerBlock.parentNode;if(containerBlock===editor.getBody()||!containerParent){return;}if(isNestedList(containerBlock)){newBlockName='LI';}let newBlock=createNewBlock(newBlockName);if(isFirstOrLastLi(containerBlock,parentBlock,true)&&isFirstOrLastLi(containerBlock,parentBlock,false)){if(hasParent(containerBlock,'LI')){const containerBlockParent=getContainerBlock(containerBlock);dom.insertAfter(newBlock,containerBlockParent);if(isFirstChild(containerBlock)){dom.remove(containerBlockParent);}else{dom.remove(containerBlock);}}else{dom.replace(newBlock,containerBlock);}}else if(isFirstOrLastLi(containerBlock,parentBlock,true)){if(hasParent(containerBlock,'LI')){dom.insertAfter(newBlock,getContainerBlock(containerBlock));newBlock.appendChild(dom.doc.createTextNode(' '));newBlock.appendChild(containerBlock);}else{containerParent.insertBefore(newBlock,containerBlock);}dom.remove(parentBlock);}else if(isFirstOrLastLi(containerBlock,parentBlock,false)){dom.insertAfter(newBlock,getContainerBlock(containerBlock));dom.remove(parentBlock);}else{containerBlock=getContainerBlock(containerBlock);const tmpRng=rng.cloneRange();tmpRng.setStartAfter(parentBlock);tmpRng.setEndAfter(containerBlock);const fragment=tmpRng.extractContents();if(newBlockName==='LI'&&hasFirstChild(fragment,'LI')){newBlock=fragment.firstChild;dom.insertAfter(fragment,containerBlock);}else{dom.insertAfter(fragment,containerBlock);dom.insertAfter(newBlock,containerBlock);}dom.remove(parentBlock);}moveToCaretPosition(editor,newBlock);};const trimZwsp=fragment=>{each$e(descendants$1(SugarElement.fromDom(fragment),isText$b),text=>{const rawNode=text.dom;rawNode.nodeValue=trim$1(rawNode.data);});};const isWithinNonEditableList=(editor,node)=>{const parentList=editor.dom.getParent(node,'ol,ul,dl');return parentList!==null&&editor.dom.getContentEditableParent(parentList)==='false';};const isEmptyAnchor=(dom,elm)=>{return elm&&elm.nodeName==='A'&&dom.isEmpty(elm);};const emptyBlock=elm=>{elm.innerHTML='<br data-mce-bogus=\"1\">';};const containerAndSiblingName=(container,nodeName)=>{return container.nodeName===nodeName||container.previousSibling&&container.previousSibling.nodeName===nodeName;};const canSplitBlock=(dom,node)=>{return isNonNullable(node)&&dom.isBlock(node)&&!/^(TD|TH|CAPTION|FORM)$/.test(node.nodeName)&&!/^(fixed|absolute)/i.test(node.style.position)&&dom.getContentEditable(node)!=='true';};const trimInlineElementsOnLeftSideOfBlock=(dom,nonEmptyElementsMap,block)=>{var _a;const firstChilds=[];if(!block){return;}let currentNode=block;while(currentNode=currentNode.firstChild){if(dom.isBlock(currentNode)){return;}if(isElement$6(currentNode)&&!nonEmptyElementsMap[currentNode.nodeName.toLowerCase()]){firstChilds.push(currentNode);}}let i=firstChilds.length;while(i--){currentNode=firstChilds[i];if(!currentNode.hasChildNodes()||currentNode.firstChild===currentNode.lastChild&&((_a=currentNode.firstChild)===null||_a===void 0?void 0:_a.nodeValue)===''){dom.remove(currentNode);}else{if(isEmptyAnchor(dom,currentNode)){dom.remove(currentNode);}}}};const normalizeZwspOffset=(start,container,offset)=>{if(!isText$a(container)){return offset;}else if(start){return offset===1&&container.data.charAt(offset-1)===ZWSP$1?0:offset;}else{return offset===container.data.length-1&&container.data.charAt(offset)===ZWSP$1?container.data.length:offset;}};const includeZwspInRange=rng=>{const newRng=rng.cloneRange();newRng.setStart(rng.startContainer,normalizeZwspOffset(true,rng.startContainer,rng.startOffset));newRng.setEnd(rng.endContainer,normalizeZwspOffset(false,rng.endContainer,rng.endOffset));return newRng;};const trimLeadingLineBreaks=node=>{let currentNode=node;do{if(isText$a(currentNode)){currentNode.data=currentNode.data.replace(/^[\\r\\n]+/,'');}currentNode=currentNode.firstChild;}while(currentNode);};const applyAttributes=(editor,node,forcedRootBlockAttrs)=>{const dom=editor.dom;Optional.from(forcedRootBlockAttrs.style).map(dom.parseStyle).each(attrStyles=>{const currentStyles=getAllRaw(SugarElement.fromDom(node));const newStyles={...currentStyles,...attrStyles};dom.setStyles(node,newStyles);});const attrClassesOpt=Optional.from(forcedRootBlockAttrs.class).map(attrClasses=>attrClasses.split(/\\s+/));const currentClassesOpt=Optional.from(node.className).map(currentClasses=>filter$5(currentClasses.split(/\\s+/),clazz=>clazz!==''));lift2(attrClassesOpt,currentClassesOpt,(attrClasses,currentClasses)=>{const filteredClasses=filter$5(currentClasses,clazz=>!contains$2(attrClasses,clazz));const newClasses=[...attrClasses,...filteredClasses];dom.setAttrib(node,'class',newClasses.join(' '));});const appliedAttrs=['style','class'];const remainingAttrs=filter$4(forcedRootBlockAttrs,(_,attrs)=>!contains$2(appliedAttrs,attrs));dom.setAttribs(node,remainingAttrs);};const setForcedBlockAttrs=(editor,node)=>{const forcedRootBlockName=getForcedRootBlock(editor);if(forcedRootBlockName.toLowerCase()===node.tagName.toLowerCase()){const forcedRootBlockAttrs=getForcedRootBlockAttrs(editor);applyAttributes(editor,node,forcedRootBlockAttrs);}};const wrapSelfAndSiblingsInDefaultBlock=(editor,newBlockName,rng,container,offset)=>{var _a;const dom=editor.dom;const editableRoot=(_a=getEditableRoot(dom,container))!==null&&_a!==void 0?_a:dom.getRoot();let parentBlock=dom.getParent(container,dom.isBlock);if(!parentBlock||!canSplitBlock(dom,parentBlock)){parentBlock=parentBlock||editableRoot;let rootBlockName;if(parentBlock===editor.getBody()||isTableCellOrCaption(parentBlock)){rootBlockName=parentBlock.nodeName.toLowerCase();}else if(parentBlock.parentNode){rootBlockName=parentBlock.parentNode.nodeName.toLowerCase();}else{rootBlockName='';}if(!parentBlock.hasChildNodes()){const newBlock=dom.create(newBlockName);setForcedBlockAttrs(editor,newBlock);parentBlock.appendChild(newBlock);rng.setStart(newBlock,0);rng.setEnd(newBlock,0);return newBlock;}let node=container;while(node&&node.parentNode!==parentBlock){node=node.parentNode;}let startNode;while(node&&!dom.isBlock(node)){startNode=node;node=node.previousSibling;}if(startNode&&editor.schema.isValidChild(rootBlockName,newBlockName.toLowerCase())){const startNodeParent=startNode.parentNode;const newBlock=dom.create(newBlockName);setForcedBlockAttrs(editor,newBlock);startNodeParent.insertBefore(newBlock,startNode);node=startNode;while(node&&!dom.isBlock(node)){const next=node.nextSibling;newBlock.appendChild(node);node=next;}rng.setStart(container,offset);rng.setEnd(container,offset);}}return container;};const addBrToBlockIfNeeded=(dom,block)=>{block.normalize();const lastChild=block.lastChild;if(!lastChild||isElement$6(lastChild)&&/^(left|right)$/gi.test(dom.getStyle(lastChild,'float',true))){dom.add(block,'br');}};const shouldEndContainer=(editor,container)=>{const optionValue=shouldEndContainerOnEmptyBlock(editor);if(isNullable(container)){return false;}else if(isString(optionValue)){return contains$2(Tools.explode(optionValue),container.nodeName.toLowerCase());}else{return optionValue;}};const insert$2=(editor,evt)=>{let container;let offset;let parentBlockName;let containerBlock;let isAfterLastNodeInContainer=false;const dom=editor.dom;const schema=editor.schema,nonEmptyElementsMap=schema.getNonEmptyElements();const rng=editor.selection.getRng();const newBlockName=getForcedRootBlock(editor);const createNewBlock=name=>{let node=container;const textInlineElements=schema.getTextInlineElements();let block;if(name||parentBlockName==='TABLE'||parentBlockName==='HR'){block=dom.create(name||newBlockName);}else{block=parentBlock.cloneNode(false);}let caretNode=block;if(shouldKeepStyles(editor)===false){dom.setAttrib(block,'style',null);dom.setAttrib(block,'class',null);}else{do{if(textInlineElements[node.nodeName]){if(isCaretNode(node)||isBookmarkNode$1(node)){continue;}const clonedNode=node.cloneNode(false);dom.setAttrib(clonedNode,'id','');if(block.hasChildNodes()){clonedNode.appendChild(block.firstChild);block.appendChild(clonedNode);}else{caretNode=clonedNode;block.appendChild(clonedNode);}}}while((node=node.parentNode)&&node!==editableRoot);}setForcedBlockAttrs(editor,block);emptyBlock(caretNode);return block;};const isCaretAtStartOrEndOfBlock=start=>{const normalizedOffset=normalizeZwspOffset(start,container,offset);if(isText$a(container)&&(start?normalizedOffset>0:normalizedOffset<container.data.length)){return false;}if(container.parentNode===parentBlock&&isAfterLastNodeInContainer&&!start){return true;}if(start&&isElement$6(container)&&container===parentBlock.firstChild){return true;}if(containerAndSiblingName(container,'TABLE')||containerAndSiblingName(container,'HR')){return isAfterLastNodeInContainer&&!start||!isAfterLastNodeInContainer&&start;}const walker=new DomTreeWalker(container,parentBlock);if(isText$a(container)){if(start&&normalizedOffset===0){walker.prev();}else if(!start&&normalizedOffset===container.data.length){walker.next();}}let node;while(node=walker.current()){if(isElement$6(node)){if(!node.getAttribute('data-mce-bogus')){const name=node.nodeName.toLowerCase();if(nonEmptyElementsMap[name]&&name!=='br'){return false;}}}else if(isText$a(node)&&!isWhitespaceText(node.data)){return false;}if(start){walker.prev();}else{walker.next();}}return true;};const insertNewBlockAfter=()=>{let block;if(/^(H[1-6]|PRE|FIGURE)$/.test(parentBlockName)&&containerBlockName!=='HGROUP'){block=createNewBlock(newBlockName);}else{block=createNewBlock();}if(shouldEndContainer(editor,containerBlock)&&canSplitBlock(dom,containerBlock)&&dom.isEmpty(parentBlock)){block=dom.split(containerBlock,parentBlock);}else{dom.insertAfter(block,parentBlock);}moveToCaretPosition(editor,block);return block;};normalize$2(dom,rng).each(normRng=>{rng.setStart(normRng.startContainer,normRng.startOffset);rng.setEnd(normRng.endContainer,normRng.endOffset);});container=rng.startContainer;offset=rng.startOffset;const shiftKey=!!(evt&&evt.shiftKey);const ctrlKey=!!(evt&&evt.ctrlKey);if(isElement$6(container)&&container.hasChildNodes()){isAfterLastNodeInContainer=offset>container.childNodes.length-1;container=container.childNodes[Math.min(offset,container.childNodes.length-1)]||container;if(isAfterLastNodeInContainer&&isText$a(container)){offset=container.data.length;}else{offset=0;}}const editableRoot=getEditableRoot(dom,container);if(!editableRoot||isWithinNonEditableList(editor,container)){return;}if(!shiftKey){container=wrapSelfAndSiblingsInDefaultBlock(editor,newBlockName,rng,container,offset);}let parentBlock=dom.getParent(container,dom.isBlock)||dom.getRoot();containerBlock=isNonNullable(parentBlock===null||parentBlock===void 0?void 0:parentBlock.parentNode)?dom.getParent(parentBlock.parentNode,dom.isBlock):null;parentBlockName=parentBlock?parentBlock.nodeName.toUpperCase():'';const containerBlockName=containerBlock?containerBlock.nodeName.toUpperCase():'';if(containerBlockName==='LI'&&!ctrlKey){const liBlock=containerBlock;parentBlock=liBlock;containerBlock=liBlock.parentNode;parentBlockName=containerBlockName;}if(/^(LI|DT|DD)$/.test(parentBlockName)&&isElement$6(containerBlock)){if(dom.isEmpty(parentBlock)){insert$3(editor,createNewBlock,containerBlock,parentBlock,newBlockName);return;}}if(parentBlock===editor.getBody()){return;}const parentBlockParent=parentBlock.parentNode;let newBlock;if(isCaretContainerBlock$1(parentBlock)){newBlock=showCaretContainerBlock(parentBlock);if(dom.isEmpty(parentBlock)){emptyBlock(parentBlock);}setForcedBlockAttrs(editor,newBlock);moveToCaretPosition(editor,newBlock);}else if(isCaretAtStartOrEndOfBlock(false)){newBlock=insertNewBlockAfter();}else if(isCaretAtStartOrEndOfBlock(true)&&parentBlockParent){newBlock=parentBlockParent.insertBefore(createNewBlock(),parentBlock);moveToCaretPosition(editor,containerAndSiblingName(parentBlock,'HR')?newBlock:parentBlock);}else{const tmpRng=includeZwspInRange(rng).cloneRange();tmpRng.setEndAfter(parentBlock);const fragment=tmpRng.extractContents();trimZwsp(fragment);trimLeadingLineBreaks(fragment);newBlock=fragment.firstChild;dom.insertAfter(fragment,parentBlock);trimInlineElementsOnLeftSideOfBlock(dom,nonEmptyElementsMap,newBlock);addBrToBlockIfNeeded(dom,parentBlock);if(dom.isEmpty(parentBlock)){emptyBlock(parentBlock);}newBlock.normalize();if(dom.isEmpty(newBlock)){dom.remove(newBlock);insertNewBlockAfter();}else{setForcedBlockAttrs(editor,newBlock);moveToCaretPosition(editor,newBlock);}}dom.setAttrib(newBlock,'id','');editor.dispatch('NewBlock',{newBlock});};const fakeEventName$1='insertParagraph';const blockbreak={insert:insert$2,fakeEventName:fakeEventName$1};const hasRightSideContent=(schema,container,parentBlock)=>{const walker=new DomTreeWalker(container,parentBlock);let node;const nonEmptyElementsMap=schema.getNonEmptyElements();while(node=walker.next()){if(nonEmptyElementsMap[node.nodeName.toLowerCase()]||isText$a(node)&&node.length>0){return true;}}return false;};const moveSelectionToBr=(editor,brElm,extraBr)=>{const rng=editor.dom.createRng();if(!extraBr){rng.setStartAfter(brElm);rng.setEndAfter(brElm);}else{rng.setStartBefore(brElm);rng.setEndBefore(brElm);}editor.selection.setRng(rng);scrollRangeIntoView(editor,rng);};const insertBrAtCaret=(editor,evt)=>{const selection=editor.selection;const dom=editor.dom;const rng=selection.getRng();let brElm;let extraBr=false;normalize$2(dom,rng).each(normRng=>{rng.setStart(normRng.startContainer,normRng.startOffset);rng.setEnd(normRng.endContainer,normRng.endOffset);});let offset=rng.startOffset;let container=rng.startContainer;if(isElement$6(container)&&container.hasChildNodes()){const isAfterLastNodeInContainer=offset>container.childNodes.length-1;container=container.childNodes[Math.min(offset,container.childNodes.length-1)]||container;if(isAfterLastNodeInContainer&&isText$a(container)){offset=container.data.length;}else{offset=0;}}let parentBlock=dom.getParent(container,dom.isBlock);const containerBlock=parentBlock&&parentBlock.parentNode?dom.getParent(parentBlock.parentNode,dom.isBlock):null;const containerBlockName=containerBlock?containerBlock.nodeName.toUpperCase():'';const isControlKey=!!(evt&&evt.ctrlKey);if(containerBlockName==='LI'&&!isControlKey){parentBlock=containerBlock;}if(isText$a(container)&&offset>=container.data.length){if(!hasRightSideContent(editor.schema,container,parentBlock||dom.getRoot())){brElm=dom.create('br');rng.insertNode(brElm);rng.setStartAfter(brElm);rng.setEndAfter(brElm);extraBr=true;}}brElm=dom.create('br');rangeInsertNode(dom,rng,brElm);moveSelectionToBr(editor,brElm,extraBr);editor.undoManager.add();};const insertBrBefore=(editor,inline)=>{const br=SugarElement.fromTag('br');before$3(SugarElement.fromDom(inline),br);editor.undoManager.add();};const insertBrAfter=(editor,inline)=>{if(!hasBrAfter(editor.getBody(),inline)){after$4(SugarElement.fromDom(inline),SugarElement.fromTag('br'));}const br=SugarElement.fromTag('br');after$4(SugarElement.fromDom(inline),br);moveSelectionToBr(editor,br.dom,false);editor.undoManager.add();};const isBeforeBr=pos=>{return isBr$6(pos.getNode());};const hasBrAfter=(rootNode,startNode)=>{if(isBeforeBr(CaretPosition.after(startNode))){return true;}else{return nextPosition(rootNode,CaretPosition.after(startNode)).map(pos=>{return isBr$6(pos.getNode());}).getOr(false);}};const isAnchorLink=elm=>{return elm&&elm.nodeName==='A'&&'href'in elm;};const isInsideAnchor=location=>{return location.fold(never,isAnchorLink,isAnchorLink,never);};const readInlineAnchorLocation=editor=>{const isInlineTarget$1=curry(isInlineTarget,editor);const position=CaretPosition.fromRangeStart(editor.selection.getRng());return readLocation(isInlineTarget$1,editor.getBody(),position).filter(isInsideAnchor);};const insertBrOutsideAnchor=(editor,location)=>{location.fold(noop,curry(insertBrBefore,editor),curry(insertBrAfter,editor),noop);};const insert$1=(editor,evt)=>{const anchorLocation=readInlineAnchorLocation(editor);if(anchorLocation.isSome()){anchorLocation.each(curry(insertBrOutsideAnchor,editor));}else{insertBrAtCaret(editor,evt);}};const fakeEventName='insertLineBreak';const linebreak={insert:insert$1,fakeEventName};const matchesSelector=(editor,selector)=>{return getParentBlock$1(editor).filter(parentBlock=>{return selector.length>0&&is$1(SugarElement.fromDom(parentBlock),selector);}).isSome();};const shouldInsertBr=editor=>{return matchesSelector(editor,getBrNewLineSelector(editor));};const shouldBlockNewLine$1=editor=>{return matchesSelector(editor,getNoNewLineSelector(editor));};const newLineAction=Adt.generate([{br:[]},{block:[]},{none:[]}]);const shouldBlockNewLine=(editor,_shiftKey)=>{return shouldBlockNewLine$1(editor);};const inListBlock=requiredState=>{return(editor,_shiftKey)=>{return isListItemParentBlock(editor)===requiredState;};};const inBlock=(blockName,requiredState)=>(editor,_shiftKey)=>{const state=getParentBlockName(editor)===blockName.toUpperCase();return state===requiredState;};const inCefBlock=editor=>{const editableRoot=getEditableRoot(editor.dom,editor.selection.getStart());return isNullable(editableRoot);};const inPreBlock=requiredState=>inBlock('pre',requiredState);const inSummaryBlock=()=>inBlock('summary',true);const shouldPutBrInPre=requiredState=>{return(editor,_shiftKey)=>{return shouldPutBrInPre$1(editor)===requiredState;};};const inBrContext=(editor,_shiftKey)=>{return shouldInsertBr(editor);};const hasShiftKey=(_editor,shiftKey)=>{return shiftKey;};const canInsertIntoEditableRoot=editor=>{const forcedRootBlock=getForcedRootBlock(editor);const rootEditable=getEditableRoot(editor.dom,editor.selection.getStart());return isNonNullable(rootEditable)&&editor.schema.isValidChild(rootEditable.nodeName,forcedRootBlock);};const match=(predicates,action)=>{return(editor,shiftKey)=>{const isMatch=foldl(predicates,(res,p)=>{return res&&p(editor,shiftKey);},true);return isMatch?Optional.some(action):Optional.none();};};const getAction=(editor,evt)=>{return evaluateUntil([match([shouldBlockNewLine],newLineAction.none()),match([inPreBlock(true),inCefBlock],newLineAction.none()),match([inSummaryBlock()],newLineAction.br()),match([inPreBlock(true),shouldPutBrInPre(false),hasShiftKey],newLineAction.br()),match([inPreBlock(true),shouldPutBrInPre(false)],newLineAction.block()),match([inPreBlock(true),shouldPutBrInPre(true),hasShiftKey],newLineAction.block()),match([inPreBlock(true),shouldPutBrInPre(true)],newLineAction.br()),match([inListBlock(true),hasShiftKey],newLineAction.br()),match([inListBlock(true)],newLineAction.block()),match([inBrContext],newLineAction.br()),match([hasShiftKey],newLineAction.br()),match([canInsertIntoEditableRoot],newLineAction.block())],[editor,!!(evt&&evt.shiftKey)]).getOr(newLineAction.none());};const insertBreak=(breakType,editor,evt)=>{if(!editor.selection.isCollapsed()){execEditorDeleteCommand(editor);}if(isNonNullable(evt)){const event=fireFakeBeforeInputEvent(editor,breakType.fakeEventName);if(event.isDefaultPrevented()){return;}}breakType.insert(editor,evt);if(isNonNullable(evt)){fireFakeInputEvent(editor,breakType.fakeEventName);}};const insert=(editor,evt)=>{const br=()=>insertBreak(linebreak,editor,evt);const block=()=>insertBreak(blockbreak,editor,evt);const logicalAction=getAction(editor,evt);switch(getNewlineBehavior(editor)){case'linebreak':logicalAction.fold(br,br,noop);break;case'block':logicalAction.fold(block,block,noop);break;case'invert':logicalAction.fold(block,br,noop);break;default:logicalAction.fold(br,block,noop);break;}};const handleEnterKeyEvent=(editor,event)=>{if(event.isDefaultPrevented()){return;}event.preventDefault();endTypingLevelIgnoreLocks(editor.undoManager);editor.undoManager.transact(()=>{insert(editor,event);});};const setup$h=editor=>{editor.on('keydown',event=>{if(event.keyCode===VK.ENTER){handleEnterKeyEvent(editor,event);}});};const executeKeydownOverride$2=(editor,caret,evt)=>{const isMac=Env.os.isMacOS()||Env.os.isiOS();execute([{keyCode:VK.END,action:action(moveToLineEndPoint$1,editor,true)},{keyCode:VK.HOME,action:action(moveToLineEndPoint$1,editor,false)},...(!isMac?[{keyCode:VK.HOME,action:action(selectToEndPoint,editor,false),ctrlKey:true,shiftKey:true},{keyCode:VK.END,action:action(selectToEndPoint,editor,true),ctrlKey:true,shiftKey:true}]:[]),{keyCode:VK.END,action:action(moveToLineEndPoint,editor,true)},{keyCode:VK.HOME,action:action(moveToLineEndPoint,editor,false)},{keyCode:VK.END,action:action(moveToLineEndPoint$2,editor,true,caret)},{keyCode:VK.HOME,action:action(moveToLineEndPoint$2,editor,false,caret)}],evt).each(_=>{evt.preventDefault();});};const setup$g=(editor,caret)=>{editor.on('keydown',evt=>{if(!evt.isDefaultPrevented()){executeKeydownOverride$2(editor,caret,evt);}});};const setup$f=editor=>{editor.on('input',e=>{if(!e.isComposing){normalizeNbspsInEditor(editor);}});};const platform=detect$2();const executeKeyupAction=(editor,caret,evt)=>{execute([{keyCode:VK.PAGE_UP,action:action(moveToLineEndPoint$2,editor,false,caret)},{keyCode:VK.PAGE_DOWN,action:action(moveToLineEndPoint$2,editor,true,caret)}],evt);};const stopImmediatePropagation=e=>e.stopImmediatePropagation();const isPageUpDown=evt=>evt.keyCode===VK.PAGE_UP||evt.keyCode===VK.PAGE_DOWN;const setNodeChangeBlocker=(blocked,editor,block)=>{if(block&&!blocked.get()){editor.on('NodeChange',stopImmediatePropagation,true);}else if(!block&&blocked.get()){editor.off('NodeChange',stopImmediatePropagation);}blocked.set(block);};const setup$e=(editor,caret)=>{if(platform.os.isMacOS()){return;}const blocked=Cell(false);editor.on('keydown',evt=>{if(isPageUpDown(evt)){setNodeChangeBlocker(blocked,editor,true);}});editor.on('keyup',evt=>{if(!evt.isDefaultPrevented()){executeKeyupAction(editor,caret,evt);}if(isPageUpDown(evt)&&blocked.get()){setNodeChangeBlocker(blocked,editor,false);editor.nodeChanged();}});};const insertTextAtPosition=(text,pos)=>{const container=pos.container();const offset=pos.offset();if(isText$a(container)){container.insertData(offset,text);return Optional.some(CaretPosition(container,offset+text.length));}else{return getElementFromPosition(pos).map(elm=>{const textNode=SugarElement.fromText(text);if(pos.isAtEnd()){after$4(elm,textNode);}else{before$3(elm,textNode);}return CaretPosition(textNode.dom,text.length);});}};const insertNbspAtPosition=curry(insertTextAtPosition,nbsp);const insertSpaceAtPosition=curry(insertTextAtPosition,' ');const locationToCaretPosition=root=>location=>location.fold(element=>prevPosition(root.dom,CaretPosition.before(element)),element=>firstPositionIn(element),element=>lastPositionIn(element),element=>nextPosition(root.dom,CaretPosition.after(element)));const insertInlineBoundarySpaceOrNbsp=(root,pos)=>checkPos=>needsToHaveNbsp(root,checkPos)?insertNbspAtPosition(pos):insertSpaceAtPosition(pos);const setSelection=editor=>pos=>{editor.selection.setRng(pos.toRange());editor.nodeChanged();return true;};const insertSpaceOrNbspAtSelection=editor=>{const pos=CaretPosition.fromRangeStart(editor.selection.getRng());const root=SugarElement.fromDom(editor.getBody());if(editor.selection.isCollapsed()){const isInlineTarget$1=curry(isInlineTarget,editor);const caretPosition=CaretPosition.fromRangeStart(editor.selection.getRng());return readLocation(isInlineTarget$1,editor.getBody(),caretPosition).bind(locationToCaretPosition(root)).map(checkPos=>()=>insertInlineBoundarySpaceOrNbsp(root,pos)(checkPos).each(setSelection(editor)));}else{return Optional.none();}};const executeKeydownOverride$1=(editor,evt)=>{executeWithDelayedAction([{keyCode:VK.SPACEBAR,action:action(insertSpaceOrNbspAtSelection,editor)}],evt).each(applyAction=>{evt.preventDefault();const event=fireFakeBeforeInputEvent(editor,'insertText',{data:' '});if(!event.isDefaultPrevented()){applyAction();fireFakeInputEvent(editor,'insertText',{data:' '});}});};const setup$d=editor=>{editor.on('keydown',evt=>{if(!evt.isDefaultPrevented()){executeKeydownOverride$1(editor,evt);}});};const tableTabNavigation=editor=>{if(hasTableTabNavigation(editor)){return[{keyCode:VK.TAB,action:action(handleTab,editor,true)},{keyCode:VK.TAB,shiftKey:true,action:action(handleTab,editor,false)}];}else{return[];}};const executeKeydownOverride=(editor,evt)=>{execute([...tableTabNavigation(editor)],evt).each(_=>{evt.preventDefault();});};const setup$c=editor=>{editor.on('keydown',evt=>{if(!evt.isDefaultPrevented()){executeKeydownOverride(editor,evt);}});};const setup$b=editor=>{editor.addShortcut('Meta+P','','mcePrint');setup$j(editor);if(isRtc(editor)){return Cell(null);}else{const caret=setupSelectedState(editor);setup$l(editor);setup$k(editor,caret);setup$i(editor,caret);setup$h(editor);setup$d(editor);setup$f(editor);setup$c(editor);setup$g(editor,caret);setup$e(editor,caret);return caret;}};class NodeChange{constructor(editor){this.lastPath=[];this.editor=editor;let lastRng;const self=this;if(!('onselectionchange'in editor.getDoc())){editor.on('NodeChange click mouseup keyup focus',e=>{const nativeRng=editor.selection.getRng();const fakeRng={startContainer:nativeRng.startContainer,startOffset:nativeRng.startOffset,endContainer:nativeRng.endContainer,endOffset:nativeRng.endOffset};if(e.type==='nodechange'||!isEq$4(fakeRng,lastRng)){editor.dispatch('SelectionChange');}lastRng=fakeRng;});}editor.on('contextmenu',()=>{editor.dispatch('SelectionChange');});editor.on('SelectionChange',()=>{const startElm=editor.selection.getStart(true);if(!startElm){return;}if(hasAnyRanges(editor)&&!self.isSameElementPath(startElm)&&editor.dom.isChildOf(startElm,editor.getBody())){editor.nodeChanged({selectionChange:true});}});editor.on('mouseup',e=>{if(!e.isDefaultPrevented()&&hasAnyRanges(editor)){if(editor.selection.getNode().nodeName==='IMG'){Delay.setEditorTimeout(editor,()=>{editor.nodeChanged();});}else{editor.nodeChanged();}}});}nodeChanged(args={}){const selection=this.editor.selection;let node;if(this.editor.initialized&&selection&&!shouldDisableNodeChange(this.editor)&&!this.editor.mode.isReadOnly()){const root=this.editor.getBody();node=selection.getStart(true)||root;if(node.ownerDocument!==this.editor.getDoc()||!this.editor.dom.isChildOf(node,root)){node=root;}const parents=[];this.editor.dom.getParent(node,node=>{if(node===root){return true;}else{parents.push(node);return false;}});this.editor.dispatch('NodeChange',{...args,element:node,parents});}}isSameElementPath(startElm){let i;const editor=this.editor;const currentPath=reverse(editor.dom.getParents(startElm,always,editor.getBody()));if(currentPath.length===this.lastPath.length){for(i=currentPath.length;i>=0;i--){if(currentPath[i]!==this.lastPath[i]){break;}}if(i===-1){this.lastPath=currentPath;return true;}}this.lastPath=currentPath;return false;}}const internalMimeType='x-tinymce/html';const internalHtmlMime=constant(internalMimeType);const internalMark='<!-- '+internalMimeType+' -->';const mark=html=>internalMark+html;const unmark=html=>html.replace(internalMark,'');const isMarked=html=>html.indexOf(internalMark)!==-1;const isPlainText=text=>{return!/<(?:\\/?(?!(?:div|p|br|span)>)\\w+|(?:(?!(?:span style=\"white-space:\\s?pre;?\">)|br\\s?\\/>))\\w+\\s[^>]+)>/i.test(text);};const openContainer=(rootTag,rootAttrs)=>{let tag='<'+rootTag;const attrs=mapToArray(rootAttrs,(value,key)=>key+'=\"'+Entities.encodeAllRaw(value)+'\"');if(attrs.length){tag+=' '+attrs.join(' ');}return tag+'>';};const toBlockElements=(text,rootTag,rootAttrs)=>{const blocks=text.split(/\\n\\n/);const tagOpen=openContainer(rootTag,rootAttrs);const tagClose='</'+rootTag+'>';const paragraphs=map$3(blocks,p=>{return p.split(/\\n/).join('<br />');});const stitch=p=>{return tagOpen+p+tagClose;};return paragraphs.length===1?paragraphs[0]:map$3(paragraphs,stitch).join('');};const pasteBinDefaultContent='%MCEPASTEBIN%';const create$6=(editor,lastRngCell)=>{const{dom,selection}=editor;const body=editor.getBody();lastRngCell.set(selection.getRng());const pasteBinElm=dom.add(editor.getBody(),'div',{'id':'mcepastebin','class':'mce-pastebin','contentEditable':true,'data-mce-bogus':'all','style':'position: fixed; top: 50%; width: 10px; height: 10px; overflow: hidden; opacity: 0'},pasteBinDefaultContent);if(Env.browser.isFirefox()){dom.setStyle(pasteBinElm,'left',dom.getStyle(body,'direction',true)==='rtl'?65535:-65535);}dom.bind(pasteBinElm,'beforedeactivate focusin focusout',e=>{e.stopPropagation();});pasteBinElm.focus();selection.select(pasteBinElm,true);};const remove=(editor,lastRngCell)=>{const dom=editor.dom;if(getEl(editor)){let pasteBinClone;const lastRng=lastRngCell.get();while(pasteBinClone=getEl(editor)){dom.remove(pasteBinClone);dom.unbind(pasteBinClone);}if(lastRng){editor.selection.setRng(lastRng);}}lastRngCell.set(null);};const getEl=editor=>editor.dom.get('mcepastebin');const isPasteBin=elm=>isNonNullable(elm)&&elm.id==='mcepastebin';const getHtml=editor=>{const dom=editor.dom;const copyAndRemove=(toElm,fromElm)=>{toElm.appendChild(fromElm);dom.remove(fromElm,true);};const[pasteBinElm,...pasteBinClones]=filter$5(editor.getBody().childNodes,isPasteBin);each$e(pasteBinClones,pasteBinClone=>{copyAndRemove(pasteBinElm,pasteBinClone);});const dirtyWrappers=dom.select('div[id=mcepastebin]',pasteBinElm);for(let i=dirtyWrappers.length-1;i>=0;i--){const cleanWrapper=dom.create('div');pasteBinElm.insertBefore(cleanWrapper,dirtyWrappers[i]);copyAndRemove(cleanWrapper,dirtyWrappers[i]);}return pasteBinElm?pasteBinElm.innerHTML:'';};const isDefaultPasteBinContent=content=>content===pasteBinDefaultContent;const PasteBin=editor=>{const lastRng=Cell(null);return{create:()=>create$6(editor,lastRng),remove:()=>remove(editor,lastRng),getEl:()=>getEl(editor),getHtml:()=>getHtml(editor),getLastRng:lastRng.get};};const filter=(content,items)=>{Tools.each(items,v=>{if(is$4(v,RegExp)){content=content.replace(v,'');}else{content=content.replace(v[0],v[1]);}});return content;};const innerText=html=>{const schema=Schema();const domParser=DomParser({},schema);let text='';const voidElements=schema.getVoidElements();const ignoreElements=Tools.makeMap('script noscript style textarea video audio iframe object',' ');const blockElements=schema.getBlockElements();const walk=node=>{const name=node.name,currentNode=node;if(name==='br'){text+='\\n';return;}if(name==='wbr'){return;}if(voidElements[name]){text+=' ';}if(ignoreElements[name]){text+=' ';return;}if(node.type===3){text+=node.value;}if(!(node.name in schema.getVoidElements())){let currentNode=node.firstChild;if(currentNode){do{walk(currentNode);}while(currentNode=currentNode.next);}}if(blockElements[name]&&currentNode.next){text+='\\n';if(name==='p'){text+='\\n';}}};html=filter(html,[/<!\\[[^\\]]+\\]>/g]);walk(domParser.parse(html));return text;};const trimHtml=html=>{const trimSpaces=(all,s1,s2)=>{if(!s1&&!s2){return' ';}return nbsp;};html=filter(html,[/^[\\s\\S]*<body[^>]*>\\s*|\\s*<\\/body[^>]*>[\\s\\S]*$/ig,/<!--StartFragment-->|<!--EndFragment-->/g,[/( ?)<span class=\"Apple-converted-space\">\\u00a0<\\/span>( ?)/g,trimSpaces],/<br class=\"Apple-interchange-newline\">/g,/<br>$/i]);return html;};const createIdGenerator=prefix=>{let count=0;return()=>{return prefix+count++;};};const getImageMimeType=ext=>{const lowerExt=ext.toLowerCase();const mimeOverrides={jpg:'jpeg',jpe:'jpeg',jfi:'jpeg',jif:'jpeg',jfif:'jpeg',pjpeg:'jpeg',pjp:'jpeg',svg:'svg+xml'};return Tools.hasOwn(mimeOverrides,lowerExt)?'image/'+mimeOverrides[lowerExt]:'image/'+lowerExt;};const preProcess=(editor,html)=>{const parser=DomParser({},editor.schema);parser.addNodeFilter('meta',nodes=>{Tools.each(nodes,node=>{node.remove();});});const fragment=parser.parse(html,{forced_root_block:false,isRootContent:true});return HtmlSerializer({validate:true},editor.schema).serialize(fragment);};const processResult=(content,cancelled)=>({content,cancelled});const postProcessFilter=(editor,html,internal)=>{const tempBody=editor.dom.create('div',{style:'display:none'},html);const postProcessArgs=firePastePostProcess(editor,tempBody,internal);return processResult(postProcessArgs.node.innerHTML,postProcessArgs.isDefaultPrevented());};const filterContent=(editor,content,internal)=>{const preProcessArgs=firePastePreProcess(editor,content,internal);const filteredContent=preProcess(editor,preProcessArgs.content);if(editor.hasEventListeners('PastePostProcess')&&!preProcessArgs.isDefaultPrevented()){return postProcessFilter(editor,filteredContent,internal);}else{return processResult(filteredContent,preProcessArgs.isDefaultPrevented());}};const process=(editor,html,internal)=>{return filterContent(editor,html,internal);};const pasteHtml$1=(editor,html)=>{editor.insertContent(html,{merge:shouldPasteMergeFormats(editor),paste:true});return true;};const isAbsoluteUrl=url=>/^https?:\\/\\/[\\w\\-\\/+=.,!;:&%@^~(){}?#]+$/i.test(url);const isImageUrl=(editor,url)=>{return isAbsoluteUrl(url)&&exists(getAllowedImageFileTypes(editor),type=>endsWith(url.toLowerCase(),`.${type.toLowerCase()}`));};const createImage=(editor,url,pasteHtmlFn)=>{editor.undoManager.extra(()=>{pasteHtmlFn(editor,url);},()=>{editor.insertContent('<img src=\"'+url+'\">');});return true;};const createLink=(editor,url,pasteHtmlFn)=>{editor.undoManager.extra(()=>{pasteHtmlFn(editor,url);},()=>{editor.execCommand('mceInsertLink',false,url);});return true;};const linkSelection=(editor,html,pasteHtmlFn)=>!editor.selection.isCollapsed()&&isAbsoluteUrl(html)?createLink(editor,html,pasteHtmlFn):false;const insertImage=(editor,html,pasteHtmlFn)=>isImageUrl(editor,html)?createImage(editor,html,pasteHtmlFn):false;const smartInsertContent=(editor,html)=>{Tools.each([linkSelection,insertImage,pasteHtml$1],action=>{return!action(editor,html,pasteHtml$1);});};const insertContent=(editor,html,pasteAsText)=>{if(pasteAsText||!isSmartPasteEnabled(editor)){pasteHtml$1(editor,html);}else{smartInsertContent(editor,html);}};const uniqueId=createIdGenerator('mceclip');const doPaste=(editor,content,internal,pasteAsText)=>{const args=process(editor,content,internal);if(!args.cancelled){insertContent(editor,args.content,pasteAsText);}};const pasteHtml=(editor,html,internalFlag)=>{const internal=internalFlag?internalFlag:isMarked(html);doPaste(editor,unmark(html),internal,false);};const pasteText=(editor,text)=>{const encodedText=editor.dom.encode(text).replace(/\\r\\n/g,'\\n');const normalizedText=normalize$4(encodedText,getPasteTabSpaces(editor));const html=toBlockElements(normalizedText,getForcedRootBlock(editor),getForcedRootBlockAttrs(editor));doPaste(editor,html,false,true);};const getDataTransferItems=dataTransfer=>{const items={};if(dataTransfer&&dataTransfer.types){for(let i=0;i<dataTransfer.types.length;i++){const contentType=dataTransfer.types[i];try{items[contentType]=dataTransfer.getData(contentType);}catch(ex){items[contentType]='';}}}return items;};const hasContentType=(clipboardContent,mimeType)=>mimeType in clipboardContent&&clipboardContent[mimeType].length>0;const hasHtmlOrText=content=>hasContentType(content,'text/html')||hasContentType(content,'text/plain');const extractFilename=(editor,str)=>{const m=str.match(/([\\s\\S]+?)(?:\\.[a-z0-9.]+)$/i);return isNonNullable(m)?editor.dom.encode(m[1]):undefined;};const createBlobInfo=(editor,blobCache,file,base64)=>{const id=uniqueId();const useFileName=shouldReuseFileName(editor)&&isNonNullable(file.name);const name=useFileName?extractFilename(editor,file.name):id;const filename=useFileName?file.name:undefined;const blobInfo=blobCache.create(id,file,base64,name,filename);blobCache.add(blobInfo);return blobInfo;};const pasteImage=(editor,imageItem)=>{parseDataUri(imageItem.uri).each(({data,type,base64Encoded})=>{const base64=base64Encoded?data:btoa(data);const file=imageItem.file;const blobCache=editor.editorUpload.blobCache;const existingBlobInfo=blobCache.getByData(base64,type);const blobInfo=existingBlobInfo!==null&&existingBlobInfo!==void 0?existingBlobInfo:createBlobInfo(editor,blobCache,file,base64);pasteHtml(editor,`<img src=\"${blobInfo.blobUri()}\">`,false);});};const isClipboardEvent=event=>event.type==='paste';const readFilesAsDataUris=items=>Promise.all(map$3(items,file=>{return blobToDataUri(file).then(uri=>({file,uri}));}));const isImage=editor=>{const allowedExtensions=getAllowedImageFileTypes(editor);return file=>startsWith(file.type,'image/')&&exists(allowedExtensions,extension=>{return getImageMimeType(extension)===file.type;});};const getImagesFromDataTransfer=(editor,dataTransfer)=>{const items=dataTransfer.items?bind$3(from(dataTransfer.items),item=>{return item.kind==='file'?[item.getAsFile()]:[];}):[];const files=dataTransfer.files?from(dataTransfer.files):[];return filter$5(items.length>0?items:files,isImage(editor));};const pasteImageData=(editor,e,rng)=>{const dataTransfer=isClipboardEvent(e)?e.clipboardData:e.dataTransfer;if(shouldPasteDataImages(editor)&&dataTransfer){const images=getImagesFromDataTransfer(editor,dataTransfer);if(images.length>0){e.preventDefault();readFilesAsDataUris(images).then(fileResults=>{if(rng){editor.selection.setRng(rng);}each$e(fileResults,result=>{pasteImage(editor,result);});});return true;}}return false;};const isBrokenAndroidClipboardEvent=e=>{var _a,_b;return Env.os.isAndroid()&&((_b=(_a=e.clipboardData)===null||_a===void 0?void 0:_a.items)===null||_b===void 0?void 0:_b.length)===0;};const isKeyboardPasteEvent=e=>VK.metaKeyPressed(e)&&e.keyCode===86||e.shiftKey&&e.keyCode===45;const insertClipboardContent=(editor,clipboardContent,html,plainTextMode)=>{let content=trimHtml(html);const isInternal=hasContentType(clipboardContent,internalHtmlMime())||isMarked(html);const isPlainTextHtml=!isInternal&&isPlainText(content);const isAbsoluteUrl$1=isAbsoluteUrl(content);if(isDefaultPasteBinContent(content)||!content.length||isPlainTextHtml&&!isAbsoluteUrl$1){plainTextMode=true;}if(plainTextMode||isAbsoluteUrl$1){if(hasContentType(clipboardContent,'text/plain')&&isPlainTextHtml){content=clipboardContent['text/plain'];}else{content=innerText(content);}}if(isDefaultPasteBinContent(content)){return;}if(plainTextMode){pasteText(editor,content);}else{pasteHtml(editor,content,isInternal);}};const registerEventHandlers=(editor,pasteBin,pasteFormat)=>{let keyboardPastePlainTextState;const getLastRng=()=>pasteBin.getLastRng()||editor.selection.getRng();editor.on('keydown',e=>{if(isKeyboardPasteEvent(e)&&!e.isDefaultPrevented()){keyboardPastePlainTextState=e.shiftKey&&e.keyCode===86;}});editor.on('paste',e=>{if(e.isDefaultPrevented()||isBrokenAndroidClipboardEvent(e)){return;}const plainTextMode=pasteFormat.get()==='text'||keyboardPastePlainTextState;keyboardPastePlainTextState=false;const clipboardContent=getDataTransferItems(e.clipboardData);if(!hasHtmlOrText(clipboardContent)&&pasteImageData(editor,e,getLastRng())){return;}if(hasContentType(clipboardContent,'text/html')){e.preventDefault();insertClipboardContent(editor,clipboardContent,clipboardContent['text/html'],plainTextMode);}else{pasteBin.create();Delay.setEditorTimeout(editor,()=>{const html=pasteBin.getHtml();pasteBin.remove();insertClipboardContent(editor,clipboardContent,html,plainTextMode);},0);}});};const registerDataImageFilter=editor=>{const isWebKitFakeUrl=src=>startsWith(src,'webkit-fake-url');const isDataUri=src=>startsWith(src,'data:');const isPasteInsert=args=>{var _a;return((_a=args.data)===null||_a===void 0?void 0:_a.paste)===true;};editor.parser.addNodeFilter('img',(nodes,name,args)=>{if(!shouldPasteDataImages(editor)&&isPasteInsert(args)){for(const node of nodes){const src=node.attr('src');if(isString(src)&&!node.attr('data-mce-object')&&src!==Env.transparentSrc){if(isWebKitFakeUrl(src)){node.remove();}else if(!shouldAllowHtmlDataUrls(editor)&&isDataUri(src)){node.remove();}}}}});};const registerEventsAndFilters=(editor,pasteBin,pasteFormat)=>{registerEventHandlers(editor,pasteBin,pasteFormat);registerDataImageFilter(editor);};const togglePlainTextPaste=(editor,pasteFormat)=>{if(pasteFormat.get()==='text'){pasteFormat.set('html');firePastePlainTextToggle(editor,false);}else{pasteFormat.set('text');firePastePlainTextToggle(editor,true);}editor.focus();};const register$1=(editor,pasteFormat)=>{editor.addCommand('mceTogglePlainTextPaste',()=>{togglePlainTextPaste(editor,pasteFormat);});editor.addCommand('mceInsertClipboardContent',(ui,value)=>{if(value.html){pasteHtml(editor,value.html,value.internal);}if(value.text){pasteText(editor,value.text);}});};const setHtml5Clipboard=(clipboardData,html,text)=>{if(clipboardData){try{clipboardData.clearData();clipboardData.setData('text/html',html);clipboardData.setData('text/plain',text);clipboardData.setData(internalHtmlMime(),html);return true;}catch(e){return false;}}else{return false;}};const setClipboardData=(evt,data,fallback,done)=>{if(setHtml5Clipboard(evt.clipboardData,data.html,data.text)){evt.preventDefault();done();}else{fallback(data.html,done);}};const fallback=editor=>(html,done)=>{const{dom,selection}=editor;const outer=dom.create('div',{'contenteditable':'false','data-mce-bogus':'all'});const inner=dom.create('div',{contenteditable:'true'},html);dom.setStyles(outer,{position:'fixed',top:'0',left:'-3000px',width:'1000px',overflow:'hidden'});outer.appendChild(inner);dom.add(editor.getBody(),outer);const range=selection.getRng();inner.focus();const offscreenRange=dom.createRng();offscreenRange.selectNodeContents(inner);selection.setRng(offscreenRange);Delay.setEditorTimeout(editor,()=>{selection.setRng(range);dom.remove(outer);done();},0);};const getData=editor=>({html:mark(editor.selection.getContent({contextual:true})),text:editor.selection.getContent({format:'text'})});const isTableSelection=editor=>!!editor.dom.getParent(editor.selection.getStart(),'td[data-mce-selected],th[data-mce-selected]',editor.getBody());const hasSelectedContent=editor=>!editor.selection.isCollapsed()||isTableSelection(editor);const cut=editor=>evt=>{if(!evt.isDefaultPrevented()&&hasSelectedContent(editor)){setClipboardData(evt,getData(editor),fallback(editor),()=>{if(Env.browser.isChromium()||Env.browser.isFirefox()){const rng=editor.selection.getRng();Delay.setEditorTimeout(editor,()=>{editor.selection.setRng(rng);editor.execCommand('Delete');},0);}else{editor.execCommand('Delete');}});}};const copy=editor=>evt=>{if(!evt.isDefaultPrevented()&&hasSelectedContent(editor)){setClipboardData(evt,getData(editor),fallback(editor),noop);}};const register=editor=>{editor.on('cut',cut(editor));editor.on('copy',copy(editor));};const getCaretRangeFromEvent=(editor,e)=>{var _a,_b;return RangeUtils.getCaretRangeFromPoint((_a=e.clientX)!==null&&_a!==void 0?_a:0,(_b=e.clientY)!==null&&_b!==void 0?_b:0,editor.getDoc());};const isPlainTextFileUrl=content=>{const plainTextContent=content['text/plain'];return plainTextContent?plainTextContent.indexOf('file://')===0:false;};const setFocusedRange=(editor,rng)=>{editor.focus();if(rng){editor.selection.setRng(rng);}};const hasImage=dataTransfer=>exists(dataTransfer.files,file=>/^image\\//.test(file.type));const setup$a=(editor,draggingInternallyState)=>{if(shouldPasteBlockDrop(editor)){editor.on('dragend dragover draggesture dragdrop drop drag',e=>{e.preventDefault();e.stopPropagation();});}if(!shouldPasteDataImages(editor)){editor.on('drop',e=>{const dataTransfer=e.dataTransfer;if(dataTransfer&&hasImage(dataTransfer)){e.preventDefault();}});}editor.on('drop',e=>{if(e.isDefaultPrevented()||draggingInternallyState.get()){return;}const rng=getCaretRangeFromEvent(editor,e);if(isNullable(rng)){return;}const dropContent=getDataTransferItems(e.dataTransfer);const internal=hasContentType(dropContent,internalHtmlMime());if((!hasHtmlOrText(dropContent)||isPlainTextFileUrl(dropContent))&&pasteImageData(editor,e,rng)){return;}const internalContent=dropContent[internalHtmlMime()];const content=internalContent||dropContent['text/html']||dropContent['text/plain'];if(content){e.preventDefault();Delay.setEditorTimeout(editor,()=>{editor.undoManager.transact(()=>{if(internalContent){editor.execCommand('Delete');}setFocusedRange(editor,rng);const trimmedContent=trimHtml(content);if(dropContent['text/html']){pasteHtml(editor,trimmedContent,internal);}else{pasteText(editor,trimmedContent);}});});}});editor.on('dragstart',_e=>{draggingInternallyState.set(true);});editor.on('dragover dragend',e=>{if(shouldPasteDataImages(editor)&&!draggingInternallyState.get()){e.preventDefault();setFocusedRange(editor,getCaretRangeFromEvent(editor,e));}if(e.type==='dragend'){draggingInternallyState.set(false);}});};const setup$9=editor=>{const processEvent=f=>e=>{f(editor,e);};const preProcess=getPastePreProcess(editor);if(isFunction(preProcess)){editor.on('PastePreProcess',processEvent(preProcess));}const postProcess=getPastePostProcess(editor);if(isFunction(postProcess)){editor.on('PastePostProcess',processEvent(postProcess));}};const addPreProcessFilter=(editor,filterFunc)=>{editor.on('PastePreProcess',e=>{e.content=filterFunc(editor,e.content,e.internal);});};const rgbRegExp=/rgb\\s*\\(\\s*([0-9]+)\\s*,\\s*([0-9]+)\\s*,\\s*([0-9]+)\\s*\\)/gi;const rgbToHex=value=>Tools.trim(value).replace(rgbRegExp,rgbaToHexString).toLowerCase();const removeWebKitStyles=(editor,content,internal)=>{const webKitStylesOption=getPasteWebkitStyles(editor);if(internal||webKitStylesOption==='all'||!shouldPasteRemoveWebKitStyles(editor)){return content;}const webKitStyles=webKitStylesOption?webKitStylesOption.split(/[, ]/):[];if(webKitStyles&&webKitStylesOption!=='none'){const dom=editor.dom,node=editor.selection.getNode();content=content.replace(/(<[^>]+) style=\"([^\"]*)\"([^>]*>)/gi,(all,before,value,after)=>{const inputStyles=dom.parseStyle(dom.decode(value));const outputStyles={};for(let i=0;i<webKitStyles.length;i++){const inputValue=inputStyles[webKitStyles[i]];let compareInput=inputValue;let currentValue=dom.getStyle(node,webKitStyles[i],true);if(/color/.test(webKitStyles[i])){compareInput=rgbToHex(compareInput);currentValue=rgbToHex(currentValue);}if(currentValue!==compareInput){outputStyles[webKitStyles[i]]=inputValue;}}const outputStyle=dom.serializeStyle(outputStyles,'span');if(outputStyle){return before+' style=\"'+outputStyle+'\"'+after;}return before+after;});}else{content=content.replace(/(<[^>]+) style=\"([^\"]*)\"([^>]*>)/gi,'$1$3');}content=content.replace(/(<[^>]+) data-mce-style=\"([^\"]+)\"([^>]*>)/gi,(all,before,value,after)=>{return before+' style=\"'+value+'\"'+after;});return content;};const setup$8=editor=>{if(Env.browser.isChromium()||Env.browser.isSafari()){addPreProcessFilter(editor,removeWebKitStyles);}};const setup$7=editor=>{const draggingInternallyState=Cell(false);const pasteFormat=Cell(isPasteAsTextEnabled(editor)?'text':'html');const pasteBin=PasteBin(editor);setup$8(editor);register$1(editor,pasteFormat);setup$9(editor);editor.on('PreInit',()=>{register(editor);setup$a(editor,draggingInternallyState);registerEventsAndFilters(editor,pasteBin,pasteFormat);});};const preventSummaryToggle=editor=>{editor.on('click',e=>{if(editor.dom.getParent(e.target,'details')){e.preventDefault();}});};const filterDetails=editor=>{editor.parser.addNodeFilter('details',elms=>{each$e(elms,details=>{details.attr('data-mce-open',details.attr('open'));details.attr('open','open');});});editor.serializer.addNodeFilter('details',elms=>{each$e(elms,details=>{const open=details.attr('data-mce-open');details.attr('open',isString(open)?open:null);details.attr('data-mce-open',null);});});};const setup$6=editor=>{preventSummaryToggle(editor);filterDetails(editor);};const isBr=isBr$6;const isText=isText$a;const isContentEditableFalse$2=elm=>isContentEditableFalse$a(elm.dom);const isContentEditableTrue=elm=>isContentEditableTrue$3(elm.dom);const isRoot=rootNode=>elm=>eq(SugarElement.fromDom(rootNode),elm);const getClosestScope=(node,rootNode)=>closest$4(SugarElement.fromDom(node),elm=>isContentEditableTrue(elm)||isBlock$2(elm),isRoot(rootNode)).getOr(SugarElement.fromDom(rootNode)).dom;const getClosestCef=(node,rootNode)=>closest$4(SugarElement.fromDom(node),isContentEditableFalse$2,isRoot(rootNode));const findEdgeCaretCandidate=(startNode,scope,forward)=>{const walker=new DomTreeWalker(startNode,scope);const next=forward?walker.next.bind(walker):walker.prev.bind(walker);let result=startNode;for(let current=forward?startNode:next();current&&!isBr(current);current=next()){if(isCaretCandidate$3(current)){result=current;}}return result;};const findClosestBlockRange=(startRng,rootNode)=>{const startPos=CaretPosition.fromRangeStart(startRng);const clickNode=startPos.getNode();const scope=getClosestScope(clickNode,rootNode);const startNode=findEdgeCaretCandidate(clickNode,scope,false);const endNode=findEdgeCaretCandidate(clickNode,scope,true);const rng=document.createRange();getClosestCef(startNode,scope).fold(()=>{if(isText(startNode)){rng.setStart(startNode,0);}else{rng.setStartBefore(startNode);}},cef=>rng.setStartBefore(cef.dom));getClosestCef(endNode,scope).fold(()=>{if(isText(endNode)){rng.setEnd(endNode,endNode.data.length);}else{rng.setEndAfter(endNode);}},cef=>rng.setEndAfter(cef.dom));return rng;};const onTripleClickSelect=editor=>{const rng=findClosestBlockRange(editor.selection.getRng(),editor.getBody());editor.selection.setRng(normalize(rng));};const setup$5=editor=>{editor.on('mousedown',e=>{if(e.detail>=3){e.preventDefault();onTripleClickSelect(editor);}});};var FakeCaretPosition;(function(FakeCaretPosition){FakeCaretPosition['Before']='before';FakeCaretPosition['After']='after';})(FakeCaretPosition||(FakeCaretPosition={}));const distanceToRectLeft=(clientRect,clientX)=>Math.abs(clientRect.left-clientX);const distanceToRectRight=(clientRect,clientX)=>Math.abs(clientRect.right-clientX);const isInsideY=(clientY,clientRect)=>clientY>=clientRect.top&&clientY<=clientRect.bottom;const collidesY=(r1,r2)=>r1.top<r2.bottom&&r1.bottom>r2.top;const isOverlapping=(r1,r2)=>{const overlap=overlapY(r1,r2)/Math.min(r1.height,r2.height);return collidesY(r1,r2)&&overlap>0.5;};const splitRectsPerAxis=(rects,y)=>{const intersectingRects=filter$5(rects,rect=>isInsideY(y,rect));return boundingClientRectFromRects(intersectingRects).fold(()=>[[],rects],boundingRect=>{const{pass:horizontal,fail:vertical}=partition$2(rects,rect=>isOverlapping(rect,boundingRect));return[horizontal,vertical];});};const clientInfo=(rect,clientX)=>{return{node:rect.node,position:distanceToRectLeft(rect,clientX)<distanceToRectRight(rect,clientX)?FakeCaretPosition.Before:FakeCaretPosition.After};};const horizontalDistance=(rect,x,_y)=>x>rect.left&&x<rect.right?0:Math.min(Math.abs(rect.left-x),Math.abs(rect.right-x));const closestChildCaretCandidateNodeRect=(children,clientX,clientY)=>{const caretCandidateRect=rect=>{if(isCaretCandidate$3(rect.node)){return Optional.some(rect);}else if(isElement$6(rect.node)){return closestChildCaretCandidateNodeRect(from(rect.node.childNodes),clientX,clientY);}else{return Optional.none();}};const getClosestTextNode=(rects,distance)=>{if(rects.length>=2){const r1=caretCandidateRect(rects[0]).getOr(rects[0]);const r2=caretCandidateRect(rects[1]).getOr(rects[1]);const deltaDistance=Math.abs(distance(r1,clientX,clientY)-distance(r2,clientX,clientY));if(deltaDistance<2){if(isText$a(r1.node)){return Optional.some(r1);}else if(isText$a(r2.node)){return Optional.some(r2);}}}return Optional.none();};const findClosestCaretCandidateNodeRect=(rects,distance)=>{const sortedRects=sort(rects,(r1,r2)=>distance(r1,clientX,clientY)-distance(r2,clientX,clientY));return getClosestTextNode(sortedRects,distance).orThunk(()=>findMap(sortedRects,caretCandidateRect));};const[horizontalRects,verticalRects]=splitRectsPerAxis(getClientRects(children),clientY);const{pass:above,fail:below}=partition$2(verticalRects,rect=>rect.top<clientY);return findClosestCaretCandidateNodeRect(horizontalRects,horizontalDistance).orThunk(()=>findClosestCaretCandidateNodeRect(below,distanceToRectEdgeFromXY)).orThunk(()=>findClosestCaretCandidateNodeRect(above,distanceToRectEdgeFromXY));};const traverseUp=(rootElm,scope,clientX,clientY)=>{const helper=(scope,prevScope)=>{return prevScope.fold(()=>closestChildCaretCandidateNodeRect(from(scope.dom.childNodes),clientX,clientY),prevScope=>{const uncheckedChildren=filter$5(from(scope.dom.childNodes),node=>node!==prevScope.dom);return closestChildCaretCandidateNodeRect(uncheckedChildren,clientX,clientY);}).orThunk(()=>{const parent=eq(scope,rootElm)?Optional.none():parentElement(scope);return parent.bind(newScope=>helper(newScope,Optional.some(scope)));});};return helper(scope,Optional.none());};const closestCaretCandidateNodeRect=(root,clientX,clientY)=>{const rootElm=SugarElement.fromDom(root);const ownerDoc=documentOrOwner(rootElm);const elementAtPoint=SugarElement.fromPoint(ownerDoc,clientX,clientY).filter(elm=>contains(rootElm,elm));const element=elementAtPoint.getOr(rootElm);return traverseUp(rootElm,element,clientX,clientY);};const closestFakeCaretCandidate=(root,clientX,clientY)=>closestCaretCandidateNodeRect(root,clientX,clientY).filter(rect=>isFakeCaretTarget(rect.node)).map(rect=>clientInfo(rect,clientX));const getAbsolutePosition=elm=>{var _a,_b;const clientRect=elm.getBoundingClientRect();const doc=elm.ownerDocument;const docElem=doc.documentElement;const win=doc.defaultView;return{top:clientRect.top+((_a=win===null||win===void 0?void 0:win.scrollY)!==null&&_a!==void 0?_a:0)-docElem.clientTop,left:clientRect.left+((_b=win===null||win===void 0?void 0:win.scrollX)!==null&&_b!==void 0?_b:0)-docElem.clientLeft};};const getBodyPosition=editor=>editor.inline?getAbsolutePosition(editor.getBody()):{left:0,top:0};const getScrollPosition=editor=>{const body=editor.getBody();return editor.inline?{left:body.scrollLeft,top:body.scrollTop}:{left:0,top:0};};const getBodyScroll=editor=>{const body=editor.getBody(),docElm=editor.getDoc().documentElement;const inlineScroll={left:body.scrollLeft,top:body.scrollTop};const iframeScroll={left:body.scrollLeft||docElm.scrollLeft,top:body.scrollTop||docElm.scrollTop};return editor.inline?inlineScroll:iframeScroll;};const getMousePosition=(editor,event)=>{if(event.target.ownerDocument!==editor.getDoc()){const iframePosition=getAbsolutePosition(editor.getContentAreaContainer());const scrollPosition=getBodyScroll(editor);return{left:event.pageX-iframePosition.left+scrollPosition.left,top:event.pageY-iframePosition.top+scrollPosition.top};}return{left:event.pageX,top:event.pageY};};const calculatePosition=(bodyPosition,scrollPosition,mousePosition)=>({pageX:mousePosition.left-bodyPosition.left+scrollPosition.left,pageY:mousePosition.top-bodyPosition.top+scrollPosition.top});const calc=(editor,event)=>calculatePosition(getBodyPosition(editor),getScrollPosition(editor),getMousePosition(editor,event));const scrollPixelsPerInterval=32;const scrollIntervalValue=100;const mouseRangeToTriggerScrollInsideEditor=8;const mouseRangeToTriggerScrollOutsideEditor=16;const isContentEditableFalse$1=isContentEditableFalse$a;const isContentEditable=or(isContentEditableFalse$1,isContentEditableTrue$3);const isDraggable=(rootElm,elm)=>isContentEditableFalse$1(elm)&&elm!==rootElm;const isValidDropTarget=(editor,targetElement,dragElement)=>{if(isNullable(targetElement)){return false;}else if(targetElement===dragElement||editor.dom.isChildOf(targetElement,dragElement)){return false;}else{return!isContentEditableFalse$1(targetElement);}};const cloneElement=elm=>{const cloneElm=elm.cloneNode(true);cloneElm.removeAttribute('data-mce-selected');return cloneElm;};const createGhost=(editor,elm,width,height)=>{const dom=editor.dom;const clonedElm=elm.cloneNode(true);dom.setStyles(clonedElm,{width,height});dom.setAttrib(clonedElm,'data-mce-selected',null);const ghostElm=dom.create('div',{'class':'mce-drag-container','data-mce-bogus':'all','unselectable':'on','contenteditable':'false'});dom.setStyles(ghostElm,{position:'absolute',opacity:0.5,overflow:'hidden',border:0,padding:0,margin:0,width,height});dom.setStyles(clonedElm,{margin:0,boxSizing:'border-box'});ghostElm.appendChild(clonedElm);return ghostElm;};const appendGhostToBody=(ghostElm,bodyElm)=>{if(ghostElm.parentNode!==bodyElm){bodyElm.appendChild(ghostElm);}};const scrollEditor=(direction,amount)=>win=>()=>{const current=direction==='left'?win.scrollX:win.scrollY;win.scroll({[direction]:current+amount,behavior:'smooth'});};const scrollLeft=scrollEditor('left',-scrollPixelsPerInterval);const scrollRight=scrollEditor('left',scrollPixelsPerInterval);const scrollUp=scrollEditor('top',-scrollPixelsPerInterval);const scrollDown=scrollEditor('top',scrollPixelsPerInterval);const moveGhost=(ghostElm,position,width,height,maxX,maxY,mouseY,mouseX,contentAreaContainer,win,state)=>{let overflowX=0,overflowY=0;ghostElm.style.left=position.pageX+'px';ghostElm.style.top=position.pageY+'px';if(position.pageX+width>maxX){overflowX=position.pageX+width-maxX;}if(position.pageY+height>maxY){overflowY=position.pageY+height-maxY;}ghostElm.style.width=width-overflowX+'px';ghostElm.style.height=height-overflowY+'px';const clientHeight=contentAreaContainer.clientHeight;const clientWidth=contentAreaContainer.clientWidth;const outerMouseY=mouseY+contentAreaContainer.getBoundingClientRect().top;const outerMouseX=mouseX+contentAreaContainer.getBoundingClientRect().left;state.on(state=>{state.intervalId.clear();if(state.dragging){if(mouseY+mouseRangeToTriggerScrollInsideEditor>=clientHeight){state.intervalId.set(scrollDown(win));}else if(mouseY-mouseRangeToTriggerScrollInsideEditor<=0){state.intervalId.set(scrollUp(win));}else if(mouseX+mouseRangeToTriggerScrollInsideEditor>=clientWidth){state.intervalId.set(scrollRight(win));}else if(mouseX-mouseRangeToTriggerScrollInsideEditor<=0){state.intervalId.set(scrollLeft(win));}else if(outerMouseY+mouseRangeToTriggerScrollOutsideEditor>=window.innerHeight){state.intervalId.set(scrollDown(window));}else if(outerMouseY-mouseRangeToTriggerScrollOutsideEditor<=0){state.intervalId.set(scrollUp(window));}else if(outerMouseX+mouseRangeToTriggerScrollOutsideEditor>=window.innerWidth){state.intervalId.set(scrollRight(window));}else if(outerMouseX-mouseRangeToTriggerScrollOutsideEditor<=0){state.intervalId.set(scrollLeft(window));}}});};const removeElement=elm=>{if(elm&&elm.parentNode){elm.parentNode.removeChild(elm);}};const isLeftMouseButtonPressed=e=>e.button===0;const applyRelPos=(state,position)=>({pageX:position.pageX-state.relX,pageY:position.pageY+5});const start=(state,editor)=>e=>{if(isLeftMouseButtonPressed(e)){const ceElm=find$2(editor.dom.getParents(e.target),isContentEditable).getOr(null);if(isNonNullable(ceElm)&&isDraggable(editor.getBody(),ceElm)){const elmPos=editor.dom.getPos(ceElm);const bodyElm=editor.getBody();const docElm=editor.getDoc().documentElement;state.set({element:ceElm,dragging:false,screenX:e.screenX,screenY:e.screenY,maxX:(editor.inline?bodyElm.scrollWidth:docElm.offsetWidth)-2,maxY:(editor.inline?bodyElm.scrollHeight:docElm.offsetHeight)-2,relX:e.pageX-elmPos.x,relY:e.pageY-elmPos.y,width:ceElm.offsetWidth,height:ceElm.offsetHeight,ghost:createGhost(editor,ceElm,ceElm.offsetWidth,ceElm.offsetHeight),intervalId:repeatable(scrollIntervalValue)});}}};const move=(state,editor)=>{const throttledPlaceCaretAt=first$1((clientX,clientY)=>{editor._selectionOverrides.hideFakeCaret();editor.selection.placeCaretAt(clientX,clientY);},0);editor.on('remove',throttledPlaceCaretAt.cancel);const state_=state;return e=>state.on(state=>{const movement=Math.max(Math.abs(e.screenX-state.screenX),Math.abs(e.screenY-state.screenY));if(!state.dragging&&movement>10){const args=editor.dispatch('dragstart',{target:state.element});if(args.isDefaultPrevented()){return;}state.dragging=true;editor.focus();}if(state.dragging){const targetPos=applyRelPos(state,calc(editor,e));appendGhostToBody(state.ghost,editor.getBody());moveGhost(state.ghost,targetPos,state.width,state.height,state.maxX,state.maxY,e.clientY,e.clientX,editor.getContentAreaContainer(),editor.getWin(),state_);throttledPlaceCaretAt.throttle(e.clientX,e.clientY);}});};const getRawTarget=selection=>{const sel=selection.getSel();if(isNonNullable(sel)){const rng=sel.getRangeAt(0);const startContainer=rng.startContainer;return isText$a(startContainer)?startContainer.parentNode:startContainer;}else{return null;}};const drop=(state,editor)=>e=>{state.on(state=>{state.intervalId.clear();if(state.dragging){if(isValidDropTarget(editor,getRawTarget(editor.selection),state.element)){const targetClone=cloneElement(state.element);const args=editor.dispatch('drop',{clientX:e.clientX,clientY:e.clientY});if(!args.isDefaultPrevented()){editor.undoManager.transact(()=>{removeElement(state.element);editor.insertContent(editor.dom.getOuterHTML(targetClone));editor._selectionOverrides.hideFakeCaret();});}}editor.dispatch('dragend');}});removeDragState(state);};const stop=(state,editor)=>()=>{state.on(state=>{state.intervalId.clear();if(state.dragging){editor.dispatch('dragend');}});removeDragState(state);};const removeDragState=state=>{state.on(state=>{state.intervalId.clear();removeElement(state.ghost);});state.clear();};const bindFakeDragEvents=editor=>{const state=value$2();const pageDom=DOMUtils.DOM;const rootDocument=document;const dragStartHandler=start(state,editor);const dragHandler=move(state,editor);const dropHandler=drop(state,editor);const dragEndHandler=stop(state,editor);editor.on('mousedown',dragStartHandler);editor.on('mousemove',dragHandler);editor.on('mouseup',dropHandler);pageDom.bind(rootDocument,'mousemove',dragHandler);pageDom.bind(rootDocument,'mouseup',dragEndHandler);editor.on('remove',()=>{pageDom.unbind(rootDocument,'mousemove',dragHandler);pageDom.unbind(rootDocument,'mouseup',dragEndHandler);});editor.on('keydown',e=>{if(e.keyCode===VK.ESC){dragEndHandler();}});};const blockUnsupportedFileDrop=editor=>{const preventFileDrop=e=>{if(!e.isDefaultPrevented()){const dataTransfer=e.dataTransfer;if(dataTransfer&&(contains$2(dataTransfer.types,'Files')||dataTransfer.files.length>0)){e.preventDefault();if(e.type==='drop'){displayError(editor,'Dropped file type is not supported');}}}};const preventFileDropIfUIElement=e=>{if(isUIElement(editor,e.target)){preventFileDrop(e);}};const setup=()=>{const pageDom=DOMUtils.DOM;const dom=editor.dom;const doc=document;const editorRoot=editor.inline?editor.getBody():editor.getDoc();const eventNames=['drop','dragover'];each$e(eventNames,name=>{pageDom.bind(doc,name,preventFileDropIfUIElement);dom.bind(editorRoot,name,preventFileDrop);});editor.on('remove',()=>{each$e(eventNames,name=>{pageDom.unbind(doc,name,preventFileDropIfUIElement);dom.unbind(editorRoot,name,preventFileDrop);});});};editor.on('init',()=>{Delay.setEditorTimeout(editor,setup,0);});};const init$2=editor=>{bindFakeDragEvents(editor);if(shouldBlockUnsupportedDrop(editor)){blockUnsupportedFileDrop(editor);}};const setup$4=editor=>{const renderFocusCaret=first$1(()=>{if(!editor.removed&&editor.getBody().contains(document.activeElement)){const rng=editor.selection.getRng();if(rng.collapsed){const caretRange=renderRangeCaret(editor,rng,false);editor.selection.setRng(caretRange);}}},0);editor.on('focus',()=>{renderFocusCaret.throttle();});editor.on('blur',()=>{renderFocusCaret.cancel();});};const setup$3=editor=>{editor.on('init',()=>{editor.on('focusin',e=>{const target=e.target;if(isMedia$2(target)){const ceRoot=getContentEditableRoot$1(editor.getBody(),target);const node=isContentEditableFalse$a(ceRoot)?ceRoot:target;if(editor.selection.getNode()!==node){selectNode(editor,node).each(rng=>editor.selection.setRng(rng));}}});});};const isContentEditableFalse=isContentEditableFalse$a;const getContentEditableRoot=(editor,node)=>getContentEditableRoot$1(editor.getBody(),node);const SelectionOverrides=editor=>{const selection=editor.selection,dom=editor.dom;const rootNode=editor.getBody();const fakeCaret=FakeCaret(editor,rootNode,dom.isBlock,()=>hasFocus(editor));const realSelectionId='sel-'+dom.uniqueId();const elementSelectionAttr='data-mce-selected';let selectedElement;const isFakeSelectionElement=node=>isNonNullable(node)&&dom.hasClass(node,'mce-offscreen-selection');const isFakeSelectionTargetElement=node=>node!==rootNode&&(isContentEditableFalse(node)||isMedia$2(node))&&dom.isChildOf(node,rootNode);const setRange=range=>{if(range){selection.setRng(range);}};const showCaret=(direction,node,before,scrollIntoView=true)=>{const e=editor.dispatch('ShowCaret',{target:node,direction,before});if(e.isDefaultPrevented()){return null;}if(scrollIntoView){selection.scrollIntoView(node,direction===-1);}return fakeCaret.show(before,node);};const showBlockCaretContainer=blockCaretContainer=>{if(blockCaretContainer.hasAttribute('data-mce-caret')){showCaretContainerBlock(blockCaretContainer);selection.scrollIntoView(blockCaretContainer);}};const registerEvents=()=>{editor.on('click',e=>{const contentEditableRoot=getContentEditableRoot(editor,e.target);if(contentEditableRoot){if(isContentEditableFalse(contentEditableRoot)){e.preventDefault();editor.focus();}}});editor.on('blur NewBlock',removeElementSelection);editor.on('ResizeWindow FullscreenStateChanged',fakeCaret.reposition);editor.on('tap',e=>{const targetElm=e.target;const contentEditableRoot=getContentEditableRoot(editor,targetElm);if(isContentEditableFalse(contentEditableRoot)){e.preventDefault();selectNode(editor,contentEditableRoot).each(setElementSelection);}else if(isFakeSelectionTargetElement(targetElm)){selectNode(editor,targetElm).each(setElementSelection);}},true);editor.on('mousedown',e=>{const targetElm=e.target;if(targetElm!==rootNode&&targetElm.nodeName!=='HTML'&&!dom.isChildOf(targetElm,rootNode)){return;}if(!isXYInContentArea(editor,e.clientX,e.clientY)){return;}removeElementSelection();hideFakeCaret();const closestContentEditable=getContentEditableRoot(editor,targetElm);if(isContentEditableFalse(closestContentEditable)){e.preventDefault();selectNode(editor,closestContentEditable).each(setElementSelection);}else{closestFakeCaretCandidate(rootNode,e.clientX,e.clientY).each(caretInfo=>{e.preventDefault();const range=showCaret(1,caretInfo.node,caretInfo.position===FakeCaretPosition.Before,false);setRange(range);if(isElement$6(closestContentEditable)){closestContentEditable.focus();}else{editor.getBody().focus();}});}});editor.on('keypress',e=>{if(VK.modifierPressed(e)){return;}if(isContentEditableFalse(selection.getNode())){e.preventDefault();}});editor.on('GetSelectionRange',e=>{let rng=e.range;if(selectedElement){if(!selectedElement.parentNode){selectedElement=null;return;}rng=rng.cloneRange();rng.selectNode(selectedElement);e.range=rng;}});editor.on('SetSelectionRange',e=>{e.range=normalizeVoidElementSelection(e.range);const rng=setElementSelection(e.range,e.forward);if(rng){e.range=rng;}});const isPasteBin=node=>isElement$6(node)&&node.id==='mcepastebin';editor.on('AfterSetSelectionRange',e=>{const rng=e.range;const parent=rng.startContainer.parentElement;if(!isRangeInCaretContainer(rng)&&!isPasteBin(parent)){hideFakeCaret();}if(!isFakeSelectionElement(parent)){removeElementSelection();}});init$2(editor);setup$4(editor);setup$3(editor);};const isWithinCaretContainer=node=>isCaretContainer$2(node)||startsWithCaretContainer$1(node)||endsWithCaretContainer$1(node);const isRangeInCaretContainer=rng=>isWithinCaretContainer(rng.startContainer)||isWithinCaretContainer(rng.endContainer);const normalizeVoidElementSelection=rng=>{const voidElements=editor.schema.getVoidElements();const newRng=dom.createRng();const startContainer=rng.startContainer;const startOffset=rng.startOffset;const endContainer=rng.endContainer;const endOffset=rng.endOffset;if(has$2(voidElements,startContainer.nodeName.toLowerCase())){if(startOffset===0){newRng.setStartBefore(startContainer);}else{newRng.setStartAfter(startContainer);}}else{newRng.setStart(startContainer,startOffset);}if(has$2(voidElements,endContainer.nodeName.toLowerCase())){if(endOffset===0){newRng.setEndBefore(endContainer);}else{newRng.setEndAfter(endContainer);}}else{newRng.setEnd(endContainer,endOffset);}return newRng;};const setupOffscreenSelection=(node,targetClone)=>{const body=SugarElement.fromDom(editor.getBody());const doc=editor.getDoc();const realSelectionContainer=descendant(body,'#'+realSelectionId).getOrThunk(()=>{const newContainer=SugarElement.fromHtml('<div data-mce-bogus=\"all\" class=\"mce-offscreen-selection\"></div>',doc);set$2(newContainer,'id',realSelectionId);append$1(body,newContainer);return newContainer;});const newRange=dom.createRng();empty(realSelectionContainer);append(realSelectionContainer,[SugarElement.fromText(nbsp,doc),SugarElement.fromDom(targetClone),SugarElement.fromText(nbsp,doc)]);newRange.setStart(realSelectionContainer.dom.firstChild,1);newRange.setEnd(realSelectionContainer.dom.lastChild,0);setAll(realSelectionContainer,{top:dom.getPos(node,editor.getBody()).y+'px'});focus$1(realSelectionContainer);const sel=selection.getSel();if(sel){sel.removeAllRanges();sel.addRange(newRange);}return newRange;};const selectElement=elm=>{const targetClone=elm.cloneNode(true);const e=editor.dispatch('ObjectSelected',{target:elm,targetClone});if(e.isDefaultPrevented()){return null;}const range=setupOffscreenSelection(elm,e.targetClone);const nodeElm=SugarElement.fromDom(elm);each$e(descendants(SugarElement.fromDom(editor.getBody()),`*[${elementSelectionAttr}]`),elm=>{if(!eq(nodeElm,elm)){remove$b(elm,elementSelectionAttr);}});if(!dom.getAttrib(elm,elementSelectionAttr)){elm.setAttribute(elementSelectionAttr,'1');}selectedElement=elm;hideFakeCaret();return range;};const setElementSelection=(range,forward)=>{if(!range){return null;}if(range.collapsed){if(!isRangeInCaretContainer(range)){const dir=forward?1:-1;const caretPosition=getNormalizedRangeEndPoint(dir,rootNode,range);const beforeNode=caretPosition.getNode(!forward);if(isFakeCaretTarget(beforeNode)){return showCaret(dir,beforeNode,forward?!caretPosition.isAtEnd():false,false);}const afterNode=caretPosition.getNode(forward);if(isFakeCaretTarget(afterNode)){return showCaret(dir,afterNode,forward?false:!caretPosition.isAtEnd(),false);}}return null;}let startContainer=range.startContainer;let startOffset=range.startOffset;const endOffset=range.endOffset;if(isText$a(startContainer)&&startOffset===0&&isContentEditableFalse(startContainer.parentNode)){startContainer=startContainer.parentNode;startOffset=dom.nodeIndex(startContainer);startContainer=startContainer.parentNode;}if(!isElement$6(startContainer)){return null;}if(endOffset===startOffset+1&&startContainer===range.endContainer){const node=startContainer.childNodes[startOffset];if(isFakeSelectionTargetElement(node)){return selectElement(node);}}return null;};const removeElementSelection=()=>{if(selectedElement){selectedElement.removeAttribute(elementSelectionAttr);}descendant(SugarElement.fromDom(editor.getBody()),'#'+realSelectionId).each(remove$6);selectedElement=null;};const destroy=()=>{fakeCaret.destroy();selectedElement=null;};const hideFakeCaret=()=>{fakeCaret.hide();};if(!isRtc(editor)){registerEvents();}return{showCaret,showBlockCaretContainer,hideFakeCaret,destroy};};const getNormalizedTextOffset=(container,offset)=>{let normalizedOffset=offset;for(let node=container.previousSibling;isText$a(node);node=node.previousSibling){normalizedOffset+=node.data.length;}return normalizedOffset;};const generatePath=(dom,root,node,offset,normalized)=>{if(isText$a(node)&&(offset<0||offset>node.data.length)){return[];}const p=normalized&&isText$a(node)?[getNormalizedTextOffset(node,offset)]:[offset];let current=node;while(current!==root&&current.parentNode){p.push(dom.nodeIndex(current,normalized));current=current.parentNode;}return current===root?p.reverse():[];};const generatePathRange=(dom,root,startNode,startOffset,endNode,endOffset,normalized=false)=>{const start=generatePath(dom,root,startNode,startOffset,normalized);const end=generatePath(dom,root,endNode,endOffset,normalized);return{start,end};};const resolvePath=(root,path)=>{const nodePath=path.slice();const offset=nodePath.pop();if(!isNumber(offset)){return Optional.none();}else{const resolvedNode=foldl(nodePath,(optNode,index)=>optNode.bind(node=>Optional.from(node.childNodes[index])),Optional.some(root));return resolvedNode.bind(node=>{if(isText$a(node)&&(offset<0||offset>node.data.length)){return Optional.none();}else{return Optional.some({node,offset});}});}};const resolvePathRange=(root,range)=>resolvePath(root,range.start).bind(({node:startNode,offset:startOffset})=>resolvePath(root,range.end).map(({node:endNode,offset:endOffset})=>{const rng=document.createRange();rng.setStart(startNode,startOffset);rng.setEnd(endNode,endOffset);return rng;}));const generatePathRangeFromRange=(dom,root,range,normalized=false)=>generatePathRange(dom,root,range.startContainer,range.startOffset,range.endContainer,range.endOffset,normalized);const cleanEmptyNodes=(dom,node,isRoot)=>{if(node&&dom.isEmpty(node)&&!isRoot(node)){const parent=node.parentNode;dom.remove(node);cleanEmptyNodes(dom,parent,isRoot);}};const deleteRng=(dom,rng,isRoot,clean=true)=>{const startParent=rng.startContainer.parentNode;const endParent=rng.endContainer.parentNode;rng.deleteContents();if(clean&&!isRoot(rng.startContainer)){if(isText$a(rng.startContainer)&&rng.startContainer.data.length===0){dom.remove(rng.startContainer);}if(isText$a(rng.endContainer)&&rng.endContainer.data.length===0){dom.remove(rng.endContainer);}cleanEmptyNodes(dom,startParent,isRoot);if(startParent!==endParent){cleanEmptyNodes(dom,endParent,isRoot);}}};const getParentBlock=(editor,rng)=>Optional.from(editor.dom.getParent(rng.startContainer,editor.dom.isBlock));const resolveFromDynamicPatterns=(patternSet,block,beforeText)=>{const dynamicPatterns=patternSet.dynamicPatternsLookup({text:beforeText,block});return{...patternSet,blockPatterns:getBlockPatterns(dynamicPatterns).concat(patternSet.blockPatterns),inlinePatterns:getInlinePatterns(dynamicPatterns).concat(patternSet.inlinePatterns)};};const getBeforeText=(dom,block,node,offset)=>{const rng=dom.createRng();rng.setStart(block,0);rng.setEnd(node,offset);return rng.toString();};const stripPattern=(dom,block,pattern)=>{const firstTextNode=textAfter(block,0,block);firstTextNode.each(spot=>{const node=spot.container;scanRight(node,pattern.start.length,block).each(end=>{const rng=dom.createRng();rng.setStart(node,0);rng.setEnd(end.container,end.offset);deleteRng(dom,rng,e=>e===block);});});};const applyPattern$1=(editor,match)=>{const dom=editor.dom;const pattern=match.pattern;const rng=resolvePathRange(dom.getRoot(),match.range).getOrDie('Unable to resolve path range');const isBlockFormatName=(name,formatter)=>{const formatSet=formatter.get(name);return isArray$1(formatSet)&&head(formatSet).exists(format=>has$2(format,'block'));};getParentBlock(editor,rng).each(block=>{if(pattern.type==='block-format'){if(isBlockFormatName(pattern.format,editor.formatter)){editor.undoManager.transact(()=>{stripPattern(editor.dom,block,pattern);editor.formatter.apply(pattern.format);});}}else if(pattern.type==='block-command'){editor.undoManager.transact(()=>{stripPattern(editor.dom,block,pattern);editor.execCommand(pattern.cmd,false,pattern.value);});}});return true;};const sortPatterns=patterns=>sort(patterns,(a,b)=>b.start.length-a.start.length);const findPattern$1=(patterns,text)=>{const sortedPatterns=sortPatterns(patterns);const nuText=text.replace(nbsp,' ');return find$2(sortedPatterns,pattern=>text.indexOf(pattern.start)===0||nuText.indexOf(pattern.start)===0);};const findPatterns$1=(editor,block,patternSet,normalizedMatches)=>{var _a;const dom=editor.dom;const forcedRootBlock=getForcedRootBlock(editor);if(!dom.is(block,forcedRootBlock)){return[];}const blockText=(_a=block.textContent)!==null&&_a!==void 0?_a:'';return findPattern$1(patternSet.blockPatterns,blockText).map(pattern=>{if(Tools.trim(blockText).length===pattern.start.length){return[];}return[{pattern,range:generatePathRange(dom,dom.getRoot(),block,0,block,0,normalizedMatches)}];}).getOr([]);};const applyMatches$1=(editor,matches)=>{if(matches.length===0){return;}const bookmark=editor.selection.getBookmark();each$e(matches,match=>applyPattern$1(editor,match));editor.selection.moveToBookmark(bookmark);};const newMarker=(dom,id)=>dom.create('span',{'data-mce-type':'bookmark',id});const rangeFromMarker=(dom,marker)=>{const rng=dom.createRng();rng.setStartAfter(marker.start);rng.setEndBefore(marker.end);return rng;};const createMarker=(dom,markerPrefix,pathRange)=>{const rng=resolvePathRange(dom.getRoot(),pathRange).getOrDie('Unable to resolve path range');const startNode=rng.startContainer;const endNode=rng.endContainer;const textEnd=rng.endOffset===0?endNode:endNode.splitText(rng.endOffset);const textStart=rng.startOffset===0?startNode:startNode.splitText(rng.startOffset);const startParentNode=textStart.parentNode;const endParentNode=textEnd.parentNode;return{prefix:markerPrefix,end:endParentNode.insertBefore(newMarker(dom,markerPrefix+'-end'),textEnd),start:startParentNode.insertBefore(newMarker(dom,markerPrefix+'-start'),textStart)};};const removeMarker=(dom,marker,isRoot)=>{cleanEmptyNodes(dom,dom.get(marker.prefix+'-end'),isRoot);cleanEmptyNodes(dom,dom.get(marker.prefix+'-start'),isRoot);};const isReplacementPattern=pattern=>pattern.start.length===0;const matchesPattern=patternContent=>(element,offset)=>{const text=element.data;const searchText=text.substring(0,offset);const startEndIndex=searchText.lastIndexOf(patternContent.charAt(patternContent.length-1));const startIndex=searchText.lastIndexOf(patternContent);if(startIndex!==-1){return startIndex+patternContent.length;}else if(startEndIndex!==-1){return startEndIndex+1;}else{return-1;}};const findPatternStartFromSpot=(dom,pattern,block,spot)=>{const startPattern=pattern.start;const startSpot=repeatLeft(dom,spot.container,spot.offset,matchesPattern(startPattern),block);return startSpot.bind(spot=>{if(spot.offset>=startPattern.length){const rng=dom.createRng();rng.setStart(spot.container,spot.offset-startPattern.length);rng.setEnd(spot.container,spot.offset);return Optional.some(rng);}else{const offset=spot.offset-startPattern.length;return scanLeft(spot.container,offset,block).map(nextSpot=>{const rng=dom.createRng();rng.setStart(nextSpot.container,nextSpot.offset);rng.setEnd(spot.container,spot.offset);return rng;}).filter(rng=>rng.toString()===startPattern).orThunk(()=>findPatternStartFromSpot(dom,pattern,block,point(spot.container,0)));}});};const findPatternStart=(dom,pattern,node,offset,block,requireGap=false)=>{if(pattern.start.length===0&&!requireGap){const rng=dom.createRng();rng.setStart(node,offset);rng.setEnd(node,offset);return Optional.some(rng);}return textBefore(node,offset,block).bind(spot=>{const start=findPatternStartFromSpot(dom,pattern,block,spot);return start.bind(startRange=>{var _a;if(requireGap){if(startRange.endContainer===spot.container&&startRange.endOffset===spot.offset){return Optional.none();}else if(spot.offset===0&&((_a=startRange.endContainer.textContent)===null||_a===void 0?void 0:_a.length)===startRange.endOffset){return Optional.none();}}return Optional.some(startRange);});});};const findPattern=(editor,block,details,normalizedMatches)=>{const dom=editor.dom;const root=dom.getRoot();const pattern=details.pattern;const endNode=details.position.container;const endOffset=details.position.offset;return scanLeft(endNode,endOffset-details.pattern.end.length,block).bind(spot=>{const endPathRng=generatePathRange(dom,root,spot.container,spot.offset,endNode,endOffset,normalizedMatches);if(isReplacementPattern(pattern)){return Optional.some({matches:[{pattern,startRng:endPathRng,endRng:endPathRng}],position:spot});}else{const resultsOpt=findPatternsRec(editor,details.remainingPatterns,spot.container,spot.offset,block,normalizedMatches);const results=resultsOpt.getOr({matches:[],position:spot});const pos=results.position;const start=findPatternStart(dom,pattern,pos.container,pos.offset,block,resultsOpt.isNone());return start.map(startRng=>{const startPathRng=generatePathRangeFromRange(dom,root,startRng,normalizedMatches);return{matches:results.matches.concat([{pattern,startRng:startPathRng,endRng:endPathRng}]),position:point(startRng.startContainer,startRng.startOffset)};});}});};const findPatternsRec=(editor,patterns,node,offset,block,normalizedMatches)=>{const dom=editor.dom;return textBefore(node,offset,dom.getRoot()).bind(endSpot=>{const text=getBeforeText(dom,block,node,offset);for(let i=0;i<patterns.length;i++){const pattern=patterns[i];if(!endsWith(text,pattern.end)){continue;}const patternsWithoutCurrent=patterns.slice();patternsWithoutCurrent.splice(i,1);const result=findPattern(editor,block,{pattern,remainingPatterns:patternsWithoutCurrent,position:endSpot},normalizedMatches);if(result.isSome()){return result;}}return Optional.none();});};const applyPattern=(editor,pattern,patternRange)=>{editor.selection.setRng(patternRange);if(pattern.type==='inline-format'){each$e(pattern.format,format=>{editor.formatter.apply(format);});}else{editor.execCommand(pattern.cmd,false,pattern.value);}};const applyReplacementPattern=(editor,pattern,marker,isRoot)=>{const markerRange=rangeFromMarker(editor.dom,marker);deleteRng(editor.dom,markerRange,isRoot);applyPattern(editor,pattern,markerRange);};const applyPatternWithContent=(editor,pattern,startMarker,endMarker,isRoot)=>{const dom=editor.dom;const markerEndRange=rangeFromMarker(dom,endMarker);const markerStartRange=rangeFromMarker(dom,startMarker);deleteRng(dom,markerStartRange,isRoot);deleteRng(dom,markerEndRange,isRoot);const patternMarker={prefix:startMarker.prefix,start:startMarker.end,end:endMarker.start};const patternRange=rangeFromMarker(dom,patternMarker);applyPattern(editor,pattern,patternRange);};const addMarkers=(dom,matches)=>{const markerPrefix=generate$1('mce_textpattern');const matchesWithEnds=foldr(matches,(acc,match)=>{const endMarker=createMarker(dom,markerPrefix+`_end${acc.length}`,match.endRng);return acc.concat([{...match,endMarker}]);},[]);return foldr(matchesWithEnds,(acc,match)=>{const idx=matchesWithEnds.length-acc.length-1;const startMarker=isReplacementPattern(match.pattern)?match.endMarker:createMarker(dom,markerPrefix+`_start${idx}`,match.startRng);return acc.concat([{...match,startMarker}]);},[]);};const findPatterns=(editor,block,node,offset,patternSet,normalizedMatches)=>findPatternsRec(editor,patternSet.inlinePatterns,node,offset,block,normalizedMatches).fold(()=>[],result=>result.matches);const applyMatches=(editor,matches)=>{if(matches.length===0){return;}const dom=editor.dom;const bookmark=editor.selection.getBookmark();const matchesWithMarkers=addMarkers(dom,matches);each$e(matchesWithMarkers,match=>{const block=dom.getParent(match.startMarker.start,dom.isBlock);const isRoot=node=>node===block;if(isReplacementPattern(match.pattern)){applyReplacementPattern(editor,match.pattern,match.endMarker,isRoot);}else{applyPatternWithContent(editor,match.pattern,match.startMarker,match.endMarker,isRoot);}removeMarker(dom,match.endMarker,isRoot);removeMarker(dom,match.startMarker,isRoot);});editor.selection.moveToBookmark(bookmark);};const handleEnter=(editor,patternSet)=>{const rng=editor.selection.getRng();return getParentBlock(editor,rng).map(block=>{var _a;const offset=Math.max(0,rng.startOffset);const dynamicPatternSet=resolveFromDynamicPatterns(patternSet,block,(_a=block.textContent)!==null&&_a!==void 0?_a:'');const inlineMatches=findPatterns(editor,block,rng.startContainer,offset,dynamicPatternSet,true);const blockMatches=findPatterns$1(editor,block,dynamicPatternSet,true);if(blockMatches.length>0||inlineMatches.length>0){editor.undoManager.add();editor.undoManager.extra(()=>{editor.execCommand('mceInsertNewLine');},()=>{editor.insertContent(zeroWidth);applyMatches(editor,inlineMatches);applyMatches$1(editor,blockMatches);const range=editor.selection.getRng();const spot=textBefore(range.startContainer,range.startOffset,editor.dom.getRoot());editor.execCommand('mceInsertNewLine');spot.each(s=>{const node=s.container;if(node.data.charAt(s.offset-1)===zeroWidth){node.deleteData(s.offset-1,1);cleanEmptyNodes(editor.dom,node.parentNode,e=>e===editor.dom.getRoot());}});});return true;}return false;}).getOr(false);};const handleInlineKey=(editor,patternSet)=>{const rng=editor.selection.getRng();getParentBlock(editor,rng).map(block=>{const offset=Math.max(0,rng.startOffset-1);const beforeText=getBeforeText(editor.dom,block,rng.startContainer,offset);const dynamicPatternSet=resolveFromDynamicPatterns(patternSet,block,beforeText);const inlineMatches=findPatterns(editor,block,rng.startContainer,offset,dynamicPatternSet,false);if(inlineMatches.length>0){editor.undoManager.transact(()=>{applyMatches(editor,inlineMatches);});}});};const checkKeyEvent=(codes,event,predicate)=>{for(let i=0;i<codes.length;i++){if(predicate(codes[i],event)){return true;}}return false;};const checkKeyCode=(codes,event)=>checkKeyEvent(codes,event,(code,event)=>{return code===event.keyCode&&!VK.modifierPressed(event);});const checkCharCode=(chars,event)=>checkKeyEvent(chars,event,(chr,event)=>{return chr.charCodeAt(0)===event.charCode;});const setup$2=editor=>{const charCodes=[',','.',';',':','!','?'];const keyCodes=[32];const getPatternSet=()=>createPatternSet(getTextPatterns(editor),getTextPatternsLookup(editor));const hasDynamicPatterns=()=>hasTextPatternsLookup(editor);editor.on('keydown',e=>{if(e.keyCode===13&&!VK.modifierPressed(e)&&editor.selection.isCollapsed()){const patternSet=getPatternSet();const hasPatterns=patternSet.inlinePatterns.length>0||patternSet.blockPatterns.length>0||hasDynamicPatterns();if(hasPatterns&&handleEnter(editor,patternSet)){e.preventDefault();}}},true);const handleInlineTrigger=()=>{if(editor.selection.isCollapsed()){const patternSet=getPatternSet();const hasPatterns=patternSet.inlinePatterns.length>0||hasDynamicPatterns();if(hasPatterns){handleInlineKey(editor,patternSet);}}};editor.on('keyup',e=>{if(checkKeyCode(keyCodes,e)){handleInlineTrigger();}});editor.on('keypress',e=>{if(checkCharCode(charCodes,e)){Delay.setEditorTimeout(editor,handleInlineTrigger);}});};const setup$1=editor=>{setup$2(editor);};const Quirks=editor=>{const each=Tools.each;const BACKSPACE=VK.BACKSPACE,DELETE=VK.DELETE,dom=editor.dom,selection=editor.selection,parser=editor.parser;const browser=Env.browser;const isGecko=browser.isFirefox();const isWebKit=browser.isChromium()||browser.isSafari();const isiOS=Env.deviceType.isiPhone()||Env.deviceType.isiPad();const isMac=Env.os.isMacOS()||Env.os.isiOS();const setEditorCommandState=(cmd,state)=>{try{editor.getDoc().execCommand(cmd,false,String(state));}catch(ex){}};const isDefaultPrevented=e=>{return e.isDefaultPrevented();};const emptyEditorWhenDeleting=()=>{const serializeRng=rng=>{const body=dom.create('body');const contents=rng.cloneContents();body.appendChild(contents);return selection.serializer.serialize(body,{format:'html'});};const allContentsSelected=rng=>{const selection=serializeRng(rng);const allRng=dom.createRng();allRng.selectNode(editor.getBody());const allSelection=serializeRng(allRng);return selection===allSelection;};editor.on('keydown',e=>{const keyCode=e.keyCode;if(!isDefaultPrevented(e)&&(keyCode===DELETE||keyCode===BACKSPACE)){const isCollapsed=editor.selection.isCollapsed();const body=editor.getBody();if(isCollapsed&&!dom.isEmpty(body)){return;}if(!isCollapsed&&!allContentsSelected(editor.selection.getRng())){return;}e.preventDefault();editor.setContent('');if(body.firstChild&&dom.isBlock(body.firstChild)){editor.selection.setCursorLocation(body.firstChild,0);}else{editor.selection.setCursorLocation(body,0);}editor.nodeChanged();}});};const selectAll=()=>{editor.shortcuts.add('meta+a',null,'SelectAll');};const documentElementEditingFocus=()=>{if(!editor.inline){dom.bind(editor.getDoc(),'mousedown mouseup',e=>{let rng;if(e.target===editor.getDoc().documentElement){rng=selection.getRng();editor.getBody().focus();if(e.type==='mousedown'){if(isCaretContainer$2(rng.startContainer)){return;}selection.placeCaretAt(e.clientX,e.clientY);}else{selection.setRng(rng);}}});}};const removeHrOnBackspace=()=>{editor.on('keydown',e=>{if(!isDefaultPrevented(e)&&e.keyCode===BACKSPACE){if(!editor.getBody().getElementsByTagName('hr').length){return;}if(selection.isCollapsed()&&selection.getRng().startOffset===0){const node=selection.getNode();const previousSibling=node.previousSibling;if(node.nodeName==='HR'){dom.remove(node);e.preventDefault();return;}if(previousSibling&&previousSibling.nodeName&&previousSibling.nodeName.toLowerCase()==='hr'){dom.remove(previousSibling);e.preventDefault();}}}});};const focusBody=()=>{if(!Range.prototype.getClientRects){editor.on('mousedown',e=>{if(!isDefaultPrevented(e)&&e.target.nodeName==='HTML'){const body=editor.getBody();body.blur();Delay.setEditorTimeout(editor,()=>{body.focus();});}});}};const selectControlElements=()=>{const visualAidsAnchorClass=getVisualAidsAnchorClass(editor);editor.on('click',e=>{const target=e.target;if(/^(IMG|HR)$/.test(target.nodeName)&&dom.getContentEditableParent(target)!=='false'){e.preventDefault();editor.selection.select(target);editor.nodeChanged();}if(target.nodeName==='A'&&dom.hasClass(target,visualAidsAnchorClass)&&target.childNodes.length===0){e.preventDefault();selection.select(target);}});};const removeStylesWhenDeletingAcrossBlockElements=()=>{const getAttributeApplyFunction=()=>{const template=dom.getAttribs(selection.getStart().cloneNode(false));return()=>{const target=selection.getStart();if(target!==editor.getBody()){dom.setAttrib(target,'style',null);each(template,attr=>{target.setAttributeNode(attr.cloneNode(true));});}};};const isSelectionAcrossElements=()=>{return!selection.isCollapsed()&&dom.getParent(selection.getStart(),dom.isBlock)!==dom.getParent(selection.getEnd(),dom.isBlock);};editor.on('keypress',e=>{let applyAttributes;if(!isDefaultPrevented(e)&&(e.keyCode===8||e.keyCode===46)&&isSelectionAcrossElements()){applyAttributes=getAttributeApplyFunction();editor.getDoc().execCommand('delete',false);applyAttributes();e.preventDefault();return false;}else{return true;}});dom.bind(editor.getDoc(),'cut',e=>{if(!isDefaultPrevented(e)&&isSelectionAcrossElements()){const applyAttributes=getAttributeApplyFunction();Delay.setEditorTimeout(editor,()=>{applyAttributes();});}});};const disableBackspaceIntoATable=()=>{editor.on('keydown',e=>{if(!isDefaultPrevented(e)&&e.keyCode===BACKSPACE){if(selection.isCollapsed()&&selection.getRng().startOffset===0){const previousSibling=selection.getNode().previousSibling;if(previousSibling&&previousSibling.nodeName&&previousSibling.nodeName.toLowerCase()==='table'){e.preventDefault();return false;}}}return true;});};const removeBlockQuoteOnBackSpace=()=>{editor.on('keydown',e=>{if(isDefaultPrevented(e)||e.keyCode!==VK.BACKSPACE){return;}let rng=selection.getRng();const container=rng.startContainer;const offset=rng.startOffset;const root=dom.getRoot();let parent=container;if(!rng.collapsed||offset!==0){return;}while(parent.parentNode&&parent.parentNode.firstChild===parent&&parent.parentNode!==root){parent=parent.parentNode;}if(parent.nodeName==='BLOCKQUOTE'){editor.formatter.toggle('blockquote',undefined,parent);rng=dom.createRng();rng.setStart(container,0);rng.setEnd(container,0);selection.setRng(rng);}});};const setGeckoEditingOptions=()=>{const setOpts=()=>{setEditorCommandState('StyleWithCSS',false);setEditorCommandState('enableInlineTableEditing',false);if(!getObjectResizing(editor)){setEditorCommandState('enableObjectResizing',false);}};if(!isReadOnly$1(editor)){editor.on('BeforeExecCommand mousedown',setOpts);}};const addBrAfterLastLinks=()=>{const fixLinks=()=>{each(dom.select('a'),node=>{var _a;let parentNode=node.parentNode;const root=dom.getRoot();if((parentNode===null||parentNode===void 0?void 0:parentNode.lastChild)===node){while(parentNode&&!dom.isBlock(parentNode)){if(((_a=parentNode.parentNode)===null||_a===void 0?void 0:_a.lastChild)!==parentNode||parentNode===root){return;}parentNode=parentNode.parentNode;}dom.add(parentNode,'br',{'data-mce-bogus':1});}});};editor.on('SetContent ExecCommand',e=>{if(e.type==='setcontent'||e.command==='mceInsertLink'){fixLinks();}});};const setDefaultBlockType=()=>{editor.on('init',()=>{setEditorCommandState('DefaultParagraphSeparator',getForcedRootBlock(editor));});};const isAllContentSelected=editor=>{const body=editor.getBody();const rng=editor.selection.getRng();return rng.startContainer===rng.endContainer&&rng.startContainer===body&&rng.startOffset===0&&rng.endOffset===body.childNodes.length;};const normalizeSelection=()=>{editor.on('keyup focusin mouseup',e=>{if(!VK.modifierPressed(e)&&!isAllContentSelected(editor)){selection.normalize();}},true);};const showBrokenImageIcon=()=>{editor.contentStyles.push('img:-moz-broken {'+'-moz-force-broken-image-icon:1;'+'min-width:24px;'+'min-height:24px'+'}');};const restoreFocusOnKeyDown=()=>{if(!editor.inline){editor.on('keydown',()=>{if(document.activeElement===document.body){editor.getWin().focus();}});}};const bodyHeight=()=>{if(!editor.inline){editor.contentStyles.push('body {min-height: 150px}');editor.on('click',e=>{let rng;if(e.target.nodeName==='HTML'){rng=editor.selection.getRng();editor.getBody().focus();editor.selection.setRng(rng);editor.selection.normalize();editor.nodeChanged();}});}};const blockCmdArrowNavigation=()=>{if(isMac){editor.on('keydown',e=>{if(VK.metaKeyPressed(e)&&!e.shiftKey&&(e.keyCode===37||e.keyCode===39)){e.preventDefault();const selection=editor.selection.getSel();selection.modify('move',e.keyCode===37?'backward':'forward','lineboundary');}});}};const tapLinksAndImages=()=>{editor.on('click',e=>{let elm=e.target;do{if(elm.tagName==='A'){e.preventDefault();return;}}while(elm=elm.parentNode);});editor.contentStyles.push('.mce-content-body {-webkit-touch-callout: none}');};const blockFormSubmitInsideEditor=()=>{editor.on('init',()=>{editor.dom.bind(editor.getBody(),'submit',e=>{e.preventDefault();});});};const removeAppleInterchangeBrs=()=>{parser.addNodeFilter('br',nodes=>{let i=nodes.length;while(i--){if(nodes[i].attr('class')==='Apple-interchange-newline'){nodes[i].remove();}}});};const refreshContentEditable=noop;const isHidden=()=>{if(!isGecko||editor.removed){return false;}const sel=editor.selection.getSel();return!sel||!sel.rangeCount||sel.rangeCount===0;};const setupRtc=()=>{if(isWebKit){documentElementEditingFocus();selectControlElements();blockFormSubmitInsideEditor();selectAll();if(isiOS){restoreFocusOnKeyDown();bodyHeight();tapLinksAndImages();}}if(isGecko){focusBody();setGeckoEditingOptions();showBrokenImageIcon();blockCmdArrowNavigation();}};const setup=()=>{removeBlockQuoteOnBackSpace();emptyEditorWhenDeleting();if(!Env.windowsPhone){normalizeSelection();}if(isWebKit){documentElementEditingFocus();selectControlElements();setDefaultBlockType();blockFormSubmitInsideEditor();disableBackspaceIntoATable();removeAppleInterchangeBrs();if(isiOS){restoreFocusOnKeyDown();bodyHeight();tapLinksAndImages();}else{selectAll();}}if(isGecko){removeHrOnBackspace();focusBody();removeStylesWhenDeletingAcrossBlockElements();setGeckoEditingOptions();addBrAfterLastLinks();showBrokenImageIcon();blockCmdArrowNavigation();disableBackspaceIntoATable();}};if(isRtc(editor)){setupRtc();}else{setup();}return{refreshContentEditable,isHidden};};const DOM$6=DOMUtils.DOM;const appendStyle=(editor,text)=>{const body=SugarElement.fromDom(editor.getBody());const container=getStyleContainer(getRootNode(body));const style=SugarElement.fromTag('style');set$2(style,'type','text/css');append$1(style,SugarElement.fromText(text));append$1(container,style);editor.on('remove',()=>{remove$6(style);});};const getRootName=editor=>editor.inline?editor.getElement().nodeName.toLowerCase():undefined;const removeUndefined=obj=>filter$4(obj,v=>isUndefined(v)===false);const mkParserSettings=editor=>{const getOption=editor.options.get;const blobCache=editor.editorUpload.blobCache;return removeUndefined({allow_conditional_comments:getOption('allow_conditional_comments'),allow_html_data_urls:getOption('allow_html_data_urls'),allow_svg_data_urls:getOption('allow_svg_data_urls'),allow_html_in_named_anchor:getOption('allow_html_in_named_anchor'),allow_script_urls:getOption('allow_script_urls'),allow_unsafe_link_target:getOption('allow_unsafe_link_target'),convert_fonts_to_spans:getOption('convert_fonts_to_spans'),fix_list_elements:getOption('fix_list_elements'),font_size_legacy_values:getOption('font_size_legacy_values'),forced_root_block:getOption('forced_root_block'),forced_root_block_attrs:getOption('forced_root_block_attrs'),preserve_cdata:getOption('preserve_cdata'),remove_trailing_brs:getOption('remove_trailing_brs'),inline_styles:getOption('inline_styles'),root_name:getRootName(editor),validate:true,blob_cache:blobCache,document:editor.getDoc()});};const mkSchemaSettings=editor=>{const getOption=editor.options.get;return removeUndefined({custom_elements:getOption('custom_elements'),extended_valid_elements:getOption('extended_valid_elements'),invalid_elements:getOption('invalid_elements'),invalid_styles:getOption('invalid_styles'),schema:getOption('schema'),valid_children:getOption('valid_children'),valid_classes:getOption('valid_classes'),valid_elements:getOption('valid_elements'),valid_styles:getOption('valid_styles'),verify_html:getOption('verify_html'),padd_empty_block_inline_children:getOption('format_empty_lines')});};const mkSerializerSettings=editor=>{const getOption=editor.options.get;return{...mkParserSettings(editor),...mkSchemaSettings(editor),...removeUndefined({url_converter:getOption('url_converter'),url_converter_scope:getOption('url_converter_scope'),element_format:getOption('element_format'),entities:getOption('entities'),entity_encoding:getOption('entity_encoding'),indent:getOption('indent'),indent_after:getOption('indent_after'),indent_before:getOption('indent_before')})};};const createParser=editor=>{const parser=DomParser(mkParserSettings(editor),editor.schema);parser.addAttributeFilter('src,href,style,tabindex',(nodes,name)=>{const dom=editor.dom;const internalName='data-mce-'+name;let i=nodes.length;while(i--){const node=nodes[i];let value=node.attr(name);if(value&&!node.attr(internalName)){if(value.indexOf('data:')===0||value.indexOf('blob:')===0){continue;}if(name==='style'){value=dom.serializeStyle(dom.parseStyle(value),node.name);if(!value.length){value=null;}node.attr(internalName,value);node.attr(name,value);}else if(name==='tabindex'){node.attr(internalName,value);node.attr(name,null);}else{node.attr(internalName,editor.convertURL(value,name,node.name));}}}});parser.addNodeFilter('script',nodes=>{let i=nodes.length;while(i--){const node=nodes[i];const type=node.attr('type')||'no/type';if(type.indexOf('mce-')!==0){node.attr('type','mce-'+type);}}});if(shouldPreserveCData(editor)){parser.addNodeFilter('#cdata',nodes=>{var _a;let i=nodes.length;while(i--){const node=nodes[i];node.type=8;node.name='#comment';node.value='[CDATA['+editor.dom.encode((_a=node.value)!==null&&_a!==void 0?_a:'')+']]';}});}parser.addNodeFilter('p,h1,h2,h3,h4,h5,h6,div',nodes=>{let i=nodes.length;const nonEmptyElements=editor.schema.getNonEmptyElements();while(i--){const node=nodes[i];if(node.isEmpty(nonEmptyElements)&&node.getAll('br').length===0){node.append(new AstNode('br',1));}}});return parser;};const autoFocus=editor=>{const autoFocus=getAutoFocus(editor);if(autoFocus){Delay.setEditorTimeout(editor,()=>{let focusEditor;if(autoFocus===true){focusEditor=editor;}else{focusEditor=editor.editorManager.get(autoFocus);}if(focusEditor&&!focusEditor.destroyed){focusEditor.focus();focusEditor.selection.scrollIntoView();}},100);}};const moveSelectionToFirstCaretPosition=editor=>{const root=editor.dom.getRoot();if(!editor.inline&&(!hasAnyRanges(editor)||editor.selection.getStart(true)===root)){firstPositionIn(root).each(pos=>{const node=pos.getNode();const caretPos=isTable$2(node)?firstPositionIn(node).getOr(pos):pos;editor.selection.setRng(caretPos.toRange());});}};const initEditor=editor=>{editor.bindPendingEventDelegates();editor.initialized=true;fireInit(editor);editor.focus(true);moveSelectionToFirstCaretPosition(editor);editor.nodeChanged({initial:true});const initInstanceCallback=getInitInstanceCallback(editor);if(isFunction(initInstanceCallback)){initInstanceCallback.call(editor,editor);}autoFocus(editor);};const getStyleSheetLoader$1=editor=>editor.inline?editor.ui.styleSheetLoader:editor.dom.styleSheetLoader;const makeStylesheetLoadingPromises=(editor,css,framedFonts)=>{const promises=[getStyleSheetLoader$1(editor).loadAll(css)];if(editor.inline){return promises;}else{return promises.concat([editor.ui.styleSheetLoader.loadAll(framedFonts)]);}};const loadContentCss=editor=>{const styleSheetLoader=getStyleSheetLoader$1(editor);const fontCss=getFontCss(editor);const css=editor.contentCSS;const removeCss=()=>{styleSheetLoader.unloadAll(css);if(!editor.inline){editor.ui.styleSheetLoader.unloadAll(fontCss);}};const loaded=()=>{if(editor.removed){removeCss();}else{editor.on('remove',removeCss);}};if(editor.contentStyles.length>0){let contentCssText='';Tools.each(editor.contentStyles,style=>{contentCssText+=style+'\\r\\n';});editor.dom.addStyle(contentCssText);}const allStylesheets=Promise.all(makeStylesheetLoadingPromises(editor,css,fontCss)).then(loaded).catch(loaded);const contentStyle=getContentStyle(editor);if(contentStyle){appendStyle(editor,contentStyle);}return allStylesheets;};const preInit=editor=>{const doc=editor.getDoc(),body=editor.getBody();firePreInit(editor);if(!shouldBrowserSpellcheck(editor)){doc.body.spellcheck=false;DOM$6.setAttrib(body,'spellcheck','false');}editor.quirks=Quirks(editor);firePostRender(editor);const directionality=getDirectionality(editor);if(directionality!==undefined){body.dir=directionality;}const protect=getProtect(editor);if(protect){editor.on('BeforeSetContent',e=>{Tools.each(protect,pattern=>{e.content=e.content.replace(pattern,str=>{return'<!--mce:protected '+escape(str)+'-->';});});});}editor.on('SetContent',()=>{editor.addVisual(editor.getBody());});editor.on('compositionstart compositionend',e=>{editor.composing=e.type==='compositionstart';});};const loadInitialContent=editor=>{if(!isRtc(editor)){editor.load({initial:true,format:'html'});}editor.startContent=editor.getContent({format:'raw'});};const initEditorWithInitialContent=editor=>{if(editor.removed!==true){loadInitialContent(editor);initEditor(editor);}};const contentBodyLoaded=editor=>{const targetElm=editor.getElement();let doc=editor.getDoc();if(editor.inline){DOM$6.addClass(targetElm,'mce-content-body');editor.contentDocument=doc=document;editor.contentWindow=window;editor.bodyElement=targetElm;editor.contentAreaContainer=targetElm;}const body=editor.getBody();body.disabled=true;editor.readonly=isReadOnly$1(editor);if(!editor.readonly){if(editor.inline&&DOM$6.getStyle(body,'position',true)==='static'){body.style.position='relative';}body.contentEditable='true';}body.disabled=false;editor.editorUpload=EditorUpload(editor);editor.schema=Schema(mkSchemaSettings(editor));editor.dom=DOMUtils(doc,{keep_values:true,url_converter:editor.convertURL,url_converter_scope:editor,update_styles:true,root_element:editor.inline?editor.getBody():null,collect:editor.inline,schema:editor.schema,contentCssCors:shouldUseContentCssCors(editor),referrerPolicy:getReferrerPolicy(editor),onSetAttrib:e=>{editor.dispatch('SetAttrib',e);}});editor.parser=createParser(editor);editor.serializer=DomSerializer(mkSerializerSettings(editor),editor);editor.selection=EditorSelection(editor.dom,editor.getWin(),editor.serializer,editor);editor.annotator=Annotator(editor);editor.formatter=Formatter(editor);editor.undoManager=UndoManager(editor);editor._nodeChangeDispatcher=new NodeChange(editor);editor._selectionOverrides=SelectionOverrides(editor);setup$o(editor);setup$6(editor);setup$m(editor);if(!isRtc(editor)){setup$5(editor);setup$1(editor);}const caret=setup$b(editor);setup$p(editor,caret);setup$n(editor);setup$q(editor);setup$7(editor);const setupRtcThunk=setup$s(editor);preInit(editor);setupRtcThunk.fold(()=>{loadContentCss(editor).then(()=>initEditorWithInitialContent(editor));},setupRtc=>{editor.setProgressState(true);loadContentCss(editor).then(()=>{setupRtc().then(_rtcMode=>{editor.setProgressState(false);initEditorWithInitialContent(editor);bindEvents(editor);},err=>{editor.notificationManager.open({type:'error',text:String(err)});initEditorWithInitialContent(editor);bindEvents(editor);});});});};const initContentBody=(editor,skipWrite)=>{if(!editor.inline){editor.getElement().style.visibility=editor.orgVisibility;}if(!skipWrite&&!editor.inline){const iframe=editor.iframeElement;const binder=bind$1(SugarElement.fromDom(iframe),'load',()=>{binder.unbind();editor.contentDocument=iframe.contentDocument;contentBodyLoaded(editor);});if(Env.browser.isFirefox()){const doc=editor.getDoc();doc.open();doc.write(editor.iframeHTML);doc.close();}else{iframe.srcdoc=editor.iframeHTML;}}else{contentBodyLoaded(editor);}};const DOM$5=DOMUtils.DOM;const createIframeElement=(id,title,customAttrs,tabindex)=>{const iframe=SugarElement.fromTag('iframe');tabindex.each(t=>set$2(iframe,'tabindex',t));setAll$1(iframe,customAttrs);setAll$1(iframe,{id:id+'_ifr',frameBorder:'0',allowTransparency:'true',title});add$2(iframe,'tox-edit-area__iframe');return iframe;};const getIframeHtml=editor=>{let iframeHTML=getDocType(editor)+'<html><head>';if(getDocumentBaseUrl(editor)!==editor.documentBaseUrl){iframeHTML+='<base href=\"'+editor.documentBaseURI.getURI()+'\" />';}iframeHTML+='<meta http-equiv=\"Content-Type\" content=\"text/html; charset=UTF-8\" />';const bodyId=getBodyId(editor);const bodyClass=getBodyClass(editor);const translatedAriaText=editor.translate(getIframeAriaText(editor));if(getContentSecurityPolicy(editor)){iframeHTML+='<meta http-equiv=\"Content-Security-Policy\" content=\"'+getContentSecurityPolicy(editor)+'\" />';}iframeHTML+='</head>'+`<body id=\"${bodyId}\" class=\"mce-content-body ${bodyClass}\" data-id=\"${editor.id}\" aria-label=\"${translatedAriaText}\">`+'<br>'+'</body></html>';return iframeHTML;};const createIframe=(editor,boxInfo)=>{const iframeTitle=editor.translate('Rich Text Area');const tabindex=getOpt(SugarElement.fromDom(editor.getElement()),'tabindex').bind(toInt);const ifr=createIframeElement(editor.id,iframeTitle,getIframeAttrs(editor),tabindex).dom;ifr.onload=()=>{ifr.onload=null;editor.dispatch('load');};editor.contentAreaContainer=boxInfo.iframeContainer;editor.iframeElement=ifr;editor.iframeHTML=getIframeHtml(editor);DOM$5.add(boxInfo.iframeContainer,ifr);};const init$1=(editor,boxInfo)=>{createIframe(editor,boxInfo);if(boxInfo.editorContainer){boxInfo.editorContainer.style.display=editor.orgDisplay;editor.hidden=DOM$5.isHidden(boxInfo.editorContainer);}editor.getElement().style.display='none';DOM$5.setAttrib(editor.id,'aria-hidden','true');initContentBody(editor);};const DOM$4=DOMUtils.DOM;const initPlugin=(editor,initializedPlugins,plugin)=>{const Plugin=PluginManager.get(plugin);const pluginUrl=PluginManager.urls[plugin]||editor.documentBaseUrl.replace(/\\/$/,'');plugin=Tools.trim(plugin);if(Plugin&&Tools.inArray(initializedPlugins,plugin)===-1){if(editor.plugins[plugin]){return;}try{const pluginInstance=Plugin(editor,pluginUrl)||{};editor.plugins[plugin]=pluginInstance;if(isFunction(pluginInstance.init)){pluginInstance.init(editor,pluginUrl);initializedPlugins.push(plugin);}}catch(e){pluginInitError(editor,plugin,e);}}};const trimLegacyPrefix=name=>{return name.replace(/^\\-/,'');};const initPlugins=editor=>{const initializedPlugins=[];each$e(getPlugins(editor),name=>{initPlugin(editor,initializedPlugins,trimLegacyPrefix(name));});};const initIcons=editor=>{const iconPackName=Tools.trim(getIconPackName(editor));const currentIcons=editor.ui.registry.getAll().icons;const loadIcons={...IconManager.get('default').icons,...IconManager.get(iconPackName).icons};each$d(loadIcons,(svgData,icon)=>{if(!has$2(currentIcons,icon)){editor.ui.registry.addIcon(icon,svgData);}});};const initTheme=editor=>{const theme=getTheme(editor);if(isString(theme)){const Theme=ThemeManager.get(theme);editor.theme=Theme(editor,ThemeManager.urls[theme])||{};if(isFunction(editor.theme.init)){editor.theme.init(editor,ThemeManager.urls[theme]||editor.documentBaseUrl.replace(/\\/$/,''));}}else{editor.theme={};}};const initModel=editor=>{const model=getModel(editor);const Model=ModelManager.get(model);editor.model=Model(editor,ModelManager.urls[model]);};const renderFromLoadedTheme=editor=>{const render=editor.theme.renderUI;return render?render():renderThemeFalse(editor);};const renderFromThemeFunc=editor=>{const elm=editor.getElement();const theme=getTheme(editor);const info=theme(editor,elm);if(info.editorContainer.nodeType){info.editorContainer.id=info.editorContainer.id||editor.id+'_parent';}if(info.iframeContainer&&info.iframeContainer.nodeType){info.iframeContainer.id=info.iframeContainer.id||editor.id+'_iframecontainer';}info.height=info.iframeHeight?info.iframeHeight:elm.offsetHeight;return info;};const createThemeFalseResult=(element,iframe)=>{return{editorContainer:element,iframeContainer:iframe,api:{}};};const renderThemeFalseIframe=targetElement=>{const iframeContainer=DOM$4.create('div');DOM$4.insertAfter(iframeContainer,targetElement);return createThemeFalseResult(iframeContainer,iframeContainer);};const renderThemeFalse=editor=>{const targetElement=editor.getElement();return editor.inline?createThemeFalseResult(null):renderThemeFalseIframe(targetElement);};const renderThemeUi=editor=>{const elm=editor.getElement();editor.orgDisplay=elm.style.display;if(isString(getTheme(editor))){return renderFromLoadedTheme(editor);}else if(isFunction(getTheme(editor))){return renderFromThemeFunc(editor);}else{return renderThemeFalse(editor);}};const augmentEditorUiApi=(editor,api)=>{const uiApiFacade={show:Optional.from(api.show).getOr(noop),hide:Optional.from(api.hide).getOr(noop),isEnabled:Optional.from(api.isEnabled).getOr(always),setEnabled:state=>{if(!editor.mode.isReadOnly()){Optional.from(api.setEnabled).each(f=>f(state));}}};editor.ui={...editor.ui,...uiApiFacade};};const init=editor=>{editor.dispatch('ScriptsLoaded');initIcons(editor);initTheme(editor);initModel(editor);initPlugins(editor);const renderInfo=renderThemeUi(editor);augmentEditorUiApi(editor,Optional.from(renderInfo.api).getOr({}));editor.editorContainer=renderInfo.editorContainer;appendContentCssFromSettings(editor);if(editor.inline){initContentBody(editor);}else{init$1(editor,{editorContainer:renderInfo.editorContainer,iframeContainer:renderInfo.iframeContainer});}};const DOM$3=DOMUtils.DOM;const hasSkipLoadPrefix=name=>name.charAt(0)==='-';const loadLanguage=(scriptLoader,editor)=>{const languageCode=getLanguageCode(editor);const languageUrl=getLanguageUrl(editor);if(!I18n.hasCode(languageCode)&&languageCode!=='en'){const url=isNotEmpty(languageUrl)?languageUrl:`${editor.editorManager.baseURL}/langs/${languageCode}.js`;scriptLoader.add(url).catch(()=>{languageLoadError(editor,url,languageCode);});}};const loadTheme=(editor,suffix)=>{const theme=getTheme(editor);if(isString(theme)&&!hasSkipLoadPrefix(theme)&&!has$2(ThemeManager.urls,theme)){const themeUrl=getThemeUrl(editor);const url=themeUrl?editor.documentBaseURI.toAbsolute(themeUrl):`themes/${theme}/theme${suffix}.js`;ThemeManager.load(theme,url).catch(()=>{themeLoadError(editor,url,theme);});}};const loadModel=(editor,suffix)=>{const model=getModel(editor);if(model!=='plugin'&&!has$2(ModelManager.urls,model)){const modelUrl=getModelUrl(editor);const url=isString(modelUrl)?editor.documentBaseURI.toAbsolute(modelUrl):`models/${model}/model${suffix}.js`;ModelManager.load(model,url).catch(()=>{modelLoadError(editor,url,model);});}};const getIconsUrlMetaFromUrl=editor=>Optional.from(getIconsUrl(editor)).filter(isNotEmpty).map(url=>({url,name:Optional.none()}));const getIconsUrlMetaFromName=(editor,name,suffix)=>Optional.from(name).filter(name=>isNotEmpty(name)&&!IconManager.has(name)).map(name=>({url:`${editor.editorManager.baseURL}/icons/${name}/icons${suffix}.js`,name:Optional.some(name)}));const loadIcons=(scriptLoader,editor,suffix)=>{const defaultIconsUrl=getIconsUrlMetaFromName(editor,'default',suffix);const customIconsUrl=getIconsUrlMetaFromUrl(editor).orThunk(()=>getIconsUrlMetaFromName(editor,getIconPackName(editor),''));each$e(cat([defaultIconsUrl,customIconsUrl]),urlMeta=>{scriptLoader.add(urlMeta.url).catch(()=>{iconsLoadError(editor,urlMeta.url,urlMeta.name.getOrUndefined());});});};const loadPlugins=(editor,suffix)=>{const loadPlugin=(name,url)=>{PluginManager.load(name,url).catch(()=>{pluginLoadError(editor,url,name);});};each$d(getExternalPlugins$1(editor),(url,name)=>{loadPlugin(name,url);editor.options.set('plugins',getPlugins(editor).concat(name));});each$e(getPlugins(editor),plugin=>{plugin=Tools.trim(plugin);if(plugin&&!PluginManager.urls[plugin]&&!hasSkipLoadPrefix(plugin)){loadPlugin(plugin,`plugins/${plugin}/plugin${suffix}.js`);}});};const isThemeLoaded=editor=>{const theme=getTheme(editor);return!isString(theme)||isNonNullable(ThemeManager.get(theme));};const isModelLoaded=editor=>{const model=getModel(editor);return isNonNullable(ModelManager.get(model));};const loadScripts=(editor,suffix)=>{const scriptLoader=ScriptLoader.ScriptLoader;const initEditor=()=>{if(!editor.removed&&isThemeLoaded(editor)&&isModelLoaded(editor)){init(editor);}};loadTheme(editor,suffix);loadModel(editor,suffix);loadLanguage(scriptLoader,editor);loadIcons(scriptLoader,editor,suffix);loadPlugins(editor,suffix);scriptLoader.loadQueue().then(initEditor,initEditor);};const getStyleSheetLoader=(element,editor)=>instance.forElement(element,{contentCssCors:hasContentCssCors(editor),referrerPolicy:getReferrerPolicy(editor)});const render=editor=>{const id=editor.id;I18n.setCode(getLanguageCode(editor));const readyHandler=()=>{DOM$3.unbind(window,'ready',readyHandler);editor.render();};if(!EventUtils.Event.domLoaded){DOM$3.bind(window,'ready',readyHandler);return;}if(!editor.getElement()){return;}const element=SugarElement.fromDom(editor.getElement());const snapshot=clone$4(element);editor.on('remove',()=>{eachr(element.dom.attributes,attr=>remove$b(element,attr.name));setAll$1(element,snapshot);});editor.ui.styleSheetLoader=getStyleSheetLoader(element,editor);if(!isInline(editor)){editor.orgVisibility=editor.getElement().style.visibility;editor.getElement().style.visibility='hidden';}else{editor.inline=true;}const form=editor.getElement().form||DOM$3.getParent(id,'form');if(form){editor.formElement=form;if(hasHiddenInput(editor)&&!isTextareaOrInput(editor.getElement())){DOM$3.insertAfter(DOM$3.create('input',{type:'hidden',name:id}),id);editor.hasHiddenInput=true;}editor.formEventDelegate=e=>{editor.dispatch(e.type,e);};DOM$3.bind(form,'submit reset',editor.formEventDelegate);editor.on('reset',()=>{editor.resetContent();});if(shouldPatchSubmit(editor)&&!form.submit.nodeType&&!form.submit.length&&!form._mceOldSubmit){form._mceOldSubmit=form.submit;form.submit=()=>{editor.editorManager.triggerSave();editor.setDirty(false);return form._mceOldSubmit(form);};}}editor.windowManager=WindowManager(editor);editor.notificationManager=NotificationManager(editor);if(isEncodingXml(editor)){editor.on('GetContent',e=>{if(e.save){e.content=DOM$3.encode(e.content);}});}if(shouldAddFormSubmitTrigger(editor)){editor.on('submit',()=>{if(editor.initialized){editor.save();}});}if(shouldAddUnloadTrigger(editor)){editor._beforeUnload=()=>{if(editor.initialized&&!editor.destroyed&&!editor.isHidden()){editor.save({format:'raw',no_events:true,set_dirty:false});}};editor.editorManager.on('BeforeUnload',editor._beforeUnload);}editor.editorManager.add(editor);loadScripts(editor,editor.suffix);};const sectionResult=(sections,settings)=>({sections:constant(sections),options:constant(settings)});const deviceDetection=detect$2().deviceType;const isPhone=deviceDetection.isPhone();const isTablet=deviceDetection.isTablet();const normalizePlugins=plugins=>{if(isNullable(plugins)){return[];}else{const pluginNames=isArray$1(plugins)?plugins:plugins.split(/[ ,]/);const trimmedPlugins=map$3(pluginNames,trim$3);return filter$5(trimmedPlugins,isNotEmpty);}};const extractSections=(keys,options)=>{const result=bifilter(options,(value,key)=>{return contains$2(keys,key);});return sectionResult(result.t,result.f);};const getSection=(sectionResult,name,defaults={})=>{const sections=sectionResult.sections();const sectionOptions=get$a(sections,name).getOr({});return Tools.extend({},defaults,sectionOptions);};const hasSection=(sectionResult,name)=>{return has$2(sectionResult.sections(),name);};const getSectionConfig=(sectionResult,name)=>{return hasSection(sectionResult,name)?sectionResult.sections()[name]:{};};const getMobileOverrideOptions=(mobileOptions,isPhone)=>{const defaultMobileOptions={table_grid:false,object_resizing:false,resize:false,toolbar_mode:get$a(mobileOptions,'toolbar_mode').getOr('scrolling'),toolbar_sticky:false};const defaultPhoneOptions={menubar:false};return{...defaultMobileOptions,...(isPhone?defaultPhoneOptions:{})};};const getExternalPlugins=(overrideOptions,options)=>{var _a;const userDefinedExternalPlugins=(_a=options.external_plugins)!==null&&_a!==void 0?_a:{};if(overrideOptions&&overrideOptions.external_plugins){return Tools.extend({},overrideOptions.external_plugins,userDefinedExternalPlugins);}else{return userDefinedExternalPlugins;}};const combinePlugins=(forcedPlugins,plugins)=>[...normalizePlugins(forcedPlugins),...normalizePlugins(plugins)];const getPlatformPlugins=(isMobileDevice,sectionResult,desktopPlugins,mobilePlugins)=>{if(isMobileDevice&&hasSection(sectionResult,'mobile')){return mobilePlugins;}else{return desktopPlugins;}};const processPlugins=(isMobileDevice,sectionResult,defaultOverrideOptions,options)=>{const forcedPlugins=normalizePlugins(defaultOverrideOptions.forced_plugins);const desktopPlugins=normalizePlugins(options.plugins);const mobileConfig=getSectionConfig(sectionResult,'mobile');const mobilePlugins=mobileConfig.plugins?normalizePlugins(mobileConfig.plugins):desktopPlugins;const platformPlugins=getPlatformPlugins(isMobileDevice,sectionResult,desktopPlugins,mobilePlugins);const combinedPlugins=combinePlugins(forcedPlugins,platformPlugins);return Tools.extend(options,{forced_plugins:forcedPlugins,plugins:combinedPlugins});};const isOnMobile=(isMobileDevice,sectionResult)=>{return isMobileDevice&&hasSection(sectionResult,'mobile');};const combineOptions=(isMobileDevice,isPhone,defaultOptions,defaultOverrideOptions,options)=>{var _a;const deviceOverrideOptions=isMobileDevice?{mobile:getMobileOverrideOptions((_a=options.mobile)!==null&&_a!==void 0?_a:{},isPhone)}:{};const sectionResult=extractSections(['mobile'],deepMerge(deviceOverrideOptions,options));const extendedOptions=Tools.extend(defaultOptions,defaultOverrideOptions,sectionResult.options(),isOnMobile(isMobileDevice,sectionResult)?getSection(sectionResult,'mobile'):{},{external_plugins:getExternalPlugins(defaultOverrideOptions,sectionResult.options())});return processPlugins(isMobileDevice,sectionResult,defaultOverrideOptions,extendedOptions);};const normalizeOptions=(defaultOverrideOptions,options)=>combineOptions(isPhone||isTablet,isPhone,options,defaultOverrideOptions,options);const addVisual=(editor,elm)=>addVisual$1(editor,elm);const registerExecCommands$3=editor=>{const toggleFormat=(name,value)=>{editor.formatter.toggle(name,value);editor.nodeChanged();};const toggleAlign=align=>()=>{each$e('left,center,right,justify'.split(','),name=>{if(align!==name){editor.formatter.remove('align'+name);}});if(align!=='none'){toggleFormat('align'+align);}};editor.editorCommands.addCommands({JustifyLeft:toggleAlign('left'),JustifyCenter:toggleAlign('center'),JustifyRight:toggleAlign('right'),JustifyFull:toggleAlign('justify'),JustifyNone:toggleAlign('none')});};const registerQueryStateCommands$1=editor=>{const alignStates=name=>()=>{const selection=editor.selection;const nodes=selection.isCollapsed()?[editor.dom.getParent(selection.getNode(),editor.dom.isBlock)]:selection.getSelectedBlocks();return exists(nodes,node=>isNonNullable(editor.formatter.matchNode(node,name)));};editor.editorCommands.addCommands({JustifyLeft:alignStates('alignleft'),JustifyCenter:alignStates('aligncenter'),JustifyRight:alignStates('alignright'),JustifyFull:alignStates('alignjustify')},'state');};const registerCommands$a=editor=>{registerExecCommands$3(editor);registerQueryStateCommands$1(editor);};const registerCommands$9=editor=>{editor.editorCommands.addCommands({'Cut,Copy,Paste':command=>{const doc=editor.getDoc();let failed;try{doc.execCommand(command);}catch(ex){failed=true;}if(command==='paste'&&!doc.queryCommandEnabled(command)){failed=true;}if(failed||!doc.queryCommandSupported(command)){let msg=editor.translate(`Your browser doesn't support direct access to the clipboard. `+'Please use the Ctrl+X/C/V keyboard shortcuts instead.');if(Env.os.isMacOS()||Env.os.isiOS()){msg=msg.replace(/Ctrl\\+/g,'\\u2318+');}editor.notificationManager.open({text:msg,type:'error'});}}});};const trimOrPadLeftRight=(dom,rng,html)=>{const root=SugarElement.fromDom(dom.getRoot());if(needsToBeNbspLeft(root,CaretPosition.fromRangeStart(rng))){html=html.replace(/^ /,'&nbsp;');}else{html=html.replace(/^&nbsp;/,' ');}if(needsToBeNbspRight(root,CaretPosition.fromRangeEnd(rng))){html=html.replace(/(&nbsp;| )(<br( \\/)>)?$/,'&nbsp;');}else{html=html.replace(/&nbsp;(<br( \\/)?>)?$/,' ');}return html;};const processValue$1=value=>{if(typeof value!=='string'){const details=Tools.extend({paste:value.paste,data:{paste:value.paste}},value);return{content:value.content,details};}return{content:value,details:{}};};const trimOrPad=(editor,value)=>{const selection=editor.selection;const dom=editor.dom;if(/^ | $/.test(value)){return trimOrPadLeftRight(dom,selection.getRng(),value);}else{return value;}};const insertAtCaret=(editor,value)=>{const{content,details}=processValue$1(value);preProcessSetContent(editor,{...details,content:trimOrPad(editor,content),format:'html',set:false,selection:true}).each(args=>{const insertedContent=insertContent$1(editor,args.content,details);postProcessSetContent(editor,insertedContent,args);editor.addVisual();});};const registerCommands$8=editor=>{editor.editorCommands.addCommands({mceCleanup:()=>{const bm=editor.selection.getBookmark();editor.setContent(editor.getContent());editor.selection.moveToBookmark(bm);},insertImage:(_command,_ui,value)=>{insertAtCaret(editor,editor.dom.createHTML('img',{src:value}));},insertHorizontalRule:()=>{editor.execCommand('mceInsertContent',false,'<hr>');},insertText:(_command,_ui,value)=>{insertAtCaret(editor,editor.dom.encode(value));},insertHTML:(_command,_ui,value)=>{insertAtCaret(editor,value);},mceInsertContent:(_command,_ui,value)=>{insertAtCaret(editor,value);},mceSetContent:(_command,_ui,value)=>{editor.setContent(value);},mceReplaceContent:(_command,_ui,value)=>{editor.execCommand('mceInsertContent',false,value.replace(/\\{\\$selection\\}/g,editor.selection.getContent({format:'text'})));},mceNewDocument:()=>{editor.setContent('');}});};const legacyPropNames={'font-size':'size','font-family':'face'};const isFont=isTag('font');const getSpecifiedFontProp=(propName,rootElm,elm)=>{const getProperty=elm=>getRaw$1(elm,propName).orThunk(()=>{if(isFont(elm)){return get$a(legacyPropNames,propName).bind(legacyPropName=>getOpt(elm,legacyPropName));}else{return Optional.none();}});const isRoot=elm=>eq(SugarElement.fromDom(rootElm),elm);return closest$2(SugarElement.fromDom(elm),elm=>getProperty(elm),isRoot);};const normalizeFontFamily=fontFamily=>fontFamily.replace(/[\\'\\\"\\\\]/g,'').replace(/,\\s+/g,',');const getComputedFontProp=(propName,elm)=>Optional.from(DOMUtils.DOM.getStyle(elm,propName,true));const getFontProp=propName=>(rootElm,elm)=>Optional.from(elm).map(SugarElement.fromDom).filter(isElement$7).bind(element=>getSpecifiedFontProp(propName,rootElm,element.dom).or(getComputedFontProp(propName,element.dom))).getOr('');const getFontSize=getFontProp('font-size');const getFontFamily=compose(normalizeFontFamily,getFontProp('font-family'));const findFirstCaretElement=editor=>firstPositionIn(editor.getBody()).bind(caret=>{const container=caret.container();return Optional.from(isText$a(container)?container.parentNode:container);});const getCaretElement=editor=>Optional.from(editor.selection.getRng()).bind(rng=>{const root=editor.getBody();const atStartOfNode=rng.startContainer===root&&rng.startOffset===0;return atStartOfNode?Optional.none():Optional.from(editor.selection.getStart(true));});const bindRange=(editor,binder)=>getCaretElement(editor).orThunk(curry(findFirstCaretElement,editor)).map(SugarElement.fromDom).filter(isElement$7).bind(binder);const mapRange=(editor,mapper)=>bindRange(editor,compose1(Optional.some,mapper));const fromFontSizeNumber=(editor,value)=>{if(/^[0-9.]+$/.test(value)){const fontSizeNumber=parseInt(value,10);if(fontSizeNumber>=1&&fontSizeNumber<=7){const fontSizes=getFontStyleValues(editor);const fontClasses=getFontSizeClasses(editor);if(fontClasses.length>0){return fontClasses[fontSizeNumber-1]||value;}else{return fontSizes[fontSizeNumber-1]||value;}}else{return value;}}else{return value;}};const normalizeFontNames=font=>{const fonts=font.split(/\\s*,\\s*/);return map$3(fonts,font=>{if(font.indexOf(' ')!==-1&&!(startsWith(font,'\"')||startsWith(font,`'`))){return`'${font}'`;}else{return font;}}).join(',');};const fontNameAction=(editor,value)=>{const font=fromFontSizeNumber(editor,value);editor.formatter.toggle('fontname',{value:normalizeFontNames(font)});editor.nodeChanged();};const fontNameQuery=editor=>mapRange(editor,elm=>getFontFamily(editor.getBody(),elm.dom)).getOr('');const fontSizeAction=(editor,value)=>{editor.formatter.toggle('fontsize',{value:fromFontSizeNumber(editor,value)});editor.nodeChanged();};const fontSizeQuery=editor=>mapRange(editor,elm=>getFontSize(editor.getBody(),elm.dom)).getOr('');const lineHeightQuery=editor=>mapRange(editor,elm=>{const root=SugarElement.fromDom(editor.getBody());const specifiedStyle=closest$2(elm,elm=>getRaw$1(elm,'line-height'),curry(eq,root));const computedStyle=()=>{const lineHeight=parseFloat(get$7(elm,'line-height'));const fontSize=parseFloat(get$7(elm,'font-size'));return String(lineHeight/fontSize);};return specifiedStyle.getOrThunk(computedStyle);}).getOr('');const lineHeightAction=(editor,lineHeight)=>{editor.formatter.toggle('lineheight',{value:String(lineHeight)});editor.nodeChanged();};const registerExecCommands$2=editor=>{const toggleFormat=(name,value)=>{editor.formatter.toggle(name,value);editor.nodeChanged();};editor.editorCommands.addCommands({'Bold,Italic,Underline,Strikethrough,Superscript,Subscript':command=>{toggleFormat(command);},'ForeColor,HiliteColor':(command,_ui,value)=>{toggleFormat(command,{value});},'BackColor':(_command,_ui,value)=>{toggleFormat('hilitecolor',{value});},'FontName':(_command,_ui,value)=>{fontNameAction(editor,value);},'FontSize':(_command,_ui,value)=>{fontSizeAction(editor,value);},'LineHeight':(_command,_ui,value)=>{lineHeightAction(editor,value);},'Lang':(command,_ui,lang)=>{var _a;toggleFormat(command,{value:lang.code,customValue:(_a=lang.customCode)!==null&&_a!==void 0?_a:null});},'RemoveFormat':command=>{editor.formatter.remove(command);},'mceBlockQuote':()=>{toggleFormat('blockquote');},'FormatBlock':(_command,_ui,value)=>{toggleFormat(isString(value)?value:'p');},'mceToggleFormat':(_command,_ui,value)=>{toggleFormat(value);}});};const registerQueryValueCommands=editor=>{const isFormatMatch=name=>editor.formatter.match(name);editor.editorCommands.addCommands({'Bold,Italic,Underline,Strikethrough,Superscript,Subscript':command=>isFormatMatch(command),'mceBlockQuote':()=>isFormatMatch('blockquote')},'state');editor.editorCommands.addQueryValueHandler('FontName',()=>fontNameQuery(editor));editor.editorCommands.addQueryValueHandler('FontSize',()=>fontSizeQuery(editor));editor.editorCommands.addQueryValueHandler('LineHeight',()=>lineHeightQuery(editor));};const registerCommands$7=editor=>{registerExecCommands$2(editor);registerQueryValueCommands(editor);};const registerCommands$6=editor=>{editor.editorCommands.addCommands({mceAddUndoLevel:()=>{editor.undoManager.add();},mceEndUndoLevel:()=>{editor.undoManager.add();},Undo:()=>{editor.undoManager.undo();},Redo:()=>{editor.undoManager.redo();}});};const registerCommands$5=editor=>{editor.editorCommands.addCommands({Indent:()=>{indent(editor);},Outdent:()=>{outdent(editor);}});editor.editorCommands.addCommands({Outdent:()=>canOutdent(editor)},'state');};const registerCommands$4=editor=>{const applyLinkToSelection=(_command,_ui,value)=>{const linkDetails=isString(value)?{href:value}:value;const anchor=editor.dom.getParent(editor.selection.getNode(),'a');if(isObject(linkDetails)&&isString(linkDetails.href)){linkDetails.href=linkDetails.href.replace(/ /g,'%20');if(!anchor||!linkDetails.href){editor.formatter.remove('link');}if(linkDetails.href){editor.formatter.apply('link',linkDetails,anchor);}}};editor.editorCommands.addCommands({unlink:()=>{if(editor.selection.isCollapsed()){const elm=editor.dom.getParent(editor.selection.getStart(),'a');if(elm){editor.dom.remove(elm,true);}return;}editor.formatter.remove('link');},mceInsertLink:applyLinkToSelection,createLink:applyLinkToSelection});};const registerExecCommands$1=editor=>{editor.editorCommands.addCommands({'InsertUnorderedList,InsertOrderedList':command=>{editor.getDoc().execCommand(command);const listElm=editor.dom.getParent(editor.selection.getNode(),'ol,ul');if(listElm){const listParent=listElm.parentNode;if(listParent&&/^(H[1-6]|P|ADDRESS|PRE)$/.test(listParent.nodeName)){const bm=editor.selection.getBookmark();editor.dom.split(listParent,listElm);editor.selection.moveToBookmark(bm);}}}});};const registerQueryStateCommands=editor=>{editor.editorCommands.addCommands({'InsertUnorderedList,InsertOrderedList':command=>{const list=editor.dom.getParent(editor.selection.getNode(),'ul,ol');return list&&(command==='insertunorderedlist'&&list.tagName==='UL'||command==='insertorderedlist'&&list.tagName==='OL');}},'state');};const registerCommands$3=editor=>{registerExecCommands$1(editor);registerQueryStateCommands(editor);};const registerCommands$2=editor=>{editor.editorCommands.addCommands({insertParagraph:()=>{insertBreak(blockbreak,editor);},mceInsertNewLine:(_command,_ui,value)=>{insert(editor,value);},InsertLineBreak:(_command,_ui,_value)=>{insertBreak(linebreak,editor);}});};const registerCommands$1=editor=>{editor.editorCommands.addCommands({mceSelectNodeDepth:(_command,_ui,value)=>{let counter=0;editor.dom.getParent(editor.selection.getNode(),node=>{if(isElement$6(node)&&counter++===value){editor.selection.select(node);return false;}else{return true;}},editor.getBody());},mceSelectNode:(_command,_ui,value)=>{editor.selection.select(value);},selectAll:()=>{const editingHost=editor.dom.getParent(editor.selection.getStart(),isContentEditableTrue$3);if(editingHost){const rng=editor.dom.createRng();rng.selectNodeContents(editingHost);editor.selection.setRng(rng);}}});};const registerExecCommands=editor=>{editor.editorCommands.addCommands({mceRemoveNode:(_command,_ui,value)=>{const node=value!==null&&value!==void 0?value:editor.selection.getNode();if(node!==editor.getBody()){const bm=editor.selection.getBookmark();editor.dom.remove(node,true);editor.selection.moveToBookmark(bm);}},mcePrint:()=>{editor.getWin().print();},mceFocus:(_command,_ui,value)=>{focus(editor,value===true);},mceToggleVisualAid:()=>{editor.hasVisual=!editor.hasVisual;editor.addVisual();}});};const registerCommands=editor=>{registerCommands$a(editor);registerCommands$9(editor);registerCommands$6(editor);registerCommands$1(editor);registerCommands$8(editor);registerCommands$4(editor);registerCommands$5(editor);registerCommands$2(editor);registerCommands$3(editor);registerCommands$7(editor);registerExecCommands(editor);};class EditorCommands{constructor(editor){this.commands={state:{},exec:{},value:{}};this.editor=editor;}execCommand(command,ui=false,value,args){const editor=this.editor;const lowerCaseCommand=command.toLowerCase();const skipFocus=args===null||args===void 0?void 0:args.skip_focus;if(editor.removed){return false;}if(lowerCaseCommand!=='mcefocus'){if(!/^(mceAddUndoLevel|mceEndUndoLevel)$/i.test(lowerCaseCommand)&&!skipFocus){editor.focus();}else{restore(editor);}}const eventArgs=editor.dispatch('BeforeExecCommand',{command,ui,value});if(eventArgs.isDefaultPrevented()){return false;}const func=this.commands.exec[lowerCaseCommand];if(isFunction(func)){func(lowerCaseCommand,ui,value);editor.dispatch('ExecCommand',{command,ui,value});return true;}return false;}queryCommandState(command){if(this.editor.quirks.isHidden()||this.editor.removed){return false;}const lowerCaseCommand=command.toLowerCase();const func=this.commands.state[lowerCaseCommand];if(isFunction(func)){return func(lowerCaseCommand);}return false;}queryCommandValue(command){if(this.editor.quirks.isHidden()||this.editor.removed){return'';}const lowerCaseCommand=command.toLowerCase();const func=this.commands.value[lowerCaseCommand];if(isFunction(func)){return func(lowerCaseCommand);}return'';}addCommands(commandList,type='exec'){const commands=this.commands;each$d(commandList,(callback,command)=>{each$e(command.toLowerCase().split(','),command=>{commands[type][command]=callback;});});}addCommand(command,callback,scope){const lowerCaseCommand=command.toLowerCase();this.commands.exec[lowerCaseCommand]=(_command,ui,value)=>callback.call(scope!==null&&scope!==void 0?scope:this.editor,ui,value);}queryCommandSupported(command){const lowerCaseCommand=command.toLowerCase();if(this.commands.exec[lowerCaseCommand]){return true;}else{return false;}}addQueryStateHandler(command,callback,scope){this.commands.state[command.toLowerCase()]=()=>callback.call(scope!==null&&scope!==void 0?scope:this.editor);}addQueryValueHandler(command,callback,scope){this.commands.value[command.toLowerCase()]=()=>callback.call(scope!==null&&scope!==void 0?scope:this.editor);}}const internalContentEditableAttr='data-mce-contenteditable';const toggleClass=(elm,cls,state)=>{if(has(elm,cls)&&!state){remove$8(elm,cls);}else if(state){add$2(elm,cls);}};const setEditorCommandState=(editor,cmd,state)=>{try{editor.getDoc().execCommand(cmd,false,String(state));}catch(ex){}};const setContentEditable=(elm,state)=>{elm.dom.contentEditable=state?'true':'false';};const switchOffContentEditableTrue=elm=>{each$e(descendants(elm,'*[contenteditable=\"true\"]'),elm=>{set$2(elm,internalContentEditableAttr,'true');setContentEditable(elm,false);});};const switchOnContentEditableTrue=elm=>{each$e(descendants(elm,`*[${internalContentEditableAttr}=\"true\"]`),elm=>{remove$b(elm,internalContentEditableAttr);setContentEditable(elm,true);});};const removeFakeSelection=editor=>{Optional.from(editor.selection.getNode()).each(elm=>{elm.removeAttribute('data-mce-selected');});};const restoreFakeSelection=editor=>{editor.selection.setRng(editor.selection.getRng());};const toggleReadOnly=(editor,state)=>{const body=SugarElement.fromDom(editor.getBody());toggleClass(body,'mce-content-readonly',state);if(state){editor.selection.controlSelection.hideResizeRect();editor._selectionOverrides.hideFakeCaret();removeFakeSelection(editor);editor.readonly=true;setContentEditable(body,false);switchOffContentEditableTrue(body);}else{editor.readonly=false;setContentEditable(body,true);switchOnContentEditableTrue(body);setEditorCommandState(editor,'StyleWithCSS',false);setEditorCommandState(editor,'enableInlineTableEditing',false);setEditorCommandState(editor,'enableObjectResizing',false);if(hasEditorOrUiFocus(editor)){editor.focus();}restoreFakeSelection(editor);editor.nodeChanged();}};const isReadOnly=editor=>editor.readonly;const registerFilters=editor=>{editor.parser.addAttributeFilter('contenteditable',nodes=>{if(isReadOnly(editor)){each$e(nodes,node=>{node.attr(internalContentEditableAttr,node.attr('contenteditable'));node.attr('contenteditable','false');});}});editor.serializer.addAttributeFilter(internalContentEditableAttr,nodes=>{if(isReadOnly(editor)){each$e(nodes,node=>{node.attr('contenteditable',node.attr(internalContentEditableAttr));});}});editor.serializer.addTempAttr(internalContentEditableAttr);};const registerReadOnlyContentFilters=editor=>{if(editor.serializer){registerFilters(editor);}else{editor.on('PreInit',()=>{registerFilters(editor);});}};const isClickEvent=e=>e.type==='click';const allowedEvents=['copy'];const isReadOnlyAllowedEvent=e=>contains$2(allowedEvents,e.type);const getAnchorHrefOpt=(editor,elm)=>{const isRoot=elm=>eq(elm,SugarElement.fromDom(editor.getBody()));return closest$3(elm,'a',isRoot).bind(a=>getOpt(a,'href'));};const processReadonlyEvents=(editor,e)=>{if(isClickEvent(e)&&!VK.metaKeyPressed(e)){const elm=SugarElement.fromDom(e.target);getAnchorHrefOpt(editor,elm).each(href=>{e.preventDefault();if(/^#/.test(href)){const targetEl=editor.dom.select(`${href},[name=\"${removeLeading(href,'#')}\"]`);if(targetEl.length){editor.selection.scrollIntoView(targetEl[0],true);}}else{window.open(href,'_blank','rel=noopener noreferrer,menubar=yes,toolbar=yes,location=yes,status=yes,resizable=yes,scrollbars=yes');}});}else if(isReadOnlyAllowedEvent(e)){editor.dispatch(e.type,e);}};const registerReadOnlySelectionBlockers=editor=>{editor.on('ShowCaret',e=>{if(isReadOnly(editor)){e.preventDefault();}});editor.on('ObjectSelected',e=>{if(isReadOnly(editor)){e.preventDefault();}});};const nativeEvents=Tools.makeMap('focus blur focusin focusout click dblclick mousedown mouseup mousemove mouseover beforepaste paste cut copy selectionchange '+'mouseout mouseenter mouseleave wheel keydown keypress keyup input beforeinput contextmenu dragstart dragend dragover '+'draggesture dragdrop drop drag submit '+'compositionstart compositionend compositionupdate touchstart touchmove touchend touchcancel',' ');class EventDispatcher{constructor(settings){this.bindings={};this.settings=settings||{};this.scope=this.settings.scope||this;this.toggleEvent=this.settings.toggleEvent||never;}static isNative(name){return!!nativeEvents[name.toLowerCase()];}fire(name,args){return this.dispatch(name,args);}dispatch(name,args){const lcName=name.toLowerCase();const event=normalize$3(lcName,args!==null&&args!==void 0?args:{},this.scope);if(this.settings.beforeFire){this.settings.beforeFire(event);}const handlers=this.bindings[lcName];if(handlers){for(let i=0,l=handlers.length;i<l;i++){const callback=handlers[i];if(callback.removed){continue;}if(callback.once){this.off(lcName,callback.func);}if(event.isImmediatePropagationStopped()){return event;}if(callback.func.call(this.scope,event)===false){event.preventDefault();return event;}}}return event;}on(name,callback,prepend,extra){if(callback===false){callback=never;}if(callback){const wrappedCallback={func:callback,removed:false};if(extra){Tools.extend(wrappedCallback,extra);}const names=name.toLowerCase().split(' ');let i=names.length;while(i--){const currentName=names[i];let handlers=this.bindings[currentName];if(!handlers){handlers=[];this.toggleEvent(currentName,true);}if(prepend){handlers=[wrappedCallback,...handlers];}else{handlers=[...handlers,wrappedCallback];}this.bindings[currentName]=handlers;}}return this;}off(name,callback){if(name){const names=name.toLowerCase().split(' ');let i=names.length;while(i--){const currentName=names[i];let handlers=this.bindings[currentName];if(!currentName){each$d(this.bindings,(_value,bindingName)=>{this.toggleEvent(bindingName,false);delete this.bindings[bindingName];});return this;}if(handlers){if(!callback){handlers.length=0;}else{const filteredHandlers=partition$2(handlers,handler=>handler.func===callback);handlers=filteredHandlers.fail;this.bindings[currentName]=handlers;each$e(filteredHandlers.pass,handler=>{handler.removed=true;});}if(!handlers.length){this.toggleEvent(name,false);delete this.bindings[currentName];}}}}else{each$d(this.bindings,(_value,name)=>{this.toggleEvent(name,false);});this.bindings={};}return this;}once(name,callback,prepend){return this.on(name,callback,prepend,{once:true});}has(name){name=name.toLowerCase();const binding=this.bindings[name];return!(!binding||binding.length===0);}}const getEventDispatcher=obj=>{if(!obj._eventDispatcher){obj._eventDispatcher=new EventDispatcher({scope:obj,toggleEvent:(name,state)=>{if(EventDispatcher.isNative(name)&&obj.toggleNativeEvent){obj.toggleNativeEvent(name,state);}}});}return obj._eventDispatcher;};const Observable={fire(name,args,bubble){return this.dispatch(name,args,bubble);},dispatch(name,args,bubble){const self=this;if(self.removed&&name!=='remove'&&name!=='detach'){return normalize$3(name.toLowerCase(),args!==null&&args!==void 0?args:{},self);}const dispatcherArgs=getEventDispatcher(self).dispatch(name,args);if(bubble!==false&&self.parent){let parent=self.parent();while(parent&&!dispatcherArgs.isPropagationStopped()){parent.dispatch(name,dispatcherArgs,false);parent=parent.parent?parent.parent():undefined;}}return dispatcherArgs;},on(name,callback,prepend){return getEventDispatcher(this).on(name,callback,prepend);},off(name,callback){return getEventDispatcher(this).off(name,callback);},once(name,callback){return getEventDispatcher(this).once(name,callback);},hasEventListeners(name){return getEventDispatcher(this).has(name);}};const DOM$2=DOMUtils.DOM;let customEventRootDelegates;const getEventTarget=(editor,eventName)=>{if(eventName==='selectionchange'){return editor.getDoc();}if(!editor.inline&&/^mouse|touch|click|contextmenu|drop|dragover|dragend/.test(eventName)){return editor.getDoc().documentElement;}const eventRoot=getEventRoot(editor);if(eventRoot){if(!editor.eventRoot){editor.eventRoot=DOM$2.select(eventRoot)[0];}return editor.eventRoot;}return editor.getBody();};const isListening=editor=>!editor.hidden&&!isReadOnly(editor);const fireEvent=(editor,eventName,e)=>{if(isListening(editor)){editor.dispatch(eventName,e);}else if(isReadOnly(editor)){processReadonlyEvents(editor,e);}};const bindEventDelegate=(editor,eventName)=>{if(!editor.delegates){editor.delegates={};}if(editor.delegates[eventName]||editor.removed){return;}const eventRootElm=getEventTarget(editor,eventName);if(getEventRoot(editor)){if(!customEventRootDelegates){customEventRootDelegates={};editor.editorManager.on('removeEditor',()=>{if(!editor.editorManager.activeEditor){if(customEventRootDelegates){each$d(customEventRootDelegates,(_value,name)=>{editor.dom.unbind(getEventTarget(editor,name));});customEventRootDelegates=null;}}});}if(customEventRootDelegates[eventName]){return;}const delegate=e=>{const target=e.target;const editors=editor.editorManager.get();let i=editors.length;while(i--){const body=editors[i].getBody();if(body===target||DOM$2.isChildOf(target,body)){fireEvent(editors[i],eventName,e);}}};customEventRootDelegates[eventName]=delegate;DOM$2.bind(eventRootElm,eventName,delegate);}else{const delegate=e=>{fireEvent(editor,eventName,e);};DOM$2.bind(eventRootElm,eventName,delegate);editor.delegates[eventName]=delegate;}};const EditorObservable={...Observable,bindPendingEventDelegates(){const self=this;Tools.each(self._pendingNativeEvents,name=>{bindEventDelegate(self,name);});},toggleNativeEvent(name,state){const self=this;if(name==='focus'||name==='blur'){return;}if(self.removed){return;}if(state){if(self.initialized){bindEventDelegate(self,name);}else{if(!self._pendingNativeEvents){self._pendingNativeEvents=[name];}else{self._pendingNativeEvents.push(name);}}}else if(self.initialized&&self.delegates){self.dom.unbind(getEventTarget(self,name),name,self.delegates[name]);delete self.delegates[name];}},unbindAllNativeEvents(){const self=this;const body=self.getBody();const dom=self.dom;if(self.delegates){each$d(self.delegates,(value,name)=>{self.dom.unbind(getEventTarget(self,name),name,value);});delete self.delegates;}if(!self.inline&&body&&dom){body.onload=null;dom.unbind(self.getWin());dom.unbind(self.getDoc());}if(dom){dom.unbind(body);dom.unbind(self.getContainer());}}};const stringListProcessor=value=>{if(isString(value)){return{value:value.split(/[ ,]/),valid:true};}else if(isArrayOf(value,isString)){return{value,valid:true};}else{return{valid:false,message:`The value must be a string[] or a comma/space separated string.`};}};const getBuiltInProcessor=type=>{const validator=(()=>{switch(type){case'array':return isArray$1;case'boolean':return isBoolean;case'function':return isFunction;case'number':return isNumber;case'object':return isObject;case'string':return isString;case'string[]':return stringListProcessor;case'object[]':return val=>isArrayOf(val,isObject);case'regexp':return val=>is$4(val,RegExp);default:return always;}})();return value=>processValue(value,validator,`The value must be a ${type}.`);};const isBuiltInSpec=spec=>isString(spec.processor);const getErrorMessage=(message,result)=>{const additionalText=isEmpty$3(result.message)?'':`. ${result.message}`;return message+additionalText;};const isValidResult=result=>result.valid;const processValue=(value,processor,message='')=>{const result=processor(value);if(isBoolean(result)){return result?{value:value,valid:true}:{valid:false,message};}else{return result;}};const processDefaultValue=(name,defaultValue,processor)=>{if(!isUndefined(defaultValue)){const result=processValue(defaultValue,processor);if(isValidResult(result)){return result.value;}else{console.error(getErrorMessage(`Invalid default value passed for the \"${name}\" option`,result));}}return undefined;};const create$5=(editor,initialOptions)=>{const registry={};const values={};const setValue=(name,value,processor)=>{const result=processValue(value,processor);if(isValidResult(result)){values[name]=result.value;return true;}else{console.warn(getErrorMessage(`Invalid value passed for the ${name} option`,result));return false;}};const register=(name,spec)=>{const processor=isBuiltInSpec(spec)?getBuiltInProcessor(spec.processor):spec.processor;const defaultValue=processDefaultValue(name,spec.default,processor);registry[name]={...spec,default:defaultValue,processor};const initValue=get$a(values,name).orThunk(()=>get$a(initialOptions,name));initValue.each(value=>setValue(name,value,processor));};const isRegistered=name=>has$2(registry,name);const get=name=>get$a(values,name).orThunk(()=>get$a(registry,name).map(spec=>spec.default)).getOrUndefined();const set=(name,value)=>{if(!isRegistered(name)){console.warn(`\"${name}\" is not a registered option. Ensure the option has been registered before setting a value.`);return false;}else{const spec=registry[name];if(spec.immutable){console.error(`\"${name}\" is an immutable option and cannot be updated`);return false;}else{return setValue(name,value,spec.processor);}}};const unset=name=>{const registered=isRegistered(name);if(registered){delete values[name];}return registered;};const isSet=name=>has$2(values,name);return{register,isRegistered,get,set,unset,isSet};};const defaultModes=['design','readonly'];const switchToMode=(editor,activeMode,availableModes,mode)=>{const oldMode=availableModes[activeMode.get()];const newMode=availableModes[mode];try{newMode.activate();}catch(e){console.error(`problem while activating editor mode ${mode}:`,e);return;}oldMode.deactivate();if(oldMode.editorReadOnly!==newMode.editorReadOnly){toggleReadOnly(editor,newMode.editorReadOnly);}activeMode.set(mode);fireSwitchMode(editor,mode);};const setMode=(editor,availableModes,activeMode,mode)=>{if(mode===activeMode.get()){return;}else if(!has$2(availableModes,mode)){throw new Error(`Editor mode '${mode}' is invalid`);}if(editor.initialized){switchToMode(editor,activeMode,availableModes,mode);}else{editor.on('init',()=>switchToMode(editor,activeMode,availableModes,mode));}};const registerMode=(availableModes,mode,api)=>{if(contains$2(defaultModes,mode)){throw new Error(`Cannot override default mode ${mode}`);}return{...availableModes,[mode]:{...api,deactivate:()=>{try{api.deactivate();}catch(e){console.error(`problem while deactivating editor mode ${mode}:`,e);}}}};};const create$4=editor=>{const activeMode=Cell('design');const availableModes=Cell({design:{activate:noop,deactivate:noop,editorReadOnly:false},readonly:{activate:noop,deactivate:noop,editorReadOnly:true}});registerReadOnlyContentFilters(editor);registerReadOnlySelectionBlockers(editor);return{isReadOnly:()=>isReadOnly(editor),set:mode=>setMode(editor,availableModes.get(),activeMode,mode),get:()=>activeMode.get(),register:(mode,api)=>{availableModes.set(registerMode(availableModes.get(),mode,api));}};};const each$2=Tools.each,explode=Tools.explode;const keyCodeLookup={f1:112,f2:113,f3:114,f4:115,f5:116,f6:117,f7:118,f8:119,f9:120,f10:121,f11:122,f12:123};const modifierNames=Tools.makeMap('alt,ctrl,shift,meta,access');const isModifier=key=>key in modifierNames;const parseShortcut=pattern=>{const shortcut={};const isMac=Env.os.isMacOS()||Env.os.isiOS();each$2(explode(pattern.toLowerCase(),'+'),value=>{if(isModifier(value)){shortcut[value]=true;}else{if(/^[0-9]{2,}$/.test(value)){shortcut.keyCode=parseInt(value,10);}else{shortcut.charCode=value.charCodeAt(0);shortcut.keyCode=keyCodeLookup[value]||value.toUpperCase().charCodeAt(0);}}});const id=[shortcut.keyCode];let key;for(key in modifierNames){if(shortcut[key]){id.push(key);}else{shortcut[key]=false;}}shortcut.id=id.join(',');if(shortcut.access){shortcut.alt=true;if(isMac){shortcut.ctrl=true;}else{shortcut.shift=true;}}if(shortcut.meta){if(isMac){shortcut.meta=true;}else{shortcut.ctrl=true;shortcut.meta=false;}}return shortcut;};class Shortcuts{constructor(editor){this.shortcuts={};this.pendingPatterns=[];this.editor=editor;const self=this;editor.on('keyup keypress keydown',e=>{if((self.hasModifier(e)||self.isFunctionKey(e))&&!e.isDefaultPrevented()){each$2(self.shortcuts,shortcut=>{if(self.matchShortcut(e,shortcut)){self.pendingPatterns=shortcut.subpatterns.slice(0);if(e.type==='keydown'){self.executeShortcutAction(shortcut);}}});if(self.matchShortcut(e,self.pendingPatterns[0])){if(self.pendingPatterns.length===1){if(e.type==='keydown'){self.executeShortcutAction(self.pendingPatterns[0]);}}self.pendingPatterns.shift();}}});}add(pattern,desc,cmdFunc,scope){const self=this;const func=self.normalizeCommandFunc(cmdFunc);each$2(explode(Tools.trim(pattern)),pattern=>{const shortcut=self.createShortcut(pattern,desc,func,scope);self.shortcuts[shortcut.id]=shortcut;});return true;}remove(pattern){const shortcut=this.createShortcut(pattern);if(this.shortcuts[shortcut.id]){delete this.shortcuts[shortcut.id];return true;}return false;}normalizeCommandFunc(cmdFunc){const self=this;const cmd=cmdFunc;if(typeof cmd==='string'){return()=>{self.editor.execCommand(cmd,false,null);};}else if(Tools.isArray(cmd)){return()=>{self.editor.execCommand(cmd[0],cmd[1],cmd[2]);};}else{return cmd;}}createShortcut(pattern,desc,cmdFunc,scope){const shortcuts=Tools.map(explode(pattern,'>'),parseShortcut);shortcuts[shortcuts.length-1]=Tools.extend(shortcuts[shortcuts.length-1],{func:cmdFunc,scope:scope||this.editor});return Tools.extend(shortcuts[0],{desc:this.editor.translate(desc),subpatterns:shortcuts.slice(1)});}hasModifier(e){return e.altKey||e.ctrlKey||e.metaKey;}isFunctionKey(e){return e.type==='keydown'&&e.keyCode>=112&&e.keyCode<=123;}matchShortcut(e,shortcut){if(!shortcut){return false;}if(shortcut.ctrl!==e.ctrlKey||shortcut.meta!==e.metaKey){return false;}if(shortcut.alt!==e.altKey||shortcut.shift!==e.shiftKey){return false;}if(e.keyCode===shortcut.keyCode||e.charCode&&e.charCode===shortcut.charCode){e.preventDefault();return true;}return false;}executeShortcutAction(shortcut){return shortcut.func?shortcut.func.call(shortcut.scope):null;}}const create$3=()=>{const buttons={};const menuItems={};const popups={};const icons={};const contextMenus={};const contextToolbars={};const sidebars={};const add=(collection,type)=>(name,spec)=>{collection[name.toLowerCase()]={...spec,type};};const addIcon=(name,svgData)=>icons[name.toLowerCase()]=svgData;return{addButton:add(buttons,'button'),addGroupToolbarButton:add(buttons,'grouptoolbarbutton'),addToggleButton:add(buttons,'togglebutton'),addMenuButton:add(buttons,'menubutton'),addSplitButton:add(buttons,'splitbutton'),addMenuItem:add(menuItems,'menuitem'),addNestedMenuItem:add(menuItems,'nestedmenuitem'),addToggleMenuItem:add(menuItems,'togglemenuitem'),addAutocompleter:add(popups,'autocompleter'),addContextMenu:add(contextMenus,'contextmenu'),addContextToolbar:add(contextToolbars,'contexttoolbar'),addContextForm:add(contextToolbars,'contextform'),addSidebar:add(sidebars,'sidebar'),addIcon,getAll:()=>({buttons,menuItems,icons,popups,contextMenus,contextToolbars,sidebars})};};const registry=()=>{const bridge=create$3();return{addAutocompleter:bridge.addAutocompleter,addButton:bridge.addButton,addContextForm:bridge.addContextForm,addContextMenu:bridge.addContextMenu,addContextToolbar:bridge.addContextToolbar,addIcon:bridge.addIcon,addMenuButton:bridge.addMenuButton,addMenuItem:bridge.addMenuItem,addNestedMenuItem:bridge.addNestedMenuItem,addSidebar:bridge.addSidebar,addSplitButton:bridge.addSplitButton,addToggleButton:bridge.addToggleButton,addGroupToolbarButton:bridge.addGroupToolbarButton,addToggleMenuItem:bridge.addToggleMenuItem,getAll:bridge.getAll};};const DOM$1=DOMUtils.DOM;const extend=Tools.extend,each$1=Tools.each;class Editor{constructor(id,options,editorManager){this.plugins={};this.contentCSS=[];this.contentStyles=[];this.loadedCSS={};this.isNotDirty=false;this.composing=false;this.destroyed=false;this.hasHiddenInput=false;this.iframeElement=null;this.initialized=false;this.readonly=false;this.removed=false;this.startContent='';this._pendingNativeEvents=[];this._skinLoaded=false;this.editorManager=editorManager;this.documentBaseUrl=editorManager.documentBaseURL;extend(this,EditorObservable);const self=this;this.id=id;this.hidden=false;const normalizedOptions=normalizeOptions(editorManager.defaultOptions,options);this.options=create$5(self,normalizedOptions);register$7(self);const getOption=this.options.get;if(getOption('deprecation_warnings')){logWarnings(options,normalizedOptions);}const suffix=getOption('suffix');if(suffix){editorManager.suffix=suffix;}this.suffix=editorManager.suffix;const baseUrl=getOption('base_url');if(baseUrl){editorManager._setBaseUrl(baseUrl);}this.baseUri=editorManager.baseURI;const referrerPolicy=getReferrerPolicy(self);if(referrerPolicy){ScriptLoader.ScriptLoader._setReferrerPolicy(referrerPolicy);DOMUtils.DOM.styleSheetLoader._setReferrerPolicy(referrerPolicy);}AddOnManager.languageLoad=getOption('language_load');AddOnManager.baseURL=editorManager.baseURL;this.setDirty(false);this.documentBaseURI=new URI(getDocumentBaseUrl(self),{base_uri:this.baseUri});this.baseURI=this.baseUri;this.inline=isInline(self);this.hasVisual=isVisualAidsEnabled(self);this.shortcuts=new Shortcuts(this);this.editorCommands=new EditorCommands(this);registerCommands(this);const cacheSuffix=getOption('cache_suffix');if(cacheSuffix){Env.cacheSuffix=cacheSuffix.replace(/^[\\?\\&]+/,'');}this.ui={registry:registry(),styleSheetLoader:undefined,show:noop,hide:noop,setEnabled:noop,isEnabled:always};this.mode=create$4(self);editorManager.dispatch('SetupEditor',{editor:this});const setupCallback=getSetupCallback(self);if(isFunction(setupCallback)){setupCallback.call(self,self);}}render(){render(this);}focus(skipFocus){this.execCommand('mceFocus',false,skipFocus);}hasFocus(){return hasFocus(this);}translate(text){return I18n.translate(text);}getParam(name,defaultVal,type){const options=this.options;if(!options.isRegistered(name)){if(isNonNullable(type)){options.register(name,{processor:type,default:defaultVal});}else{options.register(name,{processor:always,default:defaultVal});}}return!options.isSet(name)&&!isUndefined(defaultVal)?defaultVal:options.get(name);}hasPlugin(name,loaded){const hasPlugin=contains$2(getPlugins(this),name);if(hasPlugin){return loaded?PluginManager.get(name)!==undefined:true;}else{return false;}}nodeChanged(args){this._nodeChangeDispatcher.nodeChanged(args);}addCommand(name,callback,scope){this.editorCommands.addCommand(name,callback,scope);}addQueryStateHandler(name,callback,scope){this.editorCommands.addQueryStateHandler(name,callback,scope);}addQueryValueHandler(name,callback,scope){this.editorCommands.addQueryValueHandler(name,callback,scope);}addShortcut(pattern,desc,cmdFunc,scope){this.shortcuts.add(pattern,desc,cmdFunc,scope);}execCommand(cmd,ui,value,args){return this.editorCommands.execCommand(cmd,ui,value,args);}queryCommandState(cmd){return this.editorCommands.queryCommandState(cmd);}queryCommandValue(cmd){return this.editorCommands.queryCommandValue(cmd);}queryCommandSupported(cmd){return this.editorCommands.queryCommandSupported(cmd);}show(){const self=this;if(self.hidden){self.hidden=false;if(self.inline){self.getBody().contentEditable='true';}else{DOM$1.show(self.getContainer());DOM$1.hide(self.id);}self.load();self.dispatch('show');}}hide(){const self=this;if(!self.hidden){self.save();if(self.inline){self.getBody().contentEditable='false';if(self===self.editorManager.focusedEditor){self.editorManager.focusedEditor=null;}}else{DOM$1.hide(self.getContainer());DOM$1.setStyle(self.id,'display',self.orgDisplay);}self.hidden=true;self.dispatch('hide');}}isHidden(){return this.hidden;}setProgressState(state,time){this.dispatch('ProgressState',{state,time});}load(args={}){const self=this;const elm=self.getElement();if(self.removed){return'';}if(elm){const loadArgs={...args,load:true};const value=isTextareaOrInput(elm)?elm.value:elm.innerHTML;const html=self.setContent(value,loadArgs);if(!loadArgs.no_events){self.dispatch('LoadContent',{...loadArgs,element:elm});}return html;}else{return'';}}save(args={}){const self=this;let elm=self.getElement();if(!elm||!self.initialized||self.removed){return'';}const getArgs={...args,save:true,element:elm};let html=self.getContent(getArgs);const saveArgs={...getArgs,content:html};if(!saveArgs.no_events){self.dispatch('SaveContent',saveArgs);}if(saveArgs.format==='raw'){self.dispatch('RawSaveContent',saveArgs);}html=saveArgs.content;if(!isTextareaOrInput(elm)){if(args.is_removing||!self.inline){elm.innerHTML=html;}const form=DOM$1.getParent(self.id,'form');if(form){each$1(form.elements,elm=>{if(elm.name===self.id){elm.value=html;return false;}else{return true;}});}}else{elm.value=html;}saveArgs.element=getArgs.element=elm=null;if(saveArgs.set_dirty!==false){self.setDirty(false);}return html;}setContent(content,args){return setContent(this,content,args);}getContent(args){return getContent(this,args);}insertContent(content,args){if(args){content=extend({content},args);}this.execCommand('mceInsertContent',false,content);}resetContent(initialContent){if(initialContent===undefined){setContent(this,this.startContent,{format:'raw'});}else{setContent(this,initialContent);}this.undoManager.reset();this.setDirty(false);this.nodeChanged();}isDirty(){return!this.isNotDirty;}setDirty(state){const oldState=!this.isNotDirty;this.isNotDirty=!state;if(state&&state!==oldState){this.dispatch('dirty');}}getContainer(){const self=this;if(!self.container){self.container=self.editorContainer||DOM$1.get(self.id+'_parent');}return self.container;}getContentAreaContainer(){return this.contentAreaContainer;}getElement(){if(!this.targetElm){this.targetElm=DOM$1.get(this.id);}return this.targetElm;}getWin(){const self=this;if(!self.contentWindow){const elm=self.iframeElement;if(elm){self.contentWindow=elm.contentWindow;}}return self.contentWindow;}getDoc(){const self=this;if(!self.contentDocument){const win=self.getWin();if(win){self.contentDocument=win.document;}}return self.contentDocument;}getBody(){var _a,_b;const doc=this.getDoc();return(_b=(_a=this.bodyElement)!==null&&_a!==void 0?_a:doc===null||doc===void 0?void 0:doc.body)!==null&&_b!==void 0?_b:null;}convertURL(url,name,elm){const self=this,getOption=self.options.get;const urlConverterCallback=getUrlConverterCallback(self);if(isFunction(urlConverterCallback)){return urlConverterCallback.call(self,url,elm,true,name);}if(!getOption('convert_urls')||elm==='link'||isObject(elm)&&elm.nodeName==='LINK'||url.indexOf('file:')===0||url.length===0){return url;}if(getOption('relative_urls')){return self.documentBaseURI.toRelative(url);}url=self.documentBaseURI.toAbsolute(url,getOption('remove_script_host'));return url;}addVisual(elm){addVisual(this,elm);}remove(){remove$1(this);}destroy(automatic){destroy(this,automatic);}uploadImages(){return this.editorUpload.uploadImages();}_scanForImages(){return this.editorUpload.scanForImages();}}const DOM=DOMUtils.DOM;const each=Tools.each;let boundGlobalEvents=false;let beforeUnloadDelegate;let editors=[];const globalEventDelegate=e=>{const type=e.type;each(EditorManager.get(),editor=>{switch(type){case'scroll':editor.dispatch('ScrollWindow',e);break;case'resize':editor.dispatch('ResizeWindow',e);break;}});};const toggleGlobalEvents=state=>{if(state!==boundGlobalEvents){const DOM=DOMUtils.DOM;if(state){DOM.bind(window,'resize',globalEventDelegate);DOM.bind(window,'scroll',globalEventDelegate);}else{DOM.unbind(window,'resize',globalEventDelegate);DOM.unbind(window,'scroll',globalEventDelegate);}boundGlobalEvents=state;}};const removeEditorFromList=targetEditor=>{const oldEditors=editors;editors=filter$5(editors,editor=>{return targetEditor!==editor;});if(EditorManager.activeEditor===targetEditor){EditorManager.activeEditor=editors.length>0?editors[0]:null;}if(EditorManager.focusedEditor===targetEditor){EditorManager.focusedEditor=null;}return oldEditors.length!==editors.length;};const purgeDestroyedEditor=editor=>{if(editor&&editor.initialized&&!(editor.getContainer()||editor.getBody()).parentNode){removeEditorFromList(editor);editor.unbindAllNativeEvents();editor.destroy(true);editor.removed=true;}};const isQuirksMode=document.compatMode!=='CSS1Compat';const EditorManager={...Observable,baseURI:null,baseURL:null,defaultOptions:{},documentBaseURL:null,suffix:null,majorVersion:'6',minorVersion:'2.0',releaseDate:'2022-09-08',i18n:I18n,activeEditor:null,focusedEditor:null,setup(){const self=this;let baseURL='';let suffix='';let documentBaseURL=URI.getDocumentBaseUrl(document.location);if(/^[^:]+:\\/\\/\\/?[^\\/]+\\//.test(documentBaseURL)){documentBaseURL=documentBaseURL.replace(/[\\?#].*$/,'').replace(/[\\/\\\\][^\\/]+$/,'');if(!/[\\/\\\\]$/.test(documentBaseURL)){documentBaseURL+='/';}}const preInit=window.tinymce||window.tinyMCEPreInit;if(preInit){baseURL=preInit.base||preInit.baseURL;suffix=preInit.suffix;}else{const scripts=document.getElementsByTagName('script');for(let i=0;i<scripts.length;i++){const src=scripts[i].src||'';if(src===''){continue;}const srcScript=src.substring(src.lastIndexOf('/'));if(/tinymce(\\.full|\\.jquery|)(\\.min|\\.dev|)\\.js/.test(src)){if(srcScript.indexOf('.min')!==-1){suffix='.min';}baseURL=src.substring(0,src.lastIndexOf('/'));break;}}if(!baseURL&&document.currentScript){const src=document.currentScript.src;if(src.indexOf('.min')!==-1){suffix='.min';}baseURL=src.substring(0,src.lastIndexOf('/'));}}self.baseURL=new URI(documentBaseURL).toAbsolute(baseURL);self.documentBaseURL=documentBaseURL;self.baseURI=new URI(self.baseURL);self.suffix=suffix;setup$v(self);},overrideDefaults(defaultOptions){const baseUrl=defaultOptions.base_url;if(baseUrl){this._setBaseUrl(baseUrl);}const suffix=defaultOptions.suffix;if(suffix){this.suffix=suffix;}this.defaultOptions=defaultOptions;const pluginBaseUrls=defaultOptions.plugin_base_urls;if(pluginBaseUrls!==undefined){each$d(pluginBaseUrls,(pluginBaseUrl,pluginName)=>{AddOnManager.PluginManager.urls[pluginName]=pluginBaseUrl;});}},init(options){const self=this;let result;const invalidInlineTargets=Tools.makeMap('area base basefont br col frame hr img input isindex link meta param embed source wbr track '+'colgroup option table tbody tfoot thead tr th td script noscript style textarea video audio iframe object menu',' ');const isInvalidInlineTarget=(options,elm)=>options.inline&&elm.tagName.toLowerCase()in invalidInlineTargets;const createId=elm=>{let id=elm.id;if(!id){id=get$a(elm,'name').filter(name=>!DOM.get(name)).getOrThunk(DOM.uniqueId);elm.setAttribute('id',id);}return id;};const execCallback=name=>{const callback=options[name];if(!callback){return;}return callback.apply(self,[]);};const findTargets=options=>{if(Env.browser.isIE()||Env.browser.isEdge()){initError('TinyMCE does not support the browser you are using. For a list of supported'+' browsers please see: https://www.tiny.cloud/docs/tinymce/6/support/#supportedwebbrowsers');return[];}else if(isQuirksMode){initError('Failed to initialize the editor as the document is not in standards mode. '+'TinyMCE requires standards mode.');return[];}else if(isString(options.selector)){return DOM.select(options.selector);}else if(isNonNullable(options.target)){return[options.target];}else{return[];}};let provideResults=editors=>{result=editors;};const initEditors=()=>{let initCount=0;const editors=[];let targets;const createEditor=(id,options,targetElm)=>{const editor=new Editor(id,options,self);editors.push(editor);editor.on('init',()=>{if(++initCount===targets.length){provideResults(editors);}});editor.targetElm=editor.targetElm||targetElm;editor.render();};DOM.unbind(window,'ready',initEditors);execCallback('onpageload');targets=unique$1(findTargets(options));Tools.each(targets,elm=>{purgeDestroyedEditor(self.get(elm.id));});targets=Tools.grep(targets,elm=>{return!self.get(elm.id);});if(targets.length===0){provideResults([]);}else{each(targets,elm=>{if(isInvalidInlineTarget(options,elm)){initError('Could not initialize inline editor on invalid inline target element',elm);}else{createEditor(createId(elm),options,elm);}});}};DOM.bind(window,'ready',initEditors);return new Promise(resolve=>{if(result){resolve(result);}else{provideResults=editors=>{resolve(editors);};}});},get(id){if(arguments.length===0){return editors.slice(0);}else if(isString(id)){return find$2(editors,editor=>{return editor.id===id;}).getOr(null);}else if(isNumber(id)){return editors[id]?editors[id]:null;}else{return null;}},add(editor){const self=this;const existingEditor=self.get(editor.id);if(existingEditor===editor){return editor;}if(existingEditor===null){editors.push(editor);}toggleGlobalEvents(true);self.activeEditor=editor;self.dispatch('AddEditor',{editor});if(!beforeUnloadDelegate){beforeUnloadDelegate=e=>{const event=self.dispatch('BeforeUnload');if(event.returnValue){e.preventDefault();e.returnValue=event.returnValue;return event.returnValue;}};window.addEventListener('beforeunload',beforeUnloadDelegate);}return editor;},createEditor(id,options){return this.add(new Editor(id,options,this));},remove(selector){const self=this;let editor;if(!selector){for(let i=editors.length-1;i>=0;i--){self.remove(editors[i]);}return;}if(isString(selector)){each(DOM.select(selector),elm=>{editor=self.get(elm.id);if(editor){self.remove(editor);}});return;}editor=selector;if(isNull(self.get(editor.id))){return null;}if(removeEditorFromList(editor)){self.dispatch('RemoveEditor',{editor});}if(editors.length===0){window.removeEventListener('beforeunload',beforeUnloadDelegate);}editor.remove();toggleGlobalEvents(editors.length>0);return editor;},execCommand(cmd,ui,value){var _a;const self=this;const editorId=isObject(value)?(_a=value.id)!==null&&_a!==void 0?_a:value.index:value;switch(cmd){case'mceAddEditor':{if(!self.get(editorId)){const editorOptions=value.options;new Editor(editorId,editorOptions,self).render();}return true;}case'mceRemoveEditor':{const editor=self.get(editorId);if(editor){editor.remove();}return true;}case'mceToggleEditor':{const editor=self.get(editorId);if(!editor){self.execCommand('mceAddEditor',false,value);return true;}if(editor.isHidden()){editor.show();}else{editor.hide();}return true;}}if(self.activeEditor){return self.activeEditor.execCommand(cmd,ui,value);}return false;},triggerSave:()=>{each(editors,editor=>{editor.save();});},addI18n:(code,items)=>{I18n.add(code,items);},translate:text=>{return I18n.translate(text);},setActive(editor){const activeEditor=this.activeEditor;if(this.activeEditor!==editor){if(activeEditor){activeEditor.dispatch('deactivate',{relatedTarget:editor});}editor.dispatch('activate',{relatedTarget:activeEditor});}this.activeEditor=editor;},_setBaseUrl(baseUrl){this.baseURL=new URI(this.documentBaseURL).toAbsolute(baseUrl.replace(/\\/+$/,''));this.baseURI=new URI(this.baseURL);}};EditorManager.setup();const setup=()=>{const dataValue=value$2();const FakeClipboardItem=items=>({items,types:keys(items),getType:type=>get$a(items,type).getOrUndefined()});const write=data=>{dataValue.set(data);};const read=()=>dataValue.get().getOrUndefined();const clear=dataValue.clear;return{FakeClipboardItem,write,read,clear};};const FakeClipboard=setup();const min=Math.min,max=Math.max,round=Math.round;const relativePosition=(rect,targetRect,rel)=>{let x=targetRect.x;let y=targetRect.y;const w=rect.w;const h=rect.h;const targetW=targetRect.w;const targetH=targetRect.h;const relChars=(rel||'').split('');if(relChars[0]==='b'){y+=targetH;}if(relChars[1]==='r'){x+=targetW;}if(relChars[0]==='c'){y+=round(targetH/2);}if(relChars[1]==='c'){x+=round(targetW/2);}if(relChars[3]==='b'){y-=h;}if(relChars[4]==='r'){x-=w;}if(relChars[3]==='c'){y-=round(h/2);}if(relChars[4]==='c'){x-=round(w/2);}return create$2(x,y,w,h);};const findBestRelativePosition=(rect,targetRect,constrainRect,rels)=>{for(let i=0;i<rels.length;i++){const pos=relativePosition(rect,targetRect,rels[i]);if(pos.x>=constrainRect.x&&pos.x+pos.w<=constrainRect.w+constrainRect.x&&pos.y>=constrainRect.y&&pos.y+pos.h<=constrainRect.h+constrainRect.y){return rels[i];}}return null;};const inflate=(rect,w,h)=>{return create$2(rect.x-w,rect.y-h,rect.w+w*2,rect.h+h*2);};const intersect=(rect,cropRect)=>{const x1=max(rect.x,cropRect.x);const y1=max(rect.y,cropRect.y);const x2=min(rect.x+rect.w,cropRect.x+cropRect.w);const y2=min(rect.y+rect.h,cropRect.y+cropRect.h);if(x2-x1<0||y2-y1<0){return null;}return create$2(x1,y1,x2-x1,y2-y1);};const clamp=(rect,clampRect,fixedSize)=>{let x1=rect.x;let y1=rect.y;let x2=rect.x+rect.w;let y2=rect.y+rect.h;const cx2=clampRect.x+clampRect.w;const cy2=clampRect.y+clampRect.h;const underflowX1=max(0,clampRect.x-x1);const underflowY1=max(0,clampRect.y-y1);const overflowX2=max(0,x2-cx2);const overflowY2=max(0,y2-cy2);x1+=underflowX1;y1+=underflowY1;if(fixedSize){x2+=underflowX1;y2+=underflowY1;x1-=overflowX2;y1-=overflowY2;}x2-=overflowX2;y2-=overflowY2;return create$2(x1,y1,x2-x1,y2-y1);};const create$2=(x,y,w,h)=>{return{x,y,w,h};};const fromClientRect=clientRect=>{return create$2(clientRect.left,clientRect.top,clientRect.width,clientRect.height);};const Rect={inflate,relativePosition,findBestRelativePosition,intersect,clamp,create:create$2,fromClientRect};const awaiter=(resolveCb,rejectCb,timeout=1000)=>{let done=false;let timer=null;const complete=completer=>(...args)=>{if(!done){done=true;if(timer!==null){clearTimeout(timer);timer=null;}completer.apply(null,args);}};const resolve=complete(resolveCb);const reject=complete(rejectCb);const start=(...args)=>{if(!done&&timer===null){timer=setTimeout(()=>reject.apply(null,args),timeout);}};return{start,resolve,reject};};const create$1=()=>{const tasks={};const resultFns={};const load=(id,url)=>{const loadErrMsg=`Script at URL \"${url}\" failed to load`;const runErrMsg=`Script at URL \"${url}\" did not call \\`tinymce.Resource.add('${id}', data)\\` within 1 second`;if(tasks[id]!==undefined){return tasks[id];}else{const task=new Promise((resolve,reject)=>{const waiter=awaiter(resolve,reject);resultFns[id]=waiter.resolve;ScriptLoader.ScriptLoader.loadScript(url).then(()=>waiter.start(runErrMsg),()=>waiter.reject(loadErrMsg));});tasks[id]=task;return task;}};const add=(id,data)=>{if(resultFns[id]!==undefined){resultFns[id](data);delete resultFns[id];}tasks[id]=Promise.resolve(data);};const unload=id=>{delete tasks[id];};return{load,add,unload};};const Resource=create$1();const create=()=>(()=>{let data={};let keys=[];const storage={getItem:key=>{const item=data[key];return item?item:null;},setItem:(key,value)=>{keys.push(key);data[key]=String(value);},key:index=>{return keys[index];},removeItem:key=>{keys=keys.filter(k=>k===key);delete data[key];},clear:()=>{keys=[];data={};},length:0};Object.defineProperty(storage,'length',{get:()=>keys.length,configurable:false,enumerable:false});return storage;})();let localStorage;try{const test='__storage_test__';localStorage=window.localStorage;localStorage.setItem(test,test);localStorage.removeItem(test);}catch(e){localStorage=create();}var LocalStorage=localStorage;const publicApi={geom:{Rect},util:{Delay,Tools,VK,URI,EventDispatcher,Observable,I18n,LocalStorage,ImageUploader},dom:{EventUtils,TreeWalker:DomTreeWalker,TextSeeker,DOMUtils,ScriptLoader,RangeUtils,Serializer:DomSerializer,StyleSheetLoader,ControlSelection,BookmarkManager,Selection:EditorSelection,Event:EventUtils.Event},html:{Styles,Entities,Node:AstNode,Schema,DomParser,Writer,Serializer:HtmlSerializer},Env,AddOnManager,Annotator,Formatter,UndoManager,EditorCommands,WindowManager,NotificationManager,EditorObservable,Shortcuts,Editor,FocusManager,EditorManager,DOM:DOMUtils.DOM,ScriptLoader:ScriptLoader.ScriptLoader,PluginManager,ThemeManager,ModelManager,IconManager,Resource,FakeClipboard,trim:Tools.trim,isArray:Tools.isArray,is:Tools.is,toArray:Tools.toArray,makeMap:Tools.makeMap,each:Tools.each,map:Tools.map,grep:Tools.grep,inArray:Tools.inArray,extend:Tools.extend,walk:Tools.walk,resolve:Tools.resolve,explode:Tools.explode,_addCacheSuffix:Tools._addCacheSuffix};const tinymce=Tools.extend(EditorManager,publicApi);const exportToModuleLoaders=tinymce=>{if(typeof module==='object'){try{module.exports=tinymce;}catch(_){}}};const exportToWindowGlobal=tinymce=>{window.tinymce=tinymce;window.tinyMCE=tinymce;};exportToWindowGlobal(tinymce);exportToModuleLoaders(tinymce);})();","map":{"version":3,"names":["typeOf$1","x","undefined","t","Array","prototype","isPrototypeOf","constructor","name","String","isEquatableType","indexOf","sort$1","xs","compareFn","clone","slice","call","sort","contramap","eqa","f","eq$2","y","eq","tripleEq","eqString","eqArray","length","len","i","eqSortedArray","eqRecord","kx","Object","keys","ky","q","eqAny","tx","ty","getPrototypeOf$1","getPrototypeOf","hasProto","v","predicate","_a","typeOf","isArray","o","proto","isType$1","type","value","isSimpleType","eq$1","a","is$4","isObject","isString","isPlainObject","isArray$1","isNull","isBoolean","isUndefined","isNullable","isNonNullable","isFunction","isNumber","isArrayOf","pred","noop","compose","fa","fb","args","apply","compose1","fbc","fab","constant","identity","tripleEquals","b","curry","fn","initialArgs","restArgs","all","concat","not","die","msg","Error","apply$1","never","always","Optional","tag","some","none","singletonNone","fold","onNone","onSome","isSome","isNone","map","mapper","bind","binder","exists","forall","filter","getOr","replacement","or","getOrThunk","thunk","orThunk","getOrDie","message","from","getOrNull","getOrUndefined","each","worker","toArray","toString","nativeSlice","nativeIndexOf","nativePush","push","rawIndexOf","ts","indexOf$1","r","contains$2","map$3","each$e","eachr","partition$2","pass","fail","arr","filter$5","foldr","acc","foldl","findUntil$1","until","find$2","findIndex$2","flatten","bind$3","reverse","difference","a1","a2","mapToObject","comparator","copy","get$b","head","last$3","findMap","unique$1","isDuplicated","hasOwnProperty$2","hasOwnProperty","each$d","obj","props","k","map$2","tupleMap","tuple","objAcc","internalFilter","onTrue","onFalse","bifilter","filter$4","mapToArray","values","get$a","key","has$2","hasNonNullableKey","equal$1","stringArray","isArrayLike","toArray$1","array","l","each$c","cb","s","n","map$1","callback","out","item","index","filter$3","reduce","collection","iteratee","accumulator","thisArg","findIndex$1","last$2","cached","called","DeviceType","os","browser","userAgent","mediaMatch","isiPad","isiOS","test","isiPhone","isMobile","isAndroid","isTouch","isTablet","isPhone","iOSwebview","isSafari","isDesktop","isWebView","firstMatch","regexes","find$1","agent","major","minor","group","Number","replace","nu$3","detect$5","versionRegexes","cleanedAgent","toLowerCase","unknown$2","Version","nu","detect","unknown","detectBrowser$1","browsers","userAgentData","brands","uaBrand","lcBrand","brand","info","current","version","parseInt","detect$4","candidates","candidate","search","detectBrowser","detectOs","oses","removeFromStart","str","numChars","substring","checkRange","substr","start","removeLeading","prefix","startsWith","contains$1","end","idx","endsWith","suffix","blank","trim$3","lTrim","rTrim","isNotEmpty","isEmpty$3","repeat","count","join","toInt","radix","num","isNaN","normalVersionRegex","checkContains","target","uastring","PlatformInfo","edge","chromium","ie","opera","firefox","safari","unknown$1","nu$2","isBrowser","isEdge","isChromium","isIE","isOpera","isFirefox","Browser","windows","ios","android","linux","macos","solaris","freebsd","chromeos","nu$1","isOS","isWindows","isMacOS","isLinux","isSolaris","isFreeBSD","isChromeOS","OperatingSystem","detect$3","userAgentDataOpt","deviceType","PlatformDetection","query","window","matchMedia","matches","platform$2","navigator","detect$2","platform$1","browser$1","windowsPhone","Env","transparentSrc","documentMode","document","cacheSuffix","container","canHaveCSP","whiteSpaceRegExp$1","trim$2","is$3","makeMap$4","items","delim","resolvedItems","split","hasOwnProperty$1","extend$3","exts","ext","walk$4","resolve$2","path","explode$3","d","_addCacheSuffix","url","Tools","trim","is","makeMap","grep","inArray","hasOwn","extend","walk","resolve","explode","is$2","lhs","rhs","left","cat","lift2","oa","ob","lift3","oc","someIf","Function","COMMENT","DOCUMENT","DOCUMENT_FRAGMENT","ELEMENT","TEXT","element","dom","nodeName","type$1","nodeType","isType","isComment$1","isElement$7","isText$b","isDocument$2","isDocumentFragment$1","isTag","e","rawSet","setAttribute","console","error","set$2","setAll$1","attrs","get$9","getAttribute","getOpt","has$1","hasAttribute","remove$b","removeAttribute","hasNone","attributes","clone$4","attr","read$4","add$4","id","old","remove$a","supports","classList","get$8","add$3","clazz","remove$9","toggle$2","add$2","add","cleanClass","remove$8","remove","toggle$1","result","toggle","has","contains","isSupported$1","style","getPropertyValue","fromHtml$1","html","scope","doc","div","createElement","innerHTML","hasChildNodes","childNodes","fromDom$2","fromTag","node","fromText","text","createTextNode","fromPoint$2","docElm","elementFromPoint","SugarElement","fromHtml","fromDom","fromPoint","recurse","cur","is$1","selector","elem","msMatchesSelector","webkitMatchesSelector","mozMatchesSelector","bypassSelector","childElementCount","base","querySelectorAll","one","querySelector","e1","e2","d1","d2","owner$1","ownerDocument","documentOrOwner","dos","documentElement","defaultView","parent","parentNode","parentElement","parents$1","isRoot","stop","ret","rawParent","p","siblings","filterSelf","elements","children","prevSibling","previousSibling","nextSibling","prevSiblings","nextSiblings","child$1","cs","firstChild","lastChild","childNodesCount","getHead","isShadowRoot","host","supported","Element","attachShadow","Node","getRootNode","isSupported","getStyleContainer","getContentContainer","body","getShadowRoot","getShadowHost","getOriginalEventTarget","event","el","isOpenShadowHost","composed","composedPath","shadowRoot","inBody","internalSet","property","setProperty","internalRemove","removeProperty","set$1","setAll","css","get$7","styles","getComputedStyle","getUnsafeProperty","getRaw$1","raw","getAllRaw","ruleName","remove$7","reflow","offsetWidth","before$3","marker","parent$1","insertBefore","after$4","sibling","append$1","prepend","firstChild$1","appendChild","wrap$2","wrapper","after$3","append","empty","textContent","rogue","remove$6","removeChild","unwrap","children$1","fromDom$1","nodes","get$6","set","content","owner","docDom","fragment","createDocumentFragment","contentElements","getOuter","cloneNode","mkEvent","prevent","kill","fromRawEvent","rawEvent","stopPropagation","preventDefault","clientX","clientY","handle$1","handler","useCapture","wrapped","addEventListener","unbind","bind$2","removeEventListener","top","translate","SugarPosition","boxPosition","box","getBoundingClientRect","firstDefinedOrZero","absolute","win","offsetLeft","offsetTop","scrollTop","pageYOffset","scrollLeft","pageXOffset","clientTop","clientLeft","viewport","get$5","_DOC","to","scrollTo","intoView","alignToTop","scrollIntoViewIfNeeded","scrollIntoView","get$4","_win","visualViewport","bounds","width","height","right","bottom","getBounds","scroll","clientWidth","clientHeight","Math","max","pageLeft","pageTop","isNodeType","isRestrictedNode","isElement$6","matchNodeName","lowerCasedName","matchNodeNames","names","lowerCasedNames","matchStyleValues","computed","cssValue","attrName","hasAttributeValue","attrValue","isBogus$2","isBogusAll$1","isTable$2","tagName","hasContentEditableState","contentEditable","isTextareaOrInput","isText$a","isCData","isPi","isComment","isDocument$1","isDocumentFragment","isBr$6","isImg","isContentEditableTrue$3","isContentEditableFalse$a","isTableCell$3","isTableCellOrCaption","isMedia$2","isListItem$2","firstElement","getTableCaptionDeltaY","elm","caption","bodyTop","captionTop","captionHeight","offsetHeight","hasChild","child","getPos","rootElm","pos","offsetParent","castOffsetParent","ClosestOrAncestor","ancestor","ancestor$3","closest$4","sibling$1","descendant$1","descend","res","ancestor$2","descendant","closest$3","StyleSheetLoader","documentOrShadowRoot","settings","idCount","loadedStates","edos","maxLoadTime","_setReferrerPolicy","referrerPolicy","addStyle","removeStyle","styleContainer","getOrCreateState","passed","failed","load","Promise","success","failure","link","urlWithSuffix","state","callbacks","status","onload","onerror","wait","testCallback","waitCallback","Date","now","startTime","setTimeout","waitForWebKitLinkLoaded","styleSheets","styleSheet","ownerNode","linkElem","rel","contentCssCors","loadAll","urls","loadedUrls","allSettled","then","results","parts","reject","reason","unload","unloadAll","create$d","WeakMap","forElement","referenceElement","root","rootDom","get","sl","instance","DomTreeWalker","startNode","rootNode","next","prev","prev2","shallow","findSibling","findPreviousNode","startName","siblingName","blocks","tableCells","tableSections","textBlocks","headings","listItems$1","lists","wsElements","wrapBlockElements","lazyLookup","lookup","isBlock$2","isTable$1","isInline$1","isBr$5","isTextBlock$2","isList","isListItem$1","isTableSection","isTableCell$2","isWsPreserveElement","isWrapBlockElement","isWrapElement","ancestor$1","zeroWidth","nbsp","isZwsp$1","char","removeZwsp","descendants$1","descendants","NodeValue","getOption","nodeValue","api$1","get$3","getLastChildren$1","rawNode","removeTrailingBr","allBrs","brs","createPaddingBr","br","fillWithPaddingBr","trimBlockTrailingBr","lastChildPrevSibling","ZWSP$1","isZwsp","trim$1","isElement$5","isText$9","isCaretContainerBlock$1","isCaretContainerInline","data","isCaretContainer$2","hasContent","insertInline$1","before","textNode","startsWithCaretContainer$1","splitText","endsWithCaretContainer$1","isBeforeInline","charAt","offset","isAtStart","isAfterInline","isAtEnd","insertBlock","blockName","blockNode","trimBogusBr","getElementsByTagName","lastBr","showCaretContainerBlock","caretContainer","isRangeInCaretContainerBlock","range","startContainer","isContentEditableTrue$2","isContentEditableFalse$9","isBr$4","isText$8","isInvalidTextElement","isAtomicInline","isTable","isCaretContainer$1","isCaretCandidate$3","isNonUiContentEditableFalse","isUnselectable","isInEditable","tempNode","isAtomicContentEditableFalse","isAtomic$1","isEditableCaretCandidate$1","whiteSpaceRegExp","isWhitespaceText","isCollapsibleWhitespace$1","c","isNewLineChar","isNewline","normalize$4","tabSpaces","isStartOfContent","isEndOfContent","tabSpace","normalizedText","pcIsSpace","hasWhitespacePreserveParent","rootElement","isWhitespace$1","isNamedAnchor","isContent$1","isBookmark","isBogus$1","isBogusAll","isEmptyNode","targetNode","skipBogus","brCount","walker","isEmpty$2","isSpan","isInlineContent","surroundedByInlineContent","prevIsInline","nextIsInline","isBookmarkNode$2","isKeepTextNode","isKeepElement","isDocument","trimNode","currentChildren","makeMap$3","attrsCharsRegExp","textCharsRegExp","rawCharsRegExp","entityRegExp","asciiMap","baseEntities","reverseEntities","nativeDecode","innerText","buildEntitiesLookup","itemList","chr","fromCharCode","entity","namedEntities","encodeRaw","encodeAllRaw","encodeNumeric","charCodeAt","encodeNamed","entities","resolveEntities","getEncodeFunc","entitiesMap","encodeNamedAndNumeric","encodeCustomNamed","nameMap","named","numeric","decode","Entities","lookupCache","mapCache","dummyObj","makeMap$2","each$b","extend$2","explode$2","split$1","createMap","defaultValue","extendWith","toUpperCase","getTextRootBlockElements","schema","getTextBlockElements","compileSchema","globalAttributes","blockContent","phrasingContent","flowContent","childNames","ni","attributesOrder","addAttrs","schemaItem","html4PhrasingContent","html4BlockContent","video","audio","table","script","compileElementMap","mode","Schema","patternElements","customElementsMap","specialElements","createLookupTable","option","newValue","schemaType","schemaItems","verify_html","valid_elements","validStyles","valid_styles","invalidStyles","invalid_styles","validClasses","valid_classes","whitespaceElementsMap","selfClosingElementsMap","voidElementsMap","boolAttrMap","nonEmptyOrMoveCaretBeforeOnEnter","nonEmptyElementsMap","moveCaretBeforeOnEnterElementsMap","textBlockElementsMap","blockElementsMap","textInlineElementsMap","RegExp","patternToRegExp","addValidElements","validElements","elementRuleRegExp","attrRuleRegExp","hasPatternsRegExp","validElementsArr","globalAttributesOrder","ei","exec","elementName","outputName","attrData","paddEmpty","removeEmpty","removeEmptyAttrs","attrDatas","ai","al","attrType","attrPrefix","attributesRequired","required","splice","attributesDefault","attributesForced","forcedValue","validValues","attrPattern","attributePatterns","pattern","patternElement","setValidElements","addCustomElements","customElements","customElementRegExp","text_block_elements","block_elements","rule","inline","cloneName","customRule","elmName","addValidChildren","validChildren","childRuleRegExp","getElementRule","_val","padd_empty_block_inline_children","paddInEmptyBlock","custom_elements","valid_children","extended_valid_elements","dd","dt","li","td","th","tr","tbody","thead","tfoot","legend","area","param","parents","parentsRequired","invalid_elements","getValidStyles","getInvalidStyles","getValidClasses","getBoolAttrs","getBlockElements","getTextInlineElements","getVoidElements","seal","getSelfClosingElements","getNonEmptyElements","getMoveCaretBeforeOnEnterElements","getWhitespaceElements","getSpecialElements","isValidChild","isValid","attrPatterns","getCustomElements","Styles","urlOrStrRegExp","styleRegExp","trimRightRegExp","encodingLookup","invisibleChar","encodingItems","self","parse","isEncoded","urlConverter","url_converter","urlConverterScope","url_converter_scope","compress","noJoin","canCompress","compress2","encode","keepSlashes","decodeSingleHexSequence","escSeq","decodeHexSequences","processUrl","match","url2","url3","str2","allow_script_urls","scriptUrl","allow_svg_data_urls","lastIndex","border","serialize","serializeStyles","elemName","validStyleList","styleList","styleMap","deprecated","keyLocation","layerX","layerY","returnValue","webkitMovementX","webkitMovementY","keyIdentifier","mozPressure","isNativeEvent","Event","initEvent","hasIsDefaultPrevented","isDefaultPrevented","needsNormalizing","clone$3","originalEvent","normalize$3","fallbackTarget","srcElement","defaultPrevented","cancelBubble","isPropagationStopped","stopImmediatePropagation","isImmediatePropagationStopped","eventExpandoPrefix","mouseEventRe","addEvent","capture","removeEvent","isMouseEvent","fix","pageX","eventDoc","mouseEvent","pageY","bindOnReady","eventUtils","domLoaded","isDocReady","readyState","readyHandler","EventUtils","events","expando","hasFocusIn","callbackList","defaultNativeHandler","evt","executeHandlers","namesList","nativeHandler","fakeName","func","eventMap","ci","newCallbackList","ex","fire","dispatch","parentWindow","clean","destroy","cancel","each$a","internalStyleName","numericalCssMap","legacySetAttribute","camelCaseToHyphens","findNodeIndex","normalized","lastNodeType","updateInternalStyleAttr","rawValue","convertStyleToString","cssName","applyStyle$1","$elm","normalizedName","setupAttrHooks","getContext","keepValues","keep_values","keepUrlHook","sugarElm","internalName","attrHooks","href","src","DOMUtils","addedStyles","files","counter","stdMode","boxModel","styleSheetLoader","boundEvents","ownEvents","isBlock","getElementById","_get","getAttrib","defaultVal","hook","getAttribs","setAttrib","run","val","originalValue","onSetAttrib","attrElm","deep","getRoot","root_element","getViewPort","argWin","vp","w","h","getPos$1","setStyle","update_styles","setStyles","stylesArg","getStyle","getSize","getRect","size","elms","getParents","collect","resolvedRoot","selectorVal","getParent","_findSib","getNext","getPrev","isParentNode","select","_b","context","setAttribs","setHTML","parentElm","create","newElm","createHTML","outHtml","createFragment","frag","keepChildren","$node","removeAllAttribs","removeAttributeNode","parseStyle","cssText","serializeStyle","DOM","styleElm","loadCSS","catch","toggleClass","cls","classes","addClass","removeClass","hasClass","show","hide","isHidden","uniqueId","getOuterHTML","outerHTML","setOuterHTML","insertAfter","reference","referenceNode","oldElm","replacee","replaceChild","rename","attrNode","findCommonAncestor","ps","pe","isNonEmptyElement","isEmpty","whitespaceElements","nonEmptyElements","bogusVal","createRng","createRange","splitElm","replacementElm","beforeFragment","afterFragment","setStart","setEnd","extractContents","rv","boundTarget","boundName","boundFunc","getContentEditable","getContentEditableParent","_","isChildOf","dumpRng","startOffset","endContainer","endOffset","nodeIndex","DOM$b","QUEUED","LOADING","LOADED","FAILED","ScriptLoader","states","queue","scriptLoadedCallbacks","queueLoadedCallbacks","loading","loadScript","cleanup","done","isDone","markDone","loadQueue","loadScripts","scripts","execCallbacks","processResults","failures","processQueue","nextQueuedItem","shift","uniqueScripts","Cell","initial","isRaw","isTokenised","currentCode","getLanguageData","getData$1","setCode","newCode","getCode","add$1","code","langData","translation","getLangData","textstr","removeContext","substitued","$1","$2","isRtl$1","dir","hasCode","I18n","getData","isRtl","AddOnManager","_listeners","runListeners","matchedListeners","listener","isLoaded","isAdded","loadLanguagePack","languages","language","wrappedLanguages","requireLangPack","languageLoad","waitFor","addOn","createUrl","baseUrl","dep","resource","addOnUrl","urlString","baseURL","lastIndexOf","PluginManager","ThemeManager","ModelManager","singleton","doRevoke","subject","revoke","clear","isSet","repeatable","delay","intervalId","clearInterval","functionToRepeat","setInterval","value$2","on","first$1","rate","timer","clearTimeout","throttle","last$1","annotation","dataAnnotation","dataAnnotationId","dataAnnotationActive","dataAnnotationClasses","dataAnnotationAttributes","isRoot$1","identify","editor","annotationName","rng","selection","getRng","getBody","an","newStart","closest","uid","findMarkers","isAnnotation","isBogusElement","findAll","markers","directory","m","nodesAlready","setup$x","registry","changeCallbacks","initData","listeners","previous","withCallbacks","updateCallbacks","callbackMap","outputData","fireCallbacks","fireNoAnnotation","toggleActiveAttr","onNodeChange","annotations","getNames","addListener","setup$w","dataAnnotation$1","identifyParserNode","removeDirectAnnotation","customAttrNames","customClasses","newClassList","serializer","addTempAttr","addAttributeFilter","persistent","create$c","register","unique","generate$1","date","time","getTime","random","floor","remove$5","clone$2","original","isDeep","shallow$1","deep$1","shallowAs","mutate","TextWalker","isBoundary","direction","TextSeeker","isBlockBoundary","process","newOffset","backwards","forwards","round$2","round","clone$1","rect","collapse","toStart","isEqual","rect1","rect2","isValidOverflow","overflowY","min","isAbove$1","halfHeight","isBelow$1","containsXY","boundingClientRectFromRects","rects","prevRect","distanceToRectEdgeFromXY","cx","cy","sqrt","overlapY","r1","r2","clamp$2","getSelectedNode","getNode$1","safeOffset","getNodeUnsafe","extendingChars","isExtendingChar","ch","and","isElement$4","isCaretCandidate$2","isBlock$1","isFloated","isValidElementCaretCandidate","isNotPre","isText$7","isBr$3","nodeIndex$1","resolveIndex$1","createRange$1","isWhiteSpace$1","isRange","isHiddenWhiteSpaceRange","getBrClientRect","brNode","nbsp$1","clientRect","getBoundingClientRectWebKitText","sc","ec","so","eo","newRng","cloneRange","setEndAfter","getBoundingClientRect$1","isZeroRect","clientRects","getClientRects","collapseAndInflateWidth","newClientRect","getCaretPositionClientRects","caretPosition","addUniqueAndValidRect","addCharacterOffset","beforeNode","CaretPosition","toRange","isVisible","getNode","fromRangeStart","fromRangeEnd","after","isAbove","pos1","pos2","isBelow","isTextPosition","isElementPosition","trimEmptyTextNode$1","insertNode","insertFragment","rangeInsertNode","isText$6","isBogus","normalizedParent","getChildNodes","normalizedTextOffset","equal","normalizedNodeIndex","numTextFragments","createPathItem","parentsUntil$1","create$b","outputOffset","resolvePathItem","findTextPosition","targetOffset","dataLen","resolve$1","paths","nodeOffset","isContentEditableFalse$8","getNormalizedTextOffset$1","trimmedOffset","getPoint","point","getLocation","forward","isForward","fakeCaret","isFakeCaret","isCollapsed","findIndex","moveEndPoint$1","normalizeTableCellSelection","findAdjacentContentEditableFalseElm","getOffsetBookmark","getCaretBookmark","getRangeBookmark","createBookmarkSpan","filled","getPersistentBookmark","collapsed","rng2","endBookmarkNode","startBookmarkNode","moveToBookmark","keep","getBookmark$2","getUndoBookmark","value$1","applyHelper","constHelper","outputHelper","output","inner","_onError","onValue","isValue","isError","Result","mapError","toOptional","onError","_onValue","fromOption","optional","err","generate","cases","constructors","adt","acase","keys$1","argLength","branches","branchKeys","allReqd","reqKey","foldArgs","log","label","params","Adt","bothErrors","firstError","secondError","bothValues","partition$1","errors","isInlinePattern","isBlockPattern","normalizePattern","formatOrCmd","onFormat","onCommand","format","formats","cmd","command","commandValue","getBlockPatterns","patterns","getInlinePatterns","createPatternSet","dynamicPatternsLookup","inlinePatterns","blockPatterns","fromRawPatterns","fromRawPatternsLookup","lookupFn","ctx","rawPatterns","deviceDetection$1","DOM$a","getHash","isRegExp","options","stringOrObjectProcessor","bodyOptionProcessor","valid","bodyObj","register$7","registerOption","processor","default","documentBaseUrl","isInline","hasPlugin","convertURL","_ctx","getElement","getIframeAttrs","getDocType","getDocumentBaseUrl","getBodyId","getBodyClass","getContentSecurityPolicy","shouldPutBrInPre$1","getForcedRootBlock","getForcedRootBlockAttrs","getNewlineBehavior","getBrNewLineSelector","getNoNewLineSelector","shouldKeepStyles","shouldEndContainerOnEmptyBlock","isAutomaticUploadsEnabled","shouldReuseFileName","shouldReplaceBlobUris","getIconPackName","getIconsUrl","getImageUploadUrl","getImageUploadBasePath","getImagesUploadCredentials","getImagesUploadHandler","shouldUseContentCssCors","getReferrerPolicy","getLanguageCode","getLanguageUrl","shouldIndentUseMargin","getIndentation","getContentCss","getContentStyle","getFontCss","getDirectionality","getInlineBoundarySelector","getObjectResizing","getResizeImgProportional","getPlaceholder","getEventRoot","getServiceMessage","getTheme","getThemeUrl","getModel","getModelUrl","isInlineBoundariesEnabled","getFormats","getPreviewStyles","canFormatEmptyLines","getFormatNoneditableSelector","getCustomUiSelector","hasHiddenInput","shouldPatchSubmit","shouldAddFormSubmitTrigger","shouldAddUnloadTrigger","getCustomUndoRedoLevels","shouldDisableNodeChange","isReadOnly$1","hasContentCssCors","getPlugins","getExternalPlugins$1","shouldBlockUnsupportedDrop","isVisualAidsEnabled","getVisualAidsTableClass","getVisualAidsAnchorClass","getIframeAriaText","getSetupCallback","getInitInstanceCallback","getUrlConverterCallback","getAutoFocus","shouldBrowserSpellcheck","getProtect","shouldPasteBlockDrop","shouldPasteDataImages","getPastePreProcess","getPastePostProcess","getPasteWebkitStyles","shouldPasteRemoveWebKitStyles","shouldPasteMergeFormats","isSmartPasteEnabled","isPasteAsTextEnabled","getPasteTabSpaces","shouldAllowHtmlDataUrls","getTextPatterns","getTextPatternsLookup","getNonEditableClass","getEditableClass","getNonEditableRegExps","shouldPreserveCData","hasTextPatternsLookup","getFontStyleValues","getFontSizeClasses","isEncodingXml","getAllowedImageFileTypes","hasTableTabNavigation","isElement$3","isText$5","removeNode$1","trimCount","trimmedText","deleteZwspChars","deleteData","removeUnchanged","remove$4","removeTextAndReposition","removeElementAndReposition","newPosition","removeTextCaretContainer","removeElementCaretContainer","removeAndReposition","caretContainerNode","isContentEditableFalse$7","isMedia$1","isTableCell$1","inlineFakeCaretSelector","getAbsoluteClientRect","scrollX","scrollY","rootRect","margin","trimInlineCaretContainers","fakeCaretTargetNodes","FakeCaret","hasFocus","lastVisualCaret","cursorInterval","caretBlock","caret","startBlink","isInlineFakeCaretTarget","caretState","reposition","getCss","isFakeCaretTableBrowser","isFakeCaretTarget","isContentEditableTrue$1","isContentEditableFalse$6","isMedia","isBlockLike","isCaretContainer","isCaretContainerBlock","isElement$2","isText$4","isCaretCandidate$1","isForwards","isBackwards","skipCaretContainers","findNode","predicateFn","isCefOrCaretContainer","getEditingHost","isCETrue","getParentBlock$3","isInSameBlock","caretPosition1","caretPosition2","getChildNodeAtRelativeOffset","relativeOffset","beforeAfter","setStartBefore","setEndBefore","setStartAfter","isNodesInSameBlock","node1","node2","lean","before$2","after$2","normalizeRange","leanLeft","leanRight","block","location","getRelativeCefElm","getNormalizedRangeEndPoint","normalizedRange","getElementFromPosition","getElementFromPrevPosition","getVisualCaretPosition","walkFn","isMoveInsideSameBlock","inSameBlock","HDirection","isContentEditableFalse$5","isText$3","isElement$1","isBr$2","isCaretCandidate","isAtomic","isEditableCaretCandidate","getParents$3","nodeAtIndex","getCaretCandidatePosition","moveForwardFromBr","nextNode","findCaretPosition$1","Forwards","startPos","innerNode","rootContentEditableFalseElm","CaretWalker","Backwards","walkToPositionIn","position","fromPosition","afterElement","isBeforeOrStart","isAfterOrEnd","isBeforeAfterSameElement","isAtBr","shouldSkipPosition","navigate","navigateIgnore","ignoreFilter","positionIn","nextPosition","prevPosition","firstPositionIn","lastPositionIn","CARET_ID","isCaretNode","getParentCaretContainer","currentNode","isStringPathBookmark","bookmark","isRangeBookmark","isIdBookmark","isIndexBookmark","isPathBookmark","isForwardBookmark","addBogus","resolveCaretPositionBookmark","endPos","insertZwsp","isEmpty$1","tryFindRangePosition","padEmptyCaretContainer","setEndPoint","isValidTextNode","restoreEndPoint","markerParent","otherMarker","appendData","resolvePaths","resolveId","spos","epos","resolveIndex","selectNode","getBookmark$1","setRng","isBookmarkNode$1","expected","actual","isNbsp","isWhiteSpace","isContent","hexColour","toHex","component","hex","fromRgba","rgbaColour","red","green","blue","rgbRegex","rgbaRegex","alpha","fromStringValues","g","parseFloat","fromString","rgbaString","rgbMatch","rgbaMatch","rgbaToHexString","color","getRanges$1","ranges","rangeCount","getRangeAt","getSelectedNodes","hasMultipleRanges","getCellsFromRanges","getCellsFromElement","getCellsFromElementOrRanges","selectedCells","getCellsFromEditor","getSel","getClosestTable","cell","getStartNode","getEndNode","getFirstChildren","getLastChildren","hasAllContentsSelected","endNode","moveEndPoint","hasAnyRanges","sel","runOnRanges","executor","fakeSelectionNodes","fakeNodeRng","preserve","fillBookmark","isNode","isElementNode$1","isElementDirectlySelected","selectedAttr","isEditable$3","isContentEditable","preserveSelection","action","shouldMoveStart","selectedNodeBeforeAction","isSelectedBeforeNodeNoneditable","isBeforeNodeStillNoneditable","getStart","moveStartToNearestText","selectedNode","isWhiteSpaceNode$1","getNonWhiteSpaceSibling","inc","nextName","isTextBlock$1","ed","allowSpaces","isEmptyTextNode$1","isWrapNoneditableTarget","baseDataSelector","formatNoneditableSelector","isWrappableNoneditable","replaceVars","vars","isEq$5","str1","normalizeStyleValue","strValue","getTextDecoration","decoration","getParents$2","isFormatPredicate","formatName","formatter","isVariableFormatName","hasVariableValues","isVariableValue","field","fieldValues","areSimilarFormats","otherFormatName","validKeys","filterObj","validKey","fmt1","filteredFmt1","fmt2","filteredFmt2","isBlockFormat","isWrappingBlockFormat","isNonWrappingBlockFormat","isSelectorFormat","isInlineFormat","isMixedFormat","shouldExpandToSelector","expand","isBookmarkNode","getParents$1","isWhiteSpaceNode","isTextBlock","isBogusBr","findParentContentEditable","walkText","findSpace","findContent","findWordEndPoint","includeTrailingSpaces","lastTextNode","textSeeker","textOffset","spaceResult","findSelectorEndPoint","formatList","curFormat","findBlockEndPoint","scopeRoot","isAtBlockBoundary$1","findParentContainer","block_expand","isSelfOrParentBookmark","expandRng","includeTrailingSpace","startPoint","endPoint","walk$3","exclude","firstNode","lastNode","collectSiblings","findEndPoint","walkBoundary","validBlocks","isZeroWidth","wrapName","applyWordGrab","applyAnnotation","masterUId","decorate","directAnnotation","otherData","attributeNames","makeAnnotation","eDoc","master","annotate","newWrappers","getDoc","finishWrapper","getOrOpenWrapper","processElements","elems","processElement","processNodes","annotateWithBookmark","undoManager","transact","initialRng","hasFakeSelection","masterUid","selectionRng","Annotator","changes","removeAnnotations","annotationChanged","getBookmark","removeAll","getAll","BookmarkManager","isXYWithinRange","firePreProcess","firePostProcess","fireRemove","fireDetach","fireSwitchMode","fireObjectResizeStart","origin","fireObjectResized","firePreInit","firePostRender","fireInit","firePlaceholderToggle","fireError","errorType","fireFormatApply","fireFormatRemove","fireBeforeSetContent","fireSetContent","fireBeforeGetContent","fireGetContent","fireAutocompleterStart","fireAutocompleterUpdate","fireAutocompleterEnd","firePastePreProcess","internal","firePastePostProcess","firePastePlainTextToggle","VK","BACKSPACE","DELETE","DOWN","ENTER","ESC","LEFT","RIGHT","SPACEBAR","TAB","UP","PAGE_UP","PAGE_DOWN","END","HOME","modifierPressed","shiftKey","ctrlKey","altKey","metaKeyPressed","metaKey","elementSelectionAttr","controlElmSelector","abs","round$1","resizeHandles","nw","ne","se","sw","isTouchEvent","ControlSelection","editableDoc","rootDocument","selectedElm","selectedElmGhost","resizeHelper","selectedHandle","resizeBackdrop","startX","startY","selectedElmX","selectedElmY","startW","startH","ratio","resizeStarted","startScrollWidth","startScrollHeight","isImage","isEventOnImageOutsideRange","touch","touches","contextMenuSelectImage","getResizeTargets","firstElementChild","isResizable","createGhostElement","setSizeProp","targets","setGhostElmSize","ghostElm","resizeGhostElement","deltaX","deltaY","proportional","resizeHelperX","resizeHelperY","screenX","screenY","display","scrollWidth","scrollHeight","endGhostResize","wasResizeStarted","showResizeRect","nodeChanged","targetElm","unbindResizeHandleEvents","targetWidth","targetHeight","hideResizeRect","handle","startDrag","handleElm","throttledShowResizeRect","removeSelected","isChildOrEqual","updateResizeRect","removed","composing","controlElm","selectedValue","img","disableGeckoResize","startElm","getEnd","execCommand","situ","setFinish","relativeToNative","startSitu","finishSitu","exactToNative","soffset","finish","foffset","adt$3","ltr","rtl","fromRange","getRanges","domRange","relative","exact","doDiagnose","reversed","rev","diagnose","create$a","SimRange","caretPositionFromPoint","offsetNode","caretRangeFromPoint","availableSearch","fromPoint$1","adt$2","cata","onBefore","onOn","onAfter","getStart$2","before$1","after$1","Situ","adt$1","exactFromRange","simRange","getStart$1","_finishSitu","_soffset","_finish","_foffset","getWin","SimSelection","beforeSpecial","name$1","preprocessRelative","preprocessExact","preprocess","fromElements","toNative","getDomRange","filtered","getAtPoint","isEq$4","rng1","findParent","hasParent$1","hasParentWithName","isCeFalseCaretContainer","hasBrBeforeAfter","isPrevNode","hasContentEditableFalseParent","findTextNodeRelative","isAfterNode","lastInlineElement","parentBlockContainer","normalizeEndPoint","directionLeft","normalize$2","normRng","newContainer","RangeUtils","normalize","normalizedRng","compareRanges","getCaretRangeFromPoint","Dimension","getOffset","aggregate","properties","cumulativeInclusions","absoluteMax","api","get$2","getDocument","walkUp","navigation","frame","view","rest","pathTo","frameElement","Navigation","freeze","__proto__","find","frames","loc","excludeFromDescend","fireScrollIntoViewEvent","scrollEvent","fireAfterScrollIntoViewEvent","last","markerInfo","cleanupFun","createMarker$1","span","elementMarker","withMarker","preserveWith","_s","_e","applyWithMarker","withScrollEvents","withElement","startElement","endElement","scrollToMarker","viewHeight","intoWindowIfNeeded","viewportBottom","markerTop","markerBottom","largerThanViewport","align","intoWindow","innerHeight","intoFrame","frameViewHeight","op","viewportBounds","rangeIntoWindow","elementIntoWindow","rangeIntoFrame","elementIntoFrame","scrollElementIntoView","scroller","scrollRangeIntoView","focus$1","focus","hasFocus$1","activeElement","active$1","clamp$1","normalizeRng","isOrContains","isRngInRoot","shouldStore","nativeRangeToSelectionRange","readRange","getSelection","validate","bookmarkToNativeRng","store","newBookmark","restore","isEditorUIElement$1","className","FocusManager","isEditorUIElement","wrappedSetTimeout","wrappedSetInterval","Delay","setEditorTimeout","setEditorInterval","isManualNodeChange","selectionChange","registerPageMouseUp","throttledStore","mouseUpPage","registerMouseUp","registerEditorEvents","register$6","documentFocusInHandler","DOM$9","isEditorContentAreaElement","isUIElement","customSelector","getActiveElement","registerEvents$1","editorManager","focusedEditor","setActive","blurredEditor","activeEditor","unregisterDocumentEvents","setup$v","getContentEditableHost","getCollapsedNode","getFocusInElement","normalizeSelection","caretPos","focusBody","hasElementFocus","hasIframeFocus","iframeElement","hasInlineFocus","rawBody","hasUiFocus","hasEditorOrUiFocus","focusEditor","quirks","refreshContentEditable","bookmarkRng","contentEditableHost","activateEditor","skipFocus","getEndpointElement","real","getEnd$1","skipEmptyTextNodes","orig","commonAncestorContainer","getSelectedBlocks","endElm","selectedBlocks","processRanges","isTextNodeWithCursorPosition","elementsWithCursorPosition","isCursorPosition","hasCursorPosition","first","descendantRtl","autocompleteSelector","create$9","findIn","setCursorLocation","detect$1","remove$3","typeLookup","walk$2","isEmptyTextNode","AstNode","insert","selfAttrs","cloneAttrs","selfAttr","wrap","refNode","whitespace","isConditionalComment","startIndex","findCommentEndIndex","lcHtml","endIfIndex","endIndex","endCommentRegexp","findMatchingEndTagIndex","startTagRegExp","endTagRegExp","voidElements","startMatch","endMatch","trimHtml$1","tempAttrs","trimContentRegExp","trimInternal","bogusAllRegExp","getTempAttrs","matchLength","endTagIndex","trimExternal","trimEmptyContents","emptyRegExp","getPlainTextContent","offscreenDiv","bogusElements","bogusValue","getContentFromBody","shouldTrim","getContentInternal","makeMap$1","Writer","indent","indentBefore","indent_before","indentAfter","indent_after","entity_encoding","htmlOutput","element_format","cdata","comment","pi","doctype","reset","getContent","HtmlSerializer","writer","handlers","sortedAttrs","elementRule","nonInheritableStyles","Set","nonInheritableStylesArr","shorthandStyleProps","getStyleProps","isNonInheritableStyle","hasInheritableStyles","getLonghandStyleProps","prop","hasStyleConflict","nodeStyleProps","parentNodeStyleProps","valueMismatch","parentValue","nodeStyleProp","propExists","longhandProps","isChar","delta","isBeforeSpace","isAfterSpace","isEmptyText","matchesElementPosition","isImageBlock","isCefNode","isBeforeImageBlock","isAfterImageBlock","isBeforeMedia","isAfterMedia","isBeforeTable","isAfterTable","isBeforeContentEditableFalse","isAfterContentEditableFalse","dropLast","parentsUntil","parentsAndSelf","navigateIgnoreEmptyTextNodes","getClosestBlock$1","isAtBeforeAfterBlockBoundary","newPos","fromBlock","isAtBlockBoundary","isAtStartOfBlock","isAtEndOfBlock","isBeforeBlock","isAfterBlock","isBr$1","findBr","parentBlocks","isBeforeBr$1","isAfterBr","findPreviousBr","findNextBr","isInMiddleOfText","getClosestBlock","hasSpaceBefore","hasSpaceAfter","isPreValue","isInPre","isAtBeginningOfBody","isAtEndOfBody","isAtLineBoundary","isCefBlock","isSiblingCefBlock","isBeforeCefBlock","nextPos","isNextCefBlock","isAfterCefBlock","prevPos","isPrevCefBlock","needsToHaveNbsp","needsToBeNbspLeft","needsToBeNbspRight","needsToBeNbsp","isNbspAt","isWhiteSpaceAt","hasNbsp","normalizeNbspMiddle","chars","normalizeNbspAtStart","makeNbsp","firstPos","normalizeNbspInMiddleOfTextNode","newText","normalizeNbspAtEnd","lastPos","normalizeNbsps","normalizeNbspsInEditor","normalize$1","replaceData","normalizeWhitespaceAfter","whitespaceCount","normalizeWhitespaceBefore","mergeTextNodes","prevNode","normalizeWhitespace","mergeToPrev","whitespaceOffset","newNode","removeNode","insertData","needsReposition","beforeOrStartOf","afterOrEndOf","getPreviousSiblingCaretPosition","getNextSiblingCaretPosition","findCaretPositionBackwardsFromElm","findCaretPositionForwardsFromElm","findCaretPositionBackwards","findCaretPositionForward","findCaretPosition","findCaretPosOutsideElmAfterDelete","setSelection$1","eqRawNode","paddEmptyBlock","deleteNormalized","afterDeletePosOpt","prevTextOpt","nextTextOpt","isInlineElement","deleteElement$2","moveCaret","afterDeletePos","parentBlock","normalizedAfterDeletePos","setContent","paddPos","strongRtl","hasStrongRtl","isInlineTarget","findInlineParents","findRootInline","hasSameParentBlock","block1","block2","isAtZwsp","normalizePosition","normalizeForwards","normalizeBackwards","execCommandIgnoreInputEvents","inputBlocker","off","execEditorDeleteCommand","execNativeDeleteCommand","execNativeForwardDeleteCommand","isBeforeRoot","isTextBlockOrListItem","getParentBlock$2","paddEmptyBody","moveSelection","no_selection","willDeleteLastPositionInElement","fromPos","normalizedFirstPos","normalizedLastPos","normalizedFromPos","freefallRtl","deleteRangeContents","deleteContents","lastBlock","additionalCleanupNodes","isRootFromElement","getTableCells","getTableDetailsFromRange","getTable","startTable","endTable","isStartInTable","isEndInTable","isSameTable","isMultiTable","tableCellRng","tableSelection","cells","deleteAction","singleCellTable","fullTable","partialTable","multiTable","getClosestCell$1","isExpandedCellRng","cellRng","getTableFromCellRng","startParentTable","endParentTable","isSingleCellTable","rows","getCellRng","startCell","endCell","getCellRangeFromStartTable","getCellRangeFromEndTable","getTableSelectionFromCellRng","getTableSelections","selectionDetails","sameTableSelection","startTableSelection","endTableSelection","getCellIndex","getSelectedCells","isSingleCellTableContentSelected","optCellRng","unselectCells","otherContentRng","handleSingleTable","handleMultiTable","startTableSelectedCells","endTableSelectedCells","getActionFromRange","cleanCells","getOutsideBlock","handleEmptyBlock","startInTable","emptyBlock","deleteContentInsideCell","isFirstCellInSelection","insideTableRng","deleteCellContents","collapseAndRestoreCellSelection","emptySingleTableCells","outsideDetails","editorRng","cellsToClean","outsideBlock","endPointCell","emptyMultiTableCells","startTableCells","endTableCells","betweenRng","startTableCellsToClean","endTableCellsToClean","deleteTableElement","deleteCellRange","deleteCaptionRange","emptyElement","deleteTableRange","getParentCaption","deleteRange$2","getParentCell","deleteBetweenCells","fromCell","toCell","isDeleteOfLastCharPos","fromCaption","emptyCaretCaption","validateCaretCaption","toCaption","deleteCaretInsideCaption","deleteCaretCells","deleteCaretCaption","isNearTable","isBeforeOrAfterTable","deleteCaret$3","backspaceDelete$9","getContentEditableRoot$1","internalAttributesPrefixes","each$9","ElementUtils","internalAttributes","compare","attribs","isAttributeInternal","compareObjects","obj1","obj2","attributeName","traverse","matchNode$1","nodeFilters","attributeFilters","nl","findMatchingNodes","childNode","runFilters","matchRecord","filteringAttributes","valueMatches","filter$2","paddEmptyNode","blockElements","astNode","isPaddedWithNbsp","hasOnlyChild","isPadded","isLineBreakNode","removeOrUnwrapInvalidNode","originalNodeParent","cleanInvalidNodes","onCreate","textBlockElements","nonSplittableElements","fixed","newParent","normalizeBlockSelectionRange","newEndPos","hasOnlyOneChild$1","isPaddingNode","isPaddedEmptyBlock","isEmptyFragmentElement","isListFragment","cleanupDomFragment","domFragment","toDomFragment","listItems","isPadding","isListItemPadded","isEmptyOrPadded","trimListItems","getParentLi","isParentBlockLi","getSplit","beforeRng","afterRng","cloneContents","findFirstIn","caretWalker","newCaretPos","findLastOf","insertMiddle","insertBefore$1","insertAfter$1","insertAtCaret$1","liTarget","liElms","BEGINNING","isAt","newPosNode","mergeableWrappedElements","shouldPasteContentOnly","isPastingSingleElement","isWrappedElement","isPastingInTheSameBlockTag","isPastingInContentEditable","isTableCell","isTableCellContentSelected","validInsertion","no_events","trimBrsFromTableCell","reduceInlineTextElements","merge","textInlineElements","elementUtils","styleConflict","markFragmentElements","unmarkFragmentElements","isPartOfFragment","canHaveChildren","moveSelectionToMarker","_c","nextRng","parentEditableElm","findNextCaretRng","deleteSelectedContent","insertHtmlAtCaret","details","parser","bookmarkHtml","caretElement","parserArgs","paste","_selectionOverrides","showBlockCaretContainer","invalid","markerNode","toExtract","invalidChildren","getNodeFilters","getAttributeFilters","isTreeNode","setEditorHtml","noSelection","setContentString","padd","forcedRootBlockName","isRootContent","trimmedHtml","setContentTree","setContentInternal","ensureIsRoot","transform","transformed","closest$2","isEq$3","matchesUnInheritedFormatSelector","inherit","matchParents","similar","matchedNode","matchNode","matchName","matchItems","itemName","matchAttributes","onmatch","expectedValue","isEmptyValue","match$2","matchAll","matchedFormatNames","checkedMap","closest$1","rawElm","canApply","matchAllOnNode","formatNames","matchSimilar","ZWSP","importNode","getEmptyCaretContainers","isCaretContainerEmpty","findFirstTextNode","createCaretContainer","fill","trimZwspFromCaretContainer","removeCaretContainerNode","removeCaretContainer","insertCaretContainerNode","formatNode","appendNode","insertFormatNodesIntoCaretContainer","formatNodes","innerMostFormatNode","cleanFormatNode","validFormats","matchedFormats","uniqueFormats","fmtName","clonedFormatNode","applyCaretFormat","wordcharRegex","removeCaretFormat","hasContentAfter","expandedRng","newCaretContainer","cleanedFormatNode","caretTextNode","disableCaretContainer","keyCode","setup$u","replaceWithCaretFormat","innerMost","isFormatElement","inlineElements","isEmptyCaretFormatElement","postProcessHooks","isPre","addPostProcessHook","hooks","postProcess$1","hasPreSibling","pre","joinPre","pre1","pre2","sPre2","preBlocks","listItemStyles","hasListStyles","fmt","findExpandedListItemFormat","getExpandedListItemFormat","isRngStartAtStartOfElement","isRngEndAtEndOfElement","isEditableListItem","getFullySelectedBlocks","middle","getFullySelectedListItems","getPartiallySelectedListItems","each$8","isElementNode","findElementSibling","mergeSiblingsNodes","isPrevEditable","isNextEditable","tmpSibling","mergeSiblings","merge_siblings","clearChildStyles","clear_child_styles","links","_value","processChildElements","unwrapEmptySpan","hasStyle","applyStyle","removeResult","MCE_ATTR_RE","each$7","isEq$2","isTableCellOrRow","isChildOfInlineParent","getContainer","lastIdx","normalizeTableSelection","wrap$1","wrapWithSiblings","isColorFormatAndAnchor","rootBlockElm","forcedRootBlock","list_block","processFormatAttrOrStyle","removeEmptyStyleAttributeIfNeeded","removeStyles","compareNode","stylesModified","styleName","styleValue","normalizedStyleValue","remove_similar","removeListStyleFormats","liFmt","removeFormatInternal","ceFalseOverride","preserveAttributes","preserve_attributes","attrsToPreserve","currentValue","valueOut","removeFormat$1","newName","findFormatRoot","formatRoot","removeFormatFromClone","wrapAndSplit","lastClone","firstClone","formatRootParent","mixed","remove$2","splitToFormatRoot","isRemoveBookmarkNode","removeNodeFormat","currentNodeMatches","textDecorations","textDecoration","removeRngStyle","each$6","mergeTextDecorationsAndColor","processTextDecorationsAndColor","parentTextDecoration","mergeBackgroundColorAndFontSize","backgroundColor","hasFontSize","mergeSubSup","inverseTagDescendants","mergeWithChildren","mergeWithParents","merge_with_parents","each$5","canFormatBR","parentName","validBRParentElements","hasCaretNodeSibling","applyStyles","styleVal","applyFormat$1","setElementFormat","onformat","applyNodeStyle","found","createWrapElement","wrapElm","applyRngStyle","nodeSpecific","isMatchingWrappingBlock","canRenameBlock","isEditableDescendant","isValidBlockFormatForNode","canWrapNode","isWrappableNoneditableElm","isValidWrapNode","isCaret","isCorrectFormatForNode","currentWrapElm","lastContentEditable","contentEditableValue","getChildCount","mergeStyles","childElement","childCount","fake","hasVars","setup$t","registeredFormatListeners","updateAndFireChangeCallbacks","nodeOrRange","fallbackElement","matchingNode","isMatchingNode","matchingFormat","isUnableToMatch","registeredCallbacks","runIfChanged","spec","withSimilar","withoutSimilar","withVars","addListeners","formatChangeItems","getCurrent","toAppendTo","removeListeners","formatChangedInternal","_typeof","Symbol","iterator","_setPrototypeOf","setPrototypeOf","_isNativeReflectConstruct","Reflect","construct","sham","Proxy","Boolean","valueOf","_construct","Parent","Class","Constructor","arguments","_toConsumableArray","_arrayWithoutHoles","_iterableToArray","_unsupportedIterableToArray","_nonIterableSpread","_arrayLikeToArray","iter","minLen","arr2","TypeError","isFrozen","getOwnPropertyDescriptor","create$8","_ref","fun","thisValue","Func","arrayForEach","unapply","forEach","arrayPop","pop","arrayPush","stringToLowerCase","stringMatch","stringReplace","stringIndexOf","stringTrim","regExpTest","typeErrorCreate","unconstruct","_len","_key","_len2","_key2","addToSet","lcElement","object","newObject","lookupGetter","desc","fallbackValue","warn","html$1","svg$1","svgFilters","svgDisallowed","mathMl$1","mathMlDisallowed","svg","mathMl","xml","MUSTACHE_EXPR","ERB_EXPR","DATA_ATTR","ARIA_ATTR","IS_ALLOWED_URI","IS_SCRIPT_OR_DATA","ATTR_WHITESPACE","DOCTYPE_NAME","getGlobal","_createTrustedTypesPolicy","trustedTypes","createPolicy","ATTR_NAME","currentScript","policyName","createDOMPurify","DOMPurify","originalDocument","DocumentFragment","HTMLTemplateElement","NodeFilter","_window$NamedNodeMap","NamedNodeMap","MozNamedAttrMap","HTMLFormElement","DOMParser","ElementPrototype","getNextSibling","getParentNode","template","trustedTypesPolicy","emptyHTML","_document","implementation","createNodeIterator","createHTMLDocument","MUSTACHE_EXPR$1","ERB_EXPR$1","DATA_ATTR$1","ARIA_ATTR$1","IS_SCRIPT_OR_DATA$1","ATTR_WHITESPACE$1","IS_ALLOWED_URI$1","ALLOWED_TAGS","DEFAULT_ALLOWED_TAGS","ALLOWED_ATTR","DEFAULT_ALLOWED_ATTR","CUSTOM_ELEMENT_HANDLING","tagNameCheck","writable","configurable","enumerable","attributeNameCheck","allowCustomizedBuiltInElements","FORBID_TAGS","FORBID_ATTR","ALLOW_ARIA_ATTR","ALLOW_DATA_ATTR","ALLOW_UNKNOWN_PROTOCOLS","SAFE_FOR_TEMPLATES","WHOLE_DOCUMENT","SET_CONFIG","FORCE_BODY","RETURN_DOM","RETURN_DOM_FRAGMENT","RETURN_TRUSTED_TYPE","SANITIZE_DOM","KEEP_CONTENT","IN_PLACE","USE_PROFILES","FORBID_CONTENTS","DEFAULT_FORBID_CONTENTS","DATA_URI_TAGS","DEFAULT_DATA_URI_TAGS","URI_SAFE_ATTRIBUTES","DEFAULT_URI_SAFE_ATTRIBUTES","MATHML_NAMESPACE","SVG_NAMESPACE","HTML_NAMESPACE","NAMESPACE","IS_EMPTY_INPUT","PARSER_MEDIA_TYPE","SUPPORTED_PARSER_MEDIA_TYPES","DEFAULT_PARSER_MEDIA_TYPE","transformCaseFunc","CONFIG","formElement","isRegexOrFunction","testValue","_parseConfig","cfg","ADD_URI_SAFE_ATTR","ADD_DATA_URI_TAGS","ALLOWED_URI_REGEXP","ADD_TAGS","ADD_ATTR","MATHML_TEXT_INTEGRATION_POINTS","HTML_INTEGRATION_POINTS","COMMON_SVG_AND_HTML_ELEMENTS","ALL_SVG_TAGS","ALL_MATHML_TAGS","_checkValidNamespace","namespaceURI","parentTagName","_forceRemove","_removeAttribute","attribute","getAttributeNode","_initDocument","dirty","leadingWhitespace","dirtyPayload","parseFromString","createDocument","_createIterator","SHOW_ELEMENT","SHOW_COMMENT","SHOW_TEXT","_isClobbered","_isNode","_executeHook","entryPoint","_sanitizeElements","allowedTags","_basicCustomElementTest","_isValidAttribute","lcTag","lcName","_sanitizeAttributes","hookEvent","keepAttr","allowedAttributes","_attr","initValue","forceKeepAttr","setAttributeNS","_sanitizeShadowDOM","shadowNode","shadowIterator","sanitize","importedNode","oldNode","returnNode","toStaticHTML","nodeIterator","shadowroot","serializedHTML","setConfig","clearConfig","isValidAttribute","addHook","hookFunction","removeHook","removeHooks","removeAllHooks","purify","explode$1","create$7","filters","addFilter","getFilters","removeFilter","newCallbacks","removeAttrs","addFontToSpansFilter","domParser","fontSizes","addNodeFilter","face","addStrikeFilter","convertToSTag","addFilters","convert_fonts_to_spans","font_size_legacy_values","register$5","inline_styles","blobUriToBlob","fetch","ok","blob","extractBase64Data","parseDataUri","uri","base64Encoded","extractedData","decodeURIComponent","buildBlob","atob","Uint8Array","Blob","dataUriToBlob","uriToBlob","blobToDataUri","reader","FileReader","onloadend","readAsDataURL","count$1","uniqueId$1","processDataUri","dataUri","base64Only","generateBlobInfo","base64","btoa","createBlobInfo$1","blobCache","blobInfo","dataUriToBlobInfo","getByData","imageToBlobInfo","imageSrc","invalidDataUri","getByUri","isBogusImage","isInternalImageSource","registerBase64ImageFilter","blob_cache","processImage","inputSrc","blobUri","register$4","remove_trailing_brs","prevName","lastParent","appendRel","addNoOpener","newRel","allow_unsafe_link_target","allow_html_in_named_anchor","fix_list_elements","classValue","validClassesMap","each$4","queryParts","DEFAULT_PORTS","ftp","http","https","mailto","safeSvgDataUrlElements","blockSvgDataUris","allowSvgDataUrls","decodeUri","encodedUri","unescape","isInvalidUri","decodedUri","allow_html_data_urls","URI","baseUri","base_uri","source","isProtocolRelative","protocol","toAbsPath","urlMatch","part","userInfo","port","uriComponents","isDomSafe","pathname","setPath","pathMatch","file","getURI","toRelative","relativeUri","tu","uu","toRelPath","anchor","toAbsolute","noHost","absoluteUri","isSameOrigin","defaultPort","breakPoint","normalizedBase","nb","normalizedPath","baseParts","pathParts","outPath","noProtoHost","extend$1","basePurifyConfig","filteredUrlAttrs","internalElementAttr","getPurifyConfig","mimeType","config","setupPurify","purify$1","ele","allow_conditional_comments","lcTagName","isInternalElement","bogus","transferChildren","nativeParent","isSpecial","nativeChild","walkTree","preprocessors","postprocessors","traverseOrder","postprocess","whitespaceCleaner","textRootBlockElements","allWhiteSpaceRegExp","startWhiteSpaceRegExp","endWhiteSpaceRegExp","hasWhitespaceParent","isTextRootBlockEmpty","isAtEdgeOfBlock","neighbour","isNodeEmpty","getRootBlockName","forced_root_block","DomParser","nodeFilterRegistry","attributeFilterRegistry","defaultedSettings","root_name","parseAndSanitizeWithContext","rootName","isSpecialRoot","wrappedHtml","removeNodeFilter","removeAttributeFilter","findInvalidChildren","addRootBlocks","rootBlockName","rootBlockNode","rootBlock","forced_root_block_attrs","whitespacePre","whitespacePost","invalidFinder","matchFinder","topLevelChildren","otherChildren","exports","serializeContent","withSerializedContent","fireEvent","serializedContent","eventArgs","preProcessGetContent","postProcessGetContent","processedEventArgs","preProcessSetContent","postProcessSetContent","tableModel","tableRow","cellPosition","getSpan","fillout","rowspan","colspan","y2","x2","cellExists","skipCellsX","getWidth","row","findElementPos","extractRows","sx","sy","ey","newRows","subTable","createDomTable","tableElement","tableBody","modelRowsToDomRows","tableElm","toDom","subsection","findParentListContainer","getFullySelectedListWrappers","_li","listCont","listElm","listStyles","_style","innerElm","directListWrappers","commonAnchorContainer","getWrapElements","wrapElements","listWrappers","allWrappers","emptyFragment","getFragmentFromRange","getParentTable","getTableFragment","selectedTableCells","firstCell","lastCell","fullTableModel","sectionedTableModel","getSelectionFragment","read$3","isCollapsibleWhitespace","getInnerText","bin","getContextNodeName","parentBlockOpt","getTextContent","contextNodeName","nonRenderedText","parentBlockText","textIndex","hasProceedingSpace","hasTrailingSpace","getSerializedContent","tmpElm","contextual","extractSelectedContent","setupArgs$3","getInner","getSelectedContentInternal","defaultedArgs","updatedArgs","KEEP","INSERT","diff","vDown","vUp","snake","diag","buildScript","start1","end1","start2","end2","getMiddleSnake","j","i2","buildSnake","sum","getOuterHtml","insertAt","removeAt","applyDiff","read$2","write","fragments","currentFragments","lazyTempDocument","hasIframes","createFragmentedLevel","beforeBookmark","createCompleteLevel","createFromEditor","trimmedFragments","trimmed","applyToEditor","level","getLevelContent","getCleanLevelContent","hasEqualContent","level1","level2","hasEqualCleanedContent","isEq$1","isUnlocked","locks","setTyping","typing","endTyping","endTypingLevelIgnoreLocks","beforeChange$1","addUndoLevel$1","currentLevel","newLevel","lastLevel","bm","customUndoRedoLevels","setDirty","clear$1","extra$1","callback1","callback2","redo$1","undo$1","reset$1","hasUndo$1","hasRedo$1","transact$1","beforeChange","ignore","ignore$1","addVisualInternal","matchedElm","hasVisual","makePlainAdaptor","init","bindEvents","undo","redo","hasUndo","hasRedo","extra","formatChanged","insertContent","addVisual","autocompleter","addDecoration","removeDecoration","makeRtcAdaptor","rtcEditor","defaultVars","_undoManager","_locks","_index","_node","_similar","_rfl","_details","_format","getRawModel","makeNoopAdaptor","nul","isRtc","plugins","getRtcSetup","rtcPlugin","setup","setup$s","editorCast","rtcInstance","rtc","isRemote","getRtcInstanceWithFallback","getRtcInstanceWithError","addUndoLevel","matchFormat","matchAllFormats","matchNodeFormat","canApplyFormat","closestFormat","applyFormat","removeFormat","toggleFormat","getContent$2","setContent$2","insertContent$1","getSelectedContent","addVisual$1","addAutocompleterDecoration","removeAutocompleterDecoration","getContent$1","walkPastBookmark","merge$1","outer","outerElm","oldLength","normalizeTextIfRequired","mergeAndNormalizeText","outerNode","normalizer","innerTextNode","rngSetContent","prevText","nextText","setupArgs$2","cleanContent","contextBlock","contextArgs","setContent$1","cleanedContent","createContextualFragment","deleteFromCallbackMap","SelectorChanged","selectorChangedData","currentSelectors","findMatchingNode","matchedSelectors","selectorChangedWithUnbind","isAttachedToDom","isValidRange","EditorSelection","selectedRange","explicitRange","getRng$1","bookmarkManager","select$1","compareEndPoints","tryCompareBoundaryPoints","how","sourceRange","destinationRange","compareBoundaryPoints","anchorNode","START_TO_START","END_TO_END","removeAllRanges","addRange","setBaseAndExtent","focusNode","setNode","getSelectedBlocks$1","anchorRange","focusRange","anchorOffset","focusOffset","selectorChanged","getScrollContainer","scrollContainer","placeCaretAt","controlSelection","register$3","htmlParser","hasChildren","preserve_cdata","trimTrailingBr","isBr","brNode1","brNode2","preProcess$1","oldDoc","clonedNode","impl","shouldFireEvent","hasEventListeners","process$1","postProcess","outArgs","getHtmlFromNode","parseHtml","serializeNode","htmlSerializer","toHtml","DomSerializerImpl","addRules","setRules","DomSerializer","domSerializer","defaultFormat$1","setupArgs$1","defaultFormat","setupArgs","removedOptions","removedPlugins","getRemovedOptions","settingNames","setting","getRemovedPlugins","plugin","pluginNames","logRemovedWarnings","rawOptions","normalizedOptions","hasRemovedPlugins","hasRemovedOptions","isLegacyMobileTheme","theme","listJoiner","themesMessage","pluginsMessage","optionsMessage","logWarnings","DOM$8","restoreOriginalStyles","orgDisplay","safeDestroy","clearDomReferences","contentAreaContainer","editorContainer","bodyElement","contentDocument","contentWindow","restoreForm","form","_mceOldSubmit","submit","formEventDelegate","remove$1","editorUpload","save","is_removing","unbindAllNativeEvents","automatic","destroyed","_beforeUnload","CreateIconManager","iconPack","icons","IconManager","getProp","propName","getComputedSizeProp","getClientWidth","getClientHeight","getMarginTop","getMarginLeft","isInsideElementContentArea","bodyElm","transpose","isXYInContentArea","transposedPoint","fromDomSafe","isEditorAttachedToDom","rawContainer","getContentAreaContainer","NotificationManagerImpl","unimplemented","open","close","getArgs","NotificationManager","notifications","getImplementation","getNotificationManagerImpl","getTopNotification","progressBar","timeout","notification","addNotification","closeNotification","otherNotification","getEl","getNotifications","registerEvents","serviceMessage","requestAnimationFrame","WindowManagerImpl","openUrl","alert","confirm","WindowManager","dialogs","getWindowManagerImpl","funcBind","fireOpenEvent","dialog","fireCloseEvent","addDialog","closeDialog","otherDialog","getTopDialog","storeSelectionAndOpenDialog","openDialog","ui","windowManagerImpl","displayNotification","notificationManager","displayError","_skinLoaded","uploadError","logError","createLoadError","pluginLoadError","iconsLoadError","languageLoadError","themeLoadError","modelLoadError","pluginInitError","initError","isContentCssSkinName","getContentCssUrls","transformToUrls","getFontCssUrls","cssLinks","skinUrl","contentCssFile","documentBaseURI","appendContentCssFromSettings","contentCSS","filter$1","bind$1","getAllImages","ImageScanner","uploadStatus","cachedPromises","images","isUploaded","promises","imageInfo","image","newPromise","UploadStatus","PENDING","UPLOADED","blobUriStatuses","createStatus","resultUri","hasBlobUri","getResultUri","isPending","markPending","markUploaded","removeFailed","seed","rnd","uuid","BlobCache","cache","mimeToExt","mime","mimes","filename","toBlobInfo","URL","createObjectURL","findFirst","cachedBlobInfo","removeByUri","revokeObjectURL","Uploader","pendingPromises","pathJoin","path1","path2","defaultHandler","progress","xhr","XMLHttpRequest","withCredentials","credentials","upload","onprogress","loaded","total","json","JSON","responseText","basePath","formData","FormData","send","uploadHandler","noUpload","handlerSuccess","handlerFailure","resolvePending","uploadBlobInfo","openNotification","percent","isDefaultHandler","pendingUploadBlobInfo","uploadBlobs","blobInfos","createUploader","ImageUploader","uploader","showNotification","EditorUpload","imageScanner","urlFilters","aliveGuard","cacheInvalidator","replaceString","replaceImageUrl","targetUrl","replacementUrl","replacementString","replaceUrlInUndoStack","replaceImageUriInView","uploadImages","scanForImages","imageInfos","imagesToRemove","shouldDispatchChange","filteredResult","uploadInfo","uploadUri","dispatchChange","uploadImagesAuto","isValidDataUriImage","imgElm","resultItem","replaceBlobUris","source_view","get$1","valigntop","verticalAlign","valignmiddle","valignbottom","alignleft","preview","textAlign","float","marginLeft","marginRight","aligncenter","alignright","alignjustify","bold","fontWeight","italic","fontStyle","underline","strikethrough","strike","forecolor","hilitecolor","fontname","fontFamily","fontsize","fontSize","lineheight","lineHeight","fontsize_class","class","blockquote","subscript","superscript","_fmt","_itemName","lang","customValue","removeformat","genericBase","cellBase","cellFormats","tablecellbackgroundcolor","tablecellverticalalign","tablecellbordercolor","borderColor","tablecellclass","tableclass","tablecellborderstyle","borderStyle","tablecellborderwidth","borderWidth","FormatRegistry","unregister","each$3","isPreviewItem","parsedSelectorToHtml","ancestry","sItem","getRequiredParent","elmRule","wrapInHtml","ancestors","parentCandidate","ancestorName","parentRequired","siblingElm","parentSiblings","parseSelectorItem","$0","$3","$4","parseSelector","getCssText","previewCss","previewStyles","removeVars","previewFrag","previewElm","rawParentFontSize","parentFontSize","numValue","setup$r","addShortcut","Formatter","formatChangeState","shouldIgnoreCommand","isFirstTypedCharacter","addNonTypingUndoLevel","isDirty","modKey","isInsertReplacementText","inputType","isInsertTextDataNull","isInsertFromPasteOrDrop","addKeyboardShortcuts","UndoManager","nonTypingKeycodes","placeholderAttr","isKeyboardEvent","isDeleteEvent","isNonTypingKeyboardEvent","isTypingKeyboardEvent","isVisuallyEmpty","setup$q","placeholder","updatePlaceholder","showPlaceholder","isPlaceholderShown","blockPosition","blockBoundary","getBlockPosition","containerElm","isDifferentBlocks","hasSameParent","parent1","parent2","isEditable$2","skipLastBr","lastPositionInBlock","readFromRange","fromBlockPos","toBlockPos","blockPos","read$1","getChildrenUntilBlockBoundary","extractChildren","removeEmptyRoot","isEmptyBefore","nestedBlockMerge","toBlock","insertionPoint","sidelongBlockMerge","findInsertionPoint","parentsAndSelf$1","getInsertionPoint","trimBr","mergeBlockInto","mergeBlocks","backspaceDelete$8","deleteRangeMergeBlocks","isRawNodeInTable","isSelectionInTable","isEverythingSelected","noPrevious","noNext","emptyEditor","deleteRange$1","backspaceDelete$7","_forward","showCaret","getNodeRange","renderCaretAtRange","caretPositionNode","caretPositionBeforeNode","ceRoot","renderRangeCaret","isBeforeBoundary","isAfterBoundary","trimEmptyTextNode","deleteContentAndShowCaret","peekCaretPosition","caretRange","deleteRange","deleteBoundaryText","getNextPosFn","isBeforeFn","nextCaretPosition","normalizedNextCaretPosition","backspaceDelete$6","getEdgeCefPosition","atStart","isCefAtEdgeSelected","isCompoundElement","DeleteAction","moveToElement","moveToPosition","isAtContentEditableBlockCaret","caretLocation","isDeleteFromCefDifferentBlocks","deleteEmptyBlockOrMoveToCef","toCefElm","blockElm","findCefPosition","getContentEditableBlockAction","skipMoveToActionFromInlineCefToContent","getContentEditableAction","read","deleteElement$1","hideFakeCaret","getAncestorCe","backspaceDeleteCaret","deleteOffscreenSelection","backspaceDeleteRange","hasCefAncestor","paddEmptyElement","backspaceDelete$5","deleteCaret$2","backspaceDelete$4","isText$2","startsWithCaretContainer","endsWithCaretContainer","createZwsp","insertInline","insertInlineBefore","insertInlineAfter","insertInlinePos","isPosCaretContainer","caretNode","renderCaret","evaluateUntil","fns","Location","rescope$1","nPos","isNotInsideFormatCaretContainer","findInsideRootInline","start$1","isValidLocation","readLocation","getName","outside","inside","isEq","location1","location2","betweenInlines","fromInline","toInline","skipNoMovement","fromLocation","toLocation","findLocationTraverse","findLocationSimple","findLocation$1","hasSelectionModifyApi","modify","moveRel","moveByWord","BreakType","flip","positions","walk$1","getBreakType","currentPos","Br","Block","Wrap","getPositionsUntil","breakType","breakAt","Eol","getAdjacentLinePositions","getPositionsUntilBreak","findClosestHorizontalPositionFromPoint","lastRect","newRect","lastDist","newDist","findClosestHorizontalPosition","targetRect","getPositionsUntilPreviousLine","getPositionsUntilNextLine","getPositionsAbove","getPositionsBelow","isAtFirstLine","isAtLastLine","getFirstLinePositions","getLastLinePositions","getClosestPositionAbove","getClosestPositionBelow","isContentEditableFalse$4","distanceToRectLeft$1","distanceToRectRight$1","isNodeClientRect","findClosestClientRect","oldClientRect","oldDistance","newDistance","getNodeClientRects","toArrayWithNode","VDirection","findUntil","walkUntil","isAboveFn","isBeflowFn","line","targetClientRect","aboveLineNumber","lineNumber","isLineNumber","upUntil","Up","downUntil","Down","getLastClientRect","positionsUntil","isBelowFn","isAboveLine","isLine","moveToRange","renderRangeCaretOpt","moveHorizontally","isBefore","isAfter","isElement","newRange","rangeIsInContainerBlock","moveVertically","caretClientRect","getClosestFn","walkerFn","linePositions","nextLinePositions","nextLineRect","dist1","dist2","caretPositions","closestNextLineRect","getLineEndPoint","lineInfo","moveToLineEndPoint$3","setCaretPosition","setSelected","renderCaretLocation","getPositionFromRange","findLocation","isInlineTarget$1","toggleInlines","inlineBoundaries","selectedInlines","targetInlines","safeRemoveCaretContainer","caretValue","renderInsideInlineCaret","inlines","_inline","move$2","moveWord","_caret","setupSelectedState","moveNextWord","movePrevWord","moveToLineEndPoint$2","linePoint","outsideLoc","rangeFromPositions","hasOnlyTwoOrLessPositionsLeft","setCaretLocation","deleteFromTo","rescope","backspaceDeleteCollapsed","toPosition","backspaceDelete$3","getParentInlines","hasOnlyOneChild","deleteLastPosition","parentInlines","isFormatElement$1","deleteCaret$1","backspaceDelete$2","deleteElement","deleteCaret","isNearMedia","backspaceDelete$1","isEditable$1","parseIndentValue","getIndentStyleName","useMargin","indentStyleName","indentElement","unit","parsedValue","validateBlocks","intentValue","canOutdent","getBlocksToIndent","isReadOnly","isListComponent","parentIsListComponent","indentation","indentUnit","indentValue","outdent","backspaceDelete","findAction","deleteCommand","forwardDeleteCommand","setup$p","addCommand","SIGNIFICANT_MOVE","LONGPRESS_DELAY","getTouch","isFarEnough","distX","distY","setup$o","startData","longpressFired","debounceLongpress","isEqualNode","isBlockElement","isValidTarget","hasBlockParent","shouldRemoveTextNode","createRootBlock","rootNodeName","restoreSelection","insertEmptyLine","setup$n","checkClassName","replaceMatchWithSpan","prevChar","findStartTagIndex","tagHtml","convertRegExpsToNonEditable","nonEditableRegExps","setup$m","contentEditableAttrName","editClass","nonEditClass","hasEditClass","hasNonEditClass","findBlockCaretContainer","blockCaretContainer","handleBlockContainer","setup$l","isContentEditableFalse$3","moveToCeFalseHorizontally","moveToCeFalseVertically","createTextBlock","textBlock","exitPreBlock","getVisualCaretPosition$1","newBlock","getHorizontalRange","getVerticalRange","down","moveH$2","moveV$3","moveToLineEndPoint$1","isCefPosition","selectToEndPoint","curRng","isTarget","getClosestTargetBlock","isAtFirstOrLastLine","moveCaretToNewEmptyLine","insertFn","moveV$2","baseKeyPattern","defaultPatterns","defaultDelayedPatterns","matchesEvent","match$1","matchDelayed","execute","executeWithDelayedAction","moveH$1","moveV$1","moveToLineEndPoint","CellLocation","firstLayer","filterFirstLayer","lookup$1","tags","isRootOrUpperTable","isEligible","newIndex","detection","isEditable","assumeEditable","editable","getRaw","deflate","getCorners","getYAxisValue","tds","findClosestCorner","corners","newCorner","oldCorner","oldDist","getClosestCell","isTargetCorner","corner","getBottomValue","getTopValue","getClosestCellAbove","getClosestCellBelow","findClosestPositionInAboveCell","findClosestPositionInBelowCell","hasNextBreak","breakPos","startsWithWrapBreak","startsWithBrBreak","isAtTableCellLine","isAtFirstTableCellLine","isAtLastTableCellLine","isCaretAtStartOrEndOfTable","navigateHorizontally","_td","getClosestAbovePosition","getClosestBelowPosition","renderBlock","navigateVertically","move$1","mover","moveH","moveV","getCellFirstCursorPosition","tabGo","_current","tabForward","tabBackward","handleTab","rootElements","model","clearSelectedCells","executeKeydownOverride$4","isMac","setup$k","DOM$7","alwaysNext","textBefore","textAfter","scanLeft","scanRight","repeatLeft","isValidTextRange","getText","isWhitespace","stripTrigger","trigger","findTrigger","firstChar","findStart","initRange","minChars","buffer","findTriggerIndex","spot","triggerIndex","isText$1","toLast","toLeaf","isPreviousCharContent","leaf","_element","isStartOfWord","getTriggerContext","database","triggers","getDatabase","lookupWithContext","fetchOptions","startText","autocompleters","lookupByTrigger","lookupData","ac","fetchResult","maxResults","matchText","columns","onAction","highlightOn","SimpleResultType","fold$1","stype","serror","svalue","partition","Value","bindError","toResult","fromResult","SimpleResult","formatObj","input","stringify","formatErrors","es","getErrorInfo","missingRequired","missingKey","missingBranch","branch","custom","chooseFrom","fields","extract","choose$1","choice","chosen","bothObjects","deepMerge","baseMerge","merger","objects","curObject","defaultedThunk","fallbackThunk","defaulted$1","fallback","asOption","mergeValues","mergeErrors","consolidateObj","consolidateArr","partitions","ResultCombine","field$1","newKey","presence","customField$1","instantiator","ifField","ifCustom","validator","anyValue$1","requiredAccess","bundle","fallbackAccess","optionAccess","optionDefaultedAccess","opt","extractField","av","bundleAsOption","optValue","ov","extractFields","objOf","fieldStrings","_okey","_presence","_instantiator","arrOf","extractValue","errs","asRaw","formatError","errInfo","choose","anyValue","typedValue","expectedType","actualType","number","string","boolean","functionProcessor","customField","validateEnum","requiredOf","requiredString","requiredFunction","requiredArrayOf","optionOf","optionString","optionFunction","defaulted","defaultedOf","defaultedNumber","defaultedString","defaultedStringEnum","defaultedBoolean","defaultedFunction","defaultedArrayOf","fetch$1","onSetup","optionalText","optionalIcon","optionalTooltip","optionalLabel","active","enabled","primary","defaultedColumns","defaultedType","autocompleterSchema","createAutocompleter","baseToolbarButtonFields","baseToolbarToggleButtonFields","contextBarFields","contextButtonFields","contextToggleButtonFields","launchButtonFields","launchToggleButtonFields","toggleOrNormal","contextformbutton","contextformtogglebutton","register$2","popups","dataset","popup","datasetValues","dv","setupEditorInput","update","which","cancelIfNecessary","setup$j","activeAutocompleter","uiActive","isActive","commenceIfNecessary","getAutocompleters","doLookup","newContext","lookupInfo","_ui","createAndFireInputEvent","eventType","specifics","overrides","bubbles","isComposing","detail","currentTarget","eventPhase","AT_TARGET","originalTarget","explicitOriginalTarget","isTrusted","cancelable","InputEvent","fireFakeInputEvent","fireFakeBeforeInputEvent","executeKeydownOverride$3","applyAction","beforeInput","executeKeyupOverride","setup$i","firstNonWhiteSpaceNodeSibling","moveToCaretPosition","getEditableRoot","editableRoot","getParentBlock$1","getParentBlockName","isListItemParentBlock","hasFirstChild","isFirstChild","hasParent","isListBlock","isListItem","isNestedList","getContainerBlock","containerBlock","containerBlockParent","isFirstOrLastLi","insert$3","createNewBlock","newBlockName","containerParent","tmpRng","trimZwsp","isWithinNonEditableList","parentList","isEmptyAnchor","containerAndSiblingName","canSplitBlock","trimInlineElementsOnLeftSideOfBlock","firstChilds","normalizeZwspOffset","includeZwspInRange","trimLeadingLineBreaks","applyAttributes","forcedRootBlockAttrs","attrStyles","currentStyles","newStyles","attrClassesOpt","attrClasses","currentClassesOpt","currentClasses","filteredClasses","newClasses","appliedAttrs","remainingAttrs","setForcedBlockAttrs","wrapSelfAndSiblingsInDefaultBlock","startNodeParent","addBrToBlockIfNeeded","shouldEndContainer","optionValue","insert$2","parentBlockName","isAfterLastNodeInContainer","isCaretAtStartOrEndOfBlock","normalizedOffset","insertNewBlockAfter","containerBlockName","liBlock","parentBlockParent","fakeEventName$1","blockbreak","fakeEventName","hasRightSideContent","moveSelectionToBr","brElm","extraBr","insertBrAtCaret","isControlKey","insertBrBefore","insertBrAfter","hasBrAfter","isBeforeBr","isAnchorLink","isInsideAnchor","readInlineAnchorLocation","insertBrOutsideAnchor","insert$1","anchorLocation","linebreak","matchesSelector","shouldInsertBr","shouldBlockNewLine$1","newLineAction","shouldBlockNewLine","_shiftKey","inListBlock","requiredState","inBlock","inCefBlock","inPreBlock","inSummaryBlock","shouldPutBrInPre","inBrContext","hasShiftKey","_editor","canInsertIntoEditableRoot","rootEditable","predicates","isMatch","getAction","insertBreak","logicalAction","handleEnterKeyEvent","setup$h","executeKeydownOverride$2","setup$g","setup$f","platform","executeKeyupAction","isPageUpDown","setNodeChangeBlocker","blocked","setup$e","insertTextAtPosition","insertNbspAtPosition","insertSpaceAtPosition","locationToCaretPosition","insertInlineBoundarySpaceOrNbsp","checkPos","setSelection","insertSpaceOrNbspAtSelection","executeKeydownOverride$1","setup$d","tableTabNavigation","executeKeydownOverride","setup$c","setup$b","NodeChange","lastPath","lastRng","nativeRng","fakeRng","isSameElementPath","initialized","currentPath","internalMimeType","internalHtmlMime","internalMark","mark","unmark","isMarked","isPlainText","openContainer","rootTag","rootAttrs","toBlockElements","tagOpen","tagClose","paragraphs","stitch","pasteBinDefaultContent","create$6","lastRngCell","pasteBinElm","pasteBinClone","isPasteBin","getHtml","copyAndRemove","toElm","fromElm","pasteBinClones","dirtyWrappers","cleanWrapper","isDefaultPasteBinContent","PasteBin","getLastRng","ignoreElements","trimHtml","trimSpaces","s1","s2","createIdGenerator","getImageMimeType","lowerExt","mimeOverrides","jpg","jpe","jfi","jif","jfif","pjpeg","pjp","preProcess","processResult","cancelled","postProcessFilter","tempBody","postProcessArgs","filterContent","preProcessArgs","filteredContent","pasteHtml$1","isAbsoluteUrl","isImageUrl","createImage","pasteHtmlFn","createLink","linkSelection","insertImage","smartInsertContent","pasteAsText","doPaste","pasteHtml","internalFlag","pasteText","encodedText","getDataTransferItems","dataTransfer","types","contentType","hasContentType","clipboardContent","hasHtmlOrText","extractFilename","createBlobInfo","useFileName","pasteImage","imageItem","existingBlobInfo","isClipboardEvent","readFilesAsDataUris","allowedExtensions","extension","getImagesFromDataTransfer","kind","getAsFile","pasteImageData","clipboardData","fileResults","isBrokenAndroidClipboardEvent","isKeyboardPasteEvent","insertClipboardContent","plainTextMode","isInternal","isPlainTextHtml","isAbsoluteUrl$1","registerEventHandlers","pasteBin","pasteFormat","keyboardPastePlainTextState","registerDataImageFilter","isWebKitFakeUrl","isDataUri","isPasteInsert","registerEventsAndFilters","togglePlainTextPaste","register$1","setHtml5Clipboard","clearData","setData","setClipboardData","contenteditable","overflow","offscreenRange","selectNodeContents","isTableSelection","hasSelectedContent","cut","getCaretRangeFromEvent","isPlainTextFileUrl","plainTextContent","setFocusedRange","hasImage","setup$a","draggingInternallyState","dropContent","internalContent","trimmedContent","setup$9","processEvent","addPreProcessFilter","filterFunc","rgbRegExp","rgbToHex","removeWebKitStyles","webKitStylesOption","webKitStyles","inputStyles","outputStyles","inputValue","compareInput","outputStyle","setup$8","setup$7","preventSummaryToggle","filterDetails","setup$6","isText","isContentEditableFalse$2","isContentEditableTrue","getClosestScope","getClosestCef","findEdgeCaretCandidate","findClosestBlockRange","startRng","clickNode","cef","onTripleClickSelect","setup$5","FakeCaretPosition","distanceToRectLeft","distanceToRectRight","isInsideY","collidesY","isOverlapping","overlap","splitRectsPerAxis","intersectingRects","boundingRect","horizontal","vertical","clientInfo","Before","After","horizontalDistance","_y","closestChildCaretCandidateNodeRect","caretCandidateRect","getClosestTextNode","distance","deltaDistance","findClosestCaretCandidateNodeRect","sortedRects","horizontalRects","verticalRects","above","below","traverseUp","helper","prevScope","uncheckedChildren","newScope","closestCaretCandidateNodeRect","ownerDoc","elementAtPoint","closestFakeCaretCandidate","getAbsolutePosition","docElem","getBodyPosition","getScrollPosition","getBodyScroll","inlineScroll","iframeScroll","getMousePosition","iframePosition","scrollPosition","calculatePosition","bodyPosition","mousePosition","calc","scrollPixelsPerInterval","scrollIntervalValue","mouseRangeToTriggerScrollInsideEditor","mouseRangeToTriggerScrollOutsideEditor","isContentEditableFalse$1","isDraggable","isValidDropTarget","targetElement","dragElement","cloneElement","cloneElm","createGhost","clonedElm","opacity","padding","boxSizing","appendGhostToBody","scrollEditor","amount","behavior","scrollRight","scrollUp","scrollDown","moveGhost","maxX","maxY","mouseY","mouseX","overflowX","outerMouseY","outerMouseX","dragging","innerWidth","removeElement","isLeftMouseButtonPressed","button","applyRelPos","relX","ceElm","elmPos","relY","ghost","move","throttledPlaceCaretAt","state_","movement","targetPos","getRawTarget","drop","targetClone","removeDragState","bindFakeDragEvents","pageDom","dragStartHandler","dragHandler","dropHandler","dragEndHandler","blockUnsupportedFileDrop","preventFileDrop","preventFileDropIfUIElement","editorRoot","eventNames","init$2","setup$4","renderFocusCaret","setup$3","isContentEditableFalse","getContentEditableRoot","SelectionOverrides","realSelectionId","selectedElement","isFakeSelectionElement","isFakeSelectionTargetElement","setRange","contentEditableRoot","removeElementSelection","setElementSelection","closestContentEditable","caretInfo","normalizeVoidElementSelection","isRangeInCaretContainer","isWithinCaretContainer","setupOffscreenSelection","realSelectionContainer","selectElement","nodeElm","afterNode","getNormalizedTextOffset","generatePath","generatePathRange","resolvePath","nodePath","resolvedNode","optNode","resolvePathRange","generatePathRangeFromRange","cleanEmptyNodes","deleteRng","startParent","endParent","getParentBlock","resolveFromDynamicPatterns","patternSet","beforeText","dynamicPatterns","getBeforeText","stripPattern","firstTextNode","applyPattern$1","isBlockFormatName","formatSet","sortPatterns","findPattern$1","sortedPatterns","nuText","findPatterns$1","normalizedMatches","blockText","applyMatches$1","newMarker","rangeFromMarker","createMarker","markerPrefix","pathRange","textEnd","textStart","startParentNode","endParentNode","removeMarker","isReplacementPattern","matchesPattern","patternContent","searchText","startEndIndex","findPatternStartFromSpot","startPattern","startSpot","nextSpot","findPatternStart","requireGap","startRange","findPattern","endPathRng","endRng","resultsOpt","findPatternsRec","remainingPatterns","startPathRng","endSpot","patternsWithoutCurrent","applyPattern","patternRange","applyReplacementPattern","markerRange","applyPatternWithContent","startMarker","endMarker","markerEndRange","markerStartRange","patternMarker","addMarkers","matchesWithEnds","findPatterns","applyMatches","matchesWithMarkers","handleEnter","dynamicPatternSet","inlineMatches","blockMatches","handleInlineKey","checkKeyEvent","codes","checkKeyCode","checkCharCode","charCode","setup$2","charCodes","keyCodes","getPatternSet","hasDynamicPatterns","hasPatterns","handleInlineTrigger","setup$1","Quirks","isGecko","isWebKit","setEditorCommandState","emptyEditorWhenDeleting","serializeRng","contents","allContentsSelected","allRng","allSelection","selectAll","shortcuts","documentElementEditingFocus","removeHrOnBackspace","Range","blur","selectControlElements","visualAidsAnchorClass","removeStylesWhenDeletingAcrossBlockElements","getAttributeApplyFunction","setAttributeNode","isSelectionAcrossElements","disableBackspaceIntoATable","removeBlockQuoteOnBackSpace","setGeckoEditingOptions","setOpts","addBrAfterLastLinks","fixLinks","setDefaultBlockType","isAllContentSelected","showBrokenImageIcon","contentStyles","restoreFocusOnKeyDown","bodyHeight","blockCmdArrowNavigation","tapLinksAndImages","blockFormSubmitInsideEditor","removeAppleInterchangeBrs","setupRtc","DOM$6","appendStyle","getRootName","removeUndefined","mkParserSettings","mkSchemaSettings","mkSerializerSettings","createParser","autoFocus","moveSelectionToFirstCaretPosition","initEditor","bindPendingEventDelegates","initInstanceCallback","getStyleSheetLoader$1","makeStylesheetLoadingPromises","framedFonts","loadContentCss","fontCss","removeCss","contentCssText","allStylesheets","contentStyle","preInit","spellcheck","directionality","protect","escape","loadInitialContent","startContent","initEditorWithInitialContent","contentBodyLoaded","disabled","readonly","annotator","_nodeChangeDispatcher","setupRtcThunk","setProgressState","_rtcMode","initContentBody","skipWrite","visibility","orgVisibility","iframe","iframeHTML","srcdoc","DOM$5","createIframeElement","title","customAttrs","tabindex","frameBorder","allowTransparency","getIframeHtml","bodyId","bodyClass","translatedAriaText","createIframe","boxInfo","iframeTitle","ifr","iframeContainer","init$1","hidden","DOM$4","initPlugin","initializedPlugins","Plugin","pluginUrl","pluginInstance","trimLegacyPrefix","initPlugins","initIcons","iconPackName","currentIcons","loadIcons","svgData","icon","addIcon","initTheme","Theme","initModel","Model","renderFromLoadedTheme","render","renderUI","renderThemeFalse","renderFromThemeFunc","iframeHeight","createThemeFalseResult","renderThemeFalseIframe","renderThemeUi","augmentEditorUiApi","uiApiFacade","isEnabled","setEnabled","renderInfo","DOM$3","hasSkipLoadPrefix","loadLanguage","scriptLoader","languageCode","languageUrl","loadTheme","themeUrl","loadModel","modelUrl","getIconsUrlMetaFromUrl","getIconsUrlMetaFromName","defaultIconsUrl","customIconsUrl","urlMeta","loadPlugins","loadPlugin","isThemeLoaded","isModelLoaded","getStyleSheetLoader","snapshot","resetContent","triggerSave","windowManager","set_dirty","sectionResult","sections","deviceDetection","normalizePlugins","trimmedPlugins","extractSections","getSection","defaults","sectionOptions","hasSection","getSectionConfig","getMobileOverrideOptions","mobileOptions","defaultMobileOptions","table_grid","object_resizing","resize","toolbar_mode","toolbar_sticky","defaultPhoneOptions","menubar","getExternalPlugins","overrideOptions","userDefinedExternalPlugins","external_plugins","combinePlugins","forcedPlugins","getPlatformPlugins","isMobileDevice","desktopPlugins","mobilePlugins","processPlugins","defaultOverrideOptions","forced_plugins","mobileConfig","platformPlugins","combinedPlugins","isOnMobile","combineOptions","defaultOptions","deviceOverrideOptions","mobile","extendedOptions","normalizeOptions","registerExecCommands$3","toggleAlign","editorCommands","addCommands","JustifyLeft","JustifyCenter","JustifyRight","JustifyFull","JustifyNone","registerQueryStateCommands$1","alignStates","registerCommands$a","registerCommands$9","queryCommandEnabled","queryCommandSupported","trimOrPadLeftRight","processValue$1","trimOrPad","insertAtCaret","insertedContent","registerCommands$8","mceCleanup","_command","insertHorizontalRule","insertText","insertHTML","mceInsertContent","mceSetContent","mceReplaceContent","mceNewDocument","legacyPropNames","isFont","getSpecifiedFontProp","getProperty","legacyPropName","normalizeFontFamily","getComputedFontProp","getFontProp","getFontSize","getFontFamily","findFirstCaretElement","getCaretElement","atStartOfNode","bindRange","mapRange","fromFontSizeNumber","fontSizeNumber","fontClasses","normalizeFontNames","font","fonts","fontNameAction","fontNameQuery","fontSizeAction","fontSizeQuery","lineHeightQuery","specifiedStyle","computedStyle","lineHeightAction","registerExecCommands$2","customCode","registerQueryValueCommands","isFormatMatch","addQueryValueHandler","registerCommands$7","registerCommands$6","mceAddUndoLevel","mceEndUndoLevel","Undo","Redo","registerCommands$5","Indent","Outdent","registerCommands$4","applyLinkToSelection","linkDetails","unlink","mceInsertLink","registerExecCommands$1","listParent","registerQueryStateCommands","list","registerCommands$3","registerCommands$2","insertParagraph","mceInsertNewLine","InsertLineBreak","registerCommands$1","mceSelectNodeDepth","mceSelectNode","editingHost","registerExecCommands","mceRemoveNode","mcePrint","print","mceFocus","mceToggleVisualAid","registerCommands","EditorCommands","commands","lowerCaseCommand","skip_focus","queryCommandState","queryCommandValue","commandList","addQueryStateHandler","internalContentEditableAttr","setContentEditable","switchOffContentEditableTrue","switchOnContentEditableTrue","removeFakeSelection","restoreFakeSelection","toggleReadOnly","registerFilters","registerReadOnlyContentFilters","isClickEvent","allowedEvents","isReadOnlyAllowedEvent","getAnchorHrefOpt","processReadonlyEvents","targetEl","registerReadOnlySelectionBlockers","nativeEvents","EventDispatcher","bindings","toggleEvent","isNative","beforeFire","once","wrappedCallback","currentName","bindingName","filteredHandlers","binding","getEventDispatcher","_eventDispatcher","toggleNativeEvent","Observable","bubble","dispatcherArgs","DOM$2","customEventRootDelegates","getEventTarget","eventName","eventRoot","isListening","bindEventDelegate","delegates","eventRootElm","delegate","editors","EditorObservable","_pendingNativeEvents","stringListProcessor","getBuiltInProcessor","processValue","isBuiltInSpec","getErrorMessage","additionalText","isValidResult","processDefaultValue","create$5","initialOptions","setValue","isRegistered","immutable","unset","registered","defaultModes","switchToMode","activeMode","availableModes","oldMode","newMode","activate","deactivate","editorReadOnly","setMode","registerMode","create$4","design","each$2","keyCodeLookup","f1","f2","f3","f4","f5","f6","f7","f8","f9","f10","f11","f12","modifierNames","isModifier","parseShortcut","shortcut","access","alt","ctrl","meta","Shortcuts","pendingPatterns","hasModifier","isFunctionKey","matchShortcut","subpatterns","executeShortcutAction","cmdFunc","normalizeCommandFunc","createShortcut","create$3","buttons","menuItems","contextMenus","contextToolbars","sidebars","addButton","addGroupToolbarButton","addToggleButton","addMenuButton","addSplitButton","addMenuItem","addNestedMenuItem","addToggleMenuItem","addAutocompleter","addContextMenu","addContextToolbar","addContextForm","addSidebar","bridge","DOM$1","each$1","Editor","loadedCSS","isNotDirty","documentBaseURL","_setBaseUrl","baseURI","setupCallback","getParam","loadArgs","saveArgs","initialContent","oldState","urlConverterCallback","_scanForImages","boundGlobalEvents","beforeUnloadDelegate","globalEventDelegate","EditorManager","toggleGlobalEvents","removeEditorFromList","targetEditor","oldEditors","purgeDestroyedEditor","isQuirksMode","compatMode","majorVersion","minorVersion","releaseDate","i18n","tinymce","tinyMCEPreInit","srcScript","overrideDefaults","base_url","pluginBaseUrls","plugin_base_urls","pluginBaseUrl","pluginName","invalidInlineTargets","isInvalidInlineTarget","createId","execCallback","findTargets","provideResults","initEditors","initCount","createEditor","existingEditor","editorId","editorOptions","addI18n","relatedTarget","dataValue","FakeClipboardItem","getType","FakeClipboard","relativePosition","targetW","targetH","relChars","create$2","findBestRelativePosition","constrainRect","rels","inflate","intersect","cropRect","x1","y1","clamp","clampRect","fixedSize","cx2","cy2","underflowX1","underflowY1","overflowX2","overflowY2","fromClientRect","Rect","awaiter","resolveCb","rejectCb","complete","completer","create$1","tasks","resultFns","loadErrMsg","runErrMsg","task","waiter","Resource","storage","getItem","setItem","removeItem","defineProperty","localStorage","LocalStorage","publicApi","geom","util","TreeWalker","Serializer","Selection","exportToModuleLoaders","module","exportToWindowGlobal","tinyMCE"],"sources":["/home/hyq/Desktop/app/ginblog/web/admin/node_modules/tinymce/tinymce.js"],"sourcesContent":["/**\n * TinyMCE version 6.2.0 (2022-09-08)\n */\n\n(function () {\n    'use strict';\n\n    var typeOf$1 = function (x) {\n      if (x === null) {\n        return 'null';\n      }\n      if (x === undefined) {\n        return 'undefined';\n      }\n      var t = typeof x;\n      if (t === 'object' && (Array.prototype.isPrototypeOf(x) || x.constructor && x.constructor.name === 'Array')) {\n        return 'array';\n      }\n      if (t === 'object' && (String.prototype.isPrototypeOf(x) || x.constructor && x.constructor.name === 'String')) {\n        return 'string';\n      }\n      return t;\n    };\n    var isEquatableType = function (x) {\n      return [\n        'undefined',\n        'boolean',\n        'number',\n        'string',\n        'function',\n        'xml',\n        'null'\n      ].indexOf(x) !== -1;\n    };\n\n    var sort$1 = function (xs, compareFn) {\n      var clone = Array.prototype.slice.call(xs);\n      return clone.sort(compareFn);\n    };\n\n    var contramap = function (eqa, f) {\n      return eq$2(function (x, y) {\n        return eqa.eq(f(x), f(y));\n      });\n    };\n    var eq$2 = function (f) {\n      return { eq: f };\n    };\n    var tripleEq = eq$2(function (x, y) {\n      return x === y;\n    });\n    var eqString = tripleEq;\n    var eqArray = function (eqa) {\n      return eq$2(function (x, y) {\n        if (x.length !== y.length) {\n          return false;\n        }\n        var len = x.length;\n        for (var i = 0; i < len; i++) {\n          if (!eqa.eq(x[i], y[i])) {\n            return false;\n          }\n        }\n        return true;\n      });\n    };\n    var eqSortedArray = function (eqa, compareFn) {\n      return contramap(eqArray(eqa), function (xs) {\n        return sort$1(xs, compareFn);\n      });\n    };\n    var eqRecord = function (eqa) {\n      return eq$2(function (x, y) {\n        var kx = Object.keys(x);\n        var ky = Object.keys(y);\n        if (!eqSortedArray(eqString).eq(kx, ky)) {\n          return false;\n        }\n        var len = kx.length;\n        for (var i = 0; i < len; i++) {\n          var q = kx[i];\n          if (!eqa.eq(x[q], y[q])) {\n            return false;\n          }\n        }\n        return true;\n      });\n    };\n    var eqAny = eq$2(function (x, y) {\n      if (x === y) {\n        return true;\n      }\n      var tx = typeOf$1(x);\n      var ty = typeOf$1(y);\n      if (tx !== ty) {\n        return false;\n      }\n      if (isEquatableType(tx)) {\n        return x === y;\n      } else if (tx === 'array') {\n        return eqArray(eqAny).eq(x, y);\n      } else if (tx === 'object') {\n        return eqRecord(eqAny).eq(x, y);\n      }\n      return false;\n    });\n\n    const getPrototypeOf$1 = Object.getPrototypeOf;\n    const hasProto = (v, constructor, predicate) => {\n      var _a;\n      if (predicate(v, constructor.prototype)) {\n        return true;\n      } else {\n        return ((_a = v.constructor) === null || _a === void 0 ? void 0 : _a.name) === constructor.name;\n      }\n    };\n    const typeOf = x => {\n      const t = typeof x;\n      if (x === null) {\n        return 'null';\n      } else if (t === 'object' && Array.isArray(x)) {\n        return 'array';\n      } else if (t === 'object' && hasProto(x, String, (o, proto) => proto.isPrototypeOf(o))) {\n        return 'string';\n      } else {\n        return t;\n      }\n    };\n    const isType$1 = type => value => typeOf(value) === type;\n    const isSimpleType = type => value => typeof value === type;\n    const eq$1 = t => a => t === a;\n    const is$4 = (value, constructor) => isObject(value) && hasProto(value, constructor, (o, proto) => getPrototypeOf$1(o) === proto);\n    const isString = isType$1('string');\n    const isObject = isType$1('object');\n    const isPlainObject = value => is$4(value, Object);\n    const isArray$1 = isType$1('array');\n    const isNull = eq$1(null);\n    const isBoolean = isSimpleType('boolean');\n    const isUndefined = eq$1(undefined);\n    const isNullable = a => a === null || a === undefined;\n    const isNonNullable = a => !isNullable(a);\n    const isFunction = isSimpleType('function');\n    const isNumber = isSimpleType('number');\n    const isArrayOf = (value, pred) => {\n      if (isArray$1(value)) {\n        for (let i = 0, len = value.length; i < len; ++i) {\n          if (!pred(value[i])) {\n            return false;\n          }\n        }\n        return true;\n      }\n      return false;\n    };\n\n    const noop = () => {\n    };\n    const compose = (fa, fb) => {\n      return (...args) => {\n        return fa(fb.apply(null, args));\n      };\n    };\n    const compose1 = (fbc, fab) => a => fbc(fab(a));\n    const constant = value => {\n      return () => {\n        return value;\n      };\n    };\n    const identity = x => {\n      return x;\n    };\n    const tripleEquals = (a, b) => {\n      return a === b;\n    };\n    function curry(fn, ...initialArgs) {\n      return (...restArgs) => {\n        const all = initialArgs.concat(restArgs);\n        return fn.apply(null, all);\n      };\n    }\n    const not = f => t => !f(t);\n    const die = msg => {\n      return () => {\n        throw new Error(msg);\n      };\n    };\n    const apply$1 = f => {\n      return f();\n    };\n    const call = f => {\n      f();\n    };\n    const never = constant(false);\n    const always = constant(true);\n\n    class Optional {\n      constructor(tag, value) {\n        this.tag = tag;\n        this.value = value;\n      }\n      static some(value) {\n        return new Optional(true, value);\n      }\n      static none() {\n        return Optional.singletonNone;\n      }\n      fold(onNone, onSome) {\n        if (this.tag) {\n          return onSome(this.value);\n        } else {\n          return onNone();\n        }\n      }\n      isSome() {\n        return this.tag;\n      }\n      isNone() {\n        return !this.tag;\n      }\n      map(mapper) {\n        if (this.tag) {\n          return Optional.some(mapper(this.value));\n        } else {\n          return Optional.none();\n        }\n      }\n      bind(binder) {\n        if (this.tag) {\n          return binder(this.value);\n        } else {\n          return Optional.none();\n        }\n      }\n      exists(predicate) {\n        return this.tag && predicate(this.value);\n      }\n      forall(predicate) {\n        return !this.tag || predicate(this.value);\n      }\n      filter(predicate) {\n        if (!this.tag || predicate(this.value)) {\n          return this;\n        } else {\n          return Optional.none();\n        }\n      }\n      getOr(replacement) {\n        return this.tag ? this.value : replacement;\n      }\n      or(replacement) {\n        return this.tag ? this : replacement;\n      }\n      getOrThunk(thunk) {\n        return this.tag ? this.value : thunk();\n      }\n      orThunk(thunk) {\n        return this.tag ? this : thunk();\n      }\n      getOrDie(message) {\n        if (!this.tag) {\n          throw new Error(message !== null && message !== void 0 ? message : 'Called getOrDie on None');\n        } else {\n          return this.value;\n        }\n      }\n      static from(value) {\n        return isNonNullable(value) ? Optional.some(value) : Optional.none();\n      }\n      getOrNull() {\n        return this.tag ? this.value : null;\n      }\n      getOrUndefined() {\n        return this.value;\n      }\n      each(worker) {\n        if (this.tag) {\n          worker(this.value);\n        }\n      }\n      toArray() {\n        return this.tag ? [this.value] : [];\n      }\n      toString() {\n        return this.tag ? `some(${ this.value })` : 'none()';\n      }\n    }\n    Optional.singletonNone = new Optional(false);\n\n    const nativeSlice = Array.prototype.slice;\n    const nativeIndexOf = Array.prototype.indexOf;\n    const nativePush = Array.prototype.push;\n    const rawIndexOf = (ts, t) => nativeIndexOf.call(ts, t);\n    const indexOf$1 = (xs, x) => {\n      const r = rawIndexOf(xs, x);\n      return r === -1 ? Optional.none() : Optional.some(r);\n    };\n    const contains$2 = (xs, x) => rawIndexOf(xs, x) > -1;\n    const exists = (xs, pred) => {\n      for (let i = 0, len = xs.length; i < len; i++) {\n        const x = xs[i];\n        if (pred(x, i)) {\n          return true;\n        }\n      }\n      return false;\n    };\n    const map$3 = (xs, f) => {\n      const len = xs.length;\n      const r = new Array(len);\n      for (let i = 0; i < len; i++) {\n        const x = xs[i];\n        r[i] = f(x, i);\n      }\n      return r;\n    };\n    const each$e = (xs, f) => {\n      for (let i = 0, len = xs.length; i < len; i++) {\n        const x = xs[i];\n        f(x, i);\n      }\n    };\n    const eachr = (xs, f) => {\n      for (let i = xs.length - 1; i >= 0; i--) {\n        const x = xs[i];\n        f(x, i);\n      }\n    };\n    const partition$2 = (xs, pred) => {\n      const pass = [];\n      const fail = [];\n      for (let i = 0, len = xs.length; i < len; i++) {\n        const x = xs[i];\n        const arr = pred(x, i) ? pass : fail;\n        arr.push(x);\n      }\n      return {\n        pass,\n        fail\n      };\n    };\n    const filter$5 = (xs, pred) => {\n      const r = [];\n      for (let i = 0, len = xs.length; i < len; i++) {\n        const x = xs[i];\n        if (pred(x, i)) {\n          r.push(x);\n        }\n      }\n      return r;\n    };\n    const foldr = (xs, f, acc) => {\n      eachr(xs, (x, i) => {\n        acc = f(acc, x, i);\n      });\n      return acc;\n    };\n    const foldl = (xs, f, acc) => {\n      each$e(xs, (x, i) => {\n        acc = f(acc, x, i);\n      });\n      return acc;\n    };\n    const findUntil$1 = (xs, pred, until) => {\n      for (let i = 0, len = xs.length; i < len; i++) {\n        const x = xs[i];\n        if (pred(x, i)) {\n          return Optional.some(x);\n        } else if (until(x, i)) {\n          break;\n        }\n      }\n      return Optional.none();\n    };\n    const find$2 = (xs, pred) => {\n      return findUntil$1(xs, pred, never);\n    };\n    const findIndex$2 = (xs, pred) => {\n      for (let i = 0, len = xs.length; i < len; i++) {\n        const x = xs[i];\n        if (pred(x, i)) {\n          return Optional.some(i);\n        }\n      }\n      return Optional.none();\n    };\n    const flatten = xs => {\n      const r = [];\n      for (let i = 0, len = xs.length; i < len; ++i) {\n        if (!isArray$1(xs[i])) {\n          throw new Error('Arr.flatten item ' + i + ' was not an array, input: ' + xs);\n        }\n        nativePush.apply(r, xs[i]);\n      }\n      return r;\n    };\n    const bind$3 = (xs, f) => flatten(map$3(xs, f));\n    const forall = (xs, pred) => {\n      for (let i = 0, len = xs.length; i < len; ++i) {\n        const x = xs[i];\n        if (pred(x, i) !== true) {\n          return false;\n        }\n      }\n      return true;\n    };\n    const reverse = xs => {\n      const r = nativeSlice.call(xs, 0);\n      r.reverse();\n      return r;\n    };\n    const difference = (a1, a2) => filter$5(a1, x => !contains$2(a2, x));\n    const mapToObject = (xs, f) => {\n      const r = {};\n      for (let i = 0, len = xs.length; i < len; i++) {\n        const x = xs[i];\n        r[String(x)] = f(x, i);\n      }\n      return r;\n    };\n    const sort = (xs, comparator) => {\n      const copy = nativeSlice.call(xs, 0);\n      copy.sort(comparator);\n      return copy;\n    };\n    const get$b = (xs, i) => i >= 0 && i < xs.length ? Optional.some(xs[i]) : Optional.none();\n    const head = xs => get$b(xs, 0);\n    const last$3 = xs => get$b(xs, xs.length - 1);\n    const from = isFunction(Array.from) ? Array.from : x => nativeSlice.call(x);\n    const findMap = (arr, f) => {\n      for (let i = 0; i < arr.length; i++) {\n        const r = f(arr[i], i);\n        if (r.isSome()) {\n          return r;\n        }\n      }\n      return Optional.none();\n    };\n    const unique$1 = (xs, comparator) => {\n      const r = [];\n      const isDuplicated = isFunction(comparator) ? x => exists(r, i => comparator(i, x)) : x => contains$2(r, x);\n      for (let i = 0, len = xs.length; i < len; i++) {\n        const x = xs[i];\n        if (!isDuplicated(x)) {\n          r.push(x);\n        }\n      }\n      return r;\n    };\n\n    const keys = Object.keys;\n    const hasOwnProperty$2 = Object.hasOwnProperty;\n    const each$d = (obj, f) => {\n      const props = keys(obj);\n      for (let k = 0, len = props.length; k < len; k++) {\n        const i = props[k];\n        const x = obj[i];\n        f(x, i);\n      }\n    };\n    const map$2 = (obj, f) => {\n      return tupleMap(obj, (x, i) => ({\n        k: i,\n        v: f(x, i)\n      }));\n    };\n    const tupleMap = (obj, f) => {\n      const r = {};\n      each$d(obj, (x, i) => {\n        const tuple = f(x, i);\n        r[tuple.k] = tuple.v;\n      });\n      return r;\n    };\n    const objAcc = r => (x, i) => {\n      r[i] = x;\n    };\n    const internalFilter = (obj, pred, onTrue, onFalse) => {\n      each$d(obj, (x, i) => {\n        (pred(x, i) ? onTrue : onFalse)(x, i);\n      });\n    };\n    const bifilter = (obj, pred) => {\n      const t = {};\n      const f = {};\n      internalFilter(obj, pred, objAcc(t), objAcc(f));\n      return {\n        t,\n        f\n      };\n    };\n    const filter$4 = (obj, pred) => {\n      const t = {};\n      internalFilter(obj, pred, objAcc(t), noop);\n      return t;\n    };\n    const mapToArray = (obj, f) => {\n      const r = [];\n      each$d(obj, (value, name) => {\n        r.push(f(value, name));\n      });\n      return r;\n    };\n    const values = obj => {\n      return mapToArray(obj, identity);\n    };\n    const get$a = (obj, key) => {\n      return has$2(obj, key) ? Optional.from(obj[key]) : Optional.none();\n    };\n    const has$2 = (obj, key) => hasOwnProperty$2.call(obj, key);\n    const hasNonNullableKey = (obj, key) => has$2(obj, key) && obj[key] !== undefined && obj[key] !== null;\n    const equal$1 = (a1, a2, eq = eqAny) => eqRecord(eq).eq(a1, a2);\n\n    const stringArray = a => {\n      const all = {};\n      each$e(a, key => {\n        all[key] = {};\n      });\n      return keys(all);\n    };\n\n    const isArrayLike = o => o.length !== undefined;\n    const isArray = Array.isArray;\n    const toArray$1 = obj => {\n      if (!isArray(obj)) {\n        const array = [];\n        for (let i = 0, l = obj.length; i < l; i++) {\n          array[i] = obj[i];\n        }\n        return array;\n      } else {\n        return obj;\n      }\n    };\n    const each$c = (o, cb, s) => {\n      if (!o) {\n        return false;\n      }\n      s = s || o;\n      if (isArrayLike(o)) {\n        for (let n = 0, l = o.length; n < l; n++) {\n          if (cb.call(s, o[n], n, o) === false) {\n            return false;\n          }\n        }\n      } else {\n        for (const n in o) {\n          if (has$2(o, n)) {\n            if (cb.call(s, o[n], n, o) === false) {\n              return false;\n            }\n          }\n        }\n      }\n      return true;\n    };\n    const map$1 = (array, callback) => {\n      const out = [];\n      each$c(array, (item, index) => {\n        out.push(callback(item, index, array));\n      });\n      return out;\n    };\n    const filter$3 = (a, f) => {\n      const o = [];\n      each$c(a, (v, index) => {\n        if (!f || f(v, index, a)) {\n          o.push(v);\n        }\n      });\n      return o;\n    };\n    const indexOf = (a, v) => {\n      if (a) {\n        for (let i = 0, l = a.length; i < l; i++) {\n          if (a[i] === v) {\n            return i;\n          }\n        }\n      }\n      return -1;\n    };\n    const reduce = (collection, iteratee, accumulator, thisArg) => {\n      let acc = isUndefined(accumulator) ? collection[0] : accumulator;\n      for (let i = 0; i < collection.length; i++) {\n        acc = iteratee.call(thisArg, acc, collection[i], i);\n      }\n      return acc;\n    };\n    const findIndex$1 = (array, predicate, thisArg) => {\n      for (let i = 0, l = array.length; i < l; i++) {\n        if (predicate.call(thisArg, array[i], i, array)) {\n          return i;\n        }\n      }\n      return -1;\n    };\n    const last$2 = collection => collection[collection.length - 1];\n\n    const cached = f => {\n      let called = false;\n      let r;\n      return (...args) => {\n        if (!called) {\n          called = true;\n          r = f.apply(null, args);\n        }\n        return r;\n      };\n    };\n\n    const DeviceType = (os, browser, userAgent, mediaMatch) => {\n      const isiPad = os.isiOS() && /ipad/i.test(userAgent) === true;\n      const isiPhone = os.isiOS() && !isiPad;\n      const isMobile = os.isiOS() || os.isAndroid();\n      const isTouch = isMobile || mediaMatch('(pointer:coarse)');\n      const isTablet = isiPad || !isiPhone && isMobile && mediaMatch('(min-device-width:768px)');\n      const isPhone = isiPhone || isMobile && !isTablet;\n      const iOSwebview = browser.isSafari() && os.isiOS() && /safari/i.test(userAgent) === false;\n      const isDesktop = !isPhone && !isTablet && !iOSwebview;\n      return {\n        isiPad: constant(isiPad),\n        isiPhone: constant(isiPhone),\n        isTablet: constant(isTablet),\n        isPhone: constant(isPhone),\n        isTouch: constant(isTouch),\n        isAndroid: os.isAndroid,\n        isiOS: os.isiOS,\n        isWebView: constant(iOSwebview),\n        isDesktop: constant(isDesktop)\n      };\n    };\n\n    const firstMatch = (regexes, s) => {\n      for (let i = 0; i < regexes.length; i++) {\n        const x = regexes[i];\n        if (x.test(s)) {\n          return x;\n        }\n      }\n      return undefined;\n    };\n    const find$1 = (regexes, agent) => {\n      const r = firstMatch(regexes, agent);\n      if (!r) {\n        return {\n          major: 0,\n          minor: 0\n        };\n      }\n      const group = i => {\n        return Number(agent.replace(r, '$' + i));\n      };\n      return nu$3(group(1), group(2));\n    };\n    const detect$5 = (versionRegexes, agent) => {\n      const cleanedAgent = String(agent).toLowerCase();\n      if (versionRegexes.length === 0) {\n        return unknown$2();\n      }\n      return find$1(versionRegexes, cleanedAgent);\n    };\n    const unknown$2 = () => {\n      return nu$3(0, 0);\n    };\n    const nu$3 = (major, minor) => {\n      return {\n        major,\n        minor\n      };\n    };\n    const Version = {\n      nu: nu$3,\n      detect: detect$5,\n      unknown: unknown$2\n    };\n\n    const detectBrowser$1 = (browsers, userAgentData) => {\n      return findMap(userAgentData.brands, uaBrand => {\n        const lcBrand = uaBrand.brand.toLowerCase();\n        return find$2(browsers, browser => {\n          var _a;\n          return lcBrand === ((_a = browser.brand) === null || _a === void 0 ? void 0 : _a.toLowerCase());\n        }).map(info => ({\n          current: info.name,\n          version: Version.nu(parseInt(uaBrand.version, 10), 0)\n        }));\n      });\n    };\n\n    const detect$4 = (candidates, userAgent) => {\n      const agent = String(userAgent).toLowerCase();\n      return find$2(candidates, candidate => {\n        return candidate.search(agent);\n      });\n    };\n    const detectBrowser = (browsers, userAgent) => {\n      return detect$4(browsers, userAgent).map(browser => {\n        const version = Version.detect(browser.versionRegexes, userAgent);\n        return {\n          current: browser.name,\n          version\n        };\n      });\n    };\n    const detectOs = (oses, userAgent) => {\n      return detect$4(oses, userAgent).map(os => {\n        const version = Version.detect(os.versionRegexes, userAgent);\n        return {\n          current: os.name,\n          version\n        };\n      });\n    };\n\n    const removeFromStart = (str, numChars) => {\n      return str.substring(numChars);\n    };\n\n    const checkRange = (str, substr, start) => substr === '' || str.length >= substr.length && str.substr(start, start + substr.length) === substr;\n    const removeLeading = (str, prefix) => {\n      return startsWith(str, prefix) ? removeFromStart(str, prefix.length) : str;\n    };\n    const contains$1 = (str, substr, start = 0, end) => {\n      const idx = str.indexOf(substr, start);\n      if (idx !== -1) {\n        return isUndefined(end) ? true : idx + substr.length <= end;\n      } else {\n        return false;\n      }\n    };\n    const startsWith = (str, prefix) => {\n      return checkRange(str, prefix, 0);\n    };\n    const endsWith = (str, suffix) => {\n      return checkRange(str, suffix, str.length - suffix.length);\n    };\n    const blank = r => s => s.replace(r, '');\n    const trim$3 = blank(/^\\s+|\\s+$/g);\n    const lTrim = blank(/^\\s+/g);\n    const rTrim = blank(/\\s+$/g);\n    const isNotEmpty = s => s.length > 0;\n    const isEmpty$3 = s => !isNotEmpty(s);\n    const repeat = (s, count) => count <= 0 ? '' : new Array(count + 1).join(s);\n    const toInt = (value, radix = 10) => {\n      const num = parseInt(value, radix);\n      return isNaN(num) ? Optional.none() : Optional.some(num);\n    };\n\n    const normalVersionRegex = /.*?version\\/\\ ?([0-9]+)\\.([0-9]+).*/;\n    const checkContains = target => {\n      return uastring => {\n        return contains$1(uastring, target);\n      };\n    };\n    const browsers = [\n      {\n        name: 'Edge',\n        versionRegexes: [/.*?edge\\/ ?([0-9]+)\\.([0-9]+)$/],\n        search: uastring => {\n          return contains$1(uastring, 'edge/') && contains$1(uastring, 'chrome') && contains$1(uastring, 'safari') && contains$1(uastring, 'applewebkit');\n        }\n      },\n      {\n        name: 'Chromium',\n        brand: 'Chromium',\n        versionRegexes: [\n          /.*?chrome\\/([0-9]+)\\.([0-9]+).*/,\n          normalVersionRegex\n        ],\n        search: uastring => {\n          return contains$1(uastring, 'chrome') && !contains$1(uastring, 'chromeframe');\n        }\n      },\n      {\n        name: 'IE',\n        versionRegexes: [\n          /.*?msie\\ ?([0-9]+)\\.([0-9]+).*/,\n          /.*?rv:([0-9]+)\\.([0-9]+).*/\n        ],\n        search: uastring => {\n          return contains$1(uastring, 'msie') || contains$1(uastring, 'trident');\n        }\n      },\n      {\n        name: 'Opera',\n        versionRegexes: [\n          normalVersionRegex,\n          /.*?opera\\/([0-9]+)\\.([0-9]+).*/\n        ],\n        search: checkContains('opera')\n      },\n      {\n        name: 'Firefox',\n        versionRegexes: [/.*?firefox\\/\\ ?([0-9]+)\\.([0-9]+).*/],\n        search: checkContains('firefox')\n      },\n      {\n        name: 'Safari',\n        versionRegexes: [\n          normalVersionRegex,\n          /.*?cpu os ([0-9]+)_([0-9]+).*/\n        ],\n        search: uastring => {\n          return (contains$1(uastring, 'safari') || contains$1(uastring, 'mobile/')) && contains$1(uastring, 'applewebkit');\n        }\n      }\n    ];\n    const oses = [\n      {\n        name: 'Windows',\n        search: checkContains('win'),\n        versionRegexes: [/.*?windows\\ nt\\ ?([0-9]+)\\.([0-9]+).*/]\n      },\n      {\n        name: 'iOS',\n        search: uastring => {\n          return contains$1(uastring, 'iphone') || contains$1(uastring, 'ipad');\n        },\n        versionRegexes: [\n          /.*?version\\/\\ ?([0-9]+)\\.([0-9]+).*/,\n          /.*cpu os ([0-9]+)_([0-9]+).*/,\n          /.*cpu iphone os ([0-9]+)_([0-9]+).*/\n        ]\n      },\n      {\n        name: 'Android',\n        search: checkContains('android'),\n        versionRegexes: [/.*?android\\ ?([0-9]+)\\.([0-9]+).*/]\n      },\n      {\n        name: 'macOS',\n        search: checkContains('mac os x'),\n        versionRegexes: [/.*?mac\\ os\\ x\\ ?([0-9]+)_([0-9]+).*/]\n      },\n      {\n        name: 'Linux',\n        search: checkContains('linux'),\n        versionRegexes: []\n      },\n      {\n        name: 'Solaris',\n        search: checkContains('sunos'),\n        versionRegexes: []\n      },\n      {\n        name: 'FreeBSD',\n        search: checkContains('freebsd'),\n        versionRegexes: []\n      },\n      {\n        name: 'ChromeOS',\n        search: checkContains('cros'),\n        versionRegexes: [/.*?chrome\\/([0-9]+)\\.([0-9]+).*/]\n      }\n    ];\n    const PlatformInfo = {\n      browsers: constant(browsers),\n      oses: constant(oses)\n    };\n\n    const edge = 'Edge';\n    const chromium = 'Chromium';\n    const ie = 'IE';\n    const opera = 'Opera';\n    const firefox = 'Firefox';\n    const safari = 'Safari';\n    const unknown$1 = () => {\n      return nu$2({\n        current: undefined,\n        version: Version.unknown()\n      });\n    };\n    const nu$2 = info => {\n      const current = info.current;\n      const version = info.version;\n      const isBrowser = name => () => current === name;\n      return {\n        current,\n        version,\n        isEdge: isBrowser(edge),\n        isChromium: isBrowser(chromium),\n        isIE: isBrowser(ie),\n        isOpera: isBrowser(opera),\n        isFirefox: isBrowser(firefox),\n        isSafari: isBrowser(safari)\n      };\n    };\n    const Browser = {\n      unknown: unknown$1,\n      nu: nu$2,\n      edge: constant(edge),\n      chromium: constant(chromium),\n      ie: constant(ie),\n      opera: constant(opera),\n      firefox: constant(firefox),\n      safari: constant(safari)\n    };\n\n    const windows = 'Windows';\n    const ios = 'iOS';\n    const android = 'Android';\n    const linux = 'Linux';\n    const macos = 'macOS';\n    const solaris = 'Solaris';\n    const freebsd = 'FreeBSD';\n    const chromeos = 'ChromeOS';\n    const unknown = () => {\n      return nu$1({\n        current: undefined,\n        version: Version.unknown()\n      });\n    };\n    const nu$1 = info => {\n      const current = info.current;\n      const version = info.version;\n      const isOS = name => () => current === name;\n      return {\n        current,\n        version,\n        isWindows: isOS(windows),\n        isiOS: isOS(ios),\n        isAndroid: isOS(android),\n        isMacOS: isOS(macos),\n        isLinux: isOS(linux),\n        isSolaris: isOS(solaris),\n        isFreeBSD: isOS(freebsd),\n        isChromeOS: isOS(chromeos)\n      };\n    };\n    const OperatingSystem = {\n      unknown,\n      nu: nu$1,\n      windows: constant(windows),\n      ios: constant(ios),\n      android: constant(android),\n      linux: constant(linux),\n      macos: constant(macos),\n      solaris: constant(solaris),\n      freebsd: constant(freebsd),\n      chromeos: constant(chromeos)\n    };\n\n    const detect$3 = (userAgent, userAgentDataOpt, mediaMatch) => {\n      const browsers = PlatformInfo.browsers();\n      const oses = PlatformInfo.oses();\n      const browser = userAgentDataOpt.bind(userAgentData => detectBrowser$1(browsers, userAgentData)).orThunk(() => detectBrowser(browsers, userAgent)).fold(Browser.unknown, Browser.nu);\n      const os = detectOs(oses, userAgent).fold(OperatingSystem.unknown, OperatingSystem.nu);\n      const deviceType = DeviceType(os, browser, userAgent, mediaMatch);\n      return {\n        browser,\n        os,\n        deviceType\n      };\n    };\n    const PlatformDetection = { detect: detect$3 };\n\n    const mediaMatch = query => window.matchMedia(query).matches;\n    let platform$2 = cached(() => PlatformDetection.detect(navigator.userAgent, Optional.from(navigator.userAgentData), mediaMatch));\n    const detect$2 = () => platform$2();\n\n    const userAgent = navigator.userAgent;\n    const platform$1 = detect$2();\n    const browser$1 = platform$1.browser;\n    const os = platform$1.os;\n    const deviceType = platform$1.deviceType;\n    const windowsPhone = userAgent.indexOf('Windows Phone') !== -1;\n    const Env = {\n      transparentSrc: 'data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7',\n      documentMode: browser$1.isIE() ? document.documentMode || 7 : 10,\n      cacheSuffix: null,\n      container: null,\n      canHaveCSP: !browser$1.isIE(),\n      windowsPhone,\n      browser: {\n        current: browser$1.current,\n        version: browser$1.version,\n        isChromium: browser$1.isChromium,\n        isEdge: browser$1.isEdge,\n        isFirefox: browser$1.isFirefox,\n        isIE: browser$1.isIE,\n        isOpera: browser$1.isOpera,\n        isSafari: browser$1.isSafari\n      },\n      os: {\n        current: os.current,\n        version: os.version,\n        isAndroid: os.isAndroid,\n        isChromeOS: os.isChromeOS,\n        isFreeBSD: os.isFreeBSD,\n        isiOS: os.isiOS,\n        isLinux: os.isLinux,\n        isMacOS: os.isMacOS,\n        isSolaris: os.isSolaris,\n        isWindows: os.isWindows\n      },\n      deviceType: {\n        isDesktop: deviceType.isDesktop,\n        isiPad: deviceType.isiPad,\n        isiPhone: deviceType.isiPhone,\n        isPhone: deviceType.isPhone,\n        isTablet: deviceType.isTablet,\n        isTouch: deviceType.isTouch,\n        isWebView: deviceType.isWebView\n      }\n    };\n\n    const whiteSpaceRegExp$1 = /^\\s*|\\s*$/g;\n    const trim$2 = str => {\n      return isNullable(str) ? '' : ('' + str).replace(whiteSpaceRegExp$1, '');\n    };\n    const is$3 = (obj, type) => {\n      if (!type) {\n        return obj !== undefined;\n      }\n      if (type === 'array' && isArray(obj)) {\n        return true;\n      }\n      return typeof obj === type;\n    };\n    const makeMap$4 = (items, delim, map = {}) => {\n      const resolvedItems = isString(items) ? items.split(delim || ',') : items || [];\n      let i = resolvedItems.length;\n      while (i--) {\n        map[resolvedItems[i]] = {};\n      }\n      return map;\n    };\n    const hasOwnProperty$1 = has$2;\n    const extend$3 = (obj, ...exts) => {\n      for (let i = 0; i < exts.length; i++) {\n        const ext = exts[i];\n        for (const name in ext) {\n          if (has$2(ext, name)) {\n            const value = ext[name];\n            if (value !== undefined) {\n              obj[name] = value;\n            }\n          }\n        }\n      }\n      return obj;\n    };\n    const walk$4 = function (o, f, n, s) {\n      s = s || this;\n      if (o) {\n        if (n) {\n          o = o[n];\n        }\n        each$c(o, (o, i) => {\n          if (f.call(s, o, i, n) === false) {\n            return false;\n          } else {\n            walk$4(o, f, n, s);\n            return true;\n          }\n        });\n      }\n    };\n    const resolve$2 = (n, o = window) => {\n      const path = n.split('.');\n      for (let i = 0, l = path.length; i < l; i++) {\n        o = o[path[i]];\n        if (!o) {\n          break;\n        }\n      }\n      return o;\n    };\n    const explode$3 = (s, d) => {\n      if (isArray$1(s)) {\n        return s;\n      } else if (s === '') {\n        return [];\n      } else {\n        return map$1(s.split(d || ','), trim$2);\n      }\n    };\n    const _addCacheSuffix = url => {\n      const cacheSuffix = Env.cacheSuffix;\n      if (cacheSuffix) {\n        url += (url.indexOf('?') === -1 ? '?' : '&') + cacheSuffix;\n      }\n      return url;\n    };\n    const Tools = {\n      trim: trim$2,\n      isArray: isArray,\n      is: is$3,\n      toArray: toArray$1,\n      makeMap: makeMap$4,\n      each: each$c,\n      map: map$1,\n      grep: filter$3,\n      inArray: indexOf,\n      hasOwn: hasOwnProperty$1,\n      extend: extend$3,\n      walk: walk$4,\n      resolve: resolve$2,\n      explode: explode$3,\n      _addCacheSuffix\n    };\n\n    const is$2 = (lhs, rhs, comparator = tripleEquals) => lhs.exists(left => comparator(left, rhs));\n    const cat = arr => {\n      const r = [];\n      const push = x => {\n        r.push(x);\n      };\n      for (let i = 0; i < arr.length; i++) {\n        arr[i].each(push);\n      }\n      return r;\n    };\n    const lift2 = (oa, ob, f) => oa.isSome() && ob.isSome() ? Optional.some(f(oa.getOrDie(), ob.getOrDie())) : Optional.none();\n    const lift3 = (oa, ob, oc, f) => oa.isSome() && ob.isSome() && oc.isSome() ? Optional.some(f(oa.getOrDie(), ob.getOrDie(), oc.getOrDie())) : Optional.none();\n    const someIf = (b, a) => b ? Optional.some(a) : Optional.none();\n\n    typeof window !== 'undefined' ? window : Function('return this;')();\n\n    const COMMENT = 8;\n    const DOCUMENT = 9;\n    const DOCUMENT_FRAGMENT = 11;\n    const ELEMENT = 1;\n    const TEXT = 3;\n\n    const name = element => {\n      const r = element.dom.nodeName;\n      return r.toLowerCase();\n    };\n    const type$1 = element => element.dom.nodeType;\n    const isType = t => element => type$1(element) === t;\n    const isComment$1 = element => type$1(element) === COMMENT || name(element) === '#comment';\n    const isElement$7 = isType(ELEMENT);\n    const isText$b = isType(TEXT);\n    const isDocument$2 = isType(DOCUMENT);\n    const isDocumentFragment$1 = isType(DOCUMENT_FRAGMENT);\n    const isTag = tag => e => isElement$7(e) && name(e) === tag;\n\n    const rawSet = (dom, key, value) => {\n      if (isString(value) || isBoolean(value) || isNumber(value)) {\n        dom.setAttribute(key, value + '');\n      } else {\n        console.error('Invalid call to Attribute.set. Key ', key, ':: Value ', value, ':: Element ', dom);\n        throw new Error('Attribute value was not simple');\n      }\n    };\n    const set$2 = (element, key, value) => {\n      rawSet(element.dom, key, value);\n    };\n    const setAll$1 = (element, attrs) => {\n      const dom = element.dom;\n      each$d(attrs, (v, k) => {\n        rawSet(dom, k, v);\n      });\n    };\n    const get$9 = (element, key) => {\n      const v = element.dom.getAttribute(key);\n      return v === null ? undefined : v;\n    };\n    const getOpt = (element, key) => Optional.from(get$9(element, key));\n    const has$1 = (element, key) => {\n      const dom = element.dom;\n      return dom && dom.hasAttribute ? dom.hasAttribute(key) : false;\n    };\n    const remove$b = (element, key) => {\n      element.dom.removeAttribute(key);\n    };\n    const hasNone = element => {\n      const attrs = element.dom.attributes;\n      return attrs === undefined || attrs === null || attrs.length === 0;\n    };\n    const clone$4 = element => foldl(element.dom.attributes, (acc, attr) => {\n      acc[attr.name] = attr.value;\n      return acc;\n    }, {});\n\n    const read$4 = (element, attr) => {\n      const value = get$9(element, attr);\n      return value === undefined || value === '' ? [] : value.split(' ');\n    };\n    const add$4 = (element, attr, id) => {\n      const old = read$4(element, attr);\n      const nu = old.concat([id]);\n      set$2(element, attr, nu.join(' '));\n      return true;\n    };\n    const remove$a = (element, attr, id) => {\n      const nu = filter$5(read$4(element, attr), v => v !== id);\n      if (nu.length > 0) {\n        set$2(element, attr, nu.join(' '));\n      } else {\n        remove$b(element, attr);\n      }\n      return false;\n    };\n\n    const supports = element => element.dom.classList !== undefined;\n    const get$8 = element => read$4(element, 'class');\n    const add$3 = (element, clazz) => add$4(element, 'class', clazz);\n    const remove$9 = (element, clazz) => remove$a(element, 'class', clazz);\n    const toggle$2 = (element, clazz) => {\n      if (contains$2(get$8(element), clazz)) {\n        return remove$9(element, clazz);\n      } else {\n        return add$3(element, clazz);\n      }\n    };\n\n    const add$2 = (element, clazz) => {\n      if (supports(element)) {\n        element.dom.classList.add(clazz);\n      } else {\n        add$3(element, clazz);\n      }\n    };\n    const cleanClass = element => {\n      const classList = supports(element) ? element.dom.classList : get$8(element);\n      if (classList.length === 0) {\n        remove$b(element, 'class');\n      }\n    };\n    const remove$8 = (element, clazz) => {\n      if (supports(element)) {\n        const classList = element.dom.classList;\n        classList.remove(clazz);\n      } else {\n        remove$9(element, clazz);\n      }\n      cleanClass(element);\n    };\n    const toggle$1 = (element, clazz) => {\n      const result = supports(element) ? element.dom.classList.toggle(clazz) : toggle$2(element, clazz);\n      cleanClass(element);\n      return result;\n    };\n    const has = (element, clazz) => supports(element) && element.dom.classList.contains(clazz);\n\n    const isSupported$1 = dom => dom.style !== undefined && isFunction(dom.style.getPropertyValue);\n\n    const fromHtml$1 = (html, scope) => {\n      const doc = scope || document;\n      const div = doc.createElement('div');\n      div.innerHTML = html;\n      if (!div.hasChildNodes() || div.childNodes.length > 1) {\n        const message = 'HTML does not have a single root node';\n        console.error(message, html);\n        throw new Error(message);\n      }\n      return fromDom$2(div.childNodes[0]);\n    };\n    const fromTag = (tag, scope) => {\n      const doc = scope || document;\n      const node = doc.createElement(tag);\n      return fromDom$2(node);\n    };\n    const fromText = (text, scope) => {\n      const doc = scope || document;\n      const node = doc.createTextNode(text);\n      return fromDom$2(node);\n    };\n    const fromDom$2 = node => {\n      if (node === null || node === undefined) {\n        throw new Error('Node cannot be null or undefined');\n      }\n      return { dom: node };\n    };\n    const fromPoint$2 = (docElm, x, y) => Optional.from(docElm.dom.elementFromPoint(x, y)).map(fromDom$2);\n    const SugarElement = {\n      fromHtml: fromHtml$1,\n      fromTag,\n      fromText,\n      fromDom: fromDom$2,\n      fromPoint: fromPoint$2\n    };\n\n    const toArray = (target, f) => {\n      const r = [];\n      const recurse = e => {\n        r.push(e);\n        return f(e);\n      };\n      let cur = f(target);\n      do {\n        cur = cur.bind(recurse);\n      } while (cur.isSome());\n      return r;\n    };\n\n    const is$1 = (element, selector) => {\n      const dom = element.dom;\n      if (dom.nodeType !== ELEMENT) {\n        return false;\n      } else {\n        const elem = dom;\n        if (elem.matches !== undefined) {\n          return elem.matches(selector);\n        } else if (elem.msMatchesSelector !== undefined) {\n          return elem.msMatchesSelector(selector);\n        } else if (elem.webkitMatchesSelector !== undefined) {\n          return elem.webkitMatchesSelector(selector);\n        } else if (elem.mozMatchesSelector !== undefined) {\n          return elem.mozMatchesSelector(selector);\n        } else {\n          throw new Error('Browser lacks native selectors');\n        }\n      }\n    };\n    const bypassSelector = dom => dom.nodeType !== ELEMENT && dom.nodeType !== DOCUMENT && dom.nodeType !== DOCUMENT_FRAGMENT || dom.childElementCount === 0;\n    const all = (selector, scope) => {\n      const base = scope === undefined ? document : scope.dom;\n      return bypassSelector(base) ? [] : map$3(base.querySelectorAll(selector), SugarElement.fromDom);\n    };\n    const one = (selector, scope) => {\n      const base = scope === undefined ? document : scope.dom;\n      return bypassSelector(base) ? Optional.none() : Optional.from(base.querySelector(selector)).map(SugarElement.fromDom);\n    };\n\n    const eq = (e1, e2) => e1.dom === e2.dom;\n    const contains = (e1, e2) => {\n      const d1 = e1.dom;\n      const d2 = e2.dom;\n      return d1 === d2 ? false : d1.contains(d2);\n    };\n\n    const owner$1 = element => SugarElement.fromDom(element.dom.ownerDocument);\n    const documentOrOwner = dos => isDocument$2(dos) ? dos : owner$1(dos);\n    const documentElement = element => SugarElement.fromDom(documentOrOwner(element).dom.documentElement);\n    const defaultView = element => SugarElement.fromDom(documentOrOwner(element).dom.defaultView);\n    const parent = element => Optional.from(element.dom.parentNode).map(SugarElement.fromDom);\n    const parentElement = element => Optional.from(element.dom.parentElement).map(SugarElement.fromDom);\n    const parents$1 = (element, isRoot) => {\n      const stop = isFunction(isRoot) ? isRoot : never;\n      let dom = element.dom;\n      const ret = [];\n      while (dom.parentNode !== null && dom.parentNode !== undefined) {\n        const rawParent = dom.parentNode;\n        const p = SugarElement.fromDom(rawParent);\n        ret.push(p);\n        if (stop(p) === true) {\n          break;\n        } else {\n          dom = rawParent;\n        }\n      }\n      return ret;\n    };\n    const siblings = element => {\n      const filterSelf = elements => filter$5(elements, x => !eq(element, x));\n      return parent(element).map(children).map(filterSelf).getOr([]);\n    };\n    const prevSibling = element => Optional.from(element.dom.previousSibling).map(SugarElement.fromDom);\n    const nextSibling = element => Optional.from(element.dom.nextSibling).map(SugarElement.fromDom);\n    const prevSiblings = element => reverse(toArray(element, prevSibling));\n    const nextSiblings = element => toArray(element, nextSibling);\n    const children = element => map$3(element.dom.childNodes, SugarElement.fromDom);\n    const child$1 = (element, index) => {\n      const cs = element.dom.childNodes;\n      return Optional.from(cs[index]).map(SugarElement.fromDom);\n    };\n    const firstChild = element => child$1(element, 0);\n    const lastChild = element => child$1(element, element.dom.childNodes.length - 1);\n    const childNodesCount = element => element.dom.childNodes.length;\n\n    const getHead = doc => {\n      const b = doc.dom.head;\n      if (b === null || b === undefined) {\n        throw new Error('Head is not available yet');\n      }\n      return SugarElement.fromDom(b);\n    };\n\n    const isShadowRoot = dos => isDocumentFragment$1(dos) && isNonNullable(dos.dom.host);\n    const supported = isFunction(Element.prototype.attachShadow) && isFunction(Node.prototype.getRootNode);\n    const isSupported = constant(supported);\n    const getRootNode = supported ? e => SugarElement.fromDom(e.dom.getRootNode()) : documentOrOwner;\n    const getStyleContainer = dos => isShadowRoot(dos) ? dos : getHead(documentOrOwner(dos));\n    const getContentContainer = dos => isShadowRoot(dos) ? dos : SugarElement.fromDom(documentOrOwner(dos).dom.body);\n    const getShadowRoot = e => {\n      const r = getRootNode(e);\n      return isShadowRoot(r) ? Optional.some(r) : Optional.none();\n    };\n    const getShadowHost = e => SugarElement.fromDom(e.dom.host);\n    const getOriginalEventTarget = event => {\n      if (isSupported() && isNonNullable(event.target)) {\n        const el = SugarElement.fromDom(event.target);\n        if (isElement$7(el) && isOpenShadowHost(el)) {\n          if (event.composed && event.composedPath) {\n            const composedPath = event.composedPath();\n            if (composedPath) {\n              return head(composedPath);\n            }\n          }\n        }\n      }\n      return Optional.from(event.target);\n    };\n    const isOpenShadowHost = element => isNonNullable(element.dom.shadowRoot);\n\n    const inBody = element => {\n      const dom = isText$b(element) ? element.dom.parentNode : element.dom;\n      if (dom === undefined || dom === null || dom.ownerDocument === null) {\n        return false;\n      }\n      const doc = dom.ownerDocument;\n      return getShadowRoot(SugarElement.fromDom(dom)).fold(() => doc.body.contains(dom), compose1(inBody, getShadowHost));\n    };\n\n    const internalSet = (dom, property, value) => {\n      if (!isString(value)) {\n        console.error('Invalid call to CSS.set. Property ', property, ':: Value ', value, ':: Element ', dom);\n        throw new Error('CSS value must be a string: ' + value);\n      }\n      if (isSupported$1(dom)) {\n        dom.style.setProperty(property, value);\n      }\n    };\n    const internalRemove = (dom, property) => {\n      if (isSupported$1(dom)) {\n        dom.style.removeProperty(property);\n      }\n    };\n    const set$1 = (element, property, value) => {\n      const dom = element.dom;\n      internalSet(dom, property, value);\n    };\n    const setAll = (element, css) => {\n      const dom = element.dom;\n      each$d(css, (v, k) => {\n        internalSet(dom, k, v);\n      });\n    };\n    const get$7 = (element, property) => {\n      const dom = element.dom;\n      const styles = window.getComputedStyle(dom);\n      const r = styles.getPropertyValue(property);\n      return r === '' && !inBody(element) ? getUnsafeProperty(dom, property) : r;\n    };\n    const getUnsafeProperty = (dom, property) => isSupported$1(dom) ? dom.style.getPropertyValue(property) : '';\n    const getRaw$1 = (element, property) => {\n      const dom = element.dom;\n      const raw = getUnsafeProperty(dom, property);\n      return Optional.from(raw).filter(r => r.length > 0);\n    };\n    const getAllRaw = element => {\n      const css = {};\n      const dom = element.dom;\n      if (isSupported$1(dom)) {\n        for (let i = 0; i < dom.style.length; i++) {\n          const ruleName = dom.style.item(i);\n          css[ruleName] = dom.style[ruleName];\n        }\n      }\n      return css;\n    };\n    const remove$7 = (element, property) => {\n      const dom = element.dom;\n      internalRemove(dom, property);\n      if (is$2(getOpt(element, 'style').map(trim$3), '')) {\n        remove$b(element, 'style');\n      }\n    };\n    const reflow = e => e.dom.offsetWidth;\n\n    const before$3 = (marker, element) => {\n      const parent$1 = parent(marker);\n      parent$1.each(v => {\n        v.dom.insertBefore(element.dom, marker.dom);\n      });\n    };\n    const after$4 = (marker, element) => {\n      const sibling = nextSibling(marker);\n      sibling.fold(() => {\n        const parent$1 = parent(marker);\n        parent$1.each(v => {\n          append$1(v, element);\n        });\n      }, v => {\n        before$3(v, element);\n      });\n    };\n    const prepend = (parent, element) => {\n      const firstChild$1 = firstChild(parent);\n      firstChild$1.fold(() => {\n        append$1(parent, element);\n      }, v => {\n        parent.dom.insertBefore(element.dom, v.dom);\n      });\n    };\n    const append$1 = (parent, element) => {\n      parent.dom.appendChild(element.dom);\n    };\n    const wrap$2 = (element, wrapper) => {\n      before$3(element, wrapper);\n      append$1(wrapper, element);\n    };\n\n    const after$3 = (marker, elements) => {\n      each$e(elements, (x, i) => {\n        const e = i === 0 ? marker : elements[i - 1];\n        after$4(e, x);\n      });\n    };\n    const append = (parent, elements) => {\n      each$e(elements, x => {\n        append$1(parent, x);\n      });\n    };\n\n    const empty = element => {\n      element.dom.textContent = '';\n      each$e(children(element), rogue => {\n        remove$6(rogue);\n      });\n    };\n    const remove$6 = element => {\n      const dom = element.dom;\n      if (dom.parentNode !== null) {\n        dom.parentNode.removeChild(dom);\n      }\n    };\n    const unwrap = wrapper => {\n      const children$1 = children(wrapper);\n      if (children$1.length > 0) {\n        after$3(wrapper, children$1);\n      }\n      remove$6(wrapper);\n    };\n\n    const fromHtml = (html, scope) => {\n      const doc = scope || document;\n      const div = doc.createElement('div');\n      div.innerHTML = html;\n      return children(SugarElement.fromDom(div));\n    };\n    const fromDom$1 = nodes => map$3(nodes, SugarElement.fromDom);\n\n    const get$6 = element => element.dom.innerHTML;\n    const set = (element, content) => {\n      const owner = owner$1(element);\n      const docDom = owner.dom;\n      const fragment = SugarElement.fromDom(docDom.createDocumentFragment());\n      const contentElements = fromHtml(content, docDom);\n      append(fragment, contentElements);\n      empty(element);\n      append$1(element, fragment);\n    };\n    const getOuter = element => {\n      const container = SugarElement.fromTag('div');\n      const clone = SugarElement.fromDom(element.dom.cloneNode(true));\n      append$1(container, clone);\n      return get$6(container);\n    };\n\n    const mkEvent = (target, x, y, stop, prevent, kill, raw) => ({\n      target,\n      x,\n      y,\n      stop,\n      prevent,\n      kill,\n      raw\n    });\n    const fromRawEvent = rawEvent => {\n      const target = SugarElement.fromDom(getOriginalEventTarget(rawEvent).getOr(rawEvent.target));\n      const stop = () => rawEvent.stopPropagation();\n      const prevent = () => rawEvent.preventDefault();\n      const kill = compose(prevent, stop);\n      return mkEvent(target, rawEvent.clientX, rawEvent.clientY, stop, prevent, kill, rawEvent);\n    };\n    const handle$1 = (filter, handler) => rawEvent => {\n      if (filter(rawEvent)) {\n        handler(fromRawEvent(rawEvent));\n      }\n    };\n    const binder = (element, event, filter, handler, useCapture) => {\n      const wrapped = handle$1(filter, handler);\n      element.dom.addEventListener(event, wrapped, useCapture);\n      return { unbind: curry(unbind, element, event, wrapped, useCapture) };\n    };\n    const bind$2 = (element, event, filter, handler) => binder(element, event, filter, handler, false);\n    const unbind = (element, event, handler, useCapture) => {\n      element.dom.removeEventListener(event, handler, useCapture);\n    };\n\n    const r = (left, top) => {\n      const translate = (x, y) => r(left + x, top + y);\n      return {\n        left,\n        top,\n        translate\n      };\n    };\n    const SugarPosition = r;\n\n    const boxPosition = dom => {\n      const box = dom.getBoundingClientRect();\n      return SugarPosition(box.left, box.top);\n    };\n    const firstDefinedOrZero = (a, b) => {\n      if (a !== undefined) {\n        return a;\n      } else {\n        return b !== undefined ? b : 0;\n      }\n    };\n    const absolute = element => {\n      const doc = element.dom.ownerDocument;\n      const body = doc.body;\n      const win = doc.defaultView;\n      const html = doc.documentElement;\n      if (body === element.dom) {\n        return SugarPosition(body.offsetLeft, body.offsetTop);\n      }\n      const scrollTop = firstDefinedOrZero(win === null || win === void 0 ? void 0 : win.pageYOffset, html.scrollTop);\n      const scrollLeft = firstDefinedOrZero(win === null || win === void 0 ? void 0 : win.pageXOffset, html.scrollLeft);\n      const clientTop = firstDefinedOrZero(html.clientTop, body.clientTop);\n      const clientLeft = firstDefinedOrZero(html.clientLeft, body.clientLeft);\n      return viewport(element).translate(scrollLeft - clientLeft, scrollTop - clientTop);\n    };\n    const viewport = element => {\n      const dom = element.dom;\n      const doc = dom.ownerDocument;\n      const body = doc.body;\n      if (body === dom) {\n        return SugarPosition(body.offsetLeft, body.offsetTop);\n      }\n      if (!inBody(element)) {\n        return SugarPosition(0, 0);\n      }\n      return boxPosition(dom);\n    };\n\n    const get$5 = _DOC => {\n      const doc = _DOC !== undefined ? _DOC.dom : document;\n      const x = doc.body.scrollLeft || doc.documentElement.scrollLeft;\n      const y = doc.body.scrollTop || doc.documentElement.scrollTop;\n      return SugarPosition(x, y);\n    };\n    const to = (x, y, _DOC) => {\n      const doc = _DOC !== undefined ? _DOC.dom : document;\n      const win = doc.defaultView;\n      if (win) {\n        win.scrollTo(x, y);\n      }\n    };\n    const intoView = (element, alignToTop) => {\n      const isSafari = detect$2().browser.isSafari();\n      if (isSafari && isFunction(element.dom.scrollIntoViewIfNeeded)) {\n        element.dom.scrollIntoViewIfNeeded(false);\n      } else {\n        element.dom.scrollIntoView(alignToTop);\n      }\n    };\n\n    const get$4 = _win => {\n      const win = _win === undefined ? window : _win;\n      if (detect$2().browser.isFirefox()) {\n        return Optional.none();\n      } else {\n        return Optional.from(win.visualViewport);\n      }\n    };\n    const bounds = (x, y, width, height) => ({\n      x,\n      y,\n      width,\n      height,\n      right: x + width,\n      bottom: y + height\n    });\n    const getBounds = _win => {\n      const win = _win === undefined ? window : _win;\n      const doc = win.document;\n      const scroll = get$5(SugarElement.fromDom(doc));\n      return get$4(win).fold(() => {\n        const html = win.document.documentElement;\n        const width = html.clientWidth;\n        const height = html.clientHeight;\n        return bounds(scroll.left, scroll.top, width, height);\n      }, visualViewport => bounds(Math.max(visualViewport.pageLeft, scroll.left), Math.max(visualViewport.pageTop, scroll.top), visualViewport.width, visualViewport.height));\n    };\n\n    const isNodeType = type => {\n      return node => {\n        return !!node && node.nodeType === type;\n      };\n    };\n    const isRestrictedNode = node => !!node && !Object.getPrototypeOf(node);\n    const isElement$6 = isNodeType(1);\n    const matchNodeName = name => {\n      const lowerCasedName = name.toLowerCase();\n      return node => isNonNullable(node) && node.nodeName.toLowerCase() === lowerCasedName;\n    };\n    const matchNodeNames = names => {\n      const lowerCasedNames = names.map(s => s.toLowerCase());\n      return node => {\n        if (node && node.nodeName) {\n          const nodeName = node.nodeName.toLowerCase();\n          return contains$2(lowerCasedNames, nodeName);\n        }\n        return false;\n      };\n    };\n    const matchStyleValues = (name, values) => {\n      const items = values.toLowerCase().split(' ');\n      return node => {\n        if (isElement$6(node)) {\n          const win = node.ownerDocument.defaultView;\n          if (win) {\n            for (let i = 0; i < items.length; i++) {\n              const computed = win.getComputedStyle(node, null);\n              const cssValue = computed ? computed.getPropertyValue(name) : null;\n              if (cssValue === items[i]) {\n                return true;\n              }\n            }\n          }\n        }\n        return false;\n      };\n    };\n    const hasAttribute = attrName => {\n      return node => {\n        return isElement$6(node) && node.hasAttribute(attrName);\n      };\n    };\n    const hasAttributeValue = (attrName, attrValue) => {\n      return node => {\n        return isElement$6(node) && node.getAttribute(attrName) === attrValue;\n      };\n    };\n    const isBogus$2 = node => isElement$6(node) && node.hasAttribute('data-mce-bogus');\n    const isBogusAll$1 = node => isElement$6(node) && node.getAttribute('data-mce-bogus') === 'all';\n    const isTable$2 = node => isElement$6(node) && node.tagName === 'TABLE';\n    const hasContentEditableState = value => {\n      return node => {\n        if (isElement$6(node)) {\n          if (node.contentEditable === value) {\n            return true;\n          }\n          if (node.getAttribute('data-mce-contenteditable') === value) {\n            return true;\n          }\n        }\n        return false;\n      };\n    };\n    const isTextareaOrInput = matchNodeNames([\n      'textarea',\n      'input'\n    ]);\n    const isText$a = isNodeType(3);\n    const isCData = isNodeType(4);\n    const isPi = isNodeType(7);\n    const isComment = isNodeType(8);\n    const isDocument$1 = isNodeType(9);\n    const isDocumentFragment = isNodeType(11);\n    const isBr$6 = matchNodeName('br');\n    const isImg = matchNodeName('img');\n    const isContentEditableTrue$3 = hasContentEditableState('true');\n    const isContentEditableFalse$a = hasContentEditableState('false');\n    const isTableCell$3 = matchNodeNames([\n      'td',\n      'th'\n    ]);\n    const isTableCellOrCaption = matchNodeNames([\n      'td',\n      'th',\n      'caption'\n    ]);\n    const isMedia$2 = matchNodeNames([\n      'video',\n      'audio',\n      'object',\n      'embed'\n    ]);\n    const isListItem$2 = matchNodeName('li');\n\n    const browser = detect$2().browser;\n    const firstElement = nodes => find$2(nodes, isElement$7);\n    const getTableCaptionDeltaY = elm => {\n      if (browser.isFirefox() && name(elm) === 'table') {\n        return firstElement(children(elm)).filter(elm => {\n          return name(elm) === 'caption';\n        }).bind(caption => {\n          return firstElement(nextSiblings(caption)).map(body => {\n            const bodyTop = body.dom.offsetTop;\n            const captionTop = caption.dom.offsetTop;\n            const captionHeight = caption.dom.offsetHeight;\n            return bodyTop <= captionTop ? -captionHeight : 0;\n          });\n        }).getOr(0);\n      } else {\n        return 0;\n      }\n    };\n    const hasChild = (elm, child) => elm.children && contains$2(elm.children, child);\n    const getPos = (body, elm, rootElm) => {\n      let x = 0, y = 0;\n      const doc = body.ownerDocument;\n      rootElm = rootElm ? rootElm : body;\n      if (elm) {\n        if (rootElm === body && elm.getBoundingClientRect && get$7(SugarElement.fromDom(body), 'position') === 'static') {\n          const pos = elm.getBoundingClientRect();\n          x = pos.left + (doc.documentElement.scrollLeft || body.scrollLeft) - doc.documentElement.clientLeft;\n          y = pos.top + (doc.documentElement.scrollTop || body.scrollTop) - doc.documentElement.clientTop;\n          return {\n            x,\n            y\n          };\n        }\n        let offsetParent = elm;\n        while (offsetParent && offsetParent !== rootElm && offsetParent.nodeType && !hasChild(offsetParent, rootElm)) {\n          const castOffsetParent = offsetParent;\n          x += castOffsetParent.offsetLeft || 0;\n          y += castOffsetParent.offsetTop || 0;\n          offsetParent = castOffsetParent.offsetParent;\n        }\n        offsetParent = elm.parentNode;\n        while (offsetParent && offsetParent !== rootElm && offsetParent.nodeType && !hasChild(offsetParent, rootElm)) {\n          x -= offsetParent.scrollLeft || 0;\n          y -= offsetParent.scrollTop || 0;\n          offsetParent = offsetParent.parentNode;\n        }\n        y += getTableCaptionDeltaY(SugarElement.fromDom(elm));\n      }\n      return {\n        x,\n        y\n      };\n    };\n\n    var ClosestOrAncestor = (is, ancestor, scope, a, isRoot) => {\n      if (is(scope, a)) {\n        return Optional.some(scope);\n      } else if (isFunction(isRoot) && isRoot(scope)) {\n        return Optional.none();\n      } else {\n        return ancestor(scope, a, isRoot);\n      }\n    };\n\n    const ancestor$3 = (scope, predicate, isRoot) => {\n      let element = scope.dom;\n      const stop = isFunction(isRoot) ? isRoot : never;\n      while (element.parentNode) {\n        element = element.parentNode;\n        const el = SugarElement.fromDom(element);\n        if (predicate(el)) {\n          return Optional.some(el);\n        } else if (stop(el)) {\n          break;\n        }\n      }\n      return Optional.none();\n    };\n    const closest$4 = (scope, predicate, isRoot) => {\n      const is = (s, test) => test(s);\n      return ClosestOrAncestor(is, ancestor$3, scope, predicate, isRoot);\n    };\n    const sibling$1 = (scope, predicate) => {\n      const element = scope.dom;\n      if (!element.parentNode) {\n        return Optional.none();\n      }\n      return child(SugarElement.fromDom(element.parentNode), x => !eq(scope, x) && predicate(x));\n    };\n    const child = (scope, predicate) => {\n      const pred = node => predicate(SugarElement.fromDom(node));\n      const result = find$2(scope.dom.childNodes, pred);\n      return result.map(SugarElement.fromDom);\n    };\n    const descendant$1 = (scope, predicate) => {\n      const descend = node => {\n        for (let i = 0; i < node.childNodes.length; i++) {\n          const child = SugarElement.fromDom(node.childNodes[i]);\n          if (predicate(child)) {\n            return Optional.some(child);\n          }\n          const res = descend(node.childNodes[i]);\n          if (res.isSome()) {\n            return res;\n          }\n        }\n        return Optional.none();\n      };\n      return descend(scope.dom);\n    };\n\n    const ancestor$2 = (scope, selector, isRoot) => ancestor$3(scope, e => is$1(e, selector), isRoot);\n    const descendant = (scope, selector) => one(selector, scope);\n    const closest$3 = (scope, selector, isRoot) => {\n      const is = (element, selector) => is$1(element, selector);\n      return ClosestOrAncestor(is, ancestor$2, scope, selector, isRoot);\n    };\n\n    const StyleSheetLoader = (documentOrShadowRoot, settings = {}) => {\n      let idCount = 0;\n      const loadedStates = {};\n      const edos = SugarElement.fromDom(documentOrShadowRoot);\n      const doc = documentOrOwner(edos);\n      const maxLoadTime = settings.maxLoadTime || 5000;\n      const _setReferrerPolicy = referrerPolicy => {\n        settings.referrerPolicy = referrerPolicy;\n      };\n      const addStyle = element => {\n        append$1(getStyleContainer(edos), element);\n      };\n      const removeStyle = id => {\n        const styleContainer = getStyleContainer(edos);\n        descendant(styleContainer, '#' + id).each(remove$6);\n      };\n      const getOrCreateState = url => get$a(loadedStates, url).getOrThunk(() => ({\n        id: 'mce-u' + idCount++,\n        passed: [],\n        failed: [],\n        count: 0\n      }));\n      const load = url => new Promise((success, failure) => {\n        let link;\n        const urlWithSuffix = Tools._addCacheSuffix(url);\n        const state = getOrCreateState(urlWithSuffix);\n        loadedStates[urlWithSuffix] = state;\n        state.count++;\n        const resolve = (callbacks, status) => {\n          each$e(callbacks, call);\n          state.status = status;\n          state.passed = [];\n          state.failed = [];\n          if (link) {\n            link.onload = null;\n            link.onerror = null;\n            link = null;\n          }\n        };\n        const passed = () => resolve(state.passed, 2);\n        const failed = () => resolve(state.failed, 3);\n        const wait = (testCallback, waitCallback) => {\n          if (!testCallback()) {\n            if (Date.now() - startTime < maxLoadTime) {\n              setTimeout(waitCallback);\n            } else {\n              failed();\n            }\n          }\n        };\n        const waitForWebKitLinkLoaded = () => {\n          wait(() => {\n            const styleSheets = documentOrShadowRoot.styleSheets;\n            let i = styleSheets.length;\n            while (i--) {\n              const styleSheet = styleSheets[i];\n              const owner = styleSheet.ownerNode;\n              if (owner && link && owner.id === link.id) {\n                passed();\n                return true;\n              }\n            }\n            return false;\n          }, waitForWebKitLinkLoaded);\n        };\n        if (success) {\n          state.passed.push(success);\n        }\n        if (failure) {\n          state.failed.push(failure);\n        }\n        if (state.status === 1) {\n          return;\n        }\n        if (state.status === 2) {\n          passed();\n          return;\n        }\n        if (state.status === 3) {\n          failed();\n          return;\n        }\n        state.status = 1;\n        const linkElem = SugarElement.fromTag('link', doc.dom);\n        setAll$1(linkElem, {\n          rel: 'stylesheet',\n          type: 'text/css',\n          id: state.id\n        });\n        const startTime = Date.now();\n        if (settings.contentCssCors) {\n          set$2(linkElem, 'crossOrigin', 'anonymous');\n        }\n        if (settings.referrerPolicy) {\n          set$2(linkElem, 'referrerpolicy', settings.referrerPolicy);\n        }\n        link = linkElem.dom;\n        link.onload = waitForWebKitLinkLoaded;\n        link.onerror = failed;\n        addStyle(linkElem);\n        set$2(linkElem, 'href', urlWithSuffix);\n      });\n      const loadAll = urls => {\n        const loadedUrls = Promise.allSettled(map$3(urls, url => load(url).then(constant(url))));\n        return loadedUrls.then(results => {\n          const parts = partition$2(results, r => r.status === 'fulfilled');\n          if (parts.fail.length > 0) {\n            return Promise.reject(map$3(parts.fail, result => result.reason));\n          } else {\n            return map$3(parts.pass, result => result.value);\n          }\n        });\n      };\n      const unload = url => {\n        const urlWithSuffix = Tools._addCacheSuffix(url);\n        get$a(loadedStates, urlWithSuffix).each(state => {\n          const count = --state.count;\n          if (count === 0) {\n            delete loadedStates[urlWithSuffix];\n            removeStyle(state.id);\n          }\n        });\n      };\n      const unloadAll = urls => {\n        each$e(urls, url => {\n          unload(url);\n        });\n      };\n      return {\n        load,\n        loadAll,\n        unload,\n        unloadAll,\n        _setReferrerPolicy\n      };\n    };\n\n    const create$d = () => {\n      const map = new WeakMap();\n      const forElement = (referenceElement, settings) => {\n        const root = getRootNode(referenceElement);\n        const rootDom = root.dom;\n        return Optional.from(map.get(rootDom)).getOrThunk(() => {\n          const sl = StyleSheetLoader(rootDom, settings);\n          map.set(rootDom, sl);\n          return sl;\n        });\n      };\n      return { forElement };\n    };\n    const instance = create$d();\n\n    class DomTreeWalker {\n      constructor(startNode, rootNode) {\n        this.node = startNode;\n        this.rootNode = rootNode;\n        this.current = this.current.bind(this);\n        this.next = this.next.bind(this);\n        this.prev = this.prev.bind(this);\n        this.prev2 = this.prev2.bind(this);\n      }\n      current() {\n        return this.node;\n      }\n      next(shallow) {\n        this.node = this.findSibling(this.node, 'firstChild', 'nextSibling', shallow);\n        return this.node;\n      }\n      prev(shallow) {\n        this.node = this.findSibling(this.node, 'lastChild', 'previousSibling', shallow);\n        return this.node;\n      }\n      prev2(shallow) {\n        this.node = this.findPreviousNode(this.node, shallow);\n        return this.node;\n      }\n      findSibling(node, startName, siblingName, shallow) {\n        if (node) {\n          if (!shallow && node[startName]) {\n            return node[startName];\n          }\n          if (node !== this.rootNode) {\n            let sibling = node[siblingName];\n            if (sibling) {\n              return sibling;\n            }\n            for (let parent = node.parentNode; parent && parent !== this.rootNode; parent = parent.parentNode) {\n              sibling = parent[siblingName];\n              if (sibling) {\n                return sibling;\n              }\n            }\n          }\n        }\n        return undefined;\n      }\n      findPreviousNode(node, shallow) {\n        if (node) {\n          const sibling = node.previousSibling;\n          if (this.rootNode && sibling === this.rootNode) {\n            return;\n          }\n          if (sibling) {\n            if (!shallow) {\n              for (let child = sibling.lastChild; child; child = child.lastChild) {\n                if (!child.lastChild) {\n                  return child;\n                }\n              }\n            }\n            return sibling;\n          }\n          const parent = node.parentNode;\n          if (parent && parent !== this.rootNode) {\n            return parent;\n          }\n        }\n        return undefined;\n      }\n    }\n\n    const blocks = [\n      'article',\n      'aside',\n      'details',\n      'div',\n      'dt',\n      'figcaption',\n      'footer',\n      'form',\n      'fieldset',\n      'header',\n      'hgroup',\n      'html',\n      'main',\n      'nav',\n      'section',\n      'summary',\n      'body',\n      'p',\n      'dl',\n      'multicol',\n      'dd',\n      'figure',\n      'address',\n      'center',\n      'blockquote',\n      'h1',\n      'h2',\n      'h3',\n      'h4',\n      'h5',\n      'h6',\n      'listing',\n      'xmp',\n      'pre',\n      'plaintext',\n      'menu',\n      'dir',\n      'ul',\n      'ol',\n      'li',\n      'hr',\n      'table',\n      'tbody',\n      'thead',\n      'tfoot',\n      'th',\n      'tr',\n      'td',\n      'caption'\n    ];\n    const tableCells = [\n      'td',\n      'th'\n    ];\n    const tableSections = [\n      'thead',\n      'tbody',\n      'tfoot'\n    ];\n    const textBlocks = [\n      'h1',\n      'h2',\n      'h3',\n      'h4',\n      'h5',\n      'h6',\n      'p',\n      'div',\n      'address',\n      'pre',\n      'form',\n      'blockquote',\n      'center',\n      'dir',\n      'fieldset',\n      'header',\n      'footer',\n      'article',\n      'section',\n      'hgroup',\n      'aside',\n      'nav',\n      'figure'\n    ];\n    const headings = [\n      'h1',\n      'h2',\n      'h3',\n      'h4',\n      'h5',\n      'h6'\n    ];\n    const listItems$1 = [\n      'li',\n      'dd',\n      'dt'\n    ];\n    const lists = [\n      'ul',\n      'ol',\n      'dl'\n    ];\n    const wsElements = [\n      'pre',\n      'script',\n      'textarea',\n      'style'\n    ];\n    const wrapBlockElements = ['pre'].concat(headings);\n    const lazyLookup = items => {\n      let lookup;\n      return node => {\n        lookup = lookup ? lookup : mapToObject(items, always);\n        return has$2(lookup, name(node));\n      };\n    };\n    const isBlock$2 = lazyLookup(blocks);\n    const isTable$1 = node => name(node) === 'table';\n    const isInline$1 = node => isElement$7(node) && !isBlock$2(node);\n    const isBr$5 = node => isElement$7(node) && name(node) === 'br';\n    const isTextBlock$2 = lazyLookup(textBlocks);\n    const isList = lazyLookup(lists);\n    const isListItem$1 = lazyLookup(listItems$1);\n    const isTableSection = lazyLookup(tableSections);\n    const isTableCell$2 = lazyLookup(tableCells);\n    const isWsPreserveElement = lazyLookup(wsElements);\n    const isWrapBlockElement = lazyLookup(wrapBlockElements);\n    const isWrapElement = node => isWrapBlockElement(node) || isInline$1(node);\n\n    const ancestor$1 = (scope, selector, isRoot) => ancestor$2(scope, selector, isRoot).isSome();\n\n    const zeroWidth = '\\uFEFF';\n    const nbsp = '\\xA0';\n    const isZwsp$1 = char => char === zeroWidth;\n    const removeZwsp = s => s.replace(/\\uFEFF/g, '');\n\n    const descendants$1 = (scope, predicate) => {\n      let result = [];\n      each$e(children(scope), x => {\n        if (predicate(x)) {\n          result = result.concat([x]);\n        }\n        result = result.concat(descendants$1(x, predicate));\n      });\n      return result;\n    };\n\n    const descendants = (scope, selector) => all(selector, scope);\n\n    const NodeValue = (is, name) => {\n      const get = element => {\n        if (!is(element)) {\n          throw new Error('Can only get ' + name + ' value of a ' + name + ' node');\n        }\n        return getOption(element).getOr('');\n      };\n      const getOption = element => is(element) ? Optional.from(element.dom.nodeValue) : Optional.none();\n      const set = (element, value) => {\n        if (!is(element)) {\n          throw new Error('Can only set raw ' + name + ' value of a ' + name + ' node');\n        }\n        element.dom.nodeValue = value;\n      };\n      return {\n        get,\n        getOption,\n        set\n      };\n    };\n\n    const api$1 = NodeValue(isText$b, 'text');\n    const get$3 = element => api$1.get(element);\n    const getOption = element => api$1.getOption(element);\n\n    const getLastChildren$1 = elm => {\n      const children = [];\n      let rawNode = elm.dom;\n      while (rawNode) {\n        children.push(SugarElement.fromDom(rawNode));\n        rawNode = rawNode.lastChild;\n      }\n      return children;\n    };\n    const removeTrailingBr = elm => {\n      const allBrs = descendants(elm, 'br');\n      const brs = filter$5(getLastChildren$1(elm).slice(-1), isBr$5);\n      if (allBrs.length === brs.length) {\n        each$e(brs, remove$6);\n      }\n    };\n    const createPaddingBr = () => {\n      const br = SugarElement.fromTag('br');\n      set$2(br, 'data-mce-bogus', '1');\n      return br;\n    };\n    const fillWithPaddingBr = elm => {\n      empty(elm);\n      append$1(elm, createPaddingBr());\n    };\n    const trimBlockTrailingBr = elm => {\n      lastChild(elm).each(lastChild => {\n        prevSibling(lastChild).each(lastChildPrevSibling => {\n          if (isBlock$2(elm) && isBr$5(lastChild) && isBlock$2(lastChildPrevSibling)) {\n            remove$6(lastChild);\n          }\n        });\n      });\n    };\n\n    const ZWSP$1 = zeroWidth;\n    const isZwsp = isZwsp$1;\n    const trim$1 = removeZwsp;\n\n    const isElement$5 = isElement$6;\n    const isText$9 = isText$a;\n    const isCaretContainerBlock$1 = node => {\n      if (isText$9(node)) {\n        node = node.parentNode;\n      }\n      return isElement$5(node) && node.hasAttribute('data-mce-caret');\n    };\n    const isCaretContainerInline = node => isText$9(node) && isZwsp(node.data);\n    const isCaretContainer$2 = node => isCaretContainerBlock$1(node) || isCaretContainerInline(node);\n    const hasContent = node => node.firstChild !== node.lastChild || !isBr$6(node.firstChild);\n    const insertInline$1 = (node, before) => {\n      var _a;\n      const doc = (_a = node.ownerDocument) !== null && _a !== void 0 ? _a : document;\n      const textNode = doc.createTextNode(ZWSP$1);\n      const parentNode = node.parentNode;\n      if (!before) {\n        const sibling = node.nextSibling;\n        if (isText$9(sibling)) {\n          if (isCaretContainer$2(sibling)) {\n            return sibling;\n          }\n          if (startsWithCaretContainer$1(sibling)) {\n            sibling.splitText(1);\n            return sibling;\n          }\n        }\n        if (node.nextSibling) {\n          parentNode === null || parentNode === void 0 ? void 0 : parentNode.insertBefore(textNode, node.nextSibling);\n        } else {\n          parentNode === null || parentNode === void 0 ? void 0 : parentNode.appendChild(textNode);\n        }\n      } else {\n        const sibling = node.previousSibling;\n        if (isText$9(sibling)) {\n          if (isCaretContainer$2(sibling)) {\n            return sibling;\n          }\n          if (endsWithCaretContainer$1(sibling)) {\n            return sibling.splitText(sibling.data.length - 1);\n          }\n        }\n        parentNode === null || parentNode === void 0 ? void 0 : parentNode.insertBefore(textNode, node);\n      }\n      return textNode;\n    };\n    const isBeforeInline = pos => {\n      const container = pos.container();\n      if (!isText$a(container)) {\n        return false;\n      }\n      return container.data.charAt(pos.offset()) === ZWSP$1 || pos.isAtStart() && isCaretContainerInline(container.previousSibling);\n    };\n    const isAfterInline = pos => {\n      const container = pos.container();\n      if (!isText$a(container)) {\n        return false;\n      }\n      return container.data.charAt(pos.offset() - 1) === ZWSP$1 || pos.isAtEnd() && isCaretContainerInline(container.nextSibling);\n    };\n    const insertBlock = (blockName, node, before) => {\n      var _a;\n      const doc = (_a = node.ownerDocument) !== null && _a !== void 0 ? _a : document;\n      const blockNode = doc.createElement(blockName);\n      blockNode.setAttribute('data-mce-caret', before ? 'before' : 'after');\n      blockNode.setAttribute('data-mce-bogus', 'all');\n      blockNode.appendChild(createPaddingBr().dom);\n      const parentNode = node.parentNode;\n      if (!before) {\n        if (node.nextSibling) {\n          parentNode === null || parentNode === void 0 ? void 0 : parentNode.insertBefore(blockNode, node.nextSibling);\n        } else {\n          parentNode === null || parentNode === void 0 ? void 0 : parentNode.appendChild(blockNode);\n        }\n      } else {\n        parentNode === null || parentNode === void 0 ? void 0 : parentNode.insertBefore(blockNode, node);\n      }\n      return blockNode;\n    };\n    const startsWithCaretContainer$1 = node => isText$9(node) && node.data[0] === ZWSP$1;\n    const endsWithCaretContainer$1 = node => isText$9(node) && node.data[node.data.length - 1] === ZWSP$1;\n    const trimBogusBr = elm => {\n      var _a;\n      const brs = elm.getElementsByTagName('br');\n      const lastBr = brs[brs.length - 1];\n      if (isBogus$2(lastBr)) {\n        (_a = lastBr.parentNode) === null || _a === void 0 ? void 0 : _a.removeChild(lastBr);\n      }\n    };\n    const showCaretContainerBlock = caretContainer => {\n      if (caretContainer && caretContainer.hasAttribute('data-mce-caret')) {\n        trimBogusBr(caretContainer);\n        caretContainer.removeAttribute('data-mce-caret');\n        caretContainer.removeAttribute('data-mce-bogus');\n        caretContainer.removeAttribute('style');\n        caretContainer.removeAttribute('data-mce-style');\n        caretContainer.removeAttribute('_moz_abspos');\n        return caretContainer;\n      }\n      return null;\n    };\n    const isRangeInCaretContainerBlock = range => isCaretContainerBlock$1(range.startContainer);\n\n    const isContentEditableTrue$2 = isContentEditableTrue$3;\n    const isContentEditableFalse$9 = isContentEditableFalse$a;\n    const isBr$4 = isBr$6;\n    const isText$8 = isText$a;\n    const isInvalidTextElement = matchNodeNames([\n      'script',\n      'style',\n      'textarea'\n    ]);\n    const isAtomicInline = matchNodeNames([\n      'img',\n      'input',\n      'textarea',\n      'hr',\n      'iframe',\n      'video',\n      'audio',\n      'object',\n      'embed'\n    ]);\n    const isTable = matchNodeNames(['table']);\n    const isCaretContainer$1 = isCaretContainer$2;\n    const isCaretCandidate$3 = node => {\n      if (isCaretContainer$1(node)) {\n        return false;\n      }\n      if (isText$8(node)) {\n        return !isInvalidTextElement(node.parentNode);\n      }\n      return isAtomicInline(node) || isBr$4(node) || isTable(node) || isNonUiContentEditableFalse(node);\n    };\n    const isUnselectable = node => isElement$6(node) && node.getAttribute('unselectable') === 'true';\n    const isNonUiContentEditableFalse = node => !isUnselectable(node) && isContentEditableFalse$9(node);\n    const isInEditable = (node, root) => {\n      for (let tempNode = node.parentNode; tempNode && tempNode !== root; tempNode = tempNode.parentNode) {\n        if (isNonUiContentEditableFalse(tempNode)) {\n          return false;\n        }\n        if (isContentEditableTrue$2(tempNode)) {\n          return true;\n        }\n      }\n      return true;\n    };\n    const isAtomicContentEditableFalse = node => {\n      if (!isNonUiContentEditableFalse(node)) {\n        return false;\n      }\n      return !foldl(from(node.getElementsByTagName('*')), (result, elm) => {\n        return result || isContentEditableTrue$2(elm);\n      }, false);\n    };\n    const isAtomic$1 = node => isAtomicInline(node) || isAtomicContentEditableFalse(node);\n    const isEditableCaretCandidate$1 = (node, root) => isCaretCandidate$3(node) && isInEditable(node, root);\n\n    const whiteSpaceRegExp = /^[ \\t\\r\\n]*$/;\n    const isWhitespaceText = text => whiteSpaceRegExp.test(text);\n    const isCollapsibleWhitespace$1 = c => ' \\f\\t\\x0B'.indexOf(c) !== -1;\n    const isNewLineChar = c => c === '\\n' || c === '\\r';\n    const isNewline = (text, idx) => idx < text.length && idx >= 0 ? isNewLineChar(text[idx]) : false;\n    const normalize$4 = (text, tabSpaces = 4, isStartOfContent = true, isEndOfContent = true) => {\n      const tabSpace = repeat(' ', tabSpaces);\n      const normalizedText = text.replace(/\\t/g, tabSpace);\n      const result = foldl(normalizedText, (acc, c) => {\n        if (isCollapsibleWhitespace$1(c) || c === nbsp) {\n          if (acc.pcIsSpace || acc.str === '' && isStartOfContent || acc.str.length === normalizedText.length - 1 && isEndOfContent || isNewline(normalizedText, acc.str.length + 1)) {\n            return {\n              pcIsSpace: false,\n              str: acc.str + nbsp\n            };\n          } else {\n            return {\n              pcIsSpace: true,\n              str: acc.str + ' '\n            };\n          }\n        } else {\n          return {\n            pcIsSpace: isNewLineChar(c),\n            str: acc.str + c\n          };\n        }\n      }, {\n        pcIsSpace: false,\n        str: ''\n      });\n      return result.str;\n    };\n\n    const hasWhitespacePreserveParent = (node, rootNode) => {\n      const rootElement = SugarElement.fromDom(rootNode);\n      const startNode = SugarElement.fromDom(node);\n      return ancestor$1(startNode, 'pre,code', curry(eq, rootElement));\n    };\n    const isWhitespace$1 = (node, rootNode) => {\n      return isText$a(node) && isWhitespaceText(node.data) && !hasWhitespacePreserveParent(node, rootNode);\n    };\n    const isNamedAnchor = node => {\n      return isElement$6(node) && node.nodeName === 'A' && !node.hasAttribute('href') && (node.hasAttribute('name') || node.hasAttribute('id'));\n    };\n    const isContent$1 = (node, rootNode) => {\n      return isCaretCandidate$3(node) && !isWhitespace$1(node, rootNode) || isNamedAnchor(node) || isBookmark(node);\n    };\n    const isBookmark = hasAttribute('data-mce-bookmark');\n    const isBogus$1 = hasAttribute('data-mce-bogus');\n    const isBogusAll = hasAttributeValue('data-mce-bogus', 'all');\n    const isEmptyNode = (targetNode, skipBogus) => {\n      let brCount = 0;\n      if (isContent$1(targetNode, targetNode)) {\n        return false;\n      } else {\n        let node = targetNode.firstChild;\n        if (!node) {\n          return true;\n        }\n        const walker = new DomTreeWalker(node, targetNode);\n        do {\n          if (skipBogus) {\n            if (isBogusAll(node)) {\n              node = walker.next(true);\n              continue;\n            }\n            if (isBogus$1(node)) {\n              node = walker.next();\n              continue;\n            }\n          }\n          if (isBr$6(node)) {\n            brCount++;\n            node = walker.next();\n            continue;\n          }\n          if (isContent$1(node, targetNode)) {\n            return false;\n          }\n          node = walker.next();\n        } while (node);\n        return brCount <= 1;\n      }\n    };\n    const isEmpty$2 = (elm, skipBogus = true) => isEmptyNode(elm.dom, skipBogus);\n\n    const isSpan = node => node.nodeName.toLowerCase() === 'span';\n    const isInlineContent = (node, root) => isNonNullable(node) && (isContent$1(node, root) || isInline$1(SugarElement.fromDom(node)));\n    const surroundedByInlineContent = (node, root) => {\n      const prev = new DomTreeWalker(node, root).prev(false);\n      const next = new DomTreeWalker(node, root).next(false);\n      const prevIsInline = isUndefined(prev) || isInlineContent(prev, root);\n      const nextIsInline = isUndefined(next) || isInlineContent(next, root);\n      return prevIsInline && nextIsInline;\n    };\n    const isBookmarkNode$2 = node => isSpan(node) && node.getAttribute('data-mce-type') === 'bookmark';\n    const isKeepTextNode = (node, root) => isText$a(node) && node.data.length > 0 && surroundedByInlineContent(node, root);\n    const isKeepElement = node => isElement$6(node) ? node.childNodes.length > 0 : false;\n    const isDocument = node => isDocumentFragment(node) || isDocument$1(node);\n    const trimNode = (dom, node, root) => {\n      var _a;\n      const rootNode = root || node;\n      if (isElement$6(node) && isBookmarkNode$2(node)) {\n        return node;\n      }\n      const children = node.childNodes;\n      for (let i = children.length - 1; i >= 0; i--) {\n        trimNode(dom, children[i], rootNode);\n      }\n      if (isElement$6(node)) {\n        const currentChildren = node.childNodes;\n        if (currentChildren.length === 1 && isBookmarkNode$2(currentChildren[0])) {\n          (_a = node.parentNode) === null || _a === void 0 ? void 0 : _a.insertBefore(currentChildren[0], node);\n        }\n      }\n      if (!isDocument(node) && !isContent$1(node, rootNode) && !isKeepElement(node) && !isKeepTextNode(node, rootNode)) {\n        dom.remove(node);\n      }\n      return node;\n    };\n\n    const makeMap$3 = Tools.makeMap;\n    const attrsCharsRegExp = /[&<>\\\"\\u0060\\u007E-\\uD7FF\\uE000-\\uFFEF]|[\\uD800-\\uDBFF][\\uDC00-\\uDFFF]/g;\n    const textCharsRegExp = /[<>&\\u007E-\\uD7FF\\uE000-\\uFFEF]|[\\uD800-\\uDBFF][\\uDC00-\\uDFFF]/g;\n    const rawCharsRegExp = /[<>&\\\"\\']/g;\n    const entityRegExp = /&#([a-z0-9]+);?|&([a-z0-9]+);/gi;\n    const asciiMap = {\n      128: '\\u20AC',\n      130: '\\u201A',\n      131: '\\u0192',\n      132: '\\u201E',\n      133: '\\u2026',\n      134: '\\u2020',\n      135: '\\u2021',\n      136: '\\u02c6',\n      137: '\\u2030',\n      138: '\\u0160',\n      139: '\\u2039',\n      140: '\\u0152',\n      142: '\\u017d',\n      145: '\\u2018',\n      146: '\\u2019',\n      147: '\\u201C',\n      148: '\\u201D',\n      149: '\\u2022',\n      150: '\\u2013',\n      151: '\\u2014',\n      152: '\\u02DC',\n      153: '\\u2122',\n      154: '\\u0161',\n      155: '\\u203A',\n      156: '\\u0153',\n      158: '\\u017e',\n      159: '\\u0178'\n    };\n    const baseEntities = {\n      '\"': '&quot;',\n      '\\'': '&#39;',\n      '<': '&lt;',\n      '>': '&gt;',\n      '&': '&amp;',\n      '`': '&#96;'\n    };\n    const reverseEntities = {\n      '&lt;': '<',\n      '&gt;': '>',\n      '&amp;': '&',\n      '&quot;': '\"',\n      '&apos;': `'`\n    };\n    const nativeDecode = text => {\n      const elm = SugarElement.fromTag('div').dom;\n      elm.innerHTML = text;\n      return elm.textContent || elm.innerText || text;\n    };\n    const buildEntitiesLookup = (items, radix) => {\n      const lookup = {};\n      if (items) {\n        const itemList = items.split(',');\n        radix = radix || 10;\n        for (let i = 0; i < itemList.length; i += 2) {\n          const chr = String.fromCharCode(parseInt(itemList[i], radix));\n          if (!baseEntities[chr]) {\n            const entity = '&' + itemList[i + 1] + ';';\n            lookup[chr] = entity;\n            lookup[entity] = chr;\n          }\n        }\n        return lookup;\n      } else {\n        return undefined;\n      }\n    };\n    const namedEntities = buildEntitiesLookup('50,nbsp,51,iexcl,52,cent,53,pound,54,curren,55,yen,56,brvbar,57,sect,58,uml,59,copy,' + '5a,ordf,5b,laquo,5c,not,5d,shy,5e,reg,5f,macr,5g,deg,5h,plusmn,5i,sup2,5j,sup3,5k,acute,' + '5l,micro,5m,para,5n,middot,5o,cedil,5p,sup1,5q,ordm,5r,raquo,5s,frac14,5t,frac12,5u,frac34,' + '5v,iquest,60,Agrave,61,Aacute,62,Acirc,63,Atilde,64,Auml,65,Aring,66,AElig,67,Ccedil,' + '68,Egrave,69,Eacute,6a,Ecirc,6b,Euml,6c,Igrave,6d,Iacute,6e,Icirc,6f,Iuml,6g,ETH,6h,Ntilde,' + '6i,Ograve,6j,Oacute,6k,Ocirc,6l,Otilde,6m,Ouml,6n,times,6o,Oslash,6p,Ugrave,6q,Uacute,' + '6r,Ucirc,6s,Uuml,6t,Yacute,6u,THORN,6v,szlig,70,agrave,71,aacute,72,acirc,73,atilde,74,auml,' + '75,aring,76,aelig,77,ccedil,78,egrave,79,eacute,7a,ecirc,7b,euml,7c,igrave,7d,iacute,7e,icirc,' + '7f,iuml,7g,eth,7h,ntilde,7i,ograve,7j,oacute,7k,ocirc,7l,otilde,7m,ouml,7n,divide,7o,oslash,' + '7p,ugrave,7q,uacute,7r,ucirc,7s,uuml,7t,yacute,7u,thorn,7v,yuml,ci,fnof,sh,Alpha,si,Beta,' + 'sj,Gamma,sk,Delta,sl,Epsilon,sm,Zeta,sn,Eta,so,Theta,sp,Iota,sq,Kappa,sr,Lambda,ss,Mu,' + 'st,Nu,su,Xi,sv,Omicron,t0,Pi,t1,Rho,t3,Sigma,t4,Tau,t5,Upsilon,t6,Phi,t7,Chi,t8,Psi,' + 't9,Omega,th,alpha,ti,beta,tj,gamma,tk,delta,tl,epsilon,tm,zeta,tn,eta,to,theta,tp,iota,' + 'tq,kappa,tr,lambda,ts,mu,tt,nu,tu,xi,tv,omicron,u0,pi,u1,rho,u2,sigmaf,u3,sigma,u4,tau,' + 'u5,upsilon,u6,phi,u7,chi,u8,psi,u9,omega,uh,thetasym,ui,upsih,um,piv,812,bull,816,hellip,' + '81i,prime,81j,Prime,81u,oline,824,frasl,88o,weierp,88h,image,88s,real,892,trade,89l,alefsym,' + '8cg,larr,8ch,uarr,8ci,rarr,8cj,darr,8ck,harr,8dl,crarr,8eg,lArr,8eh,uArr,8ei,rArr,8ej,dArr,' + '8ek,hArr,8g0,forall,8g2,part,8g3,exist,8g5,empty,8g7,nabla,8g8,isin,8g9,notin,8gb,ni,8gf,prod,' + '8gh,sum,8gi,minus,8gn,lowast,8gq,radic,8gt,prop,8gu,infin,8h0,ang,8h7,and,8h8,or,8h9,cap,8ha,cup,' + '8hb,int,8hk,there4,8hs,sim,8i5,cong,8i8,asymp,8j0,ne,8j1,equiv,8j4,le,8j5,ge,8k2,sub,8k3,sup,8k4,' + 'nsub,8k6,sube,8k7,supe,8kl,oplus,8kn,otimes,8l5,perp,8m5,sdot,8o8,lceil,8o9,rceil,8oa,lfloor,8ob,' + 'rfloor,8p9,lang,8pa,rang,9ea,loz,9j0,spades,9j3,clubs,9j5,hearts,9j6,diams,ai,OElig,aj,oelig,b0,' + 'Scaron,b1,scaron,bo,Yuml,m6,circ,ms,tilde,802,ensp,803,emsp,809,thinsp,80c,zwnj,80d,zwj,80e,lrm,' + '80f,rlm,80j,ndash,80k,mdash,80o,lsquo,80p,rsquo,80q,sbquo,80s,ldquo,80t,rdquo,80u,bdquo,810,dagger,' + '811,Dagger,81g,permil,81p,lsaquo,81q,rsaquo,85c,euro', 32);\n    const encodeRaw = (text, attr) => text.replace(attr ? attrsCharsRegExp : textCharsRegExp, chr => {\n      return baseEntities[chr] || chr;\n    });\n    const encodeAllRaw = text => ('' + text).replace(rawCharsRegExp, chr => {\n      return baseEntities[chr] || chr;\n    });\n    const encodeNumeric = (text, attr) => text.replace(attr ? attrsCharsRegExp : textCharsRegExp, chr => {\n      if (chr.length > 1) {\n        return '&#' + ((chr.charCodeAt(0) - 55296) * 1024 + (chr.charCodeAt(1) - 56320) + 65536) + ';';\n      }\n      return baseEntities[chr] || '&#' + chr.charCodeAt(0) + ';';\n    });\n    const encodeNamed = (text, attr, entities) => {\n      const resolveEntities = entities || namedEntities;\n      return text.replace(attr ? attrsCharsRegExp : textCharsRegExp, chr => {\n        return baseEntities[chr] || resolveEntities[chr] || chr;\n      });\n    };\n    const getEncodeFunc = (name, entities) => {\n      const entitiesMap = buildEntitiesLookup(entities) || namedEntities;\n      const encodeNamedAndNumeric = (text, attr) => text.replace(attr ? attrsCharsRegExp : textCharsRegExp, chr => {\n        if (baseEntities[chr] !== undefined) {\n          return baseEntities[chr];\n        }\n        if (entitiesMap[chr] !== undefined) {\n          return entitiesMap[chr];\n        }\n        if (chr.length > 1) {\n          return '&#' + ((chr.charCodeAt(0) - 55296) * 1024 + (chr.charCodeAt(1) - 56320) + 65536) + ';';\n        }\n        return '&#' + chr.charCodeAt(0) + ';';\n      });\n      const encodeCustomNamed = (text, attr) => {\n        return encodeNamed(text, attr, entitiesMap);\n      };\n      const nameMap = makeMap$3(name.replace(/\\+/g, ','));\n      if (nameMap.named && nameMap.numeric) {\n        return encodeNamedAndNumeric;\n      }\n      if (nameMap.named) {\n        if (entities) {\n          return encodeCustomNamed;\n        }\n        return encodeNamed;\n      }\n      if (nameMap.numeric) {\n        return encodeNumeric;\n      }\n      return encodeRaw;\n    };\n    const decode = text => text.replace(entityRegExp, (all, numeric) => {\n      if (numeric) {\n        if (numeric.charAt(0).toLowerCase() === 'x') {\n          numeric = parseInt(numeric.substr(1), 16);\n        } else {\n          numeric = parseInt(numeric, 10);\n        }\n        if (numeric > 65535) {\n          numeric -= 65536;\n          return String.fromCharCode(55296 + (numeric >> 10), 56320 + (numeric & 1023));\n        }\n        return asciiMap[numeric] || String.fromCharCode(numeric);\n      }\n      return reverseEntities[all] || namedEntities[all] || nativeDecode(all);\n    });\n    const Entities = {\n      encodeRaw,\n      encodeAllRaw,\n      encodeNumeric,\n      encodeNamed,\n      getEncodeFunc,\n      decode\n    };\n\n    const lookupCache = {};\n    const mapCache = {};\n    const dummyObj = {};\n    const makeMap$2 = Tools.makeMap, each$b = Tools.each, extend$2 = Tools.extend, explode$2 = Tools.explode, inArray = Tools.inArray;\n    const split$1 = (items, delim) => {\n      items = Tools.trim(items);\n      return items ? items.split(delim || ' ') : [];\n    };\n    const createMap = (defaultValue, extendWith = {}) => {\n      const value = makeMap$2(defaultValue, ' ', makeMap$2(defaultValue.toUpperCase(), ' '));\n      return extend$2(value, extendWith);\n    };\n    const getTextRootBlockElements = schema => createMap('td th li dt dd figcaption caption details summary', schema.getTextBlockElements());\n    const compileSchema = type => {\n      const schema = {};\n      let globalAttributes, blockContent;\n      let phrasingContent, flowContent;\n      const add = (name, attributes = '', children = '') => {\n        const childNames = split$1(children);\n        const names = split$1(name);\n        let ni = names.length;\n        while (ni--) {\n          const attributesOrder = split$1([\n            globalAttributes,\n            attributes\n          ].join(' '));\n          schema[names[ni]] = {\n            attributes: mapToObject(attributesOrder, () => ({})),\n            attributesOrder,\n            children: mapToObject(childNames, constant(dummyObj))\n          };\n        }\n      };\n      const addAttrs = (name, attributes) => {\n        const names = split$1(name);\n        const attrs = split$1(attributes);\n        let ni = names.length;\n        while (ni--) {\n          const schemaItem = schema[names[ni]];\n          for (let i = 0, l = attrs.length; i < l; i++) {\n            schemaItem.attributes[attrs[i]] = {};\n            schemaItem.attributesOrder.push(attrs[i]);\n          }\n        }\n      };\n      if (lookupCache[type]) {\n        return lookupCache[type];\n      }\n      globalAttributes = 'id accesskey class dir lang style tabindex title role';\n      blockContent = 'address blockquote div dl fieldset form h1 h2 h3 h4 h5 h6 hr menu ol p pre table ul';\n      phrasingContent = 'a abbr b bdo br button cite code del dfn em embed i iframe img input ins kbd ' + 'label map noscript object q s samp script select small span strong sub sup ' + 'textarea u var #text #comment';\n      if (type !== 'html4') {\n        globalAttributes += ' contenteditable contextmenu draggable dropzone ' + 'hidden spellcheck translate';\n        blockContent += ' article aside details dialog figure main header footer hgroup section nav';\n        phrasingContent += ' audio canvas command datalist mark meter output picture ' + 'progress time wbr video ruby bdi keygen';\n      }\n      if (type !== 'html5-strict') {\n        globalAttributes += ' xml:lang';\n        const html4PhrasingContent = 'acronym applet basefont big font strike tt';\n        phrasingContent = [\n          phrasingContent,\n          html4PhrasingContent\n        ].join(' ');\n        each$b(split$1(html4PhrasingContent), name => {\n          add(name, '', phrasingContent);\n        });\n        const html4BlockContent = 'center dir isindex noframes';\n        blockContent = [\n          blockContent,\n          html4BlockContent\n        ].join(' ');\n        flowContent = [\n          blockContent,\n          phrasingContent\n        ].join(' ');\n        each$b(split$1(html4BlockContent), name => {\n          add(name, '', flowContent);\n        });\n      }\n      flowContent = flowContent || [\n        blockContent,\n        phrasingContent\n      ].join(' ');\n      add('html', 'manifest', 'head body');\n      add('head', '', 'base command link meta noscript script style title');\n      add('title hr noscript br');\n      add('base', 'href target');\n      add('link', 'href rel media hreflang type sizes hreflang');\n      add('meta', 'name http-equiv content charset');\n      add('style', 'media type scoped');\n      add('script', 'src async defer type charset');\n      add('body', 'onafterprint onbeforeprint onbeforeunload onblur onerror onfocus ' + 'onhashchange onload onmessage onoffline ononline onpagehide onpageshow ' + 'onpopstate onresize onscroll onstorage onunload', flowContent);\n      add('address dt dd div caption', '', flowContent);\n      add('h1 h2 h3 h4 h5 h6 pre p abbr code var samp kbd sub sup i b u bdo span legend em strong small s cite dfn', '', phrasingContent);\n      add('blockquote', 'cite', flowContent);\n      add('ol', 'reversed start type', 'li');\n      add('ul', '', 'li');\n      add('li', 'value', flowContent);\n      add('dl', '', 'dt dd');\n      add('a', 'href target rel media hreflang type', phrasingContent);\n      add('q', 'cite', phrasingContent);\n      add('ins del', 'cite datetime', flowContent);\n      add('img', 'src sizes srcset alt usemap ismap width height');\n      add('iframe', 'src name width height', flowContent);\n      add('embed', 'src type width height');\n      add('object', 'data type typemustmatch name usemap form width height', [\n        flowContent,\n        'param'\n      ].join(' '));\n      add('param', 'name value');\n      add('map', 'name', [\n        flowContent,\n        'area'\n      ].join(' '));\n      add('area', 'alt coords shape href target rel media hreflang type');\n      add('table', 'border', 'caption colgroup thead tfoot tbody tr' + (type === 'html4' ? ' col' : ''));\n      add('colgroup', 'span', 'col');\n      add('col', 'span');\n      add('tbody thead tfoot', '', 'tr');\n      add('tr', '', 'td th');\n      add('td', 'colspan rowspan headers', flowContent);\n      add('th', 'colspan rowspan headers scope abbr', flowContent);\n      add('form', 'accept-charset action autocomplete enctype method name novalidate target', flowContent);\n      add('fieldset', 'disabled form name', [\n        flowContent,\n        'legend'\n      ].join(' '));\n      add('label', 'form for', phrasingContent);\n      add('input', 'accept alt autocomplete checked dirname disabled form formaction formenctype formmethod formnovalidate ' + 'formtarget height list max maxlength min multiple name pattern readonly required size src step type value width');\n      add('button', 'disabled form formaction formenctype formmethod formnovalidate formtarget name type value', type === 'html4' ? flowContent : phrasingContent);\n      add('select', 'disabled form multiple name required size', 'option optgroup');\n      add('optgroup', 'disabled label', 'option');\n      add('option', 'disabled label selected value');\n      add('textarea', 'cols dirname disabled form maxlength name readonly required rows wrap');\n      add('menu', 'type label', [\n        flowContent,\n        'li'\n      ].join(' '));\n      add('noscript', '', flowContent);\n      if (type !== 'html4') {\n        add('wbr');\n        add('ruby', '', [\n          phrasingContent,\n          'rt rp'\n        ].join(' '));\n        add('figcaption', '', flowContent);\n        add('mark rt rp summary bdi', '', phrasingContent);\n        add('canvas', 'width height', flowContent);\n        add('video', 'src crossorigin poster preload autoplay mediagroup loop ' + 'muted controls width height buffered', [\n          flowContent,\n          'track source'\n        ].join(' '));\n        add('audio', 'src crossorigin preload autoplay mediagroup loop muted controls ' + 'buffered volume', [\n          flowContent,\n          'track source'\n        ].join(' '));\n        add('picture', '', 'img source');\n        add('source', 'src srcset type media sizes');\n        add('track', 'kind src srclang label default');\n        add('datalist', '', [\n          phrasingContent,\n          'option'\n        ].join(' '));\n        add('article section nav aside main header footer', '', flowContent);\n        add('hgroup', '', 'h1 h2 h3 h4 h5 h6');\n        add('figure', '', [\n          flowContent,\n          'figcaption'\n        ].join(' '));\n        add('time', 'datetime', phrasingContent);\n        add('dialog', 'open', flowContent);\n        add('command', 'type label icon disabled checked radiogroup command');\n        add('output', 'for form name', phrasingContent);\n        add('progress', 'value max', phrasingContent);\n        add('meter', 'value min max low high optimum', phrasingContent);\n        add('details', 'open', [\n          flowContent,\n          'summary'\n        ].join(' '));\n        add('keygen', 'autofocus challenge disabled form keytype name');\n      }\n      if (type !== 'html5-strict') {\n        addAttrs('script', 'language xml:space');\n        addAttrs('style', 'xml:space');\n        addAttrs('object', 'declare classid code codebase codetype archive standby align border hspace vspace');\n        addAttrs('embed', 'align name hspace vspace');\n        addAttrs('param', 'valuetype type');\n        addAttrs('a', 'charset name rev shape coords');\n        addAttrs('br', 'clear');\n        addAttrs('applet', 'codebase archive code object alt name width height align hspace vspace');\n        addAttrs('img', 'name longdesc align border hspace vspace');\n        addAttrs('iframe', 'longdesc frameborder marginwidth marginheight scrolling align');\n        addAttrs('font basefont', 'size color face');\n        addAttrs('input', 'usemap align');\n        addAttrs('select');\n        addAttrs('textarea');\n        addAttrs('h1 h2 h3 h4 h5 h6 div p legend caption', 'align');\n        addAttrs('ul', 'type compact');\n        addAttrs('li', 'type');\n        addAttrs('ol dl menu dir', 'compact');\n        addAttrs('pre', 'width xml:space');\n        addAttrs('hr', 'align noshade size width');\n        addAttrs('isindex', 'prompt');\n        addAttrs('table', 'summary width frame rules cellspacing cellpadding align bgcolor');\n        addAttrs('col', 'width align char charoff valign');\n        addAttrs('colgroup', 'width align char charoff valign');\n        addAttrs('thead', 'align char charoff valign');\n        addAttrs('tr', 'align char charoff valign bgcolor');\n        addAttrs('th', 'axis align char charoff valign nowrap bgcolor width height');\n        addAttrs('form', 'accept');\n        addAttrs('td', 'abbr axis scope align char charoff valign nowrap bgcolor width height');\n        addAttrs('tfoot', 'align char charoff valign');\n        addAttrs('tbody', 'align char charoff valign');\n        addAttrs('area', 'nohref');\n        addAttrs('body', 'background bgcolor text link vlink alink');\n      }\n      if (type !== 'html4') {\n        addAttrs('input button select textarea', 'autofocus');\n        addAttrs('input textarea', 'placeholder');\n        addAttrs('a', 'download');\n        addAttrs('link script img', 'crossorigin');\n        addAttrs('img', 'loading');\n        addAttrs('iframe', 'sandbox seamless allow allowfullscreen loading');\n      }\n      if (type !== 'html4') {\n        each$e([\n          schema.video,\n          schema.audio\n        ], item => {\n          delete item.children.audio;\n          delete item.children.video;\n        });\n      }\n      each$b(split$1('a form meter progress dfn'), name => {\n        if (schema[name]) {\n          delete schema[name].children[name];\n        }\n      });\n      delete schema.caption.children.table;\n      delete schema.script;\n      lookupCache[type] = schema;\n      return schema;\n    };\n    const compileElementMap = (value, mode) => {\n      if (value) {\n        const styles = {};\n        if (isString(value)) {\n          value = { '*': value };\n        }\n        each$b(value, (value, key) => {\n          styles[key] = styles[key.toUpperCase()] = mode === 'map' ? makeMap$2(value, /[, ]/) : explode$2(value, /[, ]/);\n        });\n        return styles;\n      } else {\n        return undefined;\n      }\n    };\n    const Schema = (settings = {}) => {\n      var _a;\n      const elements = {};\n      const children = {};\n      let patternElements = [];\n      const customElementsMap = {};\n      const specialElements = {};\n      const createLookupTable = (option, defaultValue, extendWith) => {\n        const value = settings[option];\n        if (!value) {\n          let newValue = mapCache[option];\n          if (!newValue) {\n            newValue = createMap(defaultValue, extendWith);\n            mapCache[option] = newValue;\n          }\n          return newValue;\n        } else {\n          return makeMap$2(value, /[, ]/, makeMap$2(value.toUpperCase(), /[, ]/));\n        }\n      };\n      const schemaType = (_a = settings.schema) !== null && _a !== void 0 ? _a : 'html5';\n      const schemaItems = compileSchema(schemaType);\n      if (settings.verify_html === false) {\n        settings.valid_elements = '*[*]';\n      }\n      const validStyles = compileElementMap(settings.valid_styles);\n      const invalidStyles = compileElementMap(settings.invalid_styles, 'map');\n      const validClasses = compileElementMap(settings.valid_classes, 'map');\n      const whitespaceElementsMap = createLookupTable('whitespace_elements', 'pre script noscript style textarea video audio iframe object code');\n      const selfClosingElementsMap = createLookupTable('self_closing_elements', 'colgroup dd dt li option p td tfoot th thead tr');\n      const voidElementsMap = createLookupTable('void_elements', 'area base basefont br col frame hr img input isindex link ' + 'meta param embed source wbr track');\n      const boolAttrMap = createLookupTable('boolean_attributes', 'checked compact declare defer disabled ismap multiple nohref noresize ' + 'noshade nowrap readonly selected autoplay loop controls allowfullscreen');\n      const nonEmptyOrMoveCaretBeforeOnEnter = 'td th iframe video audio object script code';\n      const nonEmptyElementsMap = createLookupTable('non_empty_elements', nonEmptyOrMoveCaretBeforeOnEnter + ' pre', voidElementsMap);\n      const moveCaretBeforeOnEnterElementsMap = createLookupTable('move_caret_before_on_enter_elements', nonEmptyOrMoveCaretBeforeOnEnter + ' table', voidElementsMap);\n      const textBlockElementsMap = createLookupTable('text_block_elements', 'h1 h2 h3 h4 h5 h6 p div address pre form ' + 'blockquote center dir fieldset header footer article section hgroup aside main nav figure');\n      const blockElementsMap = createLookupTable('block_elements', 'hr table tbody thead tfoot ' + 'th tr td li ol ul caption dl dt dd noscript menu isindex option ' + 'datalist select optgroup figcaption details summary', textBlockElementsMap);\n      const textInlineElementsMap = createLookupTable('text_inline_elements', 'span strong b em i font s strike u var cite ' + 'dfn code mark q sup sub samp');\n      each$b('script noscript iframe noframes noembed title style textarea xmp plaintext'.split(' '), name => {\n        specialElements[name] = new RegExp('</' + name + '[^>]*>', 'gi');\n      });\n      const patternToRegExp = str => new RegExp('^' + str.replace(/([?+*])/g, '.$1') + '$');\n      const addValidElements = validElements => {\n        const elementRuleRegExp = /^([#+\\-])?([^\\[!\\/]+)(?:\\/([^\\[!]+))?(?:(!?)\\[([^\\]]+)])?$/;\n        const attrRuleRegExp = /^([!\\-])?(\\w+[\\\\:]:\\w+|[^=~<]+)?(?:([=~<])(.*))?$/;\n        const hasPatternsRegExp = /[*?+]/;\n        if (validElements) {\n          const validElementsArr = split$1(validElements, ',');\n          let globalAttributes;\n          let globalAttributesOrder;\n          if (elements['@']) {\n            globalAttributes = elements['@'].attributes;\n            globalAttributesOrder = elements['@'].attributesOrder;\n          }\n          for (let ei = 0, el = validElementsArr.length; ei < el; ei++) {\n            let matches = elementRuleRegExp.exec(validElementsArr[ei]);\n            if (matches) {\n              const prefix = matches[1];\n              const elementName = matches[2];\n              const outputName = matches[3];\n              const attrData = matches[5];\n              const attributes = {};\n              const attributesOrder = [];\n              const element = {\n                attributes,\n                attributesOrder\n              };\n              if (prefix === '#') {\n                element.paddEmpty = true;\n              }\n              if (prefix === '-') {\n                element.removeEmpty = true;\n              }\n              if (matches[4] === '!') {\n                element.removeEmptyAttrs = true;\n              }\n              if (globalAttributes) {\n                each$d(globalAttributes, (value, key) => {\n                  attributes[key] = value;\n                });\n                if (globalAttributesOrder) {\n                  attributesOrder.push(...globalAttributesOrder);\n                }\n              }\n              if (attrData) {\n                const attrDatas = split$1(attrData, '|');\n                for (let ai = 0, al = attrDatas.length; ai < al; ai++) {\n                  matches = attrRuleRegExp.exec(attrDatas[ai]);\n                  if (matches) {\n                    const attr = {};\n                    const attrType = matches[1];\n                    const attrName = matches[2].replace(/[\\\\:]:/g, ':');\n                    const attrPrefix = matches[3];\n                    const value = matches[4];\n                    if (attrType === '!') {\n                      element.attributesRequired = element.attributesRequired || [];\n                      element.attributesRequired.push(attrName);\n                      attr.required = true;\n                    }\n                    if (attrType === '-') {\n                      delete attributes[attrName];\n                      attributesOrder.splice(inArray(attributesOrder, attrName), 1);\n                      continue;\n                    }\n                    if (attrPrefix) {\n                      if (attrPrefix === '=') {\n                        element.attributesDefault = element.attributesDefault || [];\n                        element.attributesDefault.push({\n                          name: attrName,\n                          value\n                        });\n                        attr.defaultValue = value;\n                      }\n                      if (attrPrefix === '~') {\n                        element.attributesForced = element.attributesForced || [];\n                        element.attributesForced.push({\n                          name: attrName,\n                          value\n                        });\n                        attr.forcedValue = value;\n                      }\n                      if (attrPrefix === '<') {\n                        attr.validValues = makeMap$2(value, '?');\n                      }\n                    }\n                    if (hasPatternsRegExp.test(attrName)) {\n                      const attrPattern = attr;\n                      element.attributePatterns = element.attributePatterns || [];\n                      attrPattern.pattern = patternToRegExp(attrName);\n                      element.attributePatterns.push(attrPattern);\n                    } else {\n                      if (!attributes[attrName]) {\n                        attributesOrder.push(attrName);\n                      }\n                      attributes[attrName] = attr;\n                    }\n                  }\n                }\n              }\n              if (!globalAttributes && elementName === '@') {\n                globalAttributes = attributes;\n                globalAttributesOrder = attributesOrder;\n              }\n              if (outputName) {\n                element.outputName = elementName;\n                elements[outputName] = element;\n              }\n              if (hasPatternsRegExp.test(elementName)) {\n                const patternElement = element;\n                patternElement.pattern = patternToRegExp(elementName);\n                patternElements.push(patternElement);\n              } else {\n                elements[elementName] = element;\n              }\n            }\n          }\n        }\n      };\n      const setValidElements = validElements => {\n        patternElements = [];\n        each$e(keys(elements), name => {\n          delete elements[name];\n        });\n        addValidElements(validElements);\n        each$b(schemaItems, (element, name) => {\n          children[name] = element.children;\n        });\n      };\n      const addCustomElements = customElements => {\n        const customElementRegExp = /^(~)?(.+)$/;\n        if (customElements) {\n          delete mapCache.text_block_elements;\n          delete mapCache.block_elements;\n          each$b(split$1(customElements, ','), rule => {\n            const matches = customElementRegExp.exec(rule);\n            if (matches) {\n              const inline = matches[1] === '~';\n              const cloneName = inline ? 'span' : 'div';\n              const name = matches[2];\n              children[name] = children[cloneName];\n              customElementsMap[name] = cloneName;\n              nonEmptyElementsMap[name.toUpperCase()] = {};\n              nonEmptyElementsMap[name] = {};\n              if (!inline) {\n                blockElementsMap[name.toUpperCase()] = {};\n                blockElementsMap[name] = {};\n              }\n              if (!elements[name]) {\n                let customRule = elements[cloneName];\n                customRule = extend$2({}, customRule);\n                delete customRule.removeEmptyAttrs;\n                delete customRule.removeEmpty;\n                elements[name] = customRule;\n              }\n              each$b(children, (element, elmName) => {\n                if (element[cloneName]) {\n                  children[elmName] = element = extend$2({}, children[elmName]);\n                  element[name] = element[cloneName];\n                }\n              });\n            }\n          });\n        }\n      };\n      const addValidChildren = validChildren => {\n        const childRuleRegExp = /^([+\\-]?)([A-Za-z0-9_\\-.\\u00b7\\u00c0-\\u00d6\\u00d8-\\u00f6\\u00f8-\\u037d\\u037f-\\u1fff\\u200c-\\u200d\\u203f-\\u2040\\u2070-\\u218f\\u2c00-\\u2fef\\u3001-\\ud7ff\\uf900-\\ufdcf\\ufdf0-\\ufffd]+)\\[([^\\]]+)]$/;\n        delete lookupCache[schemaType];\n        if (validChildren) {\n          each$b(split$1(validChildren, ','), rule => {\n            const matches = childRuleRegExp.exec(rule);\n            if (matches) {\n              const prefix = matches[1];\n              let parent;\n              if (prefix) {\n                parent = children[matches[2]];\n              } else {\n                parent = children[matches[2]] = { '#comment': {} };\n              }\n              parent = children[matches[2]];\n              each$b(split$1(matches[3], '|'), child => {\n                if (prefix === '-') {\n                  delete parent[child];\n                } else {\n                  parent[child] = {};\n                }\n              });\n            }\n          });\n        }\n      };\n      const getElementRule = name => {\n        const element = elements[name];\n        if (element) {\n          return element;\n        }\n        let i = patternElements.length;\n        while (i--) {\n          const patternElement = patternElements[i];\n          if (patternElement.pattern.test(name)) {\n            return patternElement;\n          }\n        }\n        return undefined;\n      };\n      if (!settings.valid_elements) {\n        each$b(schemaItems, (element, name) => {\n          elements[name] = {\n            attributes: element.attributes,\n            attributesOrder: element.attributesOrder\n          };\n          children[name] = element.children;\n        });\n        each$b(split$1('strong/b em/i'), item => {\n          const items = split$1(item, '/');\n          elements[items[1]].outputName = items[0];\n        });\n        each$b(textInlineElementsMap, (_val, name) => {\n          if (elements[name]) {\n            if (settings.padd_empty_block_inline_children) {\n              elements[name].paddInEmptyBlock = true;\n            }\n            elements[name].removeEmpty = true;\n          }\n        });\n        each$b(split$1('ol ul blockquote a table tbody'), name => {\n          if (elements[name]) {\n            elements[name].removeEmpty = true;\n          }\n        });\n        each$b(split$1('p h1 h2 h3 h4 h5 h6 th td pre div address caption li'), name => {\n          elements[name].paddEmpty = true;\n        });\n        each$b(split$1('span'), name => {\n          elements[name].removeEmptyAttrs = true;\n        });\n      } else {\n        setValidElements(settings.valid_elements);\n      }\n      addCustomElements(settings.custom_elements);\n      addValidChildren(settings.valid_children);\n      addValidElements(settings.extended_valid_elements);\n      addValidChildren('+ol[ul|ol],+ul[ul|ol]');\n      each$b({\n        dd: 'dl',\n        dt: 'dl',\n        li: 'ul ol',\n        td: 'tr',\n        th: 'tr',\n        tr: 'tbody thead tfoot',\n        tbody: 'table',\n        thead: 'table',\n        tfoot: 'table',\n        legend: 'fieldset',\n        area: 'map',\n        param: 'video audio object'\n      }, (parents, item) => {\n        if (elements[item]) {\n          elements[item].parentsRequired = split$1(parents);\n        }\n      });\n      if (settings.invalid_elements) {\n        each$b(explode$2(settings.invalid_elements), item => {\n          if (elements[item]) {\n            delete elements[item];\n          }\n        });\n      }\n      if (!getElementRule('span')) {\n        addValidElements('span[!data-mce-type|*]');\n      }\n      const getValidStyles = constant(validStyles);\n      const getInvalidStyles = constant(invalidStyles);\n      const getValidClasses = constant(validClasses);\n      const getBoolAttrs = constant(boolAttrMap);\n      const getBlockElements = constant(blockElementsMap);\n      const getTextBlockElements = constant(textBlockElementsMap);\n      const getTextInlineElements = constant(textInlineElementsMap);\n      const getVoidElements = constant(Object.seal(voidElementsMap));\n      const getSelfClosingElements = constant(selfClosingElementsMap);\n      const getNonEmptyElements = constant(nonEmptyElementsMap);\n      const getMoveCaretBeforeOnEnterElements = constant(moveCaretBeforeOnEnterElementsMap);\n      const getWhitespaceElements = constant(whitespaceElementsMap);\n      const getSpecialElements = constant(Object.seal(specialElements));\n      const isValidChild = (name, child) => {\n        const parent = children[name.toLowerCase()];\n        return !!(parent && parent[child.toLowerCase()]);\n      };\n      const isValid = (name, attr) => {\n        const rule = getElementRule(name);\n        if (rule) {\n          if (attr) {\n            if (rule.attributes[attr]) {\n              return true;\n            }\n            const attrPatterns = rule.attributePatterns;\n            if (attrPatterns) {\n              let i = attrPatterns.length;\n              while (i--) {\n                if (attrPatterns[i].pattern.test(attr)) {\n                  return true;\n                }\n              }\n            }\n          } else {\n            return true;\n          }\n        }\n        return false;\n      };\n      const getCustomElements = constant(customElementsMap);\n      return {\n        type: schemaType,\n        children,\n        elements,\n        getValidStyles,\n        getValidClasses,\n        getBlockElements,\n        getInvalidStyles,\n        getVoidElements,\n        getTextBlockElements,\n        getTextInlineElements,\n        getBoolAttrs,\n        getElementRule,\n        getSelfClosingElements,\n        getNonEmptyElements,\n        getMoveCaretBeforeOnEnterElements,\n        getWhitespaceElements,\n        getSpecialElements,\n        isValidChild,\n        isValid,\n        getCustomElements,\n        addValidElements,\n        setValidElements,\n        addCustomElements,\n        addValidChildren\n      };\n    };\n\n    const Styles = (settings = {}, schema) => {\n      const urlOrStrRegExp = /(?:url(?:(?:\\(\\s*\\\"([^\\\"]+)\\\"\\s*\\))|(?:\\(\\s*\\'([^\\']+)\\'\\s*\\))|(?:\\(\\s*([^)\\s]+)\\s*\\))))|(?:\\'([^\\']+)\\')|(?:\\\"([^\\\"]+)\\\")/gi;\n      const styleRegExp = /\\s*([^:]+):\\s*([^;]+);?/g;\n      const trimRightRegExp = /\\s+$/;\n      const encodingLookup = {};\n      let validStyles;\n      let invalidStyles;\n      const invisibleChar = zeroWidth;\n      if (schema) {\n        validStyles = schema.getValidStyles();\n        invalidStyles = schema.getInvalidStyles();\n      }\n      const encodingItems = (`\\\\\" \\\\' \\\\; \\\\: ; : ` + invisibleChar).split(' ');\n      for (let i = 0; i < encodingItems.length; i++) {\n        encodingLookup[encodingItems[i]] = invisibleChar + i;\n        encodingLookup[invisibleChar + i] = encodingItems[i];\n      }\n      const self = {\n        parse: css => {\n          const styles = {};\n          let isEncoded = false;\n          const urlConverter = settings.url_converter;\n          const urlConverterScope = settings.url_converter_scope || self;\n          const compress = (prefix, suffix, noJoin) => {\n            const top = styles[prefix + '-top' + suffix];\n            if (!top) {\n              return;\n            }\n            const right = styles[prefix + '-right' + suffix];\n            if (!right) {\n              return;\n            }\n            const bottom = styles[prefix + '-bottom' + suffix];\n            if (!bottom) {\n              return;\n            }\n            const left = styles[prefix + '-left' + suffix];\n            if (!left) {\n              return;\n            }\n            const box = [\n              top,\n              right,\n              bottom,\n              left\n            ];\n            let i = box.length - 1;\n            while (i--) {\n              if (box[i] !== box[i + 1]) {\n                break;\n              }\n            }\n            if (i > -1 && noJoin) {\n              return;\n            }\n            styles[prefix + suffix] = i === -1 ? box[0] : box.join(' ');\n            delete styles[prefix + '-top' + suffix];\n            delete styles[prefix + '-right' + suffix];\n            delete styles[prefix + '-bottom' + suffix];\n            delete styles[prefix + '-left' + suffix];\n          };\n          const canCompress = key => {\n            const value = styles[key];\n            if (!value) {\n              return;\n            }\n            const values = value.split(' ');\n            let i = values.length;\n            while (i--) {\n              if (values[i] !== values[0]) {\n                return false;\n              }\n            }\n            styles[key] = values[0];\n            return true;\n          };\n          const compress2 = (target, a, b, c) => {\n            if (!canCompress(a)) {\n              return;\n            }\n            if (!canCompress(b)) {\n              return;\n            }\n            if (!canCompress(c)) {\n              return;\n            }\n            styles[target] = styles[a] + ' ' + styles[b] + ' ' + styles[c];\n            delete styles[a];\n            delete styles[b];\n            delete styles[c];\n          };\n          const encode = str => {\n            isEncoded = true;\n            return encodingLookup[str];\n          };\n          const decode = (str, keepSlashes) => {\n            if (isEncoded) {\n              str = str.replace(/\\uFEFF[0-9]/g, str => {\n                return encodingLookup[str];\n              });\n            }\n            if (!keepSlashes) {\n              str = str.replace(/\\\\([\\'\\\";:])/g, '$1');\n            }\n            return str;\n          };\n          const decodeSingleHexSequence = escSeq => {\n            return String.fromCharCode(parseInt(escSeq.slice(1), 16));\n          };\n          const decodeHexSequences = value => {\n            return value.replace(/\\\\[0-9a-f]+/gi, decodeSingleHexSequence);\n          };\n          const processUrl = (match, url, url2, url3, str, str2) => {\n            str = str || str2;\n            if (str) {\n              str = decode(str);\n              return `'` + str.replace(/\\'/g, `\\\\'`) + `'`;\n            }\n            url = decode(url || url2 || url3 || '');\n            if (!settings.allow_script_urls) {\n              const scriptUrl = url.replace(/[\\s\\r\\n]+/g, '');\n              if (/(java|vb)script:/i.test(scriptUrl)) {\n                return '';\n              }\n              if (!settings.allow_svg_data_urls && /^data:image\\/svg/i.test(scriptUrl)) {\n                return '';\n              }\n            }\n            if (urlConverter) {\n              url = urlConverter.call(urlConverterScope, url, 'style');\n            }\n            return `url('` + url.replace(/\\'/g, `\\\\'`) + `')`;\n          };\n          if (css) {\n            css = css.replace(/[\\u0000-\\u001F]/g, '');\n            css = css.replace(/\\\\[\\\"\\';:\\uFEFF]/g, encode).replace(/\\\"[^\\\"]+\\\"|\\'[^\\']+\\'/g, str => {\n              return str.replace(/[;:]/g, encode);\n            });\n            let matches;\n            while (matches = styleRegExp.exec(css)) {\n              styleRegExp.lastIndex = matches.index + matches[0].length;\n              let name = matches[1].replace(trimRightRegExp, '').toLowerCase();\n              let value = matches[2].replace(trimRightRegExp, '');\n              if (name && value) {\n                name = decodeHexSequences(name);\n                value = decodeHexSequences(value);\n                if (name.indexOf(invisibleChar) !== -1 || name.indexOf('\"') !== -1) {\n                  continue;\n                }\n                if (!settings.allow_script_urls && (name === 'behavior' || /expression\\s*\\(|\\/\\*|\\*\\//.test(value))) {\n                  continue;\n                }\n                if (name === 'font-weight' && value === '700') {\n                  value = 'bold';\n                } else if (name === 'color' || name === 'background-color') {\n                  value = value.toLowerCase();\n                }\n                value = value.replace(urlOrStrRegExp, processUrl);\n                styles[name] = isEncoded ? decode(value, true) : value;\n              }\n            }\n            compress('border', '', true);\n            compress('border', '-width');\n            compress('border', '-color');\n            compress('border', '-style');\n            compress('padding', '');\n            compress('margin', '');\n            compress2('border', 'border-width', 'border-style', 'border-color');\n            if (styles.border === 'medium none') {\n              delete styles.border;\n            }\n            if (styles['border-image'] === 'none') {\n              delete styles['border-image'];\n            }\n          }\n          return styles;\n        },\n        serialize: (styles, elementName) => {\n          let css = '';\n          const serializeStyles = (elemName, validStyleList) => {\n            const styleList = validStyleList[elemName];\n            if (styleList) {\n              for (let i = 0, l = styleList.length; i < l; i++) {\n                const name = styleList[i];\n                const value = styles[name];\n                if (value) {\n                  css += (css.length > 0 ? ' ' : '') + name + ': ' + value + ';';\n                }\n              }\n            }\n          };\n          const isValid = (name, elemName) => {\n            if (!invalidStyles || !elemName) {\n              return true;\n            }\n            let styleMap = invalidStyles['*'];\n            if (styleMap && styleMap[name]) {\n              return false;\n            }\n            styleMap = invalidStyles[elemName];\n            return !(styleMap && styleMap[name]);\n          };\n          if (elementName && validStyles) {\n            serializeStyles('*', validStyles);\n            serializeStyles(elementName, validStyles);\n          } else {\n            each$d(styles, (value, name) => {\n              if (value && isValid(name, elementName)) {\n                css += (css.length > 0 ? ' ' : '') + name + ': ' + value + ';';\n              }\n            });\n          }\n          return css;\n        }\n      };\n      return self;\n    };\n\n    const deprecated = {\n      keyLocation: true,\n      layerX: true,\n      layerY: true,\n      returnValue: true,\n      webkitMovementX: true,\n      webkitMovementY: true,\n      keyIdentifier: true,\n      mozPressure: true\n    };\n    const isNativeEvent = event => event instanceof Event || isFunction(event.initEvent);\n    const hasIsDefaultPrevented = event => event.isDefaultPrevented === always || event.isDefaultPrevented === never;\n    const needsNormalizing = event => isNullable(event.preventDefault) || isNativeEvent(event);\n    const clone$3 = (originalEvent, data) => {\n      const event = data !== null && data !== void 0 ? data : {};\n      for (const name in originalEvent) {\n        if (!has$2(deprecated, name)) {\n          event[name] = originalEvent[name];\n        }\n      }\n      if (isNonNullable(originalEvent.composedPath)) {\n        event.composedPath = () => originalEvent.composedPath();\n      }\n      return event;\n    };\n    const normalize$3 = (type, originalEvent, fallbackTarget, data) => {\n      var _a;\n      const event = clone$3(originalEvent, data);\n      event.type = type;\n      if (isNullable(event.target)) {\n        event.target = (_a = event.srcElement) !== null && _a !== void 0 ? _a : fallbackTarget;\n      }\n      if (needsNormalizing(originalEvent)) {\n        event.preventDefault = () => {\n          event.defaultPrevented = true;\n          event.isDefaultPrevented = always;\n          if (isFunction(originalEvent.preventDefault)) {\n            originalEvent.preventDefault();\n          }\n        };\n        event.stopPropagation = () => {\n          event.cancelBubble = true;\n          event.isPropagationStopped = always;\n          if (isFunction(originalEvent.stopPropagation)) {\n            originalEvent.stopPropagation();\n          }\n        };\n        event.stopImmediatePropagation = () => {\n          event.isImmediatePropagationStopped = always;\n          event.stopPropagation();\n        };\n        if (!hasIsDefaultPrevented(event)) {\n          event.isDefaultPrevented = event.defaultPrevented === true ? always : never;\n          event.isPropagationStopped = event.cancelBubble === true ? always : never;\n          event.isImmediatePropagationStopped = never;\n        }\n      }\n      return event;\n    };\n\n    const eventExpandoPrefix = 'mce-data-';\n    const mouseEventRe = /^(?:mouse|contextmenu)|click/;\n    const addEvent = (target, name, callback, capture) => {\n      target.addEventListener(name, callback, capture || false);\n    };\n    const removeEvent = (target, name, callback, capture) => {\n      target.removeEventListener(name, callback, capture || false);\n    };\n    const isMouseEvent = event => isNonNullable(event) && mouseEventRe.test(event.type);\n    const fix = (originalEvent, data) => {\n      const event = normalize$3(originalEvent.type, originalEvent, document, data);\n      if (isMouseEvent(originalEvent) && isUndefined(originalEvent.pageX) && !isUndefined(originalEvent.clientX)) {\n        const eventDoc = event.target.ownerDocument || document;\n        const doc = eventDoc.documentElement;\n        const body = eventDoc.body;\n        const mouseEvent = event;\n        mouseEvent.pageX = originalEvent.clientX + (doc && doc.scrollLeft || body && body.scrollLeft || 0) - (doc && doc.clientLeft || body && body.clientLeft || 0);\n        mouseEvent.pageY = originalEvent.clientY + (doc && doc.scrollTop || body && body.scrollTop || 0) - (doc && doc.clientTop || body && body.clientTop || 0);\n      }\n      return event;\n    };\n    const bindOnReady = (win, callback, eventUtils) => {\n      const doc = win.document, event = { type: 'ready' };\n      if (eventUtils.domLoaded) {\n        callback(event);\n        return;\n      }\n      const isDocReady = () => {\n        return doc.readyState === 'complete' || doc.readyState === 'interactive' && doc.body;\n      };\n      const readyHandler = () => {\n        removeEvent(win, 'DOMContentLoaded', readyHandler);\n        removeEvent(win, 'load', readyHandler);\n        if (!eventUtils.domLoaded) {\n          eventUtils.domLoaded = true;\n          callback(event);\n        }\n        win = null;\n      };\n      if (isDocReady()) {\n        readyHandler();\n      } else {\n        addEvent(win, 'DOMContentLoaded', readyHandler);\n      }\n      if (!eventUtils.domLoaded) {\n        addEvent(win, 'load', readyHandler);\n      }\n    };\n    class EventUtils {\n      constructor() {\n        this.domLoaded = false;\n        this.events = {};\n        this.count = 1;\n        this.expando = eventExpandoPrefix + (+new Date()).toString(32);\n        this.hasFocusIn = 'onfocusin' in document.documentElement;\n        this.count = 1;\n      }\n      bind(target, names, callback, scope) {\n        const self = this;\n        let callbackList;\n        const win = window;\n        const defaultNativeHandler = evt => {\n          self.executeHandlers(fix(evt || win.event), id);\n        };\n        if (!target || isText$a(target) || isComment(target)) {\n          return callback;\n        }\n        let id;\n        if (!target[self.expando]) {\n          id = self.count++;\n          target[self.expando] = id;\n          self.events[id] = {};\n        } else {\n          id = target[self.expando];\n        }\n        scope = scope || target;\n        const namesList = names.split(' ');\n        let i = namesList.length;\n        while (i--) {\n          let name = namesList[i];\n          let nativeHandler = defaultNativeHandler;\n          let capture = false;\n          let fakeName = false;\n          if (name === 'DOMContentLoaded') {\n            name = 'ready';\n          }\n          if (self.domLoaded && name === 'ready' && target.readyState === 'complete') {\n            callback.call(scope, fix({ type: name }));\n            continue;\n          }\n          if (!self.hasFocusIn && (name === 'focusin' || name === 'focusout')) {\n            capture = true;\n            fakeName = name === 'focusin' ? 'focus' : 'blur';\n            nativeHandler = evt => {\n              const event = fix(evt || win.event);\n              event.type = event.type === 'focus' ? 'focusin' : 'focusout';\n              self.executeHandlers(event, id);\n            };\n          }\n          callbackList = self.events[id][name];\n          if (!callbackList) {\n            self.events[id][name] = callbackList = [{\n                func: callback,\n                scope\n              }];\n            callbackList.fakeName = fakeName;\n            callbackList.capture = capture;\n            callbackList.nativeHandler = nativeHandler;\n            if (name === 'ready') {\n              bindOnReady(target, nativeHandler, self);\n            } else {\n              addEvent(target, fakeName || name, nativeHandler, capture);\n            }\n          } else {\n            if (name === 'ready' && self.domLoaded) {\n              callback(fix({ type: name }));\n            } else {\n              callbackList.push({\n                func: callback,\n                scope\n              });\n            }\n          }\n        }\n        target = callbackList = null;\n        return callback;\n      }\n      unbind(target, names, callback) {\n        if (!target || isText$a(target) || isComment(target)) {\n          return this;\n        }\n        const id = target[this.expando];\n        if (id) {\n          let eventMap = this.events[id];\n          if (names) {\n            const namesList = names.split(' ');\n            let i = namesList.length;\n            while (i--) {\n              const name = namesList[i];\n              const callbackList = eventMap[name];\n              if (callbackList) {\n                if (callback) {\n                  let ci = callbackList.length;\n                  while (ci--) {\n                    if (callbackList[ci].func === callback) {\n                      const nativeHandler = callbackList.nativeHandler;\n                      const fakeName = callbackList.fakeName, capture = callbackList.capture;\n                      const newCallbackList = callbackList.slice(0, ci).concat(callbackList.slice(ci + 1));\n                      newCallbackList.nativeHandler = nativeHandler;\n                      newCallbackList.fakeName = fakeName;\n                      newCallbackList.capture = capture;\n                      eventMap[name] = newCallbackList;\n                    }\n                  }\n                }\n                if (!callback || callbackList.length === 0) {\n                  delete eventMap[name];\n                  removeEvent(target, callbackList.fakeName || name, callbackList.nativeHandler, callbackList.capture);\n                }\n              }\n            }\n          } else {\n            each$d(eventMap, (callbackList, name) => {\n              removeEvent(target, callbackList.fakeName || name, callbackList.nativeHandler, callbackList.capture);\n            });\n            eventMap = {};\n          }\n          for (const name in eventMap) {\n            if (has$2(eventMap, name)) {\n              return this;\n            }\n          }\n          delete this.events[id];\n          try {\n            delete target[this.expando];\n          } catch (ex) {\n            target[this.expando] = null;\n          }\n        }\n        return this;\n      }\n      fire(target, name, args) {\n        return this.dispatch(target, name, args);\n      }\n      dispatch(target, name, args) {\n        if (!target || isText$a(target) || isComment(target)) {\n          return this;\n        }\n        const event = fix({\n          type: name,\n          target\n        }, args);\n        do {\n          const id = target[this.expando];\n          if (id) {\n            this.executeHandlers(event, id);\n          }\n          target = target.parentNode || target.ownerDocument || target.defaultView || target.parentWindow;\n        } while (target && !event.isPropagationStopped());\n        return this;\n      }\n      clean(target) {\n        if (!target || isText$a(target) || isComment(target)) {\n          return this;\n        }\n        if (target[this.expando]) {\n          this.unbind(target);\n        }\n        if (!target.getElementsByTagName) {\n          target = target.document;\n        }\n        if (target && target.getElementsByTagName) {\n          this.unbind(target);\n          const children = target.getElementsByTagName('*');\n          let i = children.length;\n          while (i--) {\n            target = children[i];\n            if (target[this.expando]) {\n              this.unbind(target);\n            }\n          }\n        }\n        return this;\n      }\n      destroy() {\n        this.events = {};\n      }\n      cancel(e) {\n        if (e) {\n          e.preventDefault();\n          e.stopImmediatePropagation();\n        }\n        return false;\n      }\n      executeHandlers(evt, id) {\n        const container = this.events[id];\n        const callbackList = container && container[evt.type];\n        if (callbackList) {\n          for (let i = 0, l = callbackList.length; i < l; i++) {\n            const callback = callbackList[i];\n            if (callback && callback.func.call(callback.scope, evt) === false) {\n              evt.preventDefault();\n            }\n            if (evt.isImmediatePropagationStopped()) {\n              return;\n            }\n          }\n        }\n      }\n    }\n    EventUtils.Event = new EventUtils();\n\n    const each$a = Tools.each;\n    const grep = Tools.grep;\n    const internalStyleName = 'data-mce-style';\n    const numericalCssMap = Tools.makeMap('fill-opacity font-weight line-height opacity orphans widows z-index zoom', ' ');\n    const legacySetAttribute = (elm, name, value) => {\n      if (isNullable(value) || value === '') {\n        remove$b(elm, name);\n      } else {\n        set$2(elm, name, value);\n      }\n    };\n    const camelCaseToHyphens = name => name.replace(/[A-Z]/g, v => '-' + v.toLowerCase());\n    const findNodeIndex = (node, normalized) => {\n      let idx = 0;\n      if (node) {\n        for (let lastNodeType = node.nodeType, tempNode = node.previousSibling; tempNode; tempNode = tempNode.previousSibling) {\n          const nodeType = tempNode.nodeType;\n          if (normalized && isText$a(tempNode)) {\n            if (nodeType === lastNodeType || !tempNode.data.length) {\n              continue;\n            }\n          }\n          idx++;\n          lastNodeType = nodeType;\n        }\n      }\n      return idx;\n    };\n    const updateInternalStyleAttr = (styles, elm) => {\n      const rawValue = get$9(elm, 'style');\n      const value = styles.serialize(styles.parse(rawValue), name(elm));\n      legacySetAttribute(elm, internalStyleName, value);\n    };\n    const convertStyleToString = (cssValue, cssName) => {\n      if (isNumber(cssValue)) {\n        return has$2(numericalCssMap, cssName) ? cssValue + '' : cssValue + 'px';\n      } else {\n        return cssValue;\n      }\n    };\n    const applyStyle$1 = ($elm, cssName, cssValue) => {\n      const normalizedName = camelCaseToHyphens(cssName);\n      if (isNullable(cssValue) || cssValue === '') {\n        remove$7($elm, normalizedName);\n      } else {\n        set$1($elm, normalizedName, convertStyleToString(cssValue, normalizedName));\n      }\n    };\n    const setupAttrHooks = (styles, settings, getContext) => {\n      const keepValues = settings.keep_values;\n      const keepUrlHook = {\n        set: (elm, value, name) => {\n          const sugarElm = SugarElement.fromDom(elm);\n          if (isFunction(settings.url_converter) && isNonNullable(value)) {\n            value = settings.url_converter.call(settings.url_converter_scope || getContext(), String(value), name, elm);\n          }\n          const internalName = 'data-mce-' + name;\n          legacySetAttribute(sugarElm, internalName, value);\n          legacySetAttribute(sugarElm, name, value);\n        },\n        get: (elm, name) => {\n          const sugarElm = SugarElement.fromDom(elm);\n          return get$9(sugarElm, 'data-mce-' + name) || get$9(sugarElm, name);\n        }\n      };\n      const attrHooks = {\n        style: {\n          set: (elm, value) => {\n            const sugarElm = SugarElement.fromDom(elm);\n            if (keepValues) {\n              legacySetAttribute(sugarElm, internalStyleName, value);\n            }\n            remove$b(sugarElm, 'style');\n            if (isString(value)) {\n              setAll(sugarElm, styles.parse(value));\n            }\n          },\n          get: elm => {\n            const sugarElm = SugarElement.fromDom(elm);\n            const value = get$9(sugarElm, internalStyleName) || get$9(sugarElm, 'style');\n            return styles.serialize(styles.parse(value), name(sugarElm));\n          }\n        }\n      };\n      if (keepValues) {\n        attrHooks.href = attrHooks.src = keepUrlHook;\n      }\n      return attrHooks;\n    };\n    const DOMUtils = (doc, settings = {}) => {\n      const addedStyles = {};\n      const win = window;\n      const files = {};\n      let counter = 0;\n      const stdMode = true;\n      const boxModel = true;\n      const styleSheetLoader = instance.forElement(SugarElement.fromDom(doc), {\n        contentCssCors: settings.contentCssCors,\n        referrerPolicy: settings.referrerPolicy\n      });\n      const boundEvents = [];\n      const schema = settings.schema ? settings.schema : Schema({});\n      const styles = Styles({\n        url_converter: settings.url_converter,\n        url_converter_scope: settings.url_converter_scope\n      }, settings.schema);\n      const events = settings.ownEvents ? new EventUtils() : EventUtils.Event;\n      const blockElementsMap = schema.getBlockElements();\n      const isBlock = node => {\n        if (isString(node)) {\n          return has$2(blockElementsMap, node);\n        } else {\n          return isElement$6(node) && has$2(blockElementsMap, node.nodeName);\n        }\n      };\n      const get = elm => elm && doc && isString(elm) ? doc.getElementById(elm) : elm;\n      const _get = elm => {\n        const value = get(elm);\n        return isNonNullable(value) ? SugarElement.fromDom(value) : null;\n      };\n      const getAttrib = (elm, name, defaultVal = '') => {\n        let value;\n        const $elm = _get(elm);\n        if (isNonNullable($elm) && isElement$7($elm)) {\n          const hook = attrHooks[name];\n          if (hook && hook.get) {\n            value = hook.get($elm.dom, name);\n          } else {\n            value = get$9($elm, name);\n          }\n        }\n        return isNonNullable(value) ? value : defaultVal;\n      };\n      const getAttribs = elm => {\n        const node = get(elm);\n        return isNullable(node) ? [] : node.attributes;\n      };\n      const setAttrib = (elm, name, value) => {\n        run(elm, e => {\n          if (isElement$6(e)) {\n            const $elm = SugarElement.fromDom(e);\n            const val = value === '' ? null : value;\n            const originalValue = get$9($elm, name);\n            const hook = attrHooks[name];\n            if (hook && hook.set) {\n              hook.set($elm.dom, val, name);\n            } else {\n              legacySetAttribute($elm, name, val);\n            }\n            if (originalValue !== val && settings.onSetAttrib) {\n              settings.onSetAttrib({\n                attrElm: $elm.dom,\n                attrName: name,\n                attrValue: val\n              });\n            }\n          }\n        });\n      };\n      const clone = (node, deep) => {\n        return node.cloneNode(deep);\n      };\n      const getRoot = () => settings.root_element || doc.body;\n      const getViewPort = argWin => {\n        const vp = getBounds(argWin);\n        return {\n          x: vp.x,\n          y: vp.y,\n          w: vp.width,\n          h: vp.height\n        };\n      };\n      const getPos$1 = (elm, rootElm) => getPos(doc.body, get(elm), rootElm);\n      const setStyle = (elm, name, value) => {\n        run(elm, e => {\n          const $elm = SugarElement.fromDom(e);\n          applyStyle$1($elm, name, value);\n          if (settings.update_styles) {\n            updateInternalStyleAttr(styles, $elm);\n          }\n        });\n      };\n      const setStyles = (elm, stylesArg) => {\n        run(elm, e => {\n          const $elm = SugarElement.fromDom(e);\n          each$d(stylesArg, (v, n) => {\n            applyStyle$1($elm, n, v);\n          });\n          if (settings.update_styles) {\n            updateInternalStyleAttr(styles, $elm);\n          }\n        });\n      };\n      const getStyle = (elm, name, computed) => {\n        const $elm = get(elm);\n        if (isNullable($elm) || !isElement$6($elm)) {\n          return undefined;\n        }\n        if (computed) {\n          return get$7(SugarElement.fromDom($elm), camelCaseToHyphens(name));\n        } else {\n          name = name.replace(/-(\\D)/g, (a, b) => b.toUpperCase());\n          if (name === 'float') {\n            name = 'cssFloat';\n          }\n          return $elm.style ? $elm.style[name] : undefined;\n        }\n      };\n      const getSize = elm => {\n        const $elm = get(elm);\n        if (!$elm) {\n          return {\n            w: 0,\n            h: 0\n          };\n        }\n        let w = getStyle($elm, 'width');\n        let h = getStyle($elm, 'height');\n        if (!w || w.indexOf('px') === -1) {\n          w = '0';\n        }\n        if (!h || h.indexOf('px') === -1) {\n          h = '0';\n        }\n        return {\n          w: parseInt(w, 10) || $elm.offsetWidth || $elm.clientWidth,\n          h: parseInt(h, 10) || $elm.offsetHeight || $elm.clientHeight\n        };\n      };\n      const getRect = elm => {\n        const $elm = get(elm);\n        const pos = getPos$1($elm);\n        const size = getSize($elm);\n        return {\n          x: pos.x,\n          y: pos.y,\n          w: size.w,\n          h: size.h\n        };\n      };\n      const is = (elm, selector) => {\n        if (!elm) {\n          return false;\n        }\n        const elms = isArray$1(elm) ? elm : [elm];\n        return exists(elms, e => {\n          return is$1(SugarElement.fromDom(e), selector);\n        });\n      };\n      const getParents = (elm, selector, root, collect) => {\n        const result = [];\n        let node = get(elm);\n        collect = collect === undefined;\n        const resolvedRoot = root || (getRoot().nodeName !== 'BODY' ? getRoot().parentNode : null);\n        if (isString(selector)) {\n          if (selector === '*') {\n            selector = isElement$6;\n          } else {\n            const selectorVal = selector;\n            selector = node => is(node, selectorVal);\n          }\n        }\n        while (node) {\n          if (node === resolvedRoot || isNullable(node.nodeType) || isDocument$1(node) || isDocumentFragment(node)) {\n            break;\n          }\n          if (!selector || selector(node)) {\n            if (collect) {\n              result.push(node);\n            } else {\n              return [node];\n            }\n          }\n          node = node.parentNode;\n        }\n        return collect ? result : null;\n      };\n      const getParent = (node, selector, root) => {\n        const parents = getParents(node, selector, root, false);\n        return parents && parents.length > 0 ? parents[0] : null;\n      };\n      const _findSib = (node, selector, name) => {\n        let func = selector;\n        if (node) {\n          if (isString(selector)) {\n            func = node => {\n              return is(node, selector);\n            };\n          }\n          for (let tempNode = node[name]; tempNode; tempNode = tempNode[name]) {\n            if (isFunction(func) && func(tempNode)) {\n              return tempNode;\n            }\n          }\n        }\n        return null;\n      };\n      const getNext = (node, selector) => _findSib(node, selector, 'nextSibling');\n      const getPrev = (node, selector) => _findSib(node, selector, 'previousSibling');\n      const isParentNode = node => isFunction(node.querySelectorAll);\n      const select = (selector, scope) => {\n        var _a, _b;\n        const elm = (_b = (_a = get(scope)) !== null && _a !== void 0 ? _a : settings.root_element) !== null && _b !== void 0 ? _b : doc;\n        return isParentNode(elm) ? from(elm.querySelectorAll(selector)) : [];\n      };\n      const run = function (elm, func, scope) {\n        const context = scope !== null && scope !== void 0 ? scope : this;\n        if (isArray$1(elm)) {\n          const result = [];\n          each$a(elm, (e, i) => {\n            const node = get(e);\n            if (node) {\n              result.push(func.call(context, node, i));\n            }\n          });\n          return result;\n        } else {\n          const node = get(elm);\n          return !node ? false : func.call(context, node);\n        }\n      };\n      const setAttribs = (elm, attrs) => {\n        run(elm, $elm => {\n          each$d(attrs, (value, name) => {\n            setAttrib($elm, name, value);\n          });\n        });\n      };\n      const setHTML = (elm, html) => {\n        run(elm, e => {\n          const $elm = SugarElement.fromDom(e);\n          set($elm, html);\n        });\n      };\n      const add = (parentElm, name, attrs, html, create) => run(parentElm, parentElm => {\n        const newElm = isString(name) ? doc.createElement(name) : name;\n        if (isNonNullable(attrs)) {\n          setAttribs(newElm, attrs);\n        }\n        if (html) {\n          if (!isString(html) && html.nodeType) {\n            newElm.appendChild(html);\n          } else if (isString(html)) {\n            setHTML(newElm, html);\n          }\n        }\n        return !create ? parentElm.appendChild(newElm) : newElm;\n      });\n      const create = (name, attrs, html) => add(doc.createElement(name), name, attrs, html, true);\n      const decode = Entities.decode;\n      const encode = Entities.encodeAllRaw;\n      const createHTML = (name, attrs, html = '') => {\n        let outHtml = '<' + name;\n        for (const key in attrs) {\n          if (hasNonNullableKey(attrs, key)) {\n            outHtml += ' ' + key + '=\"' + encode(attrs[key]) + '\"';\n          }\n        }\n        if (isEmpty$3(html) && has$2(schema.getVoidElements(), name)) {\n          return outHtml + ' />';\n        } else {\n          return outHtml + '>' + html + '</' + name + '>';\n        }\n      };\n      const createFragment = html => {\n        const container = doc.createElement('div');\n        const frag = doc.createDocumentFragment();\n        frag.appendChild(container);\n        if (html) {\n          container.innerHTML = html;\n        }\n        let node;\n        while (node = container.firstChild) {\n          frag.appendChild(node);\n        }\n        frag.removeChild(container);\n        return frag;\n      };\n      const remove = (node, keepChildren) => {\n        return run(node, n => {\n          const $node = SugarElement.fromDom(n);\n          if (keepChildren) {\n            each$e(children($node), child => {\n              if (isText$b(child) && child.dom.length === 0) {\n                remove$6(child);\n              } else {\n                before$3($node, child);\n              }\n            });\n          }\n          remove$6($node);\n          return $node.dom;\n        });\n      };\n      const removeAllAttribs = e => run(e, e => {\n        const attrs = e.attributes;\n        for (let i = attrs.length - 1; i >= 0; i--) {\n          e.removeAttributeNode(attrs.item(i));\n        }\n      });\n      const parseStyle = cssText => styles.parse(cssText);\n      const serializeStyle = (stylesArg, name) => styles.serialize(stylesArg, name);\n      const addStyle = cssText => {\n        if (self !== DOMUtils.DOM && doc === document) {\n          if (addedStyles[cssText]) {\n            return;\n          }\n          addedStyles[cssText] = true;\n        }\n        let styleElm = doc.getElementById('mceDefaultStyles');\n        if (!styleElm) {\n          styleElm = doc.createElement('style');\n          styleElm.id = 'mceDefaultStyles';\n          styleElm.type = 'text/css';\n          const head = doc.head;\n          if (head.firstChild) {\n            head.insertBefore(styleElm, head.firstChild);\n          } else {\n            head.appendChild(styleElm);\n          }\n        }\n        if (styleElm.styleSheet) {\n          styleElm.styleSheet.cssText += cssText;\n        } else {\n          styleElm.appendChild(doc.createTextNode(cssText));\n        }\n      };\n      const loadCSS = urls => {\n        if (!urls) {\n          urls = '';\n        }\n        each$e(urls.split(','), url => {\n          files[url] = true;\n          styleSheetLoader.load(url).catch(noop);\n        });\n      };\n      const toggleClass = (elm, cls, state) => {\n        run(elm, e => {\n          if (isElement$6(e)) {\n            const $elm = SugarElement.fromDom(e);\n            const classes = cls.split(' ');\n            each$e(classes, c => {\n              if (isNonNullable(state)) {\n                const fn = state ? add$2 : remove$8;\n                fn($elm, c);\n              } else {\n                toggle$1($elm, c);\n              }\n            });\n          }\n        });\n      };\n      const addClass = (elm, cls) => {\n        toggleClass(elm, cls, true);\n      };\n      const removeClass = (elm, cls) => {\n        toggleClass(elm, cls, false);\n      };\n      const hasClass = (elm, cls) => {\n        const $elm = _get(elm);\n        const classes = cls.split(' ');\n        return isNonNullable($elm) && forall(classes, c => has($elm, c));\n      };\n      const show = elm => {\n        run(elm, e => remove$7(SugarElement.fromDom(e), 'display'));\n      };\n      const hide = elm => {\n        run(elm, e => set$1(SugarElement.fromDom(e), 'display', 'none'));\n      };\n      const isHidden = elm => {\n        const $elm = _get(elm);\n        return isNonNullable($elm) && is$2(getRaw$1($elm, 'display'), 'none');\n      };\n      const uniqueId = prefix => (!prefix ? 'mce_' : prefix) + counter++;\n      const getOuterHTML = elm => {\n        const $elm = _get(elm);\n        if (isNonNullable($elm)) {\n          return isElement$6($elm.dom) ? $elm.dom.outerHTML : getOuter($elm);\n        } else {\n          return '';\n        }\n      };\n      const setOuterHTML = (elm, html) => {\n        run(elm, $elm => {\n          if (isElement$6($elm)) {\n            $elm.outerHTML = html;\n          }\n        });\n      };\n      const insertAfter = (node, reference) => {\n        const referenceNode = get(reference);\n        return run(node, node => {\n          const parent = referenceNode === null || referenceNode === void 0 ? void 0 : referenceNode.parentNode;\n          const nextSibling = referenceNode === null || referenceNode === void 0 ? void 0 : referenceNode.nextSibling;\n          if (parent) {\n            if (nextSibling) {\n              parent.insertBefore(node, nextSibling);\n            } else {\n              parent.appendChild(node);\n            }\n          }\n          return node;\n        });\n      };\n      const replace = (newElm, oldElm, keepChildren) => run(oldElm, elm => {\n        var _a;\n        const replacee = isArray$1(oldElm) ? newElm.cloneNode(true) : newElm;\n        if (keepChildren) {\n          each$a(grep(elm.childNodes), node => {\n            replacee.appendChild(node);\n          });\n        }\n        (_a = elm.parentNode) === null || _a === void 0 ? void 0 : _a.replaceChild(replacee, elm);\n        return elm;\n      });\n      const rename = (elm, name) => {\n        if (elm.nodeName !== name.toUpperCase()) {\n          const newElm = create(name);\n          each$a(getAttribs(elm), attrNode => {\n            setAttrib(newElm, attrNode.nodeName, getAttrib(elm, attrNode.nodeName));\n          });\n          replace(newElm, elm, true);\n          return newElm;\n        } else {\n          return elm;\n        }\n      };\n      const findCommonAncestor = (a, b) => {\n        let ps = a;\n        while (ps) {\n          let pe = b;\n          while (pe && ps !== pe) {\n            pe = pe.parentNode;\n          }\n          if (ps === pe) {\n            break;\n          }\n          ps = ps.parentNode;\n        }\n        if (!ps && a.ownerDocument) {\n          return a.ownerDocument.documentElement;\n        } else {\n          return ps;\n        }\n      };\n      const isNonEmptyElement = node => {\n        if (isElement$6(node)) {\n          const isNamedAnchor = node.nodeName.toLowerCase() === 'a' && !getAttrib(node, 'href') && getAttrib(node, 'id');\n          if (getAttrib(node, 'name') || getAttrib(node, 'data-mce-bookmark') || isNamedAnchor) {\n            return true;\n          }\n        }\n        return false;\n      };\n      const isEmpty = (node, elements) => {\n        let brCount = 0;\n        if (isNonEmptyElement(node)) {\n          return false;\n        }\n        const firstChild = node.firstChild;\n        if (firstChild) {\n          const walker = new DomTreeWalker(firstChild, node);\n          const whitespaceElements = schema ? schema.getWhitespaceElements() : {};\n          const nonEmptyElements = elements || (schema ? schema.getNonEmptyElements() : null);\n          let tempNode = firstChild;\n          do {\n            if (isElement$6(tempNode)) {\n              const bogusVal = tempNode.getAttribute('data-mce-bogus');\n              if (bogusVal) {\n                tempNode = walker.next(bogusVal === 'all');\n                continue;\n              }\n              const name = tempNode.nodeName.toLowerCase();\n              if (nonEmptyElements && nonEmptyElements[name]) {\n                if (name === 'br') {\n                  brCount++;\n                  tempNode = walker.next();\n                  continue;\n                }\n                return false;\n              }\n              if (isNonEmptyElement(tempNode)) {\n                return false;\n              }\n            }\n            if (isComment(tempNode)) {\n              return false;\n            }\n            if (isText$a(tempNode) && !isWhitespaceText(tempNode.data)) {\n              return false;\n            }\n            if (isText$a(tempNode) && tempNode.parentNode && whitespaceElements[tempNode.parentNode.nodeName] && isWhitespaceText(tempNode.data)) {\n              return false;\n            }\n            tempNode = walker.next();\n          } while (tempNode);\n        }\n        return brCount <= 1;\n      };\n      const createRng = () => doc.createRange();\n      const split = (parentElm, splitElm, replacementElm) => {\n        let range = createRng();\n        let beforeFragment;\n        let afterFragment;\n        if (parentElm && splitElm && parentElm.parentNode && splitElm.parentNode) {\n          const parentNode = parentElm.parentNode;\n          range.setStart(parentNode, findNodeIndex(parentElm));\n          range.setEnd(splitElm.parentNode, findNodeIndex(splitElm));\n          beforeFragment = range.extractContents();\n          range = createRng();\n          range.setStart(splitElm.parentNode, findNodeIndex(splitElm) + 1);\n          range.setEnd(parentNode, findNodeIndex(parentElm) + 1);\n          afterFragment = range.extractContents();\n          parentNode.insertBefore(trimNode(self, beforeFragment), parentElm);\n          if (replacementElm) {\n            parentNode.insertBefore(replacementElm, parentElm);\n          } else {\n            parentNode.insertBefore(splitElm, parentElm);\n          }\n          parentNode.insertBefore(trimNode(self, afterFragment), parentElm);\n          remove(parentElm);\n          return replacementElm || splitElm;\n        } else {\n          return undefined;\n        }\n      };\n      const bind = (target, name, func, scope) => {\n        if (isArray$1(target)) {\n          let i = target.length;\n          const rv = [];\n          while (i--) {\n            rv[i] = bind(target[i], name, func, scope);\n          }\n          return rv;\n        } else {\n          if (settings.collect && (target === doc || target === win)) {\n            boundEvents.push([\n              target,\n              name,\n              func,\n              scope\n            ]);\n          }\n          return events.bind(target, name, func, scope || self);\n        }\n      };\n      const unbind = (target, name, func) => {\n        if (isArray$1(target)) {\n          let i = target.length;\n          const rv = [];\n          while (i--) {\n            rv[i] = unbind(target[i], name, func);\n          }\n          return rv;\n        } else {\n          if (boundEvents.length > 0 && (target === doc || target === win)) {\n            let i = boundEvents.length;\n            while (i--) {\n              const [boundTarget, boundName, boundFunc] = boundEvents[i];\n              if (target === boundTarget && (!name || name === boundName) && (!func || func === boundFunc)) {\n                events.unbind(boundTarget, boundName, boundFunc);\n              }\n            }\n          }\n          return events.unbind(target, name, func);\n        }\n      };\n      const dispatch = (target, name, evt) => events.dispatch(target, name, evt);\n      const fire = (target, name, evt) => events.dispatch(target, name, evt);\n      const getContentEditable = node => {\n        if (node && isElement$6(node)) {\n          const contentEditable = node.getAttribute('data-mce-contenteditable');\n          if (contentEditable && contentEditable !== 'inherit') {\n            return contentEditable;\n          }\n          return node.contentEditable !== 'inherit' ? node.contentEditable : null;\n        } else {\n          return null;\n        }\n      };\n      const getContentEditableParent = node => {\n        const root = getRoot();\n        let state = null;\n        for (let tempNode = node; tempNode && tempNode !== root; tempNode = tempNode.parentNode) {\n          state = getContentEditable(tempNode);\n          if (state !== null) {\n            break;\n          }\n        }\n        return state;\n      };\n      const destroy = () => {\n        if (boundEvents.length > 0) {\n          let i = boundEvents.length;\n          while (i--) {\n            const [boundTarget, boundName, boundFunc] = boundEvents[i];\n            events.unbind(boundTarget, boundName, boundFunc);\n          }\n        }\n        each$d(files, (_, url) => {\n          styleSheetLoader.unload(url);\n          delete files[url];\n        });\n      };\n      const isChildOf = (node, parent) => {\n        return node === parent || parent.contains(node);\n      };\n      const dumpRng = r => 'startContainer: ' + r.startContainer.nodeName + ', startOffset: ' + r.startOffset + ', endContainer: ' + r.endContainer.nodeName + ', endOffset: ' + r.endOffset;\n      const self = {\n        doc,\n        settings,\n        win,\n        files,\n        stdMode,\n        boxModel,\n        styleSheetLoader,\n        boundEvents,\n        styles,\n        schema,\n        events,\n        isBlock: isBlock,\n        root: null,\n        clone,\n        getRoot,\n        getViewPort,\n        getRect,\n        getSize,\n        getParent,\n        getParents: getParents,\n        get,\n        getNext,\n        getPrev,\n        select,\n        is,\n        add,\n        create,\n        createHTML,\n        createFragment,\n        remove,\n        setStyle,\n        getStyle: getStyle,\n        setStyles,\n        removeAllAttribs,\n        setAttrib,\n        setAttribs,\n        getAttrib,\n        getPos: getPos$1,\n        parseStyle,\n        serializeStyle,\n        addStyle,\n        loadCSS,\n        addClass,\n        removeClass,\n        hasClass,\n        toggleClass,\n        show,\n        hide,\n        isHidden,\n        uniqueId,\n        setHTML,\n        getOuterHTML,\n        setOuterHTML,\n        decode,\n        encode,\n        insertAfter,\n        replace,\n        rename,\n        findCommonAncestor,\n        run,\n        getAttribs,\n        isEmpty,\n        createRng,\n        nodeIndex: findNodeIndex,\n        split,\n        bind: bind,\n        unbind: unbind,\n        fire,\n        dispatch,\n        getContentEditable,\n        getContentEditableParent,\n        destroy,\n        isChildOf,\n        dumpRng\n      };\n      const attrHooks = setupAttrHooks(styles, settings, constant(self));\n      return self;\n    };\n    DOMUtils.DOM = DOMUtils(document);\n    DOMUtils.nodeIndex = findNodeIndex;\n\n    const DOM$b = DOMUtils.DOM;\n    const QUEUED = 0;\n    const LOADING = 1;\n    const LOADED = 2;\n    const FAILED = 3;\n    class ScriptLoader {\n      constructor(settings = {}) {\n        this.states = {};\n        this.queue = [];\n        this.scriptLoadedCallbacks = {};\n        this.queueLoadedCallbacks = [];\n        this.loading = false;\n        this.settings = settings;\n      }\n      _setReferrerPolicy(referrerPolicy) {\n        this.settings.referrerPolicy = referrerPolicy;\n      }\n      loadScript(url) {\n        return new Promise((resolve, reject) => {\n          const dom = DOM$b;\n          let elm;\n          const cleanup = () => {\n            dom.remove(id);\n            if (elm) {\n              elm.onerror = elm.onload = elm = null;\n            }\n          };\n          const done = () => {\n            cleanup();\n            resolve();\n          };\n          const error = () => {\n            cleanup();\n            reject('Failed to load script: ' + url);\n          };\n          const id = dom.uniqueId();\n          elm = document.createElement('script');\n          elm.id = id;\n          elm.type = 'text/javascript';\n          elm.src = Tools._addCacheSuffix(url);\n          if (this.settings.referrerPolicy) {\n            dom.setAttrib(elm, 'referrerpolicy', this.settings.referrerPolicy);\n          }\n          elm.onload = done;\n          elm.onerror = error;\n          (document.getElementsByTagName('head')[0] || document.body).appendChild(elm);\n        });\n      }\n      isDone(url) {\n        return this.states[url] === LOADED;\n      }\n      markDone(url) {\n        this.states[url] = LOADED;\n      }\n      add(url) {\n        const self = this;\n        self.queue.push(url);\n        const state = self.states[url];\n        if (state === undefined) {\n          self.states[url] = QUEUED;\n        }\n        return new Promise((resolve, reject) => {\n          if (!self.scriptLoadedCallbacks[url]) {\n            self.scriptLoadedCallbacks[url] = [];\n          }\n          self.scriptLoadedCallbacks[url].push({\n            resolve,\n            reject\n          });\n        });\n      }\n      load(url) {\n        return this.add(url);\n      }\n      remove(url) {\n        delete this.states[url];\n        delete this.scriptLoadedCallbacks[url];\n      }\n      loadQueue() {\n        const queue = this.queue;\n        this.queue = [];\n        return this.loadScripts(queue);\n      }\n      loadScripts(scripts) {\n        const self = this;\n        const execCallbacks = (name, url) => {\n          get$a(self.scriptLoadedCallbacks, url).each(callbacks => {\n            each$e(callbacks, callback => callback[name](url));\n          });\n          delete self.scriptLoadedCallbacks[url];\n        };\n        const processResults = results => {\n          const failures = filter$5(results, result => result.status === 'rejected');\n          if (failures.length > 0) {\n            return Promise.reject(bind$3(failures, ({reason}) => isArray$1(reason) ? reason : [reason]));\n          } else {\n            return Promise.resolve();\n          }\n        };\n        const load = urls => Promise.allSettled(map$3(urls, url => {\n          if (self.states[url] === LOADED) {\n            execCallbacks('resolve', url);\n            return Promise.resolve();\n          } else if (self.states[url] === FAILED) {\n            execCallbacks('reject', url);\n            return Promise.reject(url);\n          } else {\n            self.states[url] = LOADING;\n            return self.loadScript(url).then(() => {\n              self.states[url] = LOADED;\n              execCallbacks('resolve', url);\n              const queue = self.queue;\n              if (queue.length > 0) {\n                self.queue = [];\n                return load(queue).then(processResults);\n              } else {\n                return Promise.resolve();\n              }\n            }, () => {\n              self.states[url] = FAILED;\n              execCallbacks('reject', url);\n              return Promise.reject(url);\n            });\n          }\n        }));\n        const processQueue = urls => {\n          self.loading = true;\n          return load(urls).then(results => {\n            self.loading = false;\n            const nextQueuedItem = self.queueLoadedCallbacks.shift();\n            Optional.from(nextQueuedItem).each(call);\n            return processResults(results);\n          });\n        };\n        const uniqueScripts = stringArray(scripts);\n        if (self.loading) {\n          return new Promise((resolve, reject) => {\n            self.queueLoadedCallbacks.push(() => processQueue(uniqueScripts).then(resolve, reject));\n          });\n        } else {\n          return processQueue(uniqueScripts);\n        }\n      }\n    }\n    ScriptLoader.ScriptLoader = new ScriptLoader();\n\n    const Cell = initial => {\n      let value = initial;\n      const get = () => {\n        return value;\n      };\n      const set = v => {\n        value = v;\n      };\n      return {\n        get,\n        set\n      };\n    };\n\n    const isRaw = str => isObject(str) && has$2(str, 'raw');\n    const isTokenised = str => isArray$1(str) && str.length > 1;\n    const data = {};\n    const currentCode = Cell('en');\n    const getLanguageData = () => get$a(data, currentCode.get());\n    const getData$1 = () => map$2(data, value => ({ ...value }));\n    const setCode = newCode => {\n      if (newCode) {\n        currentCode.set(newCode);\n      }\n    };\n    const getCode = () => currentCode.get();\n    const add$1 = (code, items) => {\n      let langData = data[code];\n      if (!langData) {\n        data[code] = langData = {};\n      }\n      each$d(items, (translation, name) => {\n        langData[name.toLowerCase()] = translation;\n      });\n    };\n    const translate = text => {\n      const langData = getLanguageData().getOr({});\n      const toString = obj => {\n        if (isFunction(obj)) {\n          return Object.prototype.toString.call(obj);\n        }\n        return !isEmpty(obj) ? '' + obj : '';\n      };\n      const isEmpty = text => text === '' || text === null || text === undefined;\n      const getLangData = text => {\n        const textstr = toString(text);\n        return get$a(langData, textstr.toLowerCase()).map(toString).getOr(textstr);\n      };\n      const removeContext = str => str.replace(/{context:\\w+}$/, '');\n      if (isEmpty(text)) {\n        return '';\n      }\n      if (isRaw(text)) {\n        return toString(text.raw);\n      }\n      if (isTokenised(text)) {\n        const values = text.slice(1);\n        const substitued = getLangData(text[0]).replace(/\\{([0-9]+)\\}/g, ($1, $2) => has$2(values, $2) ? toString(values[$2]) : $1);\n        return removeContext(substitued);\n      }\n      return removeContext(getLangData(text));\n    };\n    const isRtl$1 = () => getLanguageData().bind(items => get$a(items, '_dir')).exists(dir => dir === 'rtl');\n    const hasCode = code => has$2(data, code);\n    const I18n = {\n      getData: getData$1,\n      setCode,\n      getCode,\n      add: add$1,\n      translate,\n      isRtl: isRtl$1,\n      hasCode\n    };\n\n    const AddOnManager = () => {\n      const items = [];\n      const urls = {};\n      const lookup = {};\n      const _listeners = [];\n      const runListeners = (name, state) => {\n        const matchedListeners = filter$5(_listeners, listener => listener.name === name && listener.state === state);\n        each$e(matchedListeners, listener => listener.resolve());\n      };\n      const isLoaded = name => has$2(urls, name);\n      const isAdded = name => has$2(lookup, name);\n      const get = name => {\n        if (lookup[name]) {\n          return lookup[name].instance;\n        }\n        return undefined;\n      };\n      const loadLanguagePack = (name, languages) => {\n        const language = I18n.getCode();\n        const wrappedLanguages = ',' + (languages || '') + ',';\n        if (!language || languages && wrappedLanguages.indexOf(',' + language + ',') === -1) {\n          return;\n        }\n        ScriptLoader.ScriptLoader.add(urls[name] + '/langs/' + language + '.js');\n      };\n      const requireLangPack = (name, languages) => {\n        if (AddOnManager.languageLoad !== false) {\n          if (isLoaded(name)) {\n            loadLanguagePack(name, languages);\n          } else {\n            waitFor(name, 'loaded').then(() => loadLanguagePack(name, languages));\n          }\n        }\n      };\n      const add = (id, addOn) => {\n        items.push(addOn);\n        lookup[id] = { instance: addOn };\n        runListeners(id, 'added');\n        return addOn;\n      };\n      const remove = name => {\n        delete urls[name];\n        delete lookup[name];\n      };\n      const createUrl = (baseUrl, dep) => {\n        if (isString(dep)) {\n          return isString(baseUrl) ? {\n            prefix: '',\n            resource: dep,\n            suffix: ''\n          } : {\n            prefix: baseUrl.prefix,\n            resource: dep,\n            suffix: baseUrl.suffix\n          };\n        } else {\n          return dep;\n        }\n      };\n      const load = (name, addOnUrl) => {\n        if (urls[name]) {\n          return Promise.resolve();\n        }\n        let urlString = isString(addOnUrl) ? addOnUrl : addOnUrl.prefix + addOnUrl.resource + addOnUrl.suffix;\n        if (urlString.indexOf('/') !== 0 && urlString.indexOf('://') === -1) {\n          urlString = AddOnManager.baseURL + '/' + urlString;\n        }\n        urls[name] = urlString.substring(0, urlString.lastIndexOf('/'));\n        const done = () => {\n          runListeners(name, 'loaded');\n          return Promise.resolve();\n        };\n        if (lookup[name]) {\n          return done();\n        } else {\n          return ScriptLoader.ScriptLoader.add(urlString).then(done);\n        }\n      };\n      const waitFor = (name, state = 'added') => {\n        if (state === 'added' && isAdded(name)) {\n          return Promise.resolve();\n        } else if (state === 'loaded' && isLoaded(name)) {\n          return Promise.resolve();\n        } else {\n          return new Promise(resolve => {\n            _listeners.push({\n              name,\n              state,\n              resolve\n            });\n          });\n        }\n      };\n      return {\n        items,\n        urls,\n        lookup,\n        get,\n        requireLangPack,\n        add,\n        remove,\n        createUrl,\n        load,\n        waitFor\n      };\n    };\n    AddOnManager.languageLoad = true;\n    AddOnManager.baseURL = '';\n    AddOnManager.PluginManager = AddOnManager();\n    AddOnManager.ThemeManager = AddOnManager();\n    AddOnManager.ModelManager = AddOnManager();\n\n    const singleton = doRevoke => {\n      const subject = Cell(Optional.none());\n      const revoke = () => subject.get().each(doRevoke);\n      const clear = () => {\n        revoke();\n        subject.set(Optional.none());\n      };\n      const isSet = () => subject.get().isSome();\n      const get = () => subject.get();\n      const set = s => {\n        revoke();\n        subject.set(Optional.some(s));\n      };\n      return {\n        clear,\n        isSet,\n        get,\n        set\n      };\n    };\n    const repeatable = delay => {\n      const intervalId = Cell(Optional.none());\n      const revoke = () => intervalId.get().each(id => clearInterval(id));\n      const clear = () => {\n        revoke();\n        intervalId.set(Optional.none());\n      };\n      const isSet = () => intervalId.get().isSome();\n      const get = () => intervalId.get();\n      const set = functionToRepeat => {\n        revoke();\n        intervalId.set(Optional.some(setInterval(functionToRepeat, delay)));\n      };\n      return {\n        clear,\n        isSet,\n        get,\n        set\n      };\n    };\n    const value$2 = () => {\n      const subject = singleton(noop);\n      const on = f => subject.get().each(f);\n      return {\n        ...subject,\n        on\n      };\n    };\n\n    const first$1 = (fn, rate) => {\n      let timer = null;\n      const cancel = () => {\n        if (!isNull(timer)) {\n          clearTimeout(timer);\n          timer = null;\n        }\n      };\n      const throttle = (...args) => {\n        if (isNull(timer)) {\n          timer = setTimeout(() => {\n            timer = null;\n            fn.apply(null, args);\n          }, rate);\n        }\n      };\n      return {\n        cancel,\n        throttle\n      };\n    };\n    const last$1 = (fn, rate) => {\n      let timer = null;\n      const cancel = () => {\n        if (!isNull(timer)) {\n          clearTimeout(timer);\n          timer = null;\n        }\n      };\n      const throttle = (...args) => {\n        cancel();\n        timer = setTimeout(() => {\n          timer = null;\n          fn.apply(null, args);\n        }, rate);\n      };\n      return {\n        cancel,\n        throttle\n      };\n    };\n\n    const annotation = constant('mce-annotation');\n    const dataAnnotation = constant('data-mce-annotation');\n    const dataAnnotationId = constant('data-mce-annotation-uid');\n    const dataAnnotationActive = constant('data-mce-annotation-active');\n    const dataAnnotationClasses = constant('data-mce-annotation-classes');\n    const dataAnnotationAttributes = constant('data-mce-annotation-attrs');\n\n    const isRoot$1 = root => node => eq(node, root);\n    const identify = (editor, annotationName) => {\n      const rng = editor.selection.getRng();\n      const start = SugarElement.fromDom(rng.startContainer);\n      const root = SugarElement.fromDom(editor.getBody());\n      const selector = annotationName.fold(() => '.' + annotation(), an => `[${ dataAnnotation() }=\"${ an }\"]`);\n      const newStart = child$1(start, rng.startOffset).getOr(start);\n      const closest = closest$3(newStart, selector, isRoot$1(root));\n      return closest.bind(c => getOpt(c, `${ dataAnnotationId() }`).bind(uid => getOpt(c, `${ dataAnnotation() }`).map(name => {\n        const elements = findMarkers(editor, uid);\n        return {\n          uid,\n          name,\n          elements\n        };\n      })));\n    };\n    const isAnnotation = elem => isElement$7(elem) && has(elem, annotation());\n    const isBogusElement = (elem, root) => has$1(elem, 'data-mce-bogus') || ancestor$1(elem, '[data-mce-bogus=\"all\"]', isRoot$1(root));\n    const findMarkers = (editor, uid) => {\n      const body = SugarElement.fromDom(editor.getBody());\n      const descendants$1 = descendants(body, `[${ dataAnnotationId() }=\"${ uid }\"]`);\n      return filter$5(descendants$1, descendant => !isBogusElement(descendant, body));\n    };\n    const findAll = (editor, name) => {\n      const body = SugarElement.fromDom(editor.getBody());\n      const markers = descendants(body, `[${ dataAnnotation() }=\"${ name }\"]`);\n      const directory = {};\n      each$e(markers, m => {\n        if (!isBogusElement(m, body)) {\n          const uid = get$9(m, dataAnnotationId());\n          const nodesAlready = get$a(directory, uid).getOr([]);\n          directory[uid] = nodesAlready.concat([m]);\n        }\n      });\n      return directory;\n    };\n\n    const setup$x = (editor, registry) => {\n      const changeCallbacks = Cell({});\n      const initData = () => ({\n        listeners: [],\n        previous: value$2()\n      });\n      const withCallbacks = (name, f) => {\n        updateCallbacks(name, data => {\n          f(data);\n          return data;\n        });\n      };\n      const updateCallbacks = (name, f) => {\n        const callbackMap = changeCallbacks.get();\n        const data = get$a(callbackMap, name).getOrThunk(initData);\n        const outputData = f(data);\n        callbackMap[name] = outputData;\n        changeCallbacks.set(callbackMap);\n      };\n      const fireCallbacks = (name, uid, elements) => {\n        withCallbacks(name, data => {\n          each$e(data.listeners, f => f(true, name, {\n            uid,\n            nodes: map$3(elements, elem => elem.dom)\n          }));\n        });\n      };\n      const fireNoAnnotation = name => {\n        withCallbacks(name, data => {\n          each$e(data.listeners, f => f(false, name));\n        });\n      };\n      const toggleActiveAttr = (uid, state) => {\n        each$e(findMarkers(editor, uid), elem => {\n          if (state) {\n            set$2(elem, dataAnnotationActive(), 'true');\n          } else {\n            remove$b(elem, dataAnnotationActive());\n          }\n        });\n      };\n      const onNodeChange = last$1(() => {\n        const annotations = sort(registry.getNames());\n        each$e(annotations, name => {\n          updateCallbacks(name, data => {\n            const prev = data.previous.get();\n            identify(editor, Optional.some(name)).fold(() => {\n              prev.each(uid => {\n                fireNoAnnotation(name);\n                data.previous.clear();\n                toggleActiveAttr(uid, false);\n              });\n            }, ({uid, name, elements}) => {\n              if (!is$2(prev, uid)) {\n                prev.each(uid => toggleActiveAttr(uid, false));\n                fireCallbacks(name, uid, elements);\n                data.previous.set(uid);\n                toggleActiveAttr(uid, true);\n              }\n            });\n            return {\n              previous: data.previous,\n              listeners: data.listeners\n            };\n          });\n        });\n      }, 30);\n      editor.on('remove', () => {\n        onNodeChange.cancel();\n      });\n      editor.on('NodeChange', () => {\n        onNodeChange.throttle();\n      });\n      const addListener = (name, f) => {\n        updateCallbacks(name, data => ({\n          previous: data.previous,\n          listeners: data.listeners.concat([f])\n        }));\n      };\n      return { addListener };\n    };\n\n    const setup$w = (editor, registry) => {\n      const dataAnnotation$1 = dataAnnotation();\n      const identifyParserNode = node => Optional.from(node.attr(dataAnnotation$1)).bind(registry.lookup);\n      const removeDirectAnnotation = node => {\n        var _a, _b;\n        node.attr(dataAnnotationId(), null);\n        node.attr(dataAnnotation(), null);\n        node.attr(dataAnnotationActive(), null);\n        const customAttrNames = Optional.from(node.attr(dataAnnotationAttributes())).map(names => names.split(',')).getOr([]);\n        const customClasses = Optional.from(node.attr(dataAnnotationClasses())).map(names => names.split(',')).getOr([]);\n        each$e(customAttrNames, name => node.attr(name, null));\n        const classList = (_b = (_a = node.attr('class')) === null || _a === void 0 ? void 0 : _a.split(' ')) !== null && _b !== void 0 ? _b : [];\n        const newClassList = difference(classList, [annotation()].concat(customClasses));\n        node.attr('class', newClassList.length > 0 ? newClassList.join(' ') : null);\n        node.attr(dataAnnotationClasses(), null);\n        node.attr(dataAnnotationAttributes(), null);\n      };\n      editor.serializer.addTempAttr(dataAnnotationActive());\n      editor.serializer.addAttributeFilter(dataAnnotation$1, nodes => {\n        for (const node of nodes) {\n          identifyParserNode(node).each(settings => {\n            if (settings.persistent === false) {\n              if (node.name === 'span') {\n                node.unwrap();\n              } else {\n                removeDirectAnnotation(node);\n              }\n            }\n          });\n        }\n      });\n    };\n\n    const create$c = () => {\n      const annotations = {};\n      const register = (name, settings) => {\n        annotations[name] = {\n          name,\n          settings\n        };\n      };\n      const lookup = name => get$a(annotations, name).map(a => a.settings);\n      const getNames = () => keys(annotations);\n      return {\n        register,\n        lookup,\n        getNames\n      };\n    };\n\n    let unique = 0;\n    const generate$1 = prefix => {\n      const date = new Date();\n      const time = date.getTime();\n      const random = Math.floor(Math.random() * 1000000000);\n      unique++;\n      return prefix + '_' + random + unique + String(time);\n    };\n\n    const add = (element, classes) => {\n      each$e(classes, x => {\n        add$2(element, x);\n      });\n    };\n    const remove$5 = (element, classes) => {\n      each$e(classes, x => {\n        remove$8(element, x);\n      });\n    };\n\n    const clone$2 = (original, isDeep) => SugarElement.fromDom(original.dom.cloneNode(isDeep));\n    const shallow$1 = original => clone$2(original, false);\n    const deep$1 = original => clone$2(original, true);\n    const shallowAs = (original, tag) => {\n      const nu = SugarElement.fromTag(tag);\n      const attributes = clone$4(original);\n      setAll$1(nu, attributes);\n      return nu;\n    };\n    const mutate = (original, tag) => {\n      const nu = shallowAs(original, tag);\n      after$4(original, nu);\n      const children$1 = children(original);\n      append(nu, children$1);\n      remove$6(original);\n      return nu;\n    };\n\n    const TextWalker = (startNode, rootNode, isBoundary = never) => {\n      const walker = new DomTreeWalker(startNode, rootNode);\n      const walk = direction => {\n        let next;\n        do {\n          next = walker[direction]();\n        } while (next && !isText$a(next) && !isBoundary(next));\n        return Optional.from(next).filter(isText$a);\n      };\n      return {\n        current: () => Optional.from(walker.current()).filter(isText$a),\n        next: () => walk('next'),\n        prev: () => walk('prev'),\n        prev2: () => walk('prev2')\n      };\n    };\n\n    const TextSeeker = (dom, isBoundary) => {\n      const isBlockBoundary = isBoundary ? isBoundary : node => dom.isBlock(node) || isBr$6(node) || isContentEditableFalse$a(node);\n      const walk = (node, offset, walker, process) => {\n        if (isText$a(node)) {\n          const newOffset = process(node, offset, node.data);\n          if (newOffset !== -1) {\n            return Optional.some({\n              container: node,\n              offset: newOffset\n            });\n          }\n        }\n        return walker().bind(next => walk(next.container, next.offset, walker, process));\n      };\n      const backwards = (node, offset, process, root) => {\n        const walker = TextWalker(node, root !== null && root !== void 0 ? root : dom.getRoot(), isBlockBoundary);\n        return walk(node, offset, () => walker.prev().map(prev => ({\n          container: prev,\n          offset: prev.length\n        })), process).getOrNull();\n      };\n      const forwards = (node, offset, process, root) => {\n        const walker = TextWalker(node, root !== null && root !== void 0 ? root : dom.getRoot(), isBlockBoundary);\n        return walk(node, offset, () => walker.next().map(next => ({\n          container: next,\n          offset: 0\n        })), process).getOrNull();\n      };\n      return {\n        backwards,\n        forwards\n      };\n    };\n\n    const round$2 = Math.round;\n    const clone$1 = rect => {\n      if (!rect) {\n        return {\n          left: 0,\n          top: 0,\n          bottom: 0,\n          right: 0,\n          width: 0,\n          height: 0\n        };\n      }\n      return {\n        left: round$2(rect.left),\n        top: round$2(rect.top),\n        bottom: round$2(rect.bottom),\n        right: round$2(rect.right),\n        width: round$2(rect.width),\n        height: round$2(rect.height)\n      };\n    };\n    const collapse = (rect, toStart) => {\n      rect = clone$1(rect);\n      if (toStart) {\n        rect.right = rect.left;\n      } else {\n        rect.left = rect.left + rect.width;\n        rect.right = rect.left;\n      }\n      rect.width = 0;\n      return rect;\n    };\n    const isEqual = (rect1, rect2) => rect1.left === rect2.left && rect1.top === rect2.top && rect1.bottom === rect2.bottom && rect1.right === rect2.right;\n    const isValidOverflow = (overflowY, rect1, rect2) => overflowY >= 0 && overflowY <= Math.min(rect1.height, rect2.height) / 2;\n    const isAbove$1 = (rect1, rect2) => {\n      const halfHeight = Math.min(rect2.height / 2, rect1.height / 2);\n      if (rect1.bottom - halfHeight < rect2.top) {\n        return true;\n      }\n      if (rect1.top > rect2.bottom) {\n        return false;\n      }\n      return isValidOverflow(rect2.top - rect1.bottom, rect1, rect2);\n    };\n    const isBelow$1 = (rect1, rect2) => {\n      if (rect1.top > rect2.bottom) {\n        return true;\n      }\n      if (rect1.bottom < rect2.top) {\n        return false;\n      }\n      return isValidOverflow(rect2.bottom - rect1.top, rect1, rect2);\n    };\n    const containsXY = (rect, clientX, clientY) => clientX >= rect.left && clientX <= rect.right && clientY >= rect.top && clientY <= rect.bottom;\n    const boundingClientRectFromRects = rects => {\n      return foldl(rects, (acc, rect) => {\n        return acc.fold(() => Optional.some(rect), prevRect => {\n          const left = Math.min(rect.left, prevRect.left);\n          const top = Math.min(rect.top, prevRect.top);\n          const right = Math.max(rect.right, prevRect.right);\n          const bottom = Math.max(rect.bottom, prevRect.bottom);\n          return Optional.some({\n            top,\n            right,\n            bottom,\n            left,\n            width: right - left,\n            height: bottom - top\n          });\n        });\n      }, Optional.none());\n    };\n    const distanceToRectEdgeFromXY = (rect, x, y) => {\n      const cx = Math.max(Math.min(x, rect.left + rect.width), rect.left);\n      const cy = Math.max(Math.min(y, rect.top + rect.height), rect.top);\n      return Math.sqrt((x - cx) * (x - cx) + (y - cy) * (y - cy));\n    };\n    const overlapY = (r1, r2) => Math.max(0, Math.min(r1.bottom, r2.bottom) - Math.max(r1.top, r2.top));\n\n    const clamp$2 = (value, min, max) => Math.min(Math.max(value, min), max);\n\n    const getSelectedNode = range => {\n      const startContainer = range.startContainer, startOffset = range.startOffset;\n      if (startContainer === range.endContainer && startContainer.hasChildNodes() && range.endOffset === startOffset + 1) {\n        return startContainer.childNodes[startOffset];\n      }\n      return null;\n    };\n    const getNode$1 = (container, offset) => {\n      if (isElement$6(container) && container.hasChildNodes()) {\n        const childNodes = container.childNodes;\n        const safeOffset = clamp$2(offset, 0, childNodes.length - 1);\n        return childNodes[safeOffset];\n      } else {\n        return container;\n      }\n    };\n    const getNodeUnsafe = (container, offset) => {\n      if (offset < 0 && isElement$6(container) && container.hasChildNodes()) {\n        return undefined;\n      } else {\n        return getNode$1(container, offset);\n      }\n    };\n\n    const extendingChars = new RegExp('[\\u0300-\\u036f\\u0483-\\u0487\\u0488-\\u0489\\u0591-\\u05bd\\u05bf\\u05c1-\\u05c2\\u05c4-\\u05c5\\u05c7\\u0610-\\u061a' + '\\u064b-\\u065f\\u0670\\u06d6-\\u06dc\\u06df-\\u06e4\\u06e7-\\u06e8\\u06ea-\\u06ed\\u0711\\u0730-\\u074a\\u07a6-\\u07b0' + '\\u07eb-\\u07f3\\u0816-\\u0819\\u081b-\\u0823\\u0825-\\u0827\\u0829-\\u082d\\u0859-\\u085b\\u08e3-\\u0902\\u093a\\u093c' + '\\u0941-\\u0948\\u094d\\u0951-\\u0957\\u0962-\\u0963\\u0981\\u09bc\\u09be\\u09c1-\\u09c4\\u09cd\\u09d7\\u09e2-\\u09e3' + '\\u0a01-\\u0a02\\u0a3c\\u0a41-\\u0a42\\u0a47-\\u0a48\\u0a4b-\\u0a4d\\u0a51\\u0a70-\\u0a71\\u0a75\\u0a81-\\u0a82\\u0abc' + '\\u0ac1-\\u0ac5\\u0ac7-\\u0ac8\\u0acd\\u0ae2-\\u0ae3\\u0b01\\u0b3c\\u0b3e\\u0b3f\\u0b41-\\u0b44\\u0b4d\\u0b56\\u0b57' + '\\u0b62-\\u0b63\\u0b82\\u0bbe\\u0bc0\\u0bcd\\u0bd7\\u0c00\\u0c3e-\\u0c40\\u0c46-\\u0c48\\u0c4a-\\u0c4d\\u0c55-\\u0c56' + '\\u0c62-\\u0c63\\u0c81\\u0cbc\\u0cbf\\u0cc2\\u0cc6\\u0ccc-\\u0ccd\\u0cd5-\\u0cd6\\u0ce2-\\u0ce3\\u0d01\\u0d3e\\u0d41-\\u0d44' + '\\u0d4d\\u0d57\\u0d62-\\u0d63\\u0dca\\u0dcf\\u0dd2-\\u0dd4\\u0dd6\\u0ddf\\u0e31\\u0e34-\\u0e3a\\u0e47-\\u0e4e\\u0eb1\\u0eb4-\\u0eb9' + '\\u0ebb-\\u0ebc\\u0ec8-\\u0ecd\\u0f18-\\u0f19\\u0f35\\u0f37\\u0f39\\u0f71-\\u0f7e\\u0f80-\\u0f84\\u0f86-\\u0f87\\u0f8d-\\u0f97' + '\\u0f99-\\u0fbc\\u0fc6\\u102d-\\u1030\\u1032-\\u1037\\u1039-\\u103a\\u103d-\\u103e\\u1058-\\u1059\\u105e-\\u1060\\u1071-\\u1074' + '\\u1082\\u1085-\\u1086\\u108d\\u109d\\u135d-\\u135f\\u1712-\\u1714\\u1732-\\u1734\\u1752-\\u1753\\u1772-\\u1773\\u17b4-\\u17b5' + '\\u17b7-\\u17bd\\u17c6\\u17c9-\\u17d3\\u17dd\\u180b-\\u180d\\u18a9\\u1920-\\u1922\\u1927-\\u1928\\u1932\\u1939-\\u193b\\u1a17-\\u1a18' + '\\u1a1b\\u1a56\\u1a58-\\u1a5e\\u1a60\\u1a62\\u1a65-\\u1a6c\\u1a73-\\u1a7c\\u1a7f\\u1ab0-\\u1abd\\u1ABE\\u1b00-\\u1b03\\u1b34' + '\\u1b36-\\u1b3a\\u1b3c\\u1b42\\u1b6b-\\u1b73\\u1b80-\\u1b81\\u1ba2-\\u1ba5\\u1ba8-\\u1ba9\\u1bab-\\u1bad\\u1be6\\u1be8-\\u1be9' + '\\u1bed\\u1bef-\\u1bf1\\u1c2c-\\u1c33\\u1c36-\\u1c37\\u1cd0-\\u1cd2\\u1cd4-\\u1ce0\\u1ce2-\\u1ce8\\u1ced\\u1cf4\\u1cf8-\\u1cf9' + '\\u1dc0-\\u1df5\\u1dfc-\\u1dff\\u200c-\\u200d\\u20d0-\\u20dc\\u20DD-\\u20E0\\u20e1\\u20E2-\\u20E4\\u20e5-\\u20f0\\u2cef-\\u2cf1' + '\\u2d7f\\u2de0-\\u2dff\\u302a-\\u302d\\u302e-\\u302f\\u3099-\\u309a\\ua66f\\uA670-\\uA672\\ua674-\\ua67d\\ua69e-\\ua69f\\ua6f0-\\ua6f1' + '\\ua802\\ua806\\ua80b\\ua825-\\ua826\\ua8c4\\ua8e0-\\ua8f1\\ua926-\\ua92d\\ua947-\\ua951\\ua980-\\ua982\\ua9b3\\ua9b6-\\ua9b9\\ua9bc' + '\\ua9e5\\uaa29-\\uaa2e\\uaa31-\\uaa32\\uaa35-\\uaa36\\uaa43\\uaa4c\\uaa7c\\uaab0\\uaab2-\\uaab4\\uaab7-\\uaab8\\uaabe-\\uaabf\\uaac1' + '\\uaaec-\\uaaed\\uaaf6\\uabe5\\uabe8\\uabed\\ufb1e\\ufe00-\\ufe0f\\ufe20-\\ufe2f\\uff9e-\\uff9f]');\n    const isExtendingChar = ch => isString(ch) && ch.charCodeAt(0) >= 768 && extendingChars.test(ch);\n\n    const or = (...args) => {\n      return x => {\n        for (let i = 0; i < args.length; i++) {\n          if (args[i](x)) {\n            return true;\n          }\n        }\n        return false;\n      };\n    };\n    const and = (...args) => {\n      return x => {\n        for (let i = 0; i < args.length; i++) {\n          if (!args[i](x)) {\n            return false;\n          }\n        }\n        return true;\n      };\n    };\n\n    const isElement$4 = isElement$6;\n    const isCaretCandidate$2 = isCaretCandidate$3;\n    const isBlock$1 = matchStyleValues('display', 'block table');\n    const isFloated = matchStyleValues('float', 'left right');\n    const isValidElementCaretCandidate = and(isElement$4, isCaretCandidate$2, not(isFloated));\n    const isNotPre = not(matchStyleValues('white-space', 'pre pre-line pre-wrap'));\n    const isText$7 = isText$a;\n    const isBr$3 = isBr$6;\n    const nodeIndex$1 = DOMUtils.nodeIndex;\n    const resolveIndex$1 = getNodeUnsafe;\n    const createRange$1 = doc => doc ? doc.createRange() : DOMUtils.DOM.createRng();\n    const isWhiteSpace$1 = chr => isString(chr) && /[\\r\\n\\t ]/.test(chr);\n    const isRange = rng => !!rng.setStart && !!rng.setEnd;\n    const isHiddenWhiteSpaceRange = range => {\n      const container = range.startContainer;\n      const offset = range.startOffset;\n      if (isWhiteSpace$1(range.toString()) && isNotPre(container.parentNode) && isText$a(container)) {\n        const text = container.data;\n        if (isWhiteSpace$1(text[offset - 1]) || isWhiteSpace$1(text[offset + 1])) {\n          return true;\n        }\n      }\n      return false;\n    };\n    const getBrClientRect = brNode => {\n      const doc = brNode.ownerDocument;\n      const rng = createRange$1(doc);\n      const nbsp$1 = doc.createTextNode(nbsp);\n      const parentNode = brNode.parentNode;\n      parentNode.insertBefore(nbsp$1, brNode);\n      rng.setStart(nbsp$1, 0);\n      rng.setEnd(nbsp$1, 1);\n      const clientRect = clone$1(rng.getBoundingClientRect());\n      parentNode.removeChild(nbsp$1);\n      return clientRect;\n    };\n    const getBoundingClientRectWebKitText = rng => {\n      const sc = rng.startContainer;\n      const ec = rng.endContainer;\n      const so = rng.startOffset;\n      const eo = rng.endOffset;\n      if (sc === ec && isText$a(ec) && so === 0 && eo === 1) {\n        const newRng = rng.cloneRange();\n        newRng.setEndAfter(ec);\n        return getBoundingClientRect$1(newRng);\n      } else {\n        return null;\n      }\n    };\n    const isZeroRect = r => r.left === 0 && r.right === 0 && r.top === 0 && r.bottom === 0;\n    const getBoundingClientRect$1 = item => {\n      var _a;\n      let clientRect;\n      const clientRects = item.getClientRects();\n      if (clientRects.length > 0) {\n        clientRect = clone$1(clientRects[0]);\n      } else {\n        clientRect = clone$1(item.getBoundingClientRect());\n      }\n      if (!isRange(item) && isBr$3(item) && isZeroRect(clientRect)) {\n        return getBrClientRect(item);\n      }\n      if (isZeroRect(clientRect) && isRange(item)) {\n        return (_a = getBoundingClientRectWebKitText(item)) !== null && _a !== void 0 ? _a : clientRect;\n      }\n      return clientRect;\n    };\n    const collapseAndInflateWidth = (clientRect, toStart) => {\n      const newClientRect = collapse(clientRect, toStart);\n      newClientRect.width = 1;\n      newClientRect.right = newClientRect.left + 1;\n      return newClientRect;\n    };\n    const getCaretPositionClientRects = caretPosition => {\n      const clientRects = [];\n      const addUniqueAndValidRect = clientRect => {\n        if (clientRect.height === 0) {\n          return;\n        }\n        if (clientRects.length > 0) {\n          if (isEqual(clientRect, clientRects[clientRects.length - 1])) {\n            return;\n          }\n        }\n        clientRects.push(clientRect);\n      };\n      const addCharacterOffset = (container, offset) => {\n        const range = createRange$1(container.ownerDocument);\n        if (offset < container.data.length) {\n          if (isExtendingChar(container.data[offset])) {\n            return;\n          }\n          if (isExtendingChar(container.data[offset - 1])) {\n            range.setStart(container, offset);\n            range.setEnd(container, offset + 1);\n            if (!isHiddenWhiteSpaceRange(range)) {\n              addUniqueAndValidRect(collapseAndInflateWidth(getBoundingClientRect$1(range), false));\n              return;\n            }\n          }\n        }\n        if (offset > 0) {\n          range.setStart(container, offset - 1);\n          range.setEnd(container, offset);\n          if (!isHiddenWhiteSpaceRange(range)) {\n            addUniqueAndValidRect(collapseAndInflateWidth(getBoundingClientRect$1(range), false));\n          }\n        }\n        if (offset < container.data.length) {\n          range.setStart(container, offset);\n          range.setEnd(container, offset + 1);\n          if (!isHiddenWhiteSpaceRange(range)) {\n            addUniqueAndValidRect(collapseAndInflateWidth(getBoundingClientRect$1(range), true));\n          }\n        }\n      };\n      const container = caretPosition.container();\n      const offset = caretPosition.offset();\n      if (isText$7(container)) {\n        addCharacterOffset(container, offset);\n        return clientRects;\n      }\n      if (isElement$4(container)) {\n        if (caretPosition.isAtEnd()) {\n          const node = resolveIndex$1(container, offset);\n          if (isText$7(node)) {\n            addCharacterOffset(node, node.data.length);\n          }\n          if (isValidElementCaretCandidate(node) && !isBr$3(node)) {\n            addUniqueAndValidRect(collapseAndInflateWidth(getBoundingClientRect$1(node), false));\n          }\n        } else {\n          const node = resolveIndex$1(container, offset);\n          if (isText$7(node)) {\n            addCharacterOffset(node, 0);\n          }\n          if (isValidElementCaretCandidate(node) && caretPosition.isAtEnd()) {\n            addUniqueAndValidRect(collapseAndInflateWidth(getBoundingClientRect$1(node), false));\n            return clientRects;\n          }\n          const beforeNode = resolveIndex$1(caretPosition.container(), caretPosition.offset() - 1);\n          if (isValidElementCaretCandidate(beforeNode) && !isBr$3(beforeNode)) {\n            if (isBlock$1(beforeNode) || isBlock$1(node) || !isValidElementCaretCandidate(node)) {\n              addUniqueAndValidRect(collapseAndInflateWidth(getBoundingClientRect$1(beforeNode), false));\n            }\n          }\n          if (isValidElementCaretCandidate(node)) {\n            addUniqueAndValidRect(collapseAndInflateWidth(getBoundingClientRect$1(node), true));\n          }\n        }\n      }\n      return clientRects;\n    };\n    const CaretPosition = (container, offset, clientRects) => {\n      const isAtStart = () => {\n        if (isText$7(container)) {\n          return offset === 0;\n        }\n        return offset === 0;\n      };\n      const isAtEnd = () => {\n        if (isText$7(container)) {\n          return offset >= container.data.length;\n        }\n        return offset >= container.childNodes.length;\n      };\n      const toRange = () => {\n        const range = createRange$1(container.ownerDocument);\n        range.setStart(container, offset);\n        range.setEnd(container, offset);\n        return range;\n      };\n      const getClientRects = () => {\n        if (!clientRects) {\n          clientRects = getCaretPositionClientRects(CaretPosition(container, offset));\n        }\n        return clientRects;\n      };\n      const isVisible = () => getClientRects().length > 0;\n      const isEqual = caretPosition => caretPosition && container === caretPosition.container() && offset === caretPosition.offset();\n      const getNode = before => resolveIndex$1(container, before ? offset - 1 : offset);\n      return {\n        container: constant(container),\n        offset: constant(offset),\n        toRange,\n        getClientRects,\n        isVisible,\n        isAtStart,\n        isAtEnd,\n        isEqual,\n        getNode\n      };\n    };\n    CaretPosition.fromRangeStart = range => CaretPosition(range.startContainer, range.startOffset);\n    CaretPosition.fromRangeEnd = range => CaretPosition(range.endContainer, range.endOffset);\n    CaretPosition.after = node => CaretPosition(node.parentNode, nodeIndex$1(node) + 1);\n    CaretPosition.before = node => CaretPosition(node.parentNode, nodeIndex$1(node));\n    CaretPosition.isAbove = (pos1, pos2) => lift2(head(pos2.getClientRects()), last$3(pos1.getClientRects()), isAbove$1).getOr(false);\n    CaretPosition.isBelow = (pos1, pos2) => lift2(last$3(pos2.getClientRects()), head(pos1.getClientRects()), isBelow$1).getOr(false);\n    CaretPosition.isAtStart = pos => pos ? pos.isAtStart() : false;\n    CaretPosition.isAtEnd = pos => pos ? pos.isAtEnd() : false;\n    CaretPosition.isTextPosition = pos => pos ? isText$a(pos.container()) : false;\n    CaretPosition.isElementPosition = pos => !CaretPosition.isTextPosition(pos);\n\n    const trimEmptyTextNode$1 = (dom, node) => {\n      if (isText$a(node) && node.data.length === 0) {\n        dom.remove(node);\n      }\n    };\n    const insertNode = (dom, rng, node) => {\n      rng.insertNode(node);\n      trimEmptyTextNode$1(dom, node.previousSibling);\n      trimEmptyTextNode$1(dom, node.nextSibling);\n    };\n    const insertFragment = (dom, rng, frag) => {\n      const firstChild = Optional.from(frag.firstChild);\n      const lastChild = Optional.from(frag.lastChild);\n      rng.insertNode(frag);\n      firstChild.each(child => trimEmptyTextNode$1(dom, child.previousSibling));\n      lastChild.each(child => trimEmptyTextNode$1(dom, child.nextSibling));\n    };\n    const rangeInsertNode = (dom, rng, node) => {\n      if (isDocumentFragment(node)) {\n        insertFragment(dom, rng, node);\n      } else {\n        insertNode(dom, rng, node);\n      }\n    };\n\n    const isText$6 = isText$a;\n    const isBogus = isBogus$2;\n    const nodeIndex = DOMUtils.nodeIndex;\n    const normalizedParent = node => {\n      const parentNode = node.parentNode;\n      if (isBogus(parentNode)) {\n        return normalizedParent(parentNode);\n      }\n      return parentNode;\n    };\n    const getChildNodes = node => {\n      if (!node) {\n        return [];\n      }\n      return reduce(node.childNodes, (result, node) => {\n        if (isBogus(node) && node.nodeName !== 'BR') {\n          result = result.concat(getChildNodes(node));\n        } else {\n          result.push(node);\n        }\n        return result;\n      }, []);\n    };\n    const normalizedTextOffset = (node, offset) => {\n      let tempNode = node;\n      while (tempNode = tempNode.previousSibling) {\n        if (!isText$6(tempNode)) {\n          break;\n        }\n        offset += tempNode.data.length;\n      }\n      return offset;\n    };\n    const equal = a => b => a === b;\n    const normalizedNodeIndex = node => {\n      let nodes, index;\n      nodes = getChildNodes(normalizedParent(node));\n      index = findIndex$1(nodes, equal(node), node);\n      nodes = nodes.slice(0, index + 1);\n      const numTextFragments = reduce(nodes, (result, node, i) => {\n        if (isText$6(node) && isText$6(nodes[i - 1])) {\n          result++;\n        }\n        return result;\n      }, 0);\n      nodes = filter$3(nodes, matchNodeNames([node.nodeName]));\n      index = findIndex$1(nodes, equal(node), node);\n      return index - numTextFragments;\n    };\n    const createPathItem = node => {\n      const name = isText$6(node) ? 'text()' : node.nodeName.toLowerCase();\n      return name + '[' + normalizedNodeIndex(node) + ']';\n    };\n    const parentsUntil$1 = (root, node, predicate) => {\n      const parents = [];\n      for (let tempNode = node.parentNode; tempNode && tempNode !== root; tempNode = tempNode.parentNode) {\n        if (predicate && predicate(tempNode)) {\n          break;\n        }\n        parents.push(tempNode);\n      }\n      return parents;\n    };\n    const create$b = (root, caretPosition) => {\n      let path = [];\n      let container = caretPosition.container();\n      let offset = caretPosition.offset();\n      let outputOffset;\n      if (isText$6(container)) {\n        outputOffset = normalizedTextOffset(container, offset);\n      } else {\n        const childNodes = container.childNodes;\n        if (offset >= childNodes.length) {\n          outputOffset = 'after';\n          offset = childNodes.length - 1;\n        } else {\n          outputOffset = 'before';\n        }\n        container = childNodes[offset];\n      }\n      path.push(createPathItem(container));\n      let parents = parentsUntil$1(root, container);\n      parents = filter$3(parents, not(isBogus$2));\n      path = path.concat(map$1(parents, node => {\n        return createPathItem(node);\n      }));\n      return path.reverse().join('/') + ',' + outputOffset;\n    };\n    const resolvePathItem = (node, name, index) => {\n      let nodes = getChildNodes(node);\n      nodes = filter$3(nodes, (node, index) => {\n        return !isText$6(node) || !isText$6(nodes[index - 1]);\n      });\n      nodes = filter$3(nodes, matchNodeNames([name]));\n      return nodes[index];\n    };\n    const findTextPosition = (container, offset) => {\n      let node = container;\n      let targetOffset = 0;\n      while (isText$6(node)) {\n        const dataLen = node.data.length;\n        if (offset >= targetOffset && offset <= targetOffset + dataLen) {\n          container = node;\n          offset = offset - targetOffset;\n          break;\n        }\n        if (!isText$6(node.nextSibling)) {\n          container = node;\n          offset = dataLen;\n          break;\n        }\n        targetOffset += dataLen;\n        node = node.nextSibling;\n      }\n      if (isText$6(container) && offset > container.data.length) {\n        offset = container.data.length;\n      }\n      return CaretPosition(container, offset);\n    };\n    const resolve$1 = (root, path) => {\n      if (!path) {\n        return null;\n      }\n      const parts = path.split(',');\n      const paths = parts[0].split('/');\n      const offset = parts.length > 1 ? parts[1] : 'before';\n      const container = reduce(paths, (result, value) => {\n        const match = /([\\w\\-\\(\\)]+)\\[([0-9]+)\\]/.exec(value);\n        if (!match) {\n          return null;\n        }\n        if (match[1] === 'text()') {\n          match[1] = '#text';\n        }\n        return resolvePathItem(result, match[1], parseInt(match[2], 10));\n      }, root);\n      if (!container) {\n        return null;\n      }\n      if (!isText$6(container) && container.parentNode) {\n        let nodeOffset;\n        if (offset === 'after') {\n          nodeOffset = nodeIndex(container) + 1;\n        } else {\n          nodeOffset = nodeIndex(container);\n        }\n        return CaretPosition(container.parentNode, nodeOffset);\n      }\n      return findTextPosition(container, parseInt(offset, 10));\n    };\n\n    const isContentEditableFalse$8 = isContentEditableFalse$a;\n    const getNormalizedTextOffset$1 = (trim, container, offset) => {\n      let trimmedOffset = trim(container.data.slice(0, offset)).length;\n      for (let node = container.previousSibling; node && isText$a(node); node = node.previousSibling) {\n        trimmedOffset += trim(node.data).length;\n      }\n      return trimmedOffset;\n    };\n    const getPoint = (dom, trim, normalized, rng, start) => {\n      const container = start ? rng.startContainer : rng.endContainer;\n      let offset = start ? rng.startOffset : rng.endOffset;\n      const point = [];\n      const root = dom.getRoot();\n      if (isText$a(container)) {\n        point.push(normalized ? getNormalizedTextOffset$1(trim, container, offset) : offset);\n      } else {\n        let after = 0;\n        const childNodes = container.childNodes;\n        if (offset >= childNodes.length && childNodes.length) {\n          after = 1;\n          offset = Math.max(0, childNodes.length - 1);\n        }\n        point.push(dom.nodeIndex(childNodes[offset], normalized) + after);\n      }\n      for (let node = container; node && node !== root; node = node.parentNode) {\n        point.push(dom.nodeIndex(node, normalized));\n      }\n      return point;\n    };\n    const getLocation = (trim, selection, normalized, rng) => {\n      const dom = selection.dom;\n      const start = getPoint(dom, trim, normalized, rng, true);\n      const forward = selection.isForward();\n      const fakeCaret = isRangeInCaretContainerBlock(rng) ? { isFakeCaret: true } : {};\n      if (!selection.isCollapsed()) {\n        const end = getPoint(dom, trim, normalized, rng, false);\n        return {\n          start,\n          end,\n          forward,\n          ...fakeCaret\n        };\n      } else {\n        return {\n          start,\n          forward,\n          ...fakeCaret\n        };\n      }\n    };\n    const findIndex = (dom, name, element) => {\n      let count = 0;\n      Tools.each(dom.select(name), node => {\n        if (node.getAttribute('data-mce-bogus') === 'all') {\n          return;\n        } else if (node === element) {\n          return false;\n        } else {\n          count++;\n          return;\n        }\n      });\n      return count;\n    };\n    const moveEndPoint$1 = (rng, start) => {\n      let container = start ? rng.startContainer : rng.endContainer;\n      let offset = start ? rng.startOffset : rng.endOffset;\n      if (isElement$6(container) && container.nodeName === 'TR') {\n        const childNodes = container.childNodes;\n        container = childNodes[Math.min(start ? offset : offset - 1, childNodes.length - 1)];\n        if (container) {\n          offset = start ? 0 : container.childNodes.length;\n          if (start) {\n            rng.setStart(container, offset);\n          } else {\n            rng.setEnd(container, offset);\n          }\n        }\n      }\n    };\n    const normalizeTableCellSelection = rng => {\n      moveEndPoint$1(rng, true);\n      moveEndPoint$1(rng, false);\n      return rng;\n    };\n    const findSibling = (node, offset) => {\n      if (isElement$6(node)) {\n        node = getNode$1(node, offset);\n        if (isContentEditableFalse$8(node)) {\n          return node;\n        }\n      }\n      if (isCaretContainer$2(node)) {\n        if (isText$a(node) && isCaretContainerBlock$1(node)) {\n          node = node.parentNode;\n        }\n        let sibling = node.previousSibling;\n        if (isContentEditableFalse$8(sibling)) {\n          return sibling;\n        }\n        sibling = node.nextSibling;\n        if (isContentEditableFalse$8(sibling)) {\n          return sibling;\n        }\n      }\n      return undefined;\n    };\n    const findAdjacentContentEditableFalseElm = rng => {\n      return findSibling(rng.startContainer, rng.startOffset) || findSibling(rng.endContainer, rng.endOffset);\n    };\n    const getOffsetBookmark = (trim, normalized, selection) => {\n      const element = selection.getNode();\n      const rng = selection.getRng();\n      if (element.nodeName === 'IMG' || isContentEditableFalse$8(element)) {\n        const name = element.nodeName;\n        return {\n          name,\n          index: findIndex(selection.dom, name, element)\n        };\n      }\n      const sibling = findAdjacentContentEditableFalseElm(rng);\n      if (sibling) {\n        const name = sibling.tagName;\n        return {\n          name,\n          index: findIndex(selection.dom, name, sibling)\n        };\n      }\n      return getLocation(trim, selection, normalized, rng);\n    };\n    const getCaretBookmark = selection => {\n      const rng = selection.getRng();\n      return {\n        start: create$b(selection.dom.getRoot(), CaretPosition.fromRangeStart(rng)),\n        end: create$b(selection.dom.getRoot(), CaretPosition.fromRangeEnd(rng)),\n        forward: selection.isForward()\n      };\n    };\n    const getRangeBookmark = selection => {\n      return {\n        rng: selection.getRng(),\n        forward: selection.isForward()\n      };\n    };\n    const createBookmarkSpan = (dom, id, filled) => {\n      const args = {\n        'data-mce-type': 'bookmark',\n        id,\n        'style': 'overflow:hidden;line-height:0px'\n      };\n      return filled ? dom.create('span', args, '&#xFEFF;') : dom.create('span', args);\n    };\n    const getPersistentBookmark = (selection, filled) => {\n      const dom = selection.dom;\n      let rng = selection.getRng();\n      const id = dom.uniqueId();\n      const collapsed = selection.isCollapsed();\n      const element = selection.getNode();\n      const name = element.nodeName;\n      const forward = selection.isForward();\n      if (name === 'IMG') {\n        return {\n          name,\n          index: findIndex(dom, name, element)\n        };\n      }\n      const rng2 = normalizeTableCellSelection(rng.cloneRange());\n      if (!collapsed) {\n        rng2.collapse(false);\n        const endBookmarkNode = createBookmarkSpan(dom, id + '_end', filled);\n        rangeInsertNode(dom, rng2, endBookmarkNode);\n      }\n      rng = normalizeTableCellSelection(rng);\n      rng.collapse(true);\n      const startBookmarkNode = createBookmarkSpan(dom, id + '_start', filled);\n      rangeInsertNode(dom, rng, startBookmarkNode);\n      selection.moveToBookmark({\n        id,\n        keep: true,\n        forward\n      });\n      return {\n        id,\n        forward\n      };\n    };\n    const getBookmark$2 = (selection, type, normalized = false) => {\n      if (type === 2) {\n        return getOffsetBookmark(trim$1, normalized, selection);\n      } else if (type === 3) {\n        return getCaretBookmark(selection);\n      } else if (type) {\n        return getRangeBookmark(selection);\n      } else {\n        return getPersistentBookmark(selection, false);\n      }\n    };\n    const getUndoBookmark = curry(getOffsetBookmark, identity, true);\n\n    const value$1 = value => {\n      const applyHelper = fn => fn(value);\n      const constHelper = constant(value);\n      const outputHelper = () => output;\n      const output = {\n        tag: true,\n        inner: value,\n        fold: (_onError, onValue) => onValue(value),\n        isValue: always,\n        isError: never,\n        map: mapper => Result.value(mapper(value)),\n        mapError: outputHelper,\n        bind: applyHelper,\n        exists: applyHelper,\n        forall: applyHelper,\n        getOr: constHelper,\n        or: outputHelper,\n        getOrThunk: constHelper,\n        orThunk: outputHelper,\n        getOrDie: constHelper,\n        each: fn => {\n          fn(value);\n        },\n        toOptional: () => Optional.some(value)\n      };\n      return output;\n    };\n    const error = error => {\n      const outputHelper = () => output;\n      const output = {\n        tag: false,\n        inner: error,\n        fold: (onError, _onValue) => onError(error),\n        isValue: never,\n        isError: always,\n        map: outputHelper,\n        mapError: mapper => Result.error(mapper(error)),\n        bind: outputHelper,\n        exists: never,\n        forall: always,\n        getOr: identity,\n        or: identity,\n        getOrThunk: apply$1,\n        orThunk: apply$1,\n        getOrDie: die(String(error)),\n        each: noop,\n        toOptional: Optional.none\n      };\n      return output;\n    };\n    const fromOption = (optional, err) => optional.fold(() => error(err), value$1);\n    const Result = {\n      value: value$1,\n      error,\n      fromOption\n    };\n\n    const generate = cases => {\n      if (!isArray$1(cases)) {\n        throw new Error('cases must be an array');\n      }\n      if (cases.length === 0) {\n        throw new Error('there must be at least one case');\n      }\n      const constructors = [];\n      const adt = {};\n      each$e(cases, (acase, count) => {\n        const keys$1 = keys(acase);\n        if (keys$1.length !== 1) {\n          throw new Error('one and only one name per case');\n        }\n        const key = keys$1[0];\n        const value = acase[key];\n        if (adt[key] !== undefined) {\n          throw new Error('duplicate key detected:' + key);\n        } else if (key === 'cata') {\n          throw new Error('cannot have a case named cata (sorry)');\n        } else if (!isArray$1(value)) {\n          throw new Error('case arguments must be an array');\n        }\n        constructors.push(key);\n        adt[key] = (...args) => {\n          const argLength = args.length;\n          if (argLength !== value.length) {\n            throw new Error('Wrong number of arguments to case ' + key + '. Expected ' + value.length + ' (' + value + '), got ' + argLength);\n          }\n          const match = branches => {\n            const branchKeys = keys(branches);\n            if (constructors.length !== branchKeys.length) {\n              throw new Error('Wrong number of arguments to match. Expected: ' + constructors.join(',') + '\\nActual: ' + branchKeys.join(','));\n            }\n            const allReqd = forall(constructors, reqKey => {\n              return contains$2(branchKeys, reqKey);\n            });\n            if (!allReqd) {\n              throw new Error('Not all branches were specified when using match. Specified: ' + branchKeys.join(', ') + '\\nRequired: ' + constructors.join(', '));\n            }\n            return branches[key].apply(null, args);\n          };\n          return {\n            fold: (...foldArgs) => {\n              if (foldArgs.length !== cases.length) {\n                throw new Error('Wrong number of arguments to fold. Expected ' + cases.length + ', got ' + foldArgs.length);\n              }\n              const target = foldArgs[count];\n              return target.apply(null, args);\n            },\n            match,\n            log: label => {\n              console.log(label, {\n                constructors,\n                constructor: key,\n                params: args\n              });\n            }\n          };\n        };\n      });\n      return adt;\n    };\n    const Adt = { generate };\n\n    Adt.generate([\n      {\n        bothErrors: [\n          'error1',\n          'error2'\n        ]\n      },\n      {\n        firstError: [\n          'error1',\n          'value2'\n        ]\n      },\n      {\n        secondError: [\n          'value1',\n          'error2'\n        ]\n      },\n      {\n        bothValues: [\n          'value1',\n          'value2'\n        ]\n      }\n    ]);\n    const partition$1 = results => {\n      const errors = [];\n      const values = [];\n      each$e(results, result => {\n        result.fold(err => {\n          errors.push(err);\n        }, value => {\n          values.push(value);\n        });\n      });\n      return {\n        errors,\n        values\n      };\n    };\n\n    const isInlinePattern = pattern => pattern.type === 'inline-command' || pattern.type === 'inline-format';\n    const isBlockPattern = pattern => pattern.type === 'block-command' || pattern.type === 'block-format';\n    const normalizePattern = pattern => {\n      const err = message => Result.error({\n        message,\n        pattern\n      });\n      const formatOrCmd = (name, onFormat, onCommand) => {\n        if (pattern.format !== undefined) {\n          let formats;\n          if (isArray$1(pattern.format)) {\n            if (!forall(pattern.format, isString)) {\n              return err(name + ' pattern has non-string items in the `format` array');\n            }\n            formats = pattern.format;\n          } else if (isString(pattern.format)) {\n            formats = [pattern.format];\n          } else {\n            return err(name + ' pattern has non-string `format` parameter');\n          }\n          return Result.value(onFormat(formats));\n        } else if (pattern.cmd !== undefined) {\n          if (!isString(pattern.cmd)) {\n            return err(name + ' pattern has non-string `cmd` parameter');\n          }\n          return Result.value(onCommand(pattern.cmd, pattern.value));\n        } else {\n          return err(name + ' pattern is missing both `format` and `cmd` parameters');\n        }\n      };\n      if (!isObject(pattern)) {\n        return err('Raw pattern is not an object');\n      }\n      if (!isString(pattern.start)) {\n        return err('Raw pattern is missing `start` parameter');\n      }\n      if (pattern.end !== undefined) {\n        if (!isString(pattern.end)) {\n          return err('Inline pattern has non-string `end` parameter');\n        }\n        if (pattern.start.length === 0 && pattern.end.length === 0) {\n          return err('Inline pattern has empty `start` and `end` parameters');\n        }\n        let start = pattern.start;\n        let end = pattern.end;\n        if (end.length === 0) {\n          end = start;\n          start = '';\n        }\n        return formatOrCmd('Inline', format => ({\n          type: 'inline-format',\n          start,\n          end,\n          format\n        }), (cmd, value) => ({\n          type: 'inline-command',\n          start,\n          end,\n          cmd,\n          value\n        }));\n      } else if (pattern.replacement !== undefined) {\n        if (!isString(pattern.replacement)) {\n          return err('Replacement pattern has non-string `replacement` parameter');\n        }\n        if (pattern.start.length === 0) {\n          return err('Replacement pattern has empty `start` parameter');\n        }\n        return Result.value({\n          type: 'inline-command',\n          start: '',\n          end: pattern.start,\n          cmd: 'mceInsertContent',\n          value: pattern.replacement\n        });\n      } else {\n        if (pattern.start.length === 0) {\n          return err('Block pattern has empty `start` parameter');\n        }\n        return formatOrCmd('Block', formats => ({\n          type: 'block-format',\n          start: pattern.start,\n          format: formats[0]\n        }), (command, commandValue) => ({\n          type: 'block-command',\n          start: pattern.start,\n          cmd: command,\n          value: commandValue\n        }));\n      }\n    };\n    const getBlockPatterns = patterns => filter$5(patterns, isBlockPattern);\n    const getInlinePatterns = patterns => filter$5(patterns, isInlinePattern);\n    const createPatternSet = (patterns, dynamicPatternsLookup) => ({\n      inlinePatterns: getInlinePatterns(patterns),\n      blockPatterns: getBlockPatterns(patterns),\n      dynamicPatternsLookup\n    });\n    const fromRawPatterns = patterns => {\n      const normalized = partition$1(map$3(patterns, normalizePattern));\n      each$e(normalized.errors, err => console.error(err.message, err.pattern));\n      return normalized.values;\n    };\n    const fromRawPatternsLookup = lookupFn => {\n      return ctx => {\n        const rawPatterns = lookupFn(ctx);\n        return fromRawPatterns(rawPatterns);\n      };\n    };\n\n    const deviceDetection$1 = detect$2().deviceType;\n    const isTouch = deviceDetection$1.isTouch();\n    const DOM$a = DOMUtils.DOM;\n    const getHash = value => {\n      const items = value.indexOf('=') > 0 ? value.split(/[;,](?![^=;,]*(?:[;,]|$))/) : value.split(',');\n      return foldl(items, (output, item) => {\n        const arr = item.split('=');\n        const key = arr[0];\n        const val = arr.length > 1 ? arr[1] : key;\n        output[trim$3(key)] = trim$3(val);\n        return output;\n      }, {});\n    };\n    const isRegExp = x => is$4(x, RegExp);\n    const option = name => editor => editor.options.get(name);\n    const stringOrObjectProcessor = value => isString(value) || isObject(value);\n    const bodyOptionProcessor = (editor, defaultValue = '') => value => {\n      const valid = isString(value);\n      if (valid) {\n        if (value.indexOf('=') !== -1) {\n          const bodyObj = getHash(value);\n          return {\n            value: get$a(bodyObj, editor.id).getOr(defaultValue),\n            valid\n          };\n        } else {\n          return {\n            value,\n            valid\n          };\n        }\n      } else {\n        return {\n          valid: false,\n          message: 'Must be a string.'\n        };\n      }\n    };\n    const register$7 = editor => {\n      const registerOption = editor.options.register;\n      registerOption('id', {\n        processor: 'string',\n        default: editor.id\n      });\n      registerOption('selector', { processor: 'string' });\n      registerOption('target', { processor: 'object' });\n      registerOption('suffix', { processor: 'string' });\n      registerOption('cache_suffix', { processor: 'string' });\n      registerOption('base_url', { processor: 'string' });\n      registerOption('referrer_policy', {\n        processor: 'string',\n        default: ''\n      });\n      registerOption('language_load', {\n        processor: 'boolean',\n        default: true\n      });\n      registerOption('inline', {\n        processor: 'boolean',\n        default: false\n      });\n      registerOption('iframe_attrs', {\n        processor: 'object',\n        default: {}\n      });\n      registerOption('doctype', {\n        processor: 'string',\n        default: '<!DOCTYPE html>'\n      });\n      registerOption('document_base_url', {\n        processor: 'string',\n        default: editor.documentBaseUrl\n      });\n      registerOption('body_id', {\n        processor: bodyOptionProcessor(editor, 'tinymce'),\n        default: 'tinymce'\n      });\n      registerOption('body_class', {\n        processor: bodyOptionProcessor(editor),\n        default: ''\n      });\n      registerOption('content_security_policy', {\n        processor: 'string',\n        default: ''\n      });\n      registerOption('br_in_pre', {\n        processor: 'boolean',\n        default: true\n      });\n      registerOption('forced_root_block', {\n        processor: value => {\n          const valid = isString(value) && isNotEmpty(value);\n          if (valid) {\n            return {\n              value,\n              valid\n            };\n          } else {\n            return {\n              valid: false,\n              message: 'Must be a non-empty string.'\n            };\n          }\n        },\n        default: 'p'\n      });\n      registerOption('forced_root_block_attrs', {\n        processor: 'object',\n        default: {}\n      });\n      registerOption('newline_behavior', {\n        processor: value => {\n          const valid = contains$2([\n            'block',\n            'linebreak',\n            'invert',\n            'default'\n          ], value);\n          return valid ? {\n            value,\n            valid\n          } : {\n            valid: false,\n            message: 'Must be one of: block, linebreak, invert or default.'\n          };\n        },\n        default: 'default'\n      });\n      registerOption('br_newline_selector', {\n        processor: 'string',\n        default: '.mce-toc h2,figcaption,caption'\n      });\n      registerOption('no_newline_selector', {\n        processor: 'string',\n        default: ''\n      });\n      registerOption('keep_styles', {\n        processor: 'boolean',\n        default: true\n      });\n      registerOption('end_container_on_empty_block', {\n        processor: value => {\n          if (isBoolean(value)) {\n            return {\n              valid: true,\n              value\n            };\n          } else if (isString(value)) {\n            return {\n              valid: true,\n              value\n            };\n          } else {\n            return {\n              valid: false,\n              message: 'Must be boolean or a string'\n            };\n          }\n        },\n        default: 'blockquote'\n      });\n      registerOption('font_size_style_values', {\n        processor: 'string',\n        default: 'xx-small,x-small,small,medium,large,x-large,xx-large'\n      });\n      registerOption('font_size_legacy_values', {\n        processor: 'string',\n        default: 'xx-small,small,medium,large,x-large,xx-large,300%'\n      });\n      registerOption('font_size_classes', {\n        processor: 'string',\n        default: ''\n      });\n      registerOption('automatic_uploads', {\n        processor: 'boolean',\n        default: true\n      });\n      registerOption('images_reuse_filename', {\n        processor: 'boolean',\n        default: false\n      });\n      registerOption('images_replace_blob_uris', {\n        processor: 'boolean',\n        default: true\n      });\n      registerOption('icons', {\n        processor: 'string',\n        default: ''\n      });\n      registerOption('icons_url', {\n        processor: 'string',\n        default: ''\n      });\n      registerOption('images_upload_url', {\n        processor: 'string',\n        default: ''\n      });\n      registerOption('images_upload_base_path', {\n        processor: 'string',\n        default: ''\n      });\n      registerOption('images_upload_credentials', {\n        processor: 'boolean',\n        default: false\n      });\n      registerOption('images_upload_handler', { processor: 'function' });\n      registerOption('language', {\n        processor: 'string',\n        default: 'en'\n      });\n      registerOption('language_url', {\n        processor: 'string',\n        default: ''\n      });\n      registerOption('entity_encoding', {\n        processor: 'string',\n        default: 'named'\n      });\n      registerOption('indent', {\n        processor: 'boolean',\n        default: true\n      });\n      registerOption('indent_before', {\n        processor: 'string',\n        default: 'p,h1,h2,h3,h4,h5,h6,blockquote,div,title,style,pre,script,td,th,ul,ol,li,dl,dt,dd,area,table,thead,' + 'tfoot,tbody,tr,section,summary,article,hgroup,aside,figure,figcaption,option,optgroup,datalist'\n      });\n      registerOption('indent_after', {\n        processor: 'string',\n        default: 'p,h1,h2,h3,h4,h5,h6,blockquote,div,title,style,pre,script,td,th,ul,ol,li,dl,dt,dd,area,table,thead,' + 'tfoot,tbody,tr,section,summary,article,hgroup,aside,figure,figcaption,option,optgroup,datalist'\n      });\n      registerOption('indent_use_margin', {\n        processor: 'boolean',\n        default: false\n      });\n      registerOption('indentation', {\n        processor: 'string',\n        default: '40px'\n      });\n      registerOption('content_css', {\n        processor: value => {\n          const valid = value === false || isString(value) || isArrayOf(value, isString);\n          if (valid) {\n            if (isString(value)) {\n              return {\n                value: map$3(value.split(','), trim$3),\n                valid\n              };\n            } else if (isArray$1(value)) {\n              return {\n                value,\n                valid\n              };\n            } else if (value === false) {\n              return {\n                value: [],\n                valid\n              };\n            } else {\n              return {\n                value,\n                valid\n              };\n            }\n          } else {\n            return {\n              valid: false,\n              message: 'Must be false, a string or an array of strings.'\n            };\n          }\n        },\n        default: isInline(editor) ? [] : ['default']\n      });\n      registerOption('content_style', { processor: 'string' });\n      registerOption('content_css_cors', {\n        processor: 'boolean',\n        default: false\n      });\n      registerOption('font_css', {\n        processor: value => {\n          const valid = isString(value) || isArrayOf(value, isString);\n          if (valid) {\n            const newValue = isArray$1(value) ? value : map$3(value.split(','), trim$3);\n            return {\n              value: newValue,\n              valid\n            };\n          } else {\n            return {\n              valid: false,\n              message: 'Must be a string or an array of strings.'\n            };\n          }\n        },\n        default: []\n      });\n      registerOption('inline_boundaries', {\n        processor: 'boolean',\n        default: true\n      });\n      registerOption('inline_boundaries_selector', {\n        processor: 'string',\n        default: 'a[href],code,span.mce-annotation'\n      });\n      registerOption('object_resizing', {\n        processor: value => {\n          const valid = isBoolean(value) || isString(value);\n          if (valid) {\n            if (value === false || deviceDetection$1.isiPhone() || deviceDetection$1.isiPad()) {\n              return {\n                value: '',\n                valid\n              };\n            } else {\n              return {\n                value: value === true ? 'table,img,figure.image,div,video,iframe' : value,\n                valid\n              };\n            }\n          } else {\n            return {\n              valid: false,\n              message: 'Must be boolean or a string'\n            };\n          }\n        },\n        default: !isTouch\n      });\n      registerOption('resize_img_proportional', {\n        processor: 'boolean',\n        default: true\n      });\n      registerOption('event_root', { processor: 'object' });\n      registerOption('service_message', { processor: 'string' });\n      registerOption('theme', {\n        processor: value => value === false || isString(value) || isFunction(value),\n        default: 'silver'\n      });\n      registerOption('theme_url', { processor: 'string' });\n      registerOption('formats', { processor: 'object' });\n      registerOption('format_empty_lines', {\n        processor: 'boolean',\n        default: false\n      });\n      registerOption('format_noneditable_selector', {\n        processor: 'string',\n        default: ''\n      });\n      registerOption('preview_styles', {\n        processor: value => {\n          const valid = value === false || isString(value);\n          if (valid) {\n            return {\n              value: value === false ? '' : value,\n              valid\n            };\n          } else {\n            return {\n              valid: false,\n              message: 'Must be false or a string'\n            };\n          }\n        },\n        default: 'font-family font-size font-weight font-style text-decoration text-transform color background-color border border-radius outline text-shadow'\n      });\n      registerOption('custom_ui_selector', {\n        processor: 'string',\n        default: ''\n      });\n      registerOption('hidden_input', {\n        processor: 'boolean',\n        default: true\n      });\n      registerOption('submit_patch', {\n        processor: 'boolean',\n        default: true\n      });\n      registerOption('encoding', { processor: 'string' });\n      registerOption('add_form_submit_trigger', {\n        processor: 'boolean',\n        default: true\n      });\n      registerOption('add_unload_trigger', {\n        processor: 'boolean',\n        default: true\n      });\n      registerOption('custom_undo_redo_levels', {\n        processor: 'number',\n        default: 0\n      });\n      registerOption('disable_nodechange', {\n        processor: 'boolean',\n        default: false\n      });\n      registerOption('readonly', {\n        processor: 'boolean',\n        default: false\n      });\n      registerOption('plugins', {\n        processor: 'string[]',\n        default: []\n      });\n      registerOption('external_plugins', { processor: 'object' });\n      registerOption('forced_plugins', { processor: 'string[]' });\n      registerOption('model', {\n        processor: 'string',\n        default: editor.hasPlugin('rtc') ? 'plugin' : 'dom'\n      });\n      registerOption('model_url', { processor: 'string' });\n      registerOption('block_unsupported_drop', {\n        processor: 'boolean',\n        default: true\n      });\n      registerOption('visual', {\n        processor: 'boolean',\n        default: true\n      });\n      registerOption('visual_table_class', {\n        processor: 'string',\n        default: 'mce-item-table'\n      });\n      registerOption('visual_anchor_class', {\n        processor: 'string',\n        default: 'mce-item-anchor'\n      });\n      registerOption('iframe_aria_text', {\n        processor: 'string',\n        default: 'Rich Text Area. Press ALT-0 for help.'\n      });\n      registerOption('setup', { processor: 'function' });\n      registerOption('init_instance_callback', { processor: 'function' });\n      registerOption('url_converter', {\n        processor: 'function',\n        default: editor.convertURL\n      });\n      registerOption('url_converter_scope', {\n        processor: 'object',\n        default: editor\n      });\n      registerOption('urlconverter_callback', { processor: 'function' });\n      registerOption('allow_conditional_comments', {\n        processor: 'boolean',\n        default: false\n      });\n      registerOption('allow_html_data_urls', {\n        processor: 'boolean',\n        default: false\n      });\n      registerOption('allow_svg_data_urls', { processor: 'boolean' });\n      registerOption('allow_html_in_named_anchor', {\n        processor: 'boolean',\n        default: false\n      });\n      registerOption('allow_script_urls', {\n        processor: 'boolean',\n        default: false\n      });\n      registerOption('allow_unsafe_link_target', {\n        processor: 'boolean',\n        default: false\n      });\n      registerOption('convert_fonts_to_spans', {\n        processor: 'boolean',\n        default: true,\n        deprecated: true\n      });\n      registerOption('fix_list_elements', {\n        processor: 'boolean',\n        default: false\n      });\n      registerOption('preserve_cdata', {\n        processor: 'boolean',\n        default: false\n      });\n      registerOption('remove_trailing_brs', { processor: 'boolean' });\n      registerOption('inline_styles', {\n        processor: 'boolean',\n        default: true,\n        deprecated: true\n      });\n      registerOption('element_format', {\n        processor: 'string',\n        default: 'html'\n      });\n      registerOption('entities', { processor: 'string' });\n      registerOption('schema', {\n        processor: 'string',\n        default: 'html5'\n      });\n      registerOption('convert_urls', {\n        processor: 'boolean',\n        default: true\n      });\n      registerOption('relative_urls', {\n        processor: 'boolean',\n        default: true\n      });\n      registerOption('remove_script_host', {\n        processor: 'boolean',\n        default: true\n      });\n      registerOption('custom_elements', { processor: 'string' });\n      registerOption('extended_valid_elements', { processor: 'string' });\n      registerOption('invalid_elements', { processor: 'string' });\n      registerOption('invalid_styles', { processor: stringOrObjectProcessor });\n      registerOption('valid_children', { processor: 'string' });\n      registerOption('valid_classes', { processor: stringOrObjectProcessor });\n      registerOption('valid_elements', { processor: 'string' });\n      registerOption('valid_styles', { processor: stringOrObjectProcessor });\n      registerOption('verify_html', {\n        processor: 'boolean',\n        default: true\n      });\n      registerOption('auto_focus', { processor: value => isString(value) || value === true });\n      registerOption('browser_spellcheck', {\n        processor: 'boolean',\n        default: false\n      });\n      registerOption('protect', { processor: 'array' });\n      registerOption('images_file_types', {\n        processor: 'string',\n        default: 'jpeg,jpg,jpe,jfi,jif,jfif,png,gif,bmp,webp'\n      });\n      registerOption('deprecation_warnings', {\n        processor: 'boolean',\n        default: true\n      });\n      registerOption('a11y_advanced_options', {\n        processor: 'boolean',\n        default: false\n      });\n      registerOption('api_key', { processor: 'string' });\n      registerOption('paste_block_drop', {\n        processor: 'boolean',\n        default: false\n      });\n      registerOption('paste_data_images', {\n        processor: 'boolean',\n        default: true\n      });\n      registerOption('paste_preprocess', { processor: 'function' });\n      registerOption('paste_postprocess', { processor: 'function' });\n      registerOption('paste_webkit_styles', {\n        processor: 'string',\n        default: 'none'\n      });\n      registerOption('paste_remove_styles_if_webkit', {\n        processor: 'boolean',\n        default: true\n      });\n      registerOption('paste_merge_formats', {\n        processor: 'boolean',\n        default: true\n      });\n      registerOption('smart_paste', {\n        processor: 'boolean',\n        default: true\n      });\n      registerOption('paste_as_text', {\n        processor: 'boolean',\n        default: false\n      });\n      registerOption('paste_tab_spaces', {\n        processor: 'number',\n        default: 4\n      });\n      registerOption('text_patterns', {\n        processor: value => {\n          if (isArrayOf(value, isObject) || value === false) {\n            const patterns = value === false ? [] : value;\n            return {\n              value: fromRawPatterns(patterns),\n              valid: true\n            };\n          } else {\n            return {\n              valid: false,\n              message: 'Must be an array of objects or false.'\n            };\n          }\n        },\n        default: [\n          {\n            start: '*',\n            end: '*',\n            format: 'italic'\n          },\n          {\n            start: '**',\n            end: '**',\n            format: 'bold'\n          },\n          {\n            start: '#',\n            format: 'h1'\n          },\n          {\n            start: '##',\n            format: 'h2'\n          },\n          {\n            start: '###',\n            format: 'h3'\n          },\n          {\n            start: '####',\n            format: 'h4'\n          },\n          {\n            start: '#####',\n            format: 'h5'\n          },\n          {\n            start: '######',\n            format: 'h6'\n          },\n          {\n            start: '1. ',\n            cmd: 'InsertOrderedList'\n          },\n          {\n            start: '* ',\n            cmd: 'InsertUnorderedList'\n          },\n          {\n            start: '- ',\n            cmd: 'InsertUnorderedList'\n          }\n        ]\n      });\n      registerOption('text_patterns_lookup', {\n        processor: value => {\n          if (isFunction(value)) {\n            return {\n              value: fromRawPatternsLookup(value),\n              valid: true\n            };\n          } else {\n            return {\n              valid: false,\n              message: 'Must be a single function'\n            };\n          }\n        },\n        default: _ctx => []\n      });\n      registerOption('noneditable_class', {\n        processor: 'string',\n        default: 'mceNonEditable'\n      });\n      registerOption('editable_class', {\n        processor: 'string',\n        default: 'mceEditable'\n      });\n      registerOption('noneditable_regexp', {\n        processor: value => {\n          if (isArrayOf(value, isRegExp)) {\n            return {\n              value,\n              valid: true\n            };\n          } else if (isRegExp(value)) {\n            return {\n              value: [value],\n              valid: true\n            };\n          } else {\n            return {\n              valid: false,\n              message: 'Must be a RegExp or an array of RegExp.'\n            };\n          }\n        },\n        default: []\n      });\n      registerOption('table_tab_navigation', {\n        processor: 'boolean',\n        default: true\n      });\n      editor.on('ScriptsLoaded', () => {\n        registerOption('directionality', {\n          processor: 'string',\n          default: I18n.isRtl() ? 'rtl' : undefined\n        });\n        registerOption('placeholder', {\n          processor: 'string',\n          default: DOM$a.getAttrib(editor.getElement(), 'placeholder')\n        });\n      });\n    };\n    const getIframeAttrs = option('iframe_attrs');\n    const getDocType = option('doctype');\n    const getDocumentBaseUrl = option('document_base_url');\n    const getBodyId = option('body_id');\n    const getBodyClass = option('body_class');\n    const getContentSecurityPolicy = option('content_security_policy');\n    const shouldPutBrInPre$1 = option('br_in_pre');\n    const getForcedRootBlock = option('forced_root_block');\n    const getForcedRootBlockAttrs = option('forced_root_block_attrs');\n    const getNewlineBehavior = option('newline_behavior');\n    const getBrNewLineSelector = option('br_newline_selector');\n    const getNoNewLineSelector = option('no_newline_selector');\n    const shouldKeepStyles = option('keep_styles');\n    const shouldEndContainerOnEmptyBlock = option('end_container_on_empty_block');\n    const isAutomaticUploadsEnabled = option('automatic_uploads');\n    const shouldReuseFileName = option('images_reuse_filename');\n    const shouldReplaceBlobUris = option('images_replace_blob_uris');\n    const getIconPackName = option('icons');\n    const getIconsUrl = option('icons_url');\n    const getImageUploadUrl = option('images_upload_url');\n    const getImageUploadBasePath = option('images_upload_base_path');\n    const getImagesUploadCredentials = option('images_upload_credentials');\n    const getImagesUploadHandler = option('images_upload_handler');\n    const shouldUseContentCssCors = option('content_css_cors');\n    const getReferrerPolicy = option('referrer_policy');\n    const getLanguageCode = option('language');\n    const getLanguageUrl = option('language_url');\n    const shouldIndentUseMargin = option('indent_use_margin');\n    const getIndentation = option('indentation');\n    const getContentCss = option('content_css');\n    const getContentStyle = option('content_style');\n    const getFontCss = option('font_css');\n    const getDirectionality = option('directionality');\n    const getInlineBoundarySelector = option('inline_boundaries_selector');\n    const getObjectResizing = option('object_resizing');\n    const getResizeImgProportional = option('resize_img_proportional');\n    const getPlaceholder = option('placeholder');\n    const getEventRoot = option('event_root');\n    const getServiceMessage = option('service_message');\n    const getTheme = option('theme');\n    const getThemeUrl = option('theme_url');\n    const getModel = option('model');\n    const getModelUrl = option('model_url');\n    const isInlineBoundariesEnabled = option('inline_boundaries');\n    const getFormats = option('formats');\n    const getPreviewStyles = option('preview_styles');\n    const canFormatEmptyLines = option('format_empty_lines');\n    const getFormatNoneditableSelector = option('format_noneditable_selector');\n    const getCustomUiSelector = option('custom_ui_selector');\n    const isInline = option('inline');\n    const hasHiddenInput = option('hidden_input');\n    const shouldPatchSubmit = option('submit_patch');\n    const shouldAddFormSubmitTrigger = option('add_form_submit_trigger');\n    const shouldAddUnloadTrigger = option('add_unload_trigger');\n    const getCustomUndoRedoLevels = option('custom_undo_redo_levels');\n    const shouldDisableNodeChange = option('disable_nodechange');\n    const isReadOnly$1 = option('readonly');\n    const hasContentCssCors = option('content_css_cors');\n    const getPlugins = option('plugins');\n    const getExternalPlugins$1 = option('external_plugins');\n    const shouldBlockUnsupportedDrop = option('block_unsupported_drop');\n    const isVisualAidsEnabled = option('visual');\n    const getVisualAidsTableClass = option('visual_table_class');\n    const getVisualAidsAnchorClass = option('visual_anchor_class');\n    const getIframeAriaText = option('iframe_aria_text');\n    const getSetupCallback = option('setup');\n    const getInitInstanceCallback = option('init_instance_callback');\n    const getUrlConverterCallback = option('urlconverter_callback');\n    const getAutoFocus = option('auto_focus');\n    const shouldBrowserSpellcheck = option('browser_spellcheck');\n    const getProtect = option('protect');\n    const shouldPasteBlockDrop = option('paste_block_drop');\n    const shouldPasteDataImages = option('paste_data_images');\n    const getPastePreProcess = option('paste_preprocess');\n    const getPastePostProcess = option('paste_postprocess');\n    const getPasteWebkitStyles = option('paste_webkit_styles');\n    const shouldPasteRemoveWebKitStyles = option('paste_remove_styles_if_webkit');\n    const shouldPasteMergeFormats = option('paste_merge_formats');\n    const isSmartPasteEnabled = option('smart_paste');\n    const isPasteAsTextEnabled = option('paste_as_text');\n    const getPasteTabSpaces = option('paste_tab_spaces');\n    const shouldAllowHtmlDataUrls = option('allow_html_data_urls');\n    const getTextPatterns = option('text_patterns');\n    const getTextPatternsLookup = option('text_patterns_lookup');\n    const getNonEditableClass = option('noneditable_class');\n    const getEditableClass = option('editable_class');\n    const getNonEditableRegExps = option('noneditable_regexp');\n    const shouldPreserveCData = option('preserve_cdata');\n    const hasTextPatternsLookup = editor => editor.options.isSet('text_patterns_lookup');\n    const getFontStyleValues = editor => Tools.explode(editor.options.get('font_size_style_values'));\n    const getFontSizeClasses = editor => Tools.explode(editor.options.get('font_size_classes'));\n    const isEncodingXml = editor => editor.options.get('encoding') === 'xml';\n    const getAllowedImageFileTypes = editor => Tools.explode(editor.options.get('images_file_types'));\n    const hasTableTabNavigation = option('table_tab_navigation');\n\n    const isElement$3 = isElement$6;\n    const isText$5 = isText$a;\n    const removeNode$1 = node => {\n      const parentNode = node.parentNode;\n      if (parentNode) {\n        parentNode.removeChild(node);\n      }\n    };\n    const trimCount = text => {\n      const trimmedText = trim$1(text);\n      return {\n        count: text.length - trimmedText.length,\n        text: trimmedText\n      };\n    };\n    const deleteZwspChars = caretContainer => {\n      let idx;\n      while ((idx = caretContainer.data.lastIndexOf(ZWSP$1)) !== -1) {\n        caretContainer.deleteData(idx, 1);\n      }\n    };\n    const removeUnchanged = (caretContainer, pos) => {\n      remove$4(caretContainer);\n      return pos;\n    };\n    const removeTextAndReposition = (caretContainer, pos) => {\n      const before = trimCount(caretContainer.data.substr(0, pos.offset()));\n      const after = trimCount(caretContainer.data.substr(pos.offset()));\n      const text = before.text + after.text;\n      if (text.length > 0) {\n        deleteZwspChars(caretContainer);\n        return CaretPosition(caretContainer, pos.offset() - before.count);\n      } else {\n        return pos;\n      }\n    };\n    const removeElementAndReposition = (caretContainer, pos) => {\n      const parentNode = pos.container();\n      const newPosition = indexOf$1(from(parentNode.childNodes), caretContainer).map(index => {\n        return index < pos.offset() ? CaretPosition(parentNode, pos.offset() - 1) : pos;\n      }).getOr(pos);\n      remove$4(caretContainer);\n      return newPosition;\n    };\n    const removeTextCaretContainer = (caretContainer, pos) => isText$5(caretContainer) && pos.container() === caretContainer ? removeTextAndReposition(caretContainer, pos) : removeUnchanged(caretContainer, pos);\n    const removeElementCaretContainer = (caretContainer, pos) => pos.container() === caretContainer.parentNode ? removeElementAndReposition(caretContainer, pos) : removeUnchanged(caretContainer, pos);\n    const removeAndReposition = (container, pos) => CaretPosition.isTextPosition(pos) ? removeTextCaretContainer(container, pos) : removeElementCaretContainer(container, pos);\n    const remove$4 = caretContainerNode => {\n      if (isElement$3(caretContainerNode) && isCaretContainer$2(caretContainerNode)) {\n        if (hasContent(caretContainerNode)) {\n          caretContainerNode.removeAttribute('data-mce-caret');\n        } else {\n          removeNode$1(caretContainerNode);\n        }\n      }\n      if (isText$5(caretContainerNode)) {\n        deleteZwspChars(caretContainerNode);\n        if (caretContainerNode.data.length === 0) {\n          removeNode$1(caretContainerNode);\n        }\n      }\n    };\n\n    const isContentEditableFalse$7 = isContentEditableFalse$a;\n    const isMedia$1 = isMedia$2;\n    const isTableCell$1 = isTableCell$3;\n    const inlineFakeCaretSelector = '*[contentEditable=false],video,audio,embed,object';\n    const getAbsoluteClientRect = (root, element, before) => {\n      const clientRect = collapse(element.getBoundingClientRect(), before);\n      let scrollX;\n      let scrollY;\n      if (root.tagName === 'BODY') {\n        const docElm = root.ownerDocument.documentElement;\n        scrollX = root.scrollLeft || docElm.scrollLeft;\n        scrollY = root.scrollTop || docElm.scrollTop;\n      } else {\n        const rootRect = root.getBoundingClientRect();\n        scrollX = root.scrollLeft - rootRect.left;\n        scrollY = root.scrollTop - rootRect.top;\n      }\n      clientRect.left += scrollX;\n      clientRect.right += scrollX;\n      clientRect.top += scrollY;\n      clientRect.bottom += scrollY;\n      clientRect.width = 1;\n      let margin = element.offsetWidth - element.clientWidth;\n      if (margin > 0) {\n        if (before) {\n          margin *= -1;\n        }\n        clientRect.left += margin;\n        clientRect.right += margin;\n      }\n      return clientRect;\n    };\n    const trimInlineCaretContainers = root => {\n      var _a, _b;\n      const fakeCaretTargetNodes = descendants(SugarElement.fromDom(root), inlineFakeCaretSelector);\n      for (let i = 0; i < fakeCaretTargetNodes.length; i++) {\n        const node = fakeCaretTargetNodes[i].dom;\n        let sibling = node.previousSibling;\n        if (endsWithCaretContainer$1(sibling)) {\n          const data = sibling.data;\n          if (data.length === 1) {\n            (_a = sibling.parentNode) === null || _a === void 0 ? void 0 : _a.removeChild(sibling);\n          } else {\n            sibling.deleteData(data.length - 1, 1);\n          }\n        }\n        sibling = node.nextSibling;\n        if (startsWithCaretContainer$1(sibling)) {\n          const data = sibling.data;\n          if (data.length === 1) {\n            (_b = sibling.parentNode) === null || _b === void 0 ? void 0 : _b.removeChild(sibling);\n          } else {\n            sibling.deleteData(0, 1);\n          }\n        }\n      }\n    };\n    const FakeCaret = (editor, root, isBlock, hasFocus) => {\n      const lastVisualCaret = value$2();\n      let cursorInterval;\n      let caretContainerNode;\n      const caretBlock = getForcedRootBlock(editor);\n      const dom = editor.dom;\n      const show = (before, element) => {\n        let rng;\n        hide();\n        if (isTableCell$1(element)) {\n          return null;\n        }\n        if (isBlock(element)) {\n          const caretContainer = insertBlock(caretBlock, element, before);\n          const clientRect = getAbsoluteClientRect(root, element, before);\n          dom.setStyle(caretContainer, 'top', clientRect.top);\n          caretContainerNode = caretContainer;\n          const caret = dom.create('div', {\n            'class': 'mce-visual-caret',\n            'data-mce-bogus': 'all'\n          });\n          dom.setStyles(caret, { ...clientRect });\n          dom.add(root, caret);\n          lastVisualCaret.set({\n            caret,\n            element,\n            before\n          });\n          if (before) {\n            dom.addClass(caret, 'mce-visual-caret-before');\n          }\n          startBlink();\n          rng = element.ownerDocument.createRange();\n          rng.setStart(caretContainer, 0);\n          rng.setEnd(caretContainer, 0);\n        } else {\n          caretContainerNode = insertInline$1(element, before);\n          rng = element.ownerDocument.createRange();\n          if (isInlineFakeCaretTarget(caretContainerNode.nextSibling)) {\n            rng.setStart(caretContainerNode, 0);\n            rng.setEnd(caretContainerNode, 0);\n          } else {\n            rng.setStart(caretContainerNode, 1);\n            rng.setEnd(caretContainerNode, 1);\n          }\n          return rng;\n        }\n        return rng;\n      };\n      const hide = () => {\n        trimInlineCaretContainers(root);\n        if (caretContainerNode) {\n          remove$4(caretContainerNode);\n          caretContainerNode = null;\n        }\n        lastVisualCaret.on(caretState => {\n          dom.remove(caretState.caret);\n          lastVisualCaret.clear();\n        });\n        if (cursorInterval) {\n          clearInterval(cursorInterval);\n          cursorInterval = undefined;\n        }\n      };\n      const startBlink = () => {\n        cursorInterval = setInterval(() => {\n          lastVisualCaret.on(caretState => {\n            if (hasFocus()) {\n              dom.toggleClass(caretState.caret, 'mce-visual-caret-hidden');\n            } else {\n              dom.addClass(caretState.caret, 'mce-visual-caret-hidden');\n            }\n          });\n        }, 500);\n      };\n      const reposition = () => {\n        lastVisualCaret.on(caretState => {\n          const clientRect = getAbsoluteClientRect(root, caretState.element, caretState.before);\n          dom.setStyles(caretState.caret, { ...clientRect });\n        });\n      };\n      const destroy = () => clearInterval(cursorInterval);\n      const getCss = () => '.mce-visual-caret {' + 'position: absolute;' + 'background-color: black;' + 'background-color: currentcolor;' + '}' + '.mce-visual-caret-hidden {' + 'display: none;' + '}' + '*[data-mce-caret] {' + 'position: absolute;' + 'left: -1000px;' + 'right: auto;' + 'top: 0;' + 'margin: 0;' + 'padding: 0;' + '}';\n      return {\n        show,\n        hide,\n        getCss,\n        reposition,\n        destroy\n      };\n    };\n    const isFakeCaretTableBrowser = () => Env.browser.isFirefox();\n    const isInlineFakeCaretTarget = node => isContentEditableFalse$7(node) || isMedia$1(node);\n    const isFakeCaretTarget = node => isInlineFakeCaretTarget(node) || isTable$2(node) && isFakeCaretTableBrowser();\n\n    const isContentEditableTrue$1 = isContentEditableTrue$3;\n    const isContentEditableFalse$6 = isContentEditableFalse$a;\n    const isMedia = isMedia$2;\n    const isBlockLike = matchStyleValues('display', 'block table table-cell table-caption list-item');\n    const isCaretContainer = isCaretContainer$2;\n    const isCaretContainerBlock = isCaretContainerBlock$1;\n    const isElement$2 = isElement$6;\n    const isText$4 = isText$a;\n    const isCaretCandidate$1 = isCaretCandidate$3;\n    const isForwards = direction => direction > 0;\n    const isBackwards = direction => direction < 0;\n    const skipCaretContainers = (walk, shallow) => {\n      let node;\n      while (node = walk(shallow)) {\n        if (!isCaretContainerBlock(node)) {\n          return node;\n        }\n      }\n      return null;\n    };\n    const findNode = (node, direction, predicateFn, rootNode, shallow) => {\n      const walker = new DomTreeWalker(node, rootNode);\n      const isCefOrCaretContainer = isContentEditableFalse$6(node) || isCaretContainerBlock(node);\n      let tempNode;\n      if (isBackwards(direction)) {\n        if (isCefOrCaretContainer) {\n          tempNode = skipCaretContainers(walker.prev.bind(walker), true);\n          if (predicateFn(tempNode)) {\n            return tempNode;\n          }\n        }\n        while (tempNode = skipCaretContainers(walker.prev.bind(walker), shallow)) {\n          if (predicateFn(tempNode)) {\n            return tempNode;\n          }\n        }\n      }\n      if (isForwards(direction)) {\n        if (isCefOrCaretContainer) {\n          tempNode = skipCaretContainers(walker.next.bind(walker), true);\n          if (predicateFn(tempNode)) {\n            return tempNode;\n          }\n        }\n        while (tempNode = skipCaretContainers(walker.next.bind(walker), shallow)) {\n          if (predicateFn(tempNode)) {\n            return tempNode;\n          }\n        }\n      }\n      return null;\n    };\n    const getEditingHost = (node, rootNode) => {\n      const isCETrue = node => isContentEditableTrue$1(node.dom);\n      const isRoot = node => node.dom === rootNode;\n      return ancestor$3(SugarElement.fromDom(node), isCETrue, isRoot).map(elm => elm.dom).getOr(rootNode);\n    };\n    const getParentBlock$3 = (node, rootNode) => {\n      while (node && node !== rootNode) {\n        if (isBlockLike(node)) {\n          return node;\n        }\n        node = node.parentNode;\n      }\n      return null;\n    };\n    const isInSameBlock = (caretPosition1, caretPosition2, rootNode) => getParentBlock$3(caretPosition1.container(), rootNode) === getParentBlock$3(caretPosition2.container(), rootNode);\n    const getChildNodeAtRelativeOffset = (relativeOffset, caretPosition) => {\n      if (!caretPosition) {\n        return Optional.none();\n      }\n      const container = caretPosition.container();\n      const offset = caretPosition.offset();\n      if (!isElement$2(container)) {\n        return Optional.none();\n      }\n      return Optional.from(container.childNodes[offset + relativeOffset]);\n    };\n    const beforeAfter = (before, node) => {\n      var _a;\n      const doc = (_a = node.ownerDocument) !== null && _a !== void 0 ? _a : document;\n      const range = doc.createRange();\n      if (before) {\n        range.setStartBefore(node);\n        range.setEndBefore(node);\n      } else {\n        range.setStartAfter(node);\n        range.setEndAfter(node);\n      }\n      return range;\n    };\n    const isNodesInSameBlock = (root, node1, node2) => getParentBlock$3(node1, root) === getParentBlock$3(node2, root);\n    const lean = (left, root, node) => {\n      const siblingName = left ? 'previousSibling' : 'nextSibling';\n      let tempNode = node;\n      while (tempNode && tempNode !== root) {\n        let sibling = tempNode[siblingName];\n        if (sibling && isCaretContainer(sibling)) {\n          sibling = sibling[siblingName];\n        }\n        if (isContentEditableFalse$6(sibling) || isMedia(sibling)) {\n          if (isNodesInSameBlock(root, sibling, tempNode)) {\n            return sibling;\n          }\n          break;\n        }\n        if (isCaretCandidate$1(sibling)) {\n          break;\n        }\n        tempNode = tempNode.parentNode;\n      }\n      return null;\n    };\n    const before$2 = curry(beforeAfter, true);\n    const after$2 = curry(beforeAfter, false);\n    const normalizeRange = (direction, root, range) => {\n      let node;\n      const leanLeft = curry(lean, true, root);\n      const leanRight = curry(lean, false, root);\n      const container = range.startContainer;\n      const offset = range.startOffset;\n      if (isCaretContainerBlock$1(container)) {\n        const block = isText$4(container) ? container.parentNode : container;\n        const location = block.getAttribute('data-mce-caret');\n        if (location === 'before') {\n          node = block.nextSibling;\n          if (isFakeCaretTarget(node)) {\n            return before$2(node);\n          }\n        }\n        if (location === 'after') {\n          node = block.previousSibling;\n          if (isFakeCaretTarget(node)) {\n            return after$2(node);\n          }\n        }\n      }\n      if (!range.collapsed) {\n        return range;\n      }\n      if (isText$a(container)) {\n        if (isCaretContainer(container)) {\n          if (direction === 1) {\n            node = leanRight(container);\n            if (node) {\n              return before$2(node);\n            }\n            node = leanLeft(container);\n            if (node) {\n              return after$2(node);\n            }\n          }\n          if (direction === -1) {\n            node = leanLeft(container);\n            if (node) {\n              return after$2(node);\n            }\n            node = leanRight(container);\n            if (node) {\n              return before$2(node);\n            }\n          }\n          return range;\n        }\n        if (endsWithCaretContainer$1(container) && offset >= container.data.length - 1) {\n          if (direction === 1) {\n            node = leanRight(container);\n            if (node) {\n              return before$2(node);\n            }\n          }\n          return range;\n        }\n        if (startsWithCaretContainer$1(container) && offset <= 1) {\n          if (direction === -1) {\n            node = leanLeft(container);\n            if (node) {\n              return after$2(node);\n            }\n          }\n          return range;\n        }\n        if (offset === container.data.length) {\n          node = leanRight(container);\n          if (node) {\n            return before$2(node);\n          }\n          return range;\n        }\n        if (offset === 0) {\n          node = leanLeft(container);\n          if (node) {\n            return after$2(node);\n          }\n          return range;\n        }\n      }\n      return range;\n    };\n    const getRelativeCefElm = (forward, caretPosition) => getChildNodeAtRelativeOffset(forward ? 0 : -1, caretPosition).filter(isContentEditableFalse$6);\n    const getNormalizedRangeEndPoint = (direction, root, range) => {\n      const normalizedRange = normalizeRange(direction, root, range);\n      return direction === -1 ? CaretPosition.fromRangeStart(normalizedRange) : CaretPosition.fromRangeEnd(normalizedRange);\n    };\n    const getElementFromPosition = pos => Optional.from(pos.getNode()).map(SugarElement.fromDom);\n    const getElementFromPrevPosition = pos => Optional.from(pos.getNode(true)).map(SugarElement.fromDom);\n    const getVisualCaretPosition = (walkFn, caretPosition) => {\n      let pos = caretPosition;\n      while (pos = walkFn(pos)) {\n        if (pos.isVisible()) {\n          return pos;\n        }\n      }\n      return pos;\n    };\n    const isMoveInsideSameBlock = (from, to) => {\n      const inSameBlock = isInSameBlock(from, to);\n      if (!inSameBlock && isBr$6(from.getNode())) {\n        return true;\n      }\n      return inSameBlock;\n    };\n\n    var HDirection;\n    (function (HDirection) {\n      HDirection[HDirection['Backwards'] = -1] = 'Backwards';\n      HDirection[HDirection['Forwards'] = 1] = 'Forwards';\n    }(HDirection || (HDirection = {})));\n    const isContentEditableFalse$5 = isContentEditableFalse$a;\n    const isText$3 = isText$a;\n    const isElement$1 = isElement$6;\n    const isBr$2 = isBr$6;\n    const isCaretCandidate = isCaretCandidate$3;\n    const isAtomic = isAtomic$1;\n    const isEditableCaretCandidate = isEditableCaretCandidate$1;\n    const getParents$3 = (node, root) => {\n      const parents = [];\n      let tempNode = node;\n      while (tempNode && tempNode !== root) {\n        parents.push(tempNode);\n        tempNode = tempNode.parentNode;\n      }\n      return parents;\n    };\n    const nodeAtIndex = (container, offset) => {\n      if (container.hasChildNodes() && offset < container.childNodes.length) {\n        return container.childNodes[offset];\n      }\n      return null;\n    };\n    const getCaretCandidatePosition = (direction, node) => {\n      if (isForwards(direction)) {\n        if (isCaretCandidate(node.previousSibling) && !isText$3(node.previousSibling)) {\n          return CaretPosition.before(node);\n        }\n        if (isText$3(node)) {\n          return CaretPosition(node, 0);\n        }\n      }\n      if (isBackwards(direction)) {\n        if (isCaretCandidate(node.nextSibling) && !isText$3(node.nextSibling)) {\n          return CaretPosition.after(node);\n        }\n        if (isText$3(node)) {\n          return CaretPosition(node, node.data.length);\n        }\n      }\n      if (isBackwards(direction)) {\n        if (isBr$2(node)) {\n          return CaretPosition.before(node);\n        }\n        return CaretPosition.after(node);\n      }\n      return CaretPosition.before(node);\n    };\n    const moveForwardFromBr = (root, nextNode) => {\n      const nextSibling = nextNode.nextSibling;\n      if (nextSibling && isCaretCandidate(nextSibling)) {\n        if (isText$3(nextSibling)) {\n          return CaretPosition(nextSibling, 0);\n        } else {\n          return CaretPosition.before(nextSibling);\n        }\n      } else {\n        return findCaretPosition$1(HDirection.Forwards, CaretPosition.after(nextNode), root);\n      }\n    };\n    const findCaretPosition$1 = (direction, startPos, root) => {\n      let node;\n      let nextNode;\n      let innerNode;\n      let caretPosition;\n      if (!isElement$1(root) || !startPos) {\n        return null;\n      }\n      if (startPos.isEqual(CaretPosition.after(root)) && root.lastChild) {\n        caretPosition = CaretPosition.after(root.lastChild);\n        if (isBackwards(direction) && isCaretCandidate(root.lastChild) && isElement$1(root.lastChild)) {\n          return isBr$2(root.lastChild) ? CaretPosition.before(root.lastChild) : caretPosition;\n        }\n      } else {\n        caretPosition = startPos;\n      }\n      const container = caretPosition.container();\n      let offset = caretPosition.offset();\n      if (isText$3(container)) {\n        if (isBackwards(direction) && offset > 0) {\n          return CaretPosition(container, --offset);\n        }\n        if (isForwards(direction) && offset < container.length) {\n          return CaretPosition(container, ++offset);\n        }\n        node = container;\n      } else {\n        if (isBackwards(direction) && offset > 0) {\n          nextNode = nodeAtIndex(container, offset - 1);\n          if (isCaretCandidate(nextNode)) {\n            if (!isAtomic(nextNode)) {\n              innerNode = findNode(nextNode, direction, isEditableCaretCandidate, nextNode);\n              if (innerNode) {\n                if (isText$3(innerNode)) {\n                  return CaretPosition(innerNode, innerNode.data.length);\n                }\n                return CaretPosition.after(innerNode);\n              }\n            }\n            if (isText$3(nextNode)) {\n              return CaretPosition(nextNode, nextNode.data.length);\n            }\n            return CaretPosition.before(nextNode);\n          }\n        }\n        if (isForwards(direction) && offset < container.childNodes.length) {\n          nextNode = nodeAtIndex(container, offset);\n          if (isCaretCandidate(nextNode)) {\n            if (isBr$2(nextNode)) {\n              return moveForwardFromBr(root, nextNode);\n            }\n            if (!isAtomic(nextNode)) {\n              innerNode = findNode(nextNode, direction, isEditableCaretCandidate, nextNode);\n              if (innerNode) {\n                if (isText$3(innerNode)) {\n                  return CaretPosition(innerNode, 0);\n                }\n                return CaretPosition.before(innerNode);\n              }\n            }\n            if (isText$3(nextNode)) {\n              return CaretPosition(nextNode, 0);\n            }\n            return CaretPosition.after(nextNode);\n          }\n        }\n        node = nextNode ? nextNode : caretPosition.getNode();\n      }\n      if (node && (isForwards(direction) && caretPosition.isAtEnd() || isBackwards(direction) && caretPosition.isAtStart())) {\n        node = findNode(node, direction, always, root, true);\n        if (isEditableCaretCandidate(node, root)) {\n          return getCaretCandidatePosition(direction, node);\n        }\n      }\n      nextNode = node ? findNode(node, direction, isEditableCaretCandidate, root) : node;\n      const rootContentEditableFalseElm = last$2(filter$5(getParents$3(container, root), isContentEditableFalse$5));\n      if (rootContentEditableFalseElm && (!nextNode || !rootContentEditableFalseElm.contains(nextNode))) {\n        if (isForwards(direction)) {\n          caretPosition = CaretPosition.after(rootContentEditableFalseElm);\n        } else {\n          caretPosition = CaretPosition.before(rootContentEditableFalseElm);\n        }\n        return caretPosition;\n      }\n      if (nextNode) {\n        return getCaretCandidatePosition(direction, nextNode);\n      }\n      return null;\n    };\n    const CaretWalker = root => ({\n      next: caretPosition => {\n        return findCaretPosition$1(HDirection.Forwards, caretPosition, root);\n      },\n      prev: caretPosition => {\n        return findCaretPosition$1(HDirection.Backwards, caretPosition, root);\n      }\n    });\n\n    const walkToPositionIn = (forward, root, start) => {\n      const position = forward ? CaretPosition.before(start) : CaretPosition.after(start);\n      return fromPosition(forward, root, position);\n    };\n    const afterElement = node => isBr$6(node) ? CaretPosition.before(node) : CaretPosition.after(node);\n    const isBeforeOrStart = position => {\n      if (CaretPosition.isTextPosition(position)) {\n        return position.offset() === 0;\n      } else {\n        return isCaretCandidate$3(position.getNode());\n      }\n    };\n    const isAfterOrEnd = position => {\n      if (CaretPosition.isTextPosition(position)) {\n        const container = position.container();\n        return position.offset() === container.data.length;\n      } else {\n        return isCaretCandidate$3(position.getNode(true));\n      }\n    };\n    const isBeforeAfterSameElement = (from, to) => !CaretPosition.isTextPosition(from) && !CaretPosition.isTextPosition(to) && from.getNode() === to.getNode(true);\n    const isAtBr = position => !CaretPosition.isTextPosition(position) && isBr$6(position.getNode());\n    const shouldSkipPosition = (forward, from, to) => {\n      if (forward) {\n        return !isBeforeAfterSameElement(from, to) && !isAtBr(from) && isAfterOrEnd(from) && isBeforeOrStart(to);\n      } else {\n        return !isBeforeAfterSameElement(to, from) && isBeforeOrStart(from) && isAfterOrEnd(to);\n      }\n    };\n    const fromPosition = (forward, root, pos) => {\n      const walker = CaretWalker(root);\n      return Optional.from(forward ? walker.next(pos) : walker.prev(pos));\n    };\n    const navigate = (forward, root, from) => fromPosition(forward, root, from).bind(to => {\n      if (isInSameBlock(from, to, root) && shouldSkipPosition(forward, from, to)) {\n        return fromPosition(forward, root, to);\n      } else {\n        return Optional.some(to);\n      }\n    });\n    const navigateIgnore = (forward, root, from, ignoreFilter) => navigate(forward, root, from).bind(pos => ignoreFilter(pos) ? navigateIgnore(forward, root, pos, ignoreFilter) : Optional.some(pos));\n    const positionIn = (forward, element) => {\n      const startNode = forward ? element.firstChild : element.lastChild;\n      if (isText$a(startNode)) {\n        return Optional.some(CaretPosition(startNode, forward ? 0 : startNode.data.length));\n      } else if (startNode) {\n        if (isCaretCandidate$3(startNode)) {\n          return Optional.some(forward ? CaretPosition.before(startNode) : afterElement(startNode));\n        } else {\n          return walkToPositionIn(forward, element, startNode);\n        }\n      } else {\n        return Optional.none();\n      }\n    };\n    const nextPosition = curry(fromPosition, true);\n    const prevPosition = curry(fromPosition, false);\n    const firstPositionIn = curry(positionIn, true);\n    const lastPositionIn = curry(positionIn, false);\n\n    const CARET_ID = '_mce_caret';\n    const isCaretNode = node => isElement$6(node) && node.id === CARET_ID;\n    const getParentCaretContainer = (body, node) => {\n      let currentNode = node;\n      while (currentNode && currentNode !== body) {\n        if (isCaretNode(currentNode)) {\n          return currentNode;\n        }\n        currentNode = currentNode.parentNode;\n      }\n      return null;\n    };\n\n    const isStringPathBookmark = bookmark => isString(bookmark.start);\n    const isRangeBookmark = bookmark => has$2(bookmark, 'rng');\n    const isIdBookmark = bookmark => has$2(bookmark, 'id');\n    const isIndexBookmark = bookmark => has$2(bookmark, 'name');\n    const isPathBookmark = bookmark => Tools.isArray(bookmark.start);\n\n    const isForwardBookmark = bookmark => !isIndexBookmark(bookmark) && isBoolean(bookmark.forward) ? bookmark.forward : true;\n    const addBogus = (dom, node) => {\n      if (isElement$6(node) && dom.isBlock(node) && !node.innerHTML) {\n        node.innerHTML = '<br data-mce-bogus=\"1\" />';\n      }\n      return node;\n    };\n    const resolveCaretPositionBookmark = (dom, bookmark) => {\n      const startPos = Optional.from(resolve$1(dom.getRoot(), bookmark.start));\n      const endPos = Optional.from(resolve$1(dom.getRoot(), bookmark.end));\n      return lift2(startPos, endPos, (start, end) => {\n        const range = dom.createRng();\n        range.setStart(start.container(), start.offset());\n        range.setEnd(end.container(), end.offset());\n        return {\n          range,\n          forward: isForwardBookmark(bookmark)\n        };\n      });\n    };\n    const insertZwsp = (node, rng) => {\n      var _a;\n      const doc = (_a = node.ownerDocument) !== null && _a !== void 0 ? _a : document;\n      const textNode = doc.createTextNode(ZWSP$1);\n      node.appendChild(textNode);\n      rng.setStart(textNode, 0);\n      rng.setEnd(textNode, 0);\n    };\n    const isEmpty$1 = node => !node.hasChildNodes();\n    const tryFindRangePosition = (node, rng) => lastPositionIn(node).fold(never, pos => {\n      rng.setStart(pos.container(), pos.offset());\n      rng.setEnd(pos.container(), pos.offset());\n      return true;\n    });\n    const padEmptyCaretContainer = (root, node, rng) => {\n      if (isEmpty$1(node) && getParentCaretContainer(root, node)) {\n        insertZwsp(node, rng);\n        return true;\n      } else {\n        return false;\n      }\n    };\n    const setEndPoint = (dom, start, bookmark, rng) => {\n      const point = bookmark[start ? 'start' : 'end'];\n      const root = dom.getRoot();\n      if (point) {\n        let node = root;\n        let offset = point[0];\n        for (let i = point.length - 1; node && i >= 1; i--) {\n          const children = node.childNodes;\n          if (padEmptyCaretContainer(root, node, rng)) {\n            return true;\n          }\n          if (point[i] > children.length - 1) {\n            if (padEmptyCaretContainer(root, node, rng)) {\n              return true;\n            }\n            return tryFindRangePosition(node, rng);\n          }\n          node = children[point[i]];\n        }\n        if (isText$a(node)) {\n          offset = Math.min(point[0], node.data.length);\n        }\n        if (isElement$6(node)) {\n          offset = Math.min(point[0], node.childNodes.length);\n        }\n        if (start) {\n          rng.setStart(node, offset);\n        } else {\n          rng.setEnd(node, offset);\n        }\n      }\n      return true;\n    };\n    const isValidTextNode = node => isText$a(node) && node.data.length > 0;\n    const restoreEndPoint = (dom, suffix, bookmark) => {\n      const marker = dom.get(bookmark.id + '_' + suffix);\n      const markerParent = marker === null || marker === void 0 ? void 0 : marker.parentNode;\n      const keep = bookmark.keep;\n      if (marker && markerParent) {\n        let container;\n        let offset;\n        if (suffix === 'start') {\n          if (!keep) {\n            container = markerParent;\n            offset = dom.nodeIndex(marker);\n          } else {\n            if (marker.hasChildNodes()) {\n              container = marker.firstChild;\n              offset = 1;\n            } else if (isValidTextNode(marker.nextSibling)) {\n              container = marker.nextSibling;\n              offset = 0;\n            } else if (isValidTextNode(marker.previousSibling)) {\n              container = marker.previousSibling;\n              offset = marker.previousSibling.data.length;\n            } else {\n              container = markerParent;\n              offset = dom.nodeIndex(marker) + 1;\n            }\n          }\n        } else {\n          if (!keep) {\n            container = markerParent;\n            offset = dom.nodeIndex(marker);\n          } else {\n            if (marker.hasChildNodes()) {\n              container = marker.firstChild;\n              offset = 1;\n            } else if (isValidTextNode(marker.previousSibling)) {\n              container = marker.previousSibling;\n              offset = marker.previousSibling.data.length;\n            } else {\n              container = markerParent;\n              offset = dom.nodeIndex(marker);\n            }\n          }\n        }\n        if (!keep) {\n          const prev = marker.previousSibling;\n          const next = marker.nextSibling;\n          Tools.each(Tools.grep(marker.childNodes), node => {\n            if (isText$a(node)) {\n              node.data = node.data.replace(/\\uFEFF/g, '');\n            }\n          });\n          let otherMarker;\n          while (otherMarker = dom.get(bookmark.id + '_' + suffix)) {\n            dom.remove(otherMarker, true);\n          }\n          if (isText$a(next) && isText$a(prev) && !Env.browser.isOpera()) {\n            const idx = prev.data.length;\n            prev.appendData(next.data);\n            dom.remove(next);\n            container = prev;\n            offset = idx;\n          }\n        }\n        return Optional.some(CaretPosition(container, offset));\n      } else {\n        return Optional.none();\n      }\n    };\n    const resolvePaths = (dom, bookmark) => {\n      const range = dom.createRng();\n      if (setEndPoint(dom, true, bookmark, range) && setEndPoint(dom, false, bookmark, range)) {\n        return Optional.some({\n          range,\n          forward: isForwardBookmark(bookmark)\n        });\n      } else {\n        return Optional.none();\n      }\n    };\n    const resolveId = (dom, bookmark) => {\n      const startPos = restoreEndPoint(dom, 'start', bookmark);\n      const endPos = restoreEndPoint(dom, 'end', bookmark);\n      return lift2(startPos, endPos.or(startPos), (spos, epos) => {\n        const range = dom.createRng();\n        range.setStart(addBogus(dom, spos.container()), spos.offset());\n        range.setEnd(addBogus(dom, epos.container()), epos.offset());\n        return {\n          range,\n          forward: isForwardBookmark(bookmark)\n        };\n      });\n    };\n    const resolveIndex = (dom, bookmark) => Optional.from(dom.select(bookmark.name)[bookmark.index]).map(elm => {\n      const range = dom.createRng();\n      range.selectNode(elm);\n      return {\n        range,\n        forward: true\n      };\n    });\n    const resolve = (selection, bookmark) => {\n      const dom = selection.dom;\n      if (bookmark) {\n        if (isPathBookmark(bookmark)) {\n          return resolvePaths(dom, bookmark);\n        } else if (isStringPathBookmark(bookmark)) {\n          return resolveCaretPositionBookmark(dom, bookmark);\n        } else if (isIdBookmark(bookmark)) {\n          return resolveId(dom, bookmark);\n        } else if (isIndexBookmark(bookmark)) {\n          return resolveIndex(dom, bookmark);\n        } else if (isRangeBookmark(bookmark)) {\n          return Optional.some({\n            range: bookmark.rng,\n            forward: isForwardBookmark(bookmark)\n          });\n        }\n      }\n      return Optional.none();\n    };\n\n    const getBookmark$1 = (selection, type, normalized) => {\n      return getBookmark$2(selection, type, normalized);\n    };\n    const moveToBookmark = (selection, bookmark) => {\n      resolve(selection, bookmark).each(({range, forward}) => {\n        selection.setRng(range, forward);\n      });\n    };\n    const isBookmarkNode$1 = node => {\n      return isElement$6(node) && node.tagName === 'SPAN' && node.getAttribute('data-mce-type') === 'bookmark';\n    };\n\n    const is = expected => actual => expected === actual;\n    const isNbsp = is(nbsp);\n    const isWhiteSpace = chr => chr !== '' && ' \\f\\n\\r\\t\\x0B'.indexOf(chr) !== -1;\n    const isContent = chr => !isWhiteSpace(chr) && !isNbsp(chr) && !isZwsp$1(chr);\n\n    const hexColour = value => ({ value });\n    const toHex = component => {\n      const hex = component.toString(16);\n      return (hex.length === 1 ? '0' + hex : hex).toUpperCase();\n    };\n    const fromRgba = rgbaColour => {\n      const value = toHex(rgbaColour.red) + toHex(rgbaColour.green) + toHex(rgbaColour.blue);\n      return hexColour(value);\n    };\n\n    const rgbRegex = /^\\s*rgb\\s*\\(\\s*(\\d+)\\s*,\\s*(\\d+)\\s*,\\s*(\\d+)\\s*\\)\\s*$/i;\n    const rgbaRegex = /^\\s*rgba\\s*\\(\\s*(\\d+)\\s*,\\s*(\\d+)\\s*,\\s*(\\d+)\\s*,\\s*(\\d?(?:\\.\\d+)?)\\s*\\)\\s*$/i;\n    const rgbaColour = (red, green, blue, alpha) => ({\n      red,\n      green,\n      blue,\n      alpha\n    });\n    const fromStringValues = (red, green, blue, alpha) => {\n      const r = parseInt(red, 10);\n      const g = parseInt(green, 10);\n      const b = parseInt(blue, 10);\n      const a = parseFloat(alpha);\n      return rgbaColour(r, g, b, a);\n    };\n    const fromString = rgbaString => {\n      if (rgbaString === 'transparent') {\n        return Optional.some(rgbaColour(0, 0, 0, 0));\n      }\n      const rgbMatch = rgbRegex.exec(rgbaString);\n      if (rgbMatch !== null) {\n        return Optional.some(fromStringValues(rgbMatch[1], rgbMatch[2], rgbMatch[3], '1'));\n      }\n      const rgbaMatch = rgbaRegex.exec(rgbaString);\n      if (rgbaMatch !== null) {\n        return Optional.some(fromStringValues(rgbaMatch[1], rgbaMatch[2], rgbaMatch[3], rgbaMatch[4]));\n      }\n      return Optional.none();\n    };\n\n    const rgbaToHexString = color => fromString(color).map(fromRgba).map(h => '#' + h.value).getOr(color);\n\n    const getRanges$1 = selection => {\n      const ranges = [];\n      if (selection) {\n        for (let i = 0; i < selection.rangeCount; i++) {\n          ranges.push(selection.getRangeAt(i));\n        }\n      }\n      return ranges;\n    };\n    const getSelectedNodes = ranges => {\n      return bind$3(ranges, range => {\n        const node = getSelectedNode(range);\n        return node ? [SugarElement.fromDom(node)] : [];\n      });\n    };\n    const hasMultipleRanges = selection => {\n      return getRanges$1(selection).length > 1;\n    };\n\n    const getCellsFromRanges = ranges => filter$5(getSelectedNodes(ranges), isTableCell$2);\n    const getCellsFromElement = elm => descendants(elm, 'td[data-mce-selected],th[data-mce-selected]');\n    const getCellsFromElementOrRanges = (ranges, element) => {\n      const selectedCells = getCellsFromElement(element);\n      return selectedCells.length > 0 ? selectedCells : getCellsFromRanges(ranges);\n    };\n    const getCellsFromEditor = editor => getCellsFromElementOrRanges(getRanges$1(editor.selection.getSel()), SugarElement.fromDom(editor.getBody()));\n    const getClosestTable = (cell, isRoot) => ancestor$2(cell, 'table', isRoot);\n\n    const getStartNode = rng => {\n      const sc = rng.startContainer, so = rng.startOffset;\n      if (isText$a(sc)) {\n        return so === 0 ? Optional.some(SugarElement.fromDom(sc)) : Optional.none();\n      } else {\n        return Optional.from(sc.childNodes[so]).map(SugarElement.fromDom);\n      }\n    };\n    const getEndNode = rng => {\n      const ec = rng.endContainer, eo = rng.endOffset;\n      if (isText$a(ec)) {\n        return eo === ec.data.length ? Optional.some(SugarElement.fromDom(ec)) : Optional.none();\n      } else {\n        return Optional.from(ec.childNodes[eo - 1]).map(SugarElement.fromDom);\n      }\n    };\n    const getFirstChildren = node => {\n      return firstChild(node).fold(constant([node]), child => {\n        return [node].concat(getFirstChildren(child));\n      });\n    };\n    const getLastChildren = node => {\n      return lastChild(node).fold(constant([node]), child => {\n        if (name(child) === 'br') {\n          return prevSibling(child).map(sibling => {\n            return [node].concat(getLastChildren(sibling));\n          }).getOr([]);\n        } else {\n          return [node].concat(getLastChildren(child));\n        }\n      });\n    };\n    const hasAllContentsSelected = (elm, rng) => {\n      return lift2(getStartNode(rng), getEndNode(rng), (startNode, endNode) => {\n        const start = find$2(getFirstChildren(elm), curry(eq, startNode));\n        const end = find$2(getLastChildren(elm), curry(eq, endNode));\n        return start.isSome() && end.isSome();\n      }).getOr(false);\n    };\n    const moveEndPoint = (dom, rng, node, start) => {\n      const root = node;\n      const walker = new DomTreeWalker(node, root);\n      const moveCaretBeforeOnEnterElementsMap = filter$4(dom.schema.getMoveCaretBeforeOnEnterElements(), (_, name) => !contains$2([\n        'td',\n        'th',\n        'table'\n      ], name.toLowerCase()));\n      let currentNode = node;\n      do {\n        if (isText$a(currentNode) && Tools.trim(currentNode.data).length !== 0) {\n          if (start) {\n            rng.setStart(currentNode, 0);\n          } else {\n            rng.setEnd(currentNode, currentNode.data.length);\n          }\n          return;\n        }\n        if (moveCaretBeforeOnEnterElementsMap[currentNode.nodeName]) {\n          if (start) {\n            rng.setStartBefore(currentNode);\n          } else {\n            if (currentNode.nodeName === 'BR') {\n              rng.setEndBefore(currentNode);\n            } else {\n              rng.setEndAfter(currentNode);\n            }\n          }\n          return;\n        }\n      } while (currentNode = start ? walker.next() : walker.prev());\n      if (root.nodeName === 'BODY') {\n        if (start) {\n          rng.setStart(root, 0);\n        } else {\n          rng.setEnd(root, root.childNodes.length);\n        }\n      }\n    };\n    const hasAnyRanges = editor => {\n      const sel = editor.selection.getSel();\n      return isNonNullable(sel) && sel.rangeCount > 0;\n    };\n    const runOnRanges = (editor, executor) => {\n      const fakeSelectionNodes = getCellsFromEditor(editor);\n      if (fakeSelectionNodes.length > 0) {\n        each$e(fakeSelectionNodes, elem => {\n          const node = elem.dom;\n          const fakeNodeRng = editor.dom.createRng();\n          fakeNodeRng.setStartBefore(node);\n          fakeNodeRng.setEndAfter(node);\n          executor(fakeNodeRng, true);\n        });\n      } else {\n        executor(editor.selection.getRng(), false);\n      }\n    };\n    const preserve = (selection, fillBookmark, executor) => {\n      const bookmark = getPersistentBookmark(selection, fillBookmark);\n      executor(bookmark);\n      selection.moveToBookmark(bookmark);\n    };\n\n    const isNode = node => isNumber(node === null || node === void 0 ? void 0 : node.nodeType);\n    const isElementNode$1 = node => isElement$6(node) && !isBookmarkNode$1(node) && !isCaretNode(node) && !isBogus$2(node);\n    const isElementDirectlySelected = (dom, node) => {\n      if (isElementNode$1(node) && !/^(TD|TH)$/.test(node.nodeName)) {\n        const selectedAttr = dom.getAttrib(node, 'data-mce-selected');\n        const value = parseInt(selectedAttr, 10);\n        return !isNaN(value) && value > 0;\n      } else {\n        return false;\n      }\n    };\n    const isEditable$3 = elm => elm.isContentEditable === true;\n    const preserveSelection = (editor, action, shouldMoveStart) => {\n      const {selection, dom} = editor;\n      const selectedNodeBeforeAction = selection.getNode();\n      const isSelectedBeforeNodeNoneditable = isContentEditableFalse$a(selectedNodeBeforeAction);\n      preserve(selection, true, () => {\n        action();\n      });\n      const isBeforeNodeStillNoneditable = isSelectedBeforeNodeNoneditable && isContentEditableFalse$a(selectedNodeBeforeAction);\n      if (isBeforeNodeStillNoneditable && dom.isChildOf(selectedNodeBeforeAction, editor.getBody())) {\n        editor.selection.select(selectedNodeBeforeAction);\n      } else if (shouldMoveStart(selection.getStart())) {\n        moveStartToNearestText(dom, selection);\n      }\n    };\n    const moveStartToNearestText = (dom, selection) => {\n      var _a, _b;\n      const rng = selection.getRng();\n      const {startContainer, startOffset} = rng;\n      const selectedNode = selection.getNode();\n      if (isElementDirectlySelected(dom, selectedNode)) {\n        return;\n      }\n      if (isElement$6(startContainer)) {\n        const nodes = startContainer.childNodes;\n        const root = dom.getRoot();\n        let walker;\n        if (startOffset < nodes.length) {\n          const startNode = nodes[startOffset];\n          walker = new DomTreeWalker(startNode, (_a = dom.getParent(startNode, dom.isBlock)) !== null && _a !== void 0 ? _a : root);\n        } else {\n          const startNode = nodes[nodes.length - 1];\n          walker = new DomTreeWalker(startNode, (_b = dom.getParent(startNode, dom.isBlock)) !== null && _b !== void 0 ? _b : root);\n          walker.next(true);\n        }\n        for (let node = walker.current(); node; node = walker.next()) {\n          if (dom.getContentEditable(node) === 'false') {\n            return;\n          } else if (isText$a(node) && !isWhiteSpaceNode$1(node)) {\n            rng.setStart(node, 0);\n            selection.setRng(rng);\n            return;\n          }\n        }\n      }\n    };\n    const getNonWhiteSpaceSibling = (node, next, inc) => {\n      if (node) {\n        const nextName = next ? 'nextSibling' : 'previousSibling';\n        for (node = inc ? node : node[nextName]; node; node = node[nextName]) {\n          if (isElement$6(node) || !isWhiteSpaceNode$1(node)) {\n            return node;\n          }\n        }\n      }\n      return undefined;\n    };\n    const isTextBlock$1 = (editor, name) => {\n      if (isNode(name)) {\n        name = name.nodeName;\n      }\n      return !!editor.schema.getTextBlockElements()[name.toLowerCase()];\n    };\n    const isValid = (ed, parent, child) => {\n      return ed.schema.isValidChild(parent, child);\n    };\n    const isWhiteSpaceNode$1 = (node, allowSpaces = false) => {\n      if (isNonNullable(node) && isText$a(node)) {\n        const data = allowSpaces ? node.data.replace(/ /g, '\\xA0') : node.data;\n        return isWhitespaceText(data);\n      } else {\n        return false;\n      }\n    };\n    const isEmptyTextNode$1 = node => {\n      return isNonNullable(node) && isText$a(node) && node.length === 0;\n    };\n    const isWrapNoneditableTarget = (editor, node) => {\n      const baseDataSelector = '[data-mce-cef-wrappable]';\n      const formatNoneditableSelector = getFormatNoneditableSelector(editor);\n      const selector = isEmpty$3(formatNoneditableSelector) ? baseDataSelector : `${ baseDataSelector },${ formatNoneditableSelector }`;\n      return is$1(SugarElement.fromDom(node), selector);\n    };\n    const isWrappableNoneditable = (editor, node) => {\n      const dom = editor.dom;\n      return isElementNode$1(node) && dom.getContentEditable(node) === 'false' && isWrapNoneditableTarget(editor, node) && dom.select('[contenteditable=\"true\"]', node).length === 0;\n    };\n    const replaceVars = (value, vars) => {\n      if (isFunction(value)) {\n        return value(vars);\n      } else if (isNonNullable(vars)) {\n        value = value.replace(/%(\\w+)/g, (str, name) => {\n          return vars[name] || str;\n        });\n      }\n      return value;\n    };\n    const isEq$5 = (str1, str2) => {\n      str1 = str1 || '';\n      str2 = str2 || '';\n      str1 = '' + (str1.nodeName || str1);\n      str2 = '' + (str2.nodeName || str2);\n      return str1.toLowerCase() === str2.toLowerCase();\n    };\n    const normalizeStyleValue = (value, name) => {\n      if (isNullable(value)) {\n        return null;\n      } else {\n        let strValue = String(value);\n        if (name === 'color' || name === 'backgroundColor') {\n          strValue = rgbaToHexString(strValue);\n        }\n        if (name === 'fontWeight' && value === 700) {\n          strValue = 'bold';\n        }\n        if (name === 'fontFamily') {\n          strValue = strValue.replace(/[\\'\\\"]/g, '').replace(/,\\s+/g, ',');\n        }\n        return strValue;\n      }\n    };\n    const getStyle = (dom, node, name) => {\n      const style = dom.getStyle(node, name);\n      return normalizeStyleValue(style, name);\n    };\n    const getTextDecoration = (dom, node) => {\n      let decoration;\n      dom.getParent(node, n => {\n        if (isElement$6(n)) {\n          decoration = dom.getStyle(n, 'text-decoration');\n          return !!decoration && decoration !== 'none';\n        } else {\n          return false;\n        }\n      });\n      return decoration;\n    };\n    const getParents$2 = (dom, node, selector) => {\n      return dom.getParents(node, selector, dom.getRoot());\n    };\n    const isFormatPredicate = (editor, formatName, predicate) => {\n      const formats = editor.formatter.get(formatName);\n      return isNonNullable(formats) && exists(formats, predicate);\n    };\n    const isVariableFormatName = (editor, formatName) => {\n      const hasVariableValues = format => {\n        const isVariableValue = val => isFunction(val) || val.length > 1 && val.charAt(0) === '%';\n        return exists([\n          'styles',\n          'attributes'\n        ], key => get$a(format, key).exists(field => {\n          const fieldValues = isArray$1(field) ? field : values(field);\n          return exists(fieldValues, isVariableValue);\n        }));\n      };\n      return isFormatPredicate(editor, formatName, hasVariableValues);\n    };\n    const areSimilarFormats = (editor, formatName, otherFormatName) => {\n      const validKeys = [\n        'inline',\n        'block',\n        'selector',\n        'attributes',\n        'styles',\n        'classes'\n      ];\n      const filterObj = format => filter$4(format, (_, key) => exists(validKeys, validKey => validKey === key));\n      return isFormatPredicate(editor, formatName, fmt1 => {\n        const filteredFmt1 = filterObj(fmt1);\n        return isFormatPredicate(editor, otherFormatName, fmt2 => {\n          const filteredFmt2 = filterObj(fmt2);\n          return equal$1(filteredFmt1, filteredFmt2);\n        });\n      });\n    };\n    const isBlockFormat = format => hasNonNullableKey(format, 'block');\n    const isWrappingBlockFormat = format => isBlockFormat(format) && format.wrapper === true;\n    const isNonWrappingBlockFormat = format => isBlockFormat(format) && format.wrapper !== true;\n    const isSelectorFormat = format => hasNonNullableKey(format, 'selector');\n    const isInlineFormat = format => hasNonNullableKey(format, 'inline');\n    const isMixedFormat = format => isSelectorFormat(format) && isInlineFormat(format) && is$2(get$a(format, 'mixed'), true);\n    const shouldExpandToSelector = format => isSelectorFormat(format) && format.expand !== false && !isInlineFormat(format);\n\n    const isBookmarkNode = isBookmarkNode$1;\n    const getParents$1 = getParents$2;\n    const isWhiteSpaceNode = isWhiteSpaceNode$1;\n    const isTextBlock = isTextBlock$1;\n    const isBogusBr = node => {\n      return isBr$6(node) && node.getAttribute('data-mce-bogus') && !node.nextSibling;\n    };\n    const findParentContentEditable = (dom, node) => {\n      let parent = node;\n      while (parent) {\n        if (isElement$6(parent) && dom.getContentEditable(parent)) {\n          return dom.getContentEditable(parent) === 'false' ? parent : node;\n        }\n        parent = parent.parentNode;\n      }\n      return node;\n    };\n    const walkText = (start, node, offset, predicate) => {\n      const str = node.data;\n      for (let i = offset; start ? i >= 0 : i < str.length; start ? i-- : i++) {\n        if (predicate(str.charAt(i))) {\n          return start ? i + 1 : i;\n        }\n      }\n      return -1;\n    };\n    const findSpace = (start, node, offset) => walkText(start, node, offset, c => isNbsp(c) || isWhiteSpace(c));\n    const findContent = (start, node, offset) => walkText(start, node, offset, isContent);\n    const findWordEndPoint = (dom, body, container, offset, start, includeTrailingSpaces) => {\n      let lastTextNode;\n      const rootNode = dom.getParent(container, dom.isBlock) || body;\n      const walk = (container, offset, pred) => {\n        const textSeeker = TextSeeker(dom);\n        const walker = start ? textSeeker.backwards : textSeeker.forwards;\n        return Optional.from(walker(container, offset, (text, textOffset) => {\n          if (isBookmarkNode(text.parentNode)) {\n            return -1;\n          } else {\n            lastTextNode = text;\n            return pred(start, text, textOffset);\n          }\n        }, rootNode));\n      };\n      const spaceResult = walk(container, offset, findSpace);\n      return spaceResult.bind(result => includeTrailingSpaces ? walk(result.container, result.offset + (start ? -1 : 0), findContent) : Optional.some(result)).orThunk(() => lastTextNode ? Optional.some({\n        container: lastTextNode,\n        offset: start ? 0 : lastTextNode.length\n      }) : Optional.none());\n    };\n    const findSelectorEndPoint = (dom, formatList, rng, container, siblingName) => {\n      const sibling = container[siblingName];\n      if (isText$a(container) && isEmpty$3(container.data) && sibling) {\n        container = sibling;\n      }\n      const parents = getParents$1(dom, container);\n      for (let i = 0; i < parents.length; i++) {\n        for (let y = 0; y < formatList.length; y++) {\n          const curFormat = formatList[y];\n          if (isNonNullable(curFormat.collapsed) && curFormat.collapsed !== rng.collapsed) {\n            continue;\n          }\n          if (isSelectorFormat(curFormat) && dom.is(parents[i], curFormat.selector)) {\n            return parents[i];\n          }\n        }\n      }\n      return container;\n    };\n    const findBlockEndPoint = (editor, formatList, container, siblingName) => {\n      var _a;\n      let node = container;\n      const dom = editor.dom;\n      const root = dom.getRoot();\n      const format = formatList[0];\n      if (isBlockFormat(format)) {\n        node = format.wrapper ? null : dom.getParent(container, format.block, root);\n      }\n      if (!node) {\n        const scopeRoot = (_a = dom.getParent(container, 'LI,TD,TH')) !== null && _a !== void 0 ? _a : root;\n        node = dom.getParent(isText$a(container) ? container.parentNode : container, node => node !== root && isTextBlock(editor, node), scopeRoot);\n      }\n      if (node && isBlockFormat(format) && format.wrapper) {\n        node = getParents$1(dom, node, 'ul,ol').reverse()[0] || node;\n      }\n      if (!node) {\n        node = container;\n        while (node && node[siblingName] && !dom.isBlock(node[siblingName])) {\n          node = node[siblingName];\n          if (isEq$5(node, 'br')) {\n            break;\n          }\n        }\n      }\n      return node || container;\n    };\n    const isAtBlockBoundary$1 = (dom, root, container, siblingName) => {\n      const parent = container.parentNode;\n      if (isNonNullable(container[siblingName])) {\n        return false;\n      } else if (parent === root || isNullable(parent) || dom.isBlock(parent)) {\n        return true;\n      } else {\n        return isAtBlockBoundary$1(dom, root, parent, siblingName);\n      }\n    };\n    const findParentContainer = (dom, formatList, container, offset, start) => {\n      let parent = container;\n      const siblingName = start ? 'previousSibling' : 'nextSibling';\n      const root = dom.getRoot();\n      if (isText$a(container) && !isWhiteSpaceNode(container)) {\n        if (start ? offset > 0 : offset < container.data.length) {\n          return container;\n        }\n      }\n      while (parent) {\n        if (!formatList[0].block_expand && dom.isBlock(parent)) {\n          return parent;\n        }\n        for (let sibling = parent[siblingName]; sibling; sibling = sibling[siblingName]) {\n          const allowSpaces = isText$a(sibling) && !isAtBlockBoundary$1(dom, root, sibling, siblingName);\n          if (!isBookmarkNode(sibling) && !isBogusBr(sibling) && !isWhiteSpaceNode(sibling, allowSpaces)) {\n            return parent;\n          }\n        }\n        if (parent === root || parent.parentNode === root) {\n          container = parent;\n          break;\n        }\n        parent = parent.parentNode;\n      }\n      return container;\n    };\n    const isSelfOrParentBookmark = container => isBookmarkNode(container.parentNode) || isBookmarkNode(container);\n    const expandRng = (editor, rng, formatList, includeTrailingSpace = false) => {\n      let {startContainer, startOffset, endContainer, endOffset} = rng;\n      const dom = editor.dom;\n      const format = formatList[0];\n      if (isElement$6(startContainer) && startContainer.hasChildNodes()) {\n        startContainer = getNode$1(startContainer, startOffset);\n        if (isText$a(startContainer)) {\n          startOffset = 0;\n        }\n      }\n      if (isElement$6(endContainer) && endContainer.hasChildNodes()) {\n        endContainer = getNode$1(endContainer, rng.collapsed ? endOffset : endOffset - 1);\n        if (isText$a(endContainer)) {\n          endOffset = endContainer.data.length;\n        }\n      }\n      startContainer = findParentContentEditable(dom, startContainer);\n      endContainer = findParentContentEditable(dom, endContainer);\n      if (isSelfOrParentBookmark(startContainer)) {\n        startContainer = isBookmarkNode(startContainer) ? startContainer : startContainer.parentNode;\n        if (rng.collapsed) {\n          startContainer = startContainer.previousSibling || startContainer;\n        } else {\n          startContainer = startContainer.nextSibling || startContainer;\n        }\n        if (isText$a(startContainer)) {\n          startOffset = rng.collapsed ? startContainer.length : 0;\n        }\n      }\n      if (isSelfOrParentBookmark(endContainer)) {\n        endContainer = isBookmarkNode(endContainer) ? endContainer : endContainer.parentNode;\n        if (rng.collapsed) {\n          endContainer = endContainer.nextSibling || endContainer;\n        } else {\n          endContainer = endContainer.previousSibling || endContainer;\n        }\n        if (isText$a(endContainer)) {\n          endOffset = rng.collapsed ? 0 : endContainer.length;\n        }\n      }\n      if (rng.collapsed) {\n        const startPoint = findWordEndPoint(dom, editor.getBody(), startContainer, startOffset, true, includeTrailingSpace);\n        startPoint.each(({container, offset}) => {\n          startContainer = container;\n          startOffset = offset;\n        });\n        const endPoint = findWordEndPoint(dom, editor.getBody(), endContainer, endOffset, false, includeTrailingSpace);\n        endPoint.each(({container, offset}) => {\n          endContainer = container;\n          endOffset = offset;\n        });\n      }\n      if (isInlineFormat(format) || format.block_expand) {\n        if (!isInlineFormat(format) || (!isText$a(startContainer) || startOffset === 0)) {\n          startContainer = findParentContainer(dom, formatList, startContainer, startOffset, true);\n        }\n        if (!isInlineFormat(format) || (!isText$a(endContainer) || endOffset === endContainer.data.length)) {\n          endContainer = findParentContainer(dom, formatList, endContainer, endOffset, false);\n        }\n      }\n      if (shouldExpandToSelector(format)) {\n        startContainer = findSelectorEndPoint(dom, formatList, rng, startContainer, 'previousSibling');\n        endContainer = findSelectorEndPoint(dom, formatList, rng, endContainer, 'nextSibling');\n      }\n      if (isBlockFormat(format) || isSelectorFormat(format)) {\n        startContainer = findBlockEndPoint(editor, formatList, startContainer, 'previousSibling');\n        endContainer = findBlockEndPoint(editor, formatList, endContainer, 'nextSibling');\n        if (isBlockFormat(format)) {\n          if (!dom.isBlock(startContainer)) {\n            startContainer = findParentContainer(dom, formatList, startContainer, startOffset, true);\n          }\n          if (!dom.isBlock(endContainer)) {\n            endContainer = findParentContainer(dom, formatList, endContainer, endOffset, false);\n          }\n        }\n      }\n      if (isElement$6(startContainer) && startContainer.parentNode) {\n        startOffset = dom.nodeIndex(startContainer);\n        startContainer = startContainer.parentNode;\n      }\n      if (isElement$6(endContainer) && endContainer.parentNode) {\n        endOffset = dom.nodeIndex(endContainer) + 1;\n        endContainer = endContainer.parentNode;\n      }\n      return {\n        startContainer,\n        startOffset,\n        endContainer,\n        endOffset\n      };\n    };\n\n    const walk$3 = (dom, rng, callback) => {\n      var _a;\n      const startOffset = rng.startOffset;\n      const startContainer = getNode$1(rng.startContainer, startOffset);\n      const endOffset = rng.endOffset;\n      const endContainer = getNode$1(rng.endContainer, endOffset - 1);\n      const exclude = nodes => {\n        const firstNode = nodes[0];\n        if (isText$a(firstNode) && firstNode === startContainer && startOffset >= firstNode.data.length) {\n          nodes.splice(0, 1);\n        }\n        const lastNode = nodes[nodes.length - 1];\n        if (endOffset === 0 && nodes.length > 0 && lastNode === endContainer && isText$a(lastNode)) {\n          nodes.splice(nodes.length - 1, 1);\n        }\n        return nodes;\n      };\n      const collectSiblings = (node, name, endNode) => {\n        const siblings = [];\n        for (; node && node !== endNode; node = node[name]) {\n          siblings.push(node);\n        }\n        return siblings;\n      };\n      const findEndPoint = (node, root) => dom.getParent(node, node => node.parentNode === root, root);\n      const walkBoundary = (startNode, endNode, next) => {\n        const siblingName = next ? 'nextSibling' : 'previousSibling';\n        for (let node = startNode, parent = node.parentNode; node && node !== endNode; node = parent) {\n          parent = node.parentNode;\n          const siblings = collectSiblings(node === startNode ? node : node[siblingName], siblingName);\n          if (siblings.length) {\n            if (!next) {\n              siblings.reverse();\n            }\n            callback(exclude(siblings));\n          }\n        }\n      };\n      if (startContainer === endContainer) {\n        return callback(exclude([startContainer]));\n      }\n      const ancestor = (_a = dom.findCommonAncestor(startContainer, endContainer)) !== null && _a !== void 0 ? _a : dom.getRoot();\n      if (dom.isChildOf(startContainer, endContainer)) {\n        return walkBoundary(startContainer, ancestor, true);\n      }\n      if (dom.isChildOf(endContainer, startContainer)) {\n        return walkBoundary(endContainer, ancestor);\n      }\n      const startPoint = findEndPoint(startContainer, ancestor) || startContainer;\n      const endPoint = findEndPoint(endContainer, ancestor) || endContainer;\n      walkBoundary(startContainer, startPoint, true);\n      const siblings = collectSiblings(startPoint === startContainer ? startPoint : startPoint.nextSibling, 'nextSibling', endPoint === endContainer ? endPoint.nextSibling : endPoint);\n      if (siblings.length) {\n        callback(exclude(siblings));\n      }\n      walkBoundary(endContainer, endPoint);\n    };\n\n    const validBlocks = [\n      'pre[class*=language-][contenteditable=\"false\"]',\n      'figure.image',\n      'div[data-ephox-embed-iri]',\n      'div.tiny-pageembed',\n      'div.mce-toc',\n      'div[data-mce-toc]'\n    ];\n    const isZeroWidth = elem => isText$b(elem) && get$3(elem) === ZWSP$1;\n    const context = (editor, elem, wrapName, nodeName) => parent(elem).fold(() => 'skipping', parent => {\n      if (nodeName === 'br' || isZeroWidth(elem)) {\n        return 'valid';\n      } else if (isAnnotation(elem)) {\n        return 'existing';\n      } else if (isCaretNode(elem.dom)) {\n        return 'caret';\n      } else if (exists(validBlocks, selector => is$1(elem, selector))) {\n        return 'valid-block';\n      } else if (!isValid(editor, wrapName, nodeName) || !isValid(editor, name(parent), wrapName)) {\n        return 'invalid-child';\n      } else {\n        return 'valid';\n      }\n    });\n\n    const applyWordGrab = (editor, rng) => {\n      const r = expandRng(editor, rng, [{ inline: 'span' }]);\n      rng.setStart(r.startContainer, r.startOffset);\n      rng.setEnd(r.endContainer, r.endOffset);\n      editor.selection.setRng(rng);\n    };\n    const applyAnnotation = (elem, masterUId, data, annotationName, decorate, directAnnotation) => {\n      const {uid = masterUId, ...otherData} = data;\n      add$2(elem, annotation());\n      set$2(elem, `${ dataAnnotationId() }`, uid);\n      set$2(elem, `${ dataAnnotation() }`, annotationName);\n      const {attributes = {}, classes = []} = decorate(uid, otherData);\n      setAll$1(elem, attributes);\n      add(elem, classes);\n      if (directAnnotation) {\n        if (classes.length > 0) {\n          set$2(elem, `${ dataAnnotationClasses() }`, classes.join(','));\n        }\n        const attributeNames = keys(attributes);\n        if (attributeNames.length > 0) {\n          set$2(elem, `${ dataAnnotationAttributes() }`, attributeNames.join(','));\n        }\n      }\n    };\n    const removeDirectAnnotation = elem => {\n      remove$8(elem, annotation());\n      remove$b(elem, `${ dataAnnotationId() }`);\n      remove$b(elem, `${ dataAnnotation() }`);\n      remove$b(elem, `${ dataAnnotationActive() }`);\n      const customAttrNames = getOpt(elem, `${ dataAnnotationAttributes() }`).map(names => names.split(',')).getOr([]);\n      const customClasses = getOpt(elem, `${ dataAnnotationClasses() }`).map(names => names.split(',')).getOr([]);\n      each$e(customAttrNames, name => remove$b(elem, name));\n      remove$5(elem, customClasses);\n      remove$b(elem, `${ dataAnnotationClasses() }`);\n      remove$b(elem, `${ dataAnnotationAttributes() }`);\n    };\n    const makeAnnotation = (eDoc, uid, data, annotationName, decorate) => {\n      const master = SugarElement.fromTag('span', eDoc);\n      applyAnnotation(master, uid, data, annotationName, decorate, false);\n      return master;\n    };\n    const annotate = (editor, rng, uid, annotationName, decorate, data) => {\n      const newWrappers = [];\n      const master = makeAnnotation(editor.getDoc(), uid, data, annotationName, decorate);\n      const wrapper = value$2();\n      const finishWrapper = () => {\n        wrapper.clear();\n      };\n      const getOrOpenWrapper = () => wrapper.get().getOrThunk(() => {\n        const nu = shallow$1(master);\n        newWrappers.push(nu);\n        wrapper.set(nu);\n        return nu;\n      });\n      const processElements = elems => {\n        each$e(elems, processElement);\n      };\n      const processElement = elem => {\n        const ctx = context(editor, elem, 'span', name(elem));\n        switch (ctx) {\n        case 'invalid-child': {\n            finishWrapper();\n            const children$1 = children(elem);\n            processElements(children$1);\n            finishWrapper();\n            break;\n          }\n        case 'valid-block': {\n            finishWrapper();\n            applyAnnotation(elem, uid, data, annotationName, decorate, true);\n            break;\n          }\n        case 'valid': {\n            const w = getOrOpenWrapper();\n            wrap$2(elem, w);\n            break;\n          }\n        }\n      };\n      const processNodes = nodes => {\n        const elems = map$3(nodes, SugarElement.fromDom);\n        processElements(elems);\n      };\n      walk$3(editor.dom, rng, nodes => {\n        finishWrapper();\n        processNodes(nodes);\n      });\n      return newWrappers;\n    };\n    const annotateWithBookmark = (editor, name, settings, data) => {\n      editor.undoManager.transact(() => {\n        const selection = editor.selection;\n        const initialRng = selection.getRng();\n        const hasFakeSelection = getCellsFromEditor(editor).length > 0;\n        const masterUid = generate$1('mce-annotation');\n        if (initialRng.collapsed && !hasFakeSelection) {\n          applyWordGrab(editor, initialRng);\n        }\n        if (selection.getRng().collapsed && !hasFakeSelection) {\n          const wrapper = makeAnnotation(editor.getDoc(), masterUid, data, name, settings.decorate);\n          set(wrapper, nbsp);\n          selection.getRng().insertNode(wrapper.dom);\n          selection.select(wrapper.dom);\n        } else {\n          preserve(selection, false, () => {\n            runOnRanges(editor, selectionRng => {\n              annotate(editor, selectionRng, masterUid, name, settings.decorate, data);\n            });\n          });\n        }\n      });\n    };\n\n    const Annotator = editor => {\n      const registry = create$c();\n      setup$w(editor, registry);\n      const changes = setup$x(editor, registry);\n      const isSpan = isTag('span');\n      const removeAnnotations = elements => {\n        each$e(elements, element => {\n          if (isSpan(element)) {\n            unwrap(element);\n          } else {\n            removeDirectAnnotation(element);\n          }\n        });\n      };\n      return {\n        register: (name, settings) => {\n          registry.register(name, settings);\n        },\n        annotate: (name, data) => {\n          registry.lookup(name).each(settings => {\n            annotateWithBookmark(editor, name, settings, data);\n          });\n        },\n        annotationChanged: (name, callback) => {\n          changes.addListener(name, callback);\n        },\n        remove: name => {\n          const bookmark = editor.selection.getBookmark();\n          identify(editor, Optional.some(name)).each(({elements}) => {\n            removeAnnotations(elements);\n          });\n          editor.selection.moveToBookmark(bookmark);\n        },\n        removeAll: name => {\n          const bookmark = editor.selection.getBookmark();\n          each$d(findAll(editor, name), (elements, _) => {\n            removeAnnotations(elements);\n          });\n          editor.selection.moveToBookmark(bookmark);\n        },\n        getAll: name => {\n          const directory = findAll(editor, name);\n          return map$2(directory, elems => map$3(elems, elem => elem.dom));\n        }\n      };\n    };\n\n    const BookmarkManager = selection => {\n      return {\n        getBookmark: curry(getBookmark$1, selection),\n        moveToBookmark: curry(moveToBookmark, selection)\n      };\n    };\n    BookmarkManager.isBookmarkNode = isBookmarkNode$1;\n\n    const isXYWithinRange = (clientX, clientY, range) => {\n      if (range.collapsed) {\n        return false;\n      } else {\n        return exists(range.getClientRects(), rect => containsXY(rect, clientX, clientY));\n      }\n    };\n\n    const firePreProcess = (editor, args) => editor.dispatch('PreProcess', args);\n    const firePostProcess = (editor, args) => editor.dispatch('PostProcess', args);\n    const fireRemove = editor => {\n      editor.dispatch('remove');\n    };\n    const fireDetach = editor => {\n      editor.dispatch('detach');\n    };\n    const fireSwitchMode = (editor, mode) => {\n      editor.dispatch('SwitchMode', { mode });\n    };\n    const fireObjectResizeStart = (editor, target, width, height, origin) => {\n      editor.dispatch('ObjectResizeStart', {\n        target,\n        width,\n        height,\n        origin\n      });\n    };\n    const fireObjectResized = (editor, target, width, height, origin) => {\n      editor.dispatch('ObjectResized', {\n        target,\n        width,\n        height,\n        origin\n      });\n    };\n    const firePreInit = editor => {\n      editor.dispatch('PreInit');\n    };\n    const firePostRender = editor => {\n      editor.dispatch('PostRender');\n    };\n    const fireInit = editor => {\n      editor.dispatch('Init');\n    };\n    const firePlaceholderToggle = (editor, state) => {\n      editor.dispatch('PlaceholderToggle', { state });\n    };\n    const fireError = (editor, errorType, error) => {\n      editor.dispatch(errorType, error);\n    };\n    const fireFormatApply = (editor, format, node, vars) => {\n      editor.dispatch('FormatApply', {\n        format,\n        node,\n        vars\n      });\n    };\n    const fireFormatRemove = (editor, format, node, vars) => {\n      editor.dispatch('FormatRemove', {\n        format,\n        node,\n        vars\n      });\n    };\n    const fireBeforeSetContent = (editor, args) => editor.dispatch('BeforeSetContent', args);\n    const fireSetContent = (editor, args) => editor.dispatch('SetContent', args);\n    const fireBeforeGetContent = (editor, args) => editor.dispatch('BeforeGetContent', args);\n    const fireGetContent = (editor, args) => editor.dispatch('GetContent', args);\n    const fireAutocompleterStart = (editor, args) => {\n      editor.dispatch('AutocompleterStart', args);\n    };\n    const fireAutocompleterUpdate = (editor, args) => {\n      editor.dispatch('AutocompleterUpdate', args);\n    };\n    const fireAutocompleterEnd = editor => {\n      editor.dispatch('AutocompleterEnd');\n    };\n    const firePastePreProcess = (editor, html, internal) => editor.dispatch('PastePreProcess', {\n      content: html,\n      internal\n    });\n    const firePastePostProcess = (editor, node, internal) => editor.dispatch('PastePostProcess', {\n      node,\n      internal\n    });\n    const firePastePlainTextToggle = (editor, state) => editor.dispatch('PastePlainTextToggle', { state });\n\n    const VK = {\n      BACKSPACE: 8,\n      DELETE: 46,\n      DOWN: 40,\n      ENTER: 13,\n      ESC: 27,\n      LEFT: 37,\n      RIGHT: 39,\n      SPACEBAR: 32,\n      TAB: 9,\n      UP: 38,\n      PAGE_UP: 33,\n      PAGE_DOWN: 34,\n      END: 35,\n      HOME: 36,\n      modifierPressed: e => {\n        return e.shiftKey || e.ctrlKey || e.altKey || VK.metaKeyPressed(e);\n      },\n      metaKeyPressed: e => {\n        return Env.os.isMacOS() || Env.os.isiOS() ? e.metaKey : e.ctrlKey && !e.altKey;\n      }\n    };\n\n    const elementSelectionAttr = 'data-mce-selected';\n    const controlElmSelector = 'table,img,figure.image,hr,video,span.mce-preview-object';\n    const abs = Math.abs;\n    const round$1 = Math.round;\n    const resizeHandles = {\n      nw: [\n        0,\n        0,\n        -1,\n        -1\n      ],\n      ne: [\n        1,\n        0,\n        1,\n        -1\n      ],\n      se: [\n        1,\n        1,\n        1,\n        1\n      ],\n      sw: [\n        0,\n        1,\n        -1,\n        1\n      ]\n    };\n    const isTouchEvent = evt => evt.type === 'longpress' || evt.type.indexOf('touch') === 0;\n    const ControlSelection = (selection, editor) => {\n      const dom = editor.dom;\n      const editableDoc = editor.getDoc();\n      const rootDocument = document;\n      const rootElement = editor.getBody();\n      let selectedElm, selectedElmGhost, resizeHelper, selectedHandle, resizeBackdrop;\n      let startX, startY, selectedElmX, selectedElmY, startW, startH, ratio, resizeStarted;\n      let width;\n      let height;\n      let startScrollWidth;\n      let startScrollHeight;\n      const isImage = elm => isNonNullable(elm) && (isImg(elm) || dom.is(elm, 'figure.image'));\n      const isMedia = elm => isMedia$2(elm) || dom.hasClass(elm, 'mce-preview-object');\n      const isEventOnImageOutsideRange = (evt, range) => {\n        if (isTouchEvent(evt)) {\n          const touch = evt.touches[0];\n          return isImage(evt.target) && !isXYWithinRange(touch.clientX, touch.clientY, range);\n        } else {\n          return isImage(evt.target) && !isXYWithinRange(evt.clientX, evt.clientY, range);\n        }\n      };\n      const contextMenuSelectImage = evt => {\n        const target = evt.target;\n        if (isEventOnImageOutsideRange(evt, editor.selection.getRng()) && !evt.isDefaultPrevented()) {\n          editor.selection.select(target);\n        }\n      };\n      const getResizeTargets = elm => {\n        if (dom.hasClass(elm, 'mce-preview-object') && isNonNullable(elm.firstElementChild)) {\n          return [\n            elm,\n            elm.firstElementChild\n          ];\n        } else if (dom.is(elm, 'figure.image')) {\n          return [elm.querySelector('img')];\n        } else {\n          return [elm];\n        }\n      };\n      const isResizable = elm => {\n        const selector = getObjectResizing(editor);\n        if (!selector) {\n          return false;\n        }\n        if (elm.getAttribute('data-mce-resize') === 'false') {\n          return false;\n        }\n        if (elm === editor.getBody()) {\n          return false;\n        }\n        if (dom.hasClass(elm, 'mce-preview-object') && isNonNullable(elm.firstElementChild)) {\n          return is$1(SugarElement.fromDom(elm.firstElementChild), selector);\n        } else {\n          return is$1(SugarElement.fromDom(elm), selector);\n        }\n      };\n      const createGhostElement = elm => {\n        if (isMedia(elm)) {\n          return dom.create('img', { src: Env.transparentSrc });\n        } else {\n          return elm.cloneNode(true);\n        }\n      };\n      const setSizeProp = (element, name, value) => {\n        if (isNonNullable(value)) {\n          const targets = getResizeTargets(element);\n          each$e(targets, target => {\n            if (target.style[name] || !editor.schema.isValid(target.nodeName.toLowerCase(), name)) {\n              dom.setStyle(target, name, value);\n            } else {\n              dom.setAttrib(target, name, '' + value);\n            }\n          });\n        }\n      };\n      const setGhostElmSize = (ghostElm, width, height) => {\n        setSizeProp(ghostElm, 'width', width);\n        setSizeProp(ghostElm, 'height', height);\n      };\n      const resizeGhostElement = e => {\n        let deltaX, deltaY, proportional;\n        let resizeHelperX, resizeHelperY;\n        deltaX = e.screenX - startX;\n        deltaY = e.screenY - startY;\n        width = deltaX * selectedHandle[2] + startW;\n        height = deltaY * selectedHandle[3] + startH;\n        width = width < 5 ? 5 : width;\n        height = height < 5 ? 5 : height;\n        if ((isImage(selectedElm) || isMedia(selectedElm)) && getResizeImgProportional(editor) !== false) {\n          proportional = !VK.modifierPressed(e);\n        } else {\n          proportional = VK.modifierPressed(e);\n        }\n        if (proportional) {\n          if (abs(deltaX) > abs(deltaY)) {\n            height = round$1(width * ratio);\n            width = round$1(height / ratio);\n          } else {\n            width = round$1(height / ratio);\n            height = round$1(width * ratio);\n          }\n        }\n        setGhostElmSize(selectedElmGhost, width, height);\n        resizeHelperX = selectedHandle.startPos.x + deltaX;\n        resizeHelperY = selectedHandle.startPos.y + deltaY;\n        resizeHelperX = resizeHelperX > 0 ? resizeHelperX : 0;\n        resizeHelperY = resizeHelperY > 0 ? resizeHelperY : 0;\n        dom.setStyles(resizeHelper, {\n          left: resizeHelperX,\n          top: resizeHelperY,\n          display: 'block'\n        });\n        resizeHelper.innerHTML = width + ' &times; ' + height;\n        if (selectedHandle[2] < 0 && selectedElmGhost.clientWidth <= width) {\n          dom.setStyle(selectedElmGhost, 'left', selectedElmX + (startW - width));\n        }\n        if (selectedHandle[3] < 0 && selectedElmGhost.clientHeight <= height) {\n          dom.setStyle(selectedElmGhost, 'top', selectedElmY + (startH - height));\n        }\n        deltaX = rootElement.scrollWidth - startScrollWidth;\n        deltaY = rootElement.scrollHeight - startScrollHeight;\n        if (deltaX + deltaY !== 0) {\n          dom.setStyles(resizeHelper, {\n            left: resizeHelperX - deltaX,\n            top: resizeHelperY - deltaY\n          });\n        }\n        if (!resizeStarted) {\n          fireObjectResizeStart(editor, selectedElm, startW, startH, 'corner-' + selectedHandle.name);\n          resizeStarted = true;\n        }\n      };\n      const endGhostResize = () => {\n        const wasResizeStarted = resizeStarted;\n        resizeStarted = false;\n        if (wasResizeStarted) {\n          setSizeProp(selectedElm, 'width', width);\n          setSizeProp(selectedElm, 'height', height);\n        }\n        dom.unbind(editableDoc, 'mousemove', resizeGhostElement);\n        dom.unbind(editableDoc, 'mouseup', endGhostResize);\n        if (rootDocument !== editableDoc) {\n          dom.unbind(rootDocument, 'mousemove', resizeGhostElement);\n          dom.unbind(rootDocument, 'mouseup', endGhostResize);\n        }\n        dom.remove(selectedElmGhost);\n        dom.remove(resizeHelper);\n        dom.remove(resizeBackdrop);\n        showResizeRect(selectedElm);\n        if (wasResizeStarted) {\n          fireObjectResized(editor, selectedElm, width, height, 'corner-' + selectedHandle.name);\n          dom.setAttrib(selectedElm, 'style', dom.getAttrib(selectedElm, 'style'));\n        }\n        editor.nodeChanged();\n      };\n      const showResizeRect = targetElm => {\n        unbindResizeHandleEvents();\n        const position = dom.getPos(targetElm, rootElement);\n        const selectedElmX = position.x;\n        const selectedElmY = position.y;\n        const rect = targetElm.getBoundingClientRect();\n        const targetWidth = rect.width || rect.right - rect.left;\n        const targetHeight = rect.height || rect.bottom - rect.top;\n        if (selectedElm !== targetElm) {\n          hideResizeRect();\n          selectedElm = targetElm;\n          width = height = 0;\n        }\n        const e = editor.dispatch('ObjectSelected', { target: targetElm });\n        if (isResizable(targetElm) && !e.isDefaultPrevented()) {\n          each$d(resizeHandles, (handle, name) => {\n            const startDrag = e => {\n              const target = getResizeTargets(selectedElm)[0];\n              startX = e.screenX;\n              startY = e.screenY;\n              startW = target.clientWidth;\n              startH = target.clientHeight;\n              ratio = startH / startW;\n              selectedHandle = handle;\n              selectedHandle.name = name;\n              selectedHandle.startPos = {\n                x: targetWidth * handle[0] + selectedElmX,\n                y: targetHeight * handle[1] + selectedElmY\n              };\n              startScrollWidth = rootElement.scrollWidth;\n              startScrollHeight = rootElement.scrollHeight;\n              resizeBackdrop = dom.add(rootElement, 'div', {\n                'class': 'mce-resize-backdrop',\n                'data-mce-bogus': 'all'\n              });\n              dom.setStyles(resizeBackdrop, {\n                position: 'fixed',\n                left: '0',\n                top: '0',\n                width: '100%',\n                height: '100%'\n              });\n              selectedElmGhost = createGhostElement(selectedElm);\n              dom.addClass(selectedElmGhost, 'mce-clonedresizable');\n              dom.setAttrib(selectedElmGhost, 'data-mce-bogus', 'all');\n              selectedElmGhost.contentEditable = 'false';\n              dom.setStyles(selectedElmGhost, {\n                left: selectedElmX,\n                top: selectedElmY,\n                margin: 0\n              });\n              setGhostElmSize(selectedElmGhost, targetWidth, targetHeight);\n              selectedElmGhost.removeAttribute(elementSelectionAttr);\n              rootElement.appendChild(selectedElmGhost);\n              dom.bind(editableDoc, 'mousemove', resizeGhostElement);\n              dom.bind(editableDoc, 'mouseup', endGhostResize);\n              if (rootDocument !== editableDoc) {\n                dom.bind(rootDocument, 'mousemove', resizeGhostElement);\n                dom.bind(rootDocument, 'mouseup', endGhostResize);\n              }\n              resizeHelper = dom.add(rootElement, 'div', {\n                'class': 'mce-resize-helper',\n                'data-mce-bogus': 'all'\n              }, startW + ' &times; ' + startH);\n            };\n            let handleElm = dom.get('mceResizeHandle' + name);\n            if (handleElm) {\n              dom.remove(handleElm);\n            }\n            handleElm = dom.add(rootElement, 'div', {\n              'id': 'mceResizeHandle' + name,\n              'data-mce-bogus': 'all',\n              'class': 'mce-resizehandle',\n              'unselectable': true,\n              'style': 'cursor:' + name + '-resize; margin:0; padding:0'\n            });\n            dom.bind(handleElm, 'mousedown', e => {\n              e.stopImmediatePropagation();\n              e.preventDefault();\n              startDrag(e);\n            });\n            handle.elm = handleElm;\n            dom.setStyles(handleElm, {\n              left: targetWidth * handle[0] + selectedElmX - handleElm.offsetWidth / 2,\n              top: targetHeight * handle[1] + selectedElmY - handleElm.offsetHeight / 2\n            });\n          });\n        } else {\n          hideResizeRect(false);\n        }\n      };\n      const throttledShowResizeRect = first$1(showResizeRect, 0);\n      const hideResizeRect = (removeSelected = true) => {\n        throttledShowResizeRect.cancel();\n        unbindResizeHandleEvents();\n        if (selectedElm && removeSelected) {\n          selectedElm.removeAttribute(elementSelectionAttr);\n        }\n        each$d(resizeHandles, (value, name) => {\n          const handleElm = dom.get('mceResizeHandle' + name);\n          if (handleElm) {\n            dom.unbind(handleElm);\n            dom.remove(handleElm);\n          }\n        });\n      };\n      const isChildOrEqual = (node, parent) => dom.isChildOf(node, parent);\n      const updateResizeRect = e => {\n        if (resizeStarted || editor.removed || editor.composing) {\n          return;\n        }\n        const targetElm = e.type === 'mousedown' ? e.target : selection.getNode();\n        const controlElm = closest$3(SugarElement.fromDom(targetElm), controlElmSelector).map(e => e.dom).getOrUndefined();\n        const selectedValue = isNonNullable(controlElm) ? dom.getAttrib(controlElm, elementSelectionAttr, '1') : '1';\n        each$e(dom.select(`img[${ elementSelectionAttr }],hr[${ elementSelectionAttr }]`), img => {\n          img.removeAttribute(elementSelectionAttr);\n        });\n        if (isNonNullable(controlElm) && isChildOrEqual(controlElm, rootElement)) {\n          disableGeckoResize();\n          const startElm = selection.getStart(true);\n          if (isChildOrEqual(startElm, controlElm) && isChildOrEqual(selection.getEnd(true), controlElm)) {\n            dom.setAttrib(controlElm, elementSelectionAttr, selectedValue);\n            throttledShowResizeRect.throttle(controlElm);\n            return;\n          }\n        }\n        hideResizeRect();\n      };\n      const unbindResizeHandleEvents = () => {\n        each$d(resizeHandles, handle => {\n          if (handle.elm) {\n            dom.unbind(handle.elm);\n            delete handle.elm;\n          }\n        });\n      };\n      const disableGeckoResize = () => {\n        try {\n          editor.getDoc().execCommand('enableObjectResizing', false, 'false');\n        } catch (ex) {\n        }\n      };\n      editor.on('init', () => {\n        disableGeckoResize();\n        editor.on('NodeChange ResizeEditor ResizeWindow ResizeContent drop', updateResizeRect);\n        editor.on('keyup compositionend', e => {\n          if (selectedElm && selectedElm.nodeName === 'TABLE') {\n            updateResizeRect(e);\n          }\n        });\n        editor.on('hide blur', hideResizeRect);\n        editor.on('contextmenu longpress', contextMenuSelectImage, true);\n      });\n      editor.on('remove', unbindResizeHandleEvents);\n      const destroy = () => {\n        throttledShowResizeRect.cancel();\n        selectedElm = selectedElmGhost = resizeBackdrop = null;\n      };\n      return {\n        isResizable,\n        showResizeRect,\n        hideResizeRect,\n        updateResizeRect,\n        destroy\n      };\n    };\n\n    const setStart = (rng, situ) => {\n      situ.fold(e => {\n        rng.setStartBefore(e.dom);\n      }, (e, o) => {\n        rng.setStart(e.dom, o);\n      }, e => {\n        rng.setStartAfter(e.dom);\n      });\n    };\n    const setFinish = (rng, situ) => {\n      situ.fold(e => {\n        rng.setEndBefore(e.dom);\n      }, (e, o) => {\n        rng.setEnd(e.dom, o);\n      }, e => {\n        rng.setEndAfter(e.dom);\n      });\n    };\n    const relativeToNative = (win, startSitu, finishSitu) => {\n      const range = win.document.createRange();\n      setStart(range, startSitu);\n      setFinish(range, finishSitu);\n      return range;\n    };\n    const exactToNative = (win, start, soffset, finish, foffset) => {\n      const rng = win.document.createRange();\n      rng.setStart(start.dom, soffset);\n      rng.setEnd(finish.dom, foffset);\n      return rng;\n    };\n\n    const adt$3 = Adt.generate([\n      {\n        ltr: [\n          'start',\n          'soffset',\n          'finish',\n          'foffset'\n        ]\n      },\n      {\n        rtl: [\n          'start',\n          'soffset',\n          'finish',\n          'foffset'\n        ]\n      }\n    ]);\n    const fromRange = (win, type, range) => type(SugarElement.fromDom(range.startContainer), range.startOffset, SugarElement.fromDom(range.endContainer), range.endOffset);\n    const getRanges = (win, selection) => selection.match({\n      domRange: rng => {\n        return {\n          ltr: constant(rng),\n          rtl: Optional.none\n        };\n      },\n      relative: (startSitu, finishSitu) => {\n        return {\n          ltr: cached(() => relativeToNative(win, startSitu, finishSitu)),\n          rtl: cached(() => Optional.some(relativeToNative(win, finishSitu, startSitu)))\n        };\n      },\n      exact: (start, soffset, finish, foffset) => {\n        return {\n          ltr: cached(() => exactToNative(win, start, soffset, finish, foffset)),\n          rtl: cached(() => Optional.some(exactToNative(win, finish, foffset, start, soffset)))\n        };\n      }\n    });\n    const doDiagnose = (win, ranges) => {\n      const rng = ranges.ltr();\n      if (rng.collapsed) {\n        const reversed = ranges.rtl().filter(rev => rev.collapsed === false);\n        return reversed.map(rev => adt$3.rtl(SugarElement.fromDom(rev.endContainer), rev.endOffset, SugarElement.fromDom(rev.startContainer), rev.startOffset)).getOrThunk(() => fromRange(win, adt$3.ltr, rng));\n      } else {\n        return fromRange(win, adt$3.ltr, rng);\n      }\n    };\n    const diagnose = (win, selection) => {\n      const ranges = getRanges(win, selection);\n      return doDiagnose(win, ranges);\n    };\n    adt$3.ltr;\n    adt$3.rtl;\n\n    const create$a = (start, soffset, finish, foffset) => ({\n      start,\n      soffset,\n      finish,\n      foffset\n    });\n    const SimRange = { create: create$a };\n\n    const caretPositionFromPoint = (doc, x, y) => {\n      var _a, _b;\n      return Optional.from((_b = (_a = doc.dom).caretPositionFromPoint) === null || _b === void 0 ? void 0 : _b.call(_a, x, y)).bind(pos => {\n        if (pos.offsetNode === null) {\n          return Optional.none();\n        }\n        const r = doc.dom.createRange();\n        r.setStart(pos.offsetNode, pos.offset);\n        r.collapse();\n        return Optional.some(r);\n      });\n    };\n    const caretRangeFromPoint = (doc, x, y) => {\n      var _a, _b;\n      return Optional.from((_b = (_a = doc.dom).caretRangeFromPoint) === null || _b === void 0 ? void 0 : _b.call(_a, x, y));\n    };\n    const availableSearch = (() => {\n      if (document.caretPositionFromPoint) {\n        return caretPositionFromPoint;\n      } else if (document.caretRangeFromPoint) {\n        return caretRangeFromPoint;\n      } else {\n        return Optional.none;\n      }\n    })();\n    const fromPoint$1 = (win, x, y) => {\n      const doc = SugarElement.fromDom(win.document);\n      return availableSearch(doc, x, y).map(rng => SimRange.create(SugarElement.fromDom(rng.startContainer), rng.startOffset, SugarElement.fromDom(rng.endContainer), rng.endOffset));\n    };\n\n    const adt$2 = Adt.generate([\n      { before: ['element'] },\n      {\n        on: [\n          'element',\n          'offset'\n        ]\n      },\n      { after: ['element'] }\n    ]);\n    const cata = (subject, onBefore, onOn, onAfter) => subject.fold(onBefore, onOn, onAfter);\n    const getStart$2 = situ => situ.fold(identity, identity, identity);\n    const before$1 = adt$2.before;\n    const on = adt$2.on;\n    const after$1 = adt$2.after;\n    const Situ = {\n      before: before$1,\n      on,\n      after: after$1,\n      cata,\n      getStart: getStart$2\n    };\n\n    const adt$1 = Adt.generate([\n      { domRange: ['rng'] },\n      {\n        relative: [\n          'startSitu',\n          'finishSitu'\n        ]\n      },\n      {\n        exact: [\n          'start',\n          'soffset',\n          'finish',\n          'foffset'\n        ]\n      }\n    ]);\n    const exactFromRange = simRange => adt$1.exact(simRange.start, simRange.soffset, simRange.finish, simRange.foffset);\n    const getStart$1 = selection => selection.match({\n      domRange: rng => SugarElement.fromDom(rng.startContainer),\n      relative: (startSitu, _finishSitu) => Situ.getStart(startSitu),\n      exact: (start, _soffset, _finish, _foffset) => start\n    });\n    const domRange = adt$1.domRange;\n    const relative = adt$1.relative;\n    const exact = adt$1.exact;\n    const getWin = selection => {\n      const start = getStart$1(selection);\n      return defaultView(start);\n    };\n    const range = SimRange.create;\n    const SimSelection = {\n      domRange,\n      relative,\n      exact,\n      exactFromRange,\n      getWin,\n      range\n    };\n\n    const beforeSpecial = (element, offset) => {\n      const name$1 = name(element);\n      if ('input' === name$1) {\n        return Situ.after(element);\n      } else if (!contains$2([\n          'br',\n          'img'\n        ], name$1)) {\n        return Situ.on(element, offset);\n      } else {\n        return offset === 0 ? Situ.before(element) : Situ.after(element);\n      }\n    };\n    const preprocessRelative = (startSitu, finishSitu) => {\n      const start = startSitu.fold(Situ.before, beforeSpecial, Situ.after);\n      const finish = finishSitu.fold(Situ.before, beforeSpecial, Situ.after);\n      return SimSelection.relative(start, finish);\n    };\n    const preprocessExact = (start, soffset, finish, foffset) => {\n      const startSitu = beforeSpecial(start, soffset);\n      const finishSitu = beforeSpecial(finish, foffset);\n      return SimSelection.relative(startSitu, finishSitu);\n    };\n    const preprocess = selection => selection.match({\n      domRange: rng => {\n        const start = SugarElement.fromDom(rng.startContainer);\n        const finish = SugarElement.fromDom(rng.endContainer);\n        return preprocessExact(start, rng.startOffset, finish, rng.endOffset);\n      },\n      relative: preprocessRelative,\n      exact: preprocessExact\n    });\n\n    const fromElements = (elements, scope) => {\n      const doc = scope || document;\n      const fragment = doc.createDocumentFragment();\n      each$e(elements, element => {\n        fragment.appendChild(element.dom);\n      });\n      return SugarElement.fromDom(fragment);\n    };\n\n    const toNative = selection => {\n      const win = SimSelection.getWin(selection).dom;\n      const getDomRange = (start, soffset, finish, foffset) => exactToNative(win, start, soffset, finish, foffset);\n      const filtered = preprocess(selection);\n      return diagnose(win, filtered).match({\n        ltr: getDomRange,\n        rtl: getDomRange\n      });\n    };\n    const getAtPoint = (win, x, y) => fromPoint$1(win, x, y);\n\n    const fromPoint = (clientX, clientY, doc) => {\n      const win = defaultView(SugarElement.fromDom(doc));\n      return getAtPoint(win.dom, clientX, clientY).map(simRange => {\n        const rng = doc.createRange();\n        rng.setStart(simRange.start.dom, simRange.soffset);\n        rng.setEnd(simRange.finish.dom, simRange.foffset);\n        return rng;\n      }).getOrUndefined();\n    };\n\n    const isEq$4 = (rng1, rng2) => {\n      return isNonNullable(rng1) && isNonNullable(rng2) && (rng1.startContainer === rng2.startContainer && rng1.startOffset === rng2.startOffset) && (rng1.endContainer === rng2.endContainer && rng1.endOffset === rng2.endOffset);\n    };\n\n    const findParent = (node, rootNode, predicate) => {\n      let currentNode = node;\n      while (currentNode && currentNode !== rootNode) {\n        if (predicate(currentNode)) {\n          return currentNode;\n        }\n        currentNode = currentNode.parentNode;\n      }\n      return null;\n    };\n    const hasParent$1 = (node, rootNode, predicate) => findParent(node, rootNode, predicate) !== null;\n    const hasParentWithName = (node, rootNode, name) => hasParent$1(node, rootNode, node => node.nodeName === name);\n    const isCeFalseCaretContainer = (node, rootNode) => isCaretContainer$2(node) && !hasParent$1(node, rootNode, isCaretNode);\n    const hasBrBeforeAfter = (dom, node, left) => {\n      const parentNode = node.parentNode;\n      if (parentNode) {\n        const walker = new DomTreeWalker(node, dom.getParent(parentNode, dom.isBlock) || dom.getRoot());\n        let currentNode;\n        while (currentNode = walker[left ? 'prev' : 'next']()) {\n          if (isBr$6(currentNode)) {\n            return true;\n          }\n        }\n      }\n      return false;\n    };\n    const isPrevNode = (node, name) => {\n      var _a;\n      return ((_a = node.previousSibling) === null || _a === void 0 ? void 0 : _a.nodeName) === name;\n    };\n    const hasContentEditableFalseParent = (root, node) => {\n      let currentNode = node;\n      while (currentNode && currentNode !== root) {\n        if (isContentEditableFalse$a(currentNode)) {\n          return true;\n        }\n        currentNode = currentNode.parentNode;\n      }\n      return false;\n    };\n    const findTextNodeRelative = (dom, isAfterNode, collapsed, left, startNode) => {\n      const body = dom.getRoot();\n      const nonEmptyElementsMap = dom.schema.getNonEmptyElements();\n      const parentNode = startNode.parentNode;\n      let lastInlineElement;\n      let node;\n      if (!parentNode) {\n        return Optional.none();\n      }\n      const parentBlockContainer = dom.getParent(parentNode, dom.isBlock) || body;\n      if (left && isBr$6(startNode) && isAfterNode && dom.isEmpty(parentBlockContainer)) {\n        return Optional.some(CaretPosition(parentNode, dom.nodeIndex(startNode)));\n      }\n      const walker = new DomTreeWalker(startNode, parentBlockContainer);\n      while (node = walker[left ? 'prev' : 'next']()) {\n        if (dom.getContentEditableParent(node) === 'false' || isCeFalseCaretContainer(node, body)) {\n          return Optional.none();\n        }\n        if (isText$a(node) && node.data.length > 0) {\n          if (!hasParentWithName(node, body, 'A')) {\n            return Optional.some(CaretPosition(node, left ? node.data.length : 0));\n          }\n          return Optional.none();\n        }\n        if (dom.isBlock(node) || nonEmptyElementsMap[node.nodeName.toLowerCase()]) {\n          return Optional.none();\n        }\n        lastInlineElement = node;\n      }\n      if (isComment(lastInlineElement)) {\n        return Optional.none();\n      }\n      if (collapsed && lastInlineElement) {\n        return Optional.some(CaretPosition(lastInlineElement, 0));\n      }\n      return Optional.none();\n    };\n    const normalizeEndPoint = (dom, collapsed, start, rng) => {\n      const body = dom.getRoot();\n      let node;\n      let normalized = false;\n      let container = start ? rng.startContainer : rng.endContainer;\n      let offset = start ? rng.startOffset : rng.endOffset;\n      const isAfterNode = isElement$6(container) && offset === container.childNodes.length;\n      const nonEmptyElementsMap = dom.schema.getNonEmptyElements();\n      let directionLeft = start;\n      if (isCaretContainer$2(container)) {\n        return Optional.none();\n      }\n      if (isElement$6(container) && offset > container.childNodes.length - 1) {\n        directionLeft = false;\n      }\n      if (isDocument$1(container)) {\n        container = body;\n        offset = 0;\n      }\n      if (container === body) {\n        if (directionLeft) {\n          node = container.childNodes[offset > 0 ? offset - 1 : 0];\n          if (node) {\n            if (isCaretContainer$2(node)) {\n              return Optional.none();\n            }\n            if (nonEmptyElementsMap[node.nodeName] || isTable$2(node)) {\n              return Optional.none();\n            }\n          }\n        }\n        if (container.hasChildNodes()) {\n          offset = Math.min(!directionLeft && offset > 0 ? offset - 1 : offset, container.childNodes.length - 1);\n          container = container.childNodes[offset];\n          offset = isText$a(container) && isAfterNode ? container.data.length : 0;\n          if (!collapsed && container === body.lastChild && isTable$2(container)) {\n            return Optional.none();\n          }\n          if (hasContentEditableFalseParent(body, container) || isCaretContainer$2(container)) {\n            return Optional.none();\n          }\n          if (container.hasChildNodes() && !isTable$2(container)) {\n            node = container;\n            const walker = new DomTreeWalker(container, body);\n            do {\n              if (isContentEditableFalse$a(node) || isCaretContainer$2(node)) {\n                normalized = false;\n                break;\n              }\n              if (isText$a(node) && node.data.length > 0) {\n                offset = directionLeft ? 0 : node.data.length;\n                container = node;\n                normalized = true;\n                break;\n              }\n              if (nonEmptyElementsMap[node.nodeName.toLowerCase()] && !isTableCellOrCaption(node)) {\n                offset = dom.nodeIndex(node);\n                container = node.parentNode;\n                if (!directionLeft) {\n                  offset++;\n                }\n                normalized = true;\n                break;\n              }\n            } while (node = directionLeft ? walker.next() : walker.prev());\n          }\n        }\n      }\n      if (collapsed) {\n        if (isText$a(container) && offset === 0) {\n          findTextNodeRelative(dom, isAfterNode, collapsed, true, container).each(pos => {\n            container = pos.container();\n            offset = pos.offset();\n            normalized = true;\n          });\n        }\n        if (isElement$6(container)) {\n          node = container.childNodes[offset];\n          if (!node) {\n            node = container.childNodes[offset - 1];\n          }\n          if (node && isBr$6(node) && !isPrevNode(node, 'A') && !hasBrBeforeAfter(dom, node, false) && !hasBrBeforeAfter(dom, node, true)) {\n            findTextNodeRelative(dom, isAfterNode, collapsed, true, node).each(pos => {\n              container = pos.container();\n              offset = pos.offset();\n              normalized = true;\n            });\n          }\n        }\n      }\n      if (directionLeft && !collapsed && isText$a(container) && offset === container.data.length) {\n        findTextNodeRelative(dom, isAfterNode, collapsed, false, container).each(pos => {\n          container = pos.container();\n          offset = pos.offset();\n          normalized = true;\n        });\n      }\n      return normalized && container ? Optional.some(CaretPosition(container, offset)) : Optional.none();\n    };\n    const normalize$2 = (dom, rng) => {\n      const collapsed = rng.collapsed, normRng = rng.cloneRange();\n      const startPos = CaretPosition.fromRangeStart(rng);\n      normalizeEndPoint(dom, collapsed, true, normRng).each(pos => {\n        if (!collapsed || !CaretPosition.isAbove(startPos, pos)) {\n          normRng.setStart(pos.container(), pos.offset());\n        }\n      });\n      if (!collapsed) {\n        normalizeEndPoint(dom, collapsed, false, normRng).each(pos => {\n          normRng.setEnd(pos.container(), pos.offset());\n        });\n      }\n      if (collapsed) {\n        normRng.collapse(true);\n      }\n      return isEq$4(rng, normRng) ? Optional.none() : Optional.some(normRng);\n    };\n\n    const splitText = (node, offset) => {\n      return node.splitText(offset);\n    };\n    const split = rng => {\n      let startContainer = rng.startContainer, startOffset = rng.startOffset, endContainer = rng.endContainer, endOffset = rng.endOffset;\n      if (startContainer === endContainer && isText$a(startContainer)) {\n        if (startOffset > 0 && startOffset < startContainer.data.length) {\n          endContainer = splitText(startContainer, startOffset);\n          startContainer = endContainer.previousSibling;\n          if (endOffset > startOffset) {\n            endOffset = endOffset - startOffset;\n            const newContainer = splitText(endContainer, endOffset).previousSibling;\n            startContainer = endContainer = newContainer;\n            endOffset = newContainer.data.length;\n            startOffset = 0;\n          } else {\n            endOffset = 0;\n          }\n        }\n      } else {\n        if (isText$a(startContainer) && startOffset > 0 && startOffset < startContainer.data.length) {\n          startContainer = splitText(startContainer, startOffset);\n          startOffset = 0;\n        }\n        if (isText$a(endContainer) && endOffset > 0 && endOffset < endContainer.data.length) {\n          const newContainer = splitText(endContainer, endOffset).previousSibling;\n          endContainer = newContainer;\n          endOffset = newContainer.data.length;\n        }\n      }\n      return {\n        startContainer,\n        startOffset,\n        endContainer,\n        endOffset\n      };\n    };\n\n    const RangeUtils = dom => {\n      const walk = (rng, callback) => {\n        return walk$3(dom, rng, callback);\n      };\n      const split$1 = split;\n      const normalize = rng => {\n        return normalize$2(dom, rng).fold(never, normalizedRng => {\n          rng.setStart(normalizedRng.startContainer, normalizedRng.startOffset);\n          rng.setEnd(normalizedRng.endContainer, normalizedRng.endOffset);\n          return true;\n        });\n      };\n      return {\n        walk,\n        split: split$1,\n        normalize\n      };\n    };\n    RangeUtils.compareRanges = isEq$4;\n    RangeUtils.getCaretRangeFromPoint = fromPoint;\n    RangeUtils.getSelectedNode = getSelectedNode;\n    RangeUtils.getNode = getNode$1;\n\n    const Dimension = (name, getOffset) => {\n      const set = (element, h) => {\n        if (!isNumber(h) && !h.match(/^[0-9]+$/)) {\n          throw new Error(name + '.set accepts only positive integer values. Value was ' + h);\n        }\n        const dom = element.dom;\n        if (isSupported$1(dom)) {\n          dom.style[name] = h + 'px';\n        }\n      };\n      const get = element => {\n        const r = getOffset(element);\n        if (r <= 0 || r === null) {\n          const css = get$7(element, name);\n          return parseFloat(css) || 0;\n        }\n        return r;\n      };\n      const getOuter = get;\n      const aggregate = (element, properties) => foldl(properties, (acc, property) => {\n        const val = get$7(element, property);\n        const value = val === undefined ? 0 : parseInt(val, 10);\n        return isNaN(value) ? acc : acc + value;\n      }, 0);\n      const max = (element, value, properties) => {\n        const cumulativeInclusions = aggregate(element, properties);\n        const absoluteMax = value > cumulativeInclusions ? value - cumulativeInclusions : 0;\n        return absoluteMax;\n      };\n      return {\n        set,\n        get,\n        getOuter,\n        aggregate,\n        max\n      };\n    };\n\n    const api = Dimension('height', element => {\n      const dom = element.dom;\n      return inBody(element) ? dom.getBoundingClientRect().height : dom.offsetHeight;\n    });\n    const get$2 = element => api.get(element);\n\n    const getDocument = () => SugarElement.fromDom(document);\n\n    const walkUp = (navigation, doc) => {\n      const frame = navigation.view(doc);\n      return frame.fold(constant([]), f => {\n        const parent = navigation.owner(f);\n        const rest = walkUp(navigation, parent);\n        return [f].concat(rest);\n      });\n    };\n    const pathTo = (element, navigation) => {\n      const d = navigation.owner(element);\n      return walkUp(navigation, d);\n    };\n\n    const view = doc => {\n      var _a;\n      const element = doc.dom === document ? Optional.none() : Optional.from((_a = doc.dom.defaultView) === null || _a === void 0 ? void 0 : _a.frameElement);\n      return element.map(SugarElement.fromDom);\n    };\n    const owner = element => documentOrOwner(element);\n\n    var Navigation = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        view: view,\n        owner: owner\n    });\n\n    const find = element => {\n      const doc = getDocument();\n      const scroll = get$5(doc);\n      const frames = pathTo(element, Navigation);\n      const offset = viewport(element);\n      const r = foldr(frames, (b, a) => {\n        const loc = viewport(a);\n        return {\n          left: b.left + loc.left,\n          top: b.top + loc.top\n        };\n      }, {\n        left: 0,\n        top: 0\n      });\n      return SugarPosition(r.left + offset.left + scroll.left, r.top + offset.top + scroll.top);\n    };\n\n    const excludeFromDescend = element => name(element) === 'textarea';\n    const fireScrollIntoViewEvent = (editor, data) => {\n      const scrollEvent = editor.dispatch('ScrollIntoView', data);\n      return scrollEvent.isDefaultPrevented();\n    };\n    const fireAfterScrollIntoViewEvent = (editor, data) => {\n      editor.dispatch('AfterScrollIntoView', data);\n    };\n    const descend = (element, offset) => {\n      const children$1 = children(element);\n      if (children$1.length === 0 || excludeFromDescend(element)) {\n        return {\n          element,\n          offset\n        };\n      } else if (offset < children$1.length && !excludeFromDescend(children$1[offset])) {\n        return {\n          element: children$1[offset],\n          offset: 0\n        };\n      } else {\n        const last = children$1[children$1.length - 1];\n        if (excludeFromDescend(last)) {\n          return {\n            element,\n            offset\n          };\n        } else {\n          if (name(last) === 'img') {\n            return {\n              element: last,\n              offset: 1\n            };\n          } else if (isText$b(last)) {\n            return {\n              element: last,\n              offset: get$3(last).length\n            };\n          } else {\n            return {\n              element: last,\n              offset: children(last).length\n            };\n          }\n        }\n      }\n    };\n    const markerInfo = (element, cleanupFun) => {\n      const pos = absolute(element);\n      const height = get$2(element);\n      return {\n        element,\n        bottom: pos.top + height,\n        height,\n        pos,\n        cleanup: cleanupFun\n      };\n    };\n    const createMarker$1 = (element, offset) => {\n      const startPoint = descend(element, offset);\n      const span = SugarElement.fromHtml('<span data-mce-bogus=\"all\" style=\"display: inline-block;\">' + ZWSP$1 + '</span>');\n      before$3(startPoint.element, span);\n      return markerInfo(span, () => remove$6(span));\n    };\n    const elementMarker = element => markerInfo(SugarElement.fromDom(element), noop);\n    const withMarker = (editor, f, rng, alignToTop) => {\n      preserveWith(editor, (_s, _e) => applyWithMarker(editor, f, rng, alignToTop), rng);\n    };\n    const withScrollEvents = (editor, doc, f, marker, alignToTop) => {\n      const data = {\n        elm: marker.element.dom,\n        alignToTop\n      };\n      if (fireScrollIntoViewEvent(editor, data)) {\n        return;\n      }\n      const scrollTop = get$5(doc).top;\n      f(doc, scrollTop, marker, alignToTop);\n      fireAfterScrollIntoViewEvent(editor, data);\n    };\n    const applyWithMarker = (editor, f, rng, alignToTop) => {\n      const body = SugarElement.fromDom(editor.getBody());\n      const doc = SugarElement.fromDom(editor.getDoc());\n      reflow(body);\n      const marker = createMarker$1(SugarElement.fromDom(rng.startContainer), rng.startOffset);\n      withScrollEvents(editor, doc, f, marker, alignToTop);\n      marker.cleanup();\n    };\n    const withElement = (editor, element, f, alignToTop) => {\n      const doc = SugarElement.fromDom(editor.getDoc());\n      withScrollEvents(editor, doc, f, elementMarker(element), alignToTop);\n    };\n    const preserveWith = (editor, f, rng) => {\n      const startElement = rng.startContainer;\n      const startOffset = rng.startOffset;\n      const endElement = rng.endContainer;\n      const endOffset = rng.endOffset;\n      f(SugarElement.fromDom(startElement), SugarElement.fromDom(endElement));\n      const newRng = editor.dom.createRng();\n      newRng.setStart(startElement, startOffset);\n      newRng.setEnd(endElement, endOffset);\n      editor.selection.setRng(rng);\n    };\n    const scrollToMarker = (marker, viewHeight, alignToTop, doc) => {\n      const pos = marker.pos;\n      if (alignToTop) {\n        to(pos.left, pos.top, doc);\n      } else {\n        const y = pos.top - viewHeight + marker.height;\n        to(pos.left, y, doc);\n      }\n    };\n    const intoWindowIfNeeded = (doc, scrollTop, viewHeight, marker, alignToTop) => {\n      const viewportBottom = viewHeight + scrollTop;\n      const markerTop = marker.pos.top;\n      const markerBottom = marker.bottom;\n      const largerThanViewport = markerBottom - markerTop >= viewHeight;\n      if (markerTop < scrollTop) {\n        scrollToMarker(marker, viewHeight, alignToTop !== false, doc);\n      } else if (markerTop > viewportBottom) {\n        const align = largerThanViewport ? alignToTop !== false : alignToTop === true;\n        scrollToMarker(marker, viewHeight, align, doc);\n      } else if (markerBottom > viewportBottom && !largerThanViewport) {\n        scrollToMarker(marker, viewHeight, alignToTop === true, doc);\n      }\n    };\n    const intoWindow = (doc, scrollTop, marker, alignToTop) => {\n      const viewHeight = defaultView(doc).dom.innerHeight;\n      intoWindowIfNeeded(doc, scrollTop, viewHeight, marker, alignToTop);\n    };\n    const intoFrame = (doc, scrollTop, marker, alignToTop) => {\n      const frameViewHeight = defaultView(doc).dom.innerHeight;\n      intoWindowIfNeeded(doc, scrollTop, frameViewHeight, marker, alignToTop);\n      const op = find(marker.element);\n      const viewportBounds = getBounds(window);\n      if (op.top < viewportBounds.y) {\n        intoView(marker.element, alignToTop !== false);\n      } else if (op.top > viewportBounds.bottom) {\n        intoView(marker.element, alignToTop === true);\n      }\n    };\n    const rangeIntoWindow = (editor, rng, alignToTop) => withMarker(editor, intoWindow, rng, alignToTop);\n    const elementIntoWindow = (editor, element, alignToTop) => withElement(editor, element, intoWindow, alignToTop);\n    const rangeIntoFrame = (editor, rng, alignToTop) => withMarker(editor, intoFrame, rng, alignToTop);\n    const elementIntoFrame = (editor, element, alignToTop) => withElement(editor, element, intoFrame, alignToTop);\n    const scrollElementIntoView = (editor, element, alignToTop) => {\n      const scroller = editor.inline ? elementIntoWindow : elementIntoFrame;\n      scroller(editor, element, alignToTop);\n    };\n    const scrollRangeIntoView = (editor, rng, alignToTop) => {\n      const scroller = editor.inline ? rangeIntoWindow : rangeIntoFrame;\n      scroller(editor, rng, alignToTop);\n    };\n\n    const focus$1 = element => element.dom.focus();\n    const hasFocus$1 = element => {\n      const root = getRootNode(element).dom;\n      return element.dom === root.activeElement;\n    };\n    const active$1 = (root = getDocument()) => Optional.from(root.dom.activeElement).map(SugarElement.fromDom);\n    const search = element => active$1(getRootNode(element)).filter(e => element.dom.contains(e.dom));\n\n    const clamp$1 = (offset, element) => {\n      const max = isText$b(element) ? get$3(element).length : children(element).length + 1;\n      if (offset > max) {\n        return max;\n      } else if (offset < 0) {\n        return 0;\n      }\n      return offset;\n    };\n    const normalizeRng = rng => SimSelection.range(rng.start, clamp$1(rng.soffset, rng.start), rng.finish, clamp$1(rng.foffset, rng.finish));\n    const isOrContains = (root, elm) => !isRestrictedNode(elm.dom) && (contains(root, elm) || eq(root, elm));\n    const isRngInRoot = root => rng => isOrContains(root, rng.start) && isOrContains(root, rng.finish);\n    const shouldStore = editor => editor.inline;\n    const nativeRangeToSelectionRange = r => SimSelection.range(SugarElement.fromDom(r.startContainer), r.startOffset, SugarElement.fromDom(r.endContainer), r.endOffset);\n    const readRange = win => {\n      const selection = win.getSelection();\n      const rng = !selection || selection.rangeCount === 0 ? Optional.none() : Optional.from(selection.getRangeAt(0));\n      return rng.map(nativeRangeToSelectionRange);\n    };\n    const getBookmark = root => {\n      const win = defaultView(root);\n      return readRange(win.dom).filter(isRngInRoot(root));\n    };\n    const validate = (root, bookmark) => Optional.from(bookmark).filter(isRngInRoot(root)).map(normalizeRng);\n    const bookmarkToNativeRng = bookmark => {\n      const rng = document.createRange();\n      try {\n        rng.setStart(bookmark.start.dom, bookmark.soffset);\n        rng.setEnd(bookmark.finish.dom, bookmark.foffset);\n        return Optional.some(rng);\n      } catch (_) {\n        return Optional.none();\n      }\n    };\n    const store = editor => {\n      const newBookmark = shouldStore(editor) ? getBookmark(SugarElement.fromDom(editor.getBody())) : Optional.none();\n      editor.bookmark = newBookmark.isSome() ? newBookmark : editor.bookmark;\n    };\n    const getRng = editor => {\n      const bookmark = editor.bookmark ? editor.bookmark : Optional.none();\n      return bookmark.bind(x => validate(SugarElement.fromDom(editor.getBody()), x)).bind(bookmarkToNativeRng);\n    };\n    const restore = editor => {\n      getRng(editor).each(rng => editor.selection.setRng(rng));\n    };\n\n    const isEditorUIElement$1 = elm => {\n      const className = elm.className.toString();\n      return className.indexOf('tox-') !== -1 || className.indexOf('mce-') !== -1;\n    };\n    const FocusManager = { isEditorUIElement: isEditorUIElement$1 };\n\n    const wrappedSetTimeout = (callback, time) => {\n      if (!isNumber(time)) {\n        time = 0;\n      }\n      return setTimeout(callback, time);\n    };\n    const wrappedSetInterval = (callback, time) => {\n      if (!isNumber(time)) {\n        time = 0;\n      }\n      return setInterval(callback, time);\n    };\n    const Delay = {\n      setEditorTimeout: (editor, callback, time) => {\n        return wrappedSetTimeout(() => {\n          if (!editor.removed) {\n            callback();\n          }\n        }, time);\n      },\n      setEditorInterval: (editor, callback, time) => {\n        const timer = wrappedSetInterval(() => {\n          if (!editor.removed) {\n            callback();\n          } else {\n            clearInterval(timer);\n          }\n        }, time);\n        return timer;\n      }\n    };\n\n    const isManualNodeChange = e => {\n      return e.type === 'nodechange' && e.selectionChange;\n    };\n    const registerPageMouseUp = (editor, throttledStore) => {\n      const mouseUpPage = () => {\n        throttledStore.throttle();\n      };\n      DOMUtils.DOM.bind(document, 'mouseup', mouseUpPage);\n      editor.on('remove', () => {\n        DOMUtils.DOM.unbind(document, 'mouseup', mouseUpPage);\n      });\n    };\n    const registerMouseUp = (editor, throttledStore) => {\n      editor.on('mouseup touchend', _e => {\n        throttledStore.throttle();\n      });\n    };\n    const registerEditorEvents = (editor, throttledStore) => {\n      registerMouseUp(editor, throttledStore);\n      editor.on('keyup NodeChange AfterSetSelectionRange', e => {\n        if (!isManualNodeChange(e)) {\n          store(editor);\n        }\n      });\n    };\n    const register$6 = editor => {\n      const throttledStore = first$1(() => {\n        store(editor);\n      }, 0);\n      editor.on('init', () => {\n        if (editor.inline) {\n          registerPageMouseUp(editor, throttledStore);\n        }\n        registerEditorEvents(editor, throttledStore);\n      });\n      editor.on('remove', () => {\n        throttledStore.cancel();\n      });\n    };\n\n    let documentFocusInHandler;\n    const DOM$9 = DOMUtils.DOM;\n    const isEditorUIElement = elm => {\n      return isElement$6(elm) && FocusManager.isEditorUIElement(elm);\n    };\n    const isEditorContentAreaElement = elm => {\n      const classList = elm.classList;\n      if (classList !== undefined) {\n        return classList.contains('tox-edit-area') || classList.contains('tox-edit-area__iframe') || classList.contains('mce-content-body');\n      } else {\n        return false;\n      }\n    };\n    const isUIElement = (editor, elm) => {\n      const customSelector = getCustomUiSelector(editor);\n      const parent = DOM$9.getParent(elm, elm => {\n        return isEditorUIElement(elm) || (customSelector ? editor.dom.is(elm, customSelector) : false);\n      });\n      return parent !== null;\n    };\n    const getActiveElement = editor => {\n      try {\n        const root = getRootNode(SugarElement.fromDom(editor.getElement()));\n        return active$1(root).fold(() => document.body, x => x.dom);\n      } catch (ex) {\n        return document.body;\n      }\n    };\n    const registerEvents$1 = (editorManager, e) => {\n      const editor = e.editor;\n      register$6(editor);\n      editor.on('focusin', () => {\n        const focusedEditor = editorManager.focusedEditor;\n        if (focusedEditor !== editor) {\n          if (focusedEditor) {\n            focusedEditor.dispatch('blur', { focusedEditor: editor });\n          }\n          editorManager.setActive(editor);\n          editorManager.focusedEditor = editor;\n          editor.dispatch('focus', { blurredEditor: focusedEditor });\n          editor.focus(true);\n        }\n      });\n      editor.on('focusout', () => {\n        Delay.setEditorTimeout(editor, () => {\n          const focusedEditor = editorManager.focusedEditor;\n          if (!isUIElement(editor, getActiveElement(editor)) && focusedEditor === editor) {\n            editor.dispatch('blur', { focusedEditor: null });\n            editorManager.focusedEditor = null;\n          }\n        });\n      });\n      if (!documentFocusInHandler) {\n        documentFocusInHandler = e => {\n          const activeEditor = editorManager.activeEditor;\n          if (activeEditor) {\n            getOriginalEventTarget(e).each(target => {\n              const elem = target;\n              if (elem.ownerDocument === document) {\n                if (elem !== document.body && !isUIElement(activeEditor, elem) && editorManager.focusedEditor === activeEditor) {\n                  activeEditor.dispatch('blur', { focusedEditor: null });\n                  editorManager.focusedEditor = null;\n                }\n              }\n            });\n          }\n        };\n        DOM$9.bind(document, 'focusin', documentFocusInHandler);\n      }\n    };\n    const unregisterDocumentEvents = (editorManager, e) => {\n      if (editorManager.focusedEditor === e.editor) {\n        editorManager.focusedEditor = null;\n      }\n      if (!editorManager.activeEditor && documentFocusInHandler) {\n        DOM$9.unbind(document, 'focusin', documentFocusInHandler);\n        documentFocusInHandler = null;\n      }\n    };\n    const setup$v = editorManager => {\n      editorManager.on('AddEditor', curry(registerEvents$1, editorManager));\n      editorManager.on('RemoveEditor', curry(unregisterDocumentEvents, editorManager));\n    };\n\n    const getContentEditableHost = (editor, node) => editor.dom.getParent(node, node => editor.dom.getContentEditable(node) === 'true');\n    const getCollapsedNode = rng => rng.collapsed ? Optional.from(getNode$1(rng.startContainer, rng.startOffset)).map(SugarElement.fromDom) : Optional.none();\n    const getFocusInElement = (root, rng) => getCollapsedNode(rng).bind(node => {\n      if (isTableSection(node)) {\n        return Optional.some(node);\n      } else if (!contains(root, node)) {\n        return Optional.some(root);\n      } else {\n        return Optional.none();\n      }\n    });\n    const normalizeSelection = (editor, rng) => {\n      getFocusInElement(SugarElement.fromDom(editor.getBody()), rng).bind(elm => {\n        return firstPositionIn(elm.dom);\n      }).fold(() => {\n        editor.selection.normalize();\n      }, caretPos => editor.selection.setRng(caretPos.toRange()));\n    };\n    const focusBody = body => {\n      if (body.setActive) {\n        try {\n          body.setActive();\n        } catch (ex) {\n          body.focus();\n        }\n      } else {\n        body.focus();\n      }\n    };\n    const hasElementFocus = elm => hasFocus$1(elm) || search(elm).isSome();\n    const hasIframeFocus = editor => isNonNullable(editor.iframeElement) && hasFocus$1(SugarElement.fromDom(editor.iframeElement));\n    const hasInlineFocus = editor => {\n      const rawBody = editor.getBody();\n      return rawBody && hasElementFocus(SugarElement.fromDom(rawBody));\n    };\n    const hasUiFocus = editor => {\n      const dos = getRootNode(SugarElement.fromDom(editor.getElement()));\n      return active$1(dos).filter(elem => !isEditorContentAreaElement(elem.dom) && isUIElement(editor, elem.dom)).isSome();\n    };\n    const hasFocus = editor => editor.inline ? hasInlineFocus(editor) : hasIframeFocus(editor);\n    const hasEditorOrUiFocus = editor => hasFocus(editor) || hasUiFocus(editor);\n    const focusEditor = editor => {\n      const selection = editor.selection;\n      const body = editor.getBody();\n      let rng = selection.getRng();\n      editor.quirks.refreshContentEditable();\n      if (isNonNullable(editor.bookmark) && !hasFocus(editor)) {\n        getRng(editor).each(bookmarkRng => {\n          editor.selection.setRng(bookmarkRng);\n          rng = bookmarkRng;\n        });\n      }\n      const contentEditableHost = getContentEditableHost(editor, selection.getNode());\n      if (contentEditableHost && editor.dom.isChildOf(contentEditableHost, body)) {\n        focusBody(contentEditableHost);\n        normalizeSelection(editor, rng);\n        activateEditor(editor);\n        return;\n      }\n      if (!editor.inline) {\n        if (!Env.browser.isOpera()) {\n          focusBody(body);\n        }\n        editor.getWin().focus();\n      }\n      if (Env.browser.isFirefox() || editor.inline) {\n        focusBody(body);\n        normalizeSelection(editor, rng);\n      }\n      activateEditor(editor);\n    };\n    const activateEditor = editor => editor.editorManager.setActive(editor);\n    const focus = (editor, skipFocus) => {\n      if (editor.removed) {\n        return;\n      }\n      if (skipFocus) {\n        activateEditor(editor);\n      } else {\n        focusEditor(editor);\n      }\n    };\n\n    const getEndpointElement = (root, rng, start, real, resolve) => {\n      const container = start ? rng.startContainer : rng.endContainer;\n      const offset = start ? rng.startOffset : rng.endOffset;\n      return Optional.from(container).map(SugarElement.fromDom).map(elm => !real || !rng.collapsed ? child$1(elm, resolve(elm, offset)).getOr(elm) : elm).bind(elm => isElement$7(elm) ? Optional.some(elm) : parent(elm).filter(isElement$7)).map(elm => elm.dom).getOr(root);\n    };\n    const getStart = (root, rng, real = false) => getEndpointElement(root, rng, true, real, (elm, offset) => Math.min(childNodesCount(elm), offset));\n    const getEnd$1 = (root, rng, real = false) => getEndpointElement(root, rng, false, real, (elm, offset) => offset > 0 ? offset - 1 : offset);\n    const skipEmptyTextNodes = (node, forwards) => {\n      const orig = node;\n      while (node && isText$a(node) && node.length === 0) {\n        node = forwards ? node.nextSibling : node.previousSibling;\n      }\n      return node || orig;\n    };\n    const getNode = (root, rng) => {\n      if (!rng) {\n        return root;\n      }\n      let startContainer = rng.startContainer;\n      let endContainer = rng.endContainer;\n      const startOffset = rng.startOffset;\n      const endOffset = rng.endOffset;\n      let node = rng.commonAncestorContainer;\n      if (!rng.collapsed) {\n        if (startContainer === endContainer) {\n          if (endOffset - startOffset < 2) {\n            if (startContainer.hasChildNodes()) {\n              node = startContainer.childNodes[startOffset];\n            }\n          }\n        }\n        if (isText$a(startContainer) && isText$a(endContainer)) {\n          if (startContainer.length === startOffset) {\n            startContainer = skipEmptyTextNodes(startContainer.nextSibling, true);\n          } else {\n            startContainer = startContainer.parentNode;\n          }\n          if (endOffset === 0) {\n            endContainer = skipEmptyTextNodes(endContainer.previousSibling, false);\n          } else {\n            endContainer = endContainer.parentNode;\n          }\n          if (startContainer && startContainer === endContainer) {\n            node = startContainer;\n          }\n        }\n      }\n      const elm = isText$a(node) ? node.parentNode : node;\n      return isElement$6(elm) ? elm : root;\n    };\n    const getSelectedBlocks = (dom, rng, startElm, endElm) => {\n      const selectedBlocks = [];\n      const root = dom.getRoot();\n      const start = dom.getParent(startElm || getStart(root, rng, rng.collapsed), dom.isBlock);\n      const end = dom.getParent(endElm || getEnd$1(root, rng, rng.collapsed), dom.isBlock);\n      if (start && start !== root) {\n        selectedBlocks.push(start);\n      }\n      if (start && end && start !== end) {\n        let node = start;\n        const walker = new DomTreeWalker(start, root);\n        while ((node = walker.next()) && node !== end) {\n          if (dom.isBlock(node)) {\n            selectedBlocks.push(node);\n          }\n        }\n      }\n      if (end && start !== end && end !== root) {\n        selectedBlocks.push(end);\n      }\n      return selectedBlocks;\n    };\n    const select = (dom, node, content) => Optional.from(node).bind(node => Optional.from(node.parentNode).map(parent => {\n      const idx = dom.nodeIndex(node);\n      const rng = dom.createRng();\n      rng.setStart(parent, idx);\n      rng.setEnd(parent, idx + 1);\n      if (content) {\n        moveEndPoint(dom, rng, node, true);\n        moveEndPoint(dom, rng, node, false);\n      }\n      return rng;\n    }));\n\n    const processRanges = (editor, ranges) => map$3(ranges, range => {\n      const evt = editor.dispatch('GetSelectionRange', { range });\n      return evt.range !== range ? evt.range : range;\n    });\n\n    const getEnd = element => name(element) === 'img' ? 1 : getOption(element).fold(() => children(element).length, v => v.length);\n    const isTextNodeWithCursorPosition = el => getOption(el).filter(text => text.trim().length !== 0 || text.indexOf(nbsp) > -1).isSome();\n    const elementsWithCursorPosition = [\n      'img',\n      'br'\n    ];\n    const isCursorPosition = elem => {\n      const hasCursorPosition = isTextNodeWithCursorPosition(elem);\n      return hasCursorPosition || contains$2(elementsWithCursorPosition, name(elem));\n    };\n\n    const first = element => descendant$1(element, isCursorPosition);\n    const last = element => descendantRtl(element, isCursorPosition);\n    const descendantRtl = (scope, predicate) => {\n      const descend = element => {\n        const children$1 = children(element);\n        for (let i = children$1.length - 1; i >= 0; i--) {\n          const child = children$1[i];\n          if (predicate(child)) {\n            return Optional.some(child);\n          }\n          const res = descend(child);\n          if (res.isSome()) {\n            return res;\n          }\n        }\n        return Optional.none();\n      };\n      return descend(scope);\n    };\n\n    const autocompleteSelector = '[data-mce-autocompleter]';\n    const create$9 = (editor, range) => {\n      if (findIn(SugarElement.fromDom(editor.getBody())).isNone()) {\n        const wrapper = SugarElement.fromHtml('<span data-mce-autocompleter=\"1\" data-mce-bogus=\"1\"></span>', editor.getDoc());\n        append$1(wrapper, SugarElement.fromDom(range.extractContents()));\n        range.insertNode(wrapper.dom);\n        parent(wrapper).each(elm => elm.dom.normalize());\n        last(wrapper).map(last => {\n          editor.selection.setCursorLocation(last.dom, getEnd(last));\n        });\n      }\n    };\n    const detect$1 = elm => closest$3(elm, autocompleteSelector);\n    const findIn = elm => descendant(elm, autocompleteSelector);\n    const remove$3 = (editor, elm) => findIn(elm).each(wrapper => {\n      const bookmark = editor.selection.getBookmark();\n      unwrap(wrapper);\n      editor.selection.moveToBookmark(bookmark);\n    });\n\n    const typeLookup = {\n      '#text': 3,\n      '#comment': 8,\n      '#cdata': 4,\n      '#pi': 7,\n      '#doctype': 10,\n      '#document-fragment': 11\n    };\n    const walk$2 = (node, root, prev) => {\n      const startName = prev ? 'lastChild' : 'firstChild';\n      const siblingName = prev ? 'prev' : 'next';\n      if (node[startName]) {\n        return node[startName];\n      }\n      if (node !== root) {\n        let sibling = node[siblingName];\n        if (sibling) {\n          return sibling;\n        }\n        for (let parent = node.parent; parent && parent !== root; parent = parent.parent) {\n          sibling = parent[siblingName];\n          if (sibling) {\n            return sibling;\n          }\n        }\n      }\n      return undefined;\n    };\n    const isEmptyTextNode = node => {\n      var _a;\n      const text = (_a = node.value) !== null && _a !== void 0 ? _a : '';\n      if (!isWhitespaceText(text)) {\n        return false;\n      }\n      const parentNode = node.parent;\n      if (parentNode && (parentNode.name !== 'span' || parentNode.attr('style')) && /^[ ]+$/.test(text)) {\n        return false;\n      }\n      return true;\n    };\n    const isNonEmptyElement = node => {\n      const isNamedAnchor = node.name === 'a' && !node.attr('href') && node.attr('id');\n      return node.attr('name') || node.attr('id') && !node.firstChild || node.attr('data-mce-bookmark') || isNamedAnchor;\n    };\n    class AstNode {\n      constructor(name, type) {\n        this.name = name;\n        this.type = type;\n        if (type === 1) {\n          this.attributes = [];\n          this.attributes.map = {};\n        }\n      }\n      static create(name, attrs) {\n        const node = new AstNode(name, typeLookup[name] || 1);\n        if (attrs) {\n          each$d(attrs, (value, attrName) => {\n            node.attr(attrName, value);\n          });\n        }\n        return node;\n      }\n      replace(node) {\n        const self = this;\n        if (node.parent) {\n          node.remove();\n        }\n        self.insert(node, self);\n        self.remove();\n        return self;\n      }\n      attr(name, value) {\n        const self = this;\n        if (!isString(name)) {\n          if (isNonNullable(name)) {\n            each$d(name, (value, key) => {\n              self.attr(key, value);\n            });\n          }\n          return self;\n        }\n        const attrs = self.attributes;\n        if (attrs) {\n          if (value !== undefined) {\n            if (value === null) {\n              if (name in attrs.map) {\n                delete attrs.map[name];\n                let i = attrs.length;\n                while (i--) {\n                  if (attrs[i].name === name) {\n                    attrs.splice(i, 1);\n                    return self;\n                  }\n                }\n              }\n              return self;\n            }\n            if (name in attrs.map) {\n              let i = attrs.length;\n              while (i--) {\n                if (attrs[i].name === name) {\n                  attrs[i].value = value;\n                  break;\n                }\n              }\n            } else {\n              attrs.push({\n                name,\n                value\n              });\n            }\n            attrs.map[name] = value;\n            return self;\n          }\n          return attrs.map[name];\n        }\n        return undefined;\n      }\n      clone() {\n        const self = this;\n        const clone = new AstNode(self.name, self.type);\n        const selfAttrs = self.attributes;\n        if (selfAttrs) {\n          const cloneAttrs = [];\n          cloneAttrs.map = {};\n          for (let i = 0, l = selfAttrs.length; i < l; i++) {\n            const selfAttr = selfAttrs[i];\n            if (selfAttr.name !== 'id') {\n              cloneAttrs[cloneAttrs.length] = {\n                name: selfAttr.name,\n                value: selfAttr.value\n              };\n              cloneAttrs.map[selfAttr.name] = selfAttr.value;\n            }\n          }\n          clone.attributes = cloneAttrs;\n        }\n        clone.value = self.value;\n        return clone;\n      }\n      wrap(wrapper) {\n        const self = this;\n        if (self.parent) {\n          self.parent.insert(wrapper, self);\n          wrapper.append(self);\n        }\n        return self;\n      }\n      unwrap() {\n        const self = this;\n        for (let node = self.firstChild; node;) {\n          const next = node.next;\n          self.insert(node, self, true);\n          node = next;\n        }\n        self.remove();\n      }\n      remove() {\n        const self = this, parent = self.parent, next = self.next, prev = self.prev;\n        if (parent) {\n          if (parent.firstChild === self) {\n            parent.firstChild = next;\n            if (next) {\n              next.prev = null;\n            }\n          } else if (prev) {\n            prev.next = next;\n          }\n          if (parent.lastChild === self) {\n            parent.lastChild = prev;\n            if (prev) {\n              prev.next = null;\n            }\n          } else if (next) {\n            next.prev = prev;\n          }\n          self.parent = self.next = self.prev = null;\n        }\n        return self;\n      }\n      append(node) {\n        const self = this;\n        if (node.parent) {\n          node.remove();\n        }\n        const last = self.lastChild;\n        if (last) {\n          last.next = node;\n          node.prev = last;\n          self.lastChild = node;\n        } else {\n          self.lastChild = self.firstChild = node;\n        }\n        node.parent = self;\n        return node;\n      }\n      insert(node, refNode, before) {\n        if (node.parent) {\n          node.remove();\n        }\n        const parent = refNode.parent || this;\n        if (before) {\n          if (refNode === parent.firstChild) {\n            parent.firstChild = node;\n          } else if (refNode.prev) {\n            refNode.prev.next = node;\n          }\n          node.prev = refNode.prev;\n          node.next = refNode;\n          refNode.prev = node;\n        } else {\n          if (refNode === parent.lastChild) {\n            parent.lastChild = node;\n          } else if (refNode.next) {\n            refNode.next.prev = node;\n          }\n          node.next = refNode.next;\n          node.prev = refNode;\n          refNode.next = node;\n        }\n        node.parent = parent;\n        return node;\n      }\n      getAll(name) {\n        const self = this;\n        const collection = [];\n        for (let node = self.firstChild; node; node = walk$2(node, self)) {\n          if (node.name === name) {\n            collection.push(node);\n          }\n        }\n        return collection;\n      }\n      children() {\n        const self = this;\n        const collection = [];\n        for (let node = self.firstChild; node; node = node.next) {\n          collection.push(node);\n        }\n        return collection;\n      }\n      empty() {\n        const self = this;\n        if (self.firstChild) {\n          const nodes = [];\n          for (let node = self.firstChild; node; node = walk$2(node, self)) {\n            nodes.push(node);\n          }\n          let i = nodes.length;\n          while (i--) {\n            const node = nodes[i];\n            node.parent = node.firstChild = node.lastChild = node.next = node.prev = null;\n          }\n        }\n        self.firstChild = self.lastChild = null;\n        return self;\n      }\n      isEmpty(elements, whitespace = {}, predicate) {\n        var _a;\n        const self = this;\n        let node = self.firstChild;\n        if (isNonEmptyElement(self)) {\n          return false;\n        }\n        if (node) {\n          do {\n            if (node.type === 1) {\n              if (node.attr('data-mce-bogus')) {\n                continue;\n              }\n              if (elements[node.name]) {\n                return false;\n              }\n              if (isNonEmptyElement(node)) {\n                return false;\n              }\n            }\n            if (node.type === 8) {\n              return false;\n            }\n            if (node.type === 3 && !isEmptyTextNode(node)) {\n              return false;\n            }\n            if (node.type === 3 && node.parent && whitespace[node.parent.name] && isWhitespaceText((_a = node.value) !== null && _a !== void 0 ? _a : '')) {\n              return false;\n            }\n            if (predicate && predicate(node)) {\n              return false;\n            }\n          } while (node = walk$2(node, self));\n        }\n        return true;\n      }\n      walk(prev) {\n        return walk$2(this, null, prev);\n      }\n    }\n\n    const isConditionalComment = (html, startIndex) => /^\\s*\\[if [\\w\\W]+\\]>.*<!\\[endif\\](--!?)?>/.test(html.substr(startIndex));\n    const findCommentEndIndex = (html, isBogus, startIndex = 0) => {\n      const lcHtml = html.toLowerCase();\n      if (lcHtml.indexOf('[if ', startIndex) !== -1 && isConditionalComment(lcHtml, startIndex)) {\n        const endIfIndex = lcHtml.indexOf('[endif]', startIndex);\n        return lcHtml.indexOf('>', endIfIndex);\n      } else {\n        if (isBogus) {\n          const endIndex = lcHtml.indexOf('>', startIndex);\n          return endIndex !== -1 ? endIndex : lcHtml.length;\n        } else {\n          const endCommentRegexp = /--!?>/g;\n          endCommentRegexp.lastIndex = startIndex;\n          const match = endCommentRegexp.exec(html);\n          return match ? match.index + match[0].length : lcHtml.length;\n        }\n      }\n    };\n    const findMatchingEndTagIndex = (schema, html, startIndex) => {\n      const startTagRegExp = /<([!?\\/])?([A-Za-z0-9\\-_:.]+)/g;\n      const endTagRegExp = /(?:\\s(?:[^'\">]+(?:\"[^\"]*\"|'[^']*'))*[^\"'>]*(?:\"[^\">]*|'[^'>]*)?|\\s*|\\/)>/g;\n      const voidElements = schema.getVoidElements();\n      let count = 1, index = startIndex;\n      while (count !== 0) {\n        startTagRegExp.lastIndex = index;\n        while (true) {\n          const startMatch = startTagRegExp.exec(html);\n          if (startMatch === null) {\n            return index;\n          } else if (startMatch[1] === '!') {\n            if (startsWith(startMatch[2], '--')) {\n              index = findCommentEndIndex(html, false, startMatch.index + '!--'.length);\n            } else {\n              index = findCommentEndIndex(html, true, startMatch.index + 1);\n            }\n            break;\n          } else {\n            endTagRegExp.lastIndex = startTagRegExp.lastIndex;\n            const endMatch = endTagRegExp.exec(html);\n            if (isNull(endMatch) || endMatch.index !== startTagRegExp.lastIndex) {\n              continue;\n            }\n            if (startMatch[1] === '/') {\n              count -= 1;\n            } else if (!has$2(voidElements, startMatch[2])) {\n              count += 1;\n            }\n            index = startTagRegExp.lastIndex + endMatch[0].length;\n            break;\n          }\n        }\n      }\n      return index;\n    };\n    const trimHtml$1 = (tempAttrs, html) => {\n      const trimContentRegExp = new RegExp(['\\\\s?(' + tempAttrs.join('|') + ')=\"[^\"]+\"'].join('|'), 'gi');\n      return html.replace(trimContentRegExp, '');\n    };\n    const trimInternal = (serializer, html) => {\n      const bogusAllRegExp = /<(\\w+) [^>]*data-mce-bogus=\"all\"[^>]*>/g;\n      const schema = serializer.schema;\n      let content = trimHtml$1(serializer.getTempAttrs(), html);\n      const voidElements = schema.getVoidElements();\n      let matches;\n      while (matches = bogusAllRegExp.exec(content)) {\n        const index = bogusAllRegExp.lastIndex;\n        const matchLength = matches[0].length;\n        let endTagIndex;\n        if (voidElements[matches[1]]) {\n          endTagIndex = index;\n        } else {\n          endTagIndex = findMatchingEndTagIndex(schema, content, index);\n        }\n        content = content.substring(0, index - matchLength) + content.substring(endTagIndex);\n        bogusAllRegExp.lastIndex = index - matchLength;\n      }\n      return trim$1(content);\n    };\n    const trimExternal = trimInternal;\n\n    const trimEmptyContents = (editor, html) => {\n      const blockName = getForcedRootBlock(editor);\n      const emptyRegExp = new RegExp(`^(<${ blockName }[^>]*>(&nbsp;|&#160;|\\\\s|\\u00a0|<br \\\\/>|)<\\\\/${ blockName }>[\\r\\n]*|<br \\\\/>[\\r\\n]*)$`);\n      return html.replace(emptyRegExp, '');\n    };\n    const getPlainTextContent = (editor, body) => {\n      const doc = editor.getDoc();\n      const dos = getRootNode(SugarElement.fromDom(editor.getBody()));\n      const offscreenDiv = SugarElement.fromTag('div', doc);\n      set$2(offscreenDiv, 'data-mce-bogus', 'all');\n      setAll(offscreenDiv, {\n        position: 'fixed',\n        left: '-9999999px',\n        top: '0'\n      });\n      set(offscreenDiv, body.innerHTML);\n      const bogusElements = descendants(offscreenDiv, '[data-mce-bogus]');\n      each$e(bogusElements, elem => {\n        const bogusValue = get$9(elem, 'data-mce-bogus');\n        if (bogusValue === 'all') {\n          remove$6(elem);\n        } else if (isBr$5(elem)) {\n          before$3(elem, SugarElement.fromText(zeroWidth));\n          remove$6(elem);\n        } else {\n          unwrap(elem);\n        }\n      });\n      const root = getContentContainer(dos);\n      append$1(root, offscreenDiv);\n      const content = trim$1(offscreenDiv.dom.innerText);\n      remove$6(offscreenDiv);\n      return content;\n    };\n    const getContentFromBody = (editor, args, body) => {\n      let content;\n      if (args.format === 'raw') {\n        content = Tools.trim(trimExternal(editor.serializer, body.innerHTML));\n      } else if (args.format === 'text') {\n        content = getPlainTextContent(editor, body);\n      } else if (args.format === 'tree') {\n        content = editor.serializer.serialize(body, args);\n      } else {\n        content = trimEmptyContents(editor, editor.serializer.serialize(body, args));\n      }\n      const shouldTrim = args.format !== 'text' && !isWsPreserveElement(SugarElement.fromDom(body));\n      return shouldTrim && isString(content) ? Tools.trim(content) : content;\n    };\n    const getContentInternal = (editor, args) => Optional.from(editor.getBody()).fold(constant(args.format === 'tree' ? new AstNode('body', 11) : ''), body => getContentFromBody(editor, args, body));\n\n    const makeMap$1 = Tools.makeMap;\n    const Writer = settings => {\n      const html = [];\n      settings = settings || {};\n      const indent = settings.indent;\n      const indentBefore = makeMap$1(settings.indent_before || '');\n      const indentAfter = makeMap$1(settings.indent_after || '');\n      const encode = Entities.getEncodeFunc(settings.entity_encoding || 'raw', settings.entities);\n      const htmlOutput = settings.element_format !== 'xhtml';\n      return {\n        start: (name, attrs, empty) => {\n          if (indent && indentBefore[name] && html.length > 0) {\n            const value = html[html.length - 1];\n            if (value.length > 0 && value !== '\\n') {\n              html.push('\\n');\n            }\n          }\n          html.push('<', name);\n          if (attrs) {\n            for (let i = 0, l = attrs.length; i < l; i++) {\n              const attr = attrs[i];\n              html.push(' ', attr.name, '=\"', encode(attr.value, true), '\"');\n            }\n          }\n          if (!empty || htmlOutput) {\n            html[html.length] = '>';\n          } else {\n            html[html.length] = ' />';\n          }\n          if (empty && indent && indentAfter[name] && html.length > 0) {\n            const value = html[html.length - 1];\n            if (value.length > 0 && value !== '\\n') {\n              html.push('\\n');\n            }\n          }\n        },\n        end: name => {\n          let value;\n          html.push('</', name, '>');\n          if (indent && indentAfter[name] && html.length > 0) {\n            value = html[html.length - 1];\n            if (value.length > 0 && value !== '\\n') {\n              html.push('\\n');\n            }\n          }\n        },\n        text: (text, raw) => {\n          if (text.length > 0) {\n            html[html.length] = raw ? text : encode(text);\n          }\n        },\n        cdata: text => {\n          html.push('<![CDATA[', text, ']]>');\n        },\n        comment: text => {\n          html.push('<!--', text, '-->');\n        },\n        pi: (name, text) => {\n          if (text) {\n            html.push('<?', name, ' ', encode(text), '?>');\n          } else {\n            html.push('<?', name, '?>');\n          }\n          if (indent) {\n            html.push('\\n');\n          }\n        },\n        doctype: text => {\n          html.push('<!DOCTYPE', text, '>', indent ? '\\n' : '');\n        },\n        reset: () => {\n          html.length = 0;\n        },\n        getContent: () => {\n          return html.join('').replace(/\\n$/, '');\n        }\n      };\n    };\n\n    const HtmlSerializer = (settings = {}, schema = Schema()) => {\n      const writer = Writer(settings);\n      settings.validate = 'validate' in settings ? settings.validate : true;\n      const serialize = node => {\n        const validate = settings.validate;\n        const handlers = {\n          3: node => {\n            var _a;\n            writer.text((_a = node.value) !== null && _a !== void 0 ? _a : '', node.raw);\n          },\n          8: node => {\n            var _a;\n            writer.comment((_a = node.value) !== null && _a !== void 0 ? _a : '');\n          },\n          7: node => {\n            writer.pi(node.name, node.value);\n          },\n          10: node => {\n            var _a;\n            writer.doctype((_a = node.value) !== null && _a !== void 0 ? _a : '');\n          },\n          4: node => {\n            var _a;\n            writer.cdata((_a = node.value) !== null && _a !== void 0 ? _a : '');\n          },\n          11: node => {\n            let tempNode = node;\n            if (tempNode = tempNode.firstChild) {\n              do {\n                walk(tempNode);\n              } while (tempNode = tempNode.next);\n            }\n          }\n        };\n        writer.reset();\n        const walk = node => {\n          var _a;\n          const handler = handlers[node.type];\n          if (!handler) {\n            const name = node.name;\n            const isEmpty = name in schema.getVoidElements();\n            let attrs = node.attributes;\n            if (validate && attrs && attrs.length > 1) {\n              const sortedAttrs = [];\n              sortedAttrs.map = {};\n              const elementRule = schema.getElementRule(node.name);\n              if (elementRule) {\n                for (let i = 0, l = elementRule.attributesOrder.length; i < l; i++) {\n                  const attrName = elementRule.attributesOrder[i];\n                  if (attrName in attrs.map) {\n                    const attrValue = attrs.map[attrName];\n                    sortedAttrs.map[attrName] = attrValue;\n                    sortedAttrs.push({\n                      name: attrName,\n                      value: attrValue\n                    });\n                  }\n                }\n                for (let i = 0, l = attrs.length; i < l; i++) {\n                  const attrName = attrs[i].name;\n                  if (!(attrName in sortedAttrs.map)) {\n                    const attrValue = attrs.map[attrName];\n                    sortedAttrs.map[attrName] = attrValue;\n                    sortedAttrs.push({\n                      name: attrName,\n                      value: attrValue\n                    });\n                  }\n                }\n                attrs = sortedAttrs;\n              }\n            }\n            writer.start(name, attrs, isEmpty);\n            if (!isEmpty) {\n              let child = node.firstChild;\n              if (child) {\n                if ((name === 'pre' || name === 'textarea') && child.type === 3 && ((_a = child.value) === null || _a === void 0 ? void 0 : _a[0]) === '\\n') {\n                  writer.text('\\n', true);\n                }\n                do {\n                  walk(child);\n                } while (child = child.next);\n              }\n              writer.end(name);\n            }\n          } else {\n            handler(node);\n          }\n        };\n        if (node.type === 1 && !settings.inner) {\n          walk(node);\n        } else if (node.type === 3) {\n          handlers[3](node);\n        } else {\n          handlers[11](node);\n        }\n        return writer.getContent();\n      };\n      return { serialize };\n    };\n\n    const nonInheritableStyles = new Set();\n    (() => {\n      const nonInheritableStylesArr = [\n        'margin',\n        'margin-left',\n        'margin-right',\n        'margin-top',\n        'margin-bottom',\n        'padding',\n        'padding-left',\n        'padding-right',\n        'padding-top',\n        'padding-bottom',\n        'border',\n        'border-width',\n        'border-style',\n        'border-color',\n        'background',\n        'background-attachment',\n        'background-clip',\n        'background-color',\n        'background-image',\n        'background-origin',\n        'background-position',\n        'background-repeat',\n        'background-size',\n        'float',\n        'position',\n        'left',\n        'right',\n        'top',\n        'bottom',\n        'z-index',\n        'display',\n        'transform',\n        'width',\n        'max-width',\n        'min-width',\n        'height',\n        'max-height',\n        'min-height',\n        'overflow',\n        'overflow-x',\n        'overflow-y',\n        'text-overflow',\n        'vertical-align',\n        'transition',\n        'transition-delay',\n        'transition-duration',\n        'transition-property',\n        'transition-timing-function'\n      ];\n      each$e(nonInheritableStylesArr, style => {\n        nonInheritableStyles.add(style);\n      });\n    })();\n    const shorthandStyleProps = [\n      'font',\n      'text-decoration',\n      'text-emphasis'\n    ];\n    const getStyleProps = (dom, node) => keys(dom.parseStyle(dom.getAttrib(node, 'style')));\n    const isNonInheritableStyle = style => nonInheritableStyles.has(style);\n    const hasInheritableStyles = (dom, node) => forall(getStyleProps(dom, node), style => !isNonInheritableStyle(style));\n    const getLonghandStyleProps = styles => filter$5(styles, style => exists(shorthandStyleProps, prop => startsWith(style, prop)));\n    const hasStyleConflict = (dom, node, parentNode) => {\n      const nodeStyleProps = getStyleProps(dom, node);\n      const parentNodeStyleProps = getStyleProps(dom, parentNode);\n      const valueMismatch = prop => {\n        var _a, _b;\n        const nodeValue = (_a = dom.getStyle(node, prop)) !== null && _a !== void 0 ? _a : '';\n        const parentValue = (_b = dom.getStyle(parentNode, prop)) !== null && _b !== void 0 ? _b : '';\n        return isNotEmpty(nodeValue) && isNotEmpty(parentValue) && nodeValue !== parentValue;\n      };\n      return exists(nodeStyleProps, nodeStyleProp => {\n        const propExists = props => exists(props, prop => prop === nodeStyleProp);\n        if (!propExists(parentNodeStyleProps) && propExists(shorthandStyleProps)) {\n          const longhandProps = getLonghandStyleProps(parentNodeStyleProps);\n          return exists(longhandProps, valueMismatch);\n        } else {\n          return valueMismatch(nodeStyleProp);\n        }\n      });\n    };\n\n    const isChar = (forward, predicate, pos) => Optional.from(pos.container()).filter(isText$a).exists(text => {\n      const delta = forward ? 0 : -1;\n      return predicate(text.data.charAt(pos.offset() + delta));\n    });\n    const isBeforeSpace = curry(isChar, true, isWhiteSpace);\n    const isAfterSpace = curry(isChar, false, isWhiteSpace);\n    const isEmptyText = pos => {\n      const container = pos.container();\n      return isText$a(container) && (container.data.length === 0 || isZwsp(container.data) && BookmarkManager.isBookmarkNode(container.parentNode));\n    };\n    const matchesElementPosition = (before, predicate) => pos => getChildNodeAtRelativeOffset(before ? 0 : -1, pos).filter(predicate).isSome();\n    const isImageBlock = node => isImg(node) && get$7(SugarElement.fromDom(node), 'display') === 'block';\n    const isCefNode = node => isContentEditableFalse$a(node) && !isBogusAll$1(node);\n    const isBeforeImageBlock = matchesElementPosition(true, isImageBlock);\n    const isAfterImageBlock = matchesElementPosition(false, isImageBlock);\n    const isBeforeMedia = matchesElementPosition(true, isMedia$2);\n    const isAfterMedia = matchesElementPosition(false, isMedia$2);\n    const isBeforeTable = matchesElementPosition(true, isTable$2);\n    const isAfterTable = matchesElementPosition(false, isTable$2);\n    const isBeforeContentEditableFalse = matchesElementPosition(true, isCefNode);\n    const isAfterContentEditableFalse = matchesElementPosition(false, isCefNode);\n\n    const dropLast = xs => xs.slice(0, -1);\n    const parentsUntil = (start, root, predicate) => {\n      if (contains(root, start)) {\n        return dropLast(parents$1(start, elm => {\n          return predicate(elm) || eq(elm, root);\n        }));\n      } else {\n        return [];\n      }\n    };\n    const parents = (start, root) => parentsUntil(start, root, never);\n    const parentsAndSelf = (start, root) => [start].concat(parents(start, root));\n\n    const navigateIgnoreEmptyTextNodes = (forward, root, from) => navigateIgnore(forward, root, from, isEmptyText);\n    const getClosestBlock$1 = (root, pos) => find$2(parentsAndSelf(SugarElement.fromDom(pos.container()), root), isBlock$2);\n    const isAtBeforeAfterBlockBoundary = (forward, root, pos) => navigateIgnoreEmptyTextNodes(forward, root.dom, pos).forall(newPos => getClosestBlock$1(root, pos).fold(() => !isInSameBlock(newPos, pos, root.dom), fromBlock => !isInSameBlock(newPos, pos, root.dom) && contains(fromBlock, SugarElement.fromDom(newPos.container()))));\n    const isAtBlockBoundary = (forward, root, pos) => getClosestBlock$1(root, pos).fold(() => navigateIgnoreEmptyTextNodes(forward, root.dom, pos).forall(newPos => !isInSameBlock(newPos, pos, root.dom)), parent => navigateIgnoreEmptyTextNodes(forward, parent.dom, pos).isNone());\n    const isAtStartOfBlock = curry(isAtBlockBoundary, false);\n    const isAtEndOfBlock = curry(isAtBlockBoundary, true);\n    const isBeforeBlock = curry(isAtBeforeAfterBlockBoundary, false);\n    const isAfterBlock = curry(isAtBeforeAfterBlockBoundary, true);\n\n    const isBr$1 = pos => getElementFromPosition(pos).exists(isBr$5);\n    const findBr = (forward, root, pos) => {\n      const parentBlocks = filter$5(parentsAndSelf(SugarElement.fromDom(pos.container()), root), isBlock$2);\n      const scope = head(parentBlocks).getOr(root);\n      return fromPosition(forward, scope.dom, pos).filter(isBr$1);\n    };\n    const isBeforeBr$1 = (root, pos) => getElementFromPosition(pos).exists(isBr$5) || findBr(true, root, pos).isSome();\n    const isAfterBr = (root, pos) => getElementFromPrevPosition(pos).exists(isBr$5) || findBr(false, root, pos).isSome();\n    const findPreviousBr = curry(findBr, false);\n    const findNextBr = curry(findBr, true);\n\n    const isInMiddleOfText = pos => CaretPosition.isTextPosition(pos) && !pos.isAtStart() && !pos.isAtEnd();\n    const getClosestBlock = (root, pos) => {\n      const parentBlocks = filter$5(parentsAndSelf(SugarElement.fromDom(pos.container()), root), isBlock$2);\n      return head(parentBlocks).getOr(root);\n    };\n    const hasSpaceBefore = (root, pos) => {\n      if (isInMiddleOfText(pos)) {\n        return isAfterSpace(pos);\n      } else {\n        return isAfterSpace(pos) || prevPosition(getClosestBlock(root, pos).dom, pos).exists(isAfterSpace);\n      }\n    };\n    const hasSpaceAfter = (root, pos) => {\n      if (isInMiddleOfText(pos)) {\n        return isBeforeSpace(pos);\n      } else {\n        return isBeforeSpace(pos) || nextPosition(getClosestBlock(root, pos).dom, pos).exists(isBeforeSpace);\n      }\n    };\n    const isPreValue = value => contains$2([\n      'pre',\n      'pre-wrap'\n    ], value);\n    const isInPre = pos => getElementFromPosition(pos).bind(elm => closest$4(elm, isElement$7)).exists(elm => isPreValue(get$7(elm, 'white-space')));\n    const isAtBeginningOfBody = (root, pos) => prevPosition(root.dom, pos).isNone();\n    const isAtEndOfBody = (root, pos) => nextPosition(root.dom, pos).isNone();\n    const isAtLineBoundary = (root, pos) => isAtBeginningOfBody(root, pos) || isAtEndOfBody(root, pos) || isAtStartOfBlock(root, pos) || isAtEndOfBlock(root, pos) || isAfterBr(root, pos) || isBeforeBr$1(root, pos);\n    const isCefBlock = node => isNonNullable(node) && isContentEditableFalse$a(node) && isBlockLike(node);\n    const isSiblingCefBlock = (root, direction) => container => {\n      return isCefBlock(new DomTreeWalker(container, root)[direction]());\n    };\n    const isBeforeCefBlock = (root, pos) => {\n      const nextPos = nextPosition(root.dom, pos).getOr(pos);\n      const isNextCefBlock = isSiblingCefBlock(root.dom, 'next');\n      return pos.isAtEnd() && (isNextCefBlock(pos.container()) || isNextCefBlock(nextPos.container()));\n    };\n    const isAfterCefBlock = (root, pos) => {\n      const prevPos = prevPosition(root.dom, pos).getOr(pos);\n      const isPrevCefBlock = isSiblingCefBlock(root.dom, 'prev');\n      return pos.isAtStart() && (isPrevCefBlock(pos.container()) || isPrevCefBlock(prevPos.container()));\n    };\n    const needsToHaveNbsp = (root, pos) => {\n      if (isInPre(pos)) {\n        return false;\n      } else {\n        return isAtLineBoundary(root, pos) || hasSpaceBefore(root, pos) || hasSpaceAfter(root, pos);\n      }\n    };\n    const needsToBeNbspLeft = (root, pos) => {\n      if (isInPre(pos)) {\n        return false;\n      } else {\n        return isAtStartOfBlock(root, pos) || isBeforeBlock(root, pos) || isAfterBr(root, pos) || hasSpaceBefore(root, pos) || isAfterCefBlock(root, pos);\n      }\n    };\n    const leanRight = pos => {\n      const container = pos.container();\n      const offset = pos.offset();\n      if (isText$a(container) && offset < container.data.length) {\n        return CaretPosition(container, offset + 1);\n      } else {\n        return pos;\n      }\n    };\n    const needsToBeNbspRight = (root, pos) => {\n      if (isInPre(pos)) {\n        return false;\n      } else {\n        return isAtEndOfBlock(root, pos) || isAfterBlock(root, pos) || isBeforeBr$1(root, pos) || hasSpaceAfter(root, pos) || isBeforeCefBlock(root, pos);\n      }\n    };\n    const needsToBeNbsp = (root, pos) => needsToBeNbspLeft(root, pos) || needsToBeNbspRight(root, leanRight(pos));\n    const isNbspAt = (text, offset) => isNbsp(text.charAt(offset));\n    const isWhiteSpaceAt = (text, offset) => isWhiteSpace(text.charAt(offset));\n    const hasNbsp = pos => {\n      const container = pos.container();\n      return isText$a(container) && contains$1(container.data, nbsp);\n    };\n    const normalizeNbspMiddle = text => {\n      const chars = text.split('');\n      return map$3(chars, (chr, i) => {\n        if (isNbsp(chr) && i > 0 && i < chars.length - 1 && isContent(chars[i - 1]) && isContent(chars[i + 1])) {\n          return ' ';\n        } else {\n          return chr;\n        }\n      }).join('');\n    };\n    const normalizeNbspAtStart = (root, node, makeNbsp) => {\n      const text = node.data;\n      const firstPos = CaretPosition(node, 0);\n      if (!makeNbsp && isNbspAt(text, 0) && !needsToBeNbsp(root, firstPos)) {\n        node.data = ' ' + text.slice(1);\n        return true;\n      } else if (makeNbsp && isWhiteSpaceAt(text, 0) && needsToBeNbspLeft(root, firstPos)) {\n        node.data = nbsp + text.slice(1);\n        return true;\n      } else {\n        return false;\n      }\n    };\n    const normalizeNbspInMiddleOfTextNode = node => {\n      const text = node.data;\n      const newText = normalizeNbspMiddle(text);\n      if (newText !== text) {\n        node.data = newText;\n        return true;\n      } else {\n        return false;\n      }\n    };\n    const normalizeNbspAtEnd = (root, node, makeNbsp) => {\n      const text = node.data;\n      const lastPos = CaretPosition(node, text.length - 1);\n      if (!makeNbsp && isNbspAt(text, text.length - 1) && !needsToBeNbsp(root, lastPos)) {\n        node.data = text.slice(0, -1) + ' ';\n        return true;\n      } else if (makeNbsp && isWhiteSpaceAt(text, text.length - 1) && needsToBeNbspRight(root, lastPos)) {\n        node.data = text.slice(0, -1) + nbsp;\n        return true;\n      } else {\n        return false;\n      }\n    };\n    const normalizeNbsps = (root, pos) => {\n      const container = pos.container();\n      if (!isText$a(container)) {\n        return Optional.none();\n      }\n      if (hasNbsp(pos)) {\n        const normalized = normalizeNbspAtStart(root, container, false) || normalizeNbspInMiddleOfTextNode(container) || normalizeNbspAtEnd(root, container, false);\n        return someIf(normalized, pos);\n      } else if (needsToBeNbsp(root, pos)) {\n        const normalized = normalizeNbspAtStart(root, container, true) || normalizeNbspAtEnd(root, container, true);\n        return someIf(normalized, pos);\n      } else {\n        return Optional.none();\n      }\n    };\n    const normalizeNbspsInEditor = editor => {\n      const root = SugarElement.fromDom(editor.getBody());\n      if (editor.selection.isCollapsed()) {\n        normalizeNbsps(root, CaretPosition.fromRangeStart(editor.selection.getRng())).each(pos => {\n          editor.selection.setRng(pos.toRange());\n        });\n      }\n    };\n\n    const normalize$1 = (node, offset, count) => {\n      if (count === 0) {\n        return;\n      }\n      const elm = SugarElement.fromDom(node);\n      const root = ancestor$3(elm, isBlock$2).getOr(elm);\n      const whitespace = node.data.slice(offset, offset + count);\n      const isEndOfContent = offset + count >= node.data.length && needsToBeNbspRight(root, CaretPosition(node, node.data.length));\n      const isStartOfContent = offset === 0 && needsToBeNbspLeft(root, CaretPosition(node, 0));\n      node.replaceData(offset, count, normalize$4(whitespace, 4, isStartOfContent, isEndOfContent));\n    };\n    const normalizeWhitespaceAfter = (node, offset) => {\n      const content = node.data.slice(offset);\n      const whitespaceCount = content.length - lTrim(content).length;\n      normalize$1(node, offset, whitespaceCount);\n    };\n    const normalizeWhitespaceBefore = (node, offset) => {\n      const content = node.data.slice(0, offset);\n      const whitespaceCount = content.length - rTrim(content).length;\n      normalize$1(node, offset - whitespaceCount, whitespaceCount);\n    };\n    const mergeTextNodes = (prevNode, nextNode, normalizeWhitespace, mergeToPrev = true) => {\n      const whitespaceOffset = rTrim(prevNode.data).length;\n      const newNode = mergeToPrev ? prevNode : nextNode;\n      const removeNode = mergeToPrev ? nextNode : prevNode;\n      if (mergeToPrev) {\n        newNode.appendData(removeNode.data);\n      } else {\n        newNode.insertData(0, removeNode.data);\n      }\n      remove$6(SugarElement.fromDom(removeNode));\n      if (normalizeWhitespace) {\n        normalizeWhitespaceAfter(newNode, whitespaceOffset);\n      }\n      return newNode;\n    };\n\n    const needsReposition = (pos, elm) => {\n      const container = pos.container();\n      const offset = pos.offset();\n      return !CaretPosition.isTextPosition(pos) && container === elm.parentNode && offset > CaretPosition.before(elm).offset();\n    };\n    const reposition = (elm, pos) => needsReposition(pos, elm) ? CaretPosition(pos.container(), pos.offset() - 1) : pos;\n    const beforeOrStartOf = node => isText$a(node) ? CaretPosition(node, 0) : CaretPosition.before(node);\n    const afterOrEndOf = node => isText$a(node) ? CaretPosition(node, node.data.length) : CaretPosition.after(node);\n    const getPreviousSiblingCaretPosition = elm => {\n      if (isCaretCandidate$3(elm.previousSibling)) {\n        return Optional.some(afterOrEndOf(elm.previousSibling));\n      } else {\n        return elm.previousSibling ? lastPositionIn(elm.previousSibling) : Optional.none();\n      }\n    };\n    const getNextSiblingCaretPosition = elm => {\n      if (isCaretCandidate$3(elm.nextSibling)) {\n        return Optional.some(beforeOrStartOf(elm.nextSibling));\n      } else {\n        return elm.nextSibling ? firstPositionIn(elm.nextSibling) : Optional.none();\n      }\n    };\n    const findCaretPositionBackwardsFromElm = (rootElement, elm) => {\n      return Optional.from(elm.previousSibling ? elm.previousSibling : elm.parentNode).bind(node => prevPosition(rootElement, CaretPosition.before(node))).orThunk(() => nextPosition(rootElement, CaretPosition.after(elm)));\n    };\n    const findCaretPositionForwardsFromElm = (rootElement, elm) => nextPosition(rootElement, CaretPosition.after(elm)).orThunk(() => prevPosition(rootElement, CaretPosition.before(elm)));\n    const findCaretPositionBackwards = (rootElement, elm) => getPreviousSiblingCaretPosition(elm).orThunk(() => getNextSiblingCaretPosition(elm)).orThunk(() => findCaretPositionBackwardsFromElm(rootElement, elm));\n    const findCaretPositionForward = (rootElement, elm) => getNextSiblingCaretPosition(elm).orThunk(() => getPreviousSiblingCaretPosition(elm)).orThunk(() => findCaretPositionForwardsFromElm(rootElement, elm));\n    const findCaretPosition = (forward, rootElement, elm) => forward ? findCaretPositionForward(rootElement, elm) : findCaretPositionBackwards(rootElement, elm);\n    const findCaretPosOutsideElmAfterDelete = (forward, rootElement, elm) => findCaretPosition(forward, rootElement, elm).map(curry(reposition, elm));\n    const setSelection$1 = (editor, forward, pos) => {\n      pos.fold(() => {\n        editor.focus();\n      }, pos => {\n        editor.selection.setRng(pos.toRange(), forward);\n      });\n    };\n    const eqRawNode = rawNode => elm => elm.dom === rawNode;\n    const isBlock = (editor, elm) => elm && has$2(editor.schema.getBlockElements(), name(elm));\n    const paddEmptyBlock = elm => {\n      if (isEmpty$2(elm)) {\n        const br = SugarElement.fromHtml('<br data-mce-bogus=\"1\">');\n        empty(elm);\n        append$1(elm, br);\n        return Optional.some(CaretPosition.before(br.dom));\n      } else {\n        return Optional.none();\n      }\n    };\n    const deleteNormalized = (elm, afterDeletePosOpt, normalizeWhitespace) => {\n      const prevTextOpt = prevSibling(elm).filter(isText$b);\n      const nextTextOpt = nextSibling(elm).filter(isText$b);\n      remove$6(elm);\n      return lift3(prevTextOpt, nextTextOpt, afterDeletePosOpt, (prev, next, pos) => {\n        const prevNode = prev.dom, nextNode = next.dom;\n        const offset = prevNode.data.length;\n        mergeTextNodes(prevNode, nextNode, normalizeWhitespace);\n        return pos.container() === nextNode ? CaretPosition(prevNode, offset) : pos;\n      }).orThunk(() => {\n        if (normalizeWhitespace) {\n          prevTextOpt.each(elm => normalizeWhitespaceBefore(elm.dom, elm.dom.length));\n          nextTextOpt.each(elm => normalizeWhitespaceAfter(elm.dom, 0));\n        }\n        return afterDeletePosOpt;\n      });\n    };\n    const isInlineElement = (editor, element) => has$2(editor.schema.getTextInlineElements(), name(element));\n    const deleteElement$2 = (editor, forward, elm, moveCaret = true) => {\n      const afterDeletePos = findCaretPosOutsideElmAfterDelete(forward, editor.getBody(), elm.dom);\n      const parentBlock = ancestor$3(elm, curry(isBlock, editor), eqRawNode(editor.getBody()));\n      const normalizedAfterDeletePos = deleteNormalized(elm, afterDeletePos, isInlineElement(editor, elm));\n      if (editor.dom.isEmpty(editor.getBody())) {\n        editor.setContent('');\n        editor.selection.setCursorLocation();\n      } else {\n        parentBlock.bind(paddEmptyBlock).fold(() => {\n          if (moveCaret) {\n            setSelection$1(editor, forward, normalizedAfterDeletePos);\n          }\n        }, paddPos => {\n          if (moveCaret) {\n            setSelection$1(editor, forward, Optional.some(paddPos));\n          }\n        });\n      }\n    };\n\n    const strongRtl = /[\\u0591-\\u07FF\\uFB1D-\\uFDFF\\uFE70-\\uFEFC]/;\n    const hasStrongRtl = text => strongRtl.test(text);\n\n    const isInlineTarget = (editor, elm) => is$1(SugarElement.fromDom(elm), getInlineBoundarySelector(editor));\n    const isRtl = element => {\n      var _a;\n      return DOMUtils.DOM.getStyle(element, 'direction', true) === 'rtl' || hasStrongRtl((_a = element.textContent) !== null && _a !== void 0 ? _a : '');\n    };\n    const findInlineParents = (isInlineTarget, rootNode, pos) => filter$5(DOMUtils.DOM.getParents(pos.container(), '*', rootNode), isInlineTarget);\n    const findRootInline = (isInlineTarget, rootNode, pos) => {\n      const parents = findInlineParents(isInlineTarget, rootNode, pos);\n      return Optional.from(parents[parents.length - 1]);\n    };\n    const hasSameParentBlock = (rootNode, node1, node2) => {\n      const block1 = getParentBlock$3(node1, rootNode);\n      const block2 = getParentBlock$3(node2, rootNode);\n      return isNonNullable(block1) && block1 === block2;\n    };\n    const isAtZwsp = pos => isBeforeInline(pos) || isAfterInline(pos);\n    const normalizePosition = (forward, pos) => {\n      const container = pos.container(), offset = pos.offset();\n      if (forward) {\n        if (isCaretContainerInline(container)) {\n          if (isText$a(container.nextSibling)) {\n            return CaretPosition(container.nextSibling, 0);\n          } else {\n            return CaretPosition.after(container);\n          }\n        } else {\n          return isBeforeInline(pos) ? CaretPosition(container, offset + 1) : pos;\n        }\n      } else {\n        if (isCaretContainerInline(container)) {\n          if (isText$a(container.previousSibling)) {\n            return CaretPosition(container.previousSibling, container.previousSibling.data.length);\n          } else {\n            return CaretPosition.before(container);\n          }\n        } else {\n          return isAfterInline(pos) ? CaretPosition(container, offset - 1) : pos;\n        }\n      }\n    };\n    const normalizeForwards = curry(normalizePosition, true);\n    const normalizeBackwards = curry(normalizePosition, false);\n\n    const execCommandIgnoreInputEvents = (editor, command) => {\n      const inputBlocker = e => e.stopImmediatePropagation();\n      editor.on('beforeinput input', inputBlocker, true);\n      editor.getDoc().execCommand(command);\n      editor.off('beforeinput input', inputBlocker);\n    };\n    const execEditorDeleteCommand = editor => {\n      editor.execCommand('delete');\n    };\n    const execNativeDeleteCommand = editor => execCommandIgnoreInputEvents(editor, 'Delete');\n    const execNativeForwardDeleteCommand = editor => execCommandIgnoreInputEvents(editor, 'ForwardDelete');\n    const isBeforeRoot = rootNode => elm => is$2(parent(elm), rootNode, eq);\n    const isTextBlockOrListItem = element => isTextBlock$2(element) || isListItem$1(element);\n    const getParentBlock$2 = (rootNode, elm) => {\n      if (contains(rootNode, elm)) {\n        return closest$4(elm, isTextBlockOrListItem, isBeforeRoot(rootNode));\n      } else {\n        return Optional.none();\n      }\n    };\n    const paddEmptyBody = (editor, moveSelection = true) => {\n      if (editor.dom.isEmpty(editor.getBody())) {\n        editor.setContent('', { no_selection: !moveSelection });\n      }\n    };\n    const willDeleteLastPositionInElement = (forward, fromPos, elm) => lift2(firstPositionIn(elm), lastPositionIn(elm), (firstPos, lastPos) => {\n      const normalizedFirstPos = normalizePosition(true, firstPos);\n      const normalizedLastPos = normalizePosition(false, lastPos);\n      const normalizedFromPos = normalizePosition(false, fromPos);\n      if (forward) {\n        return nextPosition(elm, normalizedFromPos).exists(nextPos => nextPos.isEqual(normalizedLastPos) && fromPos.isEqual(normalizedFirstPos));\n      } else {\n        return prevPosition(elm, normalizedFromPos).exists(prevPos => prevPos.isEqual(normalizedFirstPos) && fromPos.isEqual(normalizedLastPos));\n      }\n    }).getOr(true);\n    const freefallRtl = root => {\n      const child = isComment$1(root) ? prevSibling(root) : lastChild(root);\n      return child.bind(freefallRtl).orThunk(() => Optional.some(root));\n    };\n    const deleteRangeContents = (editor, rng, root, moveSelection = true) => {\n      var _a;\n      rng.deleteContents();\n      const lastNode = freefallRtl(root).getOr(root);\n      const lastBlock = SugarElement.fromDom((_a = editor.dom.getParent(lastNode.dom, editor.dom.isBlock)) !== null && _a !== void 0 ? _a : root.dom);\n      if (lastBlock.dom === editor.getBody()) {\n        paddEmptyBody(editor, moveSelection);\n      } else if (isEmpty$2(lastBlock)) {\n        fillWithPaddingBr(lastBlock);\n        if (moveSelection) {\n          editor.selection.setCursorLocation(lastBlock.dom, 0);\n        }\n      }\n      if (!eq(root, lastBlock)) {\n        const additionalCleanupNodes = is$2(parent(lastBlock), root) ? [] : siblings(lastBlock);\n        each$e(additionalCleanupNodes.concat(children(root)), node => {\n          if (!eq(node, lastBlock) && !contains(node, lastBlock) && isEmpty$2(node)) {\n            remove$6(node);\n          }\n        });\n      }\n    };\n\n    const isRootFromElement = root => cur => eq(root, cur);\n    const getTableCells = table => descendants(table, 'td,th');\n    const getTableDetailsFromRange = (rng, isRoot) => {\n      const getTable = node => getClosestTable(SugarElement.fromDom(node), isRoot);\n      const startTable = getTable(rng.startContainer);\n      const endTable = getTable(rng.endContainer);\n      const isStartInTable = startTable.isSome();\n      const isEndInTable = endTable.isSome();\n      const isSameTable = lift2(startTable, endTable, eq).getOr(false);\n      const isMultiTable = !isSameTable && isStartInTable && isEndInTable;\n      return {\n        startTable,\n        endTable,\n        isStartInTable,\n        isEndInTable,\n        isSameTable,\n        isMultiTable\n      };\n    };\n\n    const tableCellRng = (start, end) => ({\n      start,\n      end\n    });\n    const tableSelection = (rng, table, cells) => ({\n      rng,\n      table,\n      cells\n    });\n    const deleteAction = Adt.generate([\n      {\n        singleCellTable: [\n          'rng',\n          'cell'\n        ]\n      },\n      { fullTable: ['table'] },\n      {\n        partialTable: [\n          'cells',\n          'outsideDetails'\n        ]\n      },\n      {\n        multiTable: [\n          'startTableCells',\n          'endTableCells',\n          'betweenRng'\n        ]\n      }\n    ]);\n    const getClosestCell$1 = (container, isRoot) => closest$3(SugarElement.fromDom(container), 'td,th', isRoot);\n    const isExpandedCellRng = cellRng => !eq(cellRng.start, cellRng.end);\n    const getTableFromCellRng = (cellRng, isRoot) => getClosestTable(cellRng.start, isRoot).bind(startParentTable => getClosestTable(cellRng.end, isRoot).bind(endParentTable => someIf(eq(startParentTable, endParentTable), startParentTable)));\n    const isSingleCellTable = (cellRng, isRoot) => !isExpandedCellRng(cellRng) && getTableFromCellRng(cellRng, isRoot).exists(table => {\n      const rows = table.dom.rows;\n      return rows.length === 1 && rows[0].cells.length === 1;\n    });\n    const getCellRng = (rng, isRoot) => {\n      const startCell = getClosestCell$1(rng.startContainer, isRoot);\n      const endCell = getClosestCell$1(rng.endContainer, isRoot);\n      return lift2(startCell, endCell, tableCellRng);\n    };\n    const getCellRangeFromStartTable = isRoot => startCell => getClosestTable(startCell, isRoot).bind(table => last$3(getTableCells(table)).map(endCell => tableCellRng(startCell, endCell)));\n    const getCellRangeFromEndTable = isRoot => endCell => getClosestTable(endCell, isRoot).bind(table => head(getTableCells(table)).map(startCell => tableCellRng(startCell, endCell)));\n    const getTableSelectionFromCellRng = isRoot => cellRng => getTableFromCellRng(cellRng, isRoot).map(table => tableSelection(cellRng, table, getTableCells(table)));\n    const getTableSelections = (cellRng, selectionDetails, rng, isRoot) => {\n      if (rng.collapsed || !cellRng.forall(isExpandedCellRng)) {\n        return Optional.none();\n      } else if (selectionDetails.isSameTable) {\n        const sameTableSelection = cellRng.bind(getTableSelectionFromCellRng(isRoot));\n        return Optional.some({\n          start: sameTableSelection,\n          end: sameTableSelection\n        });\n      } else {\n        const startCell = getClosestCell$1(rng.startContainer, isRoot);\n        const endCell = getClosestCell$1(rng.endContainer, isRoot);\n        const startTableSelection = startCell.bind(getCellRangeFromStartTable(isRoot)).bind(getTableSelectionFromCellRng(isRoot));\n        const endTableSelection = endCell.bind(getCellRangeFromEndTable(isRoot)).bind(getTableSelectionFromCellRng(isRoot));\n        return Optional.some({\n          start: startTableSelection,\n          end: endTableSelection\n        });\n      }\n    };\n    const getCellIndex = (cells, cell) => findIndex$2(cells, x => eq(x, cell));\n    const getSelectedCells = tableSelection => lift2(getCellIndex(tableSelection.cells, tableSelection.rng.start), getCellIndex(tableSelection.cells, tableSelection.rng.end), (startIndex, endIndex) => tableSelection.cells.slice(startIndex, endIndex + 1));\n    const isSingleCellTableContentSelected = (optCellRng, rng, isRoot) => optCellRng.exists(cellRng => isSingleCellTable(cellRng, isRoot) && hasAllContentsSelected(cellRng.start, rng));\n    const unselectCells = (rng, selectionDetails) => {\n      const {startTable, endTable} = selectionDetails;\n      const otherContentRng = rng.cloneRange();\n      startTable.each(table => otherContentRng.setStartAfter(table.dom));\n      endTable.each(table => otherContentRng.setEndBefore(table.dom));\n      return otherContentRng;\n    };\n    const handleSingleTable = (cellRng, selectionDetails, rng, isRoot) => getTableSelections(cellRng, selectionDetails, rng, isRoot).bind(({start, end}) => start.or(end)).bind(tableSelection => {\n      const {isSameTable} = selectionDetails;\n      const selectedCells = getSelectedCells(tableSelection).getOr([]);\n      if (isSameTable && tableSelection.cells.length === selectedCells.length) {\n        return Optional.some(deleteAction.fullTable(tableSelection.table));\n      } else if (selectedCells.length > 0) {\n        if (isSameTable) {\n          return Optional.some(deleteAction.partialTable(selectedCells, Optional.none()));\n        } else {\n          const otherContentRng = unselectCells(rng, selectionDetails);\n          return Optional.some(deleteAction.partialTable(selectedCells, Optional.some({\n            ...selectionDetails,\n            rng: otherContentRng\n          })));\n        }\n      } else {\n        return Optional.none();\n      }\n    });\n    const handleMultiTable = (cellRng, selectionDetails, rng, isRoot) => getTableSelections(cellRng, selectionDetails, rng, isRoot).bind(({start, end}) => {\n      const startTableSelectedCells = start.bind(getSelectedCells).getOr([]);\n      const endTableSelectedCells = end.bind(getSelectedCells).getOr([]);\n      if (startTableSelectedCells.length > 0 && endTableSelectedCells.length > 0) {\n        const otherContentRng = unselectCells(rng, selectionDetails);\n        return Optional.some(deleteAction.multiTable(startTableSelectedCells, endTableSelectedCells, otherContentRng));\n      } else {\n        return Optional.none();\n      }\n    });\n    const getActionFromRange = (root, rng) => {\n      const isRoot = isRootFromElement(root);\n      const optCellRng = getCellRng(rng, isRoot);\n      const selectionDetails = getTableDetailsFromRange(rng, isRoot);\n      if (isSingleCellTableContentSelected(optCellRng, rng, isRoot)) {\n        return optCellRng.map(cellRng => deleteAction.singleCellTable(rng, cellRng.start));\n      } else if (selectionDetails.isMultiTable) {\n        return handleMultiTable(optCellRng, selectionDetails, rng, isRoot);\n      } else {\n        return handleSingleTable(optCellRng, selectionDetails, rng, isRoot);\n      }\n    };\n\n    const cleanCells = cells => each$e(cells, cell => {\n      remove$b(cell, 'contenteditable');\n      fillWithPaddingBr(cell);\n    });\n    const getOutsideBlock = (editor, container) => Optional.from(editor.dom.getParent(container, editor.dom.isBlock)).map(SugarElement.fromDom);\n    const handleEmptyBlock = (editor, startInTable, emptyBlock) => {\n      emptyBlock.each(block => {\n        if (startInTable) {\n          remove$6(block);\n        } else {\n          fillWithPaddingBr(block);\n          editor.selection.setCursorLocation(block.dom, 0);\n        }\n      });\n    };\n    const deleteContentInsideCell = (editor, cell, rng, isFirstCellInSelection) => {\n      const insideTableRng = rng.cloneRange();\n      if (isFirstCellInSelection) {\n        insideTableRng.setStart(rng.startContainer, rng.startOffset);\n        insideTableRng.setEndAfter(cell.dom.lastChild);\n      } else {\n        insideTableRng.setStartBefore(cell.dom.firstChild);\n        insideTableRng.setEnd(rng.endContainer, rng.endOffset);\n      }\n      deleteCellContents(editor, insideTableRng, cell, false).each(action => action());\n    };\n    const collapseAndRestoreCellSelection = editor => {\n      const selectedCells = getCellsFromEditor(editor);\n      const selectedNode = SugarElement.fromDom(editor.selection.getNode());\n      if (isTableCell$3(selectedNode.dom) && isEmpty$2(selectedNode)) {\n        editor.selection.setCursorLocation(selectedNode.dom, 0);\n      } else {\n        editor.selection.collapse(true);\n      }\n      if (selectedCells.length > 1 && exists(selectedCells, cell => eq(cell, selectedNode))) {\n        set$2(selectedNode, 'data-mce-selected', '1');\n      }\n    };\n    const emptySingleTableCells = (editor, cells, outsideDetails) => Optional.some(() => {\n      const editorRng = editor.selection.getRng();\n      const cellsToClean = outsideDetails.bind(({rng, isStartInTable}) => {\n        const outsideBlock = getOutsideBlock(editor, isStartInTable ? rng.endContainer : rng.startContainer);\n        rng.deleteContents();\n        handleEmptyBlock(editor, isStartInTable, outsideBlock.filter(isEmpty$2));\n        const endPointCell = isStartInTable ? cells[0] : cells[cells.length - 1];\n        deleteContentInsideCell(editor, endPointCell, editorRng, isStartInTable);\n        if (!isEmpty$2(endPointCell)) {\n          return Optional.some(isStartInTable ? cells.slice(1) : cells.slice(0, -1));\n        } else {\n          return Optional.none();\n        }\n      }).getOr(cells);\n      cleanCells(cellsToClean);\n      collapseAndRestoreCellSelection(editor);\n    });\n    const emptyMultiTableCells = (editor, startTableCells, endTableCells, betweenRng) => Optional.some(() => {\n      const rng = editor.selection.getRng();\n      const startCell = startTableCells[0];\n      const endCell = endTableCells[endTableCells.length - 1];\n      deleteContentInsideCell(editor, startCell, rng, true);\n      deleteContentInsideCell(editor, endCell, rng, false);\n      const startTableCellsToClean = isEmpty$2(startCell) ? startTableCells : startTableCells.slice(1);\n      const endTableCellsToClean = isEmpty$2(endCell) ? endTableCells : endTableCells.slice(0, -1);\n      cleanCells(startTableCellsToClean.concat(endTableCellsToClean));\n      betweenRng.deleteContents();\n      collapseAndRestoreCellSelection(editor);\n    });\n    const deleteCellContents = (editor, rng, cell, moveSelection = true) => Optional.some(() => {\n      deleteRangeContents(editor, rng, cell, moveSelection);\n    });\n    const deleteTableElement = (editor, table) => Optional.some(() => deleteElement$2(editor, false, table));\n    const deleteCellRange = (editor, rootElm, rng) => getActionFromRange(rootElm, rng).bind(action => action.fold(curry(deleteCellContents, editor), curry(deleteTableElement, editor), curry(emptySingleTableCells, editor), curry(emptyMultiTableCells, editor)));\n    const deleteCaptionRange = (editor, caption) => emptyElement(editor, caption);\n    const deleteTableRange = (editor, rootElm, rng, startElm) => getParentCaption(rootElm, startElm).fold(() => deleteCellRange(editor, rootElm, rng), caption => deleteCaptionRange(editor, caption));\n    const deleteRange$2 = (editor, startElm, selectedCells) => {\n      const rootNode = SugarElement.fromDom(editor.getBody());\n      const rng = editor.selection.getRng();\n      return selectedCells.length !== 0 ? emptySingleTableCells(editor, selectedCells, Optional.none()) : deleteTableRange(editor, rootNode, rng, startElm);\n    };\n    const getParentCell = (rootElm, elm) => find$2(parentsAndSelf(elm, rootElm), isTableCell$2);\n    const getParentCaption = (rootElm, elm) => find$2(parentsAndSelf(elm, rootElm), isTag('caption'));\n    const deleteBetweenCells = (editor, rootElm, forward, fromCell, from) => navigate(forward, editor.getBody(), from).bind(to => getParentCell(rootElm, SugarElement.fromDom(to.getNode())).bind(toCell => eq(toCell, fromCell) ? Optional.none() : Optional.some(noop)));\n    const emptyElement = (editor, elm) => Optional.some(() => {\n      fillWithPaddingBr(elm);\n      editor.selection.setCursorLocation(elm.dom, 0);\n    });\n    const isDeleteOfLastCharPos = (fromCaption, forward, from, to) => firstPositionIn(fromCaption.dom).bind(first => lastPositionIn(fromCaption.dom).map(last => forward ? from.isEqual(first) && to.isEqual(last) : from.isEqual(last) && to.isEqual(first))).getOr(true);\n    const emptyCaretCaption = (editor, elm) => emptyElement(editor, elm);\n    const validateCaretCaption = (rootElm, fromCaption, to) => getParentCaption(rootElm, SugarElement.fromDom(to.getNode())).fold(() => Optional.some(noop), toCaption => someIf(!eq(toCaption, fromCaption), noop));\n    const deleteCaretInsideCaption = (editor, rootElm, forward, fromCaption, from) => navigate(forward, editor.getBody(), from).fold(() => Optional.some(noop), to => isDeleteOfLastCharPos(fromCaption, forward, from, to) ? emptyCaretCaption(editor, fromCaption) : validateCaretCaption(rootElm, fromCaption, to));\n    const deleteCaretCells = (editor, forward, rootElm, startElm) => {\n      const from = CaretPosition.fromRangeStart(editor.selection.getRng());\n      return getParentCell(rootElm, startElm).bind(fromCell => isEmpty$2(fromCell) ? emptyElement(editor, fromCell) : deleteBetweenCells(editor, rootElm, forward, fromCell, from));\n    };\n    const deleteCaretCaption = (editor, forward, rootElm, fromCaption) => {\n      const from = CaretPosition.fromRangeStart(editor.selection.getRng());\n      return isEmpty$2(fromCaption) ? emptyElement(editor, fromCaption) : deleteCaretInsideCaption(editor, rootElm, forward, fromCaption, from);\n    };\n    const isNearTable = (forward, pos) => forward ? isBeforeTable(pos) : isAfterTable(pos);\n    const isBeforeOrAfterTable = (editor, forward) => {\n      const fromPos = CaretPosition.fromRangeStart(editor.selection.getRng());\n      return isNearTable(forward, fromPos) || fromPosition(forward, editor.getBody(), fromPos).exists(pos => isNearTable(forward, pos));\n    };\n    const deleteCaret$3 = (editor, forward, startElm) => {\n      const rootElm = SugarElement.fromDom(editor.getBody());\n      return getParentCaption(rootElm, startElm).fold(() => deleteCaretCells(editor, forward, rootElm, startElm).orThunk(() => someIf(isBeforeOrAfterTable(editor, forward), noop)), fromCaption => deleteCaretCaption(editor, forward, rootElm, fromCaption));\n    };\n    const backspaceDelete$9 = (editor, forward) => {\n      const startElm = SugarElement.fromDom(editor.selection.getStart(true));\n      const cells = getCellsFromEditor(editor);\n      return editor.selection.isCollapsed() && cells.length === 0 ? deleteCaret$3(editor, forward, startElm) : deleteRange$2(editor, startElm, cells);\n    };\n\n    const getContentEditableRoot$1 = (root, node) => {\n      let tempNode = node;\n      while (tempNode && tempNode !== root) {\n        if (isContentEditableTrue$3(tempNode) || isContentEditableFalse$a(tempNode)) {\n          return tempNode;\n        }\n        tempNode = tempNode.parentNode;\n      }\n      return null;\n    };\n\n    const internalAttributesPrefixes = [\n      'data-ephox-',\n      'data-mce-',\n      'data-alloy-',\n      'data-snooker-',\n      '_'\n    ];\n    const each$9 = Tools.each;\n    const ElementUtils = editor => {\n      const dom = editor.dom;\n      const internalAttributes = new Set(editor.serializer.getTempAttrs());\n      const compare = (node1, node2) => {\n        if (node1.nodeName !== node2.nodeName || node1.nodeType !== node2.nodeType) {\n          return false;\n        }\n        const getAttribs = node => {\n          const attribs = {};\n          each$9(dom.getAttribs(node), attr => {\n            const name = attr.nodeName.toLowerCase();\n            if (name !== 'style' && !isAttributeInternal(name)) {\n              attribs[name] = dom.getAttrib(node, name);\n            }\n          });\n          return attribs;\n        };\n        const compareObjects = (obj1, obj2) => {\n          for (const name in obj1) {\n            if (has$2(obj1, name)) {\n              const value = obj2[name];\n              if (isUndefined(value)) {\n                return false;\n              }\n              if (obj1[name] !== value) {\n                return false;\n              }\n              delete obj2[name];\n            }\n          }\n          for (const name in obj2) {\n            if (has$2(obj2, name)) {\n              return false;\n            }\n          }\n          return true;\n        };\n        if (isElement$6(node1) && isElement$6(node2)) {\n          if (!compareObjects(getAttribs(node1), getAttribs(node2))) {\n            return false;\n          }\n          if (!compareObjects(dom.parseStyle(dom.getAttrib(node1, 'style')), dom.parseStyle(dom.getAttrib(node2, 'style')))) {\n            return false;\n          }\n        }\n        return !isBookmarkNode$1(node1) && !isBookmarkNode$1(node2);\n      };\n      const isAttributeInternal = attributeName => exists(internalAttributesPrefixes, value => startsWith(attributeName, value)) || internalAttributes.has(attributeName);\n      return {\n        compare,\n        isAttributeInternal\n      };\n    };\n\n    const traverse = (root, fn) => {\n      let node = root;\n      while (node = node.walk()) {\n        fn(node);\n      }\n    };\n    const matchNode$1 = (nodeFilters, attributeFilters, node, matches) => {\n      const name = node.name;\n      for (let ni = 0, nl = nodeFilters.length; ni < nl; ni++) {\n        const filter = nodeFilters[ni];\n        if (filter.name === name) {\n          const match = matches.nodes[name];\n          if (match) {\n            match.nodes.push(node);\n          } else {\n            matches.nodes[name] = {\n              filter,\n              nodes: [node]\n            };\n          }\n        }\n      }\n      if (node.attributes) {\n        for (let ai = 0, al = attributeFilters.length; ai < al; ai++) {\n          const filter = attributeFilters[ai];\n          const attrName = filter.name;\n          if (attrName in node.attributes.map) {\n            const match = matches.attributes[attrName];\n            if (match) {\n              match.nodes.push(node);\n            } else {\n              matches.attributes[attrName] = {\n                filter,\n                nodes: [node]\n              };\n            }\n          }\n        }\n      }\n    };\n    const findMatchingNodes = (nodeFilters, attributeFilters, node) => {\n      const matches = {\n        nodes: {},\n        attributes: {}\n      };\n      if (node.firstChild) {\n        traverse(node, childNode => {\n          matchNode$1(nodeFilters, attributeFilters, childNode, matches);\n        });\n      }\n      return matches;\n    };\n    const runFilters = (matches, args) => {\n      const run = (matchRecord, filteringAttributes) => {\n        each$d(matchRecord, match => {\n          const nodes = from(match.nodes);\n          each$e(match.filter.callbacks, callback => {\n            for (let i = nodes.length - 1; i >= 0; i--) {\n              const node = nodes[i];\n              const valueMatches = filteringAttributes ? node.attr(match.filter.name) !== undefined : node.name === match.filter.name;\n              if (!valueMatches || isNullable(node.parent)) {\n                nodes.splice(i, 1);\n              }\n            }\n            if (nodes.length > 0) {\n              callback(nodes, match.filter.name, args);\n            }\n          });\n        });\n      };\n      run(matches.nodes, false);\n      run(matches.attributes, true);\n    };\n    const filter$2 = (nodeFilters, attributeFilters, node, args = {}) => {\n      const matches = findMatchingNodes(nodeFilters, attributeFilters, node);\n      runFilters(matches, args);\n    };\n\n    const paddEmptyNode = (settings, args, blockElements, node) => {\n      if (args.insert && blockElements[node.name]) {\n        const astNode = new AstNode('br', 1);\n        astNode.attr('data-mce-bogus', '1');\n        node.empty().append(astNode);\n      } else {\n        node.empty().append(new AstNode('#text', 3)).value = nbsp;\n      }\n    };\n    const isPaddedWithNbsp = node => {\n      var _a;\n      return hasOnlyChild(node, '#text') && ((_a = node === null || node === void 0 ? void 0 : node.firstChild) === null || _a === void 0 ? void 0 : _a.value) === nbsp;\n    };\n    const hasOnlyChild = (node, name) => {\n      const firstChild = node === null || node === void 0 ? void 0 : node.firstChild;\n      return isNonNullable(firstChild) && firstChild === node.lastChild && firstChild.name === name;\n    };\n    const isPadded = (schema, node) => {\n      const rule = schema.getElementRule(node.name);\n      return (rule === null || rule === void 0 ? void 0 : rule.paddEmpty) === true;\n    };\n    const isEmpty = (schema, nonEmptyElements, whitespaceElements, node) => node.isEmpty(nonEmptyElements, whitespaceElements, node => isPadded(schema, node));\n    const isLineBreakNode = (node, blockElements) => isNonNullable(node) && (node.name in blockElements || node.name === 'br');\n\n    const removeOrUnwrapInvalidNode = (node, schema, originalNodeParent = node.parent) => {\n      if (schema.getSpecialElements()[node.name]) {\n        node.empty().remove();\n      } else {\n        const children = node.children();\n        for (const childNode of children) {\n          if (originalNodeParent && !schema.isValidChild(originalNodeParent.name, childNode.name)) {\n            removeOrUnwrapInvalidNode(childNode, schema, originalNodeParent);\n          }\n        }\n        node.unwrap();\n      }\n    };\n    const cleanInvalidNodes = (nodes, schema, onCreate = noop) => {\n      const textBlockElements = schema.getTextBlockElements();\n      const nonEmptyElements = schema.getNonEmptyElements();\n      const whitespaceElements = schema.getWhitespaceElements();\n      const nonSplittableElements = Tools.makeMap('tr,td,th,tbody,thead,tfoot,table');\n      const fixed = new Set();\n      for (let ni = 0; ni < nodes.length; ni++) {\n        const node = nodes[ni];\n        let parent;\n        let newParent;\n        let tempNode;\n        if (!node.parent || fixed.has(node)) {\n          continue;\n        }\n        if (textBlockElements[node.name] && node.parent.name === 'li') {\n          let sibling = node.next;\n          while (sibling) {\n            if (textBlockElements[sibling.name]) {\n              sibling.name = 'li';\n              fixed.add(sibling);\n              node.parent.insert(sibling, node.parent);\n            } else {\n              break;\n            }\n            sibling = sibling.next;\n          }\n          node.unwrap();\n          continue;\n        }\n        const parents = [node];\n        for (parent = node.parent; parent && !schema.isValidChild(parent.name, node.name) && !nonSplittableElements[parent.name]; parent = parent.parent) {\n          parents.push(parent);\n        }\n        if (parent && parents.length > 1) {\n          if (schema.isValidChild(parent.name, node.name)) {\n            parents.reverse();\n            newParent = parents[0].clone();\n            onCreate(newParent);\n            let currentNode = newParent;\n            for (let i = 0; i < parents.length - 1; i++) {\n              if (schema.isValidChild(currentNode.name, parents[i].name)) {\n                tempNode = parents[i].clone();\n                onCreate(tempNode);\n                currentNode.append(tempNode);\n              } else {\n                tempNode = currentNode;\n              }\n              for (let childNode = parents[i].firstChild; childNode && childNode !== parents[i + 1];) {\n                const nextNode = childNode.next;\n                tempNode.append(childNode);\n                childNode = nextNode;\n              }\n              currentNode = tempNode;\n            }\n            if (!isEmpty(schema, nonEmptyElements, whitespaceElements, newParent)) {\n              parent.insert(newParent, parents[0], true);\n              parent.insert(node, newParent);\n            } else {\n              parent.insert(node, parents[0], true);\n            }\n            parent = parents[0];\n            if (isEmpty(schema, nonEmptyElements, whitespaceElements, parent) || hasOnlyChild(parent, 'br')) {\n              parent.empty().remove();\n            }\n          } else {\n            removeOrUnwrapInvalidNode(node, schema);\n          }\n        } else if (node.parent) {\n          if (node.name === 'li') {\n            let sibling = node.prev;\n            if (sibling && (sibling.name === 'ul' || sibling.name === 'ol')) {\n              sibling.append(node);\n              continue;\n            }\n            sibling = node.next;\n            if (sibling && (sibling.name === 'ul' || sibling.name === 'ol') && sibling.firstChild) {\n              sibling.insert(node, sibling.firstChild, true);\n              continue;\n            }\n            const wrapper = new AstNode('ul', 1);\n            onCreate(wrapper);\n            node.wrap(wrapper);\n            continue;\n          }\n          if (schema.isValidChild(node.parent.name, 'div') && schema.isValidChild('div', node.name)) {\n            const wrapper = new AstNode('div', 1);\n            onCreate(wrapper);\n            node.wrap(wrapper);\n          } else {\n            removeOrUnwrapInvalidNode(node, schema);\n          }\n        }\n      }\n    };\n\n    const createRange = (sc, so, ec, eo) => {\n      const rng = document.createRange();\n      rng.setStart(sc, so);\n      rng.setEnd(ec, eo);\n      return rng;\n    };\n    const normalizeBlockSelectionRange = rng => {\n      const startPos = CaretPosition.fromRangeStart(rng);\n      const endPos = CaretPosition.fromRangeEnd(rng);\n      const rootNode = rng.commonAncestorContainer;\n      return fromPosition(false, rootNode, endPos).map(newEndPos => {\n        if (!isInSameBlock(startPos, endPos, rootNode) && isInSameBlock(startPos, newEndPos, rootNode)) {\n          return createRange(startPos.container(), startPos.offset(), newEndPos.container(), newEndPos.offset());\n        } else {\n          return rng;\n        }\n      }).getOr(rng);\n    };\n    const normalize = rng => rng.collapsed ? rng : normalizeBlockSelectionRange(rng);\n\n    const hasOnlyOneChild$1 = node => {\n      return isNonNullable(node.firstChild) && node.firstChild === node.lastChild;\n    };\n    const isPaddingNode = node => {\n      return node.name === 'br' || node.value === nbsp;\n    };\n    const isPaddedEmptyBlock = (schema, node) => {\n      const blockElements = schema.getBlockElements();\n      return blockElements[node.name] && hasOnlyOneChild$1(node) && isPaddingNode(node.firstChild);\n    };\n    const isEmptyFragmentElement = (schema, node) => {\n      const nonEmptyElements = schema.getNonEmptyElements();\n      return isNonNullable(node) && (node.isEmpty(nonEmptyElements) || isPaddedEmptyBlock(schema, node));\n    };\n    const isListFragment = (schema, fragment) => {\n      let firstChild = fragment.firstChild;\n      let lastChild = fragment.lastChild;\n      if (firstChild && firstChild.name === 'meta') {\n        firstChild = firstChild.next;\n      }\n      if (lastChild && lastChild.attr('id') === 'mce_marker') {\n        lastChild = lastChild.prev;\n      }\n      if (isEmptyFragmentElement(schema, lastChild)) {\n        lastChild = lastChild === null || lastChild === void 0 ? void 0 : lastChild.prev;\n      }\n      if (!firstChild || firstChild !== lastChild) {\n        return false;\n      }\n      return firstChild.name === 'ul' || firstChild.name === 'ol';\n    };\n    const cleanupDomFragment = domFragment => {\n      var _a, _b;\n      const firstChild = domFragment.firstChild;\n      const lastChild = domFragment.lastChild;\n      if (firstChild && firstChild.nodeName === 'META') {\n        (_a = firstChild.parentNode) === null || _a === void 0 ? void 0 : _a.removeChild(firstChild);\n      }\n      if (lastChild && lastChild.id === 'mce_marker') {\n        (_b = lastChild.parentNode) === null || _b === void 0 ? void 0 : _b.removeChild(lastChild);\n      }\n      return domFragment;\n    };\n    const toDomFragment = (dom, serializer, fragment) => {\n      const html = serializer.serialize(fragment);\n      const domFragment = dom.createFragment(html);\n      return cleanupDomFragment(domFragment);\n    };\n    const listItems = elm => {\n      var _a;\n      return filter$5((_a = elm === null || elm === void 0 ? void 0 : elm.childNodes) !== null && _a !== void 0 ? _a : [], child => {\n        return child.nodeName === 'LI';\n      });\n    };\n    const isPadding = node => {\n      return node.data === nbsp || isBr$6(node);\n    };\n    const isListItemPadded = node => {\n      return isNonNullable(node === null || node === void 0 ? void 0 : node.firstChild) && node.firstChild === node.lastChild && isPadding(node.firstChild);\n    };\n    const isEmptyOrPadded = elm => {\n      return !elm.firstChild || isListItemPadded(elm);\n    };\n    const trimListItems = elms => {\n      return elms.length > 0 && isEmptyOrPadded(elms[elms.length - 1]) ? elms.slice(0, -1) : elms;\n    };\n    const getParentLi = (dom, node) => {\n      const parentBlock = dom.getParent(node, dom.isBlock);\n      return parentBlock && parentBlock.nodeName === 'LI' ? parentBlock : null;\n    };\n    const isParentBlockLi = (dom, node) => {\n      return !!getParentLi(dom, node);\n    };\n    const getSplit = (parentNode, rng) => {\n      const beforeRng = rng.cloneRange();\n      const afterRng = rng.cloneRange();\n      beforeRng.setStartBefore(parentNode);\n      afterRng.setEndAfter(parentNode);\n      return [\n        beforeRng.cloneContents(),\n        afterRng.cloneContents()\n      ];\n    };\n    const findFirstIn = (node, rootNode) => {\n      const caretPos = CaretPosition.before(node);\n      const caretWalker = CaretWalker(rootNode);\n      const newCaretPos = caretWalker.next(caretPos);\n      return newCaretPos ? newCaretPos.toRange() : null;\n    };\n    const findLastOf = (node, rootNode) => {\n      const caretPos = CaretPosition.after(node);\n      const caretWalker = CaretWalker(rootNode);\n      const newCaretPos = caretWalker.prev(caretPos);\n      return newCaretPos ? newCaretPos.toRange() : null;\n    };\n    const insertMiddle = (target, elms, rootNode, rng) => {\n      const parts = getSplit(target, rng);\n      const parentElm = target.parentNode;\n      if (parentElm) {\n        parentElm.insertBefore(parts[0], target);\n        Tools.each(elms, li => {\n          parentElm.insertBefore(li, target);\n        });\n        parentElm.insertBefore(parts[1], target);\n        parentElm.removeChild(target);\n      }\n      return findLastOf(elms[elms.length - 1], rootNode);\n    };\n    const insertBefore$1 = (target, elms, rootNode) => {\n      const parentElm = target.parentNode;\n      if (parentElm) {\n        Tools.each(elms, elm => {\n          parentElm.insertBefore(elm, target);\n        });\n      }\n      return findFirstIn(target, rootNode);\n    };\n    const insertAfter$1 = (target, elms, rootNode, dom) => {\n      dom.insertAfter(elms.reverse(), target);\n      return findLastOf(elms[0], rootNode);\n    };\n    const insertAtCaret$1 = (serializer, dom, rng, fragment) => {\n      const domFragment = toDomFragment(dom, serializer, fragment);\n      const liTarget = getParentLi(dom, rng.startContainer);\n      const liElms = trimListItems(listItems(domFragment.firstChild));\n      const BEGINNING = 1, END = 2;\n      const rootNode = dom.getRoot();\n      const isAt = location => {\n        const caretPos = CaretPosition.fromRangeStart(rng);\n        const caretWalker = CaretWalker(dom.getRoot());\n        const newPos = location === BEGINNING ? caretWalker.prev(caretPos) : caretWalker.next(caretPos);\n        const newPosNode = newPos === null || newPos === void 0 ? void 0 : newPos.getNode();\n        return newPosNode ? getParentLi(dom, newPosNode) !== liTarget : true;\n      };\n      if (!liTarget) {\n        return null;\n      } else if (isAt(BEGINNING)) {\n        return insertBefore$1(liTarget, liElms, rootNode);\n      } else if (isAt(END)) {\n        return insertAfter$1(liTarget, liElms, rootNode, dom);\n      } else {\n        return insertMiddle(liTarget, liElms, rootNode, rng);\n      }\n    };\n\n    const mergeableWrappedElements = ['pre'];\n    const shouldPasteContentOnly = (dom, fragment, parentNode, root) => {\n      var _a;\n      const firstNode = fragment.firstChild;\n      const lastNode = fragment.lastChild;\n      const last = lastNode.attr('data-mce-type') === 'bookmark' ? lastNode.prev : lastNode;\n      const isPastingSingleElement = firstNode === last;\n      const isWrappedElement = contains$2(mergeableWrappedElements, firstNode.name);\n      if (isPastingSingleElement && isWrappedElement) {\n        const isContentEditable = firstNode.attr('contenteditable') !== 'false';\n        const isPastingInTheSameBlockTag = ((_a = dom.getParent(parentNode, dom.isBlock)) === null || _a === void 0 ? void 0 : _a.nodeName.toLowerCase()) === firstNode.name;\n        const isPastingInContentEditable = Optional.from(getContentEditableRoot$1(root, parentNode)).forall(isContentEditableTrue$3);\n        return isContentEditable && isPastingInTheSameBlockTag && isPastingInContentEditable;\n      } else {\n        return false;\n      }\n    };\n    const isTableCell = isTableCell$3;\n    const isTableCellContentSelected = (dom, rng, cell) => {\n      if (isNonNullable(cell)) {\n        const endCell = dom.getParent(rng.endContainer, isTableCell);\n        return cell === endCell && hasAllContentsSelected(SugarElement.fromDom(cell), rng);\n      } else {\n        return false;\n      }\n    };\n    const validInsertion = (editor, value, parentNode) => {\n      var _a;\n      if (parentNode.getAttribute('data-mce-bogus') === 'all') {\n        (_a = parentNode.parentNode) === null || _a === void 0 ? void 0 : _a.insertBefore(editor.dom.createFragment(value), parentNode);\n      } else {\n        const node = parentNode.firstChild;\n        const node2 = parentNode.lastChild;\n        if (!node || node === node2 && node.nodeName === 'BR') {\n          editor.dom.setHTML(parentNode, value);\n        } else {\n          editor.selection.setContent(value, { no_events: true });\n        }\n      }\n    };\n    const trimBrsFromTableCell = (dom, elm) => {\n      Optional.from(dom.getParent(elm, 'td,th')).map(SugarElement.fromDom).each(trimBlockTrailingBr);\n    };\n    const reduceInlineTextElements = (editor, merge) => {\n      const textInlineElements = editor.schema.getTextInlineElements();\n      const dom = editor.dom;\n      if (merge) {\n        const root = editor.getBody();\n        const elementUtils = ElementUtils(editor);\n        Tools.each(dom.select('*[data-mce-fragment]'), node => {\n          const isInline = isNonNullable(textInlineElements[node.nodeName.toLowerCase()]);\n          if (isInline && hasInheritableStyles(dom, node)) {\n            for (let parentNode = node.parentElement; isNonNullable(parentNode) && parentNode !== root; parentNode = parentNode.parentElement) {\n              const styleConflict = hasStyleConflict(dom, node, parentNode);\n              if (styleConflict) {\n                break;\n              }\n              if (elementUtils.compare(parentNode, node)) {\n                dom.remove(node, true);\n                break;\n              }\n            }\n          }\n        });\n      }\n    };\n    const markFragmentElements = fragment => {\n      let node = fragment;\n      while (node = node.walk()) {\n        if (node.type === 1) {\n          node.attr('data-mce-fragment', '1');\n        }\n      }\n    };\n    const unmarkFragmentElements = elm => {\n      Tools.each(elm.getElementsByTagName('*'), elm => {\n        elm.removeAttribute('data-mce-fragment');\n      });\n    };\n    const isPartOfFragment = node => {\n      return !!node.getAttribute('data-mce-fragment');\n    };\n    const canHaveChildren = (editor, node) => {\n      return isNonNullable(node) && !editor.schema.getVoidElements()[node.nodeName];\n    };\n    const moveSelectionToMarker = (editor, marker) => {\n      var _a, _b, _c;\n      let nextRng;\n      const dom = editor.dom;\n      const selection = editor.selection;\n      if (!marker) {\n        return;\n      }\n      selection.scrollIntoView(marker);\n      const parentEditableElm = getContentEditableRoot$1(editor.getBody(), marker);\n      if (parentEditableElm && dom.getContentEditable(parentEditableElm) === 'false') {\n        dom.remove(marker);\n        selection.select(parentEditableElm);\n        return;\n      }\n      let rng = dom.createRng();\n      const node = marker.previousSibling;\n      if (isText$a(node)) {\n        rng.setStart(node, (_b = (_a = node.nodeValue) === null || _a === void 0 ? void 0 : _a.length) !== null && _b !== void 0 ? _b : 0);\n        const node2 = marker.nextSibling;\n        if (isText$a(node2)) {\n          node.appendData(node2.data);\n          (_c = node2.parentNode) === null || _c === void 0 ? void 0 : _c.removeChild(node2);\n        }\n      } else {\n        rng.setStartBefore(marker);\n        rng.setEndBefore(marker);\n      }\n      const findNextCaretRng = rng => {\n        let caretPos = CaretPosition.fromRangeStart(rng);\n        const caretWalker = CaretWalker(editor.getBody());\n        caretPos = caretWalker.next(caretPos);\n        return caretPos === null || caretPos === void 0 ? void 0 : caretPos.toRange();\n      };\n      const parentBlock = dom.getParent(marker, dom.isBlock);\n      dom.remove(marker);\n      if (parentBlock && dom.isEmpty(parentBlock)) {\n        empty(SugarElement.fromDom(parentBlock));\n        rng.setStart(parentBlock, 0);\n        rng.setEnd(parentBlock, 0);\n        if (!isTableCell(parentBlock) && !isPartOfFragment(parentBlock) && (nextRng = findNextCaretRng(rng))) {\n          rng = nextRng;\n          dom.remove(parentBlock);\n        } else {\n          dom.add(parentBlock, dom.create('br', { 'data-mce-bogus': '1' }));\n        }\n      }\n      selection.setRng(rng);\n    };\n    const deleteSelectedContent = editor => {\n      const dom = editor.dom;\n      const rng = normalize(editor.selection.getRng());\n      editor.selection.setRng(rng);\n      const startCell = dom.getParent(rng.startContainer, isTableCell);\n      if (isTableCellContentSelected(dom, rng, startCell)) {\n        deleteCellContents(editor, rng, SugarElement.fromDom(startCell));\n      } else {\n        editor.getDoc().execCommand('Delete', false);\n      }\n    };\n    const insertHtmlAtCaret = (editor, value, details) => {\n      var _a, _b, _c;\n      const selection = editor.selection;\n      const dom = editor.dom;\n      const parser = editor.parser;\n      const merge = details.merge;\n      const serializer = HtmlSerializer({ validate: true }, editor.schema);\n      const bookmarkHtml = '<span id=\"mce_marker\" data-mce-type=\"bookmark\">&#xFEFF;</span>';\n      if (value.indexOf('{$caret}') === -1) {\n        value += '{$caret}';\n      }\n      value = value.replace(/\\{\\$caret\\}/, bookmarkHtml);\n      let rng = selection.getRng();\n      const caretElement = rng.startContainer;\n      const body = editor.getBody();\n      if (caretElement === body && selection.isCollapsed()) {\n        if (dom.isBlock(body.firstChild) && canHaveChildren(editor, body.firstChild) && dom.isEmpty(body.firstChild)) {\n          rng = dom.createRng();\n          rng.setStart(body.firstChild, 0);\n          rng.setEnd(body.firstChild, 0);\n          selection.setRng(rng);\n        }\n      }\n      if (!selection.isCollapsed()) {\n        deleteSelectedContent(editor);\n      }\n      const parentNode = selection.getNode();\n      const parserArgs = {\n        context: parentNode.nodeName.toLowerCase(),\n        data: details.data,\n        insert: true\n      };\n      const fragment = parser.parse(value, parserArgs);\n      if (details.paste === true && isListFragment(editor.schema, fragment) && isParentBlockLi(dom, parentNode)) {\n        rng = insertAtCaret$1(serializer, dom, selection.getRng(), fragment);\n        if (rng) {\n          selection.setRng(rng);\n        }\n        return value;\n      }\n      if (details.paste === true && shouldPasteContentOnly(dom, fragment, parentNode, editor.getBody())) {\n        (_a = fragment.firstChild) === null || _a === void 0 ? void 0 : _a.unwrap();\n      }\n      markFragmentElements(fragment);\n      let node = fragment.lastChild;\n      if (node && node.attr('id') === 'mce_marker') {\n        const marker = node;\n        for (node = node.prev; node; node = node.walk(true)) {\n          if (node.type === 3 || !dom.isBlock(node.name)) {\n            if (node.parent && editor.schema.isValidChild(node.parent.name, 'span')) {\n              node.parent.insert(marker, node, node.name === 'br');\n            }\n            break;\n          }\n        }\n      }\n      editor._selectionOverrides.showBlockCaretContainer(parentNode);\n      if (!parserArgs.invalid) {\n        value = serializer.serialize(fragment);\n        validInsertion(editor, value, parentNode);\n      } else {\n        editor.selection.setContent(bookmarkHtml);\n        let parentNode = selection.getNode();\n        let tempNode;\n        const rootNode = editor.getBody();\n        if (isDocument$1(parentNode)) {\n          parentNode = tempNode = rootNode;\n        } else {\n          tempNode = parentNode;\n        }\n        while (tempNode && tempNode !== rootNode) {\n          parentNode = tempNode;\n          tempNode = tempNode.parentNode;\n        }\n        value = parentNode === rootNode ? rootNode.innerHTML : dom.getOuterHTML(parentNode);\n        const root = parser.parse(value);\n        for (let markerNode = root; markerNode; markerNode = markerNode.walk()) {\n          if (markerNode.attr('id') === 'mce_marker') {\n            markerNode.replace(fragment);\n            break;\n          }\n        }\n        const toExtract = fragment.children();\n        const parent = (_c = (_b = fragment.parent) === null || _b === void 0 ? void 0 : _b.name) !== null && _c !== void 0 ? _c : root.name;\n        fragment.unwrap();\n        const invalidChildren = filter$5(toExtract, node => !editor.schema.isValidChild(parent, node.name));\n        cleanInvalidNodes(invalidChildren, editor.schema);\n        filter$2(parser.getNodeFilters(), parser.getAttributeFilters(), root);\n        value = serializer.serialize(root);\n        if (parentNode === rootNode) {\n          dom.setHTML(rootNode, value);\n        } else {\n          dom.setOuterHTML(parentNode, value);\n        }\n      }\n      reduceInlineTextElements(editor, merge);\n      moveSelectionToMarker(editor, dom.get('mce_marker'));\n      unmarkFragmentElements(editor.getBody());\n      trimBrsFromTableCell(dom, selection.getStart());\n      return value;\n    };\n\n    const isTreeNode = content => content instanceof AstNode;\n\n    const moveSelection = editor => {\n      if (hasFocus(editor)) {\n        firstPositionIn(editor.getBody()).each(pos => {\n          const node = pos.getNode();\n          const caretPos = isTable$2(node) ? firstPositionIn(node).getOr(pos) : pos;\n          editor.selection.setRng(caretPos.toRange());\n        });\n      }\n    };\n    const setEditorHtml = (editor, html, noSelection) => {\n      editor.dom.setHTML(editor.getBody(), html);\n      if (noSelection !== true) {\n        moveSelection(editor);\n      }\n    };\n    const setContentString = (editor, body, content, args) => {\n      if (content.length === 0 || /^\\s+$/.test(content)) {\n        const padd = '<br data-mce-bogus=\"1\">';\n        if (body.nodeName === 'TABLE') {\n          content = '<tr><td>' + padd + '</td></tr>';\n        } else if (/^(UL|OL)$/.test(body.nodeName)) {\n          content = '<li>' + padd + '</li>';\n        }\n        const forcedRootBlockName = getForcedRootBlock(editor);\n        if (editor.schema.isValidChild(body.nodeName.toLowerCase(), forcedRootBlockName.toLowerCase())) {\n          content = padd;\n          content = editor.dom.createHTML(forcedRootBlockName, getForcedRootBlockAttrs(editor), content);\n        } else if (!content) {\n          content = padd;\n        }\n        setEditorHtml(editor, content, args.no_selection);\n        return {\n          content,\n          html: content\n        };\n      } else {\n        if (args.format !== 'raw') {\n          content = HtmlSerializer({ validate: false }, editor.schema).serialize(editor.parser.parse(content, {\n            isRootContent: true,\n            insert: true\n          }));\n        }\n        const trimmedHtml = isWsPreserveElement(SugarElement.fromDom(body)) ? content : Tools.trim(content);\n        setEditorHtml(editor, trimmedHtml, args.no_selection);\n        return {\n          content: trimmedHtml,\n          html: trimmedHtml\n        };\n      }\n    };\n    const setContentTree = (editor, body, content, args) => {\n      filter$2(editor.parser.getNodeFilters(), editor.parser.getAttributeFilters(), content);\n      const html = HtmlSerializer({ validate: false }, editor.schema).serialize(content);\n      const trimmedHtml = isWsPreserveElement(SugarElement.fromDom(body)) ? html : Tools.trim(html);\n      setEditorHtml(editor, trimmedHtml, args.no_selection);\n      return {\n        content,\n        html: trimmedHtml\n      };\n    };\n    const setContentInternal = (editor, content, args) => {\n      return Optional.from(editor.getBody()).map(body => {\n        if (isTreeNode(content)) {\n          return setContentTree(editor, body, content, args);\n        } else {\n          return setContentString(editor, body, content, args);\n        }\n      }).getOr({\n        content,\n        html: isTreeNode(args.content) ? '' : args.content\n      });\n    };\n\n    const sibling = (scope, predicate) => sibling$1(scope, predicate).isSome();\n\n    const ensureIsRoot = isRoot => isFunction(isRoot) ? isRoot : never;\n    const ancestor = (scope, transform, isRoot) => {\n      let element = scope.dom;\n      const stop = ensureIsRoot(isRoot);\n      while (element.parentNode) {\n        element = element.parentNode;\n        const el = SugarElement.fromDom(element);\n        const transformed = transform(el);\n        if (transformed.isSome()) {\n          return transformed;\n        } else if (stop(el)) {\n          break;\n        }\n      }\n      return Optional.none();\n    };\n    const closest$2 = (scope, transform, isRoot) => {\n      const current = transform(scope);\n      const stop = ensureIsRoot(isRoot);\n      return current.orThunk(() => stop(scope) ? Optional.none() : ancestor(scope, transform, stop));\n    };\n\n    const isEq$3 = isEq$5;\n    const matchesUnInheritedFormatSelector = (ed, node, name) => {\n      const formatList = ed.formatter.get(name);\n      if (formatList) {\n        for (let i = 0; i < formatList.length; i++) {\n          const format = formatList[i];\n          if (isSelectorFormat(format) && format.inherit === false && ed.dom.is(node, format.selector)) {\n            return true;\n          }\n        }\n      }\n      return false;\n    };\n    const matchParents = (editor, node, name, vars, similar) => {\n      const root = editor.dom.getRoot();\n      if (node === root) {\n        return false;\n      }\n      const matchedNode = editor.dom.getParent(node, elm => {\n        if (matchesUnInheritedFormatSelector(editor, elm, name)) {\n          return true;\n        }\n        return elm.parentNode === root || !!matchNode(editor, elm, name, vars, true);\n      });\n      return !!matchNode(editor, matchedNode, name, vars, similar);\n    };\n    const matchName = (dom, node, format) => {\n      if (isInlineFormat(format) && isEq$3(node, format.inline)) {\n        return true;\n      }\n      if (isBlockFormat(format) && isEq$3(node, format.block)) {\n        return true;\n      }\n      if (isSelectorFormat(format)) {\n        return isElement$6(node) && dom.is(node, format.selector);\n      }\n      return false;\n    };\n    const matchItems = (dom, node, format, itemName, similar, vars) => {\n      const items = format[itemName];\n      const matchAttributes = itemName === 'attributes';\n      if (isFunction(format.onmatch)) {\n        return format.onmatch(node, format, itemName);\n      }\n      if (items) {\n        if (!isArrayLike(items)) {\n          for (const key in items) {\n            if (has$2(items, key)) {\n              const value = matchAttributes ? dom.getAttrib(node, key) : getStyle(dom, node, key);\n              const expectedValue = replaceVars(items[key], vars);\n              const isEmptyValue = isNullable(value) || isEmpty$3(value);\n              if (isEmptyValue && isNullable(expectedValue)) {\n                continue;\n              }\n              if (similar && isEmptyValue && !format.exact) {\n                return false;\n              }\n              if ((!similar || format.exact) && !isEq$3(value, normalizeStyleValue(expectedValue, key))) {\n                return false;\n              }\n            }\n          }\n        } else {\n          for (let i = 0; i < items.length; i++) {\n            if (matchAttributes ? dom.getAttrib(node, items[i]) : getStyle(dom, node, items[i])) {\n              return true;\n            }\n          }\n        }\n      }\n      return true;\n    };\n    const matchNode = (ed, node, name, vars, similar) => {\n      const formatList = ed.formatter.get(name);\n      const dom = ed.dom;\n      if (formatList && isElement$6(node)) {\n        for (let i = 0; i < formatList.length; i++) {\n          const format = formatList[i];\n          if (matchName(ed.dom, node, format) && matchItems(dom, node, format, 'attributes', similar, vars) && matchItems(dom, node, format, 'styles', similar, vars)) {\n            const classes = format.classes;\n            if (classes) {\n              for (let x = 0; x < classes.length; x++) {\n                if (!ed.dom.hasClass(node, replaceVars(classes[x], vars))) {\n                  return;\n                }\n              }\n            }\n            return format;\n          }\n        }\n      }\n      return undefined;\n    };\n    const match$2 = (editor, name, vars, node, similar) => {\n      if (node) {\n        return matchParents(editor, node, name, vars, similar);\n      }\n      node = editor.selection.getNode();\n      if (matchParents(editor, node, name, vars, similar)) {\n        return true;\n      }\n      const startNode = editor.selection.getStart();\n      if (startNode !== node) {\n        if (matchParents(editor, startNode, name, vars, similar)) {\n          return true;\n        }\n      }\n      return false;\n    };\n    const matchAll = (editor, names, vars) => {\n      const matchedFormatNames = [];\n      const checkedMap = {};\n      const startElement = editor.selection.getStart();\n      editor.dom.getParent(startElement, node => {\n        for (let i = 0; i < names.length; i++) {\n          const name = names[i];\n          if (!checkedMap[name] && matchNode(editor, node, name, vars)) {\n            checkedMap[name] = true;\n            matchedFormatNames.push(name);\n          }\n        }\n      }, editor.dom.getRoot());\n      return matchedFormatNames;\n    };\n    const closest$1 = (editor, names) => {\n      const isRoot = elm => eq(elm, SugarElement.fromDom(editor.getBody()));\n      const match = (elm, name) => matchNode(editor, elm.dom, name) ? Optional.some(name) : Optional.none();\n      return Optional.from(editor.selection.getStart(true)).bind(rawElm => closest$2(SugarElement.fromDom(rawElm), elm => findMap(names, name => match(elm, name)), isRoot)).getOrNull();\n    };\n    const canApply = (editor, name) => {\n      const formatList = editor.formatter.get(name);\n      const dom = editor.dom;\n      if (formatList) {\n        const startNode = editor.selection.getStart();\n        const parents = getParents$2(dom, startNode);\n        for (let x = formatList.length - 1; x >= 0; x--) {\n          const format = formatList[x];\n          if (!isSelectorFormat(format)) {\n            return true;\n          }\n          for (let i = parents.length - 1; i >= 0; i--) {\n            if (dom.is(parents[i], format.selector)) {\n              return true;\n            }\n          }\n        }\n      }\n      return false;\n    };\n    const matchAllOnNode = (editor, node, formatNames) => foldl(formatNames, (acc, name) => {\n      const matchSimilar = isVariableFormatName(editor, name);\n      if (editor.formatter.matchNode(node, name, {}, matchSimilar)) {\n        return acc.concat([name]);\n      } else {\n        return acc;\n      }\n    }, []);\n\n    const ZWSP = ZWSP$1;\n    const importNode = (ownerDocument, node) => {\n      return ownerDocument.importNode(node, true);\n    };\n    const getEmptyCaretContainers = node => {\n      const nodes = [];\n      let tempNode = node;\n      while (tempNode) {\n        if (isText$a(tempNode) && tempNode.data !== ZWSP || tempNode.childNodes.length > 1) {\n          return [];\n        }\n        if (isElement$6(tempNode)) {\n          nodes.push(tempNode);\n        }\n        tempNode = tempNode.firstChild;\n      }\n      return nodes;\n    };\n    const isCaretContainerEmpty = node => {\n      return getEmptyCaretContainers(node).length > 0;\n    };\n    const findFirstTextNode = node => {\n      if (node) {\n        const walker = new DomTreeWalker(node, node);\n        for (let tempNode = walker.current(); tempNode; tempNode = walker.next()) {\n          if (isText$a(tempNode)) {\n            return tempNode;\n          }\n        }\n      }\n      return null;\n    };\n    const createCaretContainer = fill => {\n      const caretContainer = SugarElement.fromTag('span');\n      setAll$1(caretContainer, {\n        'id': CARET_ID,\n        'data-mce-bogus': '1',\n        'data-mce-type': 'format-caret'\n      });\n      if (fill) {\n        append$1(caretContainer, SugarElement.fromText(ZWSP));\n      }\n      return caretContainer;\n    };\n    const trimZwspFromCaretContainer = caretContainerNode => {\n      const textNode = findFirstTextNode(caretContainerNode);\n      if (textNode && textNode.data.charAt(0) === ZWSP) {\n        textNode.deleteData(0, 1);\n      }\n      return textNode;\n    };\n    const removeCaretContainerNode = (editor, node, moveCaret = true) => {\n      const dom = editor.dom, selection = editor.selection;\n      if (isCaretContainerEmpty(node)) {\n        deleteElement$2(editor, false, SugarElement.fromDom(node), moveCaret);\n      } else {\n        const rng = selection.getRng();\n        const block = dom.getParent(node, dom.isBlock);\n        const startContainer = rng.startContainer;\n        const startOffset = rng.startOffset;\n        const endContainer = rng.endContainer;\n        const endOffset = rng.endOffset;\n        const textNode = trimZwspFromCaretContainer(node);\n        dom.remove(node, true);\n        if (startContainer === textNode && startOffset > 0) {\n          rng.setStart(textNode, startOffset - 1);\n        }\n        if (endContainer === textNode && endOffset > 0) {\n          rng.setEnd(textNode, endOffset - 1);\n        }\n        if (block && dom.isEmpty(block)) {\n          fillWithPaddingBr(SugarElement.fromDom(block));\n        }\n        selection.setRng(rng);\n      }\n    };\n    const removeCaretContainer = (editor, node, moveCaret = true) => {\n      const dom = editor.dom, selection = editor.selection;\n      if (!node) {\n        node = getParentCaretContainer(editor.getBody(), selection.getStart());\n        if (!node) {\n          while (node = dom.get(CARET_ID)) {\n            removeCaretContainerNode(editor, node, false);\n          }\n        }\n      } else {\n        removeCaretContainerNode(editor, node, moveCaret);\n      }\n    };\n    const insertCaretContainerNode = (editor, caretContainer, formatNode) => {\n      var _a, _b;\n      const dom = editor.dom;\n      const block = dom.getParent(formatNode, curry(isTextBlock$1, editor));\n      if (block && dom.isEmpty(block)) {\n        (_a = formatNode.parentNode) === null || _a === void 0 ? void 0 : _a.replaceChild(caretContainer, formatNode);\n      } else {\n        removeTrailingBr(SugarElement.fromDom(formatNode));\n        if (dom.isEmpty(formatNode)) {\n          (_b = formatNode.parentNode) === null || _b === void 0 ? void 0 : _b.replaceChild(caretContainer, formatNode);\n        } else {\n          dom.insertAfter(caretContainer, formatNode);\n        }\n      }\n    };\n    const appendNode = (parentNode, node) => {\n      parentNode.appendChild(node);\n      return node;\n    };\n    const insertFormatNodesIntoCaretContainer = (formatNodes, caretContainer) => {\n      var _a;\n      const innerMostFormatNode = foldr(formatNodes, (parentNode, formatNode) => {\n        return appendNode(parentNode, formatNode.cloneNode(false));\n      }, caretContainer);\n      const doc = (_a = innerMostFormatNode.ownerDocument) !== null && _a !== void 0 ? _a : document;\n      return appendNode(innerMostFormatNode, doc.createTextNode(ZWSP));\n    };\n    const cleanFormatNode = (editor, caretContainer, formatNode, name, vars, similar) => {\n      const formatter = editor.formatter;\n      const dom = editor.dom;\n      const validFormats = filter$5(keys(formatter.get()), formatName => formatName !== name && !contains$1(formatName, 'removeformat'));\n      const matchedFormats = matchAllOnNode(editor, formatNode, validFormats);\n      const uniqueFormats = filter$5(matchedFormats, fmtName => !areSimilarFormats(editor, fmtName, name));\n      if (uniqueFormats.length > 0) {\n        const clonedFormatNode = formatNode.cloneNode(false);\n        dom.add(caretContainer, clonedFormatNode);\n        formatter.remove(name, vars, clonedFormatNode, similar);\n        dom.remove(clonedFormatNode);\n        return Optional.some(clonedFormatNode);\n      } else {\n        return Optional.none();\n      }\n    };\n    const applyCaretFormat = (editor, name, vars) => {\n      let caretContainer;\n      const selection = editor.selection;\n      const formatList = editor.formatter.get(name);\n      if (!formatList) {\n        return;\n      }\n      const selectionRng = selection.getRng();\n      let offset = selectionRng.startOffset;\n      const container = selectionRng.startContainer;\n      const text = container.nodeValue;\n      caretContainer = getParentCaretContainer(editor.getBody(), selection.getStart());\n      const wordcharRegex = /[^\\s\\u00a0\\u00ad\\u200b\\ufeff]/;\n      if (text && offset > 0 && offset < text.length && wordcharRegex.test(text.charAt(offset)) && wordcharRegex.test(text.charAt(offset - 1))) {\n        const bookmark = selection.getBookmark();\n        selectionRng.collapse(true);\n        let rng = expandRng(editor, selectionRng, formatList);\n        rng = split(rng);\n        editor.formatter.apply(name, vars, rng);\n        selection.moveToBookmark(bookmark);\n      } else {\n        let textNode = caretContainer ? findFirstTextNode(caretContainer) : null;\n        if (!caretContainer || (textNode === null || textNode === void 0 ? void 0 : textNode.data) !== ZWSP) {\n          caretContainer = importNode(editor.getDoc(), createCaretContainer(true).dom);\n          textNode = caretContainer.firstChild;\n          selectionRng.insertNode(caretContainer);\n          offset = 1;\n          editor.formatter.apply(name, vars, caretContainer);\n        } else {\n          editor.formatter.apply(name, vars, caretContainer);\n        }\n        selection.setCursorLocation(textNode, offset);\n      }\n    };\n    const removeCaretFormat = (editor, name, vars, similar) => {\n      const dom = editor.dom;\n      const selection = editor.selection;\n      let hasContentAfter = false;\n      const formatList = editor.formatter.get(name);\n      if (!formatList) {\n        return;\n      }\n      const rng = selection.getRng();\n      const container = rng.startContainer;\n      const offset = rng.startOffset;\n      let node = container;\n      if (isText$a(container)) {\n        if (offset !== container.data.length) {\n          hasContentAfter = true;\n        }\n        node = node.parentNode;\n      }\n      const parents = [];\n      let formatNode;\n      while (node) {\n        if (matchNode(editor, node, name, vars, similar)) {\n          formatNode = node;\n          break;\n        }\n        if (node.nextSibling) {\n          hasContentAfter = true;\n        }\n        parents.push(node);\n        node = node.parentNode;\n      }\n      if (!formatNode) {\n        return;\n      }\n      if (hasContentAfter) {\n        const bookmark = selection.getBookmark();\n        rng.collapse(true);\n        let expandedRng = expandRng(editor, rng, formatList, true);\n        expandedRng = split(expandedRng);\n        editor.formatter.remove(name, vars, expandedRng, similar);\n        selection.moveToBookmark(bookmark);\n      } else {\n        const caretContainer = getParentCaretContainer(editor.getBody(), formatNode);\n        const newCaretContainer = createCaretContainer(false).dom;\n        insertCaretContainerNode(editor, newCaretContainer, caretContainer !== null && caretContainer !== void 0 ? caretContainer : formatNode);\n        const cleanedFormatNode = cleanFormatNode(editor, newCaretContainer, formatNode, name, vars, similar);\n        const caretTextNode = insertFormatNodesIntoCaretContainer(parents.concat(cleanedFormatNode.toArray()), newCaretContainer);\n        if (caretContainer) {\n          removeCaretContainerNode(editor, caretContainer, false);\n        }\n        selection.setCursorLocation(caretTextNode, 1);\n        if (dom.isEmpty(formatNode)) {\n          dom.remove(formatNode);\n        }\n      }\n    };\n    const disableCaretContainer = (editor, keyCode) => {\n      const selection = editor.selection, body = editor.getBody();\n      removeCaretContainer(editor, null, false);\n      if ((keyCode === 8 || keyCode === 46) && selection.isCollapsed() && selection.getStart().innerHTML === ZWSP) {\n        removeCaretContainer(editor, getParentCaretContainer(body, selection.getStart()));\n      }\n      if (keyCode === 37 || keyCode === 39) {\n        removeCaretContainer(editor, getParentCaretContainer(body, selection.getStart()));\n      }\n    };\n    const setup$u = editor => {\n      editor.on('mouseup keydown', e => {\n        disableCaretContainer(editor, e.keyCode);\n      });\n    };\n    const replaceWithCaretFormat = (targetNode, formatNodes) => {\n      const caretContainer = createCaretContainer(false);\n      const innerMost = insertFormatNodesIntoCaretContainer(formatNodes, caretContainer.dom);\n      before$3(SugarElement.fromDom(targetNode), caretContainer);\n      remove$6(SugarElement.fromDom(targetNode));\n      return CaretPosition(innerMost, 0);\n    };\n    const isFormatElement = (editor, element) => {\n      const inlineElements = editor.schema.getTextInlineElements();\n      return has$2(inlineElements, name(element)) && !isCaretNode(element.dom) && !isBogus$2(element.dom);\n    };\n    const isEmptyCaretFormatElement = element => {\n      return isCaretNode(element.dom) && isCaretContainerEmpty(element.dom);\n    };\n\n    const postProcessHooks = {};\n    const isPre = matchNodeNames(['pre']);\n    const addPostProcessHook = (name, hook) => {\n      const hooks = postProcessHooks[name];\n      if (!hooks) {\n        postProcessHooks[name] = [];\n      }\n      postProcessHooks[name].push(hook);\n    };\n    const postProcess$1 = (name, editor) => {\n      if (has$2(postProcessHooks, name)) {\n        each$e(postProcessHooks[name], hook => {\n          hook(editor);\n        });\n      }\n    };\n    addPostProcessHook('pre', editor => {\n      const rng = editor.selection.getRng();\n      const hasPreSibling = blocks => pre => {\n        const prev = pre.previousSibling;\n        return isPre(prev) && contains$2(blocks, prev);\n      };\n      const joinPre = (pre1, pre2) => {\n        const sPre2 = SugarElement.fromDom(pre2);\n        const doc = documentOrOwner(sPre2).dom;\n        remove$6(sPre2);\n        append(SugarElement.fromDom(pre1), [\n          SugarElement.fromTag('br', doc),\n          SugarElement.fromTag('br', doc),\n          ...children(sPre2)\n        ]);\n      };\n      if (!rng.collapsed) {\n        const blocks = editor.selection.getSelectedBlocks();\n        const preBlocks = filter$5(filter$5(blocks, isPre), hasPreSibling(blocks));\n        each$e(preBlocks, pre => {\n          joinPre(pre.previousSibling, pre);\n        });\n      }\n    });\n\n    const listItemStyles = [\n      'fontWeight',\n      'fontStyle',\n      'color',\n      'fontSize',\n      'fontFamily'\n    ];\n    const hasListStyles = fmt => isObject(fmt.styles) && exists(keys(fmt.styles), name => contains$2(listItemStyles, name));\n    const findExpandedListItemFormat = formats => find$2(formats, fmt => isInlineFormat(fmt) && fmt.inline === 'span' && hasListStyles(fmt));\n    const getExpandedListItemFormat = (formatter, format) => {\n      const formatList = formatter.get(format);\n      return isArray$1(formatList) ? findExpandedListItemFormat(formatList) : Optional.none();\n    };\n    const isRngStartAtStartOfElement = (rng, elm) => prevPosition(elm, CaretPosition.fromRangeStart(rng)).isNone();\n    const isRngEndAtEndOfElement = (rng, elm) => {\n      return nextPosition(elm, CaretPosition.fromRangeEnd(rng)).exists(pos => !isBr$6(pos.getNode()) || nextPosition(elm, pos).isSome()) === false;\n    };\n    const isEditableListItem = dom => elm => isListItem$2(elm) && dom.getContentEditableParent(elm) !== 'false';\n    const getFullySelectedBlocks = selection => {\n      const blocks = selection.getSelectedBlocks();\n      const rng = selection.getRng();\n      if (selection.isCollapsed()) {\n        return [];\n      }\n      if (blocks.length === 1) {\n        return isRngStartAtStartOfElement(rng, blocks[0]) && isRngEndAtEndOfElement(rng, blocks[0]) ? blocks : [];\n      } else {\n        const first = head(blocks).filter(elm => isRngStartAtStartOfElement(rng, elm)).toArray();\n        const last = last$3(blocks).filter(elm => isRngEndAtEndOfElement(rng, elm)).toArray();\n        const middle = blocks.slice(1, -1);\n        return first.concat(middle).concat(last);\n      }\n    };\n    const getFullySelectedListItems = selection => filter$5(getFullySelectedBlocks(selection), isEditableListItem(selection.dom));\n    const getPartiallySelectedListItems = selection => filter$5(selection.getSelectedBlocks(), isEditableListItem(selection.dom));\n\n    const each$8 = Tools.each;\n    const isElementNode = node => isElement$6(node) && !isBookmarkNode$1(node) && !isCaretNode(node) && !isBogus$2(node);\n    const findElementSibling = (node, siblingName) => {\n      for (let sibling = node; sibling; sibling = sibling[siblingName]) {\n        if (isText$a(sibling) && isNotEmpty(sibling.data)) {\n          return node;\n        }\n        if (isElement$6(sibling) && !isBookmarkNode$1(sibling)) {\n          return sibling;\n        }\n      }\n      return node;\n    };\n    const mergeSiblingsNodes = (editor, prev, next) => {\n      const elementUtils = ElementUtils(editor);\n      const isPrevEditable = isElement$6(prev) && isEditable$3(prev);\n      const isNextEditable = isElement$6(next) && isEditable$3(next);\n      if (isPrevEditable && isNextEditable) {\n        const prevSibling = findElementSibling(prev, 'previousSibling');\n        const nextSibling = findElementSibling(next, 'nextSibling');\n        if (elementUtils.compare(prevSibling, nextSibling)) {\n          for (let sibling = prevSibling.nextSibling; sibling && sibling !== nextSibling;) {\n            const tmpSibling = sibling;\n            sibling = sibling.nextSibling;\n            prevSibling.appendChild(tmpSibling);\n          }\n          editor.dom.remove(nextSibling);\n          Tools.each(Tools.grep(nextSibling.childNodes), node => {\n            prevSibling.appendChild(node);\n          });\n          return prevSibling;\n        }\n      }\n      return next;\n    };\n    const mergeSiblings = (editor, format, vars, node) => {\n      var _a;\n      if (node && format.merge_siblings !== false) {\n        const newNode = (_a = mergeSiblingsNodes(editor, getNonWhiteSpaceSibling(node), node)) !== null && _a !== void 0 ? _a : node;\n        mergeSiblingsNodes(editor, newNode, getNonWhiteSpaceSibling(newNode, true));\n      }\n    };\n    const clearChildStyles = (dom, format, node) => {\n      if (format.clear_child_styles) {\n        const selector = format.links ? '*:not(a)' : '*';\n        each$8(dom.select(selector, node), childNode => {\n          if (isElementNode(childNode) && isEditable$3(childNode)) {\n            each$8(format.styles, (_value, name) => {\n              dom.setStyle(childNode, name, '');\n            });\n          }\n        });\n      }\n    };\n    const processChildElements = (node, filter, process) => {\n      each$8(node.childNodes, node => {\n        if (isElementNode(node)) {\n          if (filter(node)) {\n            process(node);\n          }\n          if (node.hasChildNodes()) {\n            processChildElements(node, filter, process);\n          }\n        }\n      });\n    };\n    const unwrapEmptySpan = (dom, node) => {\n      if (node.nodeName === 'SPAN' && dom.getAttribs(node).length === 0) {\n        dom.remove(node, true);\n      }\n    };\n    const hasStyle = (dom, name) => node => !!(node && getStyle(dom, node, name));\n    const applyStyle = (dom, name, value) => node => {\n      dom.setStyle(node, name, value);\n      if (node.getAttribute('style') === '') {\n        node.removeAttribute('style');\n      }\n      unwrapEmptySpan(dom, node);\n    };\n\n    const removeResult = Adt.generate([\n      { keep: [] },\n      { rename: ['name'] },\n      { removed: [] }\n    ]);\n    const MCE_ATTR_RE = /^(src|href|style)$/;\n    const each$7 = Tools.each;\n    const isEq$2 = isEq$5;\n    const isTableCellOrRow = node => /^(TR|TH|TD)$/.test(node.nodeName);\n    const isChildOfInlineParent = (dom, node, parent) => dom.isChildOf(node, parent) && node !== parent && !dom.isBlock(parent);\n    const getContainer = (ed, rng, start) => {\n      let container = rng[start ? 'startContainer' : 'endContainer'];\n      let offset = rng[start ? 'startOffset' : 'endOffset'];\n      if (isElement$6(container)) {\n        const lastIdx = container.childNodes.length - 1;\n        if (!start && offset) {\n          offset--;\n        }\n        container = container.childNodes[offset > lastIdx ? lastIdx : offset];\n      }\n      if (isText$a(container) && start && offset >= container.data.length) {\n        container = new DomTreeWalker(container, ed.getBody()).next() || container;\n      }\n      if (isText$a(container) && !start && offset === 0) {\n        container = new DomTreeWalker(container, ed.getBody()).prev() || container;\n      }\n      return container;\n    };\n    const normalizeTableSelection = (node, start) => {\n      const prop = start ? 'firstChild' : 'lastChild';\n      const childNode = node[prop];\n      if (isTableCellOrRow(node) && childNode) {\n        if (node.nodeName === 'TR') {\n          return childNode[prop] || childNode;\n        } else {\n          return childNode;\n        }\n      }\n      return node;\n    };\n    const wrap$1 = (dom, node, name, attrs) => {\n      var _a;\n      const wrapper = dom.create(name, attrs);\n      (_a = node.parentNode) === null || _a === void 0 ? void 0 : _a.insertBefore(wrapper, node);\n      wrapper.appendChild(node);\n      return wrapper;\n    };\n    const wrapWithSiblings = (dom, node, next, name, attrs) => {\n      const start = SugarElement.fromDom(node);\n      const wrapper = SugarElement.fromDom(dom.create(name, attrs));\n      const siblings = next ? nextSiblings(start) : prevSiblings(start);\n      append(wrapper, siblings);\n      if (next) {\n        before$3(start, wrapper);\n        prepend(wrapper, start);\n      } else {\n        after$4(start, wrapper);\n        append$1(wrapper, start);\n      }\n      return wrapper.dom;\n    };\n    const isColorFormatAndAnchor = (node, format) => format.links && node.nodeName === 'A';\n    const removeNode = (ed, node, format) => {\n      const parentNode = node.parentNode;\n      let rootBlockElm;\n      const dom = ed.dom;\n      const forcedRootBlock = getForcedRootBlock(ed);\n      if (isBlockFormat(format)) {\n        if (parentNode === dom.getRoot()) {\n          if (!format.list_block || !isEq$2(node, format.list_block)) {\n            each$e(from(node.childNodes), node => {\n              if (isValid(ed, forcedRootBlock, node.nodeName.toLowerCase())) {\n                if (!rootBlockElm) {\n                  rootBlockElm = wrap$1(dom, node, forcedRootBlock);\n                  dom.setAttribs(rootBlockElm, getForcedRootBlockAttrs(ed));\n                } else {\n                  rootBlockElm.appendChild(node);\n                }\n              } else {\n                rootBlockElm = null;\n              }\n            });\n          }\n        }\n      }\n      if (isMixedFormat(format) && !isEq$2(format.inline, node)) {\n        return;\n      }\n      dom.remove(node, true);\n    };\n    const processFormatAttrOrStyle = (name, value, vars) => {\n      if (isNumber(name)) {\n        return {\n          name: value,\n          value: null\n        };\n      } else {\n        return {\n          name,\n          value: replaceVars(value, vars)\n        };\n      }\n    };\n    const removeEmptyStyleAttributeIfNeeded = (dom, elm) => {\n      if (dom.getAttrib(elm, 'style') === '') {\n        elm.removeAttribute('style');\n        elm.removeAttribute('data-mce-style');\n      }\n    };\n    const removeStyles = (dom, elm, format, vars, compareNode) => {\n      let stylesModified = false;\n      each$7(format.styles, (value, name) => {\n        const {\n          name: styleName,\n          value: styleValue\n        } = processFormatAttrOrStyle(name, value, vars);\n        const normalizedStyleValue = normalizeStyleValue(styleValue, styleName);\n        if (format.remove_similar || isNull(styleValue) || !isElement$6(compareNode) || isEq$2(getStyle(dom, compareNode, styleName), normalizedStyleValue)) {\n          dom.setStyle(elm, styleName, '');\n        }\n        stylesModified = true;\n      });\n      if (stylesModified) {\n        removeEmptyStyleAttributeIfNeeded(dom, elm);\n      }\n    };\n    const removeListStyleFormats = (editor, name, vars) => {\n      if (name === 'removeformat') {\n        each$e(getPartiallySelectedListItems(editor.selection), li => {\n          each$e(listItemStyles, name => editor.dom.setStyle(li, name, ''));\n          removeEmptyStyleAttributeIfNeeded(editor.dom, li);\n        });\n      } else {\n        getExpandedListItemFormat(editor.formatter, name).each(liFmt => {\n          each$e(getPartiallySelectedListItems(editor.selection), li => removeStyles(editor.dom, li, liFmt, vars, null));\n        });\n      }\n    };\n    const removeFormatInternal = (ed, format, vars, node, compareNode) => {\n      const dom = ed.dom;\n      const elementUtils = ElementUtils(ed);\n      if (!format.ceFalseOverride && node && dom.getContentEditableParent(node) === 'false') {\n        return removeResult.keep();\n      }\n      if (node && !matchName(dom, node, format) && !isColorFormatAndAnchor(node, format)) {\n        return removeResult.keep();\n      }\n      const elm = node;\n      const preserveAttributes = format.preserve_attributes;\n      if (isInlineFormat(format) && format.remove === 'all' && isArray$1(preserveAttributes)) {\n        const attrsToPreserve = filter$5(dom.getAttribs(elm), attr => contains$2(preserveAttributes, attr.name.toLowerCase()));\n        dom.removeAllAttribs(elm);\n        each$e(attrsToPreserve, attr => dom.setAttrib(elm, attr.name, attr.value));\n        if (attrsToPreserve.length > 0) {\n          return removeResult.rename('span');\n        }\n      }\n      if (format.remove !== 'all') {\n        removeStyles(dom, elm, format, vars, compareNode);\n        each$7(format.attributes, (value, name) => {\n          const {\n            name: attrName,\n            value: attrValue\n          } = processFormatAttrOrStyle(name, value, vars);\n          if (format.remove_similar || isNull(attrValue) || !isElement$6(compareNode) || isEq$2(dom.getAttrib(compareNode, attrName), attrValue)) {\n            if (attrName === 'class') {\n              const currentValue = dom.getAttrib(elm, attrName);\n              if (currentValue) {\n                let valueOut = '';\n                each$e(currentValue.split(/\\s+/), cls => {\n                  if (/mce\\-\\w+/.test(cls)) {\n                    valueOut += (valueOut ? ' ' : '') + cls;\n                  }\n                });\n                if (valueOut) {\n                  dom.setAttrib(elm, attrName, valueOut);\n                  return;\n                }\n              }\n            }\n            if (MCE_ATTR_RE.test(attrName)) {\n              elm.removeAttribute('data-mce-' + attrName);\n            }\n            if (attrName === 'style' && matchNodeNames(['li'])(elm) && dom.getStyle(elm, 'list-style-type') === 'none') {\n              elm.removeAttribute(attrName);\n              dom.setStyle(elm, 'list-style-type', 'none');\n              return;\n            }\n            if (attrName === 'class') {\n              elm.removeAttribute('className');\n            }\n            elm.removeAttribute(attrName);\n          }\n        });\n        each$7(format.classes, value => {\n          value = replaceVars(value, vars);\n          if (!isElement$6(compareNode) || dom.hasClass(compareNode, value)) {\n            dom.removeClass(elm, value);\n          }\n        });\n        const attrs = dom.getAttribs(elm);\n        for (let i = 0; i < attrs.length; i++) {\n          const attrName = attrs[i].nodeName;\n          if (!elementUtils.isAttributeInternal(attrName)) {\n            return removeResult.keep();\n          }\n        }\n      }\n      if (format.remove !== 'none') {\n        removeNode(ed, elm, format);\n        return removeResult.removed();\n      }\n      return removeResult.keep();\n    };\n    const removeFormat$1 = (ed, format, vars, node, compareNode) => removeFormatInternal(ed, format, vars, node, compareNode).fold(never, newName => {\n      ed.dom.rename(node, newName);\n      return true;\n    }, always);\n    const findFormatRoot = (editor, container, name, vars, similar) => {\n      let formatRoot;\n      if (container.parentNode) {\n        each$e(getParents$2(editor.dom, container.parentNode).reverse(), parent => {\n          if (!formatRoot && isElement$6(parent) && parent.id !== '_start' && parent.id !== '_end') {\n            const format = matchNode(editor, parent, name, vars, similar);\n            if (format && format.split !== false) {\n              formatRoot = parent;\n            }\n          }\n        });\n      }\n      return formatRoot;\n    };\n    const removeFormatFromClone = (editor, format, vars, clone) => removeFormatInternal(editor, format, vars, clone, clone).fold(constant(clone), newName => {\n      const fragment = editor.dom.createFragment();\n      fragment.appendChild(clone);\n      return editor.dom.rename(clone, newName);\n    }, constant(null));\n    const wrapAndSplit = (editor, formatList, formatRoot, container, target, split, format, vars) => {\n      var _a, _b;\n      let lastClone;\n      let firstClone;\n      const dom = editor.dom;\n      if (formatRoot) {\n        const formatRootParent = formatRoot.parentNode;\n        for (let parent = container.parentNode; parent && parent !== formatRootParent; parent = parent.parentNode) {\n          let clone = dom.clone(parent, false);\n          for (let i = 0; i < formatList.length; i++) {\n            clone = removeFormatFromClone(editor, formatList[i], vars, clone);\n            if (clone === null) {\n              break;\n            }\n          }\n          if (clone) {\n            if (lastClone) {\n              clone.appendChild(lastClone);\n            }\n            if (!firstClone) {\n              firstClone = clone;\n            }\n            lastClone = clone;\n          }\n        }\n        if (split && (!format.mixed || !dom.isBlock(formatRoot))) {\n          container = (_a = dom.split(formatRoot, container)) !== null && _a !== void 0 ? _a : container;\n        }\n        if (lastClone && firstClone) {\n          (_b = target.parentNode) === null || _b === void 0 ? void 0 : _b.insertBefore(lastClone, target);\n          firstClone.appendChild(target);\n          if (isInlineFormat(format)) {\n            mergeSiblings(editor, format, vars, lastClone);\n          }\n        }\n      }\n      return container;\n    };\n    const remove$2 = (ed, name, vars, node, similar) => {\n      const formatList = ed.formatter.get(name);\n      const format = formatList[0];\n      const dom = ed.dom;\n      const selection = ed.selection;\n      const splitToFormatRoot = container => {\n        const formatRoot = findFormatRoot(ed, container, name, vars, similar);\n        return wrapAndSplit(ed, formatList, formatRoot, container, container, true, format, vars);\n      };\n      const isRemoveBookmarkNode = node => isBookmarkNode$1(node) && isElement$6(node) && (node.id === '_start' || node.id === '_end');\n      const removeNodeFormat = node => exists(formatList, fmt => removeFormat$1(ed, fmt, vars, node, node));\n      const process = node => {\n        const children = from(node.childNodes);\n        const removed = removeNodeFormat(node);\n        const currentNodeMatches = removed || exists(formatList, f => matchName(dom, node, f));\n        const parentNode = node.parentNode;\n        if (!currentNodeMatches && isNonNullable(parentNode) && shouldExpandToSelector(format)) {\n          removeNodeFormat(parentNode);\n        }\n        if (format.deep) {\n          if (children.length) {\n            for (let i = 0; i < children.length; i++) {\n              process(children[i]);\n            }\n          }\n        }\n        const textDecorations = [\n          'underline',\n          'line-through',\n          'overline'\n        ];\n        each$e(textDecorations, decoration => {\n          if (isElement$6(node) && ed.dom.getStyle(node, 'text-decoration') === decoration && node.parentNode && getTextDecoration(dom, node.parentNode) === decoration) {\n            removeFormat$1(ed, {\n              deep: false,\n              exact: true,\n              inline: 'span',\n              styles: { textDecoration: decoration }\n            }, undefined, node);\n          }\n        });\n      };\n      const unwrap = start => {\n        const node = dom.get(start ? '_start' : '_end');\n        if (node) {\n          let out = node[start ? 'firstChild' : 'lastChild'];\n          if (isRemoveBookmarkNode(out)) {\n            out = out[start ? 'firstChild' : 'lastChild'];\n          }\n          if (isText$a(out) && out.data.length === 0) {\n            out = start ? node.previousSibling || node.nextSibling : node.nextSibling || node.previousSibling;\n          }\n          dom.remove(node, true);\n          return out;\n        } else {\n          return null;\n        }\n      };\n      const removeRngStyle = rng => {\n        let startContainer;\n        let endContainer;\n        let expandedRng = expandRng(ed, rng, formatList, rng.collapsed);\n        if (format.split) {\n          expandedRng = split(expandedRng);\n          startContainer = getContainer(ed, expandedRng, true);\n          endContainer = getContainer(ed, expandedRng);\n          if (startContainer !== endContainer) {\n            startContainer = normalizeTableSelection(startContainer, true);\n            endContainer = normalizeTableSelection(endContainer, false);\n            if (isChildOfInlineParent(dom, startContainer, endContainer)) {\n              const marker = Optional.from(startContainer.firstChild).getOr(startContainer);\n              splitToFormatRoot(wrapWithSiblings(dom, marker, true, 'span', {\n                'id': '_start',\n                'data-mce-type': 'bookmark'\n              }));\n              unwrap(true);\n              return;\n            }\n            if (isChildOfInlineParent(dom, endContainer, startContainer)) {\n              const marker = Optional.from(endContainer.lastChild).getOr(endContainer);\n              splitToFormatRoot(wrapWithSiblings(dom, marker, false, 'span', {\n                'id': '_end',\n                'data-mce-type': 'bookmark'\n              }));\n              unwrap(false);\n              return;\n            }\n            startContainer = wrap$1(dom, startContainer, 'span', {\n              'id': '_start',\n              'data-mce-type': 'bookmark'\n            });\n            endContainer = wrap$1(dom, endContainer, 'span', {\n              'id': '_end',\n              'data-mce-type': 'bookmark'\n            });\n            const newRng = dom.createRng();\n            newRng.setStartAfter(startContainer);\n            newRng.setEndBefore(endContainer);\n            walk$3(dom, newRng, nodes => {\n              each$e(nodes, n => {\n                if (!isBookmarkNode$1(n) && !isBookmarkNode$1(n.parentNode)) {\n                  splitToFormatRoot(n);\n                }\n              });\n            });\n            splitToFormatRoot(startContainer);\n            splitToFormatRoot(endContainer);\n            startContainer = unwrap(true);\n            endContainer = unwrap();\n          } else {\n            startContainer = endContainer = splitToFormatRoot(startContainer);\n          }\n          expandedRng.startContainer = startContainer.parentNode ? startContainer.parentNode : startContainer;\n          expandedRng.startOffset = dom.nodeIndex(startContainer);\n          expandedRng.endContainer = endContainer.parentNode ? endContainer.parentNode : endContainer;\n          expandedRng.endOffset = dom.nodeIndex(endContainer) + 1;\n        }\n        walk$3(dom, expandedRng, nodes => {\n          each$e(nodes, process);\n        });\n      };\n      if (node) {\n        if (isNode(node)) {\n          const rng = dom.createRng();\n          rng.setStartBefore(node);\n          rng.setEndAfter(node);\n          removeRngStyle(rng);\n        } else {\n          removeRngStyle(node);\n        }\n        fireFormatRemove(ed, name, node, vars);\n        return;\n      }\n      if (!selection.isCollapsed() || !isInlineFormat(format) || getCellsFromEditor(ed).length) {\n        preserveSelection(ed, () => runOnRanges(ed, removeRngStyle), startNode => isInlineFormat(format) && match$2(ed, name, vars, startNode));\n        ed.nodeChanged();\n      } else {\n        removeCaretFormat(ed, name, vars, similar);\n      }\n      removeListStyleFormats(ed, name, vars);\n      fireFormatRemove(ed, name, node, vars);\n    };\n\n    const each$6 = Tools.each;\n    const mergeTextDecorationsAndColor = (dom, format, vars, node) => {\n      const processTextDecorationsAndColor = n => {\n        if (isElement$6(n) && isElement$6(n.parentNode) && isEditable$3(n)) {\n          const parentTextDecoration = getTextDecoration(dom, n.parentNode);\n          if (dom.getStyle(n, 'color') && parentTextDecoration) {\n            dom.setStyle(n, 'text-decoration', parentTextDecoration);\n          } else if (dom.getStyle(n, 'text-decoration') === parentTextDecoration) {\n            dom.setStyle(n, 'text-decoration', null);\n          }\n        }\n      };\n      if (format.styles && (format.styles.color || format.styles.textDecoration)) {\n        Tools.walk(node, processTextDecorationsAndColor, 'childNodes');\n        processTextDecorationsAndColor(node);\n      }\n    };\n    const mergeBackgroundColorAndFontSize = (dom, format, vars, node) => {\n      if (format.styles && format.styles.backgroundColor) {\n        const hasFontSize = hasStyle(dom, 'fontSize');\n        processChildElements(node, elm => hasFontSize(elm) && isEditable$3(elm), applyStyle(dom, 'backgroundColor', replaceVars(format.styles.backgroundColor, vars)));\n      }\n    };\n    const mergeSubSup = (dom, format, vars, node) => {\n      if (isInlineFormat(format) && (format.inline === 'sub' || format.inline === 'sup')) {\n        const hasFontSize = hasStyle(dom, 'fontSize');\n        processChildElements(node, elm => hasFontSize(elm) && isEditable$3(elm), applyStyle(dom, 'fontSize', ''));\n        const inverseTagDescendants = filter$5(dom.select(format.inline === 'sup' ? 'sub' : 'sup', node), isEditable$3);\n        dom.remove(inverseTagDescendants, true);\n      }\n    };\n    const mergeWithChildren = (editor, formatList, vars, node) => {\n      each$6(formatList, format => {\n        if (isInlineFormat(format)) {\n          each$6(editor.dom.select(format.inline, node), child => {\n            if (isElementNode(child)) {\n              removeFormat$1(editor, format, vars, child, format.exact ? child : null);\n            }\n          });\n        }\n        clearChildStyles(editor.dom, format, node);\n      });\n    };\n    const mergeWithParents = (editor, format, name, vars, node) => {\n      const parentNode = node.parentNode;\n      if (matchNode(editor, parentNode, name, vars)) {\n        if (removeFormat$1(editor, format, vars, node)) {\n          return;\n        }\n      }\n      if (format.merge_with_parents && parentNode) {\n        editor.dom.getParent(parentNode, parent => {\n          if (matchNode(editor, parent, name, vars)) {\n            removeFormat$1(editor, format, vars, node);\n            return true;\n          } else {\n            return false;\n          }\n        });\n      }\n    };\n\n    const each$5 = Tools.each;\n    const canFormatBR = (editor, format, node, parentName) => {\n      if (canFormatEmptyLines(editor) && isInlineFormat(format) && node.parentNode) {\n        const validBRParentElements = getTextRootBlockElements(editor.schema);\n        const hasCaretNodeSibling = sibling(SugarElement.fromDom(node), sibling => isCaretNode(sibling.dom));\n        return hasNonNullableKey(validBRParentElements, parentName) && isEmpty$2(SugarElement.fromDom(node.parentNode), false) && !hasCaretNodeSibling;\n      } else {\n        return false;\n      }\n    };\n    const applyStyles = (dom, elm, format, vars) => {\n      each$5(format.styles, (value, name) => {\n        dom.setStyle(elm, name, replaceVars(value, vars));\n      });\n      if (format.styles) {\n        const styleVal = dom.getAttrib(elm, 'style');\n        if (styleVal) {\n          dom.setAttrib(elm, 'data-mce-style', styleVal);\n        }\n      }\n    };\n    const applyFormat$1 = (ed, name, vars, node) => {\n      const formatList = ed.formatter.get(name);\n      const format = formatList[0];\n      const isCollapsed = !node && ed.selection.isCollapsed();\n      const dom = ed.dom;\n      const selection = ed.selection;\n      const setElementFormat = (elm, fmt = format) => {\n        if (isFunction(fmt.onformat)) {\n          fmt.onformat(elm, fmt, vars, node);\n        }\n        applyStyles(dom, elm, fmt, vars);\n        each$5(fmt.attributes, (value, name) => {\n          dom.setAttrib(elm, name, replaceVars(value, vars));\n        });\n        each$5(fmt.classes, value => {\n          const newValue = replaceVars(value, vars);\n          if (!dom.hasClass(elm, newValue)) {\n            dom.addClass(elm, newValue);\n          }\n        });\n      };\n      const applyNodeStyle = (formatList, node) => {\n        let found = false;\n        each$5(formatList, format => {\n          if (!isSelectorFormat(format)) {\n            return false;\n          }\n          if (dom.getContentEditable(node) === 'false' && !format.ceFalseOverride) {\n            return true;\n          }\n          if (isNonNullable(format.collapsed) && format.collapsed !== isCollapsed) {\n            return true;\n          }\n          if (dom.is(node, format.selector) && !isCaretNode(node)) {\n            setElementFormat(node, format);\n            found = true;\n            return false;\n          }\n          return true;\n        });\n        return found;\n      };\n      const createWrapElement = wrapName => {\n        if (isString(wrapName)) {\n          const wrapElm = dom.create(wrapName);\n          setElementFormat(wrapElm);\n          return wrapElm;\n        } else {\n          return null;\n        }\n      };\n      const applyRngStyle = (dom, rng, nodeSpecific) => {\n        const newWrappers = [];\n        let contentEditable = true;\n        const wrapName = format.inline || format.block;\n        const wrapElm = createWrapElement(wrapName);\n        const isMatchingWrappingBlock = node => isWrappingBlockFormat(format) && matchNode(ed, node, name, vars);\n        const canRenameBlock = (nodeName, parentName, isEditableDescendant) => {\n          const isValidBlockFormatForNode = isNonWrappingBlockFormat(format) && isTextBlock$1(ed, nodeName) && isValid(ed, parentName, wrapName);\n          return isEditableDescendant && isValidBlockFormatForNode;\n        };\n        const canWrapNode = (node, parentName, isEditableDescendant, isWrappableNoneditableElm) => {\n          const nodeName = node.nodeName.toLowerCase();\n          const isValidWrapNode = isValid(ed, wrapName, nodeName) && isValid(ed, parentName, wrapName);\n          const isZwsp$1 = !nodeSpecific && isText$a(node) && isZwsp(node.data);\n          const isCaret = isCaretNode(node);\n          const isCorrectFormatForNode = !isInlineFormat(format) || !dom.isBlock(node);\n          return (isEditableDescendant || isWrappableNoneditableElm) && isValidWrapNode && !isZwsp$1 && !isCaret && isCorrectFormatForNode;\n        };\n        walk$3(dom, rng, nodes => {\n          let currentWrapElm;\n          const process = node => {\n            let hasContentEditableState = false;\n            let lastContentEditable = contentEditable;\n            let isWrappableNoneditableElm = false;\n            const nodeName = node.nodeName.toLowerCase();\n            const parentNode = node.parentNode;\n            const parentName = parentNode.nodeName.toLowerCase();\n            const contentEditableValue = dom.getContentEditable(node);\n            if (isNonNullable(contentEditableValue)) {\n              lastContentEditable = contentEditable;\n              contentEditable = contentEditableValue === 'true';\n              hasContentEditableState = true;\n              isWrappableNoneditableElm = isWrappableNoneditable(ed, node);\n            }\n            const isEditableDescendant = contentEditable && !hasContentEditableState;\n            if (isBr$6(node) && !canFormatBR(ed, format, node, parentName)) {\n              currentWrapElm = null;\n              if (isBlockFormat(format)) {\n                dom.remove(node);\n              }\n              return;\n            }\n            if (isMatchingWrappingBlock(node)) {\n              currentWrapElm = null;\n              return;\n            }\n            if (canRenameBlock(nodeName, parentName, isEditableDescendant)) {\n              const elm = dom.rename(node, wrapName);\n              setElementFormat(elm);\n              newWrappers.push(elm);\n              currentWrapElm = null;\n              return;\n            }\n            if (isSelectorFormat(format)) {\n              let found = applyNodeStyle(formatList, node);\n              if (!found && isNonNullable(parentNode) && shouldExpandToSelector(format)) {\n                found = applyNodeStyle(formatList, parentNode);\n              }\n              if (!isInlineFormat(format) || found) {\n                currentWrapElm = null;\n                return;\n              }\n            }\n            if (isNonNullable(wrapElm) && canWrapNode(node, parentName, isEditableDescendant, isWrappableNoneditableElm)) {\n              if (!currentWrapElm) {\n                currentWrapElm = dom.clone(wrapElm, false);\n                parentNode.insertBefore(currentWrapElm, node);\n                newWrappers.push(currentWrapElm);\n              }\n              if (isWrappableNoneditableElm && hasContentEditableState) {\n                contentEditable = lastContentEditable;\n              }\n              currentWrapElm.appendChild(node);\n            } else {\n              currentWrapElm = null;\n              each$e(from(node.childNodes), process);\n              if (hasContentEditableState) {\n                contentEditable = lastContentEditable;\n              }\n              currentWrapElm = null;\n            }\n          };\n          each$e(nodes, process);\n        });\n        if (format.links === true) {\n          each$e(newWrappers, node => {\n            const process = node => {\n              if (node.nodeName === 'A') {\n                setElementFormat(node, format);\n              }\n              each$e(from(node.childNodes), process);\n            };\n            process(node);\n          });\n        }\n        each$e(newWrappers, node => {\n          const getChildCount = node => {\n            let count = 0;\n            each$e(node.childNodes, node => {\n              if (!isEmptyTextNode$1(node) && !isBookmarkNode$1(node)) {\n                count++;\n              }\n            });\n            return count;\n          };\n          const mergeStyles = node => {\n            const childElement = find$2(node.childNodes, isElementNode$1).filter(child => dom.getContentEditable(child) !== 'false' && matchName(dom, child, format));\n            return childElement.map(child => {\n              const clone = dom.clone(child, false);\n              setElementFormat(clone);\n              dom.replace(clone, node, true);\n              dom.remove(child, true);\n              return clone;\n            }).getOr(node);\n          };\n          const childCount = getChildCount(node);\n          if ((newWrappers.length > 1 || !dom.isBlock(node)) && childCount === 0) {\n            dom.remove(node, true);\n            return;\n          }\n          if (isInlineFormat(format) || isBlockFormat(format) && format.wrapper) {\n            if (!format.exact && childCount === 1) {\n              node = mergeStyles(node);\n            }\n            mergeWithChildren(ed, formatList, vars, node);\n            mergeWithParents(ed, format, name, vars, node);\n            mergeBackgroundColorAndFontSize(dom, format, vars, node);\n            mergeTextDecorationsAndColor(dom, format, vars, node);\n            mergeSubSup(dom, format, vars, node);\n            mergeSiblings(ed, format, vars, node);\n          }\n        });\n      };\n      const targetNode = isNode(node) ? node : selection.getNode();\n      if (dom.getContentEditable(targetNode) === 'false' && !isWrappableNoneditable(ed, targetNode)) {\n        node = targetNode;\n        applyNodeStyle(formatList, node);\n        fireFormatApply(ed, name, node, vars);\n        return;\n      }\n      if (format) {\n        if (node) {\n          if (isNode(node)) {\n            if (!applyNodeStyle(formatList, node)) {\n              const rng = dom.createRng();\n              rng.setStartBefore(node);\n              rng.setEndAfter(node);\n              applyRngStyle(dom, expandRng(ed, rng, formatList), true);\n            }\n          } else {\n            applyRngStyle(dom, node, true);\n          }\n        } else {\n          if (!isCollapsed || !isInlineFormat(format) || getCellsFromEditor(ed).length) {\n            selection.setRng(normalize(selection.getRng()));\n            preserveSelection(ed, () => {\n              runOnRanges(ed, (selectionRng, fake) => {\n                const expandedRng = fake ? selectionRng : expandRng(ed, selectionRng, formatList);\n                applyRngStyle(dom, expandedRng, false);\n              });\n            }, always);\n            ed.nodeChanged();\n          } else {\n            applyCaretFormat(ed, name, vars);\n          }\n          getExpandedListItemFormat(ed.formatter, name).each(liFmt => {\n            each$e(getFullySelectedListItems(ed.selection), li => applyStyles(dom, li, liFmt, vars));\n          });\n        }\n        postProcess$1(name, ed);\n      }\n      fireFormatApply(ed, name, node, vars);\n    };\n\n    const hasVars = value => has$2(value, 'vars');\n    const setup$t = (registeredFormatListeners, editor) => {\n      registeredFormatListeners.set({});\n      editor.on('NodeChange', e => {\n        updateAndFireChangeCallbacks(editor, e.element, registeredFormatListeners.get());\n      });\n      editor.on('FormatApply FormatRemove', e => {\n        const element = Optional.from(e.node).map(nodeOrRange => isNode(nodeOrRange) ? nodeOrRange : nodeOrRange.startContainer).bind(node => isElement$6(node) ? Optional.some(node) : Optional.from(node.parentElement)).getOrThunk(() => fallbackElement(editor));\n        updateAndFireChangeCallbacks(editor, element, registeredFormatListeners.get());\n      });\n    };\n    const fallbackElement = editor => editor.selection.getStart();\n    const matchingNode = (editor, parents, format, similar, vars) => {\n      const isMatchingNode = node => {\n        const matchingFormat = editor.formatter.matchNode(node, format, vars !== null && vars !== void 0 ? vars : {}, similar);\n        return !isUndefined(matchingFormat);\n      };\n      const isUnableToMatch = node => {\n        if (matchesUnInheritedFormatSelector(editor, node, format)) {\n          return true;\n        } else {\n          if (!similar) {\n            return isNonNullable(editor.formatter.matchNode(node, format, vars, true));\n          } else {\n            return false;\n          }\n        }\n      };\n      return findUntil$1(parents, isMatchingNode, isUnableToMatch);\n    };\n    const getParents = (editor, elm) => {\n      const element = elm !== null && elm !== void 0 ? elm : fallbackElement(editor);\n      return filter$5(getParents$2(editor.dom, element), node => isElement$6(node) && !isBogus$2(node));\n    };\n    const updateAndFireChangeCallbacks = (editor, elm, registeredCallbacks) => {\n      const parents = getParents(editor, elm);\n      each$d(registeredCallbacks, (data, format) => {\n        const runIfChanged = spec => {\n          const match = matchingNode(editor, parents, format, spec.similar, hasVars(spec) ? spec.vars : undefined);\n          const isSet = match.isSome();\n          if (spec.state.get() !== isSet) {\n            spec.state.set(isSet);\n            const node = match.getOr(elm);\n            if (hasVars(spec)) {\n              spec.callback(isSet, {\n                node,\n                format,\n                parents\n              });\n            } else {\n              each$e(spec.callbacks, callback => callback(isSet, {\n                node,\n                format,\n                parents\n              }));\n            }\n          }\n        };\n        each$e([\n          data.withSimilar,\n          data.withoutSimilar\n        ], runIfChanged);\n        each$e(data.withVars, runIfChanged);\n      });\n    };\n    const addListeners = (editor, registeredFormatListeners, formats, callback, similar, vars) => {\n      const formatChangeItems = registeredFormatListeners.get();\n      each$e(formats.split(','), format => {\n        const group = get$a(formatChangeItems, format).getOrThunk(() => {\n          const base = {\n            withSimilar: {\n              state: Cell(false),\n              similar: true,\n              callbacks: []\n            },\n            withoutSimilar: {\n              state: Cell(false),\n              similar: false,\n              callbacks: []\n            },\n            withVars: []\n          };\n          formatChangeItems[format] = base;\n          return base;\n        });\n        const getCurrent = () => {\n          const parents = getParents(editor);\n          return matchingNode(editor, parents, format, similar, vars).isSome();\n        };\n        if (isUndefined(vars)) {\n          const toAppendTo = similar ? group.withSimilar : group.withoutSimilar;\n          toAppendTo.callbacks.push(callback);\n          if (toAppendTo.callbacks.length === 1) {\n            toAppendTo.state.set(getCurrent());\n          }\n        } else {\n          group.withVars.push({\n            state: Cell(getCurrent()),\n            similar,\n            vars,\n            callback\n          });\n        }\n      });\n      registeredFormatListeners.set(formatChangeItems);\n    };\n    const removeListeners = (registeredFormatListeners, formats, callback) => {\n      const formatChangeItems = registeredFormatListeners.get();\n      each$e(formats.split(','), format => get$a(formatChangeItems, format).each(group => {\n        formatChangeItems[format] = {\n          withSimilar: {\n            ...group.withSimilar,\n            callbacks: filter$5(group.withSimilar.callbacks, cb => cb !== callback)\n          },\n          withoutSimilar: {\n            ...group.withoutSimilar,\n            callbacks: filter$5(group.withoutSimilar.callbacks, cb => cb !== callback)\n          },\n          withVars: filter$5(group.withVars, item => item.callback !== callback)\n        };\n      }));\n      registeredFormatListeners.set(formatChangeItems);\n    };\n    const formatChangedInternal = (editor, registeredFormatListeners, formats, callback, similar, vars) => {\n      addListeners(editor, registeredFormatListeners, formats, callback, similar, vars);\n      return { unbind: () => removeListeners(registeredFormatListeners, formats, callback) };\n    };\n\n    const toggle = (editor, name, vars, node) => {\n      const fmt = editor.formatter.get(name);\n      if (fmt) {\n        if (match$2(editor, name, vars, node) && (!('toggle' in fmt[0]) || fmt[0].toggle)) {\n          remove$2(editor, name, vars, node);\n        } else {\n          applyFormat$1(editor, name, vars, node);\n        }\n      }\n    };\n\n    function _typeof(obj) {\n      '@babel/helpers - typeof';\n      return _typeof = 'function' == typeof Symbol && 'symbol' == typeof Symbol.iterator ? function (obj) {\n        return typeof obj;\n      } : function (obj) {\n        return obj && 'function' == typeof Symbol && obj.constructor === Symbol && obj !== Symbol.prototype ? 'symbol' : typeof obj;\n      }, _typeof(obj);\n    }\n    function _setPrototypeOf(o, p) {\n      _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) {\n        o.__proto__ = p;\n        return o;\n      };\n      return _setPrototypeOf(o, p);\n    }\n    function _isNativeReflectConstruct() {\n      if (typeof Reflect === 'undefined' || !Reflect.construct)\n        return false;\n      if (Reflect.construct.sham)\n        return false;\n      if (typeof Proxy === 'function')\n        return true;\n      try {\n        Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {\n        }));\n        return true;\n      } catch (e) {\n        return false;\n      }\n    }\n    function _construct(Parent, args, Class) {\n      if (_isNativeReflectConstruct()) {\n        _construct = Reflect.construct;\n      } else {\n        _construct = function _construct(Parent, args, Class) {\n          var a = [null];\n          a.push.apply(a, args);\n          var Constructor = Function.bind.apply(Parent, a);\n          var instance = new Constructor();\n          if (Class)\n            _setPrototypeOf(instance, Class.prototype);\n          return instance;\n        };\n      }\n      return _construct.apply(null, arguments);\n    }\n    function _toConsumableArray(arr) {\n      return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _unsupportedIterableToArray(arr) || _nonIterableSpread();\n    }\n    function _arrayWithoutHoles(arr) {\n      if (Array.isArray(arr))\n        return _arrayLikeToArray(arr);\n    }\n    function _iterableToArray(iter) {\n      if (typeof Symbol !== 'undefined' && iter[Symbol.iterator] != null || iter['@@iterator'] != null)\n        return Array.from(iter);\n    }\n    function _unsupportedIterableToArray(o, minLen) {\n      if (!o)\n        return;\n      if (typeof o === 'string')\n        return _arrayLikeToArray(o, minLen);\n      var n = Object.prototype.toString.call(o).slice(8, -1);\n      if (n === 'Object' && o.constructor)\n        n = o.constructor.name;\n      if (n === 'Map' || n === 'Set')\n        return Array.from(o);\n      if (n === 'Arguments' || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))\n        return _arrayLikeToArray(o, minLen);\n    }\n    function _arrayLikeToArray(arr, len) {\n      if (len == null || len > arr.length)\n        len = arr.length;\n      for (var i = 0, arr2 = new Array(len); i < len; i++)\n        arr2[i] = arr[i];\n      return arr2;\n    }\n    function _nonIterableSpread() {\n      throw new TypeError('Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.');\n    }\n    var hasOwnProperty = Object.hasOwnProperty, setPrototypeOf = Object.setPrototypeOf, isFrozen = Object.isFrozen, getPrototypeOf = Object.getPrototypeOf, getOwnPropertyDescriptor = Object.getOwnPropertyDescriptor;\n    var freeze = Object.freeze, seal = Object.seal, create$8 = Object.create;\n    var _ref = typeof Reflect !== 'undefined' && Reflect, apply = _ref.apply, construct = _ref.construct;\n    if (!apply) {\n      apply = function apply(fun, thisValue, args) {\n        return fun.apply(thisValue, args);\n      };\n    }\n    if (!freeze) {\n      freeze = function freeze(x) {\n        return x;\n      };\n    }\n    if (!seal) {\n      seal = function seal(x) {\n        return x;\n      };\n    }\n    if (!construct) {\n      construct = function construct(Func, args) {\n        return _construct(Func, _toConsumableArray(args));\n      };\n    }\n    var arrayForEach = unapply(Array.prototype.forEach);\n    var arrayPop = unapply(Array.prototype.pop);\n    var arrayPush = unapply(Array.prototype.push);\n    var stringToLowerCase = unapply(String.prototype.toLowerCase);\n    var stringMatch = unapply(String.prototype.match);\n    var stringReplace = unapply(String.prototype.replace);\n    var stringIndexOf = unapply(String.prototype.indexOf);\n    var stringTrim = unapply(String.prototype.trim);\n    var regExpTest = unapply(RegExp.prototype.test);\n    var typeErrorCreate = unconstruct(TypeError);\n    function unapply(func) {\n      return function (thisArg) {\n        for (var _len = arguments.length, args = new Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {\n          args[_key - 1] = arguments[_key];\n        }\n        return apply(func, thisArg, args);\n      };\n    }\n    function unconstruct(func) {\n      return function () {\n        for (var _len2 = arguments.length, args = new Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {\n          args[_key2] = arguments[_key2];\n        }\n        return construct(func, args);\n      };\n    }\n    function addToSet(set, array) {\n      if (setPrototypeOf) {\n        setPrototypeOf(set, null);\n      }\n      var l = array.length;\n      while (l--) {\n        var element = array[l];\n        if (typeof element === 'string') {\n          var lcElement = stringToLowerCase(element);\n          if (lcElement !== element) {\n            if (!isFrozen(array)) {\n              array[l] = lcElement;\n            }\n            element = lcElement;\n          }\n        }\n        set[element] = true;\n      }\n      return set;\n    }\n    function clone(object) {\n      var newObject = create$8(null);\n      var property;\n      for (property in object) {\n        if (apply(hasOwnProperty, object, [property])) {\n          newObject[property] = object[property];\n        }\n      }\n      return newObject;\n    }\n    function lookupGetter(object, prop) {\n      while (object !== null) {\n        var desc = getOwnPropertyDescriptor(object, prop);\n        if (desc) {\n          if (desc.get) {\n            return unapply(desc.get);\n          }\n          if (typeof desc.value === 'function') {\n            return unapply(desc.value);\n          }\n        }\n        object = getPrototypeOf(object);\n      }\n      function fallbackValue(element) {\n        console.warn('fallback value for', element);\n        return null;\n      }\n      return fallbackValue;\n    }\n    var html$1 = freeze([\n      'a',\n      'abbr',\n      'acronym',\n      'address',\n      'area',\n      'article',\n      'aside',\n      'audio',\n      'b',\n      'bdi',\n      'bdo',\n      'big',\n      'blink',\n      'blockquote',\n      'body',\n      'br',\n      'button',\n      'canvas',\n      'caption',\n      'center',\n      'cite',\n      'code',\n      'col',\n      'colgroup',\n      'content',\n      'data',\n      'datalist',\n      'dd',\n      'decorator',\n      'del',\n      'details',\n      'dfn',\n      'dialog',\n      'dir',\n      'div',\n      'dl',\n      'dt',\n      'element',\n      'em',\n      'fieldset',\n      'figcaption',\n      'figure',\n      'font',\n      'footer',\n      'form',\n      'h1',\n      'h2',\n      'h3',\n      'h4',\n      'h5',\n      'h6',\n      'head',\n      'header',\n      'hgroup',\n      'hr',\n      'html',\n      'i',\n      'img',\n      'input',\n      'ins',\n      'kbd',\n      'label',\n      'legend',\n      'li',\n      'main',\n      'map',\n      'mark',\n      'marquee',\n      'menu',\n      'menuitem',\n      'meter',\n      'nav',\n      'nobr',\n      'ol',\n      'optgroup',\n      'option',\n      'output',\n      'p',\n      'picture',\n      'pre',\n      'progress',\n      'q',\n      'rp',\n      'rt',\n      'ruby',\n      's',\n      'samp',\n      'section',\n      'select',\n      'shadow',\n      'small',\n      'source',\n      'spacer',\n      'span',\n      'strike',\n      'strong',\n      'style',\n      'sub',\n      'summary',\n      'sup',\n      'table',\n      'tbody',\n      'td',\n      'template',\n      'textarea',\n      'tfoot',\n      'th',\n      'thead',\n      'time',\n      'tr',\n      'track',\n      'tt',\n      'u',\n      'ul',\n      'var',\n      'video',\n      'wbr'\n    ]);\n    var svg$1 = freeze([\n      'svg',\n      'a',\n      'altglyph',\n      'altglyphdef',\n      'altglyphitem',\n      'animatecolor',\n      'animatemotion',\n      'animatetransform',\n      'circle',\n      'clippath',\n      'defs',\n      'desc',\n      'ellipse',\n      'filter',\n      'font',\n      'g',\n      'glyph',\n      'glyphref',\n      'hkern',\n      'image',\n      'line',\n      'lineargradient',\n      'marker',\n      'mask',\n      'metadata',\n      'mpath',\n      'path',\n      'pattern',\n      'polygon',\n      'polyline',\n      'radialgradient',\n      'rect',\n      'stop',\n      'style',\n      'switch',\n      'symbol',\n      'text',\n      'textpath',\n      'title',\n      'tref',\n      'tspan',\n      'view',\n      'vkern'\n    ]);\n    var svgFilters = freeze([\n      'feBlend',\n      'feColorMatrix',\n      'feComponentTransfer',\n      'feComposite',\n      'feConvolveMatrix',\n      'feDiffuseLighting',\n      'feDisplacementMap',\n      'feDistantLight',\n      'feFlood',\n      'feFuncA',\n      'feFuncB',\n      'feFuncG',\n      'feFuncR',\n      'feGaussianBlur',\n      'feImage',\n      'feMerge',\n      'feMergeNode',\n      'feMorphology',\n      'feOffset',\n      'fePointLight',\n      'feSpecularLighting',\n      'feSpotLight',\n      'feTile',\n      'feTurbulence'\n    ]);\n    var svgDisallowed = freeze([\n      'animate',\n      'color-profile',\n      'cursor',\n      'discard',\n      'fedropshadow',\n      'font-face',\n      'font-face-format',\n      'font-face-name',\n      'font-face-src',\n      'font-face-uri',\n      'foreignobject',\n      'hatch',\n      'hatchpath',\n      'mesh',\n      'meshgradient',\n      'meshpatch',\n      'meshrow',\n      'missing-glyph',\n      'script',\n      'set',\n      'solidcolor',\n      'unknown',\n      'use'\n    ]);\n    var mathMl$1 = freeze([\n      'math',\n      'menclose',\n      'merror',\n      'mfenced',\n      'mfrac',\n      'mglyph',\n      'mi',\n      'mlabeledtr',\n      'mmultiscripts',\n      'mn',\n      'mo',\n      'mover',\n      'mpadded',\n      'mphantom',\n      'mroot',\n      'mrow',\n      'ms',\n      'mspace',\n      'msqrt',\n      'mstyle',\n      'msub',\n      'msup',\n      'msubsup',\n      'mtable',\n      'mtd',\n      'mtext',\n      'mtr',\n      'munder',\n      'munderover'\n    ]);\n    var mathMlDisallowed = freeze([\n      'maction',\n      'maligngroup',\n      'malignmark',\n      'mlongdiv',\n      'mscarries',\n      'mscarry',\n      'msgroup',\n      'mstack',\n      'msline',\n      'msrow',\n      'semantics',\n      'annotation',\n      'annotation-xml',\n      'mprescripts',\n      'none'\n    ]);\n    var text = freeze(['#text']);\n    var html = freeze([\n      'accept',\n      'action',\n      'align',\n      'alt',\n      'autocapitalize',\n      'autocomplete',\n      'autopictureinpicture',\n      'autoplay',\n      'background',\n      'bgcolor',\n      'border',\n      'capture',\n      'cellpadding',\n      'cellspacing',\n      'checked',\n      'cite',\n      'class',\n      'clear',\n      'color',\n      'cols',\n      'colspan',\n      'controls',\n      'controlslist',\n      'coords',\n      'crossorigin',\n      'datetime',\n      'decoding',\n      'default',\n      'dir',\n      'disabled',\n      'disablepictureinpicture',\n      'disableremoteplayback',\n      'download',\n      'draggable',\n      'enctype',\n      'enterkeyhint',\n      'face',\n      'for',\n      'headers',\n      'height',\n      'hidden',\n      'high',\n      'href',\n      'hreflang',\n      'id',\n      'inputmode',\n      'integrity',\n      'ismap',\n      'kind',\n      'label',\n      'lang',\n      'list',\n      'loading',\n      'loop',\n      'low',\n      'max',\n      'maxlength',\n      'media',\n      'method',\n      'min',\n      'minlength',\n      'multiple',\n      'muted',\n      'name',\n      'nonce',\n      'noshade',\n      'novalidate',\n      'nowrap',\n      'open',\n      'optimum',\n      'pattern',\n      'placeholder',\n      'playsinline',\n      'poster',\n      'preload',\n      'pubdate',\n      'radiogroup',\n      'readonly',\n      'rel',\n      'required',\n      'rev',\n      'reversed',\n      'role',\n      'rows',\n      'rowspan',\n      'spellcheck',\n      'scope',\n      'selected',\n      'shape',\n      'size',\n      'sizes',\n      'span',\n      'srclang',\n      'start',\n      'src',\n      'srcset',\n      'step',\n      'style',\n      'summary',\n      'tabindex',\n      'title',\n      'translate',\n      'type',\n      'usemap',\n      'valign',\n      'value',\n      'width',\n      'xmlns',\n      'slot'\n    ]);\n    var svg = freeze([\n      'accent-height',\n      'accumulate',\n      'additive',\n      'alignment-baseline',\n      'ascent',\n      'attributename',\n      'attributetype',\n      'azimuth',\n      'basefrequency',\n      'baseline-shift',\n      'begin',\n      'bias',\n      'by',\n      'class',\n      'clip',\n      'clippathunits',\n      'clip-path',\n      'clip-rule',\n      'color',\n      'color-interpolation',\n      'color-interpolation-filters',\n      'color-profile',\n      'color-rendering',\n      'cx',\n      'cy',\n      'd',\n      'dx',\n      'dy',\n      'diffuseconstant',\n      'direction',\n      'display',\n      'divisor',\n      'dur',\n      'edgemode',\n      'elevation',\n      'end',\n      'fill',\n      'fill-opacity',\n      'fill-rule',\n      'filter',\n      'filterunits',\n      'flood-color',\n      'flood-opacity',\n      'font-family',\n      'font-size',\n      'font-size-adjust',\n      'font-stretch',\n      'font-style',\n      'font-variant',\n      'font-weight',\n      'fx',\n      'fy',\n      'g1',\n      'g2',\n      'glyph-name',\n      'glyphref',\n      'gradientunits',\n      'gradienttransform',\n      'height',\n      'href',\n      'id',\n      'image-rendering',\n      'in',\n      'in2',\n      'k',\n      'k1',\n      'k2',\n      'k3',\n      'k4',\n      'kerning',\n      'keypoints',\n      'keysplines',\n      'keytimes',\n      'lang',\n      'lengthadjust',\n      'letter-spacing',\n      'kernelmatrix',\n      'kernelunitlength',\n      'lighting-color',\n      'local',\n      'marker-end',\n      'marker-mid',\n      'marker-start',\n      'markerheight',\n      'markerunits',\n      'markerwidth',\n      'maskcontentunits',\n      'maskunits',\n      'max',\n      'mask',\n      'media',\n      'method',\n      'mode',\n      'min',\n      'name',\n      'numoctaves',\n      'offset',\n      'operator',\n      'opacity',\n      'order',\n      'orient',\n      'orientation',\n      'origin',\n      'overflow',\n      'paint-order',\n      'path',\n      'pathlength',\n      'patterncontentunits',\n      'patterntransform',\n      'patternunits',\n      'points',\n      'preservealpha',\n      'preserveaspectratio',\n      'primitiveunits',\n      'r',\n      'rx',\n      'ry',\n      'radius',\n      'refx',\n      'refy',\n      'repeatcount',\n      'repeatdur',\n      'restart',\n      'result',\n      'rotate',\n      'scale',\n      'seed',\n      'shape-rendering',\n      'specularconstant',\n      'specularexponent',\n      'spreadmethod',\n      'startoffset',\n      'stddeviation',\n      'stitchtiles',\n      'stop-color',\n      'stop-opacity',\n      'stroke-dasharray',\n      'stroke-dashoffset',\n      'stroke-linecap',\n      'stroke-linejoin',\n      'stroke-miterlimit',\n      'stroke-opacity',\n      'stroke',\n      'stroke-width',\n      'style',\n      'surfacescale',\n      'systemlanguage',\n      'tabindex',\n      'targetx',\n      'targety',\n      'transform',\n      'transform-origin',\n      'text-anchor',\n      'text-decoration',\n      'text-rendering',\n      'textlength',\n      'type',\n      'u1',\n      'u2',\n      'unicode',\n      'values',\n      'viewbox',\n      'visibility',\n      'version',\n      'vert-adv-y',\n      'vert-origin-x',\n      'vert-origin-y',\n      'width',\n      'word-spacing',\n      'wrap',\n      'writing-mode',\n      'xchannelselector',\n      'ychannelselector',\n      'x',\n      'x1',\n      'x2',\n      'xmlns',\n      'y',\n      'y1',\n      'y2',\n      'z',\n      'zoomandpan'\n    ]);\n    var mathMl = freeze([\n      'accent',\n      'accentunder',\n      'align',\n      'bevelled',\n      'close',\n      'columnsalign',\n      'columnlines',\n      'columnspan',\n      'denomalign',\n      'depth',\n      'dir',\n      'display',\n      'displaystyle',\n      'encoding',\n      'fence',\n      'frame',\n      'height',\n      'href',\n      'id',\n      'largeop',\n      'length',\n      'linethickness',\n      'lspace',\n      'lquote',\n      'mathbackground',\n      'mathcolor',\n      'mathsize',\n      'mathvariant',\n      'maxsize',\n      'minsize',\n      'movablelimits',\n      'notation',\n      'numalign',\n      'open',\n      'rowalign',\n      'rowlines',\n      'rowspacing',\n      'rowspan',\n      'rspace',\n      'rquote',\n      'scriptlevel',\n      'scriptminsize',\n      'scriptsizemultiplier',\n      'selection',\n      'separator',\n      'separators',\n      'stretchy',\n      'subscriptshift',\n      'supscriptshift',\n      'symmetric',\n      'voffset',\n      'width',\n      'xmlns'\n    ]);\n    var xml = freeze([\n      'xlink:href',\n      'xml:id',\n      'xlink:title',\n      'xml:space',\n      'xmlns:xlink'\n    ]);\n    var MUSTACHE_EXPR = seal(/\\{\\{[\\w\\W]*|[\\w\\W]*\\}\\}/gm);\n    var ERB_EXPR = seal(/<%[\\w\\W]*|[\\w\\W]*%>/gm);\n    var DATA_ATTR = seal(/^data-[\\-\\w.\\u00B7-\\uFFFF]/);\n    var ARIA_ATTR = seal(/^aria-[\\-\\w]+$/);\n    var IS_ALLOWED_URI = seal(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|cid|xmpp):|[^a-z]|[a-z+.\\-]+(?:[^a-z+.\\-:]|$))/i);\n    var IS_SCRIPT_OR_DATA = seal(/^(?:\\w+script|data):/i);\n    var ATTR_WHITESPACE = seal(/[\\u0000-\\u0020\\u00A0\\u1680\\u180E\\u2000-\\u2029\\u205F\\u3000]/g);\n    var DOCTYPE_NAME = seal(/^html$/i);\n    var getGlobal = function getGlobal() {\n      return typeof window === 'undefined' ? null : window;\n    };\n    var _createTrustedTypesPolicy = function _createTrustedTypesPolicy(trustedTypes, document) {\n      if (_typeof(trustedTypes) !== 'object' || typeof trustedTypes.createPolicy !== 'function') {\n        return null;\n      }\n      var suffix = null;\n      var ATTR_NAME = 'data-tt-policy-suffix';\n      if (document.currentScript && document.currentScript.hasAttribute(ATTR_NAME)) {\n        suffix = document.currentScript.getAttribute(ATTR_NAME);\n      }\n      var policyName = 'dompurify' + (suffix ? '#' + suffix : '');\n      try {\n        return trustedTypes.createPolicy(policyName, {\n          createHTML: function createHTML(html) {\n            return html;\n          }\n        });\n      } catch (_) {\n        console.warn('TrustedTypes policy ' + policyName + ' could not be created.');\n        return null;\n      }\n    };\n    function createDOMPurify() {\n      var window = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : getGlobal();\n      var DOMPurify = function DOMPurify(root) {\n        return createDOMPurify(root);\n      };\n      DOMPurify.version = '2.3.8';\n      DOMPurify.removed = [];\n      if (!window || !window.document || window.document.nodeType !== 9) {\n        DOMPurify.isSupported = false;\n        return DOMPurify;\n      }\n      var originalDocument = window.document;\n      var document = window.document;\n      var DocumentFragment = window.DocumentFragment, HTMLTemplateElement = window.HTMLTemplateElement, Node = window.Node, Element = window.Element, NodeFilter = window.NodeFilter, _window$NamedNodeMap = window.NamedNodeMap, NamedNodeMap = _window$NamedNodeMap === void 0 ? window.NamedNodeMap || window.MozNamedAttrMap : _window$NamedNodeMap, HTMLFormElement = window.HTMLFormElement, DOMParser = window.DOMParser, trustedTypes = window.trustedTypes;\n      var ElementPrototype = Element.prototype;\n      var cloneNode = lookupGetter(ElementPrototype, 'cloneNode');\n      var getNextSibling = lookupGetter(ElementPrototype, 'nextSibling');\n      var getChildNodes = lookupGetter(ElementPrototype, 'childNodes');\n      var getParentNode = lookupGetter(ElementPrototype, 'parentNode');\n      if (typeof HTMLTemplateElement === 'function') {\n        var template = document.createElement('template');\n        if (template.content && template.content.ownerDocument) {\n          document = template.content.ownerDocument;\n        }\n      }\n      var trustedTypesPolicy = _createTrustedTypesPolicy(trustedTypes, originalDocument);\n      var emptyHTML = trustedTypesPolicy ? trustedTypesPolicy.createHTML('') : '';\n      var _document = document, implementation = _document.implementation, createNodeIterator = _document.createNodeIterator, createDocumentFragment = _document.createDocumentFragment, getElementsByTagName = _document.getElementsByTagName;\n      var importNode = originalDocument.importNode;\n      var documentMode = {};\n      try {\n        documentMode = clone(document).documentMode ? document.documentMode : {};\n      } catch (_) {\n      }\n      var hooks = {};\n      DOMPurify.isSupported = typeof getParentNode === 'function' && implementation && typeof implementation.createHTMLDocument !== 'undefined' && documentMode !== 9;\n      var MUSTACHE_EXPR$1 = MUSTACHE_EXPR, ERB_EXPR$1 = ERB_EXPR, DATA_ATTR$1 = DATA_ATTR, ARIA_ATTR$1 = ARIA_ATTR, IS_SCRIPT_OR_DATA$1 = IS_SCRIPT_OR_DATA, ATTR_WHITESPACE$1 = ATTR_WHITESPACE;\n      var IS_ALLOWED_URI$1 = IS_ALLOWED_URI;\n      var ALLOWED_TAGS = null;\n      var DEFAULT_ALLOWED_TAGS = addToSet({}, [].concat(_toConsumableArray(html$1), _toConsumableArray(svg$1), _toConsumableArray(svgFilters), _toConsumableArray(mathMl$1), _toConsumableArray(text)));\n      var ALLOWED_ATTR = null;\n      var DEFAULT_ALLOWED_ATTR = addToSet({}, [].concat(_toConsumableArray(html), _toConsumableArray(svg), _toConsumableArray(mathMl), _toConsumableArray(xml)));\n      var CUSTOM_ELEMENT_HANDLING = Object.seal(Object.create(null, {\n        tagNameCheck: {\n          writable: true,\n          configurable: false,\n          enumerable: true,\n          value: null\n        },\n        attributeNameCheck: {\n          writable: true,\n          configurable: false,\n          enumerable: true,\n          value: null\n        },\n        allowCustomizedBuiltInElements: {\n          writable: true,\n          configurable: false,\n          enumerable: true,\n          value: false\n        }\n      }));\n      var FORBID_TAGS = null;\n      var FORBID_ATTR = null;\n      var ALLOW_ARIA_ATTR = true;\n      var ALLOW_DATA_ATTR = true;\n      var ALLOW_UNKNOWN_PROTOCOLS = false;\n      var SAFE_FOR_TEMPLATES = false;\n      var WHOLE_DOCUMENT = false;\n      var SET_CONFIG = false;\n      var FORCE_BODY = false;\n      var RETURN_DOM = false;\n      var RETURN_DOM_FRAGMENT = false;\n      var RETURN_TRUSTED_TYPE = false;\n      var SANITIZE_DOM = true;\n      var KEEP_CONTENT = true;\n      var IN_PLACE = false;\n      var USE_PROFILES = {};\n      var FORBID_CONTENTS = null;\n      var DEFAULT_FORBID_CONTENTS = addToSet({}, [\n        'annotation-xml',\n        'audio',\n        'colgroup',\n        'desc',\n        'foreignobject',\n        'head',\n        'iframe',\n        'math',\n        'mi',\n        'mn',\n        'mo',\n        'ms',\n        'mtext',\n        'noembed',\n        'noframes',\n        'noscript',\n        'plaintext',\n        'script',\n        'style',\n        'svg',\n        'template',\n        'thead',\n        'title',\n        'video',\n        'xmp'\n      ]);\n      var DATA_URI_TAGS = null;\n      var DEFAULT_DATA_URI_TAGS = addToSet({}, [\n        'audio',\n        'video',\n        'img',\n        'source',\n        'image',\n        'track'\n      ]);\n      var URI_SAFE_ATTRIBUTES = null;\n      var DEFAULT_URI_SAFE_ATTRIBUTES = addToSet({}, [\n        'alt',\n        'class',\n        'for',\n        'id',\n        'label',\n        'name',\n        'pattern',\n        'placeholder',\n        'role',\n        'summary',\n        'title',\n        'value',\n        'style',\n        'xmlns'\n      ]);\n      var MATHML_NAMESPACE = 'http://www.w3.org/1998/Math/MathML';\n      var SVG_NAMESPACE = 'http://www.w3.org/2000/svg';\n      var HTML_NAMESPACE = 'http://www.w3.org/1999/xhtml';\n      var NAMESPACE = HTML_NAMESPACE;\n      var IS_EMPTY_INPUT = false;\n      var PARSER_MEDIA_TYPE;\n      var SUPPORTED_PARSER_MEDIA_TYPES = [\n        'application/xhtml+xml',\n        'text/html'\n      ];\n      var DEFAULT_PARSER_MEDIA_TYPE = 'text/html';\n      var transformCaseFunc;\n      var CONFIG = null;\n      var formElement = document.createElement('form');\n      var isRegexOrFunction = function isRegexOrFunction(testValue) {\n        return testValue instanceof RegExp || testValue instanceof Function;\n      };\n      var _parseConfig = function _parseConfig(cfg) {\n        if (CONFIG && CONFIG === cfg) {\n          return;\n        }\n        if (!cfg || _typeof(cfg) !== 'object') {\n          cfg = {};\n        }\n        cfg = clone(cfg);\n        ALLOWED_TAGS = 'ALLOWED_TAGS' in cfg ? addToSet({}, cfg.ALLOWED_TAGS) : DEFAULT_ALLOWED_TAGS;\n        ALLOWED_ATTR = 'ALLOWED_ATTR' in cfg ? addToSet({}, cfg.ALLOWED_ATTR) : DEFAULT_ALLOWED_ATTR;\n        URI_SAFE_ATTRIBUTES = 'ADD_URI_SAFE_ATTR' in cfg ? addToSet(clone(DEFAULT_URI_SAFE_ATTRIBUTES), cfg.ADD_URI_SAFE_ATTR) : DEFAULT_URI_SAFE_ATTRIBUTES;\n        DATA_URI_TAGS = 'ADD_DATA_URI_TAGS' in cfg ? addToSet(clone(DEFAULT_DATA_URI_TAGS), cfg.ADD_DATA_URI_TAGS) : DEFAULT_DATA_URI_TAGS;\n        FORBID_CONTENTS = 'FORBID_CONTENTS' in cfg ? addToSet({}, cfg.FORBID_CONTENTS) : DEFAULT_FORBID_CONTENTS;\n        FORBID_TAGS = 'FORBID_TAGS' in cfg ? addToSet({}, cfg.FORBID_TAGS) : {};\n        FORBID_ATTR = 'FORBID_ATTR' in cfg ? addToSet({}, cfg.FORBID_ATTR) : {};\n        USE_PROFILES = 'USE_PROFILES' in cfg ? cfg.USE_PROFILES : false;\n        ALLOW_ARIA_ATTR = cfg.ALLOW_ARIA_ATTR !== false;\n        ALLOW_DATA_ATTR = cfg.ALLOW_DATA_ATTR !== false;\n        ALLOW_UNKNOWN_PROTOCOLS = cfg.ALLOW_UNKNOWN_PROTOCOLS || false;\n        SAFE_FOR_TEMPLATES = cfg.SAFE_FOR_TEMPLATES || false;\n        WHOLE_DOCUMENT = cfg.WHOLE_DOCUMENT || false;\n        RETURN_DOM = cfg.RETURN_DOM || false;\n        RETURN_DOM_FRAGMENT = cfg.RETURN_DOM_FRAGMENT || false;\n        RETURN_TRUSTED_TYPE = cfg.RETURN_TRUSTED_TYPE || false;\n        FORCE_BODY = cfg.FORCE_BODY || false;\n        SANITIZE_DOM = cfg.SANITIZE_DOM !== false;\n        KEEP_CONTENT = cfg.KEEP_CONTENT !== false;\n        IN_PLACE = cfg.IN_PLACE || false;\n        IS_ALLOWED_URI$1 = cfg.ALLOWED_URI_REGEXP || IS_ALLOWED_URI$1;\n        NAMESPACE = cfg.NAMESPACE || HTML_NAMESPACE;\n        if (cfg.CUSTOM_ELEMENT_HANDLING && isRegexOrFunction(cfg.CUSTOM_ELEMENT_HANDLING.tagNameCheck)) {\n          CUSTOM_ELEMENT_HANDLING.tagNameCheck = cfg.CUSTOM_ELEMENT_HANDLING.tagNameCheck;\n        }\n        if (cfg.CUSTOM_ELEMENT_HANDLING && isRegexOrFunction(cfg.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)) {\n          CUSTOM_ELEMENT_HANDLING.attributeNameCheck = cfg.CUSTOM_ELEMENT_HANDLING.attributeNameCheck;\n        }\n        if (cfg.CUSTOM_ELEMENT_HANDLING && typeof cfg.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements === 'boolean') {\n          CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements = cfg.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements;\n        }\n        PARSER_MEDIA_TYPE = SUPPORTED_PARSER_MEDIA_TYPES.indexOf(cfg.PARSER_MEDIA_TYPE) === -1 ? PARSER_MEDIA_TYPE = DEFAULT_PARSER_MEDIA_TYPE : PARSER_MEDIA_TYPE = cfg.PARSER_MEDIA_TYPE;\n        transformCaseFunc = PARSER_MEDIA_TYPE === 'application/xhtml+xml' ? function (x) {\n          return x;\n        } : stringToLowerCase;\n        if (SAFE_FOR_TEMPLATES) {\n          ALLOW_DATA_ATTR = false;\n        }\n        if (RETURN_DOM_FRAGMENT) {\n          RETURN_DOM = true;\n        }\n        if (USE_PROFILES) {\n          ALLOWED_TAGS = addToSet({}, _toConsumableArray(text));\n          ALLOWED_ATTR = [];\n          if (USE_PROFILES.html === true) {\n            addToSet(ALLOWED_TAGS, html$1);\n            addToSet(ALLOWED_ATTR, html);\n          }\n          if (USE_PROFILES.svg === true) {\n            addToSet(ALLOWED_TAGS, svg$1);\n            addToSet(ALLOWED_ATTR, svg);\n            addToSet(ALLOWED_ATTR, xml);\n          }\n          if (USE_PROFILES.svgFilters === true) {\n            addToSet(ALLOWED_TAGS, svgFilters);\n            addToSet(ALLOWED_ATTR, svg);\n            addToSet(ALLOWED_ATTR, xml);\n          }\n          if (USE_PROFILES.mathMl === true) {\n            addToSet(ALLOWED_TAGS, mathMl$1);\n            addToSet(ALLOWED_ATTR, mathMl);\n            addToSet(ALLOWED_ATTR, xml);\n          }\n        }\n        if (cfg.ADD_TAGS) {\n          if (ALLOWED_TAGS === DEFAULT_ALLOWED_TAGS) {\n            ALLOWED_TAGS = clone(ALLOWED_TAGS);\n          }\n          addToSet(ALLOWED_TAGS, cfg.ADD_TAGS);\n        }\n        if (cfg.ADD_ATTR) {\n          if (ALLOWED_ATTR === DEFAULT_ALLOWED_ATTR) {\n            ALLOWED_ATTR = clone(ALLOWED_ATTR);\n          }\n          addToSet(ALLOWED_ATTR, cfg.ADD_ATTR);\n        }\n        if (cfg.ADD_URI_SAFE_ATTR) {\n          addToSet(URI_SAFE_ATTRIBUTES, cfg.ADD_URI_SAFE_ATTR);\n        }\n        if (cfg.FORBID_CONTENTS) {\n          if (FORBID_CONTENTS === DEFAULT_FORBID_CONTENTS) {\n            FORBID_CONTENTS = clone(FORBID_CONTENTS);\n          }\n          addToSet(FORBID_CONTENTS, cfg.FORBID_CONTENTS);\n        }\n        if (KEEP_CONTENT) {\n          ALLOWED_TAGS['#text'] = true;\n        }\n        if (WHOLE_DOCUMENT) {\n          addToSet(ALLOWED_TAGS, [\n            'html',\n            'head',\n            'body'\n          ]);\n        }\n        if (ALLOWED_TAGS.table) {\n          addToSet(ALLOWED_TAGS, ['tbody']);\n          delete FORBID_TAGS.tbody;\n        }\n        if (freeze) {\n          freeze(cfg);\n        }\n        CONFIG = cfg;\n      };\n      var MATHML_TEXT_INTEGRATION_POINTS = addToSet({}, [\n        'mi',\n        'mo',\n        'mn',\n        'ms',\n        'mtext'\n      ]);\n      var HTML_INTEGRATION_POINTS = addToSet({}, [\n        'foreignobject',\n        'desc',\n        'title',\n        'annotation-xml'\n      ]);\n      var COMMON_SVG_AND_HTML_ELEMENTS = addToSet({}, [\n        'title',\n        'style',\n        'font',\n        'a',\n        'script'\n      ]);\n      var ALL_SVG_TAGS = addToSet({}, svg$1);\n      addToSet(ALL_SVG_TAGS, svgFilters);\n      addToSet(ALL_SVG_TAGS, svgDisallowed);\n      var ALL_MATHML_TAGS = addToSet({}, mathMl$1);\n      addToSet(ALL_MATHML_TAGS, mathMlDisallowed);\n      var _checkValidNamespace = function _checkValidNamespace(element) {\n        var parent = getParentNode(element);\n        if (!parent || !parent.tagName) {\n          parent = {\n            namespaceURI: HTML_NAMESPACE,\n            tagName: 'template'\n          };\n        }\n        var tagName = stringToLowerCase(element.tagName);\n        var parentTagName = stringToLowerCase(parent.tagName);\n        if (element.namespaceURI === SVG_NAMESPACE) {\n          if (parent.namespaceURI === HTML_NAMESPACE) {\n            return tagName === 'svg';\n          }\n          if (parent.namespaceURI === MATHML_NAMESPACE) {\n            return tagName === 'svg' && (parentTagName === 'annotation-xml' || MATHML_TEXT_INTEGRATION_POINTS[parentTagName]);\n          }\n          return Boolean(ALL_SVG_TAGS[tagName]);\n        }\n        if (element.namespaceURI === MATHML_NAMESPACE) {\n          if (parent.namespaceURI === HTML_NAMESPACE) {\n            return tagName === 'math';\n          }\n          if (parent.namespaceURI === SVG_NAMESPACE) {\n            return tagName === 'math' && HTML_INTEGRATION_POINTS[parentTagName];\n          }\n          return Boolean(ALL_MATHML_TAGS[tagName]);\n        }\n        if (element.namespaceURI === HTML_NAMESPACE) {\n          if (parent.namespaceURI === SVG_NAMESPACE && !HTML_INTEGRATION_POINTS[parentTagName]) {\n            return false;\n          }\n          if (parent.namespaceURI === MATHML_NAMESPACE && !MATHML_TEXT_INTEGRATION_POINTS[parentTagName]) {\n            return false;\n          }\n          return !ALL_MATHML_TAGS[tagName] && (COMMON_SVG_AND_HTML_ELEMENTS[tagName] || !ALL_SVG_TAGS[tagName]);\n        }\n        return false;\n      };\n      var _forceRemove = function _forceRemove(node) {\n        arrayPush(DOMPurify.removed, { element: node });\n        try {\n          node.parentNode.removeChild(node);\n        } catch (_) {\n          try {\n            node.outerHTML = emptyHTML;\n          } catch (_) {\n            node.remove();\n          }\n        }\n      };\n      var _removeAttribute = function _removeAttribute(name, node) {\n        try {\n          arrayPush(DOMPurify.removed, {\n            attribute: node.getAttributeNode(name),\n            from: node\n          });\n        } catch (_) {\n          arrayPush(DOMPurify.removed, {\n            attribute: null,\n            from: node\n          });\n        }\n        node.removeAttribute(name);\n        if (name === 'is' && !ALLOWED_ATTR[name]) {\n          if (RETURN_DOM || RETURN_DOM_FRAGMENT) {\n            try {\n              _forceRemove(node);\n            } catch (_) {\n            }\n          } else {\n            try {\n              node.setAttribute(name, '');\n            } catch (_) {\n            }\n          }\n        }\n      };\n      var _initDocument = function _initDocument(dirty) {\n        var doc;\n        var leadingWhitespace;\n        if (FORCE_BODY) {\n          dirty = '<remove></remove>' + dirty;\n        } else {\n          var matches = stringMatch(dirty, /^[\\r\\n\\t ]+/);\n          leadingWhitespace = matches && matches[0];\n        }\n        if (PARSER_MEDIA_TYPE === 'application/xhtml+xml') {\n          dirty = '<html xmlns=\"http://www.w3.org/1999/xhtml\"><head></head><body>' + dirty + '</body></html>';\n        }\n        var dirtyPayload = trustedTypesPolicy ? trustedTypesPolicy.createHTML(dirty) : dirty;\n        if (NAMESPACE === HTML_NAMESPACE) {\n          try {\n            doc = new DOMParser().parseFromString(dirtyPayload, PARSER_MEDIA_TYPE);\n          } catch (_) {\n          }\n        }\n        if (!doc || !doc.documentElement) {\n          doc = implementation.createDocument(NAMESPACE, 'template', null);\n          try {\n            doc.documentElement.innerHTML = IS_EMPTY_INPUT ? '' : dirtyPayload;\n          } catch (_) {\n          }\n        }\n        var body = doc.body || doc.documentElement;\n        if (dirty && leadingWhitespace) {\n          body.insertBefore(document.createTextNode(leadingWhitespace), body.childNodes[0] || null);\n        }\n        if (NAMESPACE === HTML_NAMESPACE) {\n          return getElementsByTagName.call(doc, WHOLE_DOCUMENT ? 'html' : 'body')[0];\n        }\n        return WHOLE_DOCUMENT ? doc.documentElement : body;\n      };\n      var _createIterator = function _createIterator(root) {\n        return createNodeIterator.call(root.ownerDocument || root, root, NodeFilter.SHOW_ELEMENT | NodeFilter.SHOW_COMMENT | NodeFilter.SHOW_TEXT, null, false);\n      };\n      var _isClobbered = function _isClobbered(elm) {\n        return elm instanceof HTMLFormElement && (typeof elm.nodeName !== 'string' || typeof elm.textContent !== 'string' || typeof elm.removeChild !== 'function' || !(elm.attributes instanceof NamedNodeMap) || typeof elm.removeAttribute !== 'function' || typeof elm.setAttribute !== 'function' || typeof elm.namespaceURI !== 'string' || typeof elm.insertBefore !== 'function');\n      };\n      var _isNode = function _isNode(object) {\n        return _typeof(Node) === 'object' ? object instanceof Node : object && _typeof(object) === 'object' && typeof object.nodeType === 'number' && typeof object.nodeName === 'string';\n      };\n      var _executeHook = function _executeHook(entryPoint, currentNode, data) {\n        if (!hooks[entryPoint]) {\n          return;\n        }\n        arrayForEach(hooks[entryPoint], function (hook) {\n          hook.call(DOMPurify, currentNode, data, CONFIG);\n        });\n      };\n      var _sanitizeElements = function _sanitizeElements(currentNode) {\n        var content;\n        _executeHook('beforeSanitizeElements', currentNode, null);\n        if (_isClobbered(currentNode)) {\n          _forceRemove(currentNode);\n          return true;\n        }\n        if (regExpTest(/[\\u0080-\\uFFFF]/, currentNode.nodeName)) {\n          _forceRemove(currentNode);\n          return true;\n        }\n        var tagName = transformCaseFunc(currentNode.nodeName);\n        _executeHook('uponSanitizeElement', currentNode, {\n          tagName: tagName,\n          allowedTags: ALLOWED_TAGS\n        });\n        if (currentNode.hasChildNodes() && !_isNode(currentNode.firstElementChild) && (!_isNode(currentNode.content) || !_isNode(currentNode.content.firstElementChild)) && regExpTest(/<[/\\w]/g, currentNode.innerHTML) && regExpTest(/<[/\\w]/g, currentNode.textContent)) {\n          _forceRemove(currentNode);\n          return true;\n        }\n        if (tagName === 'select' && regExpTest(/<template/i, currentNode.innerHTML)) {\n          _forceRemove(currentNode);\n          return true;\n        }\n        if (!ALLOWED_TAGS[tagName] || FORBID_TAGS[tagName]) {\n          if (!FORBID_TAGS[tagName] && _basicCustomElementTest(tagName)) {\n            if (CUSTOM_ELEMENT_HANDLING.tagNameCheck instanceof RegExp && regExpTest(CUSTOM_ELEMENT_HANDLING.tagNameCheck, tagName))\n              return false;\n            if (CUSTOM_ELEMENT_HANDLING.tagNameCheck instanceof Function && CUSTOM_ELEMENT_HANDLING.tagNameCheck(tagName))\n              return false;\n          }\n          if (KEEP_CONTENT && !FORBID_CONTENTS[tagName]) {\n            var parentNode = getParentNode(currentNode) || currentNode.parentNode;\n            var childNodes = getChildNodes(currentNode) || currentNode.childNodes;\n            if (childNodes && parentNode) {\n              var childCount = childNodes.length;\n              for (var i = childCount - 1; i >= 0; --i) {\n                parentNode.insertBefore(cloneNode(childNodes[i], true), getNextSibling(currentNode));\n              }\n            }\n          }\n          _forceRemove(currentNode);\n          return true;\n        }\n        if (currentNode instanceof Element && !_checkValidNamespace(currentNode)) {\n          _forceRemove(currentNode);\n          return true;\n        }\n        if ((tagName === 'noscript' || tagName === 'noembed') && regExpTest(/<\\/no(script|embed)/i, currentNode.innerHTML)) {\n          _forceRemove(currentNode);\n          return true;\n        }\n        if (SAFE_FOR_TEMPLATES && currentNode.nodeType === 3) {\n          content = currentNode.textContent;\n          content = stringReplace(content, MUSTACHE_EXPR$1, ' ');\n          content = stringReplace(content, ERB_EXPR$1, ' ');\n          if (currentNode.textContent !== content) {\n            arrayPush(DOMPurify.removed, { element: currentNode.cloneNode() });\n            currentNode.textContent = content;\n          }\n        }\n        _executeHook('afterSanitizeElements', currentNode, null);\n        return false;\n      };\n      var _isValidAttribute = function _isValidAttribute(lcTag, lcName, value) {\n        if (SANITIZE_DOM && (lcName === 'id' || lcName === 'name') && (value in document || value in formElement)) {\n          return false;\n        }\n        if (ALLOW_DATA_ATTR && !FORBID_ATTR[lcName] && regExpTest(DATA_ATTR$1, lcName));\n        else if (ALLOW_ARIA_ATTR && regExpTest(ARIA_ATTR$1, lcName));\n        else if (!ALLOWED_ATTR[lcName] || FORBID_ATTR[lcName]) {\n          if (_basicCustomElementTest(lcTag) && (CUSTOM_ELEMENT_HANDLING.tagNameCheck instanceof RegExp && regExpTest(CUSTOM_ELEMENT_HANDLING.tagNameCheck, lcTag) || CUSTOM_ELEMENT_HANDLING.tagNameCheck instanceof Function && CUSTOM_ELEMENT_HANDLING.tagNameCheck(lcTag)) && (CUSTOM_ELEMENT_HANDLING.attributeNameCheck instanceof RegExp && regExpTest(CUSTOM_ELEMENT_HANDLING.attributeNameCheck, lcName) || CUSTOM_ELEMENT_HANDLING.attributeNameCheck instanceof Function && CUSTOM_ELEMENT_HANDLING.attributeNameCheck(lcName)) || lcName === 'is' && CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements && (CUSTOM_ELEMENT_HANDLING.tagNameCheck instanceof RegExp && regExpTest(CUSTOM_ELEMENT_HANDLING.tagNameCheck, value) || CUSTOM_ELEMENT_HANDLING.tagNameCheck instanceof Function && CUSTOM_ELEMENT_HANDLING.tagNameCheck(value)));\n          else {\n            return false;\n          }\n        } else if (URI_SAFE_ATTRIBUTES[lcName]);\n        else if (regExpTest(IS_ALLOWED_URI$1, stringReplace(value, ATTR_WHITESPACE$1, '')));\n        else if ((lcName === 'src' || lcName === 'xlink:href' || lcName === 'href') && lcTag !== 'script' && stringIndexOf(value, 'data:') === 0 && DATA_URI_TAGS[lcTag]);\n        else if (ALLOW_UNKNOWN_PROTOCOLS && !regExpTest(IS_SCRIPT_OR_DATA$1, stringReplace(value, ATTR_WHITESPACE$1, '')));\n        else if (!value);\n        else {\n          return false;\n        }\n        return true;\n      };\n      var _basicCustomElementTest = function _basicCustomElementTest(tagName) {\n        return tagName.indexOf('-') > 0;\n      };\n      var _sanitizeAttributes = function _sanitizeAttributes(currentNode) {\n        var attr;\n        var value;\n        var lcName;\n        var l;\n        _executeHook('beforeSanitizeAttributes', currentNode, null);\n        var attributes = currentNode.attributes;\n        if (!attributes) {\n          return;\n        }\n        var hookEvent = {\n          attrName: '',\n          attrValue: '',\n          keepAttr: true,\n          allowedAttributes: ALLOWED_ATTR\n        };\n        l = attributes.length;\n        while (l--) {\n          attr = attributes[l];\n          var _attr = attr, name = _attr.name, namespaceURI = _attr.namespaceURI;\n          value = name === 'value' ? attr.value : stringTrim(attr.value);\n          lcName = transformCaseFunc(name);\n          var initValue = value;\n          hookEvent.attrName = lcName;\n          hookEvent.attrValue = value;\n          hookEvent.keepAttr = true;\n          hookEvent.forceKeepAttr = undefined;\n          _executeHook('uponSanitizeAttribute', currentNode, hookEvent);\n          value = hookEvent.attrValue;\n          if (hookEvent.forceKeepAttr) {\n            continue;\n          }\n          if (!hookEvent.keepAttr) {\n            _removeAttribute(name, currentNode);\n            continue;\n          }\n          if (regExpTest(/\\/>/i, value)) {\n            _removeAttribute(name, currentNode);\n            continue;\n          }\n          if (SAFE_FOR_TEMPLATES) {\n            value = stringReplace(value, MUSTACHE_EXPR$1, ' ');\n            value = stringReplace(value, ERB_EXPR$1, ' ');\n          }\n          var lcTag = transformCaseFunc(currentNode.nodeName);\n          if (!_isValidAttribute(lcTag, lcName, value)) {\n            _removeAttribute(name, currentNode);\n            continue;\n          }\n          if (value !== initValue) {\n            try {\n              if (namespaceURI) {\n                currentNode.setAttributeNS(namespaceURI, name, value);\n              } else {\n                currentNode.setAttribute(name, value);\n              }\n            } catch (_) {\n              _removeAttribute(name, currentNode);\n            }\n          }\n        }\n        _executeHook('afterSanitizeAttributes', currentNode, null);\n      };\n      var _sanitizeShadowDOM = function _sanitizeShadowDOM(fragment) {\n        var shadowNode;\n        var shadowIterator = _createIterator(fragment);\n        _executeHook('beforeSanitizeShadowDOM', fragment, null);\n        while (shadowNode = shadowIterator.nextNode()) {\n          _executeHook('uponSanitizeShadowNode', shadowNode, null);\n          if (_sanitizeElements(shadowNode)) {\n            continue;\n          }\n          if (shadowNode.content instanceof DocumentFragment) {\n            _sanitizeShadowDOM(shadowNode.content);\n          }\n          _sanitizeAttributes(shadowNode);\n        }\n        _executeHook('afterSanitizeShadowDOM', fragment, null);\n      };\n      DOMPurify.sanitize = function (dirty, cfg) {\n        var body;\n        var importedNode;\n        var currentNode;\n        var oldNode;\n        var returnNode;\n        IS_EMPTY_INPUT = !dirty;\n        if (IS_EMPTY_INPUT) {\n          dirty = '<!-->';\n        }\n        if (typeof dirty !== 'string' && !_isNode(dirty)) {\n          if (typeof dirty.toString !== 'function') {\n            throw typeErrorCreate('toString is not a function');\n          } else {\n            dirty = dirty.toString();\n            if (typeof dirty !== 'string') {\n              throw typeErrorCreate('dirty is not a string, aborting');\n            }\n          }\n        }\n        if (!DOMPurify.isSupported) {\n          if (_typeof(window.toStaticHTML) === 'object' || typeof window.toStaticHTML === 'function') {\n            if (typeof dirty === 'string') {\n              return window.toStaticHTML(dirty);\n            }\n            if (_isNode(dirty)) {\n              return window.toStaticHTML(dirty.outerHTML);\n            }\n          }\n          return dirty;\n        }\n        if (!SET_CONFIG) {\n          _parseConfig(cfg);\n        }\n        DOMPurify.removed = [];\n        if (typeof dirty === 'string') {\n          IN_PLACE = false;\n        }\n        if (IN_PLACE) {\n          if (dirty.nodeName) {\n            var tagName = transformCaseFunc(dirty.nodeName);\n            if (!ALLOWED_TAGS[tagName] || FORBID_TAGS[tagName]) {\n              throw typeErrorCreate('root node is forbidden and cannot be sanitized in-place');\n            }\n          }\n        } else if (dirty instanceof Node) {\n          body = _initDocument('<!---->');\n          importedNode = body.ownerDocument.importNode(dirty, true);\n          if (importedNode.nodeType === 1 && importedNode.nodeName === 'BODY') {\n            body = importedNode;\n          } else if (importedNode.nodeName === 'HTML') {\n            body = importedNode;\n          } else {\n            body.appendChild(importedNode);\n          }\n        } else {\n          if (!RETURN_DOM && !SAFE_FOR_TEMPLATES && !WHOLE_DOCUMENT && dirty.indexOf('<') === -1) {\n            return trustedTypesPolicy && RETURN_TRUSTED_TYPE ? trustedTypesPolicy.createHTML(dirty) : dirty;\n          }\n          body = _initDocument(dirty);\n          if (!body) {\n            return RETURN_DOM ? null : RETURN_TRUSTED_TYPE ? emptyHTML : '';\n          }\n        }\n        if (body && FORCE_BODY) {\n          _forceRemove(body.firstChild);\n        }\n        var nodeIterator = _createIterator(IN_PLACE ? dirty : body);\n        while (currentNode = nodeIterator.nextNode()) {\n          if (currentNode.nodeType === 3 && currentNode === oldNode) {\n            continue;\n          }\n          if (_sanitizeElements(currentNode)) {\n            continue;\n          }\n          if (currentNode.content instanceof DocumentFragment) {\n            _sanitizeShadowDOM(currentNode.content);\n          }\n          _sanitizeAttributes(currentNode);\n          oldNode = currentNode;\n        }\n        oldNode = null;\n        if (IN_PLACE) {\n          return dirty;\n        }\n        if (RETURN_DOM) {\n          if (RETURN_DOM_FRAGMENT) {\n            returnNode = createDocumentFragment.call(body.ownerDocument);\n            while (body.firstChild) {\n              returnNode.appendChild(body.firstChild);\n            }\n          } else {\n            returnNode = body;\n          }\n          if (ALLOWED_ATTR.shadowroot) {\n            returnNode = importNode.call(originalDocument, returnNode, true);\n          }\n          return returnNode;\n        }\n        var serializedHTML = WHOLE_DOCUMENT ? body.outerHTML : body.innerHTML;\n        if (WHOLE_DOCUMENT && ALLOWED_TAGS['!doctype'] && body.ownerDocument && body.ownerDocument.doctype && body.ownerDocument.doctype.name && regExpTest(DOCTYPE_NAME, body.ownerDocument.doctype.name)) {\n          serializedHTML = '<!DOCTYPE ' + body.ownerDocument.doctype.name + '>\\n' + serializedHTML;\n        }\n        if (SAFE_FOR_TEMPLATES) {\n          serializedHTML = stringReplace(serializedHTML, MUSTACHE_EXPR$1, ' ');\n          serializedHTML = stringReplace(serializedHTML, ERB_EXPR$1, ' ');\n        }\n        return trustedTypesPolicy && RETURN_TRUSTED_TYPE ? trustedTypesPolicy.createHTML(serializedHTML) : serializedHTML;\n      };\n      DOMPurify.setConfig = function (cfg) {\n        _parseConfig(cfg);\n        SET_CONFIG = true;\n      };\n      DOMPurify.clearConfig = function () {\n        CONFIG = null;\n        SET_CONFIG = false;\n      };\n      DOMPurify.isValidAttribute = function (tag, attr, value) {\n        if (!CONFIG) {\n          _parseConfig({});\n        }\n        var lcTag = transformCaseFunc(tag);\n        var lcName = transformCaseFunc(attr);\n        return _isValidAttribute(lcTag, lcName, value);\n      };\n      DOMPurify.addHook = function (entryPoint, hookFunction) {\n        if (typeof hookFunction !== 'function') {\n          return;\n        }\n        hooks[entryPoint] = hooks[entryPoint] || [];\n        arrayPush(hooks[entryPoint], hookFunction);\n      };\n      DOMPurify.removeHook = function (entryPoint) {\n        if (hooks[entryPoint]) {\n          return arrayPop(hooks[entryPoint]);\n        }\n      };\n      DOMPurify.removeHooks = function (entryPoint) {\n        if (hooks[entryPoint]) {\n          hooks[entryPoint] = [];\n        }\n      };\n      DOMPurify.removeAllHooks = function () {\n        hooks = {};\n      };\n      return DOMPurify;\n    }\n    var purify = createDOMPurify();\n\n    const explode$1 = Tools.explode;\n    const create$7 = () => {\n      const filters = {};\n      const addFilter = (name, callback) => {\n        each$e(explode$1(name), name => {\n          if (!has$2(filters, name)) {\n            filters[name] = {\n              name,\n              callbacks: []\n            };\n          }\n          filters[name].callbacks.push(callback);\n        });\n      };\n      const getFilters = () => values(filters);\n      const removeFilter = (name, callback) => {\n        each$e(explode$1(name), name => {\n          if (has$2(filters, name)) {\n            if (isNonNullable(callback)) {\n              const filter = filters[name];\n              const newCallbacks = filter$5(filter.callbacks, c => c !== callback);\n              if (newCallbacks.length > 0) {\n                filter.callbacks = newCallbacks;\n              } else {\n                delete filters[name];\n              }\n            } else {\n              delete filters[name];\n            }\n          }\n        });\n      };\n      return {\n        addFilter,\n        getFilters,\n        removeFilter\n      };\n    };\n\n    const removeAttrs = (node, names) => {\n      each$e(names, name => {\n        node.attr(name, null);\n      });\n    };\n    const addFontToSpansFilter = (domParser, styles, fontSizes) => {\n      domParser.addNodeFilter('font', nodes => {\n        each$e(nodes, node => {\n          const props = styles.parse(node.attr('style'));\n          const color = node.attr('color');\n          const face = node.attr('face');\n          const size = node.attr('size');\n          if (color) {\n            props.color = color;\n          }\n          if (face) {\n            props['font-family'] = face;\n          }\n          if (size) {\n            toInt(size).each(num => {\n              props['font-size'] = fontSizes[num - 1];\n            });\n          }\n          node.name = 'span';\n          node.attr('style', styles.serialize(props));\n          removeAttrs(node, [\n            'color',\n            'face',\n            'size'\n          ]);\n        });\n      });\n    };\n    const addStrikeFilter = (domParser, schema, styles) => {\n      domParser.addNodeFilter('strike', nodes => {\n        const convertToSTag = schema.type !== 'html4';\n        each$e(nodes, node => {\n          if (convertToSTag) {\n            node.name = 's';\n          } else {\n            const props = styles.parse(node.attr('style'));\n            props['text-decoration'] = 'line-through';\n            node.name = 'span';\n            node.attr('style', styles.serialize(props));\n          }\n        });\n      });\n    };\n    const addFilters = (domParser, settings, schema) => {\n      var _a;\n      const styles = Styles();\n      if (settings.convert_fonts_to_spans) {\n        addFontToSpansFilter(domParser, styles, Tools.explode((_a = settings.font_size_legacy_values) !== null && _a !== void 0 ? _a : ''));\n      }\n      addStrikeFilter(domParser, schema, styles);\n    };\n    const register$5 = (domParser, settings, schema) => {\n      if (settings.inline_styles) {\n        addFilters(domParser, settings, schema);\n      }\n    };\n\n    const blobUriToBlob = url => fetch(url).then(res => res.ok ? res.blob() : Promise.reject()).catch(() => Promise.reject(`Cannot convert ${ url } to Blob. Resource might not exist or is inaccessible.`));\n    const extractBase64Data = data => {\n      const matches = /([a-z0-9+\\/=\\s]+)/i.exec(data);\n      return matches ? matches[1] : '';\n    };\n    const parseDataUri = uri => {\n      const [type, ...rest] = uri.split(',');\n      const data = rest.join(',');\n      const matches = /data:([^/]+\\/[^;]+)(;.+)?/.exec(type);\n      if (matches) {\n        const base64Encoded = matches[2] === ';base64';\n        const extractedData = base64Encoded ? extractBase64Data(data) : decodeURIComponent(data);\n        return Optional.some({\n          type: matches[1],\n          data: extractedData,\n          base64Encoded\n        });\n      } else {\n        return Optional.none();\n      }\n    };\n    const buildBlob = (type, data, base64Encoded = true) => {\n      let str = data;\n      if (base64Encoded) {\n        try {\n          str = atob(data);\n        } catch (e) {\n          return Optional.none();\n        }\n      }\n      const arr = new Uint8Array(str.length);\n      for (let i = 0; i < arr.length; i++) {\n        arr[i] = str.charCodeAt(i);\n      }\n      return Optional.some(new Blob([arr], { type }));\n    };\n    const dataUriToBlob = uri => {\n      return new Promise((resolve, reject) => {\n        parseDataUri(uri).bind(({type, data, base64Encoded}) => buildBlob(type, data, base64Encoded)).fold(() => reject('Invalid data URI'), resolve);\n      });\n    };\n    const uriToBlob = url => {\n      if (startsWith(url, 'blob:')) {\n        return blobUriToBlob(url);\n      } else if (startsWith(url, 'data:')) {\n        return dataUriToBlob(url);\n      } else {\n        return Promise.reject('Unknown URI format');\n      }\n    };\n    const blobToDataUri = blob => {\n      return new Promise((resolve, reject) => {\n        const reader = new FileReader();\n        reader.onloadend = () => {\n          resolve(reader.result);\n        };\n        reader.onerror = () => {\n          var _a;\n          reject((_a = reader.error) === null || _a === void 0 ? void 0 : _a.message);\n        };\n        reader.readAsDataURL(blob);\n      });\n    };\n\n    let count$1 = 0;\n    const uniqueId$1 = prefix => {\n      return (prefix || 'blobid') + count$1++;\n    };\n    const processDataUri = (dataUri, base64Only, generateBlobInfo) => {\n      return parseDataUri(dataUri).bind(({data, type, base64Encoded}) => {\n        if (base64Only && !base64Encoded) {\n          return Optional.none();\n        } else {\n          const base64 = base64Encoded ? data : btoa(data);\n          return generateBlobInfo(base64, type);\n        }\n      });\n    };\n    const createBlobInfo$1 = (blobCache, blob, base64) => {\n      const blobInfo = blobCache.create(uniqueId$1(), blob, base64);\n      blobCache.add(blobInfo);\n      return blobInfo;\n    };\n    const dataUriToBlobInfo = (blobCache, dataUri, base64Only = false) => {\n      return processDataUri(dataUri, base64Only, (base64, type) => Optional.from(blobCache.getByData(base64, type)).orThunk(() => buildBlob(type, base64).map(blob => createBlobInfo$1(blobCache, blob, base64))));\n    };\n    const imageToBlobInfo = (blobCache, imageSrc) => {\n      const invalidDataUri = () => Promise.reject('Invalid data URI');\n      if (startsWith(imageSrc, 'blob:')) {\n        const blobInfo = blobCache.getByUri(imageSrc);\n        if (isNonNullable(blobInfo)) {\n          return Promise.resolve(blobInfo);\n        } else {\n          return uriToBlob(imageSrc).then(blob => {\n            return blobToDataUri(blob).then(dataUri => {\n              return processDataUri(dataUri, false, base64 => {\n                return Optional.some(createBlobInfo$1(blobCache, blob, base64));\n              }).getOrThunk(invalidDataUri);\n            });\n          });\n        }\n      } else if (startsWith(imageSrc, 'data:')) {\n        return dataUriToBlobInfo(blobCache, imageSrc).fold(invalidDataUri, blobInfo => Promise.resolve(blobInfo));\n      } else {\n        return Promise.reject('Unknown image data format');\n      }\n    };\n\n    const isBogusImage = img => isNonNullable(img.attr('data-mce-bogus'));\n    const isInternalImageSource = img => img.attr('src') === Env.transparentSrc || isNonNullable(img.attr('data-mce-placeholder'));\n    const registerBase64ImageFilter = (parser, settings) => {\n      const {blob_cache: blobCache} = settings;\n      if (blobCache) {\n        const processImage = img => {\n          const inputSrc = img.attr('src');\n          if (isInternalImageSource(img) || isBogusImage(img) || isNullable(inputSrc)) {\n            return;\n          }\n          dataUriToBlobInfo(blobCache, inputSrc, true).each(blobInfo => {\n            img.attr('src', blobInfo.blobUri());\n          });\n        };\n        parser.addAttributeFilter('src', nodes => each$e(nodes, processImage));\n      }\n    };\n    const register$4 = (parser, settings) => {\n      const schema = parser.schema;\n      if (settings.remove_trailing_brs) {\n        parser.addNodeFilter('br', (nodes, _, args) => {\n          const blockElements = Tools.extend({}, schema.getBlockElements());\n          const nonEmptyElements = schema.getNonEmptyElements();\n          const whitespaceElements = schema.getWhitespaceElements();\n          blockElements.body = 1;\n          for (let i = 0, l = nodes.length; i < l; i++) {\n            let node = nodes[i];\n            let parent = node.parent;\n            if (parent && blockElements[parent.name] && node === parent.lastChild) {\n              let prev = node.prev;\n              while (prev) {\n                const prevName = prev.name;\n                if (prevName !== 'span' || prev.attr('data-mce-type') !== 'bookmark') {\n                  if (prevName === 'br') {\n                    node = null;\n                  }\n                  break;\n                }\n                prev = prev.prev;\n              }\n              if (node) {\n                node.remove();\n                if (isEmpty(schema, nonEmptyElements, whitespaceElements, parent)) {\n                  const elementRule = schema.getElementRule(parent.name);\n                  if (elementRule) {\n                    if (elementRule.removeEmpty) {\n                      parent.remove();\n                    } else if (elementRule.paddEmpty) {\n                      paddEmptyNode(settings, args, blockElements, parent);\n                    }\n                  }\n                }\n              }\n            } else {\n              let lastParent = node;\n              while (parent && parent.firstChild === lastParent && parent.lastChild === lastParent) {\n                lastParent = parent;\n                if (blockElements[parent.name]) {\n                  break;\n                }\n                parent = parent.parent;\n              }\n              if (lastParent === parent) {\n                const textNode = new AstNode('#text', 3);\n                textNode.value = nbsp;\n                node.replace(textNode);\n              }\n            }\n          }\n        });\n      }\n      parser.addAttributeFilter('href', nodes => {\n        let i = nodes.length;\n        const appendRel = rel => {\n          const parts = rel.split(' ').filter(p => p.length > 0);\n          return parts.concat(['noopener']).sort().join(' ');\n        };\n        const addNoOpener = rel => {\n          const newRel = rel ? Tools.trim(rel) : '';\n          if (!/\\b(noopener)\\b/g.test(newRel)) {\n            return appendRel(newRel);\n          } else {\n            return newRel;\n          }\n        };\n        if (!settings.allow_unsafe_link_target) {\n          while (i--) {\n            const node = nodes[i];\n            if (node.name === 'a' && node.attr('target') === '_blank') {\n              node.attr('rel', addNoOpener(node.attr('rel')));\n            }\n          }\n        }\n      });\n      if (!settings.allow_html_in_named_anchor) {\n        parser.addAttributeFilter('id,name', nodes => {\n          let i = nodes.length, sibling, prevSibling, parent, node;\n          while (i--) {\n            node = nodes[i];\n            if (node.name === 'a' && node.firstChild && !node.attr('href')) {\n              parent = node.parent;\n              sibling = node.lastChild;\n              while (sibling && parent) {\n                prevSibling = sibling.prev;\n                parent.insert(sibling, node);\n                sibling = prevSibling;\n              }\n            }\n          }\n        });\n      }\n      if (settings.fix_list_elements) {\n        parser.addNodeFilter('ul,ol', nodes => {\n          let i = nodes.length, node, parentNode;\n          while (i--) {\n            node = nodes[i];\n            parentNode = node.parent;\n            if (parentNode && (parentNode.name === 'ul' || parentNode.name === 'ol')) {\n              if (node.prev && node.prev.name === 'li') {\n                node.prev.append(node);\n              } else {\n                const li = new AstNode('li', 1);\n                li.attr('style', 'list-style-type: none');\n                node.wrap(li);\n              }\n            }\n          }\n        });\n      }\n      const validClasses = schema.getValidClasses();\n      if (settings.validate && validClasses) {\n        parser.addAttributeFilter('class', nodes => {\n          var _a;\n          let i = nodes.length;\n          while (i--) {\n            const node = nodes[i];\n            const clazz = (_a = node.attr('class')) !== null && _a !== void 0 ? _a : '';\n            const classList = Tools.explode(clazz, ' ');\n            let classValue = '';\n            for (let ci = 0; ci < classList.length; ci++) {\n              const className = classList[ci];\n              let valid = false;\n              let validClassesMap = validClasses['*'];\n              if (validClassesMap && validClassesMap[className]) {\n                valid = true;\n              }\n              validClassesMap = validClasses[node.name];\n              if (!valid && validClassesMap && validClassesMap[className]) {\n                valid = true;\n              }\n              if (valid) {\n                if (classValue) {\n                  classValue += ' ';\n                }\n                classValue += className;\n              }\n            }\n            if (!classValue.length) {\n              classValue = null;\n            }\n            node.attr('class', classValue);\n          }\n        });\n      }\n      registerBase64ImageFilter(parser, settings);\n    };\n\n    const each$4 = Tools.each, trim = Tools.trim;\n    const queryParts = [\n      'source',\n      'protocol',\n      'authority',\n      'userInfo',\n      'user',\n      'password',\n      'host',\n      'port',\n      'relative',\n      'path',\n      'directory',\n      'file',\n      'query',\n      'anchor'\n    ];\n    const DEFAULT_PORTS = {\n      ftp: 21,\n      http: 80,\n      https: 443,\n      mailto: 25\n    };\n    const safeSvgDataUrlElements = [\n      'img',\n      'video'\n    ];\n    const blockSvgDataUris = (allowSvgDataUrls, tagName) => {\n      if (isNonNullable(allowSvgDataUrls)) {\n        return !allowSvgDataUrls;\n      } else {\n        return isNonNullable(tagName) ? !contains$2(safeSvgDataUrlElements, tagName) : true;\n      }\n    };\n    const decodeUri = encodedUri => {\n      try {\n        return decodeURIComponent(encodedUri);\n      } catch (ex) {\n        return unescape(encodedUri);\n      }\n    };\n    const isInvalidUri = (settings, uri, tagName) => {\n      const decodedUri = decodeUri(uri);\n      if (settings.allow_script_urls) {\n        return false;\n      } else if (/((java|vb)script|mhtml):/i.test(decodedUri)) {\n        return true;\n      } else if (settings.allow_html_data_urls) {\n        return false;\n      } else if (/^data:image\\//i.test(decodedUri)) {\n        return blockSvgDataUris(settings.allow_svg_data_urls, tagName) && /^data:image\\/svg\\+xml/i.test(decodedUri);\n      } else {\n        return /^data:/i.test(decodedUri);\n      }\n    };\n    class URI {\n      constructor(url, settings = {}) {\n        this.path = '';\n        this.directory = '';\n        url = trim(url);\n        this.settings = settings;\n        const baseUri = settings.base_uri;\n        const self = this;\n        if (/^([\\w\\-]+):([^\\/]{2})/i.test(url) || /^\\s*#/.test(url)) {\n          self.source = url;\n          return;\n        }\n        const isProtocolRelative = url.indexOf('//') === 0;\n        if (url.indexOf('/') === 0 && !isProtocolRelative) {\n          url = (baseUri ? baseUri.protocol || 'http' : 'http') + '://mce_host' + url;\n        }\n        if (!/^[\\w\\-]*:?\\/\\//.test(url)) {\n          const baseUrl = baseUri ? baseUri.path : new URI(document.location.href).directory;\n          if ((baseUri === null || baseUri === void 0 ? void 0 : baseUri.protocol) === '') {\n            url = '//mce_host' + self.toAbsPath(baseUrl, url);\n          } else {\n            const match = /([^#?]*)([#?]?.*)/.exec(url);\n            if (match) {\n              url = (baseUri && baseUri.protocol || 'http') + '://mce_host' + self.toAbsPath(baseUrl, match[1]) + match[2];\n            }\n          }\n        }\n        url = url.replace(/@@/g, '(mce_at)');\n        const urlMatch = /^(?:(?![^:@]+:[^:@\\/]*@)([^:\\/?#.]+):)?(?:\\/\\/)?((?:(([^:@\\/]*):?([^:@\\/]*))?@)?(\\[[a-zA-Z0-9:.%]+\\]|[^:\\/?#]*)(?::(\\d*))?)(((\\/(?:[^?#](?![^?#\\/]*\\.[^?#\\/.]+(?:[?#]|$)))*\\/?)?([^?#\\/]*))(?:\\?([^#]*))?(?:#(.*))?)/.exec(url);\n        if (urlMatch) {\n          each$4(queryParts, (v, i) => {\n            let part = urlMatch[i];\n            if (part) {\n              part = part.replace(/\\(mce_at\\)/g, '@@');\n            }\n            self[v] = part;\n          });\n        }\n        if (baseUri) {\n          if (!self.protocol) {\n            self.protocol = baseUri.protocol;\n          }\n          if (!self.userInfo) {\n            self.userInfo = baseUri.userInfo;\n          }\n          if (!self.port && self.host === 'mce_host') {\n            self.port = baseUri.port;\n          }\n          if (!self.host || self.host === 'mce_host') {\n            self.host = baseUri.host;\n          }\n          self.source = '';\n        }\n        if (isProtocolRelative) {\n          self.protocol = '';\n        }\n      }\n      static parseDataUri(uri) {\n        let type;\n        const uriComponents = decodeURIComponent(uri).split(',');\n        const matches = /data:([^;]+)/.exec(uriComponents[0]);\n        if (matches) {\n          type = matches[1];\n        }\n        return {\n          type,\n          data: uriComponents[1]\n        };\n      }\n      static isDomSafe(uri, context, options = {}) {\n        if (options.allow_script_urls) {\n          return true;\n        } else {\n          const decodedUri = Entities.decode(uri).replace(/[\\s\\u0000-\\u001F]+/g, '');\n          return !isInvalidUri(options, decodedUri, context);\n        }\n      }\n      static getDocumentBaseUrl(loc) {\n        var _a;\n        let baseUrl;\n        if (loc.protocol.indexOf('http') !== 0 && loc.protocol !== 'file:') {\n          baseUrl = (_a = loc.href) !== null && _a !== void 0 ? _a : '';\n        } else {\n          baseUrl = loc.protocol + '//' + loc.host + loc.pathname;\n        }\n        if (/^[^:]+:\\/\\/\\/?[^\\/]+\\//.test(baseUrl)) {\n          baseUrl = baseUrl.replace(/[\\?#].*$/, '').replace(/[\\/\\\\][^\\/]+$/, '');\n          if (!/[\\/\\\\]$/.test(baseUrl)) {\n            baseUrl += '/';\n          }\n        }\n        return baseUrl;\n      }\n      setPath(path) {\n        const pathMatch = /^(.*?)\\/?(\\w+)?$/.exec(path);\n        if (pathMatch) {\n          this.path = pathMatch[0];\n          this.directory = pathMatch[1];\n          this.file = pathMatch[2];\n        }\n        this.source = '';\n        this.getURI();\n      }\n      toRelative(uri) {\n        if (uri === './') {\n          return uri;\n        }\n        const relativeUri = new URI(uri, { base_uri: this });\n        if (relativeUri.host !== 'mce_host' && this.host !== relativeUri.host && relativeUri.host || this.port !== relativeUri.port || this.protocol !== relativeUri.protocol && relativeUri.protocol !== '') {\n          return relativeUri.getURI();\n        }\n        const tu = this.getURI(), uu = relativeUri.getURI();\n        if (tu === uu || tu.charAt(tu.length - 1) === '/' && tu.substr(0, tu.length - 1) === uu) {\n          return tu;\n        }\n        let output = this.toRelPath(this.path, relativeUri.path);\n        if (relativeUri.query) {\n          output += '?' + relativeUri.query;\n        }\n        if (relativeUri.anchor) {\n          output += '#' + relativeUri.anchor;\n        }\n        return output;\n      }\n      toAbsolute(uri, noHost) {\n        const absoluteUri = new URI(uri, { base_uri: this });\n        return absoluteUri.getURI(noHost && this.isSameOrigin(absoluteUri));\n      }\n      isSameOrigin(uri) {\n        if (this.host == uri.host && this.protocol == uri.protocol) {\n          if (this.port == uri.port) {\n            return true;\n          }\n          const defaultPort = this.protocol ? DEFAULT_PORTS[this.protocol] : null;\n          if (defaultPort && (this.port || defaultPort) == (uri.port || defaultPort)) {\n            return true;\n          }\n        }\n        return false;\n      }\n      toRelPath(base, path) {\n        let breakPoint = 0, out = '', i, l;\n        const normalizedBase = base.substring(0, base.lastIndexOf('/')).split('/');\n        const items = path.split('/');\n        if (normalizedBase.length >= items.length) {\n          for (i = 0, l = normalizedBase.length; i < l; i++) {\n            if (i >= items.length || normalizedBase[i] !== items[i]) {\n              breakPoint = i + 1;\n              break;\n            }\n          }\n        }\n        if (normalizedBase.length < items.length) {\n          for (i = 0, l = items.length; i < l; i++) {\n            if (i >= normalizedBase.length || normalizedBase[i] !== items[i]) {\n              breakPoint = i + 1;\n              break;\n            }\n          }\n        }\n        if (breakPoint === 1) {\n          return path;\n        }\n        for (i = 0, l = normalizedBase.length - (breakPoint - 1); i < l; i++) {\n          out += '../';\n        }\n        for (i = breakPoint - 1, l = items.length; i < l; i++) {\n          if (i !== breakPoint - 1) {\n            out += '/' + items[i];\n          } else {\n            out += items[i];\n          }\n        }\n        return out;\n      }\n      toAbsPath(base, path) {\n        let nb = 0;\n        const tr = /\\/$/.test(path) ? '/' : '';\n        const normalizedBase = base.split('/');\n        const normalizedPath = path.split('/');\n        const baseParts = [];\n        each$4(normalizedBase, k => {\n          if (k) {\n            baseParts.push(k);\n          }\n        });\n        const pathParts = [];\n        for (let i = normalizedPath.length - 1; i >= 0; i--) {\n          if (normalizedPath[i].length === 0 || normalizedPath[i] === '.') {\n            continue;\n          }\n          if (normalizedPath[i] === '..') {\n            nb++;\n            continue;\n          }\n          if (nb > 0) {\n            nb--;\n            continue;\n          }\n          pathParts.push(normalizedPath[i]);\n        }\n        const i = baseParts.length - nb;\n        let outPath;\n        if (i <= 0) {\n          outPath = reverse(pathParts).join('/');\n        } else {\n          outPath = baseParts.slice(0, i).join('/') + '/' + reverse(pathParts).join('/');\n        }\n        if (outPath.indexOf('/') !== 0) {\n          outPath = '/' + outPath;\n        }\n        if (tr && outPath.lastIndexOf('/') !== outPath.length - 1) {\n          outPath += tr;\n        }\n        return outPath;\n      }\n      getURI(noProtoHost = false) {\n        let s;\n        if (!this.source || noProtoHost) {\n          s = '';\n          if (!noProtoHost) {\n            if (this.protocol) {\n              s += this.protocol + '://';\n            } else {\n              s += '//';\n            }\n            if (this.userInfo) {\n              s += this.userInfo + '@';\n            }\n            if (this.host) {\n              s += this.host;\n            }\n            if (this.port) {\n              s += ':' + this.port;\n            }\n          }\n          if (this.path) {\n            s += this.path;\n          }\n          if (this.query) {\n            s += '?' + this.query;\n          }\n          if (this.anchor) {\n            s += '#' + this.anchor;\n          }\n          this.source = s;\n        }\n        return this.source;\n      }\n    }\n\n    const makeMap = Tools.makeMap, extend$1 = Tools.extend;\n    const basePurifyConfig = {\n      IN_PLACE: true,\n      ALLOW_UNKNOWN_PROTOCOLS: true,\n      ALLOWED_TAGS: [\n        '#comment',\n        '#cdata-section',\n        'body'\n      ],\n      ALLOWED_ATTR: []\n    };\n    const filteredUrlAttrs = Tools.makeMap('src,href,data,background,action,formaction,poster,xlink:href');\n    const internalElementAttr = 'data-mce-type';\n    const getPurifyConfig = (settings, mimeType) => {\n      const config = { ...basePurifyConfig };\n      config.PARSER_MEDIA_TYPE = mimeType;\n      if (settings.allow_script_urls) {\n        config.ALLOWED_URI_REGEXP = /.*/;\n      } else if (settings.allow_html_data_urls) {\n        config.ALLOWED_URI_REGEXP = /^(?!(\\w+script|mhtml):)/i;\n      }\n      return config;\n    };\n    const setupPurify = (settings, schema) => {\n      const purify$1 = purify();\n      const specialElements = schema.getSpecialElements();\n      const validate = settings.validate;\n      let uid = 0;\n      purify$1.addHook('uponSanitizeElement', (ele, evt) => {\n        var _a, _b, _c;\n        if (ele.nodeType === COMMENT && !settings.allow_conditional_comments && /^\\[if/i.test((_a = ele.nodeValue) !== null && _a !== void 0 ? _a : '')) {\n          ele.nodeValue = ' ' + ele.nodeValue;\n        }\n        const tagName = evt.tagName;\n        if (ele.nodeType !== ELEMENT || tagName === 'body') {\n          return;\n        }\n        const element = SugarElement.fromDom(ele);\n        const lcTagName = tagName.toLowerCase();\n        const isInternalElement = has$1(element, internalElementAttr);\n        const bogus = get$9(element, 'data-mce-bogus');\n        if (!isInternalElement && isString(bogus)) {\n          if (bogus === 'all') {\n            remove$6(element);\n          } else {\n            unwrap(element);\n          }\n          return;\n        }\n        const rule = schema.getElementRule(lcTagName);\n        if (validate && !rule) {\n          if (has$2(specialElements, lcTagName)) {\n            remove$6(element);\n          } else {\n            unwrap(element);\n          }\n          return;\n        } else {\n          evt.allowedTags[tagName] = true;\n        }\n        if (validate && rule && !isInternalElement) {\n          each$e((_b = rule.attributesForced) !== null && _b !== void 0 ? _b : [], attr => {\n            set$2(element, attr.name, attr.value === '{$uid}' ? `mce_${ uid++ }` : attr.value);\n          });\n          each$e((_c = rule.attributesDefault) !== null && _c !== void 0 ? _c : [], attr => {\n            if (!has$1(element, attr.name)) {\n              set$2(element, attr.name, attr.value === '{$uid}' ? `mce_${ uid++ }` : attr.value);\n            }\n          });\n          if (rule.attributesRequired && !exists(rule.attributesRequired, attr => has$1(element, attr))) {\n            unwrap(element);\n            return;\n          }\n          if (rule.removeEmptyAttrs && hasNone(element)) {\n            unwrap(element);\n            return;\n          }\n          if (rule.outputName && rule.outputName !== lcTagName) {\n            mutate(element, rule.outputName);\n          }\n        }\n      });\n      purify$1.addHook('uponSanitizeAttribute', (ele, evt) => {\n        const tagName = ele.tagName.toLowerCase();\n        const {attrName, attrValue} = evt;\n        evt.keepAttr = !validate || schema.isValid(tagName, attrName) || startsWith(attrName, 'data-') || startsWith(attrName, 'aria-');\n        if (attrName in filteredUrlAttrs && isInvalidUri(settings, attrValue, tagName)) {\n          evt.keepAttr = false;\n        }\n        if (evt.keepAttr) {\n          evt.allowedAttributes[attrName] = true;\n          if (attrName in schema.getBoolAttrs()) {\n            evt.attrValue = attrName;\n          }\n          if (settings.allow_svg_data_urls && startsWith(attrValue, 'data:image/svg+xml')) {\n            evt.forceKeepAttr = true;\n          }\n        } else if (ele.hasAttribute(internalElementAttr) && (attrName === 'id' || attrName === 'class' || attrName === 'style')) {\n          evt.forceKeepAttr = true;\n        }\n      });\n      return purify$1;\n    };\n    const transferChildren = (parent, nativeParent, specialElements) => {\n      const parentName = parent.name;\n      const isSpecial = parentName in specialElements && parentName !== 'title' && parentName !== 'textarea';\n      const childNodes = nativeParent.childNodes;\n      for (let ni = 0, nl = childNodes.length; ni < nl; ni++) {\n        const nativeChild = childNodes[ni];\n        const child = new AstNode(nativeChild.nodeName.toLowerCase(), nativeChild.nodeType);\n        if (isElement$6(nativeChild)) {\n          const attributes = nativeChild.attributes;\n          for (let ai = 0, al = attributes.length; ai < al; ai++) {\n            const attr = attributes[ai];\n            child.attr(attr.name, attr.value);\n          }\n        } else if (isText$a(nativeChild)) {\n          child.value = nativeChild.data;\n          if (isSpecial) {\n            child.raw = true;\n          }\n        } else if (isComment(nativeChild) || isCData(nativeChild) || isPi(nativeChild)) {\n          child.value = nativeChild.data;\n        }\n        transferChildren(child, nativeChild, specialElements);\n        parent.append(child);\n      }\n    };\n    const walkTree = (root, preprocessors, postprocessors) => {\n      const traverseOrder = [];\n      for (let node = root, lastNode = node; node; lastNode = node, node = node.walk()) {\n        const tempNode = node;\n        each$e(preprocessors, preprocess => preprocess(tempNode));\n        if (isNullable(tempNode.parent) && tempNode !== root) {\n          node = lastNode;\n        } else {\n          traverseOrder.push(tempNode);\n        }\n      }\n      for (let i = traverseOrder.length - 1; i >= 0; i--) {\n        const node = traverseOrder[i];\n        each$e(postprocessors, postprocess => postprocess(node));\n      }\n    };\n    const whitespaceCleaner = (root, schema, settings, args) => {\n      const validate = settings.validate;\n      const nonEmptyElements = schema.getNonEmptyElements();\n      const whitespaceElements = schema.getWhitespaceElements();\n      const blockElements = extend$1(makeMap('script,style,head,html,body,title,meta,param'), schema.getBlockElements());\n      const textRootBlockElements = getTextRootBlockElements(schema);\n      const allWhiteSpaceRegExp = /[ \\t\\r\\n]+/g;\n      const startWhiteSpaceRegExp = /^[ \\t\\r\\n]+/;\n      const endWhiteSpaceRegExp = /[ \\t\\r\\n]+$/;\n      const hasWhitespaceParent = node => {\n        let tempNode = node.parent;\n        while (isNonNullable(tempNode)) {\n          if (tempNode.name in whitespaceElements) {\n            return true;\n          } else {\n            tempNode = tempNode.parent;\n          }\n        }\n        return false;\n      };\n      const isTextRootBlockEmpty = node => {\n        let tempNode = node;\n        while (isNonNullable(tempNode)) {\n          if (tempNode.name in textRootBlockElements) {\n            return isEmpty(schema, nonEmptyElements, whitespaceElements, tempNode);\n          } else {\n            tempNode = tempNode.parent;\n          }\n        }\n        return false;\n      };\n      const isAtEdgeOfBlock = (node, start) => {\n        const neighbour = start ? node.prev : node.next;\n        if (isNonNullable(neighbour) || isNullable(node.parent)) {\n          return false;\n        }\n        return node.parent.name in blockElements && (node.parent !== root || args.isRootContent === true);\n      };\n      const preprocess = node => {\n        var _a;\n        if (node.type === 3) {\n          if (!hasWhitespaceParent(node)) {\n            let text = (_a = node.value) !== null && _a !== void 0 ? _a : '';\n            text = text.replace(allWhiteSpaceRegExp, ' ');\n            if (isLineBreakNode(node.prev, blockElements) || isAtEdgeOfBlock(node, true)) {\n              text = text.replace(startWhiteSpaceRegExp, '');\n            }\n            if (text.length === 0) {\n              node.remove();\n            } else {\n              node.value = text;\n            }\n          }\n        }\n      };\n      const postprocess = node => {\n        var _a;\n        if (node.type === 1) {\n          const elementRule = schema.getElementRule(node.name);\n          if (validate && elementRule) {\n            const isNodeEmpty = isEmpty(schema, nonEmptyElements, whitespaceElements, node);\n            if (elementRule.paddInEmptyBlock && isNodeEmpty && isTextRootBlockEmpty(node)) {\n              paddEmptyNode(settings, args, blockElements, node);\n            } else if (elementRule.removeEmpty && isNodeEmpty) {\n              if (blockElements[node.name]) {\n                node.remove();\n              } else {\n                node.unwrap();\n              }\n            } else if (elementRule.paddEmpty && (isNodeEmpty || isPaddedWithNbsp(node))) {\n              paddEmptyNode(settings, args, blockElements, node);\n            }\n          }\n        } else if (node.type === 3) {\n          if (!hasWhitespaceParent(node)) {\n            let text = (_a = node.value) !== null && _a !== void 0 ? _a : '';\n            if (node.next && blockElements[node.next.name] || isAtEdgeOfBlock(node, false)) {\n              text = text.replace(endWhiteSpaceRegExp, '');\n            }\n            if (text.length === 0) {\n              node.remove();\n            } else {\n              node.value = text;\n            }\n          }\n        }\n      };\n      return [\n        preprocess,\n        postprocess\n      ];\n    };\n    const getRootBlockName = (settings, args) => {\n      var _a;\n      const name = (_a = args.forced_root_block) !== null && _a !== void 0 ? _a : settings.forced_root_block;\n      if (name === false) {\n        return '';\n      } else if (name === true) {\n        return 'p';\n      } else {\n        return name;\n      }\n    };\n    const DomParser = (settings = {}, schema = Schema()) => {\n      const nodeFilterRegistry = create$7();\n      const attributeFilterRegistry = create$7();\n      const defaultedSettings = {\n        validate: true,\n        root_name: 'body',\n        ...settings\n      };\n      const parser = new DOMParser();\n      const purify = setupPurify(defaultedSettings, schema);\n      const parseAndSanitizeWithContext = (html, rootName, format = 'html') => {\n        const mimeType = format === 'xhtml' ? 'application/xhtml+xml' : 'text/html';\n        const isSpecialRoot = has$2(schema.getSpecialElements(), rootName.toLowerCase());\n        const content = isSpecialRoot ? `<${ rootName }>${ html }</${ rootName }>` : html;\n        const wrappedHtml = format === 'xhtml' ? `<html xmlns=\"http://www.w3.org/1999/xhtml\"><head></head><body>${ content }</body></html>` : `<body>${ content }</body>`;\n        const body = parser.parseFromString(wrappedHtml, mimeType).body;\n        purify.sanitize(body, getPurifyConfig(defaultedSettings, mimeType));\n        purify.removed = [];\n        return isSpecialRoot ? body.firstChild : body;\n      };\n      const addNodeFilter = nodeFilterRegistry.addFilter;\n      const getNodeFilters = nodeFilterRegistry.getFilters;\n      const removeNodeFilter = nodeFilterRegistry.removeFilter;\n      const addAttributeFilter = attributeFilterRegistry.addFilter;\n      const getAttributeFilters = attributeFilterRegistry.getFilters;\n      const removeAttributeFilter = attributeFilterRegistry.removeFilter;\n      const findInvalidChildren = (node, invalidChildren) => {\n        const parent = node.parent;\n        if (parent && schema.children[node.name] && !schema.isValidChild(parent.name, node.name)) {\n          invalidChildren.push(node);\n        }\n      };\n      const addRootBlocks = (rootNode, rootBlockName) => {\n        const blockElements = extend$1(makeMap('script,style,head,html,body,title,meta,param'), schema.getBlockElements());\n        const startWhiteSpaceRegExp = /^[ \\t\\r\\n]+/;\n        const endWhiteSpaceRegExp = /[ \\t\\r\\n]+$/;\n        let node = rootNode.firstChild, rootBlockNode = null;\n        const trim = rootBlock => {\n          var _a, _b;\n          if (rootBlock) {\n            node = rootBlock.firstChild;\n            if (node && node.type === 3) {\n              node.value = (_a = node.value) === null || _a === void 0 ? void 0 : _a.replace(startWhiteSpaceRegExp, '');\n            }\n            node = rootBlock.lastChild;\n            if (node && node.type === 3) {\n              node.value = (_b = node.value) === null || _b === void 0 ? void 0 : _b.replace(endWhiteSpaceRegExp, '');\n            }\n          }\n        };\n        if (!schema.isValidChild(rootNode.name, rootBlockName.toLowerCase())) {\n          return;\n        }\n        while (node) {\n          const next = node.next;\n          if (node.type === 3 || node.type === 1 && node.name !== 'p' && !blockElements[node.name] && !node.attr(internalElementAttr)) {\n            if (!rootBlockNode) {\n              rootBlockNode = new AstNode(rootBlockName, 1);\n              rootBlockNode.attr(defaultedSettings.forced_root_block_attrs);\n              rootNode.insert(rootBlockNode, node);\n              rootBlockNode.append(node);\n            } else {\n              rootBlockNode.append(node);\n            }\n          } else {\n            trim(rootBlockNode);\n            rootBlockNode = null;\n          }\n          node = next;\n        }\n        trim(rootBlockNode);\n      };\n      const parse = (html, args = {}) => {\n        var _a;\n        const validate = defaultedSettings.validate;\n        const rootName = (_a = args.context) !== null && _a !== void 0 ? _a : defaultedSettings.root_name;\n        const element = parseAndSanitizeWithContext(html, rootName, args.format);\n        const rootNode = new AstNode(rootName, 11);\n        transferChildren(rootNode, element, schema.getSpecialElements());\n        const [whitespacePre, whitespacePost] = whitespaceCleaner(rootNode, schema, defaultedSettings, args);\n        const invalidChildren = [];\n        const invalidFinder = validate ? node => findInvalidChildren(node, invalidChildren) : noop;\n        const matches = {\n          nodes: {},\n          attributes: {}\n        };\n        const matchFinder = node => matchNode$1(getNodeFilters(), getAttributeFilters(), node, matches);\n        walkTree(rootNode, [\n          whitespacePre,\n          matchFinder\n        ], [\n          whitespacePost,\n          invalidFinder\n        ]);\n        invalidChildren.reverse();\n        if (validate && invalidChildren.length > 0) {\n          if (args.context) {\n            const {\n              pass: topLevelChildren,\n              fail: otherChildren\n            } = partition$2(invalidChildren, child => child.parent === rootNode);\n            cleanInvalidNodes(otherChildren, schema, matchFinder);\n            args.invalid = topLevelChildren.length > 0;\n          } else {\n            cleanInvalidNodes(invalidChildren, schema, matchFinder);\n          }\n        }\n        const rootBlockName = getRootBlockName(defaultedSettings, args);\n        if (rootBlockName && (rootNode.name === 'body' || args.isRootContent)) {\n          addRootBlocks(rootNode, rootBlockName);\n        }\n        if (!args.invalid) {\n          runFilters(matches, args);\n        }\n        return rootNode;\n      };\n      const exports = {\n        schema,\n        addAttributeFilter,\n        getAttributeFilters,\n        removeAttributeFilter,\n        addNodeFilter,\n        getNodeFilters,\n        removeNodeFilter,\n        parse\n      };\n      register$4(exports, defaultedSettings);\n      register$5(exports, defaultedSettings, schema);\n      return exports;\n    };\n\n    const serializeContent = content => isTreeNode(content) ? HtmlSerializer({ validate: false }).serialize(content) : content;\n    const withSerializedContent = (content, fireEvent) => {\n      const serializedContent = serializeContent(content);\n      const eventArgs = fireEvent(serializedContent);\n      if (eventArgs.isDefaultPrevented()) {\n        return eventArgs;\n      } else if (isTreeNode(content)) {\n        if (eventArgs.content !== serializedContent) {\n          const rootNode = DomParser({\n            validate: false,\n            forced_root_block: false\n          }).parse(eventArgs.content, { context: content.name });\n          return {\n            ...eventArgs,\n            content: rootNode\n          };\n        } else {\n          return {\n            ...eventArgs,\n            content\n          };\n        }\n      } else {\n        return eventArgs;\n      }\n    };\n    const preProcessGetContent = (editor, args) => {\n      if (args.no_events) {\n        return Result.value(args);\n      } else {\n        const eventArgs = fireBeforeGetContent(editor, args);\n        if (eventArgs.isDefaultPrevented()) {\n          return Result.error(fireGetContent(editor, {\n            content: '',\n            ...eventArgs\n          }).content);\n        } else {\n          return Result.value(eventArgs);\n        }\n      }\n    };\n    const postProcessGetContent = (editor, content, args) => {\n      if (args.no_events) {\n        return content;\n      } else {\n        const processedEventArgs = withSerializedContent(content, c => fireGetContent(editor, {\n          ...args,\n          content: c\n        }));\n        return processedEventArgs.content;\n      }\n    };\n    const preProcessSetContent = (editor, args) => {\n      if (args.no_events) {\n        return Result.value(args);\n      } else {\n        const processedEventArgs = withSerializedContent(args.content, content => fireBeforeSetContent(editor, {\n          ...args,\n          content\n        }));\n        if (processedEventArgs.isDefaultPrevented()) {\n          fireSetContent(editor, processedEventArgs);\n          return Result.error(undefined);\n        } else {\n          return Result.value(processedEventArgs);\n        }\n      }\n    };\n    const postProcessSetContent = (editor, content, args) => {\n      if (!args.no_events) {\n        fireSetContent(editor, {\n          ...args,\n          content\n        });\n      }\n    };\n\n    const tableModel = (element, width, rows) => ({\n      element,\n      width,\n      rows\n    });\n    const tableRow = (element, cells) => ({\n      element,\n      cells\n    });\n    const cellPosition = (x, y) => ({\n      x,\n      y\n    });\n    const getSpan = (td, key) => {\n      return getOpt(td, key).bind(toInt).getOr(1);\n    };\n    const fillout = (table, x, y, tr, td) => {\n      const rowspan = getSpan(td, 'rowspan');\n      const colspan = getSpan(td, 'colspan');\n      const rows = table.rows;\n      for (let y2 = y; y2 < y + rowspan; y2++) {\n        if (!rows[y2]) {\n          rows[y2] = tableRow(deep$1(tr), []);\n        }\n        for (let x2 = x; x2 < x + colspan; x2++) {\n          const cells = rows[y2].cells;\n          cells[x2] = y2 === y && x2 === x ? td : shallow$1(td);\n        }\n      }\n    };\n    const cellExists = (table, x, y) => {\n      const rows = table.rows;\n      const cells = rows[y] ? rows[y].cells : [];\n      return !!cells[x];\n    };\n    const skipCellsX = (table, x, y) => {\n      while (cellExists(table, x, y)) {\n        x++;\n      }\n      return x;\n    };\n    const getWidth = rows => {\n      return foldl(rows, (acc, row) => {\n        return row.cells.length > acc ? row.cells.length : acc;\n      }, 0);\n    };\n    const findElementPos = (table, element) => {\n      const rows = table.rows;\n      for (let y = 0; y < rows.length; y++) {\n        const cells = rows[y].cells;\n        for (let x = 0; x < cells.length; x++) {\n          if (eq(cells[x], element)) {\n            return Optional.some(cellPosition(x, y));\n          }\n        }\n      }\n      return Optional.none();\n    };\n    const extractRows = (table, sx, sy, ex, ey) => {\n      const newRows = [];\n      const rows = table.rows;\n      for (let y = sy; y <= ey; y++) {\n        const cells = rows[y].cells;\n        const slice = sx < ex ? cells.slice(sx, ex + 1) : cells.slice(ex, sx + 1);\n        newRows.push(tableRow(rows[y].element, slice));\n      }\n      return newRows;\n    };\n    const subTable = (table, startPos, endPos) => {\n      const sx = startPos.x, sy = startPos.y;\n      const ex = endPos.x, ey = endPos.y;\n      const newRows = sy < ey ? extractRows(table, sx, sy, ex, ey) : extractRows(table, sx, ey, ex, sy);\n      return tableModel(table.element, getWidth(newRows), newRows);\n    };\n    const createDomTable = (table, rows) => {\n      const tableElement = shallow$1(table.element);\n      const tableBody = SugarElement.fromTag('tbody');\n      append(tableBody, rows);\n      append$1(tableElement, tableBody);\n      return tableElement;\n    };\n    const modelRowsToDomRows = table => {\n      return map$3(table.rows, row => {\n        const cells = map$3(row.cells, cell => {\n          const td = deep$1(cell);\n          remove$b(td, 'colspan');\n          remove$b(td, 'rowspan');\n          return td;\n        });\n        const tr = shallow$1(row.element);\n        append(tr, cells);\n        return tr;\n      });\n    };\n    const fromDom = tableElm => {\n      const table = tableModel(shallow$1(tableElm), 0, []);\n      each$e(descendants(tableElm, 'tr'), (tr, y) => {\n        each$e(descendants(tr, 'td,th'), (td, x) => {\n          fillout(table, skipCellsX(table, x, y), y, tr, td);\n        });\n      });\n      return tableModel(table.element, getWidth(table.rows), table.rows);\n    };\n    const toDom = table => {\n      return createDomTable(table, modelRowsToDomRows(table));\n    };\n    const subsection = (table, startElement, endElement) => {\n      return findElementPos(table, startElement).bind(startPos => {\n        return findElementPos(table, endElement).map(endPos => {\n          return subTable(table, startPos, endPos);\n        });\n      });\n    };\n\n    const findParentListContainer = parents => find$2(parents, elm => name(elm) === 'ul' || name(elm) === 'ol');\n    const getFullySelectedListWrappers = (parents, rng) => find$2(parents, elm => name(elm) === 'li' && hasAllContentsSelected(elm, rng)).fold(constant([]), _li => findParentListContainer(parents).map(listCont => {\n      const listElm = SugarElement.fromTag(name(listCont));\n      const listStyles = filter$4(getAllRaw(listCont), (_style, name) => startsWith(name, 'list-style'));\n      setAll(listElm, listStyles);\n      return [\n        SugarElement.fromTag('li'),\n        listElm\n      ];\n    }).getOr([]));\n    const wrap = (innerElm, elms) => {\n      const wrapped = foldl(elms, (acc, elm) => {\n        append$1(elm, acc);\n        return elm;\n      }, innerElm);\n      return elms.length > 0 ? fromElements([wrapped]) : wrapped;\n    };\n    const directListWrappers = commonAnchorContainer => {\n      if (isListItem$1(commonAnchorContainer)) {\n        return parent(commonAnchorContainer).filter(isList).fold(constant([]), listElm => [\n          commonAnchorContainer,\n          listElm\n        ]);\n      } else {\n        return isList(commonAnchorContainer) ? [commonAnchorContainer] : [];\n      }\n    };\n    const getWrapElements = (rootNode, rng) => {\n      const commonAnchorContainer = SugarElement.fromDom(rng.commonAncestorContainer);\n      const parents = parentsAndSelf(commonAnchorContainer, rootNode);\n      const wrapElements = filter$5(parents, isWrapElement);\n      const listWrappers = getFullySelectedListWrappers(parents, rng);\n      const allWrappers = wrapElements.concat(listWrappers.length ? listWrappers : directListWrappers(commonAnchorContainer));\n      return map$3(allWrappers, shallow$1);\n    };\n    const emptyFragment = () => fromElements([]);\n    const getFragmentFromRange = (rootNode, rng) => wrap(SugarElement.fromDom(rng.cloneContents()), getWrapElements(rootNode, rng));\n    const getParentTable = (rootElm, cell) => ancestor$2(cell, 'table', curry(eq, rootElm));\n    const getTableFragment = (rootNode, selectedTableCells) => getParentTable(rootNode, selectedTableCells[0]).bind(tableElm => {\n      const firstCell = selectedTableCells[0];\n      const lastCell = selectedTableCells[selectedTableCells.length - 1];\n      const fullTableModel = fromDom(tableElm);\n      return subsection(fullTableModel, firstCell, lastCell).map(sectionedTableModel => fromElements([toDom(sectionedTableModel)]));\n    }).getOrThunk(emptyFragment);\n    const getSelectionFragment = (rootNode, ranges) => ranges.length > 0 && ranges[0].collapsed ? emptyFragment() : getFragmentFromRange(rootNode, ranges[0]);\n    const read$3 = (rootNode, ranges) => {\n      const selectedCells = getCellsFromElementOrRanges(ranges, rootNode);\n      return selectedCells.length > 0 ? getTableFragment(rootNode, selectedCells) : getSelectionFragment(rootNode, ranges);\n    };\n\n    const isCollapsibleWhitespace = (text, index) => index >= 0 && index < text.length && isWhiteSpace(text.charAt(index));\n    const getInnerText = bin => {\n      return trim$1(bin.innerText);\n    };\n    const getContextNodeName = parentBlockOpt => parentBlockOpt.map(block => block.nodeName).getOr('div').toLowerCase();\n    const getTextContent = editor => Optional.from(editor.selection.getRng()).map(rng => {\n      var _a;\n      const parentBlockOpt = Optional.from(editor.dom.getParent(rng.commonAncestorContainer, editor.dom.isBlock));\n      const body = editor.getBody();\n      const contextNodeName = getContextNodeName(parentBlockOpt);\n      const bin = editor.dom.add(body, contextNodeName, {\n        'data-mce-bogus': 'all',\n        'style': 'overflow: hidden; opacity: 0;'\n      }, rng.cloneContents());\n      const text = getInnerText(bin);\n      const nonRenderedText = trim$1((_a = bin.textContent) !== null && _a !== void 0 ? _a : '');\n      editor.dom.remove(bin);\n      if (isCollapsibleWhitespace(nonRenderedText, 0) || isCollapsibleWhitespace(nonRenderedText, nonRenderedText.length - 1)) {\n        const parentBlock = parentBlockOpt.getOr(body);\n        const parentBlockText = getInnerText(parentBlock);\n        const textIndex = parentBlockText.indexOf(text);\n        if (textIndex === -1) {\n          return text;\n        } else {\n          const hasProceedingSpace = isCollapsibleWhitespace(parentBlockText, textIndex - 1);\n          const hasTrailingSpace = isCollapsibleWhitespace(parentBlockText, textIndex + text.length);\n          return (hasProceedingSpace ? ' ' : '') + text + (hasTrailingSpace ? ' ' : '');\n        }\n      } else {\n        return text;\n      }\n    }).getOr('');\n    const getSerializedContent = (editor, args) => {\n      const rng = editor.selection.getRng(), tmpElm = editor.dom.create('body');\n      const sel = editor.selection.getSel();\n      const ranges = processRanges(editor, getRanges$1(sel));\n      const fragment = args.contextual ? read$3(SugarElement.fromDom(editor.getBody()), ranges).dom : rng.cloneContents();\n      if (fragment) {\n        tmpElm.appendChild(fragment);\n      }\n      return editor.selection.serializer.serialize(tmpElm, args);\n    };\n    const extractSelectedContent = (editor, args) => {\n      if (args.format === 'text') {\n        return getTextContent(editor);\n      } else {\n        const content = getSerializedContent(editor, args);\n        if (args.format === 'tree') {\n          return content;\n        } else {\n          return editor.selection.isCollapsed() ? '' : content;\n        }\n      }\n    };\n    const setupArgs$3 = (args, format) => ({\n      ...args,\n      format,\n      get: true,\n      selection: true,\n      getInner: true\n    });\n    const getSelectedContentInternal = (editor, format, args = {}) => {\n      const defaultedArgs = setupArgs$3(args, format);\n      return preProcessGetContent(editor, defaultedArgs).fold(identity, updatedArgs => {\n        const content = extractSelectedContent(editor, updatedArgs);\n        return postProcessGetContent(editor, content, updatedArgs);\n      });\n    };\n\n    const KEEP = 0, INSERT = 1, DELETE = 2;\n    const diff = (left, right) => {\n      const size = left.length + right.length + 2;\n      const vDown = new Array(size);\n      const vUp = new Array(size);\n      const snake = (start, end, diag) => {\n        return {\n          start,\n          end,\n          diag\n        };\n      };\n      const buildScript = (start1, end1, start2, end2, script) => {\n        const middle = getMiddleSnake(start1, end1, start2, end2);\n        if (middle === null || middle.start === end1 && middle.diag === end1 - end2 || middle.end === start1 && middle.diag === start1 - start2) {\n          let i = start1;\n          let j = start2;\n          while (i < end1 || j < end2) {\n            if (i < end1 && j < end2 && left[i] === right[j]) {\n              script.push([\n                KEEP,\n                left[i]\n              ]);\n              ++i;\n              ++j;\n            } else {\n              if (end1 - start1 > end2 - start2) {\n                script.push([\n                  DELETE,\n                  left[i]\n                ]);\n                ++i;\n              } else {\n                script.push([\n                  INSERT,\n                  right[j]\n                ]);\n                ++j;\n              }\n            }\n          }\n        } else {\n          buildScript(start1, middle.start, start2, middle.start - middle.diag, script);\n          for (let i2 = middle.start; i2 < middle.end; ++i2) {\n            script.push([\n              KEEP,\n              left[i2]\n            ]);\n          }\n          buildScript(middle.end, end1, middle.end - middle.diag, end2, script);\n        }\n      };\n      const buildSnake = (start, diag, end1, end2) => {\n        let end = start;\n        while (end - diag < end2 && end < end1 && left[end] === right[end - diag]) {\n          ++end;\n        }\n        return snake(start, end, diag);\n      };\n      const getMiddleSnake = (start1, end1, start2, end2) => {\n        const m = end1 - start1;\n        const n = end2 - start2;\n        if (m === 0 || n === 0) {\n          return null;\n        }\n        const delta = m - n;\n        const sum = n + m;\n        const offset = (sum % 2 === 0 ? sum : sum + 1) / 2;\n        vDown[1 + offset] = start1;\n        vUp[1 + offset] = end1 + 1;\n        let d, k, i, x, y;\n        for (d = 0; d <= offset; ++d) {\n          for (k = -d; k <= d; k += 2) {\n            i = k + offset;\n            if (k === -d || k !== d && vDown[i - 1] < vDown[i + 1]) {\n              vDown[i] = vDown[i + 1];\n            } else {\n              vDown[i] = vDown[i - 1] + 1;\n            }\n            x = vDown[i];\n            y = x - start1 + start2 - k;\n            while (x < end1 && y < end2 && left[x] === right[y]) {\n              vDown[i] = ++x;\n              ++y;\n            }\n            if (delta % 2 !== 0 && delta - d <= k && k <= delta + d) {\n              if (vUp[i - delta] <= vDown[i]) {\n                return buildSnake(vUp[i - delta], k + start1 - start2, end1, end2);\n              }\n            }\n          }\n          for (k = delta - d; k <= delta + d; k += 2) {\n            i = k + offset - delta;\n            if (k === delta - d || k !== delta + d && vUp[i + 1] <= vUp[i - 1]) {\n              vUp[i] = vUp[i + 1] - 1;\n            } else {\n              vUp[i] = vUp[i - 1];\n            }\n            x = vUp[i] - 1;\n            y = x - start1 + start2 - k;\n            while (x >= start1 && y >= start2 && left[x] === right[y]) {\n              vUp[i] = x--;\n              y--;\n            }\n            if (delta % 2 === 0 && -d <= k && k <= d) {\n              if (vUp[i] <= vDown[i + delta]) {\n                return buildSnake(vUp[i], k + start1 - start2, end1, end2);\n              }\n            }\n          }\n        }\n        return null;\n      };\n      const script = [];\n      buildScript(0, left.length, 0, right.length, script);\n      return script;\n    };\n\n    const getOuterHtml = elm => {\n      if (isElement$6(elm)) {\n        return elm.outerHTML;\n      } else if (isText$a(elm)) {\n        return Entities.encodeRaw(elm.data, false);\n      } else if (isComment(elm)) {\n        return '<!--' + elm.data + '-->';\n      }\n      return '';\n    };\n    const createFragment = html => {\n      let node;\n      const container = document.createElement('div');\n      const frag = document.createDocumentFragment();\n      if (html) {\n        container.innerHTML = html;\n      }\n      while (node = container.firstChild) {\n        frag.appendChild(node);\n      }\n      return frag;\n    };\n    const insertAt = (elm, html, index) => {\n      const fragment = createFragment(html);\n      if (elm.hasChildNodes() && index < elm.childNodes.length) {\n        const target = elm.childNodes[index];\n        elm.insertBefore(fragment, target);\n      } else {\n        elm.appendChild(fragment);\n      }\n    };\n    const removeAt = (elm, index) => {\n      if (elm.hasChildNodes() && index < elm.childNodes.length) {\n        const target = elm.childNodes[index];\n        elm.removeChild(target);\n      }\n    };\n    const applyDiff = (diff, elm) => {\n      let index = 0;\n      each$e(diff, action => {\n        if (action[0] === KEEP) {\n          index++;\n        } else if (action[0] === INSERT) {\n          insertAt(elm, action[1], index);\n          index++;\n        } else if (action[0] === DELETE) {\n          removeAt(elm, index);\n        }\n      });\n    };\n    const read$2 = elm => {\n      return filter$5(map$3(from(elm.childNodes), getOuterHtml), item => {\n        return item.length > 0;\n      });\n    };\n    const write = (fragments, elm) => {\n      const currentFragments = map$3(from(elm.childNodes), getOuterHtml);\n      applyDiff(diff(currentFragments, fragments), elm);\n      return elm;\n    };\n\n    const lazyTempDocument = cached(() => document.implementation.createHTMLDocument('undo'));\n    const hasIframes = html => {\n      return html.indexOf('</iframe>') !== -1;\n    };\n    const createFragmentedLevel = fragments => {\n      return {\n        type: 'fragmented',\n        fragments,\n        content: '',\n        bookmark: null,\n        beforeBookmark: null\n      };\n    };\n    const createCompleteLevel = content => {\n      return {\n        type: 'complete',\n        fragments: null,\n        content,\n        bookmark: null,\n        beforeBookmark: null\n      };\n    };\n    const createFromEditor = editor => {\n      const fragments = read$2(editor.getBody());\n      const trimmedFragments = bind$3(fragments, html => {\n        const trimmed = trimInternal(editor.serializer, html);\n        return trimmed.length > 0 ? [trimmed] : [];\n      });\n      const content = trimmedFragments.join('');\n      return hasIframes(content) ? createFragmentedLevel(trimmedFragments) : createCompleteLevel(content);\n    };\n    const applyToEditor = (editor, level, before) => {\n      const bookmark = before ? level.beforeBookmark : level.bookmark;\n      if (level.type === 'fragmented') {\n        write(level.fragments, editor.getBody());\n      } else {\n        editor.setContent(level.content, {\n          format: 'raw',\n          no_selection: isNonNullable(bookmark) && isPathBookmark(bookmark) ? !bookmark.isFakeCaret : true\n        });\n      }\n      if (bookmark) {\n        editor.selection.moveToBookmark(bookmark);\n      }\n    };\n    const getLevelContent = level => {\n      return level.type === 'fragmented' ? level.fragments.join('') : level.content;\n    };\n    const getCleanLevelContent = level => {\n      const elm = SugarElement.fromTag('body', lazyTempDocument());\n      set(elm, getLevelContent(level));\n      each$e(descendants(elm, '*[data-mce-bogus]'), unwrap);\n      return get$6(elm);\n    };\n    const hasEqualContent = (level1, level2) => getLevelContent(level1) === getLevelContent(level2);\n    const hasEqualCleanedContent = (level1, level2) => getCleanLevelContent(level1) === getCleanLevelContent(level2);\n    const isEq$1 = (level1, level2) => {\n      if (!level1 || !level2) {\n        return false;\n      } else if (hasEqualContent(level1, level2)) {\n        return true;\n      } else {\n        return hasEqualCleanedContent(level1, level2);\n      }\n    };\n\n    const isUnlocked = locks => locks.get() === 0;\n\n    const setTyping = (undoManager, typing, locks) => {\n      if (isUnlocked(locks)) {\n        undoManager.typing = typing;\n      }\n    };\n    const endTyping = (undoManager, locks) => {\n      if (undoManager.typing) {\n        setTyping(undoManager, false, locks);\n        undoManager.add();\n      }\n    };\n    const endTypingLevelIgnoreLocks = undoManager => {\n      if (undoManager.typing) {\n        undoManager.typing = false;\n        undoManager.add();\n      }\n    };\n\n    const beforeChange$1 = (editor, locks, beforeBookmark) => {\n      if (isUnlocked(locks)) {\n        beforeBookmark.set(getUndoBookmark(editor.selection));\n      }\n    };\n    const addUndoLevel$1 = (editor, undoManager, index, locks, beforeBookmark, level, event) => {\n      const currentLevel = createFromEditor(editor);\n      const newLevel = Tools.extend(level || {}, currentLevel);\n      if (!isUnlocked(locks) || editor.removed) {\n        return null;\n      }\n      const lastLevel = undoManager.data[index.get()];\n      if (editor.dispatch('BeforeAddUndo', {\n          level: newLevel,\n          lastLevel,\n          originalEvent: event\n        }).isDefaultPrevented()) {\n        return null;\n      }\n      if (lastLevel && isEq$1(lastLevel, newLevel)) {\n        return null;\n      }\n      if (undoManager.data[index.get()]) {\n        beforeBookmark.get().each(bm => {\n          undoManager.data[index.get()].beforeBookmark = bm;\n        });\n      }\n      const customUndoRedoLevels = getCustomUndoRedoLevels(editor);\n      if (customUndoRedoLevels) {\n        if (undoManager.data.length > customUndoRedoLevels) {\n          for (let i = 0; i < undoManager.data.length - 1; i++) {\n            undoManager.data[i] = undoManager.data[i + 1];\n          }\n          undoManager.data.length--;\n          index.set(undoManager.data.length);\n        }\n      }\n      newLevel.bookmark = getUndoBookmark(editor.selection);\n      if (index.get() < undoManager.data.length - 1) {\n        undoManager.data.length = index.get() + 1;\n      }\n      undoManager.data.push(newLevel);\n      index.set(undoManager.data.length - 1);\n      const args = {\n        level: newLevel,\n        lastLevel,\n        originalEvent: event\n      };\n      if (index.get() > 0) {\n        editor.setDirty(true);\n        editor.dispatch('AddUndo', args);\n        editor.dispatch('change', args);\n      } else {\n        editor.dispatch('AddUndo', args);\n      }\n      return newLevel;\n    };\n    const clear$1 = (editor, undoManager, index) => {\n      undoManager.data = [];\n      index.set(0);\n      undoManager.typing = false;\n      editor.dispatch('ClearUndos');\n    };\n    const extra$1 = (editor, undoManager, index, callback1, callback2) => {\n      if (undoManager.transact(callback1)) {\n        const bookmark = undoManager.data[index.get()].bookmark;\n        const lastLevel = undoManager.data[index.get() - 1];\n        applyToEditor(editor, lastLevel, true);\n        if (undoManager.transact(callback2)) {\n          undoManager.data[index.get() - 1].beforeBookmark = bookmark;\n        }\n      }\n    };\n    const redo$1 = (editor, index, data) => {\n      let level;\n      if (index.get() < data.length - 1) {\n        index.set(index.get() + 1);\n        level = data[index.get()];\n        applyToEditor(editor, level, false);\n        editor.setDirty(true);\n        editor.dispatch('Redo', { level });\n      }\n      return level;\n    };\n    const undo$1 = (editor, undoManager, locks, index) => {\n      let level;\n      if (undoManager.typing) {\n        undoManager.add();\n        undoManager.typing = false;\n        setTyping(undoManager, false, locks);\n      }\n      if (index.get() > 0) {\n        index.set(index.get() - 1);\n        level = undoManager.data[index.get()];\n        applyToEditor(editor, level, true);\n        editor.setDirty(true);\n        editor.dispatch('Undo', { level });\n      }\n      return level;\n    };\n    const reset$1 = undoManager => {\n      undoManager.clear();\n      undoManager.add();\n    };\n    const hasUndo$1 = (editor, undoManager, index) => index.get() > 0 || undoManager.typing && undoManager.data[0] && !isEq$1(createFromEditor(editor), undoManager.data[0]);\n    const hasRedo$1 = (undoManager, index) => index.get() < undoManager.data.length - 1 && !undoManager.typing;\n    const transact$1 = (undoManager, locks, callback) => {\n      endTyping(undoManager, locks);\n      undoManager.beforeChange();\n      undoManager.ignore(callback);\n      return undoManager.add();\n    };\n    const ignore$1 = (locks, callback) => {\n      try {\n        locks.set(locks.get() + 1);\n        callback();\n      } finally {\n        locks.set(locks.get() - 1);\n      }\n    };\n\n    const addVisualInternal = (editor, elm) => {\n      const dom = editor.dom;\n      const scope = isNonNullable(elm) ? elm : editor.getBody();\n      each$e(dom.select('table,a', scope), matchedElm => {\n        switch (matchedElm.nodeName) {\n        case 'TABLE':\n          const cls = getVisualAidsTableClass(editor);\n          const value = dom.getAttrib(matchedElm, 'border');\n          if ((!value || value === '0') && editor.hasVisual) {\n            dom.addClass(matchedElm, cls);\n          } else {\n            dom.removeClass(matchedElm, cls);\n          }\n          break;\n        case 'A':\n          if (!dom.getAttrib(matchedElm, 'href')) {\n            const value = dom.getAttrib(matchedElm, 'name') || matchedElm.id;\n            const cls = getVisualAidsAnchorClass(editor);\n            if (value && editor.hasVisual) {\n              dom.addClass(matchedElm, cls);\n            } else {\n              dom.removeClass(matchedElm, cls);\n            }\n          }\n          break;\n        }\n      });\n      editor.dispatch('VisualAid', {\n        element: elm,\n        hasVisual: editor.hasVisual\n      });\n    };\n\n    const makePlainAdaptor = editor => ({\n      init: { bindEvents: noop },\n      undoManager: {\n        beforeChange: (locks, beforeBookmark) => beforeChange$1(editor, locks, beforeBookmark),\n        add: (undoManager, index, locks, beforeBookmark, level, event) => addUndoLevel$1(editor, undoManager, index, locks, beforeBookmark, level, event),\n        undo: (undoManager, locks, index) => undo$1(editor, undoManager, locks, index),\n        redo: (index, data) => redo$1(editor, index, data),\n        clear: (undoManager, index) => clear$1(editor, undoManager, index),\n        reset: undoManager => reset$1(undoManager),\n        hasUndo: (undoManager, index) => hasUndo$1(editor, undoManager, index),\n        hasRedo: (undoManager, index) => hasRedo$1(undoManager, index),\n        transact: (undoManager, locks, callback) => transact$1(undoManager, locks, callback),\n        ignore: (locks, callback) => ignore$1(locks, callback),\n        extra: (undoManager, index, callback1, callback2) => extra$1(editor, undoManager, index, callback1, callback2)\n      },\n      formatter: {\n        match: (name, vars, node, similar) => match$2(editor, name, vars, node, similar),\n        matchAll: (names, vars) => matchAll(editor, names, vars),\n        matchNode: (node, name, vars, similar) => matchNode(editor, node, name, vars, similar),\n        canApply: name => canApply(editor, name),\n        closest: names => closest$1(editor, names),\n        apply: (name, vars, node) => applyFormat$1(editor, name, vars, node),\n        remove: (name, vars, node, similar) => remove$2(editor, name, vars, node, similar),\n        toggle: (name, vars, node) => toggle(editor, name, vars, node),\n        formatChanged: (registeredFormatListeners, formats, callback, similar, vars) => formatChangedInternal(editor, registeredFormatListeners, formats, callback, similar, vars)\n      },\n      editor: {\n        getContent: args => getContentInternal(editor, args),\n        setContent: (content, args) => setContentInternal(editor, content, args),\n        insertContent: (value, details) => insertHtmlAtCaret(editor, value, details),\n        addVisual: elm => addVisualInternal(editor, elm)\n      },\n      selection: { getContent: (format, args) => getSelectedContentInternal(editor, format, args) },\n      autocompleter: {\n        addDecoration: range => create$9(editor, range),\n        removeDecoration: () => remove$3(editor, SugarElement.fromDom(editor.getBody()))\n      },\n      raw: { getModel: () => Optional.none() }\n    });\n    const makeRtcAdaptor = rtcEditor => {\n      const defaultVars = vars => isObject(vars) ? vars : {};\n      const {init, undoManager, formatter, editor, selection, autocompleter, raw} = rtcEditor;\n      return {\n        init: { bindEvents: init.bindEvents },\n        undoManager: {\n          beforeChange: undoManager.beforeChange,\n          add: undoManager.add,\n          undo: undoManager.undo,\n          redo: undoManager.redo,\n          clear: undoManager.clear,\n          reset: undoManager.reset,\n          hasUndo: undoManager.hasUndo,\n          hasRedo: undoManager.hasRedo,\n          transact: (_undoManager, _locks, fn) => undoManager.transact(fn),\n          ignore: (_locks, callback) => undoManager.ignore(callback),\n          extra: (_undoManager, _index, callback1, callback2) => undoManager.extra(callback1, callback2)\n        },\n        formatter: {\n          match: (name, vars, _node, similar) => formatter.match(name, defaultVars(vars), similar),\n          matchAll: formatter.matchAll,\n          matchNode: formatter.matchNode,\n          canApply: name => formatter.canApply(name),\n          closest: names => formatter.closest(names),\n          apply: (name, vars, _node) => formatter.apply(name, defaultVars(vars)),\n          remove: (name, vars, _node, _similar) => formatter.remove(name, defaultVars(vars)),\n          toggle: (name, vars, _node) => formatter.toggle(name, defaultVars(vars)),\n          formatChanged: (_rfl, formats, callback, similar, vars) => formatter.formatChanged(formats, callback, similar, vars)\n        },\n        editor: {\n          getContent: args => editor.getContent(args),\n          setContent: (content, args) => {\n            return {\n              content: editor.setContent(content, args),\n              html: ''\n            };\n          },\n          insertContent: (content, _details) => {\n            editor.insertContent(content);\n            return '';\n          },\n          addVisual: editor.addVisual\n        },\n        selection: { getContent: (_format, args) => selection.getContent(args) },\n        autocompleter: {\n          addDecoration: autocompleter.addDecoration,\n          removeDecoration: autocompleter.removeDecoration\n        },\n        raw: { getModel: () => Optional.some(raw.getRawModel()) }\n      };\n    };\n    const makeNoopAdaptor = () => {\n      const nul = constant(null);\n      const empty = constant('');\n      return {\n        init: { bindEvents: noop },\n        undoManager: {\n          beforeChange: noop,\n          add: nul,\n          undo: nul,\n          redo: nul,\n          clear: noop,\n          reset: noop,\n          hasUndo: never,\n          hasRedo: never,\n          transact: nul,\n          ignore: noop,\n          extra: noop\n        },\n        formatter: {\n          match: never,\n          matchAll: constant([]),\n          matchNode: constant(undefined),\n          canApply: never,\n          closest: empty,\n          apply: noop,\n          remove: noop,\n          toggle: noop,\n          formatChanged: constant({ unbind: noop })\n        },\n        editor: {\n          getContent: empty,\n          setContent: constant({\n            content: '',\n            html: ''\n          }),\n          insertContent: constant(''),\n          addVisual: noop\n        },\n        selection: { getContent: empty },\n        autocompleter: {\n          addDecoration: noop,\n          removeDecoration: noop\n        },\n        raw: { getModel: constant(Optional.none()) }\n      };\n    };\n    const isRtc = editor => has$2(editor.plugins, 'rtc');\n    const getRtcSetup = editor => get$a(editor.plugins, 'rtc').bind(rtcPlugin => Optional.from(rtcPlugin.setup));\n    const setup$s = editor => {\n      const editorCast = editor;\n      return getRtcSetup(editor).fold(() => {\n        editorCast.rtcInstance = makePlainAdaptor(editor);\n        return Optional.none();\n      }, setup => {\n        editorCast.rtcInstance = makeNoopAdaptor();\n        return Optional.some(() => setup().then(rtcEditor => {\n          editorCast.rtcInstance = makeRtcAdaptor(rtcEditor);\n          return rtcEditor.rtc.isRemote;\n        }));\n      });\n    };\n    const getRtcInstanceWithFallback = editor => editor.rtcInstance ? editor.rtcInstance : makePlainAdaptor(editor);\n    const getRtcInstanceWithError = editor => {\n      const rtcInstance = editor.rtcInstance;\n      if (!rtcInstance) {\n        throw new Error('Failed to get RTC instance not yet initialized.');\n      } else {\n        return rtcInstance;\n      }\n    };\n    const beforeChange = (editor, locks, beforeBookmark) => {\n      getRtcInstanceWithError(editor).undoManager.beforeChange(locks, beforeBookmark);\n    };\n    const addUndoLevel = (editor, undoManager, index, locks, beforeBookmark, level, event) => getRtcInstanceWithError(editor).undoManager.add(undoManager, index, locks, beforeBookmark, level, event);\n    const undo = (editor, undoManager, locks, index) => getRtcInstanceWithError(editor).undoManager.undo(undoManager, locks, index);\n    const redo = (editor, index, data) => getRtcInstanceWithError(editor).undoManager.redo(index, data);\n    const clear = (editor, undoManager, index) => {\n      getRtcInstanceWithError(editor).undoManager.clear(undoManager, index);\n    };\n    const reset = (editor, undoManager) => {\n      getRtcInstanceWithError(editor).undoManager.reset(undoManager);\n    };\n    const hasUndo = (editor, undoManager, index) => getRtcInstanceWithError(editor).undoManager.hasUndo(undoManager, index);\n    const hasRedo = (editor, undoManager, index) => getRtcInstanceWithError(editor).undoManager.hasRedo(undoManager, index);\n    const transact = (editor, undoManager, locks, callback) => getRtcInstanceWithError(editor).undoManager.transact(undoManager, locks, callback);\n    const ignore = (editor, locks, callback) => {\n      getRtcInstanceWithError(editor).undoManager.ignore(locks, callback);\n    };\n    const extra = (editor, undoManager, index, callback1, callback2) => {\n      getRtcInstanceWithError(editor).undoManager.extra(undoManager, index, callback1, callback2);\n    };\n    const matchFormat = (editor, name, vars, node, similar) => getRtcInstanceWithError(editor).formatter.match(name, vars, node, similar);\n    const matchAllFormats = (editor, names, vars) => getRtcInstanceWithError(editor).formatter.matchAll(names, vars);\n    const matchNodeFormat = (editor, node, name, vars, similar) => getRtcInstanceWithError(editor).formatter.matchNode(node, name, vars, similar);\n    const canApplyFormat = (editor, name) => getRtcInstanceWithError(editor).formatter.canApply(name);\n    const closestFormat = (editor, names) => getRtcInstanceWithError(editor).formatter.closest(names);\n    const applyFormat = (editor, name, vars, node) => {\n      getRtcInstanceWithError(editor).formatter.apply(name, vars, node);\n    };\n    const removeFormat = (editor, name, vars, node, similar) => {\n      getRtcInstanceWithError(editor).formatter.remove(name, vars, node, similar);\n    };\n    const toggleFormat = (editor, name, vars, node) => {\n      getRtcInstanceWithError(editor).formatter.toggle(name, vars, node);\n    };\n    const formatChanged = (editor, registeredFormatListeners, formats, callback, similar, vars) => getRtcInstanceWithError(editor).formatter.formatChanged(registeredFormatListeners, formats, callback, similar, vars);\n    const getContent$2 = (editor, args) => getRtcInstanceWithFallback(editor).editor.getContent(args);\n    const setContent$2 = (editor, content, args) => getRtcInstanceWithFallback(editor).editor.setContent(content, args);\n    const insertContent$1 = (editor, value, details) => getRtcInstanceWithFallback(editor).editor.insertContent(value, details);\n    const getSelectedContent = (editor, format, args) => getRtcInstanceWithError(editor).selection.getContent(format, args);\n    const addVisual$1 = (editor, elm) => getRtcInstanceWithError(editor).editor.addVisual(elm);\n    const bindEvents = editor => getRtcInstanceWithError(editor).init.bindEvents();\n    const addAutocompleterDecoration = (editor, range) => getRtcInstanceWithError(editor).autocompleter.addDecoration(range);\n    const removeAutocompleterDecoration = editor => getRtcInstanceWithError(editor).autocompleter.removeDecoration();\n\n    const getContent$1 = (editor, args = {}) => {\n      const format = args.format ? args.format : 'html';\n      return getSelectedContent(editor, format, args);\n    };\n\n    const removeEmpty = text => {\n      if (text.dom.length === 0) {\n        remove$6(text);\n        return Optional.none();\n      } else {\n        return Optional.some(text);\n      }\n    };\n    const walkPastBookmark = (node, start) => node.filter(elm => BookmarkManager.isBookmarkNode(elm.dom)).bind(start ? nextSibling : prevSibling);\n    const merge$1 = (outer, inner, rng, start) => {\n      const outerElm = outer.dom;\n      const innerElm = inner.dom;\n      const oldLength = start ? outerElm.length : innerElm.length;\n      if (start) {\n        mergeTextNodes(outerElm, innerElm, false, !start);\n        rng.setStart(innerElm, oldLength);\n      } else {\n        mergeTextNodes(innerElm, outerElm, false, !start);\n        rng.setEnd(innerElm, oldLength);\n      }\n    };\n    const normalizeTextIfRequired = (inner, start) => {\n      parent(inner).each(root => {\n        const text = inner.dom;\n        if (start && needsToBeNbspLeft(root, CaretPosition(text, 0))) {\n          normalizeWhitespaceAfter(text, 0);\n        } else if (!start && needsToBeNbspRight(root, CaretPosition(text, text.length))) {\n          normalizeWhitespaceBefore(text, text.length);\n        }\n      });\n    };\n    const mergeAndNormalizeText = (outerNode, innerNode, rng, start) => {\n      outerNode.bind(outer => {\n        const normalizer = start ? normalizeWhitespaceBefore : normalizeWhitespaceAfter;\n        normalizer(outer.dom, start ? outer.dom.length : 0);\n        return innerNode.filter(isText$b).map(inner => merge$1(outer, inner, rng, start));\n      }).orThunk(() => {\n        const innerTextNode = walkPastBookmark(innerNode, start).or(innerNode).filter(isText$b);\n        return innerTextNode.map(inner => normalizeTextIfRequired(inner, start));\n      });\n    };\n    const rngSetContent = (rng, fragment) => {\n      const firstChild = Optional.from(fragment.firstChild).map(SugarElement.fromDom);\n      const lastChild = Optional.from(fragment.lastChild).map(SugarElement.fromDom);\n      rng.deleteContents();\n      rng.insertNode(fragment);\n      const prevText = firstChild.bind(prevSibling).filter(isText$b).bind(removeEmpty);\n      const nextText = lastChild.bind(nextSibling).filter(isText$b).bind(removeEmpty);\n      mergeAndNormalizeText(prevText, firstChild, rng, true);\n      mergeAndNormalizeText(nextText, lastChild, rng, false);\n      rng.collapse(false);\n    };\n    const setupArgs$2 = (args, content) => ({\n      format: 'html',\n      ...args,\n      set: true,\n      selection: true,\n      content\n    });\n    const cleanContent = (editor, args) => {\n      if (args.format !== 'raw') {\n        const rng = editor.selection.getRng();\n        const contextBlock = editor.dom.getParent(rng.commonAncestorContainer, editor.dom.isBlock);\n        const contextArgs = contextBlock ? { context: contextBlock.nodeName.toLowerCase() } : {};\n        const node = editor.parser.parse(args.content, {\n          forced_root_block: false,\n          ...contextArgs,\n          ...args\n        });\n        return HtmlSerializer({ validate: false }, editor.schema).serialize(node);\n      } else {\n        return args.content;\n      }\n    };\n    const setContent$1 = (editor, content, args = {}) => {\n      const defaultedArgs = setupArgs$2(args, content);\n      preProcessSetContent(editor, defaultedArgs).each(updatedArgs => {\n        const cleanedContent = cleanContent(editor, updatedArgs);\n        const rng = editor.selection.getRng();\n        rngSetContent(rng, rng.createContextualFragment(cleanedContent));\n        editor.selection.setRng(rng);\n        scrollRangeIntoView(editor, rng);\n        postProcessSetContent(editor, cleanedContent, updatedArgs);\n      });\n    };\n\n    const deleteFromCallbackMap = (callbackMap, selector, callback) => {\n      if (has$2(callbackMap, selector)) {\n        const newCallbacks = filter$5(callbackMap[selector], cb => cb !== callback);\n        if (newCallbacks.length === 0) {\n          delete callbackMap[selector];\n        } else {\n          callbackMap[selector] = newCallbacks;\n        }\n      }\n    };\n    var SelectorChanged = (dom, editor) => {\n      let selectorChangedData;\n      let currentSelectors;\n      const findMatchingNode = (selector, nodes) => find$2(nodes, node => dom.is(node, selector));\n      const getParents = elem => dom.getParents(elem, undefined, dom.getRoot());\n      const setup = () => {\n        selectorChangedData = {};\n        currentSelectors = {};\n        editor.on('NodeChange', e => {\n          const node = e.element;\n          const parents = getParents(node);\n          const matchedSelectors = {};\n          each$d(selectorChangedData, (callbacks, selector) => {\n            findMatchingNode(selector, parents).each(node => {\n              if (!currentSelectors[selector]) {\n                each$e(callbacks, callback => {\n                  callback(true, {\n                    node,\n                    selector,\n                    parents\n                  });\n                });\n                currentSelectors[selector] = callbacks;\n              }\n              matchedSelectors[selector] = callbacks;\n            });\n          });\n          each$d(currentSelectors, (callbacks, selector) => {\n            if (!matchedSelectors[selector]) {\n              delete currentSelectors[selector];\n              each$e(callbacks, callback => {\n                callback(false, {\n                  node,\n                  selector,\n                  parents\n                });\n              });\n            }\n          });\n        });\n      };\n      return {\n        selectorChangedWithUnbind: (selector, callback) => {\n          if (!selectorChangedData) {\n            setup();\n          }\n          if (!selectorChangedData[selector]) {\n            selectorChangedData[selector] = [];\n          }\n          selectorChangedData[selector].push(callback);\n          findMatchingNode(selector, getParents(editor.selection.getStart())).each(() => {\n            currentSelectors[selector] = selectorChangedData[selector];\n          });\n          return {\n            unbind: () => {\n              deleteFromCallbackMap(selectorChangedData, selector, callback);\n              deleteFromCallbackMap(currentSelectors, selector, callback);\n            }\n          };\n        }\n      };\n    };\n\n    const isAttachedToDom = node => {\n      return !!(node && node.ownerDocument) && contains(SugarElement.fromDom(node.ownerDocument), SugarElement.fromDom(node));\n    };\n    const isValidRange = rng => {\n      if (!rng) {\n        return false;\n      } else {\n        return isAttachedToDom(rng.startContainer) && isAttachedToDom(rng.endContainer);\n      }\n    };\n    const EditorSelection = (dom, win, serializer, editor) => {\n      let selectedRange;\n      let explicitRange;\n      const {selectorChangedWithUnbind} = SelectorChanged(dom, editor);\n      const setCursorLocation = (node, offset) => {\n        const rng = dom.createRng();\n        if (isNonNullable(node) && isNonNullable(offset)) {\n          rng.setStart(node, offset);\n          rng.setEnd(node, offset);\n          setRng(rng);\n          collapse(false);\n        } else {\n          moveEndPoint(dom, rng, editor.getBody(), true);\n          setRng(rng);\n        }\n      };\n      const getContent = args => getContent$1(editor, args);\n      const setContent = (content, args) => setContent$1(editor, content, args);\n      const getStart$1 = real => getStart(editor.getBody(), getRng$1(), real);\n      const getEnd = real => getEnd$1(editor.getBody(), getRng$1(), real);\n      const getBookmark = (type, normalized) => bookmarkManager.getBookmark(type, normalized);\n      const moveToBookmark = bookmark => bookmarkManager.moveToBookmark(bookmark);\n      const select$1 = (node, content) => {\n        select(dom, node, content).each(setRng);\n        return node;\n      };\n      const isCollapsed = () => {\n        const rng = getRng$1(), sel = getSel();\n        if (!rng || rng.item) {\n          return false;\n        }\n        if (rng.compareEndPoints) {\n          return rng.compareEndPoints('StartToEnd', rng) === 0;\n        }\n        return !sel || rng.collapsed;\n      };\n      const collapse = toStart => {\n        const rng = getRng$1();\n        rng.collapse(!!toStart);\n        setRng(rng);\n      };\n      const getSel = () => win.getSelection ? win.getSelection() : win.document.selection;\n      const getRng$1 = () => {\n        let rng;\n        const tryCompareBoundaryPoints = (how, sourceRange, destinationRange) => {\n          try {\n            return sourceRange.compareBoundaryPoints(how, destinationRange);\n          } catch (ex) {\n            return -1;\n          }\n        };\n        const doc = win.document;\n        if (isNonNullable(editor.bookmark) && !hasFocus(editor)) {\n          const bookmark = getRng(editor);\n          if (bookmark.isSome()) {\n            return bookmark.map(r => processRanges(editor, [r])[0]).getOr(doc.createRange());\n          }\n        }\n        try {\n          const selection = getSel();\n          if (selection && !isRestrictedNode(selection.anchorNode)) {\n            if (selection.rangeCount > 0) {\n              rng = selection.getRangeAt(0);\n            } else {\n              rng = doc.createRange();\n            }\n            rng = processRanges(editor, [rng])[0];\n          }\n        } catch (ex) {\n        }\n        if (!rng) {\n          rng = doc.createRange();\n        }\n        if (isDocument$1(rng.startContainer) && rng.collapsed) {\n          const elm = dom.getRoot();\n          rng.setStart(elm, 0);\n          rng.setEnd(elm, 0);\n        }\n        if (selectedRange && explicitRange) {\n          if (tryCompareBoundaryPoints(rng.START_TO_START, rng, selectedRange) === 0 && tryCompareBoundaryPoints(rng.END_TO_END, rng, selectedRange) === 0) {\n            rng = explicitRange;\n          } else {\n            selectedRange = null;\n            explicitRange = null;\n          }\n        }\n        return rng;\n      };\n      const setRng = (rng, forward) => {\n        if (!isValidRange(rng)) {\n          return;\n        }\n        const sel = getSel();\n        const evt = editor.dispatch('SetSelectionRange', {\n          range: rng,\n          forward\n        });\n        rng = evt.range;\n        if (sel) {\n          explicitRange = rng;\n          try {\n            sel.removeAllRanges();\n            sel.addRange(rng);\n          } catch (ex) {\n          }\n          if (forward === false && sel.extend) {\n            sel.collapse(rng.endContainer, rng.endOffset);\n            sel.extend(rng.startContainer, rng.startOffset);\n          }\n          selectedRange = sel.rangeCount > 0 ? sel.getRangeAt(0) : null;\n        }\n        if (!rng.collapsed && rng.startContainer === rng.endContainer && (sel === null || sel === void 0 ? void 0 : sel.setBaseAndExtent)) {\n          if (rng.endOffset - rng.startOffset < 2) {\n            if (rng.startContainer.hasChildNodes()) {\n              const node = rng.startContainer.childNodes[rng.startOffset];\n              if (node && node.nodeName === 'IMG') {\n                sel.setBaseAndExtent(rng.startContainer, rng.startOffset, rng.endContainer, rng.endOffset);\n                if (sel.anchorNode !== rng.startContainer || sel.focusNode !== rng.endContainer) {\n                  sel.setBaseAndExtent(node, 0, node, 1);\n                }\n              }\n            }\n          }\n        }\n        editor.dispatch('AfterSetSelectionRange', {\n          range: rng,\n          forward\n        });\n      };\n      const setNode = elm => {\n        setContent(dom.getOuterHTML(elm));\n        return elm;\n      };\n      const getNode$1 = () => getNode(editor.getBody(), getRng$1());\n      const getSelectedBlocks$1 = (startElm, endElm) => getSelectedBlocks(dom, getRng$1(), startElm, endElm);\n      const isForward = () => {\n        const sel = getSel();\n        const anchorNode = sel === null || sel === void 0 ? void 0 : sel.anchorNode;\n        const focusNode = sel === null || sel === void 0 ? void 0 : sel.focusNode;\n        if (!sel || !anchorNode || !focusNode || isRestrictedNode(anchorNode) || isRestrictedNode(focusNode)) {\n          return true;\n        }\n        const anchorRange = dom.createRng();\n        const focusRange = dom.createRng();\n        try {\n          anchorRange.setStart(anchorNode, sel.anchorOffset);\n          anchorRange.collapse(true);\n          focusRange.setStart(focusNode, sel.focusOffset);\n          focusRange.collapse(true);\n        } catch (e) {\n          return true;\n        }\n        return anchorRange.compareBoundaryPoints(anchorRange.START_TO_START, focusRange) <= 0;\n      };\n      const normalize = () => {\n        const rng = getRng$1();\n        const sel = getSel();\n        if (!hasMultipleRanges(sel) && hasAnyRanges(editor)) {\n          const normRng = normalize$2(dom, rng);\n          normRng.each(normRng => {\n            setRng(normRng, isForward());\n          });\n          return normRng.getOr(rng);\n        }\n        return rng;\n      };\n      const selectorChanged = (selector, callback) => {\n        selectorChangedWithUnbind(selector, callback);\n        return exports;\n      };\n      const getScrollContainer = () => {\n        let scrollContainer;\n        let node = dom.getRoot();\n        while (node && node.nodeName !== 'BODY') {\n          if (node.scrollHeight > node.clientHeight) {\n            scrollContainer = node;\n            break;\n          }\n          node = node.parentNode;\n        }\n        return scrollContainer;\n      };\n      const scrollIntoView = (elm, alignToTop) => {\n        if (isNonNullable(elm)) {\n          scrollElementIntoView(editor, elm, alignToTop);\n        } else {\n          scrollRangeIntoView(editor, getRng$1(), alignToTop);\n        }\n      };\n      const placeCaretAt = (clientX, clientY) => setRng(fromPoint(clientX, clientY, editor.getDoc()));\n      const getBoundingClientRect = () => {\n        const rng = getRng$1();\n        return rng.collapsed ? CaretPosition.fromRangeStart(rng).getClientRects()[0] : rng.getBoundingClientRect();\n      };\n      const destroy = () => {\n        win = selectedRange = explicitRange = null;\n        controlSelection.destroy();\n      };\n      const exports = {\n        dom,\n        win,\n        serializer,\n        editor,\n        collapse,\n        setCursorLocation,\n        getContent,\n        setContent,\n        getBookmark,\n        moveToBookmark,\n        select: select$1,\n        isCollapsed,\n        isForward,\n        setNode,\n        getNode: getNode$1,\n        getSel,\n        setRng,\n        getRng: getRng$1,\n        getStart: getStart$1,\n        getEnd,\n        getSelectedBlocks: getSelectedBlocks$1,\n        normalize,\n        selectorChanged,\n        selectorChangedWithUnbind,\n        getScrollContainer,\n        scrollIntoView,\n        placeCaretAt,\n        getBoundingClientRect,\n        destroy\n      };\n      const bookmarkManager = BookmarkManager(exports);\n      const controlSelection = ControlSelection(exports, editor);\n      exports.bookmarkManager = bookmarkManager;\n      exports.controlSelection = controlSelection;\n      return exports;\n    };\n\n    const register$3 = (htmlParser, settings, dom) => {\n      htmlParser.addAttributeFilter('data-mce-tabindex', (nodes, name) => {\n        let i = nodes.length;\n        while (i--) {\n          const node = nodes[i];\n          node.attr('tabindex', node.attr('data-mce-tabindex'));\n          node.attr(name, null);\n        }\n      });\n      htmlParser.addAttributeFilter('src,href,style', (nodes, name) => {\n        const internalName = 'data-mce-' + name;\n        const urlConverter = settings.url_converter;\n        const urlConverterScope = settings.url_converter_scope;\n        let i = nodes.length;\n        while (i--) {\n          const node = nodes[i];\n          let value = node.attr(internalName);\n          if (value !== undefined) {\n            node.attr(name, value.length > 0 ? value : null);\n            node.attr(internalName, null);\n          } else {\n            value = node.attr(name);\n            if (name === 'style') {\n              value = dom.serializeStyle(dom.parseStyle(value), node.name);\n            } else if (urlConverter) {\n              value = urlConverter.call(urlConverterScope, value, name, node.name);\n            }\n            node.attr(name, value.length > 0 ? value : null);\n          }\n        }\n      });\n      htmlParser.addAttributeFilter('class', nodes => {\n        let i = nodes.length;\n        while (i--) {\n          const node = nodes[i];\n          let value = node.attr('class');\n          if (value) {\n            value = value.replace(/(?:^|\\s)mce-item-\\w+(?!\\S)/g, '');\n            node.attr('class', value.length > 0 ? value : null);\n          }\n        }\n      });\n      htmlParser.addAttributeFilter('data-mce-type', (nodes, name, args) => {\n        let i = nodes.length;\n        while (i--) {\n          const node = nodes[i];\n          if (node.attr('data-mce-type') === 'bookmark' && !args.cleanup) {\n            const hasChildren = Optional.from(node.firstChild).exists(firstChild => {\n              var _a;\n              return !isZwsp((_a = firstChild.value) !== null && _a !== void 0 ? _a : '');\n            });\n            if (hasChildren) {\n              node.unwrap();\n            } else {\n              node.remove();\n            }\n          }\n        }\n      });\n      htmlParser.addNodeFilter('noscript', nodes => {\n        var _a;\n        let i = nodes.length;\n        while (i--) {\n          const node = nodes[i].firstChild;\n          if (node) {\n            node.value = Entities.decode((_a = node.value) !== null && _a !== void 0 ? _a : '');\n          }\n        }\n      });\n      htmlParser.addNodeFilter('script,style', (nodes, name) => {\n        var _a;\n        const trim = value => {\n          return value.replace(/(<!--\\[CDATA\\[|\\]\\]-->)/g, '\\n').replace(/^[\\r\\n]*|[\\r\\n]*$/g, '').replace(/^\\s*((<!--)?(\\s*\\/\\/)?\\s*<!\\[CDATA\\[|(<!--\\s*)?\\/\\*\\s*<!\\[CDATA\\[\\s*\\*\\/|(\\/\\/)?\\s*<!--|\\/\\*\\s*<!--\\s*\\*\\/)\\s*[\\r\\n]*/gi, '').replace(/\\s*(\\/\\*\\s*\\]\\]>\\s*\\*\\/(-->)?|\\s*\\/\\/\\s*\\]\\]>(-->)?|\\/\\/\\s*(-->)?|\\]\\]>|\\/\\*\\s*-->\\s*\\*\\/|\\s*-->\\s*)\\s*$/g, '');\n        };\n        let i = nodes.length;\n        while (i--) {\n          const node = nodes[i];\n          const firstChild = node.firstChild;\n          const value = (_a = firstChild === null || firstChild === void 0 ? void 0 : firstChild.value) !== null && _a !== void 0 ? _a : '';\n          if (name === 'script') {\n            const type = node.attr('type');\n            if (type) {\n              node.attr('type', type === 'mce-no/type' ? null : type.replace(/^mce\\-/, ''));\n            }\n            if (settings.element_format === 'xhtml' && firstChild && value.length > 0) {\n              firstChild.value = '// <![CDATA[\\n' + trim(value) + '\\n// ]]>';\n            }\n          } else {\n            if (settings.element_format === 'xhtml' && firstChild && value.length > 0) {\n              firstChild.value = '<!--\\n' + trim(value) + '\\n-->';\n            }\n          }\n        }\n      });\n      htmlParser.addNodeFilter('#comment', nodes => {\n        let i = nodes.length;\n        while (i--) {\n          const node = nodes[i];\n          const value = node.value;\n          if (settings.preserve_cdata && (value === null || value === void 0 ? void 0 : value.indexOf('[CDATA[')) === 0) {\n            node.name = '#cdata';\n            node.type = 4;\n            node.value = dom.decode(value.replace(/^\\[CDATA\\[|\\]\\]$/g, ''));\n          } else if ((value === null || value === void 0 ? void 0 : value.indexOf('mce:protected ')) === 0) {\n            node.name = '#text';\n            node.type = 3;\n            node.raw = true;\n            node.value = unescape(value).substr(14);\n          }\n        }\n      });\n      htmlParser.addNodeFilter('xml:namespace,input', (nodes, name) => {\n        let i = nodes.length;\n        while (i--) {\n          const node = nodes[i];\n          if (node.type === 7) {\n            node.remove();\n          } else if (node.type === 1) {\n            if (name === 'input' && !node.attr('type')) {\n              node.attr('type', 'text');\n            }\n          }\n        }\n      });\n      htmlParser.addAttributeFilter('data-mce-type', nodes => {\n        each$e(nodes, node => {\n          if (node.attr('data-mce-type') === 'format-caret') {\n            if (node.isEmpty(htmlParser.schema.getNonEmptyElements())) {\n              node.remove();\n            } else {\n              node.unwrap();\n            }\n          }\n        });\n      });\n      htmlParser.addAttributeFilter('data-mce-src,data-mce-href,data-mce-style,' + 'data-mce-selected,data-mce-expando,' + 'data-mce-type,data-mce-resize,data-mce-placeholder', (nodes, name) => {\n        let i = nodes.length;\n        while (i--) {\n          nodes[i].attr(name, null);\n        }\n      });\n    };\n    const trimTrailingBr = rootNode => {\n      const isBr = node => {\n        return (node === null || node === void 0 ? void 0 : node.name) === 'br';\n      };\n      const brNode1 = rootNode.lastChild;\n      if (isBr(brNode1)) {\n        const brNode2 = brNode1.prev;\n        if (isBr(brNode2)) {\n          brNode1.remove();\n          brNode2.remove();\n        }\n      }\n    };\n\n    const preProcess$1 = (editor, node, args) => {\n      let oldDoc;\n      const dom = editor.dom;\n      let clonedNode = node.cloneNode(true);\n      const impl = document.implementation;\n      if (impl.createHTMLDocument) {\n        const doc = impl.createHTMLDocument('');\n        Tools.each(clonedNode.nodeName === 'BODY' ? clonedNode.childNodes : [clonedNode], node => {\n          doc.body.appendChild(doc.importNode(node, true));\n        });\n        if (clonedNode.nodeName !== 'BODY') {\n          clonedNode = doc.body.firstChild;\n        } else {\n          clonedNode = doc.body;\n        }\n        oldDoc = dom.doc;\n        dom.doc = doc;\n      }\n      firePreProcess(editor, {\n        ...args,\n        node: clonedNode\n      });\n      if (oldDoc) {\n        dom.doc = oldDoc;\n      }\n      return clonedNode;\n    };\n    const shouldFireEvent = (editor, args) => {\n      return isNonNullable(editor) && editor.hasEventListeners('PreProcess') && !args.no_events;\n    };\n    const process$1 = (editor, node, args) => {\n      return shouldFireEvent(editor, args) ? preProcess$1(editor, node, args) : node;\n    };\n\n    const addTempAttr = (htmlParser, tempAttrs, name) => {\n      if (Tools.inArray(tempAttrs, name) === -1) {\n        htmlParser.addAttributeFilter(name, (nodes, name) => {\n          let i = nodes.length;\n          while (i--) {\n            nodes[i].attr(name, null);\n          }\n        });\n        tempAttrs.push(name);\n      }\n    };\n    const postProcess = (editor, args, content) => {\n      if (!args.no_events && editor) {\n        const outArgs = firePostProcess(editor, {\n          ...args,\n          content\n        });\n        return outArgs.content;\n      } else {\n        return content;\n      }\n    };\n    const getHtmlFromNode = (dom, node, args) => {\n      const html = trim$1(args.getInner ? node.innerHTML : dom.getOuterHTML(node));\n      return args.selection || isWsPreserveElement(SugarElement.fromDom(node)) ? html : Tools.trim(html);\n    };\n    const parseHtml = (htmlParser, html, args) => {\n      const parserArgs = args.selection ? {\n        forced_root_block: false,\n        ...args\n      } : args;\n      const rootNode = htmlParser.parse(html, parserArgs);\n      trimTrailingBr(rootNode);\n      return rootNode;\n    };\n    const serializeNode = (settings, schema, node) => {\n      const htmlSerializer = HtmlSerializer(settings, schema);\n      return htmlSerializer.serialize(node);\n    };\n    const toHtml = (editor, settings, schema, rootNode, args) => {\n      const content = serializeNode(settings, schema, rootNode);\n      return postProcess(editor, args, content);\n    };\n    const DomSerializerImpl = (settings, editor) => {\n      const tempAttrs = ['data-mce-selected'];\n      const dom = editor && editor.dom ? editor.dom : DOMUtils.DOM;\n      const schema = editor && editor.schema ? editor.schema : Schema(settings);\n      settings.entity_encoding = settings.entity_encoding || 'named';\n      settings.remove_trailing_brs = 'remove_trailing_brs' in settings ? settings.remove_trailing_brs : true;\n      const htmlParser = DomParser(settings, schema);\n      register$3(htmlParser, settings, dom);\n      const serialize = (node, parserArgs = {}) => {\n        const args = {\n          format: 'html',\n          ...parserArgs\n        };\n        const targetNode = process$1(editor, node, args);\n        const html = getHtmlFromNode(dom, targetNode, args);\n        const rootNode = parseHtml(htmlParser, html, args);\n        return args.format === 'tree' ? rootNode : toHtml(editor, settings, schema, rootNode, args);\n      };\n      return {\n        schema,\n        addNodeFilter: htmlParser.addNodeFilter,\n        addAttributeFilter: htmlParser.addAttributeFilter,\n        serialize: serialize,\n        addRules: schema.addValidElements,\n        setRules: schema.setValidElements,\n        addTempAttr: curry(addTempAttr, htmlParser, tempAttrs),\n        getTempAttrs: constant(tempAttrs),\n        getNodeFilters: htmlParser.getNodeFilters,\n        getAttributeFilters: htmlParser.getAttributeFilters,\n        removeNodeFilter: htmlParser.removeNodeFilter,\n        removeAttributeFilter: htmlParser.removeAttributeFilter\n      };\n    };\n\n    const DomSerializer = (settings, editor) => {\n      const domSerializer = DomSerializerImpl(settings, editor);\n      return {\n        schema: domSerializer.schema,\n        addNodeFilter: domSerializer.addNodeFilter,\n        addAttributeFilter: domSerializer.addAttributeFilter,\n        serialize: domSerializer.serialize,\n        addRules: domSerializer.addRules,\n        setRules: domSerializer.setRules,\n        addTempAttr: domSerializer.addTempAttr,\n        getTempAttrs: domSerializer.getTempAttrs,\n        getNodeFilters: domSerializer.getNodeFilters,\n        getAttributeFilters: domSerializer.getAttributeFilters,\n        removeNodeFilter: domSerializer.removeNodeFilter,\n        removeAttributeFilter: domSerializer.removeAttributeFilter\n      };\n    };\n\n    const defaultFormat$1 = 'html';\n    const setupArgs$1 = (args, format) => ({\n      ...args,\n      format,\n      get: true,\n      getInner: true\n    });\n    const getContent = (editor, args = {}) => {\n      const format = args.format ? args.format : defaultFormat$1;\n      const defaultedArgs = setupArgs$1(args, format);\n      return preProcessGetContent(editor, defaultedArgs).fold(identity, updatedArgs => {\n        const content = getContent$2(editor, updatedArgs);\n        return postProcessGetContent(editor, content, updatedArgs);\n      });\n    };\n\n    const defaultFormat = 'html';\n    const setupArgs = (args, content) => ({\n      format: defaultFormat,\n      ...args,\n      set: true,\n      content\n    });\n    const setContent = (editor, content, args = {}) => {\n      const defaultedArgs = setupArgs(args, content);\n      return preProcessSetContent(editor, defaultedArgs).map(updatedArgs => {\n        const result = setContent$2(editor, updatedArgs.content, updatedArgs);\n        postProcessSetContent(editor, result.html, updatedArgs);\n        return result.content;\n      }).getOr(content);\n    };\n\n    const removedOptions = ('autoresize_on_init,content_editable_state,padd_empty_with_br,block_elements,' + 'boolean_attributes,editor_deselector,editor_selector,elements,file_browser_callback_types,filepicker_validator_handler,' + 'force_hex_style_colors,force_p_newlines,gecko_spellcheck,images_dataimg_filter,media_scripts,mode,move_caret_before_on_enter_elements,' + 'non_empty_elements,self_closing_elements,short_ended_elements,special,spellchecker_select_languages,spellchecker_whitelist,' + 'tab_focus,tabfocus_elements,table_responsive_width,text_block_elements,text_inline_elements,toolbar_drawer,types,validate,whitespace_elements,' + 'paste_enable_default_filters,paste_filter_drop,paste_word_valid_elements,paste_retain_style_properties,paste_convert_word_fake_lists').split(',');\n    const removedPlugins = 'bbcode,colorpicker,contextmenu,fullpage,legacyoutput,spellchecker,textcolor'.split(',');\n    const getRemovedOptions = options => {\n      const settingNames = filter$5(removedOptions, setting => has$2(options, setting));\n      const forcedRootBlock = options.forced_root_block;\n      if (forcedRootBlock === false || forcedRootBlock === '') {\n        settingNames.push('forced_root_block (false only)');\n      }\n      return sort(settingNames);\n    };\n    const getRemovedPlugins = options => {\n      const plugins = Tools.makeMap(options.plugins, ' ');\n      const hasPlugin = plugin => has$2(plugins, plugin);\n      const pluginNames = filter$5(removedPlugins, hasPlugin);\n      return sort(pluginNames);\n    };\n    const logRemovedWarnings = (rawOptions, normalizedOptions) => {\n      const removedOptions = getRemovedOptions(rawOptions);\n      const removedPlugins = getRemovedPlugins(normalizedOptions);\n      const hasRemovedPlugins = removedPlugins.length > 0;\n      const hasRemovedOptions = removedOptions.length > 0;\n      const isLegacyMobileTheme = normalizedOptions.theme === 'mobile';\n      if (hasRemovedPlugins || hasRemovedOptions || isLegacyMobileTheme) {\n        const listJoiner = '\\n- ';\n        const themesMessage = isLegacyMobileTheme ? `\\n\\nThemes:${ listJoiner }mobile` : '';\n        const pluginsMessage = hasRemovedPlugins ? `\\n\\nPlugins:${ listJoiner }${ removedPlugins.join(listJoiner) }` : '';\n        const optionsMessage = hasRemovedOptions ? `\\n\\nOptions:${ listJoiner }${ removedOptions.join(listJoiner) }` : '';\n        console.warn('The following deprecated features are currently enabled and have been removed in TinyMCE 6.0. These features will no longer work and should be removed from the TinyMCE configuration. ' + 'See https://www.tiny.cloud/docs/tinymce/6/migration-from-5x/ for more information.' + themesMessage + pluginsMessage + optionsMessage);\n      }\n    };\n    const logWarnings = (rawOptions, normalizedOptions) => {\n      logRemovedWarnings(rawOptions, normalizedOptions);\n    };\n\n    const DOM$8 = DOMUtils.DOM;\n    const restoreOriginalStyles = editor => {\n      DOM$8.setStyle(editor.id, 'display', editor.orgDisplay);\n    };\n    const safeDestroy = x => Optional.from(x).each(x => x.destroy());\n    const clearDomReferences = editor => {\n      const ed = editor;\n      ed.contentAreaContainer = ed.formElement = ed.container = ed.editorContainer = null;\n      ed.bodyElement = ed.contentDocument = ed.contentWindow = null;\n      ed.iframeElement = ed.targetElm = null;\n      const selection = editor.selection;\n      if (selection) {\n        const dom = selection.dom;\n        ed.selection = selection.win = selection.dom = dom.doc = null;\n      }\n    };\n    const restoreForm = editor => {\n      const form = editor.formElement;\n      if (form) {\n        if (form._mceOldSubmit) {\n          form.submit = form._mceOldSubmit;\n          delete form._mceOldSubmit;\n        }\n        DOM$8.unbind(form, 'submit reset', editor.formEventDelegate);\n      }\n    };\n    const remove$1 = editor => {\n      if (!editor.removed) {\n        const {_selectionOverrides, editorUpload} = editor;\n        const body = editor.getBody();\n        const element = editor.getElement();\n        if (body) {\n          editor.save({ is_removing: true });\n        }\n        editor.removed = true;\n        editor.unbindAllNativeEvents();\n        if (editor.hasHiddenInput && isNonNullable(element === null || element === void 0 ? void 0 : element.nextSibling)) {\n          DOM$8.remove(element.nextSibling);\n        }\n        fireRemove(editor);\n        editor.editorManager.remove(editor);\n        if (!editor.inline && body) {\n          restoreOriginalStyles(editor);\n        }\n        fireDetach(editor);\n        DOM$8.remove(editor.getContainer());\n        safeDestroy(_selectionOverrides);\n        safeDestroy(editorUpload);\n        editor.destroy();\n      }\n    };\n    const destroy = (editor, automatic) => {\n      const {selection, dom} = editor;\n      if (editor.destroyed) {\n        return;\n      }\n      if (!automatic && !editor.removed) {\n        editor.remove();\n        return;\n      }\n      if (!automatic) {\n        editor.editorManager.off('beforeunload', editor._beforeUnload);\n        if (editor.theme && editor.theme.destroy) {\n          editor.theme.destroy();\n        }\n        safeDestroy(selection);\n        safeDestroy(dom);\n      }\n      restoreForm(editor);\n      clearDomReferences(editor);\n      editor.destroyed = true;\n    };\n\n    const CreateIconManager = () => {\n      const lookup = {};\n      const add = (id, iconPack) => {\n        lookup[id] = iconPack;\n      };\n      const get = id => {\n        if (lookup[id]) {\n          return lookup[id];\n        } else {\n          return { icons: {} };\n        }\n      };\n      const has = id => has$2(lookup, id);\n      return {\n        add,\n        get,\n        has\n      };\n    };\n    const IconManager = CreateIconManager();\n\n    const ModelManager = AddOnManager.ModelManager;\n\n    const getProp = (propName, elm) => {\n      const rawElm = elm.dom;\n      return rawElm[propName];\n    };\n    const getComputedSizeProp = (propName, elm) => parseInt(get$7(elm, propName), 10);\n    const getClientWidth = curry(getProp, 'clientWidth');\n    const getClientHeight = curry(getProp, 'clientHeight');\n    const getMarginTop = curry(getComputedSizeProp, 'margin-top');\n    const getMarginLeft = curry(getComputedSizeProp, 'margin-left');\n    const getBoundingClientRect = elm => elm.dom.getBoundingClientRect();\n    const isInsideElementContentArea = (bodyElm, clientX, clientY) => {\n      const clientWidth = getClientWidth(bodyElm);\n      const clientHeight = getClientHeight(bodyElm);\n      return clientX >= 0 && clientY >= 0 && clientX <= clientWidth && clientY <= clientHeight;\n    };\n    const transpose = (inline, elm, clientX, clientY) => {\n      const clientRect = getBoundingClientRect(elm);\n      const deltaX = inline ? clientRect.left + elm.dom.clientLeft + getMarginLeft(elm) : 0;\n      const deltaY = inline ? clientRect.top + elm.dom.clientTop + getMarginTop(elm) : 0;\n      const x = clientX - deltaX;\n      const y = clientY - deltaY;\n      return {\n        x,\n        y\n      };\n    };\n    const isXYInContentArea = (editor, clientX, clientY) => {\n      const bodyElm = SugarElement.fromDom(editor.getBody());\n      const targetElm = editor.inline ? bodyElm : documentElement(bodyElm);\n      const transposedPoint = transpose(editor.inline, targetElm, clientX, clientY);\n      return isInsideElementContentArea(targetElm, transposedPoint.x, transposedPoint.y);\n    };\n    const fromDomSafe = node => Optional.from(node).map(SugarElement.fromDom);\n    const isEditorAttachedToDom = editor => {\n      const rawContainer = editor.inline ? editor.getBody() : editor.getContentAreaContainer();\n      return fromDomSafe(rawContainer).map(inBody).getOr(false);\n    };\n\n    var NotificationManagerImpl = () => {\n      const unimplemented = () => {\n        throw new Error('Theme did not provide a NotificationManager implementation.');\n      };\n      return {\n        open: unimplemented,\n        close: unimplemented,\n        getArgs: unimplemented\n      };\n    };\n\n    const NotificationManager = editor => {\n      const notifications = [];\n      const getImplementation = () => {\n        const theme = editor.theme;\n        return theme && theme.getNotificationManagerImpl ? theme.getNotificationManagerImpl() : NotificationManagerImpl();\n      };\n      const getTopNotification = () => {\n        return Optional.from(notifications[0]);\n      };\n      const isEqual = (a, b) => {\n        return a.type === b.type && a.text === b.text && !a.progressBar && !a.timeout && !b.progressBar && !b.timeout;\n      };\n      const reposition = () => {\n        each$e(notifications, notification => {\n          notification.reposition();\n        });\n      };\n      const addNotification = notification => {\n        notifications.push(notification);\n      };\n      const closeNotification = notification => {\n        findIndex$2(notifications, otherNotification => {\n          return otherNotification === notification;\n        }).each(index => {\n          notifications.splice(index, 1);\n        });\n      };\n      const open = (spec, fireEvent = true) => {\n        if (editor.removed || !isEditorAttachedToDom(editor)) {\n          return {};\n        }\n        if (fireEvent) {\n          editor.dispatch('BeforeOpenNotification', { notification: spec });\n        }\n        return find$2(notifications, notification => {\n          return isEqual(getImplementation().getArgs(notification), spec);\n        }).getOrThunk(() => {\n          editor.editorManager.setActive(editor);\n          const notification = getImplementation().open(spec, () => {\n            closeNotification(notification);\n            reposition();\n            getTopNotification().fold(() => editor.focus(), top => focus$1(SugarElement.fromDom(top.getEl())));\n          });\n          addNotification(notification);\n          reposition();\n          editor.dispatch('OpenNotification', { notification: { ...notification } });\n          return notification;\n        });\n      };\n      const close = () => {\n        getTopNotification().each(notification => {\n          getImplementation().close(notification);\n          closeNotification(notification);\n          reposition();\n        });\n      };\n      const getNotifications = constant(notifications);\n      const registerEvents = editor => {\n        editor.on('SkinLoaded', () => {\n          const serviceMessage = getServiceMessage(editor);\n          if (serviceMessage) {\n            open({\n              text: serviceMessage,\n              type: 'warning',\n              timeout: 0\n            }, false);\n          }\n          reposition();\n        });\n        editor.on('show ResizeEditor ResizeWindow NodeChange', () => {\n          requestAnimationFrame(reposition);\n        });\n        editor.on('remove', () => {\n          each$e(notifications.slice(), notification => {\n            getImplementation().close(notification);\n          });\n        });\n      };\n      registerEvents(editor);\n      return {\n        open,\n        close,\n        getNotifications\n      };\n    };\n\n    const PluginManager = AddOnManager.PluginManager;\n\n    const ThemeManager = AddOnManager.ThemeManager;\n\n    var WindowManagerImpl = () => {\n      const unimplemented = () => {\n        throw new Error('Theme did not provide a WindowManager implementation.');\n      };\n      return {\n        open: unimplemented,\n        openUrl: unimplemented,\n        alert: unimplemented,\n        confirm: unimplemented,\n        close: unimplemented\n      };\n    };\n\n    const WindowManager = editor => {\n      let dialogs = [];\n      const getImplementation = () => {\n        const theme = editor.theme;\n        return theme && theme.getWindowManagerImpl ? theme.getWindowManagerImpl() : WindowManagerImpl();\n      };\n      const funcBind = (scope, f) => {\n        return (...args) => {\n          return f ? f.apply(scope, args) : undefined;\n        };\n      };\n      const fireOpenEvent = dialog => {\n        editor.dispatch('OpenWindow', { dialog });\n      };\n      const fireCloseEvent = dialog => {\n        editor.dispatch('CloseWindow', { dialog });\n      };\n      const addDialog = dialog => {\n        dialogs.push(dialog);\n        fireOpenEvent(dialog);\n      };\n      const closeDialog = dialog => {\n        fireCloseEvent(dialog);\n        dialogs = filter$5(dialogs, otherDialog => {\n          return otherDialog !== dialog;\n        });\n        if (dialogs.length === 0) {\n          editor.focus();\n        }\n      };\n      const getTopDialog = () => {\n        return Optional.from(dialogs[dialogs.length - 1]);\n      };\n      const storeSelectionAndOpenDialog = openDialog => {\n        editor.editorManager.setActive(editor);\n        store(editor);\n        editor.ui.show();\n        const dialog = openDialog();\n        addDialog(dialog);\n        return dialog;\n      };\n      const open = (args, params) => {\n        return storeSelectionAndOpenDialog(() => getImplementation().open(args, params, closeDialog));\n      };\n      const openUrl = args => {\n        return storeSelectionAndOpenDialog(() => getImplementation().openUrl(args, closeDialog));\n      };\n      const alert = (message, callback, scope) => {\n        const windowManagerImpl = getImplementation();\n        windowManagerImpl.alert(message, funcBind(scope ? scope : windowManagerImpl, callback));\n      };\n      const confirm = (message, callback, scope) => {\n        const windowManagerImpl = getImplementation();\n        windowManagerImpl.confirm(message, funcBind(scope ? scope : windowManagerImpl, callback));\n      };\n      const close = () => {\n        getTopDialog().each(dialog => {\n          getImplementation().close(dialog);\n          closeDialog(dialog);\n        });\n      };\n      editor.on('remove', () => {\n        each$e(dialogs, dialog => {\n          getImplementation().close(dialog);\n        });\n      });\n      return {\n        open,\n        openUrl,\n        alert,\n        confirm,\n        close\n      };\n    };\n\n    const displayNotification = (editor, message) => {\n      editor.notificationManager.open({\n        type: 'error',\n        text: message\n      });\n    };\n    const displayError = (editor, message) => {\n      if (editor._skinLoaded) {\n        displayNotification(editor, message);\n      } else {\n        editor.on('SkinLoaded', () => {\n          displayNotification(editor, message);\n        });\n      }\n    };\n    const uploadError = (editor, message) => {\n      displayError(editor, I18n.translate([\n        'Failed to upload image: {0}',\n        message\n      ]));\n    };\n    const logError = (editor, errorType, msg) => {\n      fireError(editor, errorType, { message: msg });\n      console.error(msg);\n    };\n    const createLoadError = (type, url, name) => name ? `Failed to load ${ type }: ${ name } from url ${ url }` : `Failed to load ${ type } url: ${ url }`;\n    const pluginLoadError = (editor, url, name) => {\n      logError(editor, 'PluginLoadError', createLoadError('plugin', url, name));\n    };\n    const iconsLoadError = (editor, url, name) => {\n      logError(editor, 'IconsLoadError', createLoadError('icons', url, name));\n    };\n    const languageLoadError = (editor, url, name) => {\n      logError(editor, 'LanguageLoadError', createLoadError('language', url, name));\n    };\n    const themeLoadError = (editor, url, name) => {\n      logError(editor, 'ThemeLoadError', createLoadError('theme', url, name));\n    };\n    const modelLoadError = (editor, url, name) => {\n      logError(editor, 'ModelLoadError', createLoadError('model', url, name));\n    };\n    const pluginInitError = (editor, name, err) => {\n      const message = I18n.translate([\n        'Failed to initialize plugin: {0}',\n        name\n      ]);\n      fireError(editor, 'PluginLoadError', { message });\n      initError(message, err);\n      displayError(editor, message);\n    };\n    const initError = (message, ...x) => {\n      const console = window.console;\n      if (console) {\n        if (console.error) {\n          console.error(message, ...x);\n        } else {\n          console.log(message, ...x);\n        }\n      }\n    };\n\n    const isContentCssSkinName = url => /^[a-z0-9\\-]+$/i.test(url);\n    const getContentCssUrls = editor => {\n      return transformToUrls(editor, getContentCss(editor));\n    };\n    const getFontCssUrls = editor => {\n      return transformToUrls(editor, getFontCss(editor));\n    };\n    const transformToUrls = (editor, cssLinks) => {\n      const skinUrl = editor.editorManager.baseURL + '/skins/content';\n      const suffix = editor.editorManager.suffix;\n      const contentCssFile = `content${ suffix }.css`;\n      return map$3(cssLinks, url => {\n        if (isContentCssSkinName(url) && !editor.inline) {\n          return `${ skinUrl }/${ url }/${ contentCssFile }`;\n        } else {\n          return editor.documentBaseURI.toAbsolute(url);\n        }\n      });\n    };\n    const appendContentCssFromSettings = editor => {\n      editor.contentCSS = editor.contentCSS.concat(getContentCssUrls(editor), getFontCssUrls(editor));\n    };\n\n    const filter$1 = always;\n    const bind$1 = (element, event, handler) => bind$2(element, event, filter$1, handler);\n\n    const getAllImages = elm => {\n      return elm ? from(elm.getElementsByTagName('img')) : [];\n    };\n    const ImageScanner = (uploadStatus, blobCache) => {\n      const cachedPromises = {};\n      const findAll = (elm, predicate = always) => {\n        const images = filter$5(getAllImages(elm), img => {\n          const src = img.src;\n          if (img.hasAttribute('data-mce-bogus')) {\n            return false;\n          }\n          if (img.hasAttribute('data-mce-placeholder')) {\n            return false;\n          }\n          if (!src || src === Env.transparentSrc) {\n            return false;\n          }\n          if (startsWith(src, 'blob:')) {\n            return !uploadStatus.isUploaded(src) && predicate(img);\n          }\n          if (startsWith(src, 'data:')) {\n            return predicate(img);\n          }\n          return false;\n        });\n        const promises = map$3(images, img => {\n          const imageSrc = img.src;\n          if (has$2(cachedPromises, imageSrc)) {\n            return cachedPromises[imageSrc].then(imageInfo => {\n              if (isString(imageInfo)) {\n                return imageInfo;\n              } else {\n                return {\n                  image: img,\n                  blobInfo: imageInfo.blobInfo\n                };\n              }\n            });\n          } else {\n            const newPromise = imageToBlobInfo(blobCache, imageSrc).then(blobInfo => {\n              delete cachedPromises[imageSrc];\n              return {\n                image: img,\n                blobInfo\n              };\n            }).catch(error => {\n              delete cachedPromises[imageSrc];\n              return error;\n            });\n            cachedPromises[imageSrc] = newPromise;\n            return newPromise;\n          }\n        });\n        return Promise.all(promises);\n      };\n      return { findAll };\n    };\n\n    const UploadStatus = () => {\n      const PENDING = 1, UPLOADED = 2;\n      let blobUriStatuses = {};\n      const createStatus = (status, resultUri) => {\n        return {\n          status,\n          resultUri\n        };\n      };\n      const hasBlobUri = blobUri => {\n        return blobUri in blobUriStatuses;\n      };\n      const getResultUri = blobUri => {\n        const result = blobUriStatuses[blobUri];\n        return result ? result.resultUri : null;\n      };\n      const isPending = blobUri => {\n        return hasBlobUri(blobUri) ? blobUriStatuses[blobUri].status === PENDING : false;\n      };\n      const isUploaded = blobUri => {\n        return hasBlobUri(blobUri) ? blobUriStatuses[blobUri].status === UPLOADED : false;\n      };\n      const markPending = blobUri => {\n        blobUriStatuses[blobUri] = createStatus(PENDING, null);\n      };\n      const markUploaded = (blobUri, resultUri) => {\n        blobUriStatuses[blobUri] = createStatus(UPLOADED, resultUri);\n      };\n      const removeFailed = blobUri => {\n        delete blobUriStatuses[blobUri];\n      };\n      const destroy = () => {\n        blobUriStatuses = {};\n      };\n      return {\n        hasBlobUri,\n        getResultUri,\n        isPending,\n        isUploaded,\n        markPending,\n        markUploaded,\n        removeFailed,\n        destroy\n      };\n    };\n\n    let count = 0;\n    const seed = () => {\n      const rnd = () => {\n        return Math.round(Math.random() * 4294967295).toString(36);\n      };\n      const now = new Date().getTime();\n      return 's' + now.toString(36) + rnd() + rnd() + rnd();\n    };\n    const uuid = prefix => {\n      return prefix + count++ + seed();\n    };\n\n    const BlobCache = () => {\n      let cache = [];\n      const mimeToExt = mime => {\n        const mimes = {\n          'image/jpeg': 'jpg',\n          'image/jpg': 'jpg',\n          'image/gif': 'gif',\n          'image/png': 'png',\n          'image/apng': 'apng',\n          'image/avif': 'avif',\n          'image/svg+xml': 'svg',\n          'image/webp': 'webp',\n          'image/bmp': 'bmp',\n          'image/tiff': 'tiff'\n        };\n        return mimes[mime.toLowerCase()] || 'dat';\n      };\n      const create = (o, blob, base64, name, filename) => {\n        if (isString(o)) {\n          const id = o;\n          return toBlobInfo({\n            id,\n            name,\n            filename,\n            blob: blob,\n            base64: base64\n          });\n        } else if (isObject(o)) {\n          return toBlobInfo(o);\n        } else {\n          throw new Error('Unknown input type');\n        }\n      };\n      const toBlobInfo = o => {\n        if (!o.blob || !o.base64) {\n          throw new Error('blob and base64 representations of the image are required for BlobInfo to be created');\n        }\n        const id = o.id || uuid('blobid');\n        const name = o.name || id;\n        const blob = o.blob;\n        return {\n          id: constant(id),\n          name: constant(name),\n          filename: constant(o.filename || name + '.' + mimeToExt(blob.type)),\n          blob: constant(blob),\n          base64: constant(o.base64),\n          blobUri: constant(o.blobUri || URL.createObjectURL(blob)),\n          uri: constant(o.uri)\n        };\n      };\n      const add = blobInfo => {\n        if (!get(blobInfo.id())) {\n          cache.push(blobInfo);\n        }\n      };\n      const findFirst = predicate => find$2(cache, predicate).getOrUndefined();\n      const get = id => findFirst(cachedBlobInfo => cachedBlobInfo.id() === id);\n      const getByUri = blobUri => findFirst(blobInfo => blobInfo.blobUri() === blobUri);\n      const getByData = (base64, type) => findFirst(blobInfo => blobInfo.base64() === base64 && blobInfo.blob().type === type);\n      const removeByUri = blobUri => {\n        cache = filter$5(cache, blobInfo => {\n          if (blobInfo.blobUri() === blobUri) {\n            URL.revokeObjectURL(blobInfo.blobUri());\n            return false;\n          }\n          return true;\n        });\n      };\n      const destroy = () => {\n        each$e(cache, cachedBlobInfo => {\n          URL.revokeObjectURL(cachedBlobInfo.blobUri());\n        });\n        cache = [];\n      };\n      return {\n        create,\n        add,\n        get,\n        getByUri,\n        getByData,\n        findFirst,\n        removeByUri,\n        destroy\n      };\n    };\n\n    const Uploader = (uploadStatus, settings) => {\n      const pendingPromises = {};\n      const pathJoin = (path1, path2) => {\n        if (path1) {\n          return path1.replace(/\\/$/, '') + '/' + path2.replace(/^\\//, '');\n        }\n        return path2;\n      };\n      const defaultHandler = (blobInfo, progress) => new Promise((success, failure) => {\n        const xhr = new XMLHttpRequest();\n        xhr.open('POST', settings.url);\n        xhr.withCredentials = settings.credentials;\n        xhr.upload.onprogress = e => {\n          progress(e.loaded / e.total * 100);\n        };\n        xhr.onerror = () => {\n          failure('Image upload failed due to a XHR Transport error. Code: ' + xhr.status);\n        };\n        xhr.onload = () => {\n          if (xhr.status < 200 || xhr.status >= 300) {\n            failure('HTTP Error: ' + xhr.status);\n            return;\n          }\n          const json = JSON.parse(xhr.responseText);\n          if (!json || !isString(json.location)) {\n            failure('Invalid JSON: ' + xhr.responseText);\n            return;\n          }\n          success(pathJoin(settings.basePath, json.location));\n        };\n        const formData = new FormData();\n        formData.append('file', blobInfo.blob(), blobInfo.filename());\n        xhr.send(formData);\n      });\n      const uploadHandler = isFunction(settings.handler) ? settings.handler : defaultHandler;\n      const noUpload = () => new Promise(resolve => {\n        resolve([]);\n      });\n      const handlerSuccess = (blobInfo, url) => ({\n        url,\n        blobInfo,\n        status: true\n      });\n      const handlerFailure = (blobInfo, error) => ({\n        url: '',\n        blobInfo,\n        status: false,\n        error\n      });\n      const resolvePending = (blobUri, result) => {\n        Tools.each(pendingPromises[blobUri], resolve => {\n          resolve(result);\n        });\n        delete pendingPromises[blobUri];\n      };\n      const uploadBlobInfo = (blobInfo, handler, openNotification) => {\n        uploadStatus.markPending(blobInfo.blobUri());\n        return new Promise(resolve => {\n          let notification;\n          let progress;\n          try {\n            const closeNotification = () => {\n              if (notification) {\n                notification.close();\n                progress = noop;\n              }\n            };\n            const success = url => {\n              closeNotification();\n              uploadStatus.markUploaded(blobInfo.blobUri(), url);\n              resolvePending(blobInfo.blobUri(), handlerSuccess(blobInfo, url));\n              resolve(handlerSuccess(blobInfo, url));\n            };\n            const failure = error => {\n              closeNotification();\n              uploadStatus.removeFailed(blobInfo.blobUri());\n              resolvePending(blobInfo.blobUri(), handlerFailure(blobInfo, error));\n              resolve(handlerFailure(blobInfo, error));\n            };\n            progress = percent => {\n              if (percent < 0 || percent > 100) {\n                return;\n              }\n              Optional.from(notification).orThunk(() => Optional.from(openNotification).map(apply$1)).each(n => {\n                notification = n;\n                n.progressBar.value(percent);\n              });\n            };\n            handler(blobInfo, progress).then(success, err => {\n              failure(isString(err) ? { message: err } : err);\n            });\n          } catch (ex) {\n            resolve(handlerFailure(blobInfo, ex));\n          }\n        });\n      };\n      const isDefaultHandler = handler => handler === defaultHandler;\n      const pendingUploadBlobInfo = blobInfo => {\n        const blobUri = blobInfo.blobUri();\n        return new Promise(resolve => {\n          pendingPromises[blobUri] = pendingPromises[blobUri] || [];\n          pendingPromises[blobUri].push(resolve);\n        });\n      };\n      const uploadBlobs = (blobInfos, openNotification) => {\n        blobInfos = Tools.grep(blobInfos, blobInfo => !uploadStatus.isUploaded(blobInfo.blobUri()));\n        return Promise.all(Tools.map(blobInfos, blobInfo => uploadStatus.isPending(blobInfo.blobUri()) ? pendingUploadBlobInfo(blobInfo) : uploadBlobInfo(blobInfo, uploadHandler, openNotification)));\n      };\n      const upload = (blobInfos, openNotification) => !settings.url && isDefaultHandler(uploadHandler) ? noUpload() : uploadBlobs(blobInfos, openNotification);\n      return { upload };\n    };\n\n    const openNotification = editor => () => editor.notificationManager.open({\n      text: editor.translate('Image uploading...'),\n      type: 'info',\n      timeout: -1,\n      progressBar: true\n    });\n    const createUploader = (editor, uploadStatus) => Uploader(uploadStatus, {\n      url: getImageUploadUrl(editor),\n      basePath: getImageUploadBasePath(editor),\n      credentials: getImagesUploadCredentials(editor),\n      handler: getImagesUploadHandler(editor)\n    });\n    const ImageUploader = editor => {\n      const uploadStatus = UploadStatus();\n      const uploader = createUploader(editor, uploadStatus);\n      return { upload: (blobInfos, showNotification = true) => uploader.upload(blobInfos, showNotification ? openNotification(editor) : undefined) };\n    };\n\n    const EditorUpload = editor => {\n      const blobCache = BlobCache();\n      let uploader, imageScanner;\n      const uploadStatus = UploadStatus();\n      const urlFilters = [];\n      const aliveGuard = callback => {\n        return result => {\n          if (editor.selection) {\n            return callback(result);\n          }\n          return [];\n        };\n      };\n      const cacheInvalidator = url => url + (url.indexOf('?') === -1 ? '?' : '&') + new Date().getTime();\n      const replaceString = (content, search, replace) => {\n        let index = 0;\n        do {\n          index = content.indexOf(search, index);\n          if (index !== -1) {\n            content = content.substring(0, index) + replace + content.substr(index + search.length);\n            index += replace.length - search.length + 1;\n          }\n        } while (index !== -1);\n        return content;\n      };\n      const replaceImageUrl = (content, targetUrl, replacementUrl) => {\n        const replacementString = `src=\"${ replacementUrl }\"${ replacementUrl === Env.transparentSrc ? ' data-mce-placeholder=\"1\"' : '' }`;\n        content = replaceString(content, `src=\"${ targetUrl }\"`, replacementString);\n        content = replaceString(content, 'data-mce-src=\"' + targetUrl + '\"', 'data-mce-src=\"' + replacementUrl + '\"');\n        return content;\n      };\n      const replaceUrlInUndoStack = (targetUrl, replacementUrl) => {\n        each$e(editor.undoManager.data, level => {\n          if (level.type === 'fragmented') {\n            level.fragments = map$3(level.fragments, fragment => replaceImageUrl(fragment, targetUrl, replacementUrl));\n          } else {\n            level.content = replaceImageUrl(level.content, targetUrl, replacementUrl);\n          }\n        });\n      };\n      const replaceImageUriInView = (image, resultUri) => {\n        const src = editor.convertURL(resultUri, 'src');\n        replaceUrlInUndoStack(image.src, resultUri);\n        setAll$1(SugarElement.fromDom(image), {\n          'src': shouldReuseFileName(editor) ? cacheInvalidator(resultUri) : resultUri,\n          'data-mce-src': src\n        });\n      };\n      const uploadImages = () => {\n        if (!uploader) {\n          uploader = createUploader(editor, uploadStatus);\n        }\n        return scanForImages().then(aliveGuard(imageInfos => {\n          const blobInfos = map$3(imageInfos, imageInfo => imageInfo.blobInfo);\n          return uploader.upload(blobInfos, openNotification(editor)).then(aliveGuard(result => {\n            const imagesToRemove = [];\n            let shouldDispatchChange = false;\n            const filteredResult = map$3(result, (uploadInfo, index) => {\n              const {blobInfo, image} = imageInfos[index];\n              let removed = false;\n              if (uploadInfo.status && shouldReplaceBlobUris(editor)) {\n                if (uploadInfo.url && !contains$1(image.src, uploadInfo.url)) {\n                  shouldDispatchChange = true;\n                }\n                blobCache.removeByUri(image.src);\n                if (isRtc(editor)) ; else {\n                  replaceImageUriInView(image, uploadInfo.url);\n                }\n              } else if (uploadInfo.error) {\n                if (uploadInfo.error.remove) {\n                  replaceUrlInUndoStack(image.src, Env.transparentSrc);\n                  imagesToRemove.push(image);\n                  removed = true;\n                }\n                uploadError(editor, uploadInfo.error.message);\n              }\n              return {\n                element: image,\n                status: uploadInfo.status,\n                uploadUri: uploadInfo.url,\n                blobInfo,\n                removed\n              };\n            });\n            if (imagesToRemove.length > 0 && !isRtc(editor)) {\n              editor.undoManager.transact(() => {\n                each$e(imagesToRemove, element => {\n                  editor.dom.remove(element);\n                  blobCache.removeByUri(element.src);\n                });\n              });\n            } else if (shouldDispatchChange) {\n              editor.undoManager.dispatchChange();\n            }\n            return filteredResult;\n          }));\n        }));\n      };\n      const uploadImagesAuto = () => isAutomaticUploadsEnabled(editor) ? uploadImages() : Promise.resolve([]);\n      const isValidDataUriImage = imgElm => forall(urlFilters, filter => filter(imgElm));\n      const addFilter = filter => {\n        urlFilters.push(filter);\n      };\n      const scanForImages = () => {\n        if (!imageScanner) {\n          imageScanner = ImageScanner(uploadStatus, blobCache);\n        }\n        return imageScanner.findAll(editor.getBody(), isValidDataUriImage).then(aliveGuard(result => {\n          const filteredResult = filter$5(result, resultItem => {\n            if (isString(resultItem)) {\n              displayError(editor, resultItem);\n              return false;\n            } else {\n              return true;\n            }\n          });\n          if (isRtc(editor)) ; else {\n            each$e(filteredResult, resultItem => {\n              replaceUrlInUndoStack(resultItem.image.src, resultItem.blobInfo.blobUri());\n              resultItem.image.src = resultItem.blobInfo.blobUri();\n              resultItem.image.removeAttribute('data-mce-src');\n            });\n          }\n          return filteredResult;\n        }));\n      };\n      const destroy = () => {\n        blobCache.destroy();\n        uploadStatus.destroy();\n        imageScanner = uploader = null;\n      };\n      const replaceBlobUris = content => {\n        return content.replace(/src=\"(blob:[^\"]+)\"/g, (match, blobUri) => {\n          const resultUri = uploadStatus.getResultUri(blobUri);\n          if (resultUri) {\n            return 'src=\"' + resultUri + '\"';\n          }\n          let blobInfo = blobCache.getByUri(blobUri);\n          if (!blobInfo) {\n            blobInfo = foldl(editor.editorManager.get(), (result, editor) => {\n              return result || editor.editorUpload && editor.editorUpload.blobCache.getByUri(blobUri);\n            }, undefined);\n          }\n          if (blobInfo) {\n            const blob = blobInfo.blob();\n            return 'src=\"data:' + blob.type + ';base64,' + blobInfo.base64() + '\"';\n          }\n          return match;\n        });\n      };\n      editor.on('SetContent', () => {\n        if (isAutomaticUploadsEnabled(editor)) {\n          uploadImagesAuto();\n        } else {\n          scanForImages();\n        }\n      });\n      editor.on('RawSaveContent', e => {\n        e.content = replaceBlobUris(e.content);\n      });\n      editor.on('GetContent', e => {\n        if (e.source_view || e.format === 'raw' || e.format === 'tree') {\n          return;\n        }\n        e.content = replaceBlobUris(e.content);\n      });\n      editor.on('PostRender', () => {\n        editor.parser.addNodeFilter('img', images => {\n          each$e(images, img => {\n            const src = img.attr('src');\n            if (!src || blobCache.getByUri(src)) {\n              return;\n            }\n            const resultUri = uploadStatus.getResultUri(src);\n            if (resultUri) {\n              img.attr('src', resultUri);\n            }\n          });\n        });\n      });\n      return {\n        blobCache,\n        addFilter,\n        uploadImages,\n        uploadImagesAuto,\n        scanForImages,\n        destroy\n      };\n    };\n\n    const get$1 = editor => {\n      const dom = editor.dom;\n      const schemaType = editor.schema.type;\n      const formats = {\n        valigntop: [{\n            selector: 'td,th',\n            styles: { verticalAlign: 'top' }\n          }],\n        valignmiddle: [{\n            selector: 'td,th',\n            styles: { verticalAlign: 'middle' }\n          }],\n        valignbottom: [{\n            selector: 'td,th',\n            styles: { verticalAlign: 'bottom' }\n          }],\n        alignleft: [\n          {\n            selector: 'figure.image',\n            collapsed: false,\n            classes: 'align-left',\n            ceFalseOverride: true,\n            preview: 'font-family font-size'\n          },\n          {\n            selector: 'figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li,pre',\n            styles: { textAlign: 'left' },\n            inherit: false,\n            preview: false\n          },\n          {\n            selector: 'img,audio,video',\n            collapsed: false,\n            styles: { float: 'left' },\n            preview: 'font-family font-size'\n          },\n          {\n            selector: 'table',\n            collapsed: false,\n            styles: {\n              marginLeft: '0px',\n              marginRight: 'auto'\n            },\n            onformat: table => {\n              dom.setStyle(table, 'float', null);\n            },\n            preview: 'font-family font-size'\n          },\n          {\n            selector: '.mce-preview-object,[data-ephox-embed-iri]',\n            ceFalseOverride: true,\n            styles: { float: 'left' }\n          }\n        ],\n        aligncenter: [\n          {\n            selector: 'figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li,pre',\n            styles: { textAlign: 'center' },\n            inherit: false,\n            preview: 'font-family font-size'\n          },\n          {\n            selector: 'figure.image',\n            collapsed: false,\n            classes: 'align-center',\n            ceFalseOverride: true,\n            preview: 'font-family font-size'\n          },\n          {\n            selector: 'img,audio,video',\n            collapsed: false,\n            styles: {\n              display: 'block',\n              marginLeft: 'auto',\n              marginRight: 'auto'\n            },\n            preview: false\n          },\n          {\n            selector: 'table',\n            collapsed: false,\n            styles: {\n              marginLeft: 'auto',\n              marginRight: 'auto'\n            },\n            preview: 'font-family font-size'\n          },\n          {\n            selector: '.mce-preview-object',\n            ceFalseOverride: true,\n            styles: {\n              display: 'table',\n              marginLeft: 'auto',\n              marginRight: 'auto'\n            },\n            preview: false\n          },\n          {\n            selector: '[data-ephox-embed-iri]',\n            ceFalseOverride: true,\n            styles: {\n              marginLeft: 'auto',\n              marginRight: 'auto'\n            },\n            preview: false\n          }\n        ],\n        alignright: [\n          {\n            selector: 'figure.image',\n            collapsed: false,\n            classes: 'align-right',\n            ceFalseOverride: true,\n            preview: 'font-family font-size'\n          },\n          {\n            selector: 'figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li,pre',\n            styles: { textAlign: 'right' },\n            inherit: false,\n            preview: 'font-family font-size'\n          },\n          {\n            selector: 'img,audio,video',\n            collapsed: false,\n            styles: { float: 'right' },\n            preview: 'font-family font-size'\n          },\n          {\n            selector: 'table',\n            collapsed: false,\n            styles: {\n              marginRight: '0px',\n              marginLeft: 'auto'\n            },\n            onformat: table => {\n              dom.setStyle(table, 'float', null);\n            },\n            preview: 'font-family font-size'\n          },\n          {\n            selector: '.mce-preview-object,[data-ephox-embed-iri]',\n            ceFalseOverride: true,\n            styles: { float: 'right' },\n            preview: false\n          }\n        ],\n        alignjustify: [{\n            selector: 'figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li,pre',\n            styles: { textAlign: 'justify' },\n            inherit: false,\n            preview: 'font-family font-size'\n          }],\n        bold: [\n          {\n            inline: 'strong',\n            remove: 'all',\n            preserve_attributes: [\n              'class',\n              'style'\n            ]\n          },\n          {\n            inline: 'span',\n            styles: { fontWeight: 'bold' }\n          },\n          {\n            inline: 'b',\n            remove: 'all',\n            preserve_attributes: [\n              'class',\n              'style'\n            ]\n          }\n        ],\n        italic: [\n          {\n            inline: 'em',\n            remove: 'all',\n            preserve_attributes: [\n              'class',\n              'style'\n            ]\n          },\n          {\n            inline: 'span',\n            styles: { fontStyle: 'italic' }\n          },\n          {\n            inline: 'i',\n            remove: 'all',\n            preserve_attributes: [\n              'class',\n              'style'\n            ]\n          }\n        ],\n        underline: [\n          {\n            inline: 'span',\n            styles: { textDecoration: 'underline' },\n            exact: true\n          },\n          {\n            inline: 'u',\n            remove: 'all',\n            preserve_attributes: [\n              'class',\n              'style'\n            ]\n          }\n        ],\n        strikethrough: (() => {\n          const span = {\n            inline: 'span',\n            styles: { textDecoration: 'line-through' },\n            exact: true\n          };\n          const strike = {\n            inline: 'strike',\n            remove: 'all',\n            preserve_attributes: [\n              'class',\n              'style'\n            ]\n          };\n          const s = {\n            inline: 's',\n            remove: 'all',\n            preserve_attributes: [\n              'class',\n              'style'\n            ]\n          };\n          return schemaType !== 'html4' ? [\n            s,\n            span,\n            strike\n          ] : [\n            span,\n            s,\n            strike\n          ];\n        })(),\n        forecolor: {\n          inline: 'span',\n          styles: { color: '%value' },\n          links: true,\n          remove_similar: true,\n          clear_child_styles: true\n        },\n        hilitecolor: {\n          inline: 'span',\n          styles: { backgroundColor: '%value' },\n          links: true,\n          remove_similar: true,\n          clear_child_styles: true\n        },\n        fontname: {\n          inline: 'span',\n          toggle: false,\n          styles: { fontFamily: '%value' },\n          clear_child_styles: true\n        },\n        fontsize: {\n          inline: 'span',\n          toggle: false,\n          styles: { fontSize: '%value' },\n          clear_child_styles: true\n        },\n        lineheight: {\n          selector: 'h1,h2,h3,h4,h5,h6,p,li,td,th,div',\n          styles: { lineHeight: '%value' }\n        },\n        fontsize_class: {\n          inline: 'span',\n          attributes: { class: '%value' }\n        },\n        blockquote: {\n          block: 'blockquote',\n          wrapper: true,\n          remove: 'all'\n        },\n        subscript: { inline: 'sub' },\n        superscript: { inline: 'sup' },\n        code: { inline: 'code' },\n        link: {\n          inline: 'a',\n          selector: 'a',\n          remove: 'all',\n          split: true,\n          deep: true,\n          onmatch: (node, _fmt, _itemName) => {\n            return isElement$6(node) && node.hasAttribute('href');\n          },\n          onformat: (elm, _fmt, vars) => {\n            Tools.each(vars, (value, key) => {\n              dom.setAttrib(elm, key, value);\n            });\n          }\n        },\n        lang: {\n          inline: 'span',\n          clear_child_styles: true,\n          remove_similar: true,\n          attributes: {\n            'lang': '%value',\n            'data-mce-lang': vars => {\n              var _a;\n              return (_a = vars === null || vars === void 0 ? void 0 : vars.customValue) !== null && _a !== void 0 ? _a : null;\n            }\n          }\n        },\n        removeformat: [\n          {\n            selector: 'b,strong,em,i,font,u,strike,s,sub,sup,dfn,code,samp,kbd,var,cite,mark,q,del,ins,small',\n            remove: 'all',\n            split: true,\n            expand: false,\n            block_expand: true,\n            deep: true\n          },\n          {\n            selector: 'span',\n            attributes: [\n              'style',\n              'class'\n            ],\n            remove: 'empty',\n            split: true,\n            expand: false,\n            deep: true\n          },\n          {\n            selector: '*',\n            attributes: [\n              'style',\n              'class'\n            ],\n            split: false,\n            expand: false,\n            deep: true\n          }\n        ]\n      };\n      Tools.each('p h1 h2 h3 h4 h5 h6 div address pre dt dd samp'.split(/\\s/), name => {\n        formats[name] = {\n          block: name,\n          remove: 'all'\n        };\n      });\n      return formats;\n    };\n\n    const genericBase = {\n      remove_similar: true,\n      inherit: false\n    };\n    const cellBase = {\n      selector: 'td,th',\n      ...genericBase\n    };\n    const cellFormats = {\n      tablecellbackgroundcolor: {\n        styles: { backgroundColor: '%value' },\n        ...cellBase\n      },\n      tablecellverticalalign: {\n        styles: { 'vertical-align': '%value' },\n        ...cellBase\n      },\n      tablecellbordercolor: {\n        styles: { borderColor: '%value' },\n        ...cellBase\n      },\n      tablecellclass: {\n        classes: ['%value'],\n        ...cellBase\n      },\n      tableclass: {\n        selector: 'table',\n        classes: ['%value'],\n        ...genericBase\n      },\n      tablecellborderstyle: {\n        styles: { borderStyle: '%value' },\n        ...cellBase\n      },\n      tablecellborderwidth: {\n        styles: { borderWidth: '%value' },\n        ...cellBase\n      }\n    };\n    const get = constant(cellFormats);\n\n    const FormatRegistry = editor => {\n      const formats = {};\n      const get$2 = name => isNonNullable(name) ? formats[name] : formats;\n      const has = name => has$2(formats, name);\n      const register = (name, format) => {\n        if (name) {\n          if (!isString(name)) {\n            each$d(name, (format, name) => {\n              register(name, format);\n            });\n          } else {\n            if (!isArray$1(format)) {\n              format = [format];\n            }\n            each$e(format, format => {\n              if (isUndefined(format.deep)) {\n                format.deep = !isSelectorFormat(format);\n              }\n              if (isUndefined(format.split)) {\n                format.split = !isSelectorFormat(format) || isInlineFormat(format);\n              }\n              if (isUndefined(format.remove) && isSelectorFormat(format) && !isInlineFormat(format)) {\n                format.remove = 'none';\n              }\n              if (isSelectorFormat(format) && isInlineFormat(format)) {\n                format.mixed = true;\n                format.block_expand = true;\n              }\n              if (isString(format.classes)) {\n                format.classes = format.classes.split(/\\s+/);\n              }\n            });\n            formats[name] = format;\n          }\n        }\n      };\n      const unregister = name => {\n        if (name && formats[name]) {\n          delete formats[name];\n        }\n        return formats;\n      };\n      register(get$1(editor));\n      register(get());\n      register(getFormats(editor));\n      return {\n        get: get$2,\n        has,\n        register,\n        unregister\n      };\n    };\n\n    const each$3 = Tools.each;\n    const dom = DOMUtils.DOM;\n    const isPreviewItem = item => isNonNullable(item) && isObject(item);\n    const parsedSelectorToHtml = (ancestry, editor) => {\n      const schema = editor && editor.schema || Schema({});\n      const decorate = (elm, item) => {\n        if (item.classes.length > 0) {\n          dom.addClass(elm, item.classes.join(' '));\n        }\n        dom.setAttribs(elm, item.attrs);\n      };\n      const createElement = sItem => {\n        const item = isString(sItem) ? {\n          name: sItem,\n          classes: [],\n          attrs: {}\n        } : sItem;\n        const elm = dom.create(item.name);\n        decorate(elm, item);\n        return elm;\n      };\n      const getRequiredParent = (elm, candidate) => {\n        const elmRule = schema.getElementRule(elm.nodeName.toLowerCase());\n        const parentsRequired = elmRule === null || elmRule === void 0 ? void 0 : elmRule.parentsRequired;\n        if (parentsRequired && parentsRequired.length) {\n          return candidate && contains$2(parentsRequired, candidate) ? candidate : parentsRequired[0];\n        } else {\n          return false;\n        }\n      };\n      const wrapInHtml = (elm, ancestors, siblings) => {\n        let parentCandidate;\n        const ancestor = ancestors[0];\n        const ancestorName = isPreviewItem(ancestor) ? ancestor.name : undefined;\n        const parentRequired = getRequiredParent(elm, ancestorName);\n        if (parentRequired) {\n          if (ancestorName === parentRequired) {\n            parentCandidate = ancestor;\n            ancestors = ancestors.slice(1);\n          } else {\n            parentCandidate = parentRequired;\n          }\n        } else if (ancestor) {\n          parentCandidate = ancestor;\n          ancestors = ancestors.slice(1);\n        } else if (!siblings) {\n          return elm;\n        }\n        const parent = parentCandidate ? createElement(parentCandidate) : dom.create('div');\n        parent.appendChild(elm);\n        if (siblings) {\n          Tools.each(siblings, sibling => {\n            const siblingElm = createElement(sibling);\n            parent.insertBefore(siblingElm, elm);\n          });\n        }\n        const parentSiblings = isPreviewItem(parentCandidate) ? parentCandidate.siblings : undefined;\n        return wrapInHtml(parent, ancestors, parentSiblings);\n      };\n      const fragment = dom.create('div');\n      if (ancestry.length > 0) {\n        const item = ancestry[0];\n        const elm = createElement(item);\n        const siblings = isPreviewItem(item) ? item.siblings : undefined;\n        fragment.appendChild(wrapInHtml(elm, ancestry.slice(1), siblings));\n      }\n      return fragment;\n    };\n    const parseSelectorItem = item => {\n      item = Tools.trim(item);\n      let tagName = 'div';\n      const obj = {\n        name: tagName,\n        classes: [],\n        attrs: {},\n        selector: item\n      };\n      if (item !== '*') {\n        tagName = item.replace(/(?:([#\\.]|::?)([\\w\\-]+)|(\\[)([^\\]]+)\\]?)/g, ($0, $1, $2, $3, $4) => {\n          switch ($1) {\n          case '#':\n            obj.attrs.id = $2;\n            break;\n          case '.':\n            obj.classes.push($2);\n            break;\n          case ':':\n            if (Tools.inArray('checked disabled enabled read-only required'.split(' '), $2) !== -1) {\n              obj.attrs[$2] = $2;\n            }\n            break;\n          }\n          if ($3 === '[') {\n            const m = $4.match(/([\\w\\-]+)(?:\\=\\\"([^\\\"]+))?/);\n            if (m) {\n              obj.attrs[m[1]] = m[2];\n            }\n          }\n          return '';\n        });\n      }\n      obj.name = tagName || 'div';\n      return obj;\n    };\n    const parseSelector = selector => {\n      if (!isString(selector)) {\n        return [];\n      }\n      selector = selector.split(/\\s*,\\s*/)[0];\n      selector = selector.replace(/\\s*(~\\+|~|\\+|>)\\s*/g, '$1');\n      return Tools.map(selector.split(/(?:>|\\s+(?![^\\[\\]]+\\]))/), item => {\n        const siblings = Tools.map(item.split(/(?:~\\+|~|\\+)/), parseSelectorItem);\n        const obj = siblings.pop();\n        if (siblings.length) {\n          obj.siblings = siblings;\n        }\n        return obj;\n      }).reverse();\n    };\n    const getCssText = (editor, format) => {\n      let previewCss = '';\n      let previewStyles = getPreviewStyles(editor);\n      if (previewStyles === '') {\n        return '';\n      }\n      const removeVars = val => {\n        return isString(val) ? val.replace(/%(\\w+)/g, '') : '';\n      };\n      const getComputedStyle = (name, elm) => {\n        return dom.getStyle(elm !== null && elm !== void 0 ? elm : editor.getBody(), name, true);\n      };\n      if (isString(format)) {\n        const formats = editor.formatter.get(format);\n        if (!formats) {\n          return '';\n        }\n        format = formats[0];\n      }\n      if ('preview' in format) {\n        const preview = format.preview;\n        if (preview === false) {\n          return '';\n        } else {\n          previewStyles = preview || previewStyles;\n        }\n      }\n      let name = format.block || format.inline || 'span';\n      let previewFrag;\n      const items = parseSelector(format.selector);\n      if (items.length > 0) {\n        if (!items[0].name) {\n          items[0].name = name;\n        }\n        name = format.selector;\n        previewFrag = parsedSelectorToHtml(items, editor);\n      } else {\n        previewFrag = parsedSelectorToHtml([name], editor);\n      }\n      const previewElm = dom.select(name, previewFrag)[0] || previewFrag.firstChild;\n      each$3(format.styles, (value, name) => {\n        const newValue = removeVars(value);\n        if (newValue) {\n          dom.setStyle(previewElm, name, newValue);\n        }\n      });\n      each$3(format.attributes, (value, name) => {\n        const newValue = removeVars(value);\n        if (newValue) {\n          dom.setAttrib(previewElm, name, newValue);\n        }\n      });\n      each$3(format.classes, value => {\n        const newValue = removeVars(value);\n        if (!dom.hasClass(previewElm, newValue)) {\n          dom.addClass(previewElm, newValue);\n        }\n      });\n      editor.dispatch('PreviewFormats');\n      dom.setStyles(previewFrag, {\n        position: 'absolute',\n        left: -65535\n      });\n      editor.getBody().appendChild(previewFrag);\n      const rawParentFontSize = getComputedStyle('fontSize');\n      const parentFontSize = /px$/.test(rawParentFontSize) ? parseInt(rawParentFontSize, 10) : 0;\n      each$3(previewStyles.split(' '), name => {\n        let value = getComputedStyle(name, previewElm);\n        if (name === 'background-color' && /transparent|rgba\\s*\\([^)]+,\\s*0\\)/.test(value)) {\n          value = getComputedStyle(name);\n          if (rgbaToHexString(value).toLowerCase() === '#ffffff') {\n            return;\n          }\n        }\n        if (name === 'color') {\n          if (rgbaToHexString(value).toLowerCase() === '#000000') {\n            return;\n          }\n        }\n        if (name === 'font-size') {\n          if (/em|%$/.test(value)) {\n            if (parentFontSize === 0) {\n              return;\n            }\n            const numValue = parseFloat(value) / (/%$/.test(value) ? 100 : 1);\n            value = numValue * parentFontSize + 'px';\n          }\n        }\n        if (name === 'border' && value) {\n          previewCss += 'padding:0 2px;';\n        }\n        previewCss += name + ':' + value + ';';\n      });\n      editor.dispatch('AfterPreviewFormats');\n      dom.remove(previewFrag);\n      return previewCss;\n    };\n\n    const setup$r = editor => {\n      editor.addShortcut('meta+b', '', 'Bold');\n      editor.addShortcut('meta+i', '', 'Italic');\n      editor.addShortcut('meta+u', '', 'Underline');\n      for (let i = 1; i <= 6; i++) {\n        editor.addShortcut('access+' + i, '', [\n          'FormatBlock',\n          false,\n          'h' + i\n        ]);\n      }\n      editor.addShortcut('access+7', '', [\n        'FormatBlock',\n        false,\n        'p'\n      ]);\n      editor.addShortcut('access+8', '', [\n        'FormatBlock',\n        false,\n        'div'\n      ]);\n      editor.addShortcut('access+9', '', [\n        'FormatBlock',\n        false,\n        'address'\n      ]);\n    };\n\n    const Formatter = editor => {\n      const formats = FormatRegistry(editor);\n      const formatChangeState = Cell({});\n      setup$r(editor);\n      setup$u(editor);\n      if (!isRtc(editor)) {\n        setup$t(formatChangeState, editor);\n      }\n      return {\n        get: formats.get,\n        has: formats.has,\n        register: formats.register,\n        unregister: formats.unregister,\n        apply: (name, vars, node) => {\n          applyFormat(editor, name, vars, node);\n        },\n        remove: (name, vars, node, similar) => {\n          removeFormat(editor, name, vars, node, similar);\n        },\n        toggle: (name, vars, node) => {\n          toggleFormat(editor, name, vars, node);\n        },\n        match: (name, vars, node, similar) => matchFormat(editor, name, vars, node, similar),\n        closest: names => closestFormat(editor, names),\n        matchAll: (names, vars) => matchAllFormats(editor, names, vars),\n        matchNode: (node, name, vars, similar) => matchNodeFormat(editor, node, name, vars, similar),\n        canApply: name => canApplyFormat(editor, name),\n        formatChanged: (formats, callback, similar, vars) => formatChanged(editor, formatChangeState, formats, callback, similar, vars),\n        getCssText: curry(getCssText, editor)\n      };\n    };\n\n    const shouldIgnoreCommand = cmd => {\n      switch (cmd.toLowerCase()) {\n      case 'undo':\n      case 'redo':\n      case 'mcefocus':\n        return true;\n      default:\n        return false;\n      }\n    };\n    const registerEvents = (editor, undoManager, locks) => {\n      const isFirstTypedCharacter = Cell(false);\n      const addNonTypingUndoLevel = e => {\n        setTyping(undoManager, false, locks);\n        undoManager.add({}, e);\n      };\n      editor.on('init', () => {\n        undoManager.add();\n      });\n      editor.on('BeforeExecCommand', e => {\n        const cmd = e.command;\n        if (!shouldIgnoreCommand(cmd)) {\n          endTyping(undoManager, locks);\n          undoManager.beforeChange();\n        }\n      });\n      editor.on('ExecCommand', e => {\n        const cmd = e.command;\n        if (!shouldIgnoreCommand(cmd)) {\n          addNonTypingUndoLevel(e);\n        }\n      });\n      editor.on('ObjectResizeStart cut', () => {\n        undoManager.beforeChange();\n      });\n      editor.on('SaveContent ObjectResized blur', addNonTypingUndoLevel);\n      editor.on('dragend', addNonTypingUndoLevel);\n      editor.on('keyup', e => {\n        const keyCode = e.keyCode;\n        if (e.isDefaultPrevented()) {\n          return;\n        }\n        if (keyCode >= 33 && keyCode <= 36 || keyCode >= 37 && keyCode <= 40 || keyCode === 45 || e.ctrlKey) {\n          addNonTypingUndoLevel();\n          editor.nodeChanged();\n        }\n        if (keyCode === 46 || keyCode === 8) {\n          editor.nodeChanged();\n        }\n        if (isFirstTypedCharacter.get() && undoManager.typing && !isEq$1(createFromEditor(editor), undoManager.data[0])) {\n          if (!editor.isDirty()) {\n            editor.setDirty(true);\n          }\n          editor.dispatch('TypingUndo');\n          isFirstTypedCharacter.set(false);\n          editor.nodeChanged();\n        }\n      });\n      editor.on('keydown', e => {\n        const keyCode = e.keyCode;\n        if (e.isDefaultPrevented()) {\n          return;\n        }\n        if (keyCode >= 33 && keyCode <= 36 || keyCode >= 37 && keyCode <= 40 || keyCode === 45) {\n          if (undoManager.typing) {\n            addNonTypingUndoLevel(e);\n          }\n          return;\n        }\n        const modKey = e.ctrlKey && !e.altKey || e.metaKey;\n        if ((keyCode < 16 || keyCode > 20) && keyCode !== 224 && keyCode !== 91 && !undoManager.typing && !modKey) {\n          undoManager.beforeChange();\n          setTyping(undoManager, true, locks);\n          undoManager.add({}, e);\n          isFirstTypedCharacter.set(true);\n        }\n      });\n      editor.on('mousedown', e => {\n        if (undoManager.typing) {\n          addNonTypingUndoLevel(e);\n        }\n      });\n      const isInsertReplacementText = event => event.inputType === 'insertReplacementText';\n      const isInsertTextDataNull = event => event.inputType === 'insertText' && event.data === null;\n      const isInsertFromPasteOrDrop = event => event.inputType === 'insertFromPaste' || event.inputType === 'insertFromDrop';\n      editor.on('input', e => {\n        if (e.inputType && (isInsertReplacementText(e) || isInsertTextDataNull(e) || isInsertFromPasteOrDrop(e))) {\n          addNonTypingUndoLevel(e);\n        }\n      });\n      editor.on('AddUndo Undo Redo ClearUndos', e => {\n        if (!e.isDefaultPrevented()) {\n          editor.nodeChanged();\n        }\n      });\n    };\n    const addKeyboardShortcuts = editor => {\n      editor.addShortcut('meta+z', '', 'Undo');\n      editor.addShortcut('meta+y,meta+shift+z', '', 'Redo');\n    };\n\n    const UndoManager = editor => {\n      const beforeBookmark = value$2();\n      const locks = Cell(0);\n      const index = Cell(0);\n      const undoManager = {\n        data: [],\n        typing: false,\n        beforeChange: () => {\n          beforeChange(editor, locks, beforeBookmark);\n        },\n        add: (level, event) => {\n          return addUndoLevel(editor, undoManager, index, locks, beforeBookmark, level, event);\n        },\n        dispatchChange: () => {\n          editor.setDirty(true);\n          const level = createFromEditor(editor);\n          level.bookmark = getUndoBookmark(editor.selection);\n          editor.dispatch('change', {\n            level,\n            lastLevel: get$b(undoManager.data, index.get()).getOrUndefined()\n          });\n        },\n        undo: () => {\n          return undo(editor, undoManager, locks, index);\n        },\n        redo: () => {\n          return redo(editor, index, undoManager.data);\n        },\n        clear: () => {\n          clear(editor, undoManager, index);\n        },\n        reset: () => {\n          reset(editor, undoManager);\n        },\n        hasUndo: () => {\n          return hasUndo(editor, undoManager, index);\n        },\n        hasRedo: () => {\n          return hasRedo(editor, undoManager, index);\n        },\n        transact: callback => {\n          return transact(editor, undoManager, locks, callback);\n        },\n        ignore: callback => {\n          ignore(editor, locks, callback);\n        },\n        extra: (callback1, callback2) => {\n          extra(editor, undoManager, index, callback1, callback2);\n        }\n      };\n      if (!isRtc(editor)) {\n        registerEvents(editor, undoManager, locks);\n      }\n      addKeyboardShortcuts(editor);\n      return undoManager;\n    };\n\n    const nonTypingKeycodes = [\n      9,\n      27,\n      VK.HOME,\n      VK.END,\n      19,\n      20,\n      44,\n      144,\n      145,\n      33,\n      34,\n      45,\n      16,\n      17,\n      18,\n      91,\n      92,\n      93,\n      VK.DOWN,\n      VK.UP,\n      VK.LEFT,\n      VK.RIGHT\n    ].concat(Env.browser.isFirefox() ? [224] : []);\n    const placeholderAttr = 'data-mce-placeholder';\n    const isKeyboardEvent = e => e.type === 'keydown' || e.type === 'keyup';\n    const isDeleteEvent = e => {\n      const keyCode = e.keyCode;\n      return keyCode === VK.BACKSPACE || keyCode === VK.DELETE;\n    };\n    const isNonTypingKeyboardEvent = e => {\n      if (isKeyboardEvent(e)) {\n        const keyCode = e.keyCode;\n        return !isDeleteEvent(e) && (VK.metaKeyPressed(e) || e.altKey || keyCode >= 112 && keyCode <= 123 || contains$2(nonTypingKeycodes, keyCode));\n      } else {\n        return false;\n      }\n    };\n    const isTypingKeyboardEvent = e => isKeyboardEvent(e) && !(isDeleteEvent(e) || e.type === 'keyup' && e.keyCode === 229);\n    const isVisuallyEmpty = (dom, rootElm, forcedRootBlock) => {\n      if (isEmpty$2(SugarElement.fromDom(rootElm), false)) {\n        const firstElement = rootElm.firstElementChild;\n        if (!firstElement) {\n          return true;\n        } else if (dom.getStyle(rootElm.firstElementChild, 'padding-left') || dom.getStyle(rootElm.firstElementChild, 'padding-right')) {\n          return false;\n        } else {\n          return forcedRootBlock === firstElement.nodeName.toLowerCase();\n        }\n      } else {\n        return false;\n      }\n    };\n    const setup$q = editor => {\n      var _a;\n      const dom = editor.dom;\n      const rootBlock = getForcedRootBlock(editor);\n      const placeholder = (_a = getPlaceholder(editor)) !== null && _a !== void 0 ? _a : '';\n      const updatePlaceholder = (e, initial) => {\n        if (isNonTypingKeyboardEvent(e)) {\n          return;\n        }\n        const body = editor.getBody();\n        const showPlaceholder = isTypingKeyboardEvent(e) ? false : isVisuallyEmpty(dom, body, rootBlock);\n        const isPlaceholderShown = dom.getAttrib(body, placeholderAttr) !== '';\n        if (isPlaceholderShown !== showPlaceholder || initial) {\n          dom.setAttrib(body, placeholderAttr, showPlaceholder ? placeholder : null);\n          dom.setAttrib(body, 'aria-placeholder', showPlaceholder ? placeholder : null);\n          firePlaceholderToggle(editor, showPlaceholder);\n          editor.on(showPlaceholder ? 'keydown' : 'keyup', updatePlaceholder);\n          editor.off(showPlaceholder ? 'keyup' : 'keydown', updatePlaceholder);\n        }\n      };\n      if (isNotEmpty(placeholder)) {\n        editor.on('init', e => {\n          updatePlaceholder(e, true);\n          editor.on('change SetContent ExecCommand', updatePlaceholder);\n          editor.on('paste', e => Delay.setEditorTimeout(editor, () => updatePlaceholder(e)));\n        });\n      }\n    };\n\n    const blockPosition = (block, position) => ({\n      block,\n      position\n    });\n    const blockBoundary = (from, to) => ({\n      from,\n      to\n    });\n    const getBlockPosition = (rootNode, pos) => {\n      const rootElm = SugarElement.fromDom(rootNode);\n      const containerElm = SugarElement.fromDom(pos.container());\n      return getParentBlock$2(rootElm, containerElm).map(block => blockPosition(block, pos));\n    };\n    const isDifferentBlocks = blockBoundary => !eq(blockBoundary.from.block, blockBoundary.to.block);\n    const hasSameParent = blockBoundary => parent(blockBoundary.from.block).bind(parent1 => parent(blockBoundary.to.block).filter(parent2 => eq(parent1, parent2))).isSome();\n    const isEditable$2 = blockBoundary => isContentEditableFalse$a(blockBoundary.from.block.dom) === false && isContentEditableFalse$a(blockBoundary.to.block.dom) === false;\n    const skipLastBr = (rootNode, forward, blockPosition) => {\n      if (isBr$6(blockPosition.position.getNode()) && !isEmpty$2(blockPosition.block)) {\n        return positionIn(false, blockPosition.block.dom).bind(lastPositionInBlock => {\n          if (lastPositionInBlock.isEqual(blockPosition.position)) {\n            return fromPosition(forward, rootNode, lastPositionInBlock).bind(to => getBlockPosition(rootNode, to));\n          } else {\n            return Optional.some(blockPosition);\n          }\n        }).getOr(blockPosition);\n      } else {\n        return blockPosition;\n      }\n    };\n    const readFromRange = (rootNode, forward, rng) => {\n      const fromBlockPos = getBlockPosition(rootNode, CaretPosition.fromRangeStart(rng));\n      const toBlockPos = fromBlockPos.bind(blockPos => fromPosition(forward, rootNode, blockPos.position).bind(to => getBlockPosition(rootNode, to).map(blockPos => skipLastBr(rootNode, forward, blockPos))));\n      return lift2(fromBlockPos, toBlockPos, blockBoundary).filter(blockBoundary => isDifferentBlocks(blockBoundary) && hasSameParent(blockBoundary) && isEditable$2(blockBoundary));\n    };\n    const read$1 = (rootNode, forward, rng) => rng.collapsed ? readFromRange(rootNode, forward, rng) : Optional.none();\n\n    const getChildrenUntilBlockBoundary = block => {\n      const children$1 = children(block);\n      return findIndex$2(children$1, isBlock$2).fold(constant(children$1), index => children$1.slice(0, index));\n    };\n    const extractChildren = block => {\n      const children = getChildrenUntilBlockBoundary(block);\n      each$e(children, remove$6);\n      return children;\n    };\n    const removeEmptyRoot = (rootNode, block) => {\n      const parents = parentsAndSelf(block, rootNode);\n      return find$2(parents.reverse(), element => isEmpty$2(element)).each(remove$6);\n    };\n    const isEmptyBefore = el => filter$5(prevSiblings(el), el => !isEmpty$2(el)).length === 0;\n    const nestedBlockMerge = (rootNode, fromBlock, toBlock, insertionPoint) => {\n      if (isEmpty$2(toBlock)) {\n        fillWithPaddingBr(toBlock);\n        return firstPositionIn(toBlock.dom);\n      }\n      if (isEmptyBefore(insertionPoint) && isEmpty$2(fromBlock)) {\n        before$3(insertionPoint, SugarElement.fromTag('br'));\n      }\n      const position = prevPosition(toBlock.dom, CaretPosition.before(insertionPoint.dom));\n      each$e(extractChildren(fromBlock), child => {\n        before$3(insertionPoint, child);\n      });\n      removeEmptyRoot(rootNode, fromBlock);\n      return position;\n    };\n    const sidelongBlockMerge = (rootNode, fromBlock, toBlock) => {\n      if (isEmpty$2(toBlock)) {\n        remove$6(toBlock);\n        if (isEmpty$2(fromBlock)) {\n          fillWithPaddingBr(fromBlock);\n        }\n        return firstPositionIn(fromBlock.dom);\n      }\n      const position = lastPositionIn(toBlock.dom);\n      each$e(extractChildren(fromBlock), child => {\n        append$1(toBlock, child);\n      });\n      removeEmptyRoot(rootNode, fromBlock);\n      return position;\n    };\n    const findInsertionPoint = (toBlock, block) => {\n      const parentsAndSelf$1 = parentsAndSelf(block, toBlock);\n      return Optional.from(parentsAndSelf$1[parentsAndSelf$1.length - 1]);\n    };\n    const getInsertionPoint = (fromBlock, toBlock) => contains(toBlock, fromBlock) ? findInsertionPoint(toBlock, fromBlock) : Optional.none();\n    const trimBr = (first, block) => {\n      positionIn(first, block.dom).bind(position => Optional.from(position.getNode())).map(SugarElement.fromDom).filter(isBr$5).each(remove$6);\n    };\n    const mergeBlockInto = (rootNode, fromBlock, toBlock) => {\n      trimBr(true, fromBlock);\n      trimBr(false, toBlock);\n      return getInsertionPoint(fromBlock, toBlock).fold(curry(sidelongBlockMerge, rootNode, fromBlock, toBlock), curry(nestedBlockMerge, rootNode, fromBlock, toBlock));\n    };\n    const mergeBlocks = (rootNode, forward, block1, block2) => forward ? mergeBlockInto(rootNode, block2, block1) : mergeBlockInto(rootNode, block1, block2);\n\n    const backspaceDelete$8 = (editor, forward) => {\n      const rootNode = SugarElement.fromDom(editor.getBody());\n      const position = read$1(rootNode.dom, forward, editor.selection.getRng()).map(blockBoundary => () => {\n        mergeBlocks(rootNode, forward, blockBoundary.from.block, blockBoundary.to.block).each(pos => {\n          editor.selection.setRng(pos.toRange());\n        });\n      });\n      return position;\n    };\n\n    const deleteRangeMergeBlocks = (rootNode, selection) => {\n      const rng = selection.getRng();\n      return lift2(getParentBlock$2(rootNode, SugarElement.fromDom(rng.startContainer)), getParentBlock$2(rootNode, SugarElement.fromDom(rng.endContainer)), (block1, block2) => {\n        if (!eq(block1, block2)) {\n          return Optional.some(() => {\n            rng.deleteContents();\n            mergeBlocks(rootNode, true, block1, block2).each(pos => {\n              selection.setRng(pos.toRange());\n            });\n          });\n        } else {\n          return Optional.none();\n        }\n      }).getOr(Optional.none());\n    };\n    const isRawNodeInTable = (root, rawNode) => {\n      const node = SugarElement.fromDom(rawNode);\n      const isRoot = curry(eq, root);\n      return ancestor$3(node, isTableCell$2, isRoot).isSome();\n    };\n    const isSelectionInTable = (root, rng) => isRawNodeInTable(root, rng.startContainer) || isRawNodeInTable(root, rng.endContainer);\n    const isEverythingSelected = (root, rng) => {\n      const noPrevious = prevPosition(root.dom, CaretPosition.fromRangeStart(rng)).isNone();\n      const noNext = nextPosition(root.dom, CaretPosition.fromRangeEnd(rng)).isNone();\n      return !isSelectionInTable(root, rng) && noPrevious && noNext;\n    };\n    const emptyEditor = editor => {\n      return Optional.some(() => {\n        editor.setContent('');\n        editor.selection.setCursorLocation();\n      });\n    };\n    const deleteRange$1 = editor => {\n      const rootNode = SugarElement.fromDom(editor.getBody());\n      const rng = editor.selection.getRng();\n      return isEverythingSelected(rootNode, rng) ? emptyEditor(editor) : deleteRangeMergeBlocks(rootNode, editor.selection);\n    };\n    const backspaceDelete$7 = (editor, _forward) => editor.selection.isCollapsed() ? Optional.none() : deleteRange$1(editor);\n\n    const showCaret = (direction, editor, node, before, scrollIntoView) => Optional.from(editor._selectionOverrides.showCaret(direction, node, before, scrollIntoView));\n    const getNodeRange = node => {\n      const rng = node.ownerDocument.createRange();\n      rng.selectNode(node);\n      return rng;\n    };\n    const selectNode = (editor, node) => {\n      const e = editor.dispatch('BeforeObjectSelected', { target: node });\n      if (e.isDefaultPrevented()) {\n        return Optional.none();\n      }\n      return Optional.some(getNodeRange(node));\n    };\n    const renderCaretAtRange = (editor, range, scrollIntoView) => {\n      const normalizedRange = normalizeRange(1, editor.getBody(), range);\n      const caretPosition = CaretPosition.fromRangeStart(normalizedRange);\n      const caretPositionNode = caretPosition.getNode();\n      if (isInlineFakeCaretTarget(caretPositionNode)) {\n        return showCaret(1, editor, caretPositionNode, !caretPosition.isAtEnd(), false);\n      }\n      const caretPositionBeforeNode = caretPosition.getNode(true);\n      if (isInlineFakeCaretTarget(caretPositionBeforeNode)) {\n        return showCaret(1, editor, caretPositionBeforeNode, false, false);\n      }\n      const ceRoot = getContentEditableRoot$1(editor.dom.getRoot(), caretPosition.getNode());\n      if (isInlineFakeCaretTarget(ceRoot)) {\n        return showCaret(1, editor, ceRoot, false, scrollIntoView);\n      }\n      return Optional.none();\n    };\n    const renderRangeCaret = (editor, range, scrollIntoView) => range.collapsed ? renderCaretAtRange(editor, range, scrollIntoView).getOr(range) : range;\n\n    const isBeforeBoundary = pos => isBeforeContentEditableFalse(pos) || isBeforeMedia(pos);\n    const isAfterBoundary = pos => isAfterContentEditableFalse(pos) || isAfterMedia(pos);\n    const trimEmptyTextNode = (dom, node) => {\n      if (isText$a(node) && node.data.length === 0) {\n        dom.remove(node);\n      }\n    };\n    const deleteContentAndShowCaret = (editor, range, node, direction, forward, peekCaretPosition) => {\n      showCaret(direction, editor, peekCaretPosition.getNode(!forward), forward, true).each(caretRange => {\n        if (range.collapsed) {\n          const deleteRange = range.cloneRange();\n          if (forward) {\n            deleteRange.setEnd(caretRange.startContainer, caretRange.startOffset);\n          } else {\n            deleteRange.setStart(caretRange.endContainer, caretRange.endOffset);\n          }\n          deleteRange.deleteContents();\n        } else {\n          range.deleteContents();\n        }\n        editor.selection.setRng(caretRange);\n      });\n      trimEmptyTextNode(editor.dom, node);\n    };\n    const deleteBoundaryText = (editor, forward) => {\n      const range = editor.selection.getRng();\n      if (!isText$a(range.commonAncestorContainer)) {\n        return Optional.none();\n      }\n      const direction = forward ? HDirection.Forwards : HDirection.Backwards;\n      const caretWalker = CaretWalker(editor.getBody());\n      const getNextPosFn = curry(getVisualCaretPosition, forward ? caretWalker.next : caretWalker.prev);\n      const isBeforeFn = forward ? isBeforeBoundary : isAfterBoundary;\n      const caretPosition = getNormalizedRangeEndPoint(direction, editor.getBody(), range);\n      const nextCaretPosition = getNextPosFn(caretPosition);\n      const normalizedNextCaretPosition = nextCaretPosition ? normalizePosition(forward, nextCaretPosition) : nextCaretPosition;\n      if (!normalizedNextCaretPosition || !isMoveInsideSameBlock(caretPosition, normalizedNextCaretPosition)) {\n        return Optional.none();\n      } else if (isBeforeFn(normalizedNextCaretPosition)) {\n        return Optional.some(() => deleteContentAndShowCaret(editor, range, caretPosition.getNode(), direction, forward, normalizedNextCaretPosition));\n      }\n      const peekCaretPosition = getNextPosFn(normalizedNextCaretPosition);\n      if (peekCaretPosition && isBeforeFn(peekCaretPosition)) {\n        if (isMoveInsideSameBlock(normalizedNextCaretPosition, peekCaretPosition)) {\n          return Optional.some(() => deleteContentAndShowCaret(editor, range, caretPosition.getNode(), direction, forward, peekCaretPosition));\n        }\n      }\n      return Optional.none();\n    };\n    const backspaceDelete$6 = (editor, forward) => deleteBoundaryText(editor, forward);\n\n    const getEdgeCefPosition = (editor, atStart) => {\n      const root = editor.getBody();\n      return atStart ? firstPositionIn(root).filter(isBeforeContentEditableFalse) : lastPositionIn(root).filter(isAfterContentEditableFalse);\n    };\n    const isCefAtEdgeSelected = editor => {\n      const rng = editor.selection.getRng();\n      return !rng.collapsed && (getEdgeCefPosition(editor, true).exists(pos => pos.isEqual(CaretPosition.fromRangeStart(rng))) || getEdgeCefPosition(editor, false).exists(pos => pos.isEqual(CaretPosition.fromRangeEnd(rng))));\n    };\n\n    const isCompoundElement = node => isNonNullable(node) && (isTableCell$2(SugarElement.fromDom(node)) || isListItem$1(SugarElement.fromDom(node)));\n    const DeleteAction = Adt.generate([\n      { remove: ['element'] },\n      { moveToElement: ['element'] },\n      { moveToPosition: ['position'] }\n    ]);\n    const isAtContentEditableBlockCaret = (forward, from) => {\n      const elm = from.getNode(!forward);\n      const caretLocation = forward ? 'after' : 'before';\n      return isElement$6(elm) && elm.getAttribute('data-mce-caret') === caretLocation;\n    };\n    const isDeleteFromCefDifferentBlocks = (root, forward, from, to) => {\n      const inSameBlock = elm => isInline$1(SugarElement.fromDom(elm)) && !isInSameBlock(from, to, root);\n      return getRelativeCefElm(!forward, from).fold(() => getRelativeCefElm(forward, to).fold(never, inSameBlock), inSameBlock);\n    };\n    const deleteEmptyBlockOrMoveToCef = (root, forward, from, to) => {\n      const toCefElm = to.getNode(!forward);\n      return getParentBlock$2(SugarElement.fromDom(root), SugarElement.fromDom(from.getNode())).map(blockElm => isEmpty$2(blockElm) ? DeleteAction.remove(blockElm.dom) : DeleteAction.moveToElement(toCefElm)).orThunk(() => Optional.some(DeleteAction.moveToElement(toCefElm)));\n    };\n    const findCefPosition = (root, forward, from) => fromPosition(forward, root, from).bind(to => {\n      if (isCompoundElement(to.getNode())) {\n        return Optional.none();\n      } else if (isDeleteFromCefDifferentBlocks(root, forward, from, to)) {\n        return Optional.none();\n      } else if (forward && isContentEditableFalse$a(to.getNode())) {\n        return deleteEmptyBlockOrMoveToCef(root, forward, from, to);\n      } else if (!forward && isContentEditableFalse$a(to.getNode(true))) {\n        return deleteEmptyBlockOrMoveToCef(root, forward, from, to);\n      } else if (forward && isAfterContentEditableFalse(from)) {\n        return Optional.some(DeleteAction.moveToPosition(to));\n      } else if (!forward && isBeforeContentEditableFalse(from)) {\n        return Optional.some(DeleteAction.moveToPosition(to));\n      } else {\n        return Optional.none();\n      }\n    });\n    const getContentEditableBlockAction = (forward, elm) => {\n      if (isNullable(elm)) {\n        return Optional.none();\n      } else if (forward && isContentEditableFalse$a(elm.nextSibling)) {\n        return Optional.some(DeleteAction.moveToElement(elm.nextSibling));\n      } else if (!forward && isContentEditableFalse$a(elm.previousSibling)) {\n        return Optional.some(DeleteAction.moveToElement(elm.previousSibling));\n      } else {\n        return Optional.none();\n      }\n    };\n    const skipMoveToActionFromInlineCefToContent = (root, from, deleteAction) => deleteAction.fold(elm => Optional.some(DeleteAction.remove(elm)), elm => Optional.some(DeleteAction.moveToElement(elm)), to => {\n      if (isInSameBlock(from, to, root)) {\n        return Optional.none();\n      } else {\n        return Optional.some(DeleteAction.moveToPosition(to));\n      }\n    });\n    const getContentEditableAction = (root, forward, from) => {\n      if (isAtContentEditableBlockCaret(forward, from)) {\n        return getContentEditableBlockAction(forward, from.getNode(!forward)).orThunk(() => findCefPosition(root, forward, from));\n      } else {\n        return findCefPosition(root, forward, from).bind(deleteAction => skipMoveToActionFromInlineCefToContent(root, from, deleteAction));\n      }\n    };\n    const read = (root, forward, rng) => {\n      const normalizedRange = normalizeRange(forward ? 1 : -1, root, rng);\n      const from = CaretPosition.fromRangeStart(normalizedRange);\n      const rootElement = SugarElement.fromDom(root);\n      if (!forward && isAfterContentEditableFalse(from)) {\n        return Optional.some(DeleteAction.remove(from.getNode(true)));\n      } else if (forward && isBeforeContentEditableFalse(from)) {\n        return Optional.some(DeleteAction.remove(from.getNode()));\n      } else if (!forward && isBeforeContentEditableFalse(from) && isAfterBr(rootElement, from)) {\n        return findPreviousBr(rootElement, from).map(br => DeleteAction.remove(br.getNode()));\n      } else if (forward && isAfterContentEditableFalse(from) && isBeforeBr$1(rootElement, from)) {\n        return findNextBr(rootElement, from).map(br => DeleteAction.remove(br.getNode()));\n      } else {\n        return getContentEditableAction(root, forward, from);\n      }\n    };\n\n    const deleteElement$1 = (editor, forward) => element => {\n      editor._selectionOverrides.hideFakeCaret();\n      deleteElement$2(editor, forward, SugarElement.fromDom(element));\n      return true;\n    };\n    const moveToElement = (editor, forward) => element => {\n      const pos = forward ? CaretPosition.before(element) : CaretPosition.after(element);\n      editor.selection.setRng(pos.toRange());\n      return true;\n    };\n    const moveToPosition = editor => pos => {\n      editor.selection.setRng(pos.toRange());\n      return true;\n    };\n    const getAncestorCe = (editor, node) => Optional.from(getContentEditableRoot$1(editor.getBody(), node));\n    const backspaceDeleteCaret = (editor, forward) => {\n      const selectedNode = editor.selection.getNode();\n      return getAncestorCe(editor, selectedNode).filter(isContentEditableFalse$a).fold(() => read(editor.getBody(), forward, editor.selection.getRng()).map(deleteAction => () => deleteAction.fold(deleteElement$1(editor, forward), moveToElement(editor, forward), moveToPosition(editor))), () => Optional.some(noop));\n    };\n    const deleteOffscreenSelection = rootElement => {\n      each$e(descendants(rootElement, '.mce-offscreen-selection'), remove$6);\n    };\n    const backspaceDeleteRange = (editor, forward) => {\n      const selectedNode = editor.selection.getNode();\n      if (isContentEditableFalse$a(selectedNode) && !isTableCell$3(selectedNode)) {\n        const hasCefAncestor = getAncestorCe(editor, selectedNode.parentNode).filter(isContentEditableFalse$a);\n        return hasCefAncestor.fold(() => Optional.some(() => {\n          deleteOffscreenSelection(SugarElement.fromDom(editor.getBody()));\n          deleteElement$2(editor, forward, SugarElement.fromDom(editor.selection.getNode()));\n          paddEmptyBody(editor);\n        }), () => Optional.some(noop));\n      }\n      if (isCefAtEdgeSelected(editor)) {\n        return Optional.some(() => {\n          deleteRangeContents(editor, editor.selection.getRng(), SugarElement.fromDom(editor.getBody()));\n        });\n      }\n      return Optional.none();\n    };\n    const paddEmptyElement = editor => {\n      const dom = editor.dom, selection = editor.selection;\n      const ceRoot = getContentEditableRoot$1(editor.getBody(), selection.getNode());\n      if (isContentEditableTrue$3(ceRoot) && dom.isBlock(ceRoot) && dom.isEmpty(ceRoot)) {\n        const br = dom.create('br', { 'data-mce-bogus': '1' });\n        dom.setHTML(ceRoot, '');\n        ceRoot.appendChild(br);\n        selection.setRng(CaretPosition.before(br).toRange());\n      }\n      return true;\n    };\n    const backspaceDelete$5 = (editor, forward) => {\n      if (editor.selection.isCollapsed()) {\n        return backspaceDeleteCaret(editor, forward);\n      } else {\n        return backspaceDeleteRange(editor, forward);\n      }\n    };\n\n    const deleteCaret$2 = (editor, forward) => {\n      const fromPos = CaretPosition.fromRangeStart(editor.selection.getRng());\n      return fromPosition(forward, editor.getBody(), fromPos).filter(pos => forward ? isBeforeImageBlock(pos) : isAfterImageBlock(pos)).bind(pos => getChildNodeAtRelativeOffset(forward ? 0 : -1, pos)).map(elm => () => editor.selection.select(elm));\n    };\n    const backspaceDelete$4 = (editor, forward) => editor.selection.isCollapsed() ? deleteCaret$2(editor, forward) : Optional.none();\n\n    const isText$2 = isText$a;\n    const startsWithCaretContainer = node => isText$2(node) && node.data[0] === ZWSP$1;\n    const endsWithCaretContainer = node => isText$2(node) && node.data[node.data.length - 1] === ZWSP$1;\n    const createZwsp = node => {\n      var _a;\n      const doc = (_a = node.ownerDocument) !== null && _a !== void 0 ? _a : document;\n      return doc.createTextNode(ZWSP$1);\n    };\n    const insertBefore = node => {\n      var _a;\n      if (isText$2(node.previousSibling)) {\n        if (endsWithCaretContainer(node.previousSibling)) {\n          return node.previousSibling;\n        } else {\n          node.previousSibling.appendData(ZWSP$1);\n          return node.previousSibling;\n        }\n      } else if (isText$2(node)) {\n        if (startsWithCaretContainer(node)) {\n          return node;\n        } else {\n          node.insertData(0, ZWSP$1);\n          return node;\n        }\n      } else {\n        const newNode = createZwsp(node);\n        (_a = node.parentNode) === null || _a === void 0 ? void 0 : _a.insertBefore(newNode, node);\n        return newNode;\n      }\n    };\n    const insertAfter = node => {\n      var _a, _b;\n      if (isText$2(node.nextSibling)) {\n        if (startsWithCaretContainer(node.nextSibling)) {\n          return node.nextSibling;\n        } else {\n          node.nextSibling.insertData(0, ZWSP$1);\n          return node.nextSibling;\n        }\n      } else if (isText$2(node)) {\n        if (endsWithCaretContainer(node)) {\n          return node;\n        } else {\n          node.appendData(ZWSP$1);\n          return node;\n        }\n      } else {\n        const newNode = createZwsp(node);\n        if (node.nextSibling) {\n          (_a = node.parentNode) === null || _a === void 0 ? void 0 : _a.insertBefore(newNode, node.nextSibling);\n        } else {\n          (_b = node.parentNode) === null || _b === void 0 ? void 0 : _b.appendChild(newNode);\n        }\n        return newNode;\n      }\n    };\n    const insertInline = (before, node) => before ? insertBefore(node) : insertAfter(node);\n    const insertInlineBefore = curry(insertInline, true);\n    const insertInlineAfter = curry(insertInline, false);\n\n    const insertInlinePos = (pos, before) => {\n      if (isText$a(pos.container())) {\n        return insertInline(before, pos.container());\n      } else {\n        return insertInline(before, pos.getNode());\n      }\n    };\n    const isPosCaretContainer = (pos, caret) => {\n      const caretNode = caret.get();\n      return caretNode && pos.container() === caretNode && isCaretContainerInline(caretNode);\n    };\n    const renderCaret = (caret, location) => location.fold(element => {\n      remove$4(caret.get());\n      const text = insertInlineBefore(element);\n      caret.set(text);\n      return Optional.some(CaretPosition(text, text.length - 1));\n    }, element => firstPositionIn(element).map(pos => {\n      if (!isPosCaretContainer(pos, caret)) {\n        remove$4(caret.get());\n        const text = insertInlinePos(pos, true);\n        caret.set(text);\n        return CaretPosition(text, 1);\n      } else {\n        const node = caret.get();\n        return CaretPosition(node, 1);\n      }\n    }), element => lastPositionIn(element).map(pos => {\n      if (!isPosCaretContainer(pos, caret)) {\n        remove$4(caret.get());\n        const text = insertInlinePos(pos, false);\n        caret.set(text);\n        return CaretPosition(text, text.length - 1);\n      } else {\n        const node = caret.get();\n        return CaretPosition(node, node.length - 1);\n      }\n    }), element => {\n      remove$4(caret.get());\n      const text = insertInlineAfter(element);\n      caret.set(text);\n      return Optional.some(CaretPosition(text, 1));\n    });\n\n    const evaluateUntil = (fns, args) => {\n      for (let i = 0; i < fns.length; i++) {\n        const result = fns[i].apply(null, args);\n        if (result.isSome()) {\n          return result;\n        }\n      }\n      return Optional.none();\n    };\n\n    const Location = Adt.generate([\n      { before: ['element'] },\n      { start: ['element'] },\n      { end: ['element'] },\n      { after: ['element'] }\n    ]);\n    const rescope$1 = (rootNode, node) => {\n      const parentBlock = getParentBlock$3(node, rootNode);\n      return parentBlock ? parentBlock : rootNode;\n    };\n    const before = (isInlineTarget, rootNode, pos) => {\n      const nPos = normalizeForwards(pos);\n      const scope = rescope$1(rootNode, nPos.container());\n      return findRootInline(isInlineTarget, scope, nPos).fold(() => nextPosition(scope, nPos).bind(curry(findRootInline, isInlineTarget, scope)).map(inline => Location.before(inline)), Optional.none);\n    };\n    const isNotInsideFormatCaretContainer = (rootNode, elm) => getParentCaretContainer(rootNode, elm) === null;\n    const findInsideRootInline = (isInlineTarget, rootNode, pos) => findRootInline(isInlineTarget, rootNode, pos).filter(curry(isNotInsideFormatCaretContainer, rootNode));\n    const start$1 = (isInlineTarget, rootNode, pos) => {\n      const nPos = normalizeBackwards(pos);\n      return findInsideRootInline(isInlineTarget, rootNode, nPos).bind(inline => {\n        const prevPos = prevPosition(inline, nPos);\n        return prevPos.isNone() ? Optional.some(Location.start(inline)) : Optional.none();\n      });\n    };\n    const end = (isInlineTarget, rootNode, pos) => {\n      const nPos = normalizeForwards(pos);\n      return findInsideRootInline(isInlineTarget, rootNode, nPos).bind(inline => {\n        const nextPos = nextPosition(inline, nPos);\n        return nextPos.isNone() ? Optional.some(Location.end(inline)) : Optional.none();\n      });\n    };\n    const after = (isInlineTarget, rootNode, pos) => {\n      const nPos = normalizeBackwards(pos);\n      const scope = rescope$1(rootNode, nPos.container());\n      return findRootInline(isInlineTarget, scope, nPos).fold(() => prevPosition(scope, nPos).bind(curry(findRootInline, isInlineTarget, scope)).map(inline => Location.after(inline)), Optional.none);\n    };\n    const isValidLocation = location => !isRtl(getElement(location));\n    const readLocation = (isInlineTarget, rootNode, pos) => {\n      const location = evaluateUntil([\n        before,\n        start$1,\n        end,\n        after\n      ], [\n        isInlineTarget,\n        rootNode,\n        pos\n      ]);\n      return location.filter(isValidLocation);\n    };\n    const getElement = location => location.fold(identity, identity, identity, identity);\n    const getName = location => location.fold(constant('before'), constant('start'), constant('end'), constant('after'));\n    const outside = location => location.fold(Location.before, Location.before, Location.after, Location.after);\n    const inside = location => location.fold(Location.start, Location.start, Location.end, Location.end);\n    const isEq = (location1, location2) => getName(location1) === getName(location2) && getElement(location1) === getElement(location2);\n    const betweenInlines = (forward, isInlineTarget, rootNode, from, to, location) => lift2(findRootInline(isInlineTarget, rootNode, from), findRootInline(isInlineTarget, rootNode, to), (fromInline, toInline) => {\n      if (fromInline !== toInline && hasSameParentBlock(rootNode, fromInline, toInline)) {\n        return Location.after(forward ? fromInline : toInline);\n      } else {\n        return location;\n      }\n    }).getOr(location);\n    const skipNoMovement = (fromLocation, toLocation) => fromLocation.fold(always, fromLocation => !isEq(fromLocation, toLocation));\n    const findLocationTraverse = (forward, isInlineTarget, rootNode, fromLocation, pos) => {\n      const from = normalizePosition(forward, pos);\n      const to = fromPosition(forward, rootNode, from).map(curry(normalizePosition, forward));\n      const location = to.fold(() => fromLocation.map(outside), to => readLocation(isInlineTarget, rootNode, to).map(curry(betweenInlines, forward, isInlineTarget, rootNode, from, to)).filter(curry(skipNoMovement, fromLocation)));\n      return location.filter(isValidLocation);\n    };\n    const findLocationSimple = (forward, location) => {\n      if (forward) {\n        return location.fold(compose(Optional.some, Location.start), Optional.none, compose(Optional.some, Location.after), Optional.none);\n      } else {\n        return location.fold(Optional.none, compose(Optional.some, Location.before), Optional.none, compose(Optional.some, Location.end));\n      }\n    };\n    const findLocation$1 = (forward, isInlineTarget, rootNode, pos) => {\n      const from = normalizePosition(forward, pos);\n      const fromLocation = readLocation(isInlineTarget, rootNode, from);\n      return readLocation(isInlineTarget, rootNode, from).bind(curry(findLocationSimple, forward)).orThunk(() => findLocationTraverse(forward, isInlineTarget, rootNode, fromLocation, pos));\n    };\n\n    const hasSelectionModifyApi = editor => {\n      return isFunction(editor.selection.getSel().modify);\n    };\n    const moveRel = (forward, selection, pos) => {\n      const delta = forward ? 1 : -1;\n      selection.setRng(CaretPosition(pos.container(), pos.offset() + delta).toRange());\n      selection.getSel().modify('move', forward ? 'forward' : 'backward', 'word');\n      return true;\n    };\n    const moveByWord = (forward, editor) => {\n      const rng = editor.selection.getRng();\n      const pos = forward ? CaretPosition.fromRangeEnd(rng) : CaretPosition.fromRangeStart(rng);\n      if (!hasSelectionModifyApi(editor)) {\n        return false;\n      } else if (forward && isBeforeInline(pos)) {\n        return moveRel(true, editor.selection, pos);\n      } else if (!forward && isAfterInline(pos)) {\n        return moveRel(false, editor.selection, pos);\n      } else {\n        return false;\n      }\n    };\n\n    var BreakType;\n    (function (BreakType) {\n      BreakType[BreakType['Br'] = 0] = 'Br';\n      BreakType[BreakType['Block'] = 1] = 'Block';\n      BreakType[BreakType['Wrap'] = 2] = 'Wrap';\n      BreakType[BreakType['Eol'] = 3] = 'Eol';\n    }(BreakType || (BreakType = {})));\n    const flip = (direction, positions) => direction === HDirection.Backwards ? reverse(positions) : positions;\n    const walk$1 = (direction, caretWalker, pos) => direction === HDirection.Forwards ? caretWalker.next(pos) : caretWalker.prev(pos);\n    const getBreakType = (scope, direction, currentPos, nextPos) => {\n      if (isBr$6(nextPos.getNode(direction === HDirection.Forwards))) {\n        return BreakType.Br;\n      } else if (isInSameBlock(currentPos, nextPos) === false) {\n        return BreakType.Block;\n      } else {\n        return BreakType.Wrap;\n      }\n    };\n    const getPositionsUntil = (predicate, direction, scope, start) => {\n      const caretWalker = CaretWalker(scope);\n      let currentPos = start;\n      const positions = [];\n      while (currentPos) {\n        const nextPos = walk$1(direction, caretWalker, currentPos);\n        if (!nextPos) {\n          break;\n        }\n        if (isBr$6(nextPos.getNode(false))) {\n          if (direction === HDirection.Forwards) {\n            return {\n              positions: flip(direction, positions).concat([nextPos]),\n              breakType: BreakType.Br,\n              breakAt: Optional.some(nextPos)\n            };\n          } else {\n            return {\n              positions: flip(direction, positions),\n              breakType: BreakType.Br,\n              breakAt: Optional.some(nextPos)\n            };\n          }\n        }\n        if (!nextPos.isVisible()) {\n          currentPos = nextPos;\n          continue;\n        }\n        if (predicate(currentPos, nextPos)) {\n          const breakType = getBreakType(scope, direction, currentPos, nextPos);\n          return {\n            positions: flip(direction, positions),\n            breakType,\n            breakAt: Optional.some(nextPos)\n          };\n        }\n        positions.push(nextPos);\n        currentPos = nextPos;\n      }\n      return {\n        positions: flip(direction, positions),\n        breakType: BreakType.Eol,\n        breakAt: Optional.none()\n      };\n    };\n    const getAdjacentLinePositions = (direction, getPositionsUntilBreak, scope, start) => getPositionsUntilBreak(scope, start).breakAt.map(pos => {\n      const positions = getPositionsUntilBreak(scope, pos).positions;\n      return direction === HDirection.Backwards ? positions.concat(pos) : [pos].concat(positions);\n    }).getOr([]);\n    const findClosestHorizontalPositionFromPoint = (positions, x) => foldl(positions, (acc, newPos) => acc.fold(() => Optional.some(newPos), lastPos => lift2(head(lastPos.getClientRects()), head(newPos.getClientRects()), (lastRect, newRect) => {\n      const lastDist = Math.abs(x - lastRect.left);\n      const newDist = Math.abs(x - newRect.left);\n      return newDist <= lastDist ? newPos : lastPos;\n    }).or(acc)), Optional.none());\n    const findClosestHorizontalPosition = (positions, pos) => head(pos.getClientRects()).bind(targetRect => findClosestHorizontalPositionFromPoint(positions, targetRect.left));\n    const getPositionsUntilPreviousLine = curry(getPositionsUntil, CaretPosition.isAbove, -1);\n    const getPositionsUntilNextLine = curry(getPositionsUntil, CaretPosition.isBelow, 1);\n    const getPositionsAbove = curry(getAdjacentLinePositions, -1, getPositionsUntilPreviousLine);\n    const getPositionsBelow = curry(getAdjacentLinePositions, 1, getPositionsUntilNextLine);\n    const isAtFirstLine = (scope, pos) => getPositionsUntilPreviousLine(scope, pos).breakAt.isNone();\n    const isAtLastLine = (scope, pos) => getPositionsUntilNextLine(scope, pos).breakAt.isNone();\n    const getFirstLinePositions = scope => firstPositionIn(scope).map(pos => [pos].concat(getPositionsUntilNextLine(scope, pos).positions)).getOr([]);\n    const getLastLinePositions = scope => lastPositionIn(scope).map(pos => getPositionsUntilPreviousLine(scope, pos).positions.concat(pos)).getOr([]);\n    const getClosestPositionAbove = (scope, pos) => findClosestHorizontalPosition(getPositionsAbove(scope, pos), pos);\n    const getClosestPositionBelow = (scope, pos) => findClosestHorizontalPosition(getPositionsBelow(scope, pos), pos);\n\n    const isContentEditableFalse$4 = isContentEditableFalse$a;\n    const distanceToRectLeft$1 = (clientRect, clientX) => Math.abs(clientRect.left - clientX);\n    const distanceToRectRight$1 = (clientRect, clientX) => Math.abs(clientRect.right - clientX);\n    const isNodeClientRect = rect => hasNonNullableKey(rect, 'node');\n    const findClosestClientRect = (clientRects, clientX) => reduce(clientRects, (oldClientRect, clientRect) => {\n      const oldDistance = Math.min(distanceToRectLeft$1(oldClientRect, clientX), distanceToRectRight$1(oldClientRect, clientX));\n      const newDistance = Math.min(distanceToRectLeft$1(clientRect, clientX), distanceToRectRight$1(clientRect, clientX));\n      if (newDistance === oldDistance && isNodeClientRect(clientRect) && isContentEditableFalse$4(clientRect.node)) {\n        return clientRect;\n      }\n      if (newDistance < oldDistance) {\n        return clientRect;\n      }\n      return oldClientRect;\n    });\n\n    const getNodeClientRects = node => {\n      const toArrayWithNode = clientRects => {\n        return map$3(clientRects, rect => {\n          const clientRect = clone$1(rect);\n          clientRect.node = node;\n          return clientRect;\n        });\n      };\n      if (isElement$6(node)) {\n        return toArrayWithNode(node.getClientRects());\n      } else if (isText$a(node)) {\n        const rng = node.ownerDocument.createRange();\n        rng.setStart(node, 0);\n        rng.setEnd(node, node.data.length);\n        return toArrayWithNode(rng.getClientRects());\n      } else {\n        return [];\n      }\n    };\n    const getClientRects = nodes => bind$3(nodes, getNodeClientRects);\n\n    var VDirection;\n    (function (VDirection) {\n      VDirection[VDirection['Up'] = -1] = 'Up';\n      VDirection[VDirection['Down'] = 1] = 'Down';\n    }(VDirection || (VDirection = {})));\n    const findUntil = (direction, root, predicateFn, node) => {\n      let currentNode = node;\n      while (currentNode = findNode(currentNode, direction, isEditableCaretCandidate$1, root)) {\n        if (predicateFn(currentNode)) {\n          return;\n        }\n      }\n    };\n    const walkUntil = (direction, isAboveFn, isBeflowFn, root, predicateFn, caretPosition) => {\n      let line = 0;\n      const result = [];\n      const add = node => {\n        let clientRects = getClientRects([node]);\n        if (direction === -1) {\n          clientRects = clientRects.reverse();\n        }\n        for (let i = 0; i < clientRects.length; i++) {\n          const clientRect = clientRects[i];\n          if (isBeflowFn(clientRect, targetClientRect)) {\n            continue;\n          }\n          if (result.length > 0 && isAboveFn(clientRect, last$2(result))) {\n            line++;\n          }\n          clientRect.line = line;\n          if (predicateFn(clientRect)) {\n            return true;\n          }\n          result.push(clientRect);\n        }\n        return false;\n      };\n      const targetClientRect = last$2(caretPosition.getClientRects());\n      if (!targetClientRect) {\n        return result;\n      }\n      const node = caretPosition.getNode();\n      if (node) {\n        add(node);\n        findUntil(direction, root, add, node);\n      }\n      return result;\n    };\n    const aboveLineNumber = (lineNumber, clientRect) => clientRect.line > lineNumber;\n    const isLineNumber = (lineNumber, clientRect) => clientRect.line === lineNumber;\n    const upUntil = curry(walkUntil, VDirection.Up, isAbove$1, isBelow$1);\n    const downUntil = curry(walkUntil, VDirection.Down, isBelow$1, isAbove$1);\n    const getLastClientRect = caretPosition => {\n      return last$2(caretPosition.getClientRects());\n    };\n    const positionsUntil = (direction, root, predicateFn, node) => {\n      const caretWalker = CaretWalker(root);\n      let walkFn;\n      let isBelowFn;\n      let isAboveFn;\n      let caretPosition;\n      const result = [];\n      let line = 0;\n      if (direction === 1) {\n        walkFn = caretWalker.next;\n        isBelowFn = isBelow$1;\n        isAboveFn = isAbove$1;\n        caretPosition = CaretPosition.after(node);\n      } else {\n        walkFn = caretWalker.prev;\n        isBelowFn = isAbove$1;\n        isAboveFn = isBelow$1;\n        caretPosition = CaretPosition.before(node);\n      }\n      const targetClientRect = getLastClientRect(caretPosition);\n      do {\n        if (!caretPosition.isVisible()) {\n          continue;\n        }\n        const rect = getLastClientRect(caretPosition);\n        if (isAboveFn(rect, targetClientRect)) {\n          continue;\n        }\n        if (result.length > 0 && isBelowFn(rect, last$2(result))) {\n          line++;\n        }\n        const clientRect = clone$1(rect);\n        clientRect.position = caretPosition;\n        clientRect.line = line;\n        if (predicateFn(clientRect)) {\n          return result;\n        }\n        result.push(clientRect);\n      } while (caretPosition = walkFn(caretPosition));\n      return result;\n    };\n    const isAboveLine = lineNumber => clientRect => aboveLineNumber(lineNumber, clientRect);\n    const isLine = lineNumber => clientRect => isLineNumber(lineNumber, clientRect);\n\n    const moveToRange = (editor, rng) => {\n      editor.selection.setRng(rng);\n      scrollRangeIntoView(editor, editor.selection.getRng());\n    };\n    const renderRangeCaretOpt = (editor, range, scrollIntoView) => Optional.some(renderRangeCaret(editor, range, scrollIntoView));\n    const moveHorizontally = (editor, direction, range, isBefore, isAfter, isElement) => {\n      const forwards = direction === HDirection.Forwards;\n      const caretWalker = CaretWalker(editor.getBody());\n      const getNextPosFn = curry(getVisualCaretPosition, forwards ? caretWalker.next : caretWalker.prev);\n      const isBeforeFn = forwards ? isBefore : isAfter;\n      if (!range.collapsed) {\n        const node = getSelectedNode(range);\n        if (isElement(node)) {\n          return showCaret(direction, editor, node, direction === HDirection.Backwards, false);\n        } else if (isCefAtEdgeSelected(editor)) {\n          const newRange = range.cloneRange();\n          newRange.collapse(direction === HDirection.Backwards);\n          return Optional.from(newRange);\n        }\n      }\n      const caretPosition = getNormalizedRangeEndPoint(direction, editor.getBody(), range);\n      if (isBeforeFn(caretPosition)) {\n        return selectNode(editor, caretPosition.getNode(!forwards));\n      }\n      let nextCaretPosition = getNextPosFn(caretPosition);\n      const rangeIsInContainerBlock = isRangeInCaretContainerBlock(range);\n      if (!nextCaretPosition) {\n        return rangeIsInContainerBlock ? Optional.some(range) : Optional.none();\n      } else {\n        nextCaretPosition = normalizePosition(forwards, nextCaretPosition);\n      }\n      if (isBeforeFn(nextCaretPosition)) {\n        return showCaret(direction, editor, nextCaretPosition.getNode(!forwards), forwards, false);\n      }\n      const peekCaretPosition = getNextPosFn(nextCaretPosition);\n      if (peekCaretPosition && isBeforeFn(peekCaretPosition)) {\n        if (isMoveInsideSameBlock(nextCaretPosition, peekCaretPosition)) {\n          return showCaret(direction, editor, peekCaretPosition.getNode(!forwards), forwards, false);\n        }\n      }\n      if (rangeIsInContainerBlock) {\n        return renderRangeCaretOpt(editor, nextCaretPosition.toRange(), false);\n      }\n      return Optional.none();\n    };\n    const moveVertically = (editor, direction, range, isBefore, isAfter, isElement) => {\n      const caretPosition = getNormalizedRangeEndPoint(direction, editor.getBody(), range);\n      const caretClientRect = last$2(caretPosition.getClientRects());\n      const forwards = direction === VDirection.Down;\n      const root = editor.getBody();\n      if (!caretClientRect) {\n        return Optional.none();\n      }\n      if (isCefAtEdgeSelected(editor)) {\n        const caretPosition = forwards ? CaretPosition.fromRangeEnd(range) : CaretPosition.fromRangeStart(range);\n        const getClosestFn = !forwards ? getClosestPositionAbove : getClosestPositionBelow;\n        return getClosestFn(root, caretPosition).orThunk(() => Optional.from(caretPosition)).map(pos => pos.toRange());\n      }\n      const walkerFn = forwards ? downUntil : upUntil;\n      const linePositions = walkerFn(root, isAboveLine(1), caretPosition);\n      const nextLinePositions = filter$5(linePositions, isLine(1));\n      const clientX = caretClientRect.left;\n      const nextLineRect = findClosestClientRect(nextLinePositions, clientX);\n      if (nextLineRect && isElement(nextLineRect.node)) {\n        const dist1 = Math.abs(clientX - nextLineRect.left);\n        const dist2 = Math.abs(clientX - nextLineRect.right);\n        return showCaret(direction, editor, nextLineRect.node, dist1 < dist2, false);\n      }\n      let currentNode;\n      if (isBefore(caretPosition)) {\n        currentNode = caretPosition.getNode();\n      } else if (isAfter(caretPosition)) {\n        currentNode = caretPosition.getNode(true);\n      } else {\n        currentNode = getSelectedNode(range);\n      }\n      if (currentNode) {\n        const caretPositions = positionsUntil(direction, root, isAboveLine(1), currentNode);\n        let closestNextLineRect = findClosestClientRect(filter$5(caretPositions, isLine(1)), clientX);\n        if (closestNextLineRect) {\n          return renderRangeCaretOpt(editor, closestNextLineRect.position.toRange(), false);\n        }\n        closestNextLineRect = last$2(filter$5(caretPositions, isLine(0)));\n        if (closestNextLineRect) {\n          return renderRangeCaretOpt(editor, closestNextLineRect.position.toRange(), false);\n        }\n      }\n      if (nextLinePositions.length === 0) {\n        return getLineEndPoint(editor, forwards).filter(forwards ? isAfter : isBefore).map(pos => renderRangeCaret(editor, pos.toRange(), false));\n      }\n      return Optional.none();\n    };\n    const getLineEndPoint = (editor, forward) => {\n      const rng = editor.selection.getRng();\n      const from = forward ? CaretPosition.fromRangeEnd(rng) : CaretPosition.fromRangeStart(rng);\n      const host = getEditingHost(from.container(), editor.getBody());\n      if (forward) {\n        const lineInfo = getPositionsUntilNextLine(host, from);\n        return last$3(lineInfo.positions);\n      } else {\n        const lineInfo = getPositionsUntilPreviousLine(host, from);\n        return head(lineInfo.positions);\n      }\n    };\n    const moveToLineEndPoint$3 = (editor, forward, isElementPosition) => getLineEndPoint(editor, forward).filter(isElementPosition).exists(pos => {\n      editor.selection.setRng(pos.toRange());\n      return true;\n    });\n\n    const setCaretPosition = (editor, pos) => {\n      const rng = editor.dom.createRng();\n      rng.setStart(pos.container(), pos.offset());\n      rng.setEnd(pos.container(), pos.offset());\n      editor.selection.setRng(rng);\n    };\n    const setSelected = (state, elm) => {\n      if (state) {\n        elm.setAttribute('data-mce-selected', 'inline-boundary');\n      } else {\n        elm.removeAttribute('data-mce-selected');\n      }\n    };\n    const renderCaretLocation = (editor, caret, location) => renderCaret(caret, location).map(pos => {\n      setCaretPosition(editor, pos);\n      return location;\n    });\n    const getPositionFromRange = (range, root, forward) => {\n      const start = CaretPosition.fromRangeStart(range);\n      if (range.collapsed) {\n        return start;\n      } else {\n        const end = CaretPosition.fromRangeEnd(range);\n        return forward ? prevPosition(root, end).getOr(end) : nextPosition(root, start).getOr(start);\n      }\n    };\n    const findLocation = (editor, caret, forward) => {\n      const rootNode = editor.getBody();\n      const from = getPositionFromRange(editor.selection.getRng(), rootNode, forward);\n      const isInlineTarget$1 = curry(isInlineTarget, editor);\n      const location = findLocation$1(forward, isInlineTarget$1, rootNode, from);\n      return location.bind(location => renderCaretLocation(editor, caret, location));\n    };\n    const toggleInlines = (isInlineTarget, dom, elms) => {\n      const inlineBoundaries = map$3(descendants(SugarElement.fromDom(dom.getRoot()), '*[data-mce-selected=\"inline-boundary\"]'), e => e.dom);\n      const selectedInlines = filter$5(inlineBoundaries, isInlineTarget);\n      const targetInlines = filter$5(elms, isInlineTarget);\n      each$e(difference(selectedInlines, targetInlines), curry(setSelected, false));\n      each$e(difference(targetInlines, selectedInlines), curry(setSelected, true));\n    };\n    const safeRemoveCaretContainer = (editor, caret) => {\n      const caretValue = caret.get();\n      if (editor.selection.isCollapsed() && !editor.composing && caretValue) {\n        const pos = CaretPosition.fromRangeStart(editor.selection.getRng());\n        if (CaretPosition.isTextPosition(pos) && !isAtZwsp(pos)) {\n          setCaretPosition(editor, removeAndReposition(caretValue, pos));\n          caret.set(null);\n        }\n      }\n    };\n    const renderInsideInlineCaret = (isInlineTarget, editor, caret, elms) => {\n      if (editor.selection.isCollapsed()) {\n        const inlines = filter$5(elms, isInlineTarget);\n        each$e(inlines, _inline => {\n          const pos = CaretPosition.fromRangeStart(editor.selection.getRng());\n          readLocation(isInlineTarget, editor.getBody(), pos).bind(location => renderCaretLocation(editor, caret, location));\n        });\n      }\n    };\n    const move$2 = (editor, caret, forward) => isInlineBoundariesEnabled(editor) ? findLocation(editor, caret, forward).isSome() : false;\n    const moveWord = (forward, editor, _caret) => isInlineBoundariesEnabled(editor) ? moveByWord(forward, editor) : false;\n    const setupSelectedState = editor => {\n      const caret = Cell(null);\n      const isInlineTarget$1 = curry(isInlineTarget, editor);\n      editor.on('NodeChange', e => {\n        if (isInlineBoundariesEnabled(editor)) {\n          toggleInlines(isInlineTarget$1, editor.dom, e.parents);\n          safeRemoveCaretContainer(editor, caret);\n          renderInsideInlineCaret(isInlineTarget$1, editor, caret, e.parents);\n        }\n      });\n      return caret;\n    };\n    const moveNextWord = curry(moveWord, true);\n    const movePrevWord = curry(moveWord, false);\n    const moveToLineEndPoint$2 = (editor, forward, caret) => {\n      if (isInlineBoundariesEnabled(editor)) {\n        const linePoint = getLineEndPoint(editor, forward).getOrThunk(() => {\n          const rng = editor.selection.getRng();\n          return forward ? CaretPosition.fromRangeEnd(rng) : CaretPosition.fromRangeStart(rng);\n        });\n        return readLocation(curry(isInlineTarget, editor), editor.getBody(), linePoint).exists(loc => {\n          const outsideLoc = outside(loc);\n          return renderCaret(caret, outsideLoc).exists(pos => {\n            setCaretPosition(editor, pos);\n            return true;\n          });\n        });\n      } else {\n        return false;\n      }\n    };\n\n    const rangeFromPositions = (from, to) => {\n      const range = document.createRange();\n      range.setStart(from.container(), from.offset());\n      range.setEnd(to.container(), to.offset());\n      return range;\n    };\n    const hasOnlyTwoOrLessPositionsLeft = elm => lift2(firstPositionIn(elm), lastPositionIn(elm), (firstPos, lastPos) => {\n      const normalizedFirstPos = normalizePosition(true, firstPos);\n      const normalizedLastPos = normalizePosition(false, lastPos);\n      return nextPosition(elm, normalizedFirstPos).forall(pos => pos.isEqual(normalizedLastPos));\n    }).getOr(true);\n    const setCaretLocation = (editor, caret) => location => renderCaret(caret, location).map(pos => () => setCaretPosition(editor, pos));\n    const deleteFromTo = (editor, caret, from, to) => {\n      const rootNode = editor.getBody();\n      const isInlineTarget$1 = curry(isInlineTarget, editor);\n      editor.undoManager.ignore(() => {\n        editor.selection.setRng(rangeFromPositions(from, to));\n        execNativeDeleteCommand(editor);\n        readLocation(isInlineTarget$1, rootNode, CaretPosition.fromRangeStart(editor.selection.getRng())).map(inside).bind(setCaretLocation(editor, caret)).each(call);\n      });\n      editor.nodeChanged();\n    };\n    const rescope = (rootNode, node) => {\n      const parentBlock = getParentBlock$3(node, rootNode);\n      return parentBlock ? parentBlock : rootNode;\n    };\n    const backspaceDeleteCollapsed = (editor, caret, forward, from) => {\n      const rootNode = rescope(editor.getBody(), from.container());\n      const isInlineTarget$1 = curry(isInlineTarget, editor);\n      const fromLocation = readLocation(isInlineTarget$1, rootNode, from);\n      const location = fromLocation.bind(location => {\n        if (forward) {\n          return location.fold(constant(Optional.some(inside(location))), Optional.none, constant(Optional.some(outside(location))), Optional.none);\n        } else {\n          return location.fold(Optional.none, constant(Optional.some(outside(location))), Optional.none, constant(Optional.some(inside(location))));\n        }\n      });\n      return location.map(setCaretLocation(editor, caret)).getOrThunk(() => {\n        const toPosition = navigate(forward, rootNode, from);\n        const toLocation = toPosition.bind(pos => readLocation(isInlineTarget$1, rootNode, pos));\n        return lift2(fromLocation, toLocation, () => findRootInline(isInlineTarget$1, rootNode, from).bind(elm => {\n          if (hasOnlyTwoOrLessPositionsLeft(elm)) {\n            return Optional.some(() => {\n              deleteElement$2(editor, forward, SugarElement.fromDom(elm));\n            });\n          } else {\n            return Optional.none();\n          }\n        })).getOrThunk(() => toLocation.bind(() => toPosition.map(to => {\n          return () => {\n            if (forward) {\n              deleteFromTo(editor, caret, from, to);\n            } else {\n              deleteFromTo(editor, caret, to, from);\n            }\n          };\n        })));\n      });\n    };\n    const backspaceDelete$3 = (editor, caret, forward) => {\n      if (editor.selection.isCollapsed() && isInlineBoundariesEnabled(editor)) {\n        const from = CaretPosition.fromRangeStart(editor.selection.getRng());\n        return backspaceDeleteCollapsed(editor, caret, forward, from);\n      }\n      return Optional.none();\n    };\n\n    const getParentInlines = (rootElm, startElm) => {\n      const parents = parentsAndSelf(startElm, rootElm);\n      return findIndex$2(parents, isBlock$2).fold(constant(parents), index => parents.slice(0, index));\n    };\n    const hasOnlyOneChild = elm => childNodesCount(elm) === 1;\n    const deleteLastPosition = (forward, editor, target, parentInlines) => {\n      const isFormatElement$1 = curry(isFormatElement, editor);\n      const formatNodes = map$3(filter$5(parentInlines, isFormatElement$1), elm => elm.dom);\n      if (formatNodes.length === 0) {\n        deleteElement$2(editor, forward, target);\n      } else {\n        const pos = replaceWithCaretFormat(target.dom, formatNodes);\n        editor.selection.setRng(pos.toRange());\n      }\n    };\n    const deleteCaret$1 = (editor, forward) => {\n      const rootElm = SugarElement.fromDom(editor.getBody());\n      const startElm = SugarElement.fromDom(editor.selection.getStart());\n      const parentInlines = filter$5(getParentInlines(rootElm, startElm), hasOnlyOneChild);\n      return last$3(parentInlines).bind(target => {\n        const fromPos = CaretPosition.fromRangeStart(editor.selection.getRng());\n        if (willDeleteLastPositionInElement(forward, fromPos, target.dom) && !isEmptyCaretFormatElement(target)) {\n          return Optional.some(() => deleteLastPosition(forward, editor, target, parentInlines));\n        } else {\n          return Optional.none();\n        }\n      });\n    };\n    const backspaceDelete$2 = (editor, forward) => editor.selection.isCollapsed() ? deleteCaret$1(editor, forward) : Optional.none();\n\n    const deleteElement = (editor, forward, element) => {\n      if (isNonNullable(element)) {\n        return Optional.some(() => {\n          editor._selectionOverrides.hideFakeCaret();\n          deleteElement$2(editor, forward, SugarElement.fromDom(element));\n        });\n      } else {\n        return Optional.none();\n      }\n    };\n    const deleteCaret = (editor, forward) => {\n      const isNearMedia = forward ? isBeforeMedia : isAfterMedia;\n      const direction = forward ? HDirection.Forwards : HDirection.Backwards;\n      const fromPos = getNormalizedRangeEndPoint(direction, editor.getBody(), editor.selection.getRng());\n      if (isNearMedia(fromPos)) {\n        return deleteElement(editor, forward, fromPos.getNode(!forward));\n      } else {\n        return Optional.from(normalizePosition(forward, fromPos)).filter(pos => isNearMedia(pos) && isMoveInsideSameBlock(fromPos, pos)).bind(pos => deleteElement(editor, forward, pos.getNode(!forward)));\n      }\n    };\n    const deleteRange = (editor, forward) => {\n      const selectedNode = editor.selection.getNode();\n      return isMedia$2(selectedNode) ? deleteElement(editor, forward, selectedNode) : Optional.none();\n    };\n    const backspaceDelete$1 = (editor, forward) => editor.selection.isCollapsed() ? deleteCaret(editor, forward) : deleteRange(editor, forward);\n\n    const isEditable$1 = target => closest$4(target, elm => isContentEditableTrue$3(elm.dom) || isContentEditableFalse$a(elm.dom)).exists(elm => isContentEditableTrue$3(elm.dom));\n    const parseIndentValue = value => toInt(value !== null && value !== void 0 ? value : '').getOr(0);\n    const getIndentStyleName = (useMargin, element) => {\n      const indentStyleName = useMargin || isTable$1(element) ? 'margin' : 'padding';\n      const suffix = get$7(element, 'direction') === 'rtl' ? '-right' : '-left';\n      return indentStyleName + suffix;\n    };\n    const indentElement = (dom, command, useMargin, value, unit, element) => {\n      const indentStyleName = getIndentStyleName(useMargin, SugarElement.fromDom(element));\n      const parsedValue = parseIndentValue(dom.getStyle(element, indentStyleName));\n      if (command === 'outdent') {\n        const styleValue = Math.max(0, parsedValue - value);\n        dom.setStyle(element, indentStyleName, styleValue ? styleValue + unit : '');\n      } else {\n        const styleValue = parsedValue + value + unit;\n        dom.setStyle(element, indentStyleName, styleValue);\n      }\n    };\n    const validateBlocks = (editor, blocks) => forall(blocks, block => {\n      const indentStyleName = getIndentStyleName(shouldIndentUseMargin(editor), block);\n      const intentValue = getRaw$1(block, indentStyleName).map(parseIndentValue).getOr(0);\n      const contentEditable = editor.dom.getContentEditable(block.dom);\n      return contentEditable !== 'false' && intentValue > 0;\n    });\n    const canOutdent = editor => {\n      const blocks = getBlocksToIndent(editor);\n      return !editor.mode.isReadOnly() && (blocks.length > 1 || validateBlocks(editor, blocks));\n    };\n    const isListComponent = el => isList(el) || isListItem$1(el);\n    const parentIsListComponent = el => parent(el).exists(isListComponent);\n    const getBlocksToIndent = editor => filter$5(fromDom$1(editor.selection.getSelectedBlocks()), el => !isListComponent(el) && !parentIsListComponent(el) && isEditable$1(el));\n    const handle = (editor, command) => {\n      var _a, _b;\n      const {dom} = editor;\n      const indentation = getIndentation(editor);\n      const indentUnit = (_b = (_a = /[a-z%]+$/i.exec(indentation)) === null || _a === void 0 ? void 0 : _a[0]) !== null && _b !== void 0 ? _b : 'px';\n      const indentValue = parseIndentValue(indentation);\n      const useMargin = shouldIndentUseMargin(editor);\n      each$e(getBlocksToIndent(editor), block => {\n        indentElement(dom, command, useMargin, indentValue, indentUnit, block.dom);\n      });\n    };\n    const indent = editor => handle(editor, 'indent');\n    const outdent = editor => handle(editor, 'outdent');\n\n    const backspaceDelete = editor => {\n      if (editor.selection.isCollapsed() && canOutdent(editor)) {\n        const dom = editor.dom;\n        const rng = editor.selection.getRng();\n        const pos = CaretPosition.fromRangeStart(rng);\n        const block = dom.getParent(rng.startContainer, dom.isBlock);\n        if (block !== null && isAtStartOfBlock(SugarElement.fromDom(block), pos)) {\n          return Optional.some(() => outdent(editor));\n        }\n      }\n      return Optional.none();\n    };\n\n    const findAction = (editor, caret, forward) => findMap([\n      backspaceDelete,\n      backspaceDelete$5,\n      backspaceDelete$6,\n      (editor, forward) => backspaceDelete$3(editor, caret, forward),\n      backspaceDelete$8,\n      backspaceDelete$9,\n      backspaceDelete$4,\n      backspaceDelete$1,\n      backspaceDelete$7,\n      backspaceDelete$2\n    ], item => item(editor, forward));\n    const deleteCommand = (editor, caret) => {\n      const result = findAction(editor, caret, false);\n      result.fold(() => {\n        execNativeDeleteCommand(editor);\n        paddEmptyBody(editor);\n      }, call);\n    };\n    const forwardDeleteCommand = (editor, caret) => {\n      const result = findAction(editor, caret, true);\n      result.fold(() => execNativeForwardDeleteCommand(editor), call);\n    };\n    const setup$p = (editor, caret) => {\n      editor.addCommand('delete', () => {\n        deleteCommand(editor, caret);\n      });\n      editor.addCommand('forwardDelete', () => {\n        forwardDeleteCommand(editor, caret);\n      });\n    };\n\n    const SIGNIFICANT_MOVE = 5;\n    const LONGPRESS_DELAY = 400;\n    const getTouch = event => {\n      if (event.touches === undefined || event.touches.length !== 1) {\n        return Optional.none();\n      }\n      return Optional.some(event.touches[0]);\n    };\n    const isFarEnough = (touch, data) => {\n      const distX = Math.abs(touch.clientX - data.x);\n      const distY = Math.abs(touch.clientY - data.y);\n      return distX > SIGNIFICANT_MOVE || distY > SIGNIFICANT_MOVE;\n    };\n    const setup$o = editor => {\n      const startData = value$2();\n      const longpressFired = Cell(false);\n      const debounceLongpress = last$1(e => {\n        editor.dispatch('longpress', {\n          ...e,\n          type: 'longpress'\n        });\n        longpressFired.set(true);\n      }, LONGPRESS_DELAY);\n      editor.on('touchstart', e => {\n        getTouch(e).each(touch => {\n          debounceLongpress.cancel();\n          const data = {\n            x: touch.clientX,\n            y: touch.clientY,\n            target: e.target\n          };\n          debounceLongpress.throttle(e);\n          longpressFired.set(false);\n          startData.set(data);\n        });\n      }, true);\n      editor.on('touchmove', e => {\n        debounceLongpress.cancel();\n        getTouch(e).each(touch => {\n          startData.on(data => {\n            if (isFarEnough(touch, data)) {\n              startData.clear();\n              longpressFired.set(false);\n              editor.dispatch('longpresscancel');\n            }\n          });\n        });\n      }, true);\n      editor.on('touchend touchcancel', e => {\n        debounceLongpress.cancel();\n        if (e.type === 'touchcancel') {\n          return;\n        }\n        startData.get().filter(data => data.target.isEqualNode(e.target)).each(() => {\n          if (longpressFired.get()) {\n            e.preventDefault();\n          } else {\n            editor.dispatch('tap', {\n              ...e,\n              type: 'tap'\n            });\n          }\n        });\n      }, true);\n    };\n\n    const isBlockElement = (blockElements, node) => has$2(blockElements, node.nodeName);\n    const isValidTarget = (blockElements, node) => {\n      if (isText$a(node)) {\n        return true;\n      } else if (isElement$6(node)) {\n        return !isBlockElement(blockElements, node) && !isBookmarkNode$1(node);\n      } else {\n        return false;\n      }\n    };\n    const hasBlockParent = (blockElements, root, node) => {\n      return exists(parents(SugarElement.fromDom(node), SugarElement.fromDom(root)), elm => {\n        return isBlockElement(blockElements, elm.dom);\n      });\n    };\n    const shouldRemoveTextNode = (blockElements, node) => {\n      if (isText$a(node)) {\n        if (node.data.length === 0) {\n          return true;\n        } else if (/^\\s+$/.test(node.data) && (!node.nextSibling || isBlockElement(blockElements, node.nextSibling))) {\n          return true;\n        }\n      }\n      return false;\n    };\n    const createRootBlock = editor => editor.dom.create(getForcedRootBlock(editor), getForcedRootBlockAttrs(editor));\n    const addRootBlocks = editor => {\n      const dom = editor.dom, selection = editor.selection;\n      const schema = editor.schema, blockElements = schema.getBlockElements();\n      const startNode = selection.getStart();\n      const rootNode = editor.getBody();\n      let rootBlockNode;\n      let tempNode;\n      let wrapped = false;\n      const forcedRootBlock = getForcedRootBlock(editor);\n      if (!startNode || !isElement$6(startNode)) {\n        return;\n      }\n      const rootNodeName = rootNode.nodeName.toLowerCase();\n      if (!schema.isValidChild(rootNodeName, forcedRootBlock.toLowerCase()) || hasBlockParent(blockElements, rootNode, startNode)) {\n        return;\n      }\n      const rng = selection.getRng();\n      const {startContainer, startOffset, endContainer, endOffset} = rng;\n      const restoreSelection = hasFocus(editor);\n      let node = rootNode.firstChild;\n      while (node) {\n        if (isValidTarget(blockElements, node)) {\n          if (shouldRemoveTextNode(blockElements, node)) {\n            tempNode = node;\n            node = node.nextSibling;\n            dom.remove(tempNode);\n            continue;\n          }\n          if (!rootBlockNode) {\n            rootBlockNode = createRootBlock(editor);\n            rootNode.insertBefore(rootBlockNode, node);\n            wrapped = true;\n          }\n          tempNode = node;\n          node = node.nextSibling;\n          rootBlockNode.appendChild(tempNode);\n        } else {\n          rootBlockNode = null;\n          node = node.nextSibling;\n        }\n      }\n      if (wrapped && restoreSelection) {\n        rng.setStart(startContainer, startOffset);\n        rng.setEnd(endContainer, endOffset);\n        selection.setRng(rng);\n        editor.nodeChanged();\n      }\n    };\n    const insertEmptyLine = (editor, root, insertBlock) => {\n      const block = SugarElement.fromDom(createRootBlock(editor));\n      const br = createPaddingBr();\n      append$1(block, br);\n      insertBlock(root, block);\n      const rng = document.createRange();\n      rng.setStartBefore(br.dom);\n      rng.setEndBefore(br.dom);\n      return rng;\n    };\n    const setup$n = editor => {\n      editor.on('NodeChange', curry(addRootBlocks, editor));\n    };\n\n    const hasClass = checkClassName => node => (' ' + node.attr('class') + ' ').indexOf(checkClassName) !== -1;\n    const replaceMatchWithSpan = (editor, content, cls) => {\n      return function (match) {\n        const args = arguments, index = args[args.length - 2];\n        const prevChar = index > 0 ? content.charAt(index - 1) : '';\n        if (prevChar === '\"') {\n          return match;\n        }\n        if (prevChar === '>') {\n          const findStartTagIndex = content.lastIndexOf('<', index);\n          if (findStartTagIndex !== -1) {\n            const tagHtml = content.substring(findStartTagIndex, index);\n            if (tagHtml.indexOf('contenteditable=\"false\"') !== -1) {\n              return match;\n            }\n          }\n        }\n        return '<span class=\"' + cls + '\" data-mce-content=\"' + editor.dom.encode(args[0]) + '\">' + editor.dom.encode(typeof args[1] === 'string' ? args[1] : args[0]) + '</span>';\n      };\n    };\n    const convertRegExpsToNonEditable = (editor, nonEditableRegExps, e) => {\n      let i = nonEditableRegExps.length, content = e.content;\n      if (e.format === 'raw') {\n        return;\n      }\n      while (i--) {\n        content = content.replace(nonEditableRegExps[i], replaceMatchWithSpan(editor, content, getNonEditableClass(editor)));\n      }\n      e.content = content;\n    };\n    const setup$m = editor => {\n      const contentEditableAttrName = 'contenteditable';\n      const editClass = ' ' + Tools.trim(getEditableClass(editor)) + ' ';\n      const nonEditClass = ' ' + Tools.trim(getNonEditableClass(editor)) + ' ';\n      const hasEditClass = hasClass(editClass);\n      const hasNonEditClass = hasClass(nonEditClass);\n      const nonEditableRegExps = getNonEditableRegExps(editor);\n      if (nonEditableRegExps.length > 0) {\n        editor.on('BeforeSetContent', e => {\n          convertRegExpsToNonEditable(editor, nonEditableRegExps, e);\n        });\n      }\n      editor.parser.addAttributeFilter('class', nodes => {\n        let i = nodes.length;\n        while (i--) {\n          const node = nodes[i];\n          if (hasEditClass(node)) {\n            node.attr(contentEditableAttrName, 'true');\n          } else if (hasNonEditClass(node)) {\n            node.attr(contentEditableAttrName, 'false');\n          }\n        }\n      });\n      editor.serializer.addAttributeFilter(contentEditableAttrName, nodes => {\n        let i = nodes.length;\n        while (i--) {\n          const node = nodes[i];\n          if (!hasEditClass(node) && !hasNonEditClass(node)) {\n            continue;\n          }\n          if (nonEditableRegExps.length > 0 && node.attr('data-mce-content')) {\n            node.name = '#text';\n            node.type = 3;\n            node.raw = true;\n            node.value = node.attr('data-mce-content');\n          } else {\n            node.attr(contentEditableAttrName, null);\n          }\n        }\n      });\n    };\n\n    const findBlockCaretContainer = editor => descendant(SugarElement.fromDom(editor.getBody()), '*[data-mce-caret]').map(elm => elm.dom).getOrNull();\n    const showBlockCaretContainer = (editor, blockCaretContainer) => {\n      if (blockCaretContainer.hasAttribute('data-mce-caret')) {\n        showCaretContainerBlock(blockCaretContainer);\n        editor.selection.setRng(editor.selection.getRng());\n        editor.selection.scrollIntoView(blockCaretContainer);\n      }\n    };\n    const handleBlockContainer = (editor, e) => {\n      const blockCaretContainer = findBlockCaretContainer(editor);\n      if (!blockCaretContainer) {\n        return;\n      }\n      if (e.type === 'compositionstart') {\n        e.preventDefault();\n        e.stopPropagation();\n        showBlockCaretContainer(editor, blockCaretContainer);\n        return;\n      }\n      if (hasContent(blockCaretContainer)) {\n        showBlockCaretContainer(editor, blockCaretContainer);\n        editor.undoManager.add();\n      }\n    };\n    const setup$l = editor => {\n      editor.on('keyup compositionstart', curry(handleBlockContainer, editor));\n    };\n\n    const isContentEditableFalse$3 = isContentEditableFalse$a;\n    const moveToCeFalseHorizontally = (direction, editor, range) => moveHorizontally(editor, direction, range, isBeforeContentEditableFalse, isAfterContentEditableFalse, isContentEditableFalse$3);\n    const moveToCeFalseVertically = (direction, editor, range) => {\n      const isBefore = caretPosition => isBeforeContentEditableFalse(caretPosition) || isBeforeTable(caretPosition);\n      const isAfter = caretPosition => isAfterContentEditableFalse(caretPosition) || isAfterTable(caretPosition);\n      return moveVertically(editor, direction, range, isBefore, isAfter, isContentEditableFalse$3);\n    };\n    const createTextBlock = editor => {\n      const textBlock = editor.dom.create(getForcedRootBlock(editor));\n      textBlock.innerHTML = '<br data-mce-bogus=\"1\">';\n      return textBlock;\n    };\n    const exitPreBlock = (editor, direction, range) => {\n      const caretWalker = CaretWalker(editor.getBody());\n      const getVisualCaretPosition$1 = curry(getVisualCaretPosition, direction === 1 ? caretWalker.next : caretWalker.prev);\n      if (range.collapsed) {\n        const pre = editor.dom.getParent(range.startContainer, 'PRE');\n        if (!pre) {\n          return;\n        }\n        const caretPos = getVisualCaretPosition$1(CaretPosition.fromRangeStart(range));\n        if (!caretPos) {\n          const newBlock = SugarElement.fromDom(createTextBlock(editor));\n          if (direction === 1) {\n            after$4(SugarElement.fromDom(pre), newBlock);\n          } else {\n            before$3(SugarElement.fromDom(pre), newBlock);\n          }\n          editor.selection.select(newBlock.dom, true);\n          editor.selection.collapse();\n        }\n      }\n    };\n    const getHorizontalRange = (editor, forward) => {\n      const direction = forward ? HDirection.Forwards : HDirection.Backwards;\n      const range = editor.selection.getRng();\n      return moveToCeFalseHorizontally(direction, editor, range).orThunk(() => {\n        exitPreBlock(editor, direction, range);\n        return Optional.none();\n      });\n    };\n    const getVerticalRange = (editor, down) => {\n      const direction = down ? 1 : -1;\n      const range = editor.selection.getRng();\n      return moveToCeFalseVertically(direction, editor, range).orThunk(() => {\n        exitPreBlock(editor, direction, range);\n        return Optional.none();\n      });\n    };\n    const moveH$2 = (editor, forward) => getHorizontalRange(editor, forward).exists(newRange => {\n      moveToRange(editor, newRange);\n      return true;\n    });\n    const moveV$3 = (editor, down) => getVerticalRange(editor, down).exists(newRange => {\n      moveToRange(editor, newRange);\n      return true;\n    });\n    const moveToLineEndPoint$1 = (editor, forward) => {\n      const isCefPosition = forward ? isAfterContentEditableFalse : isBeforeContentEditableFalse;\n      return moveToLineEndPoint$3(editor, forward, isCefPosition);\n    };\n    const selectToEndPoint = (editor, forward) => getEdgeCefPosition(editor, !forward).map(pos => {\n      const rng = pos.toRange();\n      const curRng = editor.selection.getRng();\n      if (forward) {\n        rng.setStart(curRng.startContainer, curRng.startOffset);\n      } else {\n        rng.setEnd(curRng.endContainer, curRng.endOffset);\n      }\n      return rng;\n    }).exists(rng => {\n      moveToRange(editor, rng);\n      return true;\n    });\n\n    const isTarget = node => contains$2(['figcaption'], name(node));\n    const getClosestTargetBlock = (pos, root) => {\n      const isRoot = curry(eq, root);\n      return closest$4(SugarElement.fromDom(pos.container()), isBlock$2, isRoot).filter(isTarget);\n    };\n    const isAtFirstOrLastLine = (root, forward, pos) => forward ? isAtLastLine(root.dom, pos) : isAtFirstLine(root.dom, pos);\n    const moveCaretToNewEmptyLine = (editor, forward) => {\n      const root = SugarElement.fromDom(editor.getBody());\n      const pos = CaretPosition.fromRangeStart(editor.selection.getRng());\n      return getClosestTargetBlock(pos, root).exists(() => {\n        if (isAtFirstOrLastLine(root, forward, pos)) {\n          const insertFn = forward ? append$1 : prepend;\n          const rng = insertEmptyLine(editor, root, insertFn);\n          editor.selection.setRng(rng);\n          return true;\n        } else {\n          return false;\n        }\n      });\n    };\n    const moveV$2 = (editor, forward) => {\n      if (editor.selection.isCollapsed()) {\n        return moveCaretToNewEmptyLine(editor, forward);\n      } else {\n        return false;\n      }\n    };\n\n    const baseKeyPattern = {\n      shiftKey: false,\n      altKey: false,\n      ctrlKey: false,\n      metaKey: false,\n      keyCode: 0\n    };\n    const defaultPatterns = patterns => map$3(patterns, pattern => ({\n      ...baseKeyPattern,\n      ...pattern\n    }));\n    const defaultDelayedPatterns = patterns => map$3(patterns, pattern => ({\n      ...baseKeyPattern,\n      ...pattern\n    }));\n    const matchesEvent = (pattern, evt) => evt.keyCode === pattern.keyCode && evt.shiftKey === pattern.shiftKey && evt.altKey === pattern.altKey && evt.ctrlKey === pattern.ctrlKey && evt.metaKey === pattern.metaKey;\n    const match$1 = (patterns, evt) => bind$3(defaultPatterns(patterns), pattern => matchesEvent(pattern, evt) ? [pattern] : []);\n    const matchDelayed = (patterns, evt) => bind$3(defaultDelayedPatterns(patterns), pattern => matchesEvent(pattern, evt) ? [pattern] : []);\n    const action = (f, ...x) => () => f.apply(null, x);\n    const execute = (patterns, evt) => find$2(match$1(patterns, evt), pattern => pattern.action());\n    const executeWithDelayedAction = (patterns, evt) => findMap(matchDelayed(patterns, evt), pattern => pattern.action());\n\n    const moveH$1 = (editor, forward) => {\n      const direction = forward ? HDirection.Forwards : HDirection.Backwards;\n      const range = editor.selection.getRng();\n      return moveHorizontally(editor, direction, range, isBeforeMedia, isAfterMedia, isMedia$2).exists(newRange => {\n        moveToRange(editor, newRange);\n        return true;\n      });\n    };\n    const moveV$1 = (editor, down) => {\n      const direction = down ? 1 : -1;\n      const range = editor.selection.getRng();\n      return moveVertically(editor, direction, range, isBeforeMedia, isAfterMedia, isMedia$2).exists(newRange => {\n        moveToRange(editor, newRange);\n        return true;\n      });\n    };\n    const moveToLineEndPoint = (editor, forward) => {\n      const isNearMedia = forward ? isAfterMedia : isBeforeMedia;\n      return moveToLineEndPoint$3(editor, forward, isNearMedia);\n    };\n\n    const adt = Adt.generate([\n      { none: ['current'] },\n      { first: ['current'] },\n      {\n        middle: [\n          'current',\n          'target'\n        ]\n      },\n      { last: ['current'] }\n    ]);\n    const none = current => adt.none(current);\n    const CellLocation = {\n      ...adt,\n      none\n    };\n\n    const firstLayer = (scope, selector) => {\n      return filterFirstLayer(scope, selector, always);\n    };\n    const filterFirstLayer = (scope, selector, predicate) => {\n      return bind$3(children(scope), x => {\n        if (is$1(x, selector)) {\n          return predicate(x) ? [x] : [];\n        } else {\n          return filterFirstLayer(x, selector, predicate);\n        }\n      });\n    };\n\n    const lookup$1 = (tags, element, isRoot = never) => {\n      if (isRoot(element)) {\n        return Optional.none();\n      }\n      if (contains$2(tags, name(element))) {\n        return Optional.some(element);\n      }\n      const isRootOrUpperTable = elm => is$1(elm, 'table') || isRoot(elm);\n      return ancestor$2(element, tags.join(','), isRootOrUpperTable);\n    };\n    const cell = (element, isRoot) => lookup$1([\n      'td',\n      'th'\n    ], element, isRoot);\n    const cells = ancestor => firstLayer(ancestor, 'th,td');\n    const table = (element, isRoot) => closest$3(element, 'table', isRoot);\n\n    const walk = (all, current, index, direction, isEligible = always) => {\n      const forwards = direction === 1;\n      if (!forwards && index <= 0) {\n        return CellLocation.first(all[0]);\n      } else if (forwards && index >= all.length - 1) {\n        return CellLocation.last(all[all.length - 1]);\n      } else {\n        const newIndex = index + direction;\n        const elem = all[newIndex];\n        return isEligible(elem) ? CellLocation.middle(current, elem) : walk(all, current, newIndex, direction, isEligible);\n      }\n    };\n    const detect = (current, isRoot) => {\n      return table(current, isRoot).bind(table => {\n        const all = cells(table);\n        const index = findIndex$2(all, x => eq(current, x));\n        return index.map(index => ({\n          index,\n          all\n        }));\n      });\n    };\n    const next = (current, isEligible, isRoot) => {\n      const detection = detect(current, isRoot);\n      return detection.fold(() => {\n        return CellLocation.none(current);\n      }, info => {\n        return walk(info.all, current, info.index, 1, isEligible);\n      });\n    };\n    const prev = (current, isEligible, isRoot) => {\n      const detection = detect(current, isRoot);\n      return detection.fold(() => {\n        return CellLocation.none();\n      }, info => {\n        return walk(info.all, current, info.index, -1, isEligible);\n      });\n    };\n\n    const closest = target => closest$3(target, '[contenteditable]');\n    const isEditable = (element, assumeEditable = false) => {\n      if (inBody(element)) {\n        return element.dom.isContentEditable;\n      } else {\n        return closest(element).fold(constant(assumeEditable), editable => getRaw(editable) === 'true');\n      }\n    };\n    const getRaw = element => element.dom.contentEditable;\n\n    const deflate = (rect, delta) => ({\n      left: rect.left - delta,\n      top: rect.top - delta,\n      right: rect.right + delta * 2,\n      bottom: rect.bottom + delta * 2,\n      width: rect.width + delta,\n      height: rect.height + delta\n    });\n    const getCorners = (getYAxisValue, tds) => bind$3(tds, td => {\n      const rect = deflate(clone$1(td.getBoundingClientRect()), -1);\n      return [\n        {\n          x: rect.left,\n          y: getYAxisValue(rect),\n          cell: td\n        },\n        {\n          x: rect.right,\n          y: getYAxisValue(rect),\n          cell: td\n        }\n      ];\n    });\n    const findClosestCorner = (corners, x, y) => foldl(corners, (acc, newCorner) => acc.fold(() => Optional.some(newCorner), oldCorner => {\n      const oldDist = Math.sqrt(Math.abs(oldCorner.x - x) + Math.abs(oldCorner.y - y));\n      const newDist = Math.sqrt(Math.abs(newCorner.x - x) + Math.abs(newCorner.y - y));\n      return Optional.some(newDist < oldDist ? newCorner : oldCorner);\n    }), Optional.none());\n    const getClosestCell = (getYAxisValue, isTargetCorner, table, x, y) => {\n      const cells = descendants(SugarElement.fromDom(table), 'td,th,caption').map(e => e.dom);\n      const corners = filter$5(getCorners(getYAxisValue, cells), corner => isTargetCorner(corner, y));\n      return findClosestCorner(corners, x, y).map(corner => corner.cell);\n    };\n    const getBottomValue = rect => rect.bottom;\n    const getTopValue = rect => rect.top;\n    const isAbove = (corner, y) => corner.y < y;\n    const isBelow = (corner, y) => corner.y > y;\n    const getClosestCellAbove = curry(getClosestCell, getBottomValue, isAbove);\n    const getClosestCellBelow = curry(getClosestCell, getTopValue, isBelow);\n    const findClosestPositionInAboveCell = (table, pos) => head(pos.getClientRects()).bind(rect => getClosestCellAbove(table, rect.left, rect.top)).bind(cell => findClosestHorizontalPosition(getLastLinePositions(cell), pos));\n    const findClosestPositionInBelowCell = (table, pos) => last$3(pos.getClientRects()).bind(rect => getClosestCellBelow(table, rect.left, rect.top)).bind(cell => findClosestHorizontalPosition(getFirstLinePositions(cell), pos));\n\n    const hasNextBreak = (getPositionsUntil, scope, lineInfo) => lineInfo.breakAt.exists(breakPos => getPositionsUntil(scope, breakPos).breakAt.isSome());\n    const startsWithWrapBreak = lineInfo => lineInfo.breakType === BreakType.Wrap && lineInfo.positions.length === 0;\n    const startsWithBrBreak = lineInfo => lineInfo.breakType === BreakType.Br && lineInfo.positions.length === 1;\n    const isAtTableCellLine = (getPositionsUntil, scope, pos) => {\n      const lineInfo = getPositionsUntil(scope, pos);\n      if (startsWithWrapBreak(lineInfo) || !isBr$6(pos.getNode()) && startsWithBrBreak(lineInfo)) {\n        return !hasNextBreak(getPositionsUntil, scope, lineInfo);\n      } else {\n        return lineInfo.breakAt.isNone();\n      }\n    };\n    const isAtFirstTableCellLine = curry(isAtTableCellLine, getPositionsUntilPreviousLine);\n    const isAtLastTableCellLine = curry(isAtTableCellLine, getPositionsUntilNextLine);\n    const isCaretAtStartOrEndOfTable = (forward, rng, table) => {\n      const caretPos = CaretPosition.fromRangeStart(rng);\n      return positionIn(!forward, table).exists(pos => pos.isEqual(caretPos));\n    };\n    const navigateHorizontally = (editor, forward, table, _td) => {\n      const rng = editor.selection.getRng();\n      const direction = forward ? 1 : -1;\n      if (isFakeCaretTableBrowser() && isCaretAtStartOrEndOfTable(forward, rng, table)) {\n        showCaret(direction, editor, table, !forward, false).each(newRng => {\n          moveToRange(editor, newRng);\n        });\n        return true;\n      }\n      return false;\n    };\n    const getClosestAbovePosition = (root, table, start) => findClosestPositionInAboveCell(table, start).orThunk(() => head(start.getClientRects()).bind(rect => findClosestHorizontalPositionFromPoint(getPositionsAbove(root, CaretPosition.before(table)), rect.left))).getOr(CaretPosition.before(table));\n    const getClosestBelowPosition = (root, table, start) => findClosestPositionInBelowCell(table, start).orThunk(() => head(start.getClientRects()).bind(rect => findClosestHorizontalPositionFromPoint(getPositionsBelow(root, CaretPosition.after(table)), rect.left))).getOr(CaretPosition.after(table));\n    const getTable = (previous, pos) => {\n      const node = pos.getNode(previous);\n      return isTable$2(node) ? Optional.some(node) : Optional.none();\n    };\n    const renderBlock = (down, editor, table) => {\n      editor.undoManager.transact(() => {\n        const insertFn = down ? after$4 : before$3;\n        const rng = insertEmptyLine(editor, SugarElement.fromDom(table), insertFn);\n        moveToRange(editor, rng);\n      });\n    };\n    const moveCaret = (editor, down, pos) => {\n      const table = down ? getTable(true, pos) : getTable(false, pos);\n      const last = down === false;\n      table.fold(() => moveToRange(editor, pos.toRange()), table => positionIn(last, editor.getBody()).filter(lastPos => lastPos.isEqual(pos)).fold(() => moveToRange(editor, pos.toRange()), _ => renderBlock(down, editor, table)));\n    };\n    const navigateVertically = (editor, down, table, td) => {\n      const rng = editor.selection.getRng();\n      const pos = CaretPosition.fromRangeStart(rng);\n      const root = editor.getBody();\n      if (!down && isAtFirstTableCellLine(td, pos)) {\n        const newPos = getClosestAbovePosition(root, table, pos);\n        moveCaret(editor, down, newPos);\n        return true;\n      } else if (down && isAtLastTableCellLine(td, pos)) {\n        const newPos = getClosestBelowPosition(root, table, pos);\n        moveCaret(editor, down, newPos);\n        return true;\n      } else {\n        return false;\n      }\n    };\n    const move$1 = (editor, forward, mover) => Optional.from(editor.dom.getParent(editor.selection.getNode(), 'td,th')).bind(td => Optional.from(editor.dom.getParent(td, 'table')).map(table => mover(editor, forward, table, td))).getOr(false);\n    const moveH = (editor, forward) => move$1(editor, forward, navigateHorizontally);\n    const moveV = (editor, forward) => move$1(editor, forward, navigateVertically);\n    const getCellFirstCursorPosition = cell => {\n      const selection = SimSelection.exact(cell, 0, cell, 0);\n      return toNative(selection);\n    };\n    const tabGo = (editor, isRoot, cell) => {\n      return cell.fold(Optional.none, Optional.none, (_current, next) => {\n        return first(next).map(cell => {\n          return getCellFirstCursorPosition(cell);\n        });\n      }, current => {\n        editor.execCommand('mceTableInsertRowAfter');\n        return tabForward(editor, isRoot, current);\n      });\n    };\n    const tabForward = (editor, isRoot, cell) => tabGo(editor, isRoot, next(cell, isEditable));\n    const tabBackward = (editor, isRoot, cell) => tabGo(editor, isRoot, prev(cell, isEditable));\n    const handleTab = (editor, forward) => {\n      const rootElements = [\n        'table',\n        'li',\n        'dl'\n      ];\n      const body = SugarElement.fromDom(editor.getBody());\n      const isRoot = element => {\n        const name$1 = name(element);\n        return eq(element, body) || contains$2(rootElements, name$1);\n      };\n      const rng = editor.selection.getRng();\n      const container = SugarElement.fromDom(!forward ? rng.startContainer : rng.endContainer);\n      return cell(container, isRoot).map(cell => {\n        table(cell, isRoot).each(table => {\n          editor.model.table.clearSelectedCells(table.dom);\n        });\n        editor.selection.collapse(!forward);\n        const navigation = !forward ? tabBackward : tabForward;\n        const rng = navigation(editor, isRoot, cell);\n        rng.each(range => {\n          editor.selection.setRng(range);\n        });\n        return true;\n      }).getOr(false);\n    };\n\n    const executeKeydownOverride$4 = (editor, caret, evt) => {\n      const isMac = Env.os.isMacOS() || Env.os.isiOS();\n      execute([\n        {\n          keyCode: VK.RIGHT,\n          action: action(moveH$2, editor, true)\n        },\n        {\n          keyCode: VK.LEFT,\n          action: action(moveH$2, editor, false)\n        },\n        {\n          keyCode: VK.UP,\n          action: action(moveV$3, editor, false)\n        },\n        {\n          keyCode: VK.DOWN,\n          action: action(moveV$3, editor, true)\n        },\n        ...isMac ? [\n          {\n            keyCode: VK.UP,\n            action: action(selectToEndPoint, editor, false),\n            metaKey: true,\n            shiftKey: true\n          },\n          {\n            keyCode: VK.DOWN,\n            action: action(selectToEndPoint, editor, true),\n            metaKey: true,\n            shiftKey: true\n          }\n        ] : [],\n        {\n          keyCode: VK.RIGHT,\n          action: action(moveH, editor, true)\n        },\n        {\n          keyCode: VK.LEFT,\n          action: action(moveH, editor, false)\n        },\n        {\n          keyCode: VK.UP,\n          action: action(moveV, editor, false)\n        },\n        {\n          keyCode: VK.DOWN,\n          action: action(moveV, editor, true)\n        },\n        {\n          keyCode: VK.RIGHT,\n          action: action(moveH$1, editor, true)\n        },\n        {\n          keyCode: VK.LEFT,\n          action: action(moveH$1, editor, false)\n        },\n        {\n          keyCode: VK.UP,\n          action: action(moveV$1, editor, false)\n        },\n        {\n          keyCode: VK.DOWN,\n          action: action(moveV$1, editor, true)\n        },\n        {\n          keyCode: VK.RIGHT,\n          action: action(move$2, editor, caret, true)\n        },\n        {\n          keyCode: VK.LEFT,\n          action: action(move$2, editor, caret, false)\n        },\n        {\n          keyCode: VK.RIGHT,\n          ctrlKey: !isMac,\n          altKey: isMac,\n          action: action(moveNextWord, editor, caret)\n        },\n        {\n          keyCode: VK.LEFT,\n          ctrlKey: !isMac,\n          altKey: isMac,\n          action: action(movePrevWord, editor, caret)\n        },\n        {\n          keyCode: VK.UP,\n          action: action(moveV$2, editor, false)\n        },\n        {\n          keyCode: VK.DOWN,\n          action: action(moveV$2, editor, true)\n        }\n      ], evt).each(_ => {\n        evt.preventDefault();\n      });\n    };\n    const setup$k = (editor, caret) => {\n      editor.on('keydown', evt => {\n        if (!evt.isDefaultPrevented()) {\n          executeKeydownOverride$4(editor, caret, evt);\n        }\n      });\n    };\n\n    const point = (container, offset) => ({\n      container,\n      offset\n    });\n\n    const DOM$7 = DOMUtils.DOM;\n    const alwaysNext = startNode => node => startNode === node ? -1 : 0;\n    const isBoundary = dom => node => dom.isBlock(node) || contains$2([\n      'BR',\n      'IMG',\n      'HR',\n      'INPUT'\n    ], node.nodeName) || dom.getContentEditable(node) === 'false';\n    const textBefore = (node, offset, rootNode) => {\n      if (isText$a(node) && offset >= 0) {\n        return Optional.some(point(node, offset));\n      } else {\n        const textSeeker = TextSeeker(DOM$7);\n        return Optional.from(textSeeker.backwards(node, offset, alwaysNext(node), rootNode)).map(prev => point(prev.container, prev.container.data.length));\n      }\n    };\n    const textAfter = (node, offset, rootNode) => {\n      if (isText$a(node) && offset >= node.length) {\n        return Optional.some(point(node, offset));\n      } else {\n        const textSeeker = TextSeeker(DOM$7);\n        return Optional.from(textSeeker.forwards(node, offset, alwaysNext(node), rootNode)).map(prev => point(prev.container, 0));\n      }\n    };\n    const scanLeft = (node, offset, rootNode) => {\n      if (!isText$a(node)) {\n        return Optional.none();\n      }\n      const text = node.data;\n      if (offset >= 0 && offset <= text.length) {\n        return Optional.some(point(node, offset));\n      } else {\n        const textSeeker = TextSeeker(DOM$7);\n        return Optional.from(textSeeker.backwards(node, offset, alwaysNext(node), rootNode)).bind(prev => {\n          const prevText = prev.container.data;\n          return scanLeft(prev.container, offset + prevText.length, rootNode);\n        });\n      }\n    };\n    const scanRight = (node, offset, rootNode) => {\n      if (!isText$a(node)) {\n        return Optional.none();\n      }\n      const text = node.data;\n      if (offset <= text.length) {\n        return Optional.some(point(node, offset));\n      } else {\n        const textSeeker = TextSeeker(DOM$7);\n        return Optional.from(textSeeker.forwards(node, offset, alwaysNext(node), rootNode)).bind(next => scanRight(next.container, offset - text.length, rootNode));\n      }\n    };\n    const repeatLeft = (dom, node, offset, process, rootNode) => {\n      const search = TextSeeker(dom, isBoundary(dom));\n      return Optional.from(search.backwards(node, offset, process, rootNode));\n    };\n\n    const isValidTextRange = rng => rng.collapsed && isText$a(rng.startContainer);\n    const getText = rng => trim$1(rng.toString().replace(/\\u00A0/g, ' '));\n    const isWhitespace = chr => chr !== '' && ' \\xA0\\f\\n\\r\\t\\x0B'.indexOf(chr) !== -1;\n\n    const stripTrigger = (text, trigger) => text.substring(trigger.length);\n    const findTrigger = (text, index, trigger) => {\n      let i;\n      const firstChar = trigger.charAt(0);\n      for (i = index - 1; i >= 0; i--) {\n        const char = text.charAt(i);\n        if (isWhitespace(char)) {\n          return Optional.none();\n        }\n        if (firstChar === char && contains$1(text, trigger, i, index)) {\n          break;\n        }\n      }\n      return Optional.some(i);\n    };\n    const findStart = (dom, initRange, trigger, minChars = 0) => {\n      if (!isValidTextRange(initRange)) {\n        return Optional.none();\n      }\n      const buffer = {\n        text: '',\n        offset: 0\n      };\n      const findTriggerIndex = (element, offset, text) => {\n        buffer.text = text + buffer.text;\n        buffer.offset += offset;\n        return findTrigger(buffer.text, buffer.offset, trigger).getOr(offset);\n      };\n      const root = dom.getParent(initRange.startContainer, dom.isBlock) || dom.getRoot();\n      return repeatLeft(dom, initRange.startContainer, initRange.startOffset, findTriggerIndex, root).bind(spot => {\n        const range = initRange.cloneRange();\n        range.setStart(spot.container, spot.offset);\n        range.setEnd(initRange.endContainer, initRange.endOffset);\n        if (range.collapsed) {\n          return Optional.none();\n        }\n        const text = getText(range);\n        const triggerIndex = text.lastIndexOf(trigger);\n        if (triggerIndex !== 0 || stripTrigger(text, trigger).length < minChars) {\n          return Optional.none();\n        } else {\n          return Optional.some({\n            text: stripTrigger(text, trigger),\n            range,\n            trigger\n          });\n        }\n      });\n    };\n    const getContext = (dom, initRange, trigger, minChars = 0) => detect$1(SugarElement.fromDom(initRange.startContainer)).fold(() => findStart(dom, initRange, trigger, minChars), elm => {\n      const range = dom.createRng();\n      range.selectNode(elm.dom);\n      const text = getText(range);\n      return Optional.some({\n        range,\n        text: stripTrigger(text, trigger),\n        trigger\n      });\n    });\n\n    const isText$1 = node => node.nodeType === TEXT;\n    const isElement = node => node.nodeType === ELEMENT;\n    const toLast = node => {\n      if (isText$1(node)) {\n        return point(node, node.data.length);\n      } else {\n        const children = node.childNodes;\n        return children.length > 0 ? toLast(children[children.length - 1]) : point(node, children.length);\n      }\n    };\n    const toLeaf = (node, offset) => {\n      const children = node.childNodes;\n      if (children.length > 0 && offset < children.length) {\n        return toLeaf(children[offset], 0);\n      } else if (children.length > 0 && isElement(node) && children.length === offset) {\n        return toLast(children[children.length - 1]);\n      } else {\n        return point(node, offset);\n      }\n    };\n\n    const isPreviousCharContent = (dom, leaf) => {\n      var _a;\n      const root = (_a = dom.getParent(leaf.container, dom.isBlock)) !== null && _a !== void 0 ? _a : dom.getRoot();\n      return repeatLeft(dom, leaf.container, leaf.offset, (_element, offset) => offset === 0 ? -1 : offset, root).filter(spot => {\n        const char = spot.container.data.charAt(spot.offset - 1);\n        return !isWhitespace(char);\n      }).isSome();\n    };\n    const isStartOfWord = dom => rng => {\n      const leaf = toLeaf(rng.startContainer, rng.startOffset);\n      return !isPreviousCharContent(dom, leaf);\n    };\n    const getTriggerContext = (dom, initRange, database) => findMap(database.triggers, trigger => getContext(dom, initRange, trigger));\n    const lookup = (editor, getDatabase) => {\n      const database = getDatabase();\n      const rng = editor.selection.getRng();\n      return getTriggerContext(editor.dom, rng, database).bind(context => lookupWithContext(editor, getDatabase, context));\n    };\n    const lookupWithContext = (editor, getDatabase, context, fetchOptions = {}) => {\n      var _a;\n      const database = getDatabase();\n      const rng = editor.selection.getRng();\n      const startText = (_a = rng.startContainer.nodeValue) !== null && _a !== void 0 ? _a : '';\n      const autocompleters = filter$5(database.lookupByTrigger(context.trigger), autocompleter => context.text.length >= autocompleter.minChars && autocompleter.matches.getOrThunk(() => isStartOfWord(editor.dom))(context.range, startText, context.text));\n      if (autocompleters.length === 0) {\n        return Optional.none();\n      }\n      const lookupData = Promise.all(map$3(autocompleters, ac => {\n        const fetchResult = ac.fetch(context.text, ac.maxResults, fetchOptions);\n        return fetchResult.then(results => ({\n          matchText: context.text,\n          items: results,\n          columns: ac.columns,\n          onAction: ac.onAction,\n          highlightOn: ac.highlightOn\n        }));\n      }));\n      return Optional.some({\n        lookupData,\n        context\n      });\n    };\n\n    var SimpleResultType;\n    (function (SimpleResultType) {\n      SimpleResultType[SimpleResultType['Error'] = 0] = 'Error';\n      SimpleResultType[SimpleResultType['Value'] = 1] = 'Value';\n    }(SimpleResultType || (SimpleResultType = {})));\n    const fold$1 = (res, onError, onValue) => res.stype === SimpleResultType.Error ? onError(res.serror) : onValue(res.svalue);\n    const partition = results => {\n      const values = [];\n      const errors = [];\n      each$e(results, obj => {\n        fold$1(obj, err => errors.push(err), val => values.push(val));\n      });\n      return {\n        values,\n        errors\n      };\n    };\n    const mapError = (res, f) => {\n      if (res.stype === SimpleResultType.Error) {\n        return {\n          stype: SimpleResultType.Error,\n          serror: f(res.serror)\n        };\n      } else {\n        return res;\n      }\n    };\n    const map = (res, f) => {\n      if (res.stype === SimpleResultType.Value) {\n        return {\n          stype: SimpleResultType.Value,\n          svalue: f(res.svalue)\n        };\n      } else {\n        return res;\n      }\n    };\n    const bind = (res, f) => {\n      if (res.stype === SimpleResultType.Value) {\n        return f(res.svalue);\n      } else {\n        return res;\n      }\n    };\n    const bindError = (res, f) => {\n      if (res.stype === SimpleResultType.Error) {\n        return f(res.serror);\n      } else {\n        return res;\n      }\n    };\n    const svalue = v => ({\n      stype: SimpleResultType.Value,\n      svalue: v\n    });\n    const serror = e => ({\n      stype: SimpleResultType.Error,\n      serror: e\n    });\n    const toResult = res => fold$1(res, Result.error, Result.value);\n    const fromResult = res => res.fold(serror, svalue);\n    const SimpleResult = {\n      fromResult,\n      toResult,\n      svalue,\n      partition,\n      serror,\n      bind,\n      bindError,\n      map,\n      mapError,\n      fold: fold$1\n    };\n\n    const formatObj = input => {\n      return isObject(input) && keys(input).length > 100 ? ' removed due to size' : JSON.stringify(input, null, 2);\n    };\n    const formatErrors = errors => {\n      const es = errors.length > 10 ? errors.slice(0, 10).concat([{\n          path: [],\n          getErrorInfo: constant('... (only showing first ten failures)')\n        }]) : errors;\n      return map$3(es, e => {\n        return 'Failed path: (' + e.path.join(' > ') + ')\\n' + e.getErrorInfo();\n      });\n    };\n\n    const nu = (path, getErrorInfo) => {\n      return SimpleResult.serror([{\n          path,\n          getErrorInfo\n        }]);\n    };\n    const missingRequired = (path, key, obj) => nu(path, () => 'Could not find valid *required* value for \"' + key + '\" in ' + formatObj(obj));\n    const missingKey = (path, key) => nu(path, () => 'Choice schema did not contain choice key: \"' + key + '\"');\n    const missingBranch = (path, branches, branch) => nu(path, () => 'The chosen schema: \"' + branch + '\" did not exist in branches: ' + formatObj(branches));\n    const custom = (path, err) => nu(path, constant(err));\n\n    const chooseFrom = (path, input, branches, ch) => {\n      const fields = get$a(branches, ch);\n      return fields.fold(() => missingBranch(path, branches, ch), vp => vp.extract(path.concat(['branch: ' + ch]), input));\n    };\n    const choose$1 = (key, branches) => {\n      const extract = (path, input) => {\n        const choice = get$a(input, key);\n        return choice.fold(() => missingKey(path, key), chosen => chooseFrom(path, input, branches, chosen));\n      };\n      const toString = () => 'chooseOn(' + key + '). Possible values: ' + keys(branches);\n      return {\n        extract,\n        toString\n      };\n    };\n\n    const shallow = (old, nu) => {\n      return nu;\n    };\n    const deep = (old, nu) => {\n      const bothObjects = isPlainObject(old) && isPlainObject(nu);\n      return bothObjects ? deepMerge(old, nu) : nu;\n    };\n    const baseMerge = merger => {\n      return (...objects) => {\n        if (objects.length === 0) {\n          throw new Error(`Can't merge zero objects`);\n        }\n        const ret = {};\n        for (let j = 0; j < objects.length; j++) {\n          const curObject = objects[j];\n          for (const key in curObject) {\n            if (has$2(curObject, key)) {\n              ret[key] = merger(ret[key], curObject[key]);\n            }\n          }\n        }\n        return ret;\n      };\n    };\n    const deepMerge = baseMerge(deep);\n    const merge = baseMerge(shallow);\n\n    const required = () => ({\n      tag: 'required',\n      process: {}\n    });\n    const defaultedThunk = fallbackThunk => ({\n      tag: 'defaultedThunk',\n      process: fallbackThunk\n    });\n    const defaulted$1 = fallback => defaultedThunk(constant(fallback));\n    const asOption = () => ({\n      tag: 'option',\n      process: {}\n    });\n\n    const mergeValues = (values, base) => values.length > 0 ? SimpleResult.svalue(deepMerge(base, merge.apply(undefined, values))) : SimpleResult.svalue(base);\n    const mergeErrors = errors => compose(SimpleResult.serror, flatten)(errors);\n    const consolidateObj = (objects, base) => {\n      const partition = SimpleResult.partition(objects);\n      return partition.errors.length > 0 ? mergeErrors(partition.errors) : mergeValues(partition.values, base);\n    };\n    const consolidateArr = objects => {\n      const partitions = SimpleResult.partition(objects);\n      return partitions.errors.length > 0 ? mergeErrors(partitions.errors) : SimpleResult.svalue(partitions.values);\n    };\n    const ResultCombine = {\n      consolidateObj,\n      consolidateArr\n    };\n\n    const field$1 = (key, newKey, presence, prop) => ({\n      tag: 'field',\n      key,\n      newKey,\n      presence,\n      prop\n    });\n    const customField$1 = (newKey, instantiator) => ({\n      tag: 'custom',\n      newKey,\n      instantiator\n    });\n    const fold = (value, ifField, ifCustom) => {\n      switch (value.tag) {\n      case 'field':\n        return ifField(value.key, value.newKey, value.presence, value.prop);\n      case 'custom':\n        return ifCustom(value.newKey, value.instantiator);\n      }\n    };\n\n    const value = validator => {\n      const extract = (path, val) => {\n        return SimpleResult.bindError(validator(val), err => custom(path, err));\n      };\n      const toString = constant('val');\n      return {\n        extract,\n        toString\n      };\n    };\n    const anyValue$1 = value(SimpleResult.svalue);\n\n    const requiredAccess = (path, obj, key, bundle) => get$a(obj, key).fold(() => missingRequired(path, key, obj), bundle);\n    const fallbackAccess = (obj, key, fallback, bundle) => {\n      const v = get$a(obj, key).getOrThunk(() => fallback(obj));\n      return bundle(v);\n    };\n    const optionAccess = (obj, key, bundle) => bundle(get$a(obj, key));\n    const optionDefaultedAccess = (obj, key, fallback, bundle) => {\n      const opt = get$a(obj, key).map(val => val === true ? fallback(obj) : val);\n      return bundle(opt);\n    };\n    const extractField = (field, path, obj, key, prop) => {\n      const bundle = av => prop.extract(path.concat([key]), av);\n      const bundleAsOption = optValue => optValue.fold(() => SimpleResult.svalue(Optional.none()), ov => {\n        const result = prop.extract(path.concat([key]), ov);\n        return SimpleResult.map(result, Optional.some);\n      });\n      switch (field.tag) {\n      case 'required':\n        return requiredAccess(path, obj, key, bundle);\n      case 'defaultedThunk':\n        return fallbackAccess(obj, key, field.process, bundle);\n      case 'option':\n        return optionAccess(obj, key, bundleAsOption);\n      case 'defaultedOptionThunk':\n        return optionDefaultedAccess(obj, key, field.process, bundleAsOption);\n      case 'mergeWithThunk': {\n          return fallbackAccess(obj, key, constant({}), v => {\n            const result = deepMerge(field.process(obj), v);\n            return bundle(result);\n          });\n        }\n      }\n    };\n    const extractFields = (path, obj, fields) => {\n      const success = {};\n      const errors = [];\n      for (const field of fields) {\n        fold(field, (key, newKey, presence, prop) => {\n          const result = extractField(presence, path, obj, key, prop);\n          SimpleResult.fold(result, err => {\n            errors.push(...err);\n          }, res => {\n            success[newKey] = res;\n          });\n        }, (newKey, instantiator) => {\n          success[newKey] = instantiator(obj);\n        });\n      }\n      return errors.length > 0 ? SimpleResult.serror(errors) : SimpleResult.svalue(success);\n    };\n    const objOf = values => {\n      const extract = (path, o) => extractFields(path, o, values);\n      const toString = () => {\n        const fieldStrings = map$3(values, value => fold(value, (key, _okey, _presence, prop) => key + ' -> ' + prop.toString(), (newKey, _instantiator) => 'state(' + newKey + ')'));\n        return 'obj{\\n' + fieldStrings.join('\\n') + '}';\n      };\n      return {\n        extract,\n        toString\n      };\n    };\n    const arrOf = prop => {\n      const extract = (path, array) => {\n        const results = map$3(array, (a, i) => prop.extract(path.concat(['[' + i + ']']), a));\n        return ResultCombine.consolidateArr(results);\n      };\n      const toString = () => 'array(' + prop.toString() + ')';\n      return {\n        extract,\n        toString\n      };\n    };\n\n    const valueOf = validator => value(v => validator(v).fold(SimpleResult.serror, SimpleResult.svalue));\n    const extractValue = (label, prop, obj) => {\n      const res = prop.extract([label], obj);\n      return SimpleResult.mapError(res, errs => ({\n        input: obj,\n        errors: errs\n      }));\n    };\n    const asRaw = (label, prop, obj) => SimpleResult.toResult(extractValue(label, prop, obj));\n    const formatError = errInfo => {\n      return 'Errors: \\n' + formatErrors(errInfo.errors).join('\\n') + '\\n\\nInput object: ' + formatObj(errInfo.input);\n    };\n    const choose = (key, branches) => choose$1(key, map$2(branches, objOf));\n\n    const anyValue = constant(anyValue$1);\n    const typedValue = (validator, expectedType) => value(a => {\n      const actualType = typeof a;\n      return validator(a) ? SimpleResult.svalue(a) : SimpleResult.serror(`Expected type: ${ expectedType } but got: ${ actualType }`);\n    });\n    const number = typedValue(isNumber, 'number');\n    const string = typedValue(isString, 'string');\n    const boolean = typedValue(isBoolean, 'boolean');\n    const functionProcessor = typedValue(isFunction, 'function');\n\n    const field = field$1;\n    const customField = customField$1;\n    const validateEnum = values => valueOf(value => contains$2(values, value) ? Result.value(value) : Result.error(`Unsupported value: \"${ value }\", choose one of \"${ values.join(', ') }\".`));\n    const requiredOf = (key, schema) => field(key, key, required(), schema);\n    const requiredString = key => requiredOf(key, string);\n    const requiredFunction = key => requiredOf(key, functionProcessor);\n    const requiredArrayOf = (key, schema) => field(key, key, required(), arrOf(schema));\n    const optionOf = (key, schema) => field(key, key, asOption(), schema);\n    const optionString = key => optionOf(key, string);\n    const optionFunction = key => optionOf(key, functionProcessor);\n    const defaulted = (key, fallback) => field(key, key, defaulted$1(fallback), anyValue());\n    const defaultedOf = (key, fallback, schema) => field(key, key, defaulted$1(fallback), schema);\n    const defaultedNumber = (key, fallback) => defaultedOf(key, fallback, number);\n    const defaultedString = (key, fallback) => defaultedOf(key, fallback, string);\n    const defaultedStringEnum = (key, fallback, values) => defaultedOf(key, fallback, validateEnum(values));\n    const defaultedBoolean = (key, fallback) => defaultedOf(key, fallback, boolean);\n    const defaultedFunction = (key, fallback) => defaultedOf(key, fallback, functionProcessor);\n    const defaultedArrayOf = (key, fallback, schema) => defaultedOf(key, fallback, arrOf(schema));\n\n    const type = requiredString('type');\n    const fetch$1 = requiredFunction('fetch');\n    const onAction = requiredFunction('onAction');\n    const onSetup = defaultedFunction('onSetup', () => noop);\n    const optionalText = optionString('text');\n    const optionalIcon = optionString('icon');\n    const optionalTooltip = optionString('tooltip');\n    const optionalLabel = optionString('label');\n    const active = defaultedBoolean('active', false);\n    const enabled = defaultedBoolean('enabled', true);\n    const primary = defaultedBoolean('primary', false);\n    const defaultedColumns = num => defaulted('columns', num);\n    const defaultedType = type => defaultedString('type', type);\n\n    const autocompleterSchema = objOf([\n      type,\n      requiredString('trigger'),\n      defaultedNumber('minChars', 1),\n      defaultedColumns(1),\n      defaultedNumber('maxResults', 10),\n      optionFunction('matches'),\n      fetch$1,\n      onAction,\n      defaultedArrayOf('highlightOn', [], string)\n    ]);\n    const createAutocompleter = spec => asRaw('Autocompleter', autocompleterSchema, {\n      trigger: spec.ch,\n      ...spec\n    });\n\n    const baseToolbarButtonFields = [\n      enabled,\n      optionalTooltip,\n      optionalIcon,\n      optionalText,\n      onSetup\n    ];\n\n    const baseToolbarToggleButtonFields = [active].concat(baseToolbarButtonFields);\n\n    const contextBarFields = [\n      defaultedFunction('predicate', never),\n      defaultedStringEnum('scope', 'node', [\n        'node',\n        'editor'\n      ]),\n      defaultedStringEnum('position', 'selection', [\n        'node',\n        'selection',\n        'line'\n      ])\n    ];\n\n    const contextButtonFields = baseToolbarButtonFields.concat([\n      defaultedType('contextformbutton'),\n      primary,\n      onAction,\n      customField('original', identity)\n    ]);\n    const contextToggleButtonFields = baseToolbarToggleButtonFields.concat([\n      defaultedType('contextformbutton'),\n      primary,\n      onAction,\n      customField('original', identity)\n    ]);\n    const launchButtonFields = baseToolbarButtonFields.concat([defaultedType('contextformbutton')]);\n    const launchToggleButtonFields = baseToolbarToggleButtonFields.concat([defaultedType('contextformtogglebutton')]);\n    const toggleOrNormal = choose('type', {\n      contextformbutton: contextButtonFields,\n      contextformtogglebutton: contextToggleButtonFields\n    });\n    objOf([\n      defaultedType('contextform'),\n      defaultedFunction('initValue', constant('')),\n      optionalLabel,\n      requiredArrayOf('commands', toggleOrNormal),\n      optionOf('launch', choose('type', {\n        contextformbutton: launchButtonFields,\n        contextformtogglebutton: launchToggleButtonFields\n      }))\n    ].concat(contextBarFields));\n\n    const register$2 = editor => {\n      const popups = editor.ui.registry.getAll().popups;\n      const dataset = map$2(popups, popup => createAutocompleter(popup).fold(err => {\n        throw new Error(formatError(err));\n      }, identity));\n      const triggers = stringArray(mapToArray(dataset, v => v.trigger));\n      const datasetValues = values(dataset);\n      const lookupByTrigger = trigger => filter$5(datasetValues, dv => dv.trigger === trigger);\n      return {\n        dataset,\n        triggers,\n        lookupByTrigger\n      };\n    };\n\n    const setupEditorInput = (editor, api) => {\n      const update = last$1(api.load, 50);\n      editor.on('keypress compositionend', e => {\n        if (e.which === 27) {\n          return;\n        }\n        update.throttle();\n      });\n      editor.on('keydown', e => {\n        const keyCode = e.which;\n        if (keyCode === 8) {\n          update.throttle();\n        } else if (keyCode === 27) {\n          api.cancelIfNecessary();\n        }\n      });\n      editor.on('remove', update.cancel);\n    };\n    const setup$j = editor => {\n      const activeAutocompleter = value$2();\n      const uiActive = Cell(false);\n      const isActive = activeAutocompleter.isSet;\n      const cancelIfNecessary = () => {\n        if (isActive()) {\n          removeAutocompleterDecoration(editor);\n          fireAutocompleterEnd(editor);\n          uiActive.set(false);\n          activeAutocompleter.clear();\n        }\n      };\n      const commenceIfNecessary = context => {\n        if (!isActive()) {\n          addAutocompleterDecoration(editor, context.range);\n          activeAutocompleter.set({\n            trigger: context.trigger,\n            matchLength: context.text.length\n          });\n        }\n      };\n      const getAutocompleters = cached(() => register$2(editor));\n      const doLookup = fetchOptions => activeAutocompleter.get().map(ac => getContext(editor.dom, editor.selection.getRng(), ac.trigger).bind(newContext => lookupWithContext(editor, getAutocompleters, newContext, fetchOptions))).getOrThunk(() => lookup(editor, getAutocompleters));\n      const load = fetchOptions => {\n        doLookup(fetchOptions).fold(cancelIfNecessary, lookupInfo => {\n          commenceIfNecessary(lookupInfo.context);\n          lookupInfo.lookupData.then(lookupData => {\n            activeAutocompleter.get().map(ac => {\n              const context = lookupInfo.context;\n              if (ac.trigger === context.trigger) {\n                if (context.text.length - ac.matchLength >= 10) {\n                  cancelIfNecessary();\n                } else {\n                  activeAutocompleter.set({\n                    ...ac,\n                    matchLength: context.text.length\n                  });\n                  if (uiActive.get()) {\n                    fireAutocompleterUpdate(editor, { lookupData });\n                  } else {\n                    uiActive.set(true);\n                    fireAutocompleterStart(editor, { lookupData });\n                  }\n                }\n              }\n            });\n          });\n        });\n      };\n      editor.addCommand('mceAutocompleterReload', (_ui, value) => {\n        const fetchOptions = isObject(value) ? value.fetchOptions : {};\n        load(fetchOptions);\n      });\n      editor.addCommand('mceAutocompleterClose', cancelIfNecessary);\n      setupEditorInput(editor, {\n        cancelIfNecessary,\n        load\n      });\n    };\n\n    const createAndFireInputEvent = eventType => (editor, inputType, specifics = {}) => {\n      const target = editor.getBody();\n      const overrides = {\n        bubbles: true,\n        composed: true,\n        data: null,\n        isComposing: false,\n        detail: 0,\n        view: null,\n        target,\n        currentTarget: target,\n        eventPhase: Event.AT_TARGET,\n        originalTarget: target,\n        explicitOriginalTarget: target,\n        isTrusted: false,\n        srcElement: target,\n        cancelable: false,\n        preventDefault: noop,\n        inputType\n      };\n      const input = clone$3(new InputEvent(eventType));\n      return editor.dispatch(eventType, {\n        ...input,\n        ...overrides,\n        ...specifics\n      });\n    };\n    const fireFakeInputEvent = createAndFireInputEvent('input');\n    const fireFakeBeforeInputEvent = createAndFireInputEvent('beforeinput');\n\n    const executeKeydownOverride$3 = (editor, caret, evt) => {\n      const inputType = evt.keyCode === VK.BACKSPACE ? 'deleteContentBackward' : 'deleteContentForward';\n      executeWithDelayedAction([\n        {\n          keyCode: VK.BACKSPACE,\n          action: action(backspaceDelete, editor)\n        },\n        {\n          keyCode: VK.BACKSPACE,\n          action: action(backspaceDelete$5, editor, false)\n        },\n        {\n          keyCode: VK.DELETE,\n          action: action(backspaceDelete$5, editor, true)\n        },\n        {\n          keyCode: VK.BACKSPACE,\n          action: action(backspaceDelete$6, editor, false)\n        },\n        {\n          keyCode: VK.DELETE,\n          action: action(backspaceDelete$6, editor, true)\n        },\n        {\n          keyCode: VK.BACKSPACE,\n          action: action(backspaceDelete$3, editor, caret, false)\n        },\n        {\n          keyCode: VK.DELETE,\n          action: action(backspaceDelete$3, editor, caret, true)\n        },\n        {\n          keyCode: VK.BACKSPACE,\n          action: action(backspaceDelete$9, editor, false)\n        },\n        {\n          keyCode: VK.DELETE,\n          action: action(backspaceDelete$9, editor, true)\n        },\n        {\n          keyCode: VK.BACKSPACE,\n          action: action(backspaceDelete$4, editor, false)\n        },\n        {\n          keyCode: VK.DELETE,\n          action: action(backspaceDelete$4, editor, true)\n        },\n        {\n          keyCode: VK.BACKSPACE,\n          action: action(backspaceDelete$1, editor, false)\n        },\n        {\n          keyCode: VK.DELETE,\n          action: action(backspaceDelete$1, editor, true)\n        },\n        {\n          keyCode: VK.BACKSPACE,\n          action: action(backspaceDelete$7, editor, false)\n        },\n        {\n          keyCode: VK.DELETE,\n          action: action(backspaceDelete$7, editor, true)\n        },\n        {\n          keyCode: VK.BACKSPACE,\n          action: action(backspaceDelete$8, editor, false)\n        },\n        {\n          keyCode: VK.DELETE,\n          action: action(backspaceDelete$8, editor, true)\n        },\n        {\n          keyCode: VK.BACKSPACE,\n          action: action(backspaceDelete$2, editor, false)\n        },\n        {\n          keyCode: VK.DELETE,\n          action: action(backspaceDelete$2, editor, true)\n        }\n      ], evt).each(applyAction => {\n        evt.preventDefault();\n        const beforeInput = fireFakeBeforeInputEvent(editor, inputType);\n        if (!beforeInput.isDefaultPrevented()) {\n          applyAction();\n          fireFakeInputEvent(editor, inputType);\n        }\n      });\n    };\n    const executeKeyupOverride = (editor, evt) => {\n      execute([\n        {\n          keyCode: VK.BACKSPACE,\n          action: action(paddEmptyElement, editor)\n        },\n        {\n          keyCode: VK.DELETE,\n          action: action(paddEmptyElement, editor)\n        }\n      ], evt);\n    };\n    const setup$i = (editor, caret) => {\n      editor.on('keydown', evt => {\n        if (!evt.isDefaultPrevented()) {\n          executeKeydownOverride$3(editor, caret, evt);\n        }\n      });\n      editor.on('keyup', evt => {\n        if (!evt.isDefaultPrevented()) {\n          executeKeyupOverride(editor, evt);\n        }\n      });\n    };\n\n    const firstNonWhiteSpaceNodeSibling = node => {\n      while (node) {\n        if (isElement$6(node) || isText$a(node) && node.data && /[\\r\\n\\s]/.test(node.data)) {\n          return node;\n        }\n        node = node.nextSibling;\n      }\n      return null;\n    };\n    const moveToCaretPosition = (editor, root) => {\n      const dom = editor.dom;\n      const moveCaretBeforeOnEnterElementsMap = editor.schema.getMoveCaretBeforeOnEnterElements();\n      if (!root) {\n        return;\n      }\n      if (/^(LI|DT|DD)$/.test(root.nodeName)) {\n        const firstChild = firstNonWhiteSpaceNodeSibling(root.firstChild);\n        if (firstChild && /^(UL|OL|DL)$/.test(firstChild.nodeName)) {\n          root.insertBefore(dom.doc.createTextNode(nbsp), root.firstChild);\n        }\n      }\n      const rng = dom.createRng();\n      root.normalize();\n      if (root.hasChildNodes()) {\n        const walker = new DomTreeWalker(root, root);\n        let lastNode = root;\n        let node;\n        while (node = walker.current()) {\n          if (isText$a(node)) {\n            rng.setStart(node, 0);\n            rng.setEnd(node, 0);\n            break;\n          }\n          if (moveCaretBeforeOnEnterElementsMap[node.nodeName.toLowerCase()]) {\n            rng.setStartBefore(node);\n            rng.setEndBefore(node);\n            break;\n          }\n          lastNode = node;\n          node = walker.next();\n        }\n        if (!node) {\n          rng.setStart(lastNode, 0);\n          rng.setEnd(lastNode, 0);\n        }\n      } else {\n        if (isBr$6(root)) {\n          if (root.nextSibling && dom.isBlock(root.nextSibling)) {\n            rng.setStartBefore(root);\n            rng.setEndBefore(root);\n          } else {\n            rng.setStartAfter(root);\n            rng.setEndAfter(root);\n          }\n        } else {\n          rng.setStart(root, 0);\n          rng.setEnd(root, 0);\n        }\n      }\n      editor.selection.setRng(rng);\n      scrollRangeIntoView(editor, rng);\n    };\n    const getEditableRoot = (dom, node) => {\n      const root = dom.getRoot();\n      let editableRoot;\n      let parent = node;\n      while (parent !== root && parent && dom.getContentEditable(parent) !== 'false') {\n        if (dom.getContentEditable(parent) === 'true') {\n          editableRoot = parent;\n        }\n        parent = parent.parentNode;\n      }\n      return parent !== root ? editableRoot : root;\n    };\n    const getParentBlock$1 = editor => {\n      return Optional.from(editor.dom.getParent(editor.selection.getStart(true), editor.dom.isBlock));\n    };\n    const getParentBlockName = editor => {\n      return getParentBlock$1(editor).fold(constant(''), parentBlock => {\n        return parentBlock.nodeName.toUpperCase();\n      });\n    };\n    const isListItemParentBlock = editor => {\n      return getParentBlock$1(editor).filter(elm => {\n        return isListItem$1(SugarElement.fromDom(elm));\n      }).isSome();\n    };\n\n    const hasFirstChild = (elm, name) => {\n      return elm.firstChild && elm.firstChild.nodeName === name;\n    };\n    const isFirstChild = elm => {\n      var _a;\n      return ((_a = elm.parentNode) === null || _a === void 0 ? void 0 : _a.firstChild) === elm;\n    };\n    const hasParent = (elm, parentName) => {\n      const parentNode = elm === null || elm === void 0 ? void 0 : elm.parentNode;\n      return isNonNullable(parentNode) && parentNode.nodeName === parentName;\n    };\n    const isListBlock = elm => {\n      return isNonNullable(elm) && /^(OL|UL|LI)$/.test(elm.nodeName);\n    };\n    const isListItem = elm => {\n      return isNonNullable(elm) && /^(LI|DT|DD)$/.test(elm.nodeName);\n    };\n    const isNestedList = elm => {\n      return isListBlock(elm) && isListBlock(elm.parentNode);\n    };\n    const getContainerBlock = containerBlock => {\n      const containerBlockParent = containerBlock.parentNode;\n      return isListItem(containerBlockParent) ? containerBlockParent : containerBlock;\n    };\n    const isFirstOrLastLi = (containerBlock, parentBlock, first) => {\n      let node = containerBlock[first ? 'firstChild' : 'lastChild'];\n      while (node) {\n        if (isElement$6(node)) {\n          break;\n        }\n        node = node[first ? 'nextSibling' : 'previousSibling'];\n      }\n      return node === parentBlock;\n    };\n    const insert$3 = (editor, createNewBlock, containerBlock, parentBlock, newBlockName) => {\n      const dom = editor.dom;\n      const rng = editor.selection.getRng();\n      const containerParent = containerBlock.parentNode;\n      if (containerBlock === editor.getBody() || !containerParent) {\n        return;\n      }\n      if (isNestedList(containerBlock)) {\n        newBlockName = 'LI';\n      }\n      let newBlock = createNewBlock(newBlockName);\n      if (isFirstOrLastLi(containerBlock, parentBlock, true) && isFirstOrLastLi(containerBlock, parentBlock, false)) {\n        if (hasParent(containerBlock, 'LI')) {\n          const containerBlockParent = getContainerBlock(containerBlock);\n          dom.insertAfter(newBlock, containerBlockParent);\n          if (isFirstChild(containerBlock)) {\n            dom.remove(containerBlockParent);\n          } else {\n            dom.remove(containerBlock);\n          }\n        } else {\n          dom.replace(newBlock, containerBlock);\n        }\n      } else if (isFirstOrLastLi(containerBlock, parentBlock, true)) {\n        if (hasParent(containerBlock, 'LI')) {\n          dom.insertAfter(newBlock, getContainerBlock(containerBlock));\n          newBlock.appendChild(dom.doc.createTextNode(' '));\n          newBlock.appendChild(containerBlock);\n        } else {\n          containerParent.insertBefore(newBlock, containerBlock);\n        }\n        dom.remove(parentBlock);\n      } else if (isFirstOrLastLi(containerBlock, parentBlock, false)) {\n        dom.insertAfter(newBlock, getContainerBlock(containerBlock));\n        dom.remove(parentBlock);\n      } else {\n        containerBlock = getContainerBlock(containerBlock);\n        const tmpRng = rng.cloneRange();\n        tmpRng.setStartAfter(parentBlock);\n        tmpRng.setEndAfter(containerBlock);\n        const fragment = tmpRng.extractContents();\n        if (newBlockName === 'LI' && hasFirstChild(fragment, 'LI')) {\n          newBlock = fragment.firstChild;\n          dom.insertAfter(fragment, containerBlock);\n        } else {\n          dom.insertAfter(fragment, containerBlock);\n          dom.insertAfter(newBlock, containerBlock);\n        }\n        dom.remove(parentBlock);\n      }\n      moveToCaretPosition(editor, newBlock);\n    };\n\n    const trimZwsp = fragment => {\n      each$e(descendants$1(SugarElement.fromDom(fragment), isText$b), text => {\n        const rawNode = text.dom;\n        rawNode.nodeValue = trim$1(rawNode.data);\n      });\n    };\n    const isWithinNonEditableList = (editor, node) => {\n      const parentList = editor.dom.getParent(node, 'ol,ul,dl');\n      return parentList !== null && editor.dom.getContentEditableParent(parentList) === 'false';\n    };\n    const isEmptyAnchor = (dom, elm) => {\n      return elm && elm.nodeName === 'A' && dom.isEmpty(elm);\n    };\n    const emptyBlock = elm => {\n      elm.innerHTML = '<br data-mce-bogus=\"1\">';\n    };\n    const containerAndSiblingName = (container, nodeName) => {\n      return container.nodeName === nodeName || container.previousSibling && container.previousSibling.nodeName === nodeName;\n    };\n    const canSplitBlock = (dom, node) => {\n      return isNonNullable(node) && dom.isBlock(node) && !/^(TD|TH|CAPTION|FORM)$/.test(node.nodeName) && !/^(fixed|absolute)/i.test(node.style.position) && dom.getContentEditable(node) !== 'true';\n    };\n    const trimInlineElementsOnLeftSideOfBlock = (dom, nonEmptyElementsMap, block) => {\n      var _a;\n      const firstChilds = [];\n      if (!block) {\n        return;\n      }\n      let currentNode = block;\n      while (currentNode = currentNode.firstChild) {\n        if (dom.isBlock(currentNode)) {\n          return;\n        }\n        if (isElement$6(currentNode) && !nonEmptyElementsMap[currentNode.nodeName.toLowerCase()]) {\n          firstChilds.push(currentNode);\n        }\n      }\n      let i = firstChilds.length;\n      while (i--) {\n        currentNode = firstChilds[i];\n        if (!currentNode.hasChildNodes() || currentNode.firstChild === currentNode.lastChild && ((_a = currentNode.firstChild) === null || _a === void 0 ? void 0 : _a.nodeValue) === '') {\n          dom.remove(currentNode);\n        } else {\n          if (isEmptyAnchor(dom, currentNode)) {\n            dom.remove(currentNode);\n          }\n        }\n      }\n    };\n    const normalizeZwspOffset = (start, container, offset) => {\n      if (!isText$a(container)) {\n        return offset;\n      } else if (start) {\n        return offset === 1 && container.data.charAt(offset - 1) === ZWSP$1 ? 0 : offset;\n      } else {\n        return offset === container.data.length - 1 && container.data.charAt(offset) === ZWSP$1 ? container.data.length : offset;\n      }\n    };\n    const includeZwspInRange = rng => {\n      const newRng = rng.cloneRange();\n      newRng.setStart(rng.startContainer, normalizeZwspOffset(true, rng.startContainer, rng.startOffset));\n      newRng.setEnd(rng.endContainer, normalizeZwspOffset(false, rng.endContainer, rng.endOffset));\n      return newRng;\n    };\n    const trimLeadingLineBreaks = node => {\n      let currentNode = node;\n      do {\n        if (isText$a(currentNode)) {\n          currentNode.data = currentNode.data.replace(/^[\\r\\n]+/, '');\n        }\n        currentNode = currentNode.firstChild;\n      } while (currentNode);\n    };\n    const applyAttributes = (editor, node, forcedRootBlockAttrs) => {\n      const dom = editor.dom;\n      Optional.from(forcedRootBlockAttrs.style).map(dom.parseStyle).each(attrStyles => {\n        const currentStyles = getAllRaw(SugarElement.fromDom(node));\n        const newStyles = {\n          ...currentStyles,\n          ...attrStyles\n        };\n        dom.setStyles(node, newStyles);\n      });\n      const attrClassesOpt = Optional.from(forcedRootBlockAttrs.class).map(attrClasses => attrClasses.split(/\\s+/));\n      const currentClassesOpt = Optional.from(node.className).map(currentClasses => filter$5(currentClasses.split(/\\s+/), clazz => clazz !== ''));\n      lift2(attrClassesOpt, currentClassesOpt, (attrClasses, currentClasses) => {\n        const filteredClasses = filter$5(currentClasses, clazz => !contains$2(attrClasses, clazz));\n        const newClasses = [\n          ...attrClasses,\n          ...filteredClasses\n        ];\n        dom.setAttrib(node, 'class', newClasses.join(' '));\n      });\n      const appliedAttrs = [\n        'style',\n        'class'\n      ];\n      const remainingAttrs = filter$4(forcedRootBlockAttrs, (_, attrs) => !contains$2(appliedAttrs, attrs));\n      dom.setAttribs(node, remainingAttrs);\n    };\n    const setForcedBlockAttrs = (editor, node) => {\n      const forcedRootBlockName = getForcedRootBlock(editor);\n      if (forcedRootBlockName.toLowerCase() === node.tagName.toLowerCase()) {\n        const forcedRootBlockAttrs = getForcedRootBlockAttrs(editor);\n        applyAttributes(editor, node, forcedRootBlockAttrs);\n      }\n    };\n    const wrapSelfAndSiblingsInDefaultBlock = (editor, newBlockName, rng, container, offset) => {\n      var _a;\n      const dom = editor.dom;\n      const editableRoot = (_a = getEditableRoot(dom, container)) !== null && _a !== void 0 ? _a : dom.getRoot();\n      let parentBlock = dom.getParent(container, dom.isBlock);\n      if (!parentBlock || !canSplitBlock(dom, parentBlock)) {\n        parentBlock = parentBlock || editableRoot;\n        let rootBlockName;\n        if (parentBlock === editor.getBody() || isTableCellOrCaption(parentBlock)) {\n          rootBlockName = parentBlock.nodeName.toLowerCase();\n        } else if (parentBlock.parentNode) {\n          rootBlockName = parentBlock.parentNode.nodeName.toLowerCase();\n        } else {\n          rootBlockName = '';\n        }\n        if (!parentBlock.hasChildNodes()) {\n          const newBlock = dom.create(newBlockName);\n          setForcedBlockAttrs(editor, newBlock);\n          parentBlock.appendChild(newBlock);\n          rng.setStart(newBlock, 0);\n          rng.setEnd(newBlock, 0);\n          return newBlock;\n        }\n        let node = container;\n        while (node && node.parentNode !== parentBlock) {\n          node = node.parentNode;\n        }\n        let startNode;\n        while (node && !dom.isBlock(node)) {\n          startNode = node;\n          node = node.previousSibling;\n        }\n        if (startNode && editor.schema.isValidChild(rootBlockName, newBlockName.toLowerCase())) {\n          const startNodeParent = startNode.parentNode;\n          const newBlock = dom.create(newBlockName);\n          setForcedBlockAttrs(editor, newBlock);\n          startNodeParent.insertBefore(newBlock, startNode);\n          node = startNode;\n          while (node && !dom.isBlock(node)) {\n            const next = node.nextSibling;\n            newBlock.appendChild(node);\n            node = next;\n          }\n          rng.setStart(container, offset);\n          rng.setEnd(container, offset);\n        }\n      }\n      return container;\n    };\n    const addBrToBlockIfNeeded = (dom, block) => {\n      block.normalize();\n      const lastChild = block.lastChild;\n      if (!lastChild || isElement$6(lastChild) && /^(left|right)$/gi.test(dom.getStyle(lastChild, 'float', true))) {\n        dom.add(block, 'br');\n      }\n    };\n    const shouldEndContainer = (editor, container) => {\n      const optionValue = shouldEndContainerOnEmptyBlock(editor);\n      if (isNullable(container)) {\n        return false;\n      } else if (isString(optionValue)) {\n        return contains$2(Tools.explode(optionValue), container.nodeName.toLowerCase());\n      } else {\n        return optionValue;\n      }\n    };\n    const insert$2 = (editor, evt) => {\n      let container;\n      let offset;\n      let parentBlockName;\n      let containerBlock;\n      let isAfterLastNodeInContainer = false;\n      const dom = editor.dom;\n      const schema = editor.schema, nonEmptyElementsMap = schema.getNonEmptyElements();\n      const rng = editor.selection.getRng();\n      const newBlockName = getForcedRootBlock(editor);\n      const createNewBlock = name => {\n        let node = container;\n        const textInlineElements = schema.getTextInlineElements();\n        let block;\n        if (name || parentBlockName === 'TABLE' || parentBlockName === 'HR') {\n          block = dom.create(name || newBlockName);\n        } else {\n          block = parentBlock.cloneNode(false);\n        }\n        let caretNode = block;\n        if (shouldKeepStyles(editor) === false) {\n          dom.setAttrib(block, 'style', null);\n          dom.setAttrib(block, 'class', null);\n        } else {\n          do {\n            if (textInlineElements[node.nodeName]) {\n              if (isCaretNode(node) || isBookmarkNode$1(node)) {\n                continue;\n              }\n              const clonedNode = node.cloneNode(false);\n              dom.setAttrib(clonedNode, 'id', '');\n              if (block.hasChildNodes()) {\n                clonedNode.appendChild(block.firstChild);\n                block.appendChild(clonedNode);\n              } else {\n                caretNode = clonedNode;\n                block.appendChild(clonedNode);\n              }\n            }\n          } while ((node = node.parentNode) && node !== editableRoot);\n        }\n        setForcedBlockAttrs(editor, block);\n        emptyBlock(caretNode);\n        return block;\n      };\n      const isCaretAtStartOrEndOfBlock = start => {\n        const normalizedOffset = normalizeZwspOffset(start, container, offset);\n        if (isText$a(container) && (start ? normalizedOffset > 0 : normalizedOffset < container.data.length)) {\n          return false;\n        }\n        if (container.parentNode === parentBlock && isAfterLastNodeInContainer && !start) {\n          return true;\n        }\n        if (start && isElement$6(container) && container === parentBlock.firstChild) {\n          return true;\n        }\n        if (containerAndSiblingName(container, 'TABLE') || containerAndSiblingName(container, 'HR')) {\n          return isAfterLastNodeInContainer && !start || !isAfterLastNodeInContainer && start;\n        }\n        const walker = new DomTreeWalker(container, parentBlock);\n        if (isText$a(container)) {\n          if (start && normalizedOffset === 0) {\n            walker.prev();\n          } else if (!start && normalizedOffset === container.data.length) {\n            walker.next();\n          }\n        }\n        let node;\n        while (node = walker.current()) {\n          if (isElement$6(node)) {\n            if (!node.getAttribute('data-mce-bogus')) {\n              const name = node.nodeName.toLowerCase();\n              if (nonEmptyElementsMap[name] && name !== 'br') {\n                return false;\n              }\n            }\n          } else if (isText$a(node) && !isWhitespaceText(node.data)) {\n            return false;\n          }\n          if (start) {\n            walker.prev();\n          } else {\n            walker.next();\n          }\n        }\n        return true;\n      };\n      const insertNewBlockAfter = () => {\n        let block;\n        if (/^(H[1-6]|PRE|FIGURE)$/.test(parentBlockName) && containerBlockName !== 'HGROUP') {\n          block = createNewBlock(newBlockName);\n        } else {\n          block = createNewBlock();\n        }\n        if (shouldEndContainer(editor, containerBlock) && canSplitBlock(dom, containerBlock) && dom.isEmpty(parentBlock)) {\n          block = dom.split(containerBlock, parentBlock);\n        } else {\n          dom.insertAfter(block, parentBlock);\n        }\n        moveToCaretPosition(editor, block);\n        return block;\n      };\n      normalize$2(dom, rng).each(normRng => {\n        rng.setStart(normRng.startContainer, normRng.startOffset);\n        rng.setEnd(normRng.endContainer, normRng.endOffset);\n      });\n      container = rng.startContainer;\n      offset = rng.startOffset;\n      const shiftKey = !!(evt && evt.shiftKey);\n      const ctrlKey = !!(evt && evt.ctrlKey);\n      if (isElement$6(container) && container.hasChildNodes()) {\n        isAfterLastNodeInContainer = offset > container.childNodes.length - 1;\n        container = container.childNodes[Math.min(offset, container.childNodes.length - 1)] || container;\n        if (isAfterLastNodeInContainer && isText$a(container)) {\n          offset = container.data.length;\n        } else {\n          offset = 0;\n        }\n      }\n      const editableRoot = getEditableRoot(dom, container);\n      if (!editableRoot || isWithinNonEditableList(editor, container)) {\n        return;\n      }\n      if (!shiftKey) {\n        container = wrapSelfAndSiblingsInDefaultBlock(editor, newBlockName, rng, container, offset);\n      }\n      let parentBlock = dom.getParent(container, dom.isBlock) || dom.getRoot();\n      containerBlock = isNonNullable(parentBlock === null || parentBlock === void 0 ? void 0 : parentBlock.parentNode) ? dom.getParent(parentBlock.parentNode, dom.isBlock) : null;\n      parentBlockName = parentBlock ? parentBlock.nodeName.toUpperCase() : '';\n      const containerBlockName = containerBlock ? containerBlock.nodeName.toUpperCase() : '';\n      if (containerBlockName === 'LI' && !ctrlKey) {\n        const liBlock = containerBlock;\n        parentBlock = liBlock;\n        containerBlock = liBlock.parentNode;\n        parentBlockName = containerBlockName;\n      }\n      if (/^(LI|DT|DD)$/.test(parentBlockName) && isElement$6(containerBlock)) {\n        if (dom.isEmpty(parentBlock)) {\n          insert$3(editor, createNewBlock, containerBlock, parentBlock, newBlockName);\n          return;\n        }\n      }\n      if (parentBlock === editor.getBody()) {\n        return;\n      }\n      const parentBlockParent = parentBlock.parentNode;\n      let newBlock;\n      if (isCaretContainerBlock$1(parentBlock)) {\n        newBlock = showCaretContainerBlock(parentBlock);\n        if (dom.isEmpty(parentBlock)) {\n          emptyBlock(parentBlock);\n        }\n        setForcedBlockAttrs(editor, newBlock);\n        moveToCaretPosition(editor, newBlock);\n      } else if (isCaretAtStartOrEndOfBlock(false)) {\n        newBlock = insertNewBlockAfter();\n      } else if (isCaretAtStartOrEndOfBlock(true) && parentBlockParent) {\n        newBlock = parentBlockParent.insertBefore(createNewBlock(), parentBlock);\n        moveToCaretPosition(editor, containerAndSiblingName(parentBlock, 'HR') ? newBlock : parentBlock);\n      } else {\n        const tmpRng = includeZwspInRange(rng).cloneRange();\n        tmpRng.setEndAfter(parentBlock);\n        const fragment = tmpRng.extractContents();\n        trimZwsp(fragment);\n        trimLeadingLineBreaks(fragment);\n        newBlock = fragment.firstChild;\n        dom.insertAfter(fragment, parentBlock);\n        trimInlineElementsOnLeftSideOfBlock(dom, nonEmptyElementsMap, newBlock);\n        addBrToBlockIfNeeded(dom, parentBlock);\n        if (dom.isEmpty(parentBlock)) {\n          emptyBlock(parentBlock);\n        }\n        newBlock.normalize();\n        if (dom.isEmpty(newBlock)) {\n          dom.remove(newBlock);\n          insertNewBlockAfter();\n        } else {\n          setForcedBlockAttrs(editor, newBlock);\n          moveToCaretPosition(editor, newBlock);\n        }\n      }\n      dom.setAttrib(newBlock, 'id', '');\n      editor.dispatch('NewBlock', { newBlock });\n    };\n    const fakeEventName$1 = 'insertParagraph';\n    const blockbreak = {\n      insert: insert$2,\n      fakeEventName: fakeEventName$1\n    };\n\n    const hasRightSideContent = (schema, container, parentBlock) => {\n      const walker = new DomTreeWalker(container, parentBlock);\n      let node;\n      const nonEmptyElementsMap = schema.getNonEmptyElements();\n      while (node = walker.next()) {\n        if (nonEmptyElementsMap[node.nodeName.toLowerCase()] || isText$a(node) && node.length > 0) {\n          return true;\n        }\n      }\n      return false;\n    };\n    const moveSelectionToBr = (editor, brElm, extraBr) => {\n      const rng = editor.dom.createRng();\n      if (!extraBr) {\n        rng.setStartAfter(brElm);\n        rng.setEndAfter(brElm);\n      } else {\n        rng.setStartBefore(brElm);\n        rng.setEndBefore(brElm);\n      }\n      editor.selection.setRng(rng);\n      scrollRangeIntoView(editor, rng);\n    };\n    const insertBrAtCaret = (editor, evt) => {\n      const selection = editor.selection;\n      const dom = editor.dom;\n      const rng = selection.getRng();\n      let brElm;\n      let extraBr = false;\n      normalize$2(dom, rng).each(normRng => {\n        rng.setStart(normRng.startContainer, normRng.startOffset);\n        rng.setEnd(normRng.endContainer, normRng.endOffset);\n      });\n      let offset = rng.startOffset;\n      let container = rng.startContainer;\n      if (isElement$6(container) && container.hasChildNodes()) {\n        const isAfterLastNodeInContainer = offset > container.childNodes.length - 1;\n        container = container.childNodes[Math.min(offset, container.childNodes.length - 1)] || container;\n        if (isAfterLastNodeInContainer && isText$a(container)) {\n          offset = container.data.length;\n        } else {\n          offset = 0;\n        }\n      }\n      let parentBlock = dom.getParent(container, dom.isBlock);\n      const containerBlock = parentBlock && parentBlock.parentNode ? dom.getParent(parentBlock.parentNode, dom.isBlock) : null;\n      const containerBlockName = containerBlock ? containerBlock.nodeName.toUpperCase() : '';\n      const isControlKey = !!(evt && evt.ctrlKey);\n      if (containerBlockName === 'LI' && !isControlKey) {\n        parentBlock = containerBlock;\n      }\n      if (isText$a(container) && offset >= container.data.length) {\n        if (!hasRightSideContent(editor.schema, container, parentBlock || dom.getRoot())) {\n          brElm = dom.create('br');\n          rng.insertNode(brElm);\n          rng.setStartAfter(brElm);\n          rng.setEndAfter(brElm);\n          extraBr = true;\n        }\n      }\n      brElm = dom.create('br');\n      rangeInsertNode(dom, rng, brElm);\n      moveSelectionToBr(editor, brElm, extraBr);\n      editor.undoManager.add();\n    };\n    const insertBrBefore = (editor, inline) => {\n      const br = SugarElement.fromTag('br');\n      before$3(SugarElement.fromDom(inline), br);\n      editor.undoManager.add();\n    };\n    const insertBrAfter = (editor, inline) => {\n      if (!hasBrAfter(editor.getBody(), inline)) {\n        after$4(SugarElement.fromDom(inline), SugarElement.fromTag('br'));\n      }\n      const br = SugarElement.fromTag('br');\n      after$4(SugarElement.fromDom(inline), br);\n      moveSelectionToBr(editor, br.dom, false);\n      editor.undoManager.add();\n    };\n    const isBeforeBr = pos => {\n      return isBr$6(pos.getNode());\n    };\n    const hasBrAfter = (rootNode, startNode) => {\n      if (isBeforeBr(CaretPosition.after(startNode))) {\n        return true;\n      } else {\n        return nextPosition(rootNode, CaretPosition.after(startNode)).map(pos => {\n          return isBr$6(pos.getNode());\n        }).getOr(false);\n      }\n    };\n    const isAnchorLink = elm => {\n      return elm && elm.nodeName === 'A' && 'href' in elm;\n    };\n    const isInsideAnchor = location => {\n      return location.fold(never, isAnchorLink, isAnchorLink, never);\n    };\n    const readInlineAnchorLocation = editor => {\n      const isInlineTarget$1 = curry(isInlineTarget, editor);\n      const position = CaretPosition.fromRangeStart(editor.selection.getRng());\n      return readLocation(isInlineTarget$1, editor.getBody(), position).filter(isInsideAnchor);\n    };\n    const insertBrOutsideAnchor = (editor, location) => {\n      location.fold(noop, curry(insertBrBefore, editor), curry(insertBrAfter, editor), noop);\n    };\n    const insert$1 = (editor, evt) => {\n      const anchorLocation = readInlineAnchorLocation(editor);\n      if (anchorLocation.isSome()) {\n        anchorLocation.each(curry(insertBrOutsideAnchor, editor));\n      } else {\n        insertBrAtCaret(editor, evt);\n      }\n    };\n    const fakeEventName = 'insertLineBreak';\n    const linebreak = {\n      insert: insert$1,\n      fakeEventName\n    };\n\n    const matchesSelector = (editor, selector) => {\n      return getParentBlock$1(editor).filter(parentBlock => {\n        return selector.length > 0 && is$1(SugarElement.fromDom(parentBlock), selector);\n      }).isSome();\n    };\n    const shouldInsertBr = editor => {\n      return matchesSelector(editor, getBrNewLineSelector(editor));\n    };\n    const shouldBlockNewLine$1 = editor => {\n      return matchesSelector(editor, getNoNewLineSelector(editor));\n    };\n\n    const newLineAction = Adt.generate([\n      { br: [] },\n      { block: [] },\n      { none: [] }\n    ]);\n    const shouldBlockNewLine = (editor, _shiftKey) => {\n      return shouldBlockNewLine$1(editor);\n    };\n    const inListBlock = requiredState => {\n      return (editor, _shiftKey) => {\n        return isListItemParentBlock(editor) === requiredState;\n      };\n    };\n    const inBlock = (blockName, requiredState) => (editor, _shiftKey) => {\n      const state = getParentBlockName(editor) === blockName.toUpperCase();\n      return state === requiredState;\n    };\n    const inCefBlock = editor => {\n      const editableRoot = getEditableRoot(editor.dom, editor.selection.getStart());\n      return isNullable(editableRoot);\n    };\n    const inPreBlock = requiredState => inBlock('pre', requiredState);\n    const inSummaryBlock = () => inBlock('summary', true);\n    const shouldPutBrInPre = requiredState => {\n      return (editor, _shiftKey) => {\n        return shouldPutBrInPre$1(editor) === requiredState;\n      };\n    };\n    const inBrContext = (editor, _shiftKey) => {\n      return shouldInsertBr(editor);\n    };\n    const hasShiftKey = (_editor, shiftKey) => {\n      return shiftKey;\n    };\n    const canInsertIntoEditableRoot = editor => {\n      const forcedRootBlock = getForcedRootBlock(editor);\n      const rootEditable = getEditableRoot(editor.dom, editor.selection.getStart());\n      return isNonNullable(rootEditable) && editor.schema.isValidChild(rootEditable.nodeName, forcedRootBlock);\n    };\n    const match = (predicates, action) => {\n      return (editor, shiftKey) => {\n        const isMatch = foldl(predicates, (res, p) => {\n          return res && p(editor, shiftKey);\n        }, true);\n        return isMatch ? Optional.some(action) : Optional.none();\n      };\n    };\n    const getAction = (editor, evt) => {\n      return evaluateUntil([\n        match([shouldBlockNewLine], newLineAction.none()),\n        match([\n          inPreBlock(true),\n          inCefBlock\n        ], newLineAction.none()),\n        match([inSummaryBlock()], newLineAction.br()),\n        match([\n          inPreBlock(true),\n          shouldPutBrInPre(false),\n          hasShiftKey\n        ], newLineAction.br()),\n        match([\n          inPreBlock(true),\n          shouldPutBrInPre(false)\n        ], newLineAction.block()),\n        match([\n          inPreBlock(true),\n          shouldPutBrInPre(true),\n          hasShiftKey\n        ], newLineAction.block()),\n        match([\n          inPreBlock(true),\n          shouldPutBrInPre(true)\n        ], newLineAction.br()),\n        match([\n          inListBlock(true),\n          hasShiftKey\n        ], newLineAction.br()),\n        match([inListBlock(true)], newLineAction.block()),\n        match([inBrContext], newLineAction.br()),\n        match([hasShiftKey], newLineAction.br()),\n        match([canInsertIntoEditableRoot], newLineAction.block())\n      ], [\n        editor,\n        !!(evt && evt.shiftKey)\n      ]).getOr(newLineAction.none());\n    };\n\n    const insertBreak = (breakType, editor, evt) => {\n      if (!editor.selection.isCollapsed()) {\n        execEditorDeleteCommand(editor);\n      }\n      if (isNonNullable(evt)) {\n        const event = fireFakeBeforeInputEvent(editor, breakType.fakeEventName);\n        if (event.isDefaultPrevented()) {\n          return;\n        }\n      }\n      breakType.insert(editor, evt);\n      if (isNonNullable(evt)) {\n        fireFakeInputEvent(editor, breakType.fakeEventName);\n      }\n    };\n    const insert = (editor, evt) => {\n      const br = () => insertBreak(linebreak, editor, evt);\n      const block = () => insertBreak(blockbreak, editor, evt);\n      const logicalAction = getAction(editor, evt);\n      switch (getNewlineBehavior(editor)) {\n      case 'linebreak':\n        logicalAction.fold(br, br, noop);\n        break;\n      case 'block':\n        logicalAction.fold(block, block, noop);\n        break;\n      case 'invert':\n        logicalAction.fold(block, br, noop);\n        break;\n      default:\n        logicalAction.fold(br, block, noop);\n        break;\n      }\n    };\n\n    const handleEnterKeyEvent = (editor, event) => {\n      if (event.isDefaultPrevented()) {\n        return;\n      }\n      event.preventDefault();\n      endTypingLevelIgnoreLocks(editor.undoManager);\n      editor.undoManager.transact(() => {\n        insert(editor, event);\n      });\n    };\n    const setup$h = editor => {\n      editor.on('keydown', event => {\n        if (event.keyCode === VK.ENTER) {\n          handleEnterKeyEvent(editor, event);\n        }\n      });\n    };\n\n    const executeKeydownOverride$2 = (editor, caret, evt) => {\n      const isMac = Env.os.isMacOS() || Env.os.isiOS();\n      execute([\n        {\n          keyCode: VK.END,\n          action: action(moveToLineEndPoint$1, editor, true)\n        },\n        {\n          keyCode: VK.HOME,\n          action: action(moveToLineEndPoint$1, editor, false)\n        },\n        ...!isMac ? [\n          {\n            keyCode: VK.HOME,\n            action: action(selectToEndPoint, editor, false),\n            ctrlKey: true,\n            shiftKey: true\n          },\n          {\n            keyCode: VK.END,\n            action: action(selectToEndPoint, editor, true),\n            ctrlKey: true,\n            shiftKey: true\n          }\n        ] : [],\n        {\n          keyCode: VK.END,\n          action: action(moveToLineEndPoint, editor, true)\n        },\n        {\n          keyCode: VK.HOME,\n          action: action(moveToLineEndPoint, editor, false)\n        },\n        {\n          keyCode: VK.END,\n          action: action(moveToLineEndPoint$2, editor, true, caret)\n        },\n        {\n          keyCode: VK.HOME,\n          action: action(moveToLineEndPoint$2, editor, false, caret)\n        }\n      ], evt).each(_ => {\n        evt.preventDefault();\n      });\n    };\n    const setup$g = (editor, caret) => {\n      editor.on('keydown', evt => {\n        if (!evt.isDefaultPrevented()) {\n          executeKeydownOverride$2(editor, caret, evt);\n        }\n      });\n    };\n\n    const setup$f = editor => {\n      editor.on('input', e => {\n        if (!e.isComposing) {\n          normalizeNbspsInEditor(editor);\n        }\n      });\n    };\n\n    const platform = detect$2();\n    const executeKeyupAction = (editor, caret, evt) => {\n      execute([\n        {\n          keyCode: VK.PAGE_UP,\n          action: action(moveToLineEndPoint$2, editor, false, caret)\n        },\n        {\n          keyCode: VK.PAGE_DOWN,\n          action: action(moveToLineEndPoint$2, editor, true, caret)\n        }\n      ], evt);\n    };\n    const stopImmediatePropagation = e => e.stopImmediatePropagation();\n    const isPageUpDown = evt => evt.keyCode === VK.PAGE_UP || evt.keyCode === VK.PAGE_DOWN;\n    const setNodeChangeBlocker = (blocked, editor, block) => {\n      if (block && !blocked.get()) {\n        editor.on('NodeChange', stopImmediatePropagation, true);\n      } else if (!block && blocked.get()) {\n        editor.off('NodeChange', stopImmediatePropagation);\n      }\n      blocked.set(block);\n    };\n    const setup$e = (editor, caret) => {\n      if (platform.os.isMacOS()) {\n        return;\n      }\n      const blocked = Cell(false);\n      editor.on('keydown', evt => {\n        if (isPageUpDown(evt)) {\n          setNodeChangeBlocker(blocked, editor, true);\n        }\n      });\n      editor.on('keyup', evt => {\n        if (!evt.isDefaultPrevented()) {\n          executeKeyupAction(editor, caret, evt);\n        }\n        if (isPageUpDown(evt) && blocked.get()) {\n          setNodeChangeBlocker(blocked, editor, false);\n          editor.nodeChanged();\n        }\n      });\n    };\n\n    const insertTextAtPosition = (text, pos) => {\n      const container = pos.container();\n      const offset = pos.offset();\n      if (isText$a(container)) {\n        container.insertData(offset, text);\n        return Optional.some(CaretPosition(container, offset + text.length));\n      } else {\n        return getElementFromPosition(pos).map(elm => {\n          const textNode = SugarElement.fromText(text);\n          if (pos.isAtEnd()) {\n            after$4(elm, textNode);\n          } else {\n            before$3(elm, textNode);\n          }\n          return CaretPosition(textNode.dom, text.length);\n        });\n      }\n    };\n    const insertNbspAtPosition = curry(insertTextAtPosition, nbsp);\n    const insertSpaceAtPosition = curry(insertTextAtPosition, ' ');\n\n    const locationToCaretPosition = root => location => location.fold(element => prevPosition(root.dom, CaretPosition.before(element)), element => firstPositionIn(element), element => lastPositionIn(element), element => nextPosition(root.dom, CaretPosition.after(element)));\n    const insertInlineBoundarySpaceOrNbsp = (root, pos) => checkPos => needsToHaveNbsp(root, checkPos) ? insertNbspAtPosition(pos) : insertSpaceAtPosition(pos);\n    const setSelection = editor => pos => {\n      editor.selection.setRng(pos.toRange());\n      editor.nodeChanged();\n      return true;\n    };\n    const insertSpaceOrNbspAtSelection = editor => {\n      const pos = CaretPosition.fromRangeStart(editor.selection.getRng());\n      const root = SugarElement.fromDom(editor.getBody());\n      if (editor.selection.isCollapsed()) {\n        const isInlineTarget$1 = curry(isInlineTarget, editor);\n        const caretPosition = CaretPosition.fromRangeStart(editor.selection.getRng());\n        return readLocation(isInlineTarget$1, editor.getBody(), caretPosition).bind(locationToCaretPosition(root)).map(checkPos => () => insertInlineBoundarySpaceOrNbsp(root, pos)(checkPos).each(setSelection(editor)));\n      } else {\n        return Optional.none();\n      }\n    };\n\n    const executeKeydownOverride$1 = (editor, evt) => {\n      executeWithDelayedAction([{\n          keyCode: VK.SPACEBAR,\n          action: action(insertSpaceOrNbspAtSelection, editor)\n        }], evt).each(applyAction => {\n        evt.preventDefault();\n        const event = fireFakeBeforeInputEvent(editor, 'insertText', { data: ' ' });\n        if (!event.isDefaultPrevented()) {\n          applyAction();\n          fireFakeInputEvent(editor, 'insertText', { data: ' ' });\n        }\n      });\n    };\n    const setup$d = editor => {\n      editor.on('keydown', evt => {\n        if (!evt.isDefaultPrevented()) {\n          executeKeydownOverride$1(editor, evt);\n        }\n      });\n    };\n\n    const tableTabNavigation = editor => {\n      if (hasTableTabNavigation(editor)) {\n        return [\n          {\n            keyCode: VK.TAB,\n            action: action(handleTab, editor, true)\n          },\n          {\n            keyCode: VK.TAB,\n            shiftKey: true,\n            action: action(handleTab, editor, false)\n          }\n        ];\n      } else {\n        return [];\n      }\n    };\n    const executeKeydownOverride = (editor, evt) => {\n      execute([...tableTabNavigation(editor)], evt).each(_ => {\n        evt.preventDefault();\n      });\n    };\n    const setup$c = editor => {\n      editor.on('keydown', evt => {\n        if (!evt.isDefaultPrevented()) {\n          executeKeydownOverride(editor, evt);\n        }\n      });\n    };\n\n    const setup$b = editor => {\n      editor.addShortcut('Meta+P', '', 'mcePrint');\n      setup$j(editor);\n      if (isRtc(editor)) {\n        return Cell(null);\n      } else {\n        const caret = setupSelectedState(editor);\n        setup$l(editor);\n        setup$k(editor, caret);\n        setup$i(editor, caret);\n        setup$h(editor);\n        setup$d(editor);\n        setup$f(editor);\n        setup$c(editor);\n        setup$g(editor, caret);\n        setup$e(editor, caret);\n        return caret;\n      }\n    };\n\n    class NodeChange {\n      constructor(editor) {\n        this.lastPath = [];\n        this.editor = editor;\n        let lastRng;\n        const self = this;\n        if (!('onselectionchange' in editor.getDoc())) {\n          editor.on('NodeChange click mouseup keyup focus', e => {\n            const nativeRng = editor.selection.getRng();\n            const fakeRng = {\n              startContainer: nativeRng.startContainer,\n              startOffset: nativeRng.startOffset,\n              endContainer: nativeRng.endContainer,\n              endOffset: nativeRng.endOffset\n            };\n            if (e.type === 'nodechange' || !isEq$4(fakeRng, lastRng)) {\n              editor.dispatch('SelectionChange');\n            }\n            lastRng = fakeRng;\n          });\n        }\n        editor.on('contextmenu', () => {\n          editor.dispatch('SelectionChange');\n        });\n        editor.on('SelectionChange', () => {\n          const startElm = editor.selection.getStart(true);\n          if (!startElm) {\n            return;\n          }\n          if (hasAnyRanges(editor) && !self.isSameElementPath(startElm) && editor.dom.isChildOf(startElm, editor.getBody())) {\n            editor.nodeChanged({ selectionChange: true });\n          }\n        });\n        editor.on('mouseup', e => {\n          if (!e.isDefaultPrevented() && hasAnyRanges(editor)) {\n            if (editor.selection.getNode().nodeName === 'IMG') {\n              Delay.setEditorTimeout(editor, () => {\n                editor.nodeChanged();\n              });\n            } else {\n              editor.nodeChanged();\n            }\n          }\n        });\n      }\n      nodeChanged(args = {}) {\n        const selection = this.editor.selection;\n        let node;\n        if (this.editor.initialized && selection && !shouldDisableNodeChange(this.editor) && !this.editor.mode.isReadOnly()) {\n          const root = this.editor.getBody();\n          node = selection.getStart(true) || root;\n          if (node.ownerDocument !== this.editor.getDoc() || !this.editor.dom.isChildOf(node, root)) {\n            node = root;\n          }\n          const parents = [];\n          this.editor.dom.getParent(node, node => {\n            if (node === root) {\n              return true;\n            } else {\n              parents.push(node);\n              return false;\n            }\n          });\n          this.editor.dispatch('NodeChange', {\n            ...args,\n            element: node,\n            parents\n          });\n        }\n      }\n      isSameElementPath(startElm) {\n        let i;\n        const editor = this.editor;\n        const currentPath = reverse(editor.dom.getParents(startElm, always, editor.getBody()));\n        if (currentPath.length === this.lastPath.length) {\n          for (i = currentPath.length; i >= 0; i--) {\n            if (currentPath[i] !== this.lastPath[i]) {\n              break;\n            }\n          }\n          if (i === -1) {\n            this.lastPath = currentPath;\n            return true;\n          }\n        }\n        this.lastPath = currentPath;\n        return false;\n      }\n    }\n\n    const internalMimeType = 'x-tinymce/html';\n    const internalHtmlMime = constant(internalMimeType);\n    const internalMark = '<!-- ' + internalMimeType + ' -->';\n    const mark = html => internalMark + html;\n    const unmark = html => html.replace(internalMark, '');\n    const isMarked = html => html.indexOf(internalMark) !== -1;\n\n    const isPlainText = text => {\n      return !/<(?:\\/?(?!(?:div|p|br|span)>)\\w+|(?:(?!(?:span style=\"white-space:\\s?pre;?\">)|br\\s?\\/>))\\w+\\s[^>]+)>/i.test(text);\n    };\n    const openContainer = (rootTag, rootAttrs) => {\n      let tag = '<' + rootTag;\n      const attrs = mapToArray(rootAttrs, (value, key) => key + '=\"' + Entities.encodeAllRaw(value) + '\"');\n      if (attrs.length) {\n        tag += ' ' + attrs.join(' ');\n      }\n      return tag + '>';\n    };\n    const toBlockElements = (text, rootTag, rootAttrs) => {\n      const blocks = text.split(/\\n\\n/);\n      const tagOpen = openContainer(rootTag, rootAttrs);\n      const tagClose = '</' + rootTag + '>';\n      const paragraphs = map$3(blocks, p => {\n        return p.split(/\\n/).join('<br />');\n      });\n      const stitch = p => {\n        return tagOpen + p + tagClose;\n      };\n      return paragraphs.length === 1 ? paragraphs[0] : map$3(paragraphs, stitch).join('');\n    };\n\n    const pasteBinDefaultContent = '%MCEPASTEBIN%';\n    const create$6 = (editor, lastRngCell) => {\n      const {dom, selection} = editor;\n      const body = editor.getBody();\n      lastRngCell.set(selection.getRng());\n      const pasteBinElm = dom.add(editor.getBody(), 'div', {\n        'id': 'mcepastebin',\n        'class': 'mce-pastebin',\n        'contentEditable': true,\n        'data-mce-bogus': 'all',\n        'style': 'position: fixed; top: 50%; width: 10px; height: 10px; overflow: hidden; opacity: 0'\n      }, pasteBinDefaultContent);\n      if (Env.browser.isFirefox()) {\n        dom.setStyle(pasteBinElm, 'left', dom.getStyle(body, 'direction', true) === 'rtl' ? 65535 : -65535);\n      }\n      dom.bind(pasteBinElm, 'beforedeactivate focusin focusout', e => {\n        e.stopPropagation();\n      });\n      pasteBinElm.focus();\n      selection.select(pasteBinElm, true);\n    };\n    const remove = (editor, lastRngCell) => {\n      const dom = editor.dom;\n      if (getEl(editor)) {\n        let pasteBinClone;\n        const lastRng = lastRngCell.get();\n        while (pasteBinClone = getEl(editor)) {\n          dom.remove(pasteBinClone);\n          dom.unbind(pasteBinClone);\n        }\n        if (lastRng) {\n          editor.selection.setRng(lastRng);\n        }\n      }\n      lastRngCell.set(null);\n    };\n    const getEl = editor => editor.dom.get('mcepastebin');\n    const isPasteBin = elm => isNonNullable(elm) && elm.id === 'mcepastebin';\n    const getHtml = editor => {\n      const dom = editor.dom;\n      const copyAndRemove = (toElm, fromElm) => {\n        toElm.appendChild(fromElm);\n        dom.remove(fromElm, true);\n      };\n      const [pasteBinElm, ...pasteBinClones] = filter$5(editor.getBody().childNodes, isPasteBin);\n      each$e(pasteBinClones, pasteBinClone => {\n        copyAndRemove(pasteBinElm, pasteBinClone);\n      });\n      const dirtyWrappers = dom.select('div[id=mcepastebin]', pasteBinElm);\n      for (let i = dirtyWrappers.length - 1; i >= 0; i--) {\n        const cleanWrapper = dom.create('div');\n        pasteBinElm.insertBefore(cleanWrapper, dirtyWrappers[i]);\n        copyAndRemove(cleanWrapper, dirtyWrappers[i]);\n      }\n      return pasteBinElm ? pasteBinElm.innerHTML : '';\n    };\n    const isDefaultPasteBinContent = content => content === pasteBinDefaultContent;\n    const PasteBin = editor => {\n      const lastRng = Cell(null);\n      return {\n        create: () => create$6(editor, lastRng),\n        remove: () => remove(editor, lastRng),\n        getEl: () => getEl(editor),\n        getHtml: () => getHtml(editor),\n        getLastRng: lastRng.get\n      };\n    };\n\n    const filter = (content, items) => {\n      Tools.each(items, v => {\n        if (is$4(v, RegExp)) {\n          content = content.replace(v, '');\n        } else {\n          content = content.replace(v[0], v[1]);\n        }\n      });\n      return content;\n    };\n    const innerText = html => {\n      const schema = Schema();\n      const domParser = DomParser({}, schema);\n      let text = '';\n      const voidElements = schema.getVoidElements();\n      const ignoreElements = Tools.makeMap('script noscript style textarea video audio iframe object', ' ');\n      const blockElements = schema.getBlockElements();\n      const walk = node => {\n        const name = node.name, currentNode = node;\n        if (name === 'br') {\n          text += '\\n';\n          return;\n        }\n        if (name === 'wbr') {\n          return;\n        }\n        if (voidElements[name]) {\n          text += ' ';\n        }\n        if (ignoreElements[name]) {\n          text += ' ';\n          return;\n        }\n        if (node.type === 3) {\n          text += node.value;\n        }\n        if (!(node.name in schema.getVoidElements())) {\n          let currentNode = node.firstChild;\n          if (currentNode) {\n            do {\n              walk(currentNode);\n            } while (currentNode = currentNode.next);\n          }\n        }\n        if (blockElements[name] && currentNode.next) {\n          text += '\\n';\n          if (name === 'p') {\n            text += '\\n';\n          }\n        }\n      };\n      html = filter(html, [/<!\\[[^\\]]+\\]>/g]);\n      walk(domParser.parse(html));\n      return text;\n    };\n    const trimHtml = html => {\n      const trimSpaces = (all, s1, s2) => {\n        if (!s1 && !s2) {\n          return ' ';\n        }\n        return nbsp;\n      };\n      html = filter(html, [\n        /^[\\s\\S]*<body[^>]*>\\s*|\\s*<\\/body[^>]*>[\\s\\S]*$/ig,\n        /<!--StartFragment-->|<!--EndFragment-->/g,\n        [\n          /( ?)<span class=\"Apple-converted-space\">\\u00a0<\\/span>( ?)/g,\n          trimSpaces\n        ],\n        /<br class=\"Apple-interchange-newline\">/g,\n        /<br>$/i\n      ]);\n      return html;\n    };\n    const createIdGenerator = prefix => {\n      let count = 0;\n      return () => {\n        return prefix + count++;\n      };\n    };\n    const getImageMimeType = ext => {\n      const lowerExt = ext.toLowerCase();\n      const mimeOverrides = {\n        jpg: 'jpeg',\n        jpe: 'jpeg',\n        jfi: 'jpeg',\n        jif: 'jpeg',\n        jfif: 'jpeg',\n        pjpeg: 'jpeg',\n        pjp: 'jpeg',\n        svg: 'svg+xml'\n      };\n      return Tools.hasOwn(mimeOverrides, lowerExt) ? 'image/' + mimeOverrides[lowerExt] : 'image/' + lowerExt;\n    };\n\n    const preProcess = (editor, html) => {\n      const parser = DomParser({}, editor.schema);\n      parser.addNodeFilter('meta', nodes => {\n        Tools.each(nodes, node => {\n          node.remove();\n        });\n      });\n      const fragment = parser.parse(html, {\n        forced_root_block: false,\n        isRootContent: true\n      });\n      return HtmlSerializer({ validate: true }, editor.schema).serialize(fragment);\n    };\n    const processResult = (content, cancelled) => ({\n      content,\n      cancelled\n    });\n    const postProcessFilter = (editor, html, internal) => {\n      const tempBody = editor.dom.create('div', { style: 'display:none' }, html);\n      const postProcessArgs = firePastePostProcess(editor, tempBody, internal);\n      return processResult(postProcessArgs.node.innerHTML, postProcessArgs.isDefaultPrevented());\n    };\n    const filterContent = (editor, content, internal) => {\n      const preProcessArgs = firePastePreProcess(editor, content, internal);\n      const filteredContent = preProcess(editor, preProcessArgs.content);\n      if (editor.hasEventListeners('PastePostProcess') && !preProcessArgs.isDefaultPrevented()) {\n        return postProcessFilter(editor, filteredContent, internal);\n      } else {\n        return processResult(filteredContent, preProcessArgs.isDefaultPrevented());\n      }\n    };\n    const process = (editor, html, internal) => {\n      return filterContent(editor, html, internal);\n    };\n\n    const pasteHtml$1 = (editor, html) => {\n      editor.insertContent(html, {\n        merge: shouldPasteMergeFormats(editor),\n        paste: true\n      });\n      return true;\n    };\n    const isAbsoluteUrl = url => /^https?:\\/\\/[\\w\\-\\/+=.,!;:&%@^~(){}?#]+$/i.test(url);\n    const isImageUrl = (editor, url) => {\n      return isAbsoluteUrl(url) && exists(getAllowedImageFileTypes(editor), type => endsWith(url.toLowerCase(), `.${ type.toLowerCase() }`));\n    };\n    const createImage = (editor, url, pasteHtmlFn) => {\n      editor.undoManager.extra(() => {\n        pasteHtmlFn(editor, url);\n      }, () => {\n        editor.insertContent('<img src=\"' + url + '\">');\n      });\n      return true;\n    };\n    const createLink = (editor, url, pasteHtmlFn) => {\n      editor.undoManager.extra(() => {\n        pasteHtmlFn(editor, url);\n      }, () => {\n        editor.execCommand('mceInsertLink', false, url);\n      });\n      return true;\n    };\n    const linkSelection = (editor, html, pasteHtmlFn) => !editor.selection.isCollapsed() && isAbsoluteUrl(html) ? createLink(editor, html, pasteHtmlFn) : false;\n    const insertImage = (editor, html, pasteHtmlFn) => isImageUrl(editor, html) ? createImage(editor, html, pasteHtmlFn) : false;\n    const smartInsertContent = (editor, html) => {\n      Tools.each([\n        linkSelection,\n        insertImage,\n        pasteHtml$1\n      ], action => {\n        return !action(editor, html, pasteHtml$1);\n      });\n    };\n    const insertContent = (editor, html, pasteAsText) => {\n      if (pasteAsText || !isSmartPasteEnabled(editor)) {\n        pasteHtml$1(editor, html);\n      } else {\n        smartInsertContent(editor, html);\n      }\n    };\n\n    const uniqueId = createIdGenerator('mceclip');\n    const doPaste = (editor, content, internal, pasteAsText) => {\n      const args = process(editor, content, internal);\n      if (!args.cancelled) {\n        insertContent(editor, args.content, pasteAsText);\n      }\n    };\n    const pasteHtml = (editor, html, internalFlag) => {\n      const internal = internalFlag ? internalFlag : isMarked(html);\n      doPaste(editor, unmark(html), internal, false);\n    };\n    const pasteText = (editor, text) => {\n      const encodedText = editor.dom.encode(text).replace(/\\r\\n/g, '\\n');\n      const normalizedText = normalize$4(encodedText, getPasteTabSpaces(editor));\n      const html = toBlockElements(normalizedText, getForcedRootBlock(editor), getForcedRootBlockAttrs(editor));\n      doPaste(editor, html, false, true);\n    };\n    const getDataTransferItems = dataTransfer => {\n      const items = {};\n      if (dataTransfer && dataTransfer.types) {\n        for (let i = 0; i < dataTransfer.types.length; i++) {\n          const contentType = dataTransfer.types[i];\n          try {\n            items[contentType] = dataTransfer.getData(contentType);\n          } catch (ex) {\n            items[contentType] = '';\n          }\n        }\n      }\n      return items;\n    };\n    const hasContentType = (clipboardContent, mimeType) => mimeType in clipboardContent && clipboardContent[mimeType].length > 0;\n    const hasHtmlOrText = content => hasContentType(content, 'text/html') || hasContentType(content, 'text/plain');\n    const extractFilename = (editor, str) => {\n      const m = str.match(/([\\s\\S]+?)(?:\\.[a-z0-9.]+)$/i);\n      return isNonNullable(m) ? editor.dom.encode(m[1]) : undefined;\n    };\n    const createBlobInfo = (editor, blobCache, file, base64) => {\n      const id = uniqueId();\n      const useFileName = shouldReuseFileName(editor) && isNonNullable(file.name);\n      const name = useFileName ? extractFilename(editor, file.name) : id;\n      const filename = useFileName ? file.name : undefined;\n      const blobInfo = blobCache.create(id, file, base64, name, filename);\n      blobCache.add(blobInfo);\n      return blobInfo;\n    };\n    const pasteImage = (editor, imageItem) => {\n      parseDataUri(imageItem.uri).each(({data, type, base64Encoded}) => {\n        const base64 = base64Encoded ? data : btoa(data);\n        const file = imageItem.file;\n        const blobCache = editor.editorUpload.blobCache;\n        const existingBlobInfo = blobCache.getByData(base64, type);\n        const blobInfo = existingBlobInfo !== null && existingBlobInfo !== void 0 ? existingBlobInfo : createBlobInfo(editor, blobCache, file, base64);\n        pasteHtml(editor, `<img src=\"${ blobInfo.blobUri() }\">`, false);\n      });\n    };\n    const isClipboardEvent = event => event.type === 'paste';\n    const readFilesAsDataUris = items => Promise.all(map$3(items, file => {\n      return blobToDataUri(file).then(uri => ({\n        file,\n        uri\n      }));\n    }));\n    const isImage = editor => {\n      const allowedExtensions = getAllowedImageFileTypes(editor);\n      return file => startsWith(file.type, 'image/') && exists(allowedExtensions, extension => {\n        return getImageMimeType(extension) === file.type;\n      });\n    };\n    const getImagesFromDataTransfer = (editor, dataTransfer) => {\n      const items = dataTransfer.items ? bind$3(from(dataTransfer.items), item => {\n        return item.kind === 'file' ? [item.getAsFile()] : [];\n      }) : [];\n      const files = dataTransfer.files ? from(dataTransfer.files) : [];\n      return filter$5(items.length > 0 ? items : files, isImage(editor));\n    };\n    const pasteImageData = (editor, e, rng) => {\n      const dataTransfer = isClipboardEvent(e) ? e.clipboardData : e.dataTransfer;\n      if (shouldPasteDataImages(editor) && dataTransfer) {\n        const images = getImagesFromDataTransfer(editor, dataTransfer);\n        if (images.length > 0) {\n          e.preventDefault();\n          readFilesAsDataUris(images).then(fileResults => {\n            if (rng) {\n              editor.selection.setRng(rng);\n            }\n            each$e(fileResults, result => {\n              pasteImage(editor, result);\n            });\n          });\n          return true;\n        }\n      }\n      return false;\n    };\n    const isBrokenAndroidClipboardEvent = e => {\n      var _a, _b;\n      return Env.os.isAndroid() && ((_b = (_a = e.clipboardData) === null || _a === void 0 ? void 0 : _a.items) === null || _b === void 0 ? void 0 : _b.length) === 0;\n    };\n    const isKeyboardPasteEvent = e => VK.metaKeyPressed(e) && e.keyCode === 86 || e.shiftKey && e.keyCode === 45;\n    const insertClipboardContent = (editor, clipboardContent, html, plainTextMode) => {\n      let content = trimHtml(html);\n      const isInternal = hasContentType(clipboardContent, internalHtmlMime()) || isMarked(html);\n      const isPlainTextHtml = !isInternal && isPlainText(content);\n      const isAbsoluteUrl$1 = isAbsoluteUrl(content);\n      if (isDefaultPasteBinContent(content) || !content.length || isPlainTextHtml && !isAbsoluteUrl$1) {\n        plainTextMode = true;\n      }\n      if (plainTextMode || isAbsoluteUrl$1) {\n        if (hasContentType(clipboardContent, 'text/plain') && isPlainTextHtml) {\n          content = clipboardContent['text/plain'];\n        } else {\n          content = innerText(content);\n        }\n      }\n      if (isDefaultPasteBinContent(content)) {\n        return;\n      }\n      if (plainTextMode) {\n        pasteText(editor, content);\n      } else {\n        pasteHtml(editor, content, isInternal);\n      }\n    };\n    const registerEventHandlers = (editor, pasteBin, pasteFormat) => {\n      let keyboardPastePlainTextState;\n      const getLastRng = () => pasteBin.getLastRng() || editor.selection.getRng();\n      editor.on('keydown', e => {\n        if (isKeyboardPasteEvent(e) && !e.isDefaultPrevented()) {\n          keyboardPastePlainTextState = e.shiftKey && e.keyCode === 86;\n        }\n      });\n      editor.on('paste', e => {\n        if (e.isDefaultPrevented() || isBrokenAndroidClipboardEvent(e)) {\n          return;\n        }\n        const plainTextMode = pasteFormat.get() === 'text' || keyboardPastePlainTextState;\n        keyboardPastePlainTextState = false;\n        const clipboardContent = getDataTransferItems(e.clipboardData);\n        if (!hasHtmlOrText(clipboardContent) && pasteImageData(editor, e, getLastRng())) {\n          return;\n        }\n        if (hasContentType(clipboardContent, 'text/html')) {\n          e.preventDefault();\n          insertClipboardContent(editor, clipboardContent, clipboardContent['text/html'], plainTextMode);\n        } else {\n          pasteBin.create();\n          Delay.setEditorTimeout(editor, () => {\n            const html = pasteBin.getHtml();\n            pasteBin.remove();\n            insertClipboardContent(editor, clipboardContent, html, plainTextMode);\n          }, 0);\n        }\n      });\n    };\n    const registerDataImageFilter = editor => {\n      const isWebKitFakeUrl = src => startsWith(src, 'webkit-fake-url');\n      const isDataUri = src => startsWith(src, 'data:');\n      const isPasteInsert = args => {\n        var _a;\n        return ((_a = args.data) === null || _a === void 0 ? void 0 : _a.paste) === true;\n      };\n      editor.parser.addNodeFilter('img', (nodes, name, args) => {\n        if (!shouldPasteDataImages(editor) && isPasteInsert(args)) {\n          for (const node of nodes) {\n            const src = node.attr('src');\n            if (isString(src) && !node.attr('data-mce-object') && src !== Env.transparentSrc) {\n              if (isWebKitFakeUrl(src)) {\n                node.remove();\n              } else if (!shouldAllowHtmlDataUrls(editor) && isDataUri(src)) {\n                node.remove();\n              }\n            }\n          }\n        }\n      });\n    };\n    const registerEventsAndFilters = (editor, pasteBin, pasteFormat) => {\n      registerEventHandlers(editor, pasteBin, pasteFormat);\n      registerDataImageFilter(editor);\n    };\n\n    const togglePlainTextPaste = (editor, pasteFormat) => {\n      if (pasteFormat.get() === 'text') {\n        pasteFormat.set('html');\n        firePastePlainTextToggle(editor, false);\n      } else {\n        pasteFormat.set('text');\n        firePastePlainTextToggle(editor, true);\n      }\n      editor.focus();\n    };\n    const register$1 = (editor, pasteFormat) => {\n      editor.addCommand('mceTogglePlainTextPaste', () => {\n        togglePlainTextPaste(editor, pasteFormat);\n      });\n      editor.addCommand('mceInsertClipboardContent', (ui, value) => {\n        if (value.html) {\n          pasteHtml(editor, value.html, value.internal);\n        }\n        if (value.text) {\n          pasteText(editor, value.text);\n        }\n      });\n    };\n\n    const setHtml5Clipboard = (clipboardData, html, text) => {\n      if (clipboardData) {\n        try {\n          clipboardData.clearData();\n          clipboardData.setData('text/html', html);\n          clipboardData.setData('text/plain', text);\n          clipboardData.setData(internalHtmlMime(), html);\n          return true;\n        } catch (e) {\n          return false;\n        }\n      } else {\n        return false;\n      }\n    };\n    const setClipboardData = (evt, data, fallback, done) => {\n      if (setHtml5Clipboard(evt.clipboardData, data.html, data.text)) {\n        evt.preventDefault();\n        done();\n      } else {\n        fallback(data.html, done);\n      }\n    };\n    const fallback = editor => (html, done) => {\n      const {dom, selection} = editor;\n      const outer = dom.create('div', {\n        'contenteditable': 'false',\n        'data-mce-bogus': 'all'\n      });\n      const inner = dom.create('div', { contenteditable: 'true' }, html);\n      dom.setStyles(outer, {\n        position: 'fixed',\n        top: '0',\n        left: '-3000px',\n        width: '1000px',\n        overflow: 'hidden'\n      });\n      outer.appendChild(inner);\n      dom.add(editor.getBody(), outer);\n      const range = selection.getRng();\n      inner.focus();\n      const offscreenRange = dom.createRng();\n      offscreenRange.selectNodeContents(inner);\n      selection.setRng(offscreenRange);\n      Delay.setEditorTimeout(editor, () => {\n        selection.setRng(range);\n        dom.remove(outer);\n        done();\n      }, 0);\n    };\n    const getData = editor => ({\n      html: mark(editor.selection.getContent({ contextual: true })),\n      text: editor.selection.getContent({ format: 'text' })\n    });\n    const isTableSelection = editor => !!editor.dom.getParent(editor.selection.getStart(), 'td[data-mce-selected],th[data-mce-selected]', editor.getBody());\n    const hasSelectedContent = editor => !editor.selection.isCollapsed() || isTableSelection(editor);\n    const cut = editor => evt => {\n      if (!evt.isDefaultPrevented() && hasSelectedContent(editor)) {\n        setClipboardData(evt, getData(editor), fallback(editor), () => {\n          if (Env.browser.isChromium() || Env.browser.isFirefox()) {\n            const rng = editor.selection.getRng();\n            Delay.setEditorTimeout(editor, () => {\n              editor.selection.setRng(rng);\n              editor.execCommand('Delete');\n            }, 0);\n          } else {\n            editor.execCommand('Delete');\n          }\n        });\n      }\n    };\n    const copy = editor => evt => {\n      if (!evt.isDefaultPrevented() && hasSelectedContent(editor)) {\n        setClipboardData(evt, getData(editor), fallback(editor), noop);\n      }\n    };\n    const register = editor => {\n      editor.on('cut', cut(editor));\n      editor.on('copy', copy(editor));\n    };\n\n    const getCaretRangeFromEvent = (editor, e) => {\n      var _a, _b;\n      return RangeUtils.getCaretRangeFromPoint((_a = e.clientX) !== null && _a !== void 0 ? _a : 0, (_b = e.clientY) !== null && _b !== void 0 ? _b : 0, editor.getDoc());\n    };\n    const isPlainTextFileUrl = content => {\n      const plainTextContent = content['text/plain'];\n      return plainTextContent ? plainTextContent.indexOf('file://') === 0 : false;\n    };\n    const setFocusedRange = (editor, rng) => {\n      editor.focus();\n      if (rng) {\n        editor.selection.setRng(rng);\n      }\n    };\n    const hasImage = dataTransfer => exists(dataTransfer.files, file => /^image\\//.test(file.type));\n    const setup$a = (editor, draggingInternallyState) => {\n      if (shouldPasteBlockDrop(editor)) {\n        editor.on('dragend dragover draggesture dragdrop drop drag', e => {\n          e.preventDefault();\n          e.stopPropagation();\n        });\n      }\n      if (!shouldPasteDataImages(editor)) {\n        editor.on('drop', e => {\n          const dataTransfer = e.dataTransfer;\n          if (dataTransfer && hasImage(dataTransfer)) {\n            e.preventDefault();\n          }\n        });\n      }\n      editor.on('drop', e => {\n        if (e.isDefaultPrevented() || draggingInternallyState.get()) {\n          return;\n        }\n        const rng = getCaretRangeFromEvent(editor, e);\n        if (isNullable(rng)) {\n          return;\n        }\n        const dropContent = getDataTransferItems(e.dataTransfer);\n        const internal = hasContentType(dropContent, internalHtmlMime());\n        if ((!hasHtmlOrText(dropContent) || isPlainTextFileUrl(dropContent)) && pasteImageData(editor, e, rng)) {\n          return;\n        }\n        const internalContent = dropContent[internalHtmlMime()];\n        const content = internalContent || dropContent['text/html'] || dropContent['text/plain'];\n        if (content) {\n          e.preventDefault();\n          Delay.setEditorTimeout(editor, () => {\n            editor.undoManager.transact(() => {\n              if (internalContent) {\n                editor.execCommand('Delete');\n              }\n              setFocusedRange(editor, rng);\n              const trimmedContent = trimHtml(content);\n              if (dropContent['text/html']) {\n                pasteHtml(editor, trimmedContent, internal);\n              } else {\n                pasteText(editor, trimmedContent);\n              }\n            });\n          });\n        }\n      });\n      editor.on('dragstart', _e => {\n        draggingInternallyState.set(true);\n      });\n      editor.on('dragover dragend', e => {\n        if (shouldPasteDataImages(editor) && !draggingInternallyState.get()) {\n          e.preventDefault();\n          setFocusedRange(editor, getCaretRangeFromEvent(editor, e));\n        }\n        if (e.type === 'dragend') {\n          draggingInternallyState.set(false);\n        }\n      });\n    };\n\n    const setup$9 = editor => {\n      const processEvent = f => e => {\n        f(editor, e);\n      };\n      const preProcess = getPastePreProcess(editor);\n      if (isFunction(preProcess)) {\n        editor.on('PastePreProcess', processEvent(preProcess));\n      }\n      const postProcess = getPastePostProcess(editor);\n      if (isFunction(postProcess)) {\n        editor.on('PastePostProcess', processEvent(postProcess));\n      }\n    };\n\n    const addPreProcessFilter = (editor, filterFunc) => {\n      editor.on('PastePreProcess', e => {\n        e.content = filterFunc(editor, e.content, e.internal);\n      });\n    };\n    const rgbRegExp = /rgb\\s*\\(\\s*([0-9]+)\\s*,\\s*([0-9]+)\\s*,\\s*([0-9]+)\\s*\\)/gi;\n    const rgbToHex = value => Tools.trim(value).replace(rgbRegExp, rgbaToHexString).toLowerCase();\n    const removeWebKitStyles = (editor, content, internal) => {\n      const webKitStylesOption = getPasteWebkitStyles(editor);\n      if (internal || webKitStylesOption === 'all' || !shouldPasteRemoveWebKitStyles(editor)) {\n        return content;\n      }\n      const webKitStyles = webKitStylesOption ? webKitStylesOption.split(/[, ]/) : [];\n      if (webKitStyles && webKitStylesOption !== 'none') {\n        const dom = editor.dom, node = editor.selection.getNode();\n        content = content.replace(/(<[^>]+) style=\"([^\"]*)\"([^>]*>)/gi, (all, before, value, after) => {\n          const inputStyles = dom.parseStyle(dom.decode(value));\n          const outputStyles = {};\n          for (let i = 0; i < webKitStyles.length; i++) {\n            const inputValue = inputStyles[webKitStyles[i]];\n            let compareInput = inputValue;\n            let currentValue = dom.getStyle(node, webKitStyles[i], true);\n            if (/color/.test(webKitStyles[i])) {\n              compareInput = rgbToHex(compareInput);\n              currentValue = rgbToHex(currentValue);\n            }\n            if (currentValue !== compareInput) {\n              outputStyles[webKitStyles[i]] = inputValue;\n            }\n          }\n          const outputStyle = dom.serializeStyle(outputStyles, 'span');\n          if (outputStyle) {\n            return before + ' style=\"' + outputStyle + '\"' + after;\n          }\n          return before + after;\n        });\n      } else {\n        content = content.replace(/(<[^>]+) style=\"([^\"]*)\"([^>]*>)/gi, '$1$3');\n      }\n      content = content.replace(/(<[^>]+) data-mce-style=\"([^\"]+)\"([^>]*>)/gi, (all, before, value, after) => {\n        return before + ' style=\"' + value + '\"' + after;\n      });\n      return content;\n    };\n    const setup$8 = editor => {\n      if (Env.browser.isChromium() || Env.browser.isSafari()) {\n        addPreProcessFilter(editor, removeWebKitStyles);\n      }\n    };\n\n    const setup$7 = editor => {\n      const draggingInternallyState = Cell(false);\n      const pasteFormat = Cell(isPasteAsTextEnabled(editor) ? 'text' : 'html');\n      const pasteBin = PasteBin(editor);\n      setup$8(editor);\n      register$1(editor, pasteFormat);\n      setup$9(editor);\n      editor.on('PreInit', () => {\n        register(editor);\n        setup$a(editor, draggingInternallyState);\n        registerEventsAndFilters(editor, pasteBin, pasteFormat);\n      });\n    };\n\n    const preventSummaryToggle = editor => {\n      editor.on('click', e => {\n        if (editor.dom.getParent(e.target, 'details')) {\n          e.preventDefault();\n        }\n      });\n    };\n    const filterDetails = editor => {\n      editor.parser.addNodeFilter('details', elms => {\n        each$e(elms, details => {\n          details.attr('data-mce-open', details.attr('open'));\n          details.attr('open', 'open');\n        });\n      });\n      editor.serializer.addNodeFilter('details', elms => {\n        each$e(elms, details => {\n          const open = details.attr('data-mce-open');\n          details.attr('open', isString(open) ? open : null);\n          details.attr('data-mce-open', null);\n        });\n      });\n    };\n    const setup$6 = editor => {\n      preventSummaryToggle(editor);\n      filterDetails(editor);\n    };\n\n    const isBr = isBr$6;\n    const isText = isText$a;\n    const isContentEditableFalse$2 = elm => isContentEditableFalse$a(elm.dom);\n    const isContentEditableTrue = elm => isContentEditableTrue$3(elm.dom);\n    const isRoot = rootNode => elm => eq(SugarElement.fromDom(rootNode), elm);\n    const getClosestScope = (node, rootNode) => closest$4(SugarElement.fromDom(node), elm => isContentEditableTrue(elm) || isBlock$2(elm), isRoot(rootNode)).getOr(SugarElement.fromDom(rootNode)).dom;\n    const getClosestCef = (node, rootNode) => closest$4(SugarElement.fromDom(node), isContentEditableFalse$2, isRoot(rootNode));\n    const findEdgeCaretCandidate = (startNode, scope, forward) => {\n      const walker = new DomTreeWalker(startNode, scope);\n      const next = forward ? walker.next.bind(walker) : walker.prev.bind(walker);\n      let result = startNode;\n      for (let current = forward ? startNode : next(); current && !isBr(current); current = next()) {\n        if (isCaretCandidate$3(current)) {\n          result = current;\n        }\n      }\n      return result;\n    };\n    const findClosestBlockRange = (startRng, rootNode) => {\n      const startPos = CaretPosition.fromRangeStart(startRng);\n      const clickNode = startPos.getNode();\n      const scope = getClosestScope(clickNode, rootNode);\n      const startNode = findEdgeCaretCandidate(clickNode, scope, false);\n      const endNode = findEdgeCaretCandidate(clickNode, scope, true);\n      const rng = document.createRange();\n      getClosestCef(startNode, scope).fold(() => {\n        if (isText(startNode)) {\n          rng.setStart(startNode, 0);\n        } else {\n          rng.setStartBefore(startNode);\n        }\n      }, cef => rng.setStartBefore(cef.dom));\n      getClosestCef(endNode, scope).fold(() => {\n        if (isText(endNode)) {\n          rng.setEnd(endNode, endNode.data.length);\n        } else {\n          rng.setEndAfter(endNode);\n        }\n      }, cef => rng.setEndAfter(cef.dom));\n      return rng;\n    };\n    const onTripleClickSelect = editor => {\n      const rng = findClosestBlockRange(editor.selection.getRng(), editor.getBody());\n      editor.selection.setRng(normalize(rng));\n    };\n    const setup$5 = editor => {\n      editor.on('mousedown', e => {\n        if (e.detail >= 3) {\n          e.preventDefault();\n          onTripleClickSelect(editor);\n        }\n      });\n    };\n\n    var FakeCaretPosition;\n    (function (FakeCaretPosition) {\n      FakeCaretPosition['Before'] = 'before';\n      FakeCaretPosition['After'] = 'after';\n    }(FakeCaretPosition || (FakeCaretPosition = {})));\n    const distanceToRectLeft = (clientRect, clientX) => Math.abs(clientRect.left - clientX);\n    const distanceToRectRight = (clientRect, clientX) => Math.abs(clientRect.right - clientX);\n    const isInsideY = (clientY, clientRect) => clientY >= clientRect.top && clientY <= clientRect.bottom;\n    const collidesY = (r1, r2) => r1.top < r2.bottom && r1.bottom > r2.top;\n    const isOverlapping = (r1, r2) => {\n      const overlap = overlapY(r1, r2) / Math.min(r1.height, r2.height);\n      return collidesY(r1, r2) && overlap > 0.5;\n    };\n    const splitRectsPerAxis = (rects, y) => {\n      const intersectingRects = filter$5(rects, rect => isInsideY(y, rect));\n      return boundingClientRectFromRects(intersectingRects).fold(() => [\n        [],\n        rects\n      ], boundingRect => {\n        const {\n          pass: horizontal,\n          fail: vertical\n        } = partition$2(rects, rect => isOverlapping(rect, boundingRect));\n        return [\n          horizontal,\n          vertical\n        ];\n      });\n    };\n    const clientInfo = (rect, clientX) => {\n      return {\n        node: rect.node,\n        position: distanceToRectLeft(rect, clientX) < distanceToRectRight(rect, clientX) ? FakeCaretPosition.Before : FakeCaretPosition.After\n      };\n    };\n    const horizontalDistance = (rect, x, _y) => x > rect.left && x < rect.right ? 0 : Math.min(Math.abs(rect.left - x), Math.abs(rect.right - x));\n    const closestChildCaretCandidateNodeRect = (children, clientX, clientY) => {\n      const caretCandidateRect = rect => {\n        if (isCaretCandidate$3(rect.node)) {\n          return Optional.some(rect);\n        } else if (isElement$6(rect.node)) {\n          return closestChildCaretCandidateNodeRect(from(rect.node.childNodes), clientX, clientY);\n        } else {\n          return Optional.none();\n        }\n      };\n      const getClosestTextNode = (rects, distance) => {\n        if (rects.length >= 2) {\n          const r1 = caretCandidateRect(rects[0]).getOr(rects[0]);\n          const r2 = caretCandidateRect(rects[1]).getOr(rects[1]);\n          const deltaDistance = Math.abs(distance(r1, clientX, clientY) - distance(r2, clientX, clientY));\n          if (deltaDistance < 2) {\n            if (isText$a(r1.node)) {\n              return Optional.some(r1);\n            } else if (isText$a(r2.node)) {\n              return Optional.some(r2);\n            }\n          }\n        }\n        return Optional.none();\n      };\n      const findClosestCaretCandidateNodeRect = (rects, distance) => {\n        const sortedRects = sort(rects, (r1, r2) => distance(r1, clientX, clientY) - distance(r2, clientX, clientY));\n        return getClosestTextNode(sortedRects, distance).orThunk(() => findMap(sortedRects, caretCandidateRect));\n      };\n      const [horizontalRects, verticalRects] = splitRectsPerAxis(getClientRects(children), clientY);\n      const {\n        pass: above,\n        fail: below\n      } = partition$2(verticalRects, rect => rect.top < clientY);\n      return findClosestCaretCandidateNodeRect(horizontalRects, horizontalDistance).orThunk(() => findClosestCaretCandidateNodeRect(below, distanceToRectEdgeFromXY)).orThunk(() => findClosestCaretCandidateNodeRect(above, distanceToRectEdgeFromXY));\n    };\n    const traverseUp = (rootElm, scope, clientX, clientY) => {\n      const helper = (scope, prevScope) => {\n        return prevScope.fold(() => closestChildCaretCandidateNodeRect(from(scope.dom.childNodes), clientX, clientY), prevScope => {\n          const uncheckedChildren = filter$5(from(scope.dom.childNodes), node => node !== prevScope.dom);\n          return closestChildCaretCandidateNodeRect(uncheckedChildren, clientX, clientY);\n        }).orThunk(() => {\n          const parent = eq(scope, rootElm) ? Optional.none() : parentElement(scope);\n          return parent.bind(newScope => helper(newScope, Optional.some(scope)));\n        });\n      };\n      return helper(scope, Optional.none());\n    };\n    const closestCaretCandidateNodeRect = (root, clientX, clientY) => {\n      const rootElm = SugarElement.fromDom(root);\n      const ownerDoc = documentOrOwner(rootElm);\n      const elementAtPoint = SugarElement.fromPoint(ownerDoc, clientX, clientY).filter(elm => contains(rootElm, elm));\n      const element = elementAtPoint.getOr(rootElm);\n      return traverseUp(rootElm, element, clientX, clientY);\n    };\n    const closestFakeCaretCandidate = (root, clientX, clientY) => closestCaretCandidateNodeRect(root, clientX, clientY).filter(rect => isFakeCaretTarget(rect.node)).map(rect => clientInfo(rect, clientX));\n\n    const getAbsolutePosition = elm => {\n      var _a, _b;\n      const clientRect = elm.getBoundingClientRect();\n      const doc = elm.ownerDocument;\n      const docElem = doc.documentElement;\n      const win = doc.defaultView;\n      return {\n        top: clientRect.top + ((_a = win === null || win === void 0 ? void 0 : win.scrollY) !== null && _a !== void 0 ? _a : 0) - docElem.clientTop,\n        left: clientRect.left + ((_b = win === null || win === void 0 ? void 0 : win.scrollX) !== null && _b !== void 0 ? _b : 0) - docElem.clientLeft\n      };\n    };\n    const getBodyPosition = editor => editor.inline ? getAbsolutePosition(editor.getBody()) : {\n      left: 0,\n      top: 0\n    };\n    const getScrollPosition = editor => {\n      const body = editor.getBody();\n      return editor.inline ? {\n        left: body.scrollLeft,\n        top: body.scrollTop\n      } : {\n        left: 0,\n        top: 0\n      };\n    };\n    const getBodyScroll = editor => {\n      const body = editor.getBody(), docElm = editor.getDoc().documentElement;\n      const inlineScroll = {\n        left: body.scrollLeft,\n        top: body.scrollTop\n      };\n      const iframeScroll = {\n        left: body.scrollLeft || docElm.scrollLeft,\n        top: body.scrollTop || docElm.scrollTop\n      };\n      return editor.inline ? inlineScroll : iframeScroll;\n    };\n    const getMousePosition = (editor, event) => {\n      if (event.target.ownerDocument !== editor.getDoc()) {\n        const iframePosition = getAbsolutePosition(editor.getContentAreaContainer());\n        const scrollPosition = getBodyScroll(editor);\n        return {\n          left: event.pageX - iframePosition.left + scrollPosition.left,\n          top: event.pageY - iframePosition.top + scrollPosition.top\n        };\n      }\n      return {\n        left: event.pageX,\n        top: event.pageY\n      };\n    };\n    const calculatePosition = (bodyPosition, scrollPosition, mousePosition) => ({\n      pageX: mousePosition.left - bodyPosition.left + scrollPosition.left,\n      pageY: mousePosition.top - bodyPosition.top + scrollPosition.top\n    });\n    const calc = (editor, event) => calculatePosition(getBodyPosition(editor), getScrollPosition(editor), getMousePosition(editor, event));\n\n    const scrollPixelsPerInterval = 32;\n    const scrollIntervalValue = 100;\n    const mouseRangeToTriggerScrollInsideEditor = 8;\n    const mouseRangeToTriggerScrollOutsideEditor = 16;\n    const isContentEditableFalse$1 = isContentEditableFalse$a;\n    const isContentEditable = or(isContentEditableFalse$1, isContentEditableTrue$3);\n    const isDraggable = (rootElm, elm) => isContentEditableFalse$1(elm) && elm !== rootElm;\n    const isValidDropTarget = (editor, targetElement, dragElement) => {\n      if (isNullable(targetElement)) {\n        return false;\n      } else if (targetElement === dragElement || editor.dom.isChildOf(targetElement, dragElement)) {\n        return false;\n      } else {\n        return !isContentEditableFalse$1(targetElement);\n      }\n    };\n    const cloneElement = elm => {\n      const cloneElm = elm.cloneNode(true);\n      cloneElm.removeAttribute('data-mce-selected');\n      return cloneElm;\n    };\n    const createGhost = (editor, elm, width, height) => {\n      const dom = editor.dom;\n      const clonedElm = elm.cloneNode(true);\n      dom.setStyles(clonedElm, {\n        width,\n        height\n      });\n      dom.setAttrib(clonedElm, 'data-mce-selected', null);\n      const ghostElm = dom.create('div', {\n        'class': 'mce-drag-container',\n        'data-mce-bogus': 'all',\n        'unselectable': 'on',\n        'contenteditable': 'false'\n      });\n      dom.setStyles(ghostElm, {\n        position: 'absolute',\n        opacity: 0.5,\n        overflow: 'hidden',\n        border: 0,\n        padding: 0,\n        margin: 0,\n        width,\n        height\n      });\n      dom.setStyles(clonedElm, {\n        margin: 0,\n        boxSizing: 'border-box'\n      });\n      ghostElm.appendChild(clonedElm);\n      return ghostElm;\n    };\n    const appendGhostToBody = (ghostElm, bodyElm) => {\n      if (ghostElm.parentNode !== bodyElm) {\n        bodyElm.appendChild(ghostElm);\n      }\n    };\n    const scrollEditor = (direction, amount) => win => () => {\n      const current = direction === 'left' ? win.scrollX : win.scrollY;\n      win.scroll({\n        [direction]: current + amount,\n        behavior: 'smooth'\n      });\n    };\n    const scrollLeft = scrollEditor('left', -scrollPixelsPerInterval);\n    const scrollRight = scrollEditor('left', scrollPixelsPerInterval);\n    const scrollUp = scrollEditor('top', -scrollPixelsPerInterval);\n    const scrollDown = scrollEditor('top', scrollPixelsPerInterval);\n    const moveGhost = (ghostElm, position, width, height, maxX, maxY, mouseY, mouseX, contentAreaContainer, win, state) => {\n      let overflowX = 0, overflowY = 0;\n      ghostElm.style.left = position.pageX + 'px';\n      ghostElm.style.top = position.pageY + 'px';\n      if (position.pageX + width > maxX) {\n        overflowX = position.pageX + width - maxX;\n      }\n      if (position.pageY + height > maxY) {\n        overflowY = position.pageY + height - maxY;\n      }\n      ghostElm.style.width = width - overflowX + 'px';\n      ghostElm.style.height = height - overflowY + 'px';\n      const clientHeight = contentAreaContainer.clientHeight;\n      const clientWidth = contentAreaContainer.clientWidth;\n      const outerMouseY = mouseY + contentAreaContainer.getBoundingClientRect().top;\n      const outerMouseX = mouseX + contentAreaContainer.getBoundingClientRect().left;\n      state.on(state => {\n        state.intervalId.clear();\n        if (state.dragging) {\n          if (mouseY + mouseRangeToTriggerScrollInsideEditor >= clientHeight) {\n            state.intervalId.set(scrollDown(win));\n          } else if (mouseY - mouseRangeToTriggerScrollInsideEditor <= 0) {\n            state.intervalId.set(scrollUp(win));\n          } else if (mouseX + mouseRangeToTriggerScrollInsideEditor >= clientWidth) {\n            state.intervalId.set(scrollRight(win));\n          } else if (mouseX - mouseRangeToTriggerScrollInsideEditor <= 0) {\n            state.intervalId.set(scrollLeft(win));\n          } else if (outerMouseY + mouseRangeToTriggerScrollOutsideEditor >= window.innerHeight) {\n            state.intervalId.set(scrollDown(window));\n          } else if (outerMouseY - mouseRangeToTriggerScrollOutsideEditor <= 0) {\n            state.intervalId.set(scrollUp(window));\n          } else if (outerMouseX + mouseRangeToTriggerScrollOutsideEditor >= window.innerWidth) {\n            state.intervalId.set(scrollRight(window));\n          } else if (outerMouseX - mouseRangeToTriggerScrollOutsideEditor <= 0) {\n            state.intervalId.set(scrollLeft(window));\n          }\n        }\n      });\n    };\n    const removeElement = elm => {\n      if (elm && elm.parentNode) {\n        elm.parentNode.removeChild(elm);\n      }\n    };\n    const isLeftMouseButtonPressed = e => e.button === 0;\n    const applyRelPos = (state, position) => ({\n      pageX: position.pageX - state.relX,\n      pageY: position.pageY + 5\n    });\n    const start = (state, editor) => e => {\n      if (isLeftMouseButtonPressed(e)) {\n        const ceElm = find$2(editor.dom.getParents(e.target), isContentEditable).getOr(null);\n        if (isNonNullable(ceElm) && isDraggable(editor.getBody(), ceElm)) {\n          const elmPos = editor.dom.getPos(ceElm);\n          const bodyElm = editor.getBody();\n          const docElm = editor.getDoc().documentElement;\n          state.set({\n            element: ceElm,\n            dragging: false,\n            screenX: e.screenX,\n            screenY: e.screenY,\n            maxX: (editor.inline ? bodyElm.scrollWidth : docElm.offsetWidth) - 2,\n            maxY: (editor.inline ? bodyElm.scrollHeight : docElm.offsetHeight) - 2,\n            relX: e.pageX - elmPos.x,\n            relY: e.pageY - elmPos.y,\n            width: ceElm.offsetWidth,\n            height: ceElm.offsetHeight,\n            ghost: createGhost(editor, ceElm, ceElm.offsetWidth, ceElm.offsetHeight),\n            intervalId: repeatable(scrollIntervalValue)\n          });\n        }\n      }\n    };\n    const move = (state, editor) => {\n      const throttledPlaceCaretAt = first$1((clientX, clientY) => {\n        editor._selectionOverrides.hideFakeCaret();\n        editor.selection.placeCaretAt(clientX, clientY);\n      }, 0);\n      editor.on('remove', throttledPlaceCaretAt.cancel);\n      const state_ = state;\n      return e => state.on(state => {\n        const movement = Math.max(Math.abs(e.screenX - state.screenX), Math.abs(e.screenY - state.screenY));\n        if (!state.dragging && movement > 10) {\n          const args = editor.dispatch('dragstart', { target: state.element });\n          if (args.isDefaultPrevented()) {\n            return;\n          }\n          state.dragging = true;\n          editor.focus();\n        }\n        if (state.dragging) {\n          const targetPos = applyRelPos(state, calc(editor, e));\n          appendGhostToBody(state.ghost, editor.getBody());\n          moveGhost(state.ghost, targetPos, state.width, state.height, state.maxX, state.maxY, e.clientY, e.clientX, editor.getContentAreaContainer(), editor.getWin(), state_);\n          throttledPlaceCaretAt.throttle(e.clientX, e.clientY);\n        }\n      });\n    };\n    const getRawTarget = selection => {\n      const sel = selection.getSel();\n      if (isNonNullable(sel)) {\n        const rng = sel.getRangeAt(0);\n        const startContainer = rng.startContainer;\n        return isText$a(startContainer) ? startContainer.parentNode : startContainer;\n      } else {\n        return null;\n      }\n    };\n    const drop = (state, editor) => e => {\n      state.on(state => {\n        state.intervalId.clear();\n        if (state.dragging) {\n          if (isValidDropTarget(editor, getRawTarget(editor.selection), state.element)) {\n            const targetClone = cloneElement(state.element);\n            const args = editor.dispatch('drop', {\n              clientX: e.clientX,\n              clientY: e.clientY\n            });\n            if (!args.isDefaultPrevented()) {\n              editor.undoManager.transact(() => {\n                removeElement(state.element);\n                editor.insertContent(editor.dom.getOuterHTML(targetClone));\n                editor._selectionOverrides.hideFakeCaret();\n              });\n            }\n          }\n          editor.dispatch('dragend');\n        }\n      });\n      removeDragState(state);\n    };\n    const stop = (state, editor) => () => {\n      state.on(state => {\n        state.intervalId.clear();\n        if (state.dragging) {\n          editor.dispatch('dragend');\n        }\n      });\n      removeDragState(state);\n    };\n    const removeDragState = state => {\n      state.on(state => {\n        state.intervalId.clear();\n        removeElement(state.ghost);\n      });\n      state.clear();\n    };\n    const bindFakeDragEvents = editor => {\n      const state = value$2();\n      const pageDom = DOMUtils.DOM;\n      const rootDocument = document;\n      const dragStartHandler = start(state, editor);\n      const dragHandler = move(state, editor);\n      const dropHandler = drop(state, editor);\n      const dragEndHandler = stop(state, editor);\n      editor.on('mousedown', dragStartHandler);\n      editor.on('mousemove', dragHandler);\n      editor.on('mouseup', dropHandler);\n      pageDom.bind(rootDocument, 'mousemove', dragHandler);\n      pageDom.bind(rootDocument, 'mouseup', dragEndHandler);\n      editor.on('remove', () => {\n        pageDom.unbind(rootDocument, 'mousemove', dragHandler);\n        pageDom.unbind(rootDocument, 'mouseup', dragEndHandler);\n      });\n      editor.on('keydown', e => {\n        if (e.keyCode === VK.ESC) {\n          dragEndHandler();\n        }\n      });\n    };\n    const blockUnsupportedFileDrop = editor => {\n      const preventFileDrop = e => {\n        if (!e.isDefaultPrevented()) {\n          const dataTransfer = e.dataTransfer;\n          if (dataTransfer && (contains$2(dataTransfer.types, 'Files') || dataTransfer.files.length > 0)) {\n            e.preventDefault();\n            if (e.type === 'drop') {\n              displayError(editor, 'Dropped file type is not supported');\n            }\n          }\n        }\n      };\n      const preventFileDropIfUIElement = e => {\n        if (isUIElement(editor, e.target)) {\n          preventFileDrop(e);\n        }\n      };\n      const setup = () => {\n        const pageDom = DOMUtils.DOM;\n        const dom = editor.dom;\n        const doc = document;\n        const editorRoot = editor.inline ? editor.getBody() : editor.getDoc();\n        const eventNames = [\n          'drop',\n          'dragover'\n        ];\n        each$e(eventNames, name => {\n          pageDom.bind(doc, name, preventFileDropIfUIElement);\n          dom.bind(editorRoot, name, preventFileDrop);\n        });\n        editor.on('remove', () => {\n          each$e(eventNames, name => {\n            pageDom.unbind(doc, name, preventFileDropIfUIElement);\n            dom.unbind(editorRoot, name, preventFileDrop);\n          });\n        });\n      };\n      editor.on('init', () => {\n        Delay.setEditorTimeout(editor, setup, 0);\n      });\n    };\n    const init$2 = editor => {\n      bindFakeDragEvents(editor);\n      if (shouldBlockUnsupportedDrop(editor)) {\n        blockUnsupportedFileDrop(editor);\n      }\n    };\n\n    const setup$4 = editor => {\n      const renderFocusCaret = first$1(() => {\n        if (!editor.removed && editor.getBody().contains(document.activeElement)) {\n          const rng = editor.selection.getRng();\n          if (rng.collapsed) {\n            const caretRange = renderRangeCaret(editor, rng, false);\n            editor.selection.setRng(caretRange);\n          }\n        }\n      }, 0);\n      editor.on('focus', () => {\n        renderFocusCaret.throttle();\n      });\n      editor.on('blur', () => {\n        renderFocusCaret.cancel();\n      });\n    };\n\n    const setup$3 = editor => {\n      editor.on('init', () => {\n        editor.on('focusin', e => {\n          const target = e.target;\n          if (isMedia$2(target)) {\n            const ceRoot = getContentEditableRoot$1(editor.getBody(), target);\n            const node = isContentEditableFalse$a(ceRoot) ? ceRoot : target;\n            if (editor.selection.getNode() !== node) {\n              selectNode(editor, node).each(rng => editor.selection.setRng(rng));\n            }\n          }\n        });\n      });\n    };\n\n    const isContentEditableFalse = isContentEditableFalse$a;\n    const getContentEditableRoot = (editor, node) => getContentEditableRoot$1(editor.getBody(), node);\n    const SelectionOverrides = editor => {\n      const selection = editor.selection, dom = editor.dom;\n      const rootNode = editor.getBody();\n      const fakeCaret = FakeCaret(editor, rootNode, dom.isBlock, () => hasFocus(editor));\n      const realSelectionId = 'sel-' + dom.uniqueId();\n      const elementSelectionAttr = 'data-mce-selected';\n      let selectedElement;\n      const isFakeSelectionElement = node => isNonNullable(node) && dom.hasClass(node, 'mce-offscreen-selection');\n      const isFakeSelectionTargetElement = node => node !== rootNode && (isContentEditableFalse(node) || isMedia$2(node)) && dom.isChildOf(node, rootNode);\n      const setRange = range => {\n        if (range) {\n          selection.setRng(range);\n        }\n      };\n      const showCaret = (direction, node, before, scrollIntoView = true) => {\n        const e = editor.dispatch('ShowCaret', {\n          target: node,\n          direction,\n          before\n        });\n        if (e.isDefaultPrevented()) {\n          return null;\n        }\n        if (scrollIntoView) {\n          selection.scrollIntoView(node, direction === -1);\n        }\n        return fakeCaret.show(before, node);\n      };\n      const showBlockCaretContainer = blockCaretContainer => {\n        if (blockCaretContainer.hasAttribute('data-mce-caret')) {\n          showCaretContainerBlock(blockCaretContainer);\n          selection.scrollIntoView(blockCaretContainer);\n        }\n      };\n      const registerEvents = () => {\n        editor.on('click', e => {\n          const contentEditableRoot = getContentEditableRoot(editor, e.target);\n          if (contentEditableRoot) {\n            if (isContentEditableFalse(contentEditableRoot)) {\n              e.preventDefault();\n              editor.focus();\n            }\n          }\n        });\n        editor.on('blur NewBlock', removeElementSelection);\n        editor.on('ResizeWindow FullscreenStateChanged', fakeCaret.reposition);\n        editor.on('tap', e => {\n          const targetElm = e.target;\n          const contentEditableRoot = getContentEditableRoot(editor, targetElm);\n          if (isContentEditableFalse(contentEditableRoot)) {\n            e.preventDefault();\n            selectNode(editor, contentEditableRoot).each(setElementSelection);\n          } else if (isFakeSelectionTargetElement(targetElm)) {\n            selectNode(editor, targetElm).each(setElementSelection);\n          }\n        }, true);\n        editor.on('mousedown', e => {\n          const targetElm = e.target;\n          if (targetElm !== rootNode && targetElm.nodeName !== 'HTML' && !dom.isChildOf(targetElm, rootNode)) {\n            return;\n          }\n          if (!isXYInContentArea(editor, e.clientX, e.clientY)) {\n            return;\n          }\n          removeElementSelection();\n          hideFakeCaret();\n          const closestContentEditable = getContentEditableRoot(editor, targetElm);\n          if (isContentEditableFalse(closestContentEditable)) {\n            e.preventDefault();\n            selectNode(editor, closestContentEditable).each(setElementSelection);\n          } else {\n            closestFakeCaretCandidate(rootNode, e.clientX, e.clientY).each(caretInfo => {\n              e.preventDefault();\n              const range = showCaret(1, caretInfo.node, caretInfo.position === FakeCaretPosition.Before, false);\n              setRange(range);\n              if (isElement$6(closestContentEditable)) {\n                closestContentEditable.focus();\n              } else {\n                editor.getBody().focus();\n              }\n            });\n          }\n        });\n        editor.on('keypress', e => {\n          if (VK.modifierPressed(e)) {\n            return;\n          }\n          if (isContentEditableFalse(selection.getNode())) {\n            e.preventDefault();\n          }\n        });\n        editor.on('GetSelectionRange', e => {\n          let rng = e.range;\n          if (selectedElement) {\n            if (!selectedElement.parentNode) {\n              selectedElement = null;\n              return;\n            }\n            rng = rng.cloneRange();\n            rng.selectNode(selectedElement);\n            e.range = rng;\n          }\n        });\n        editor.on('SetSelectionRange', e => {\n          e.range = normalizeVoidElementSelection(e.range);\n          const rng = setElementSelection(e.range, e.forward);\n          if (rng) {\n            e.range = rng;\n          }\n        });\n        const isPasteBin = node => isElement$6(node) && node.id === 'mcepastebin';\n        editor.on('AfterSetSelectionRange', e => {\n          const rng = e.range;\n          const parent = rng.startContainer.parentElement;\n          if (!isRangeInCaretContainer(rng) && !isPasteBin(parent)) {\n            hideFakeCaret();\n          }\n          if (!isFakeSelectionElement(parent)) {\n            removeElementSelection();\n          }\n        });\n        init$2(editor);\n        setup$4(editor);\n        setup$3(editor);\n      };\n      const isWithinCaretContainer = node => isCaretContainer$2(node) || startsWithCaretContainer$1(node) || endsWithCaretContainer$1(node);\n      const isRangeInCaretContainer = rng => isWithinCaretContainer(rng.startContainer) || isWithinCaretContainer(rng.endContainer);\n      const normalizeVoidElementSelection = rng => {\n        const voidElements = editor.schema.getVoidElements();\n        const newRng = dom.createRng();\n        const startContainer = rng.startContainer;\n        const startOffset = rng.startOffset;\n        const endContainer = rng.endContainer;\n        const endOffset = rng.endOffset;\n        if (has$2(voidElements, startContainer.nodeName.toLowerCase())) {\n          if (startOffset === 0) {\n            newRng.setStartBefore(startContainer);\n          } else {\n            newRng.setStartAfter(startContainer);\n          }\n        } else {\n          newRng.setStart(startContainer, startOffset);\n        }\n        if (has$2(voidElements, endContainer.nodeName.toLowerCase())) {\n          if (endOffset === 0) {\n            newRng.setEndBefore(endContainer);\n          } else {\n            newRng.setEndAfter(endContainer);\n          }\n        } else {\n          newRng.setEnd(endContainer, endOffset);\n        }\n        return newRng;\n      };\n      const setupOffscreenSelection = (node, targetClone) => {\n        const body = SugarElement.fromDom(editor.getBody());\n        const doc = editor.getDoc();\n        const realSelectionContainer = descendant(body, '#' + realSelectionId).getOrThunk(() => {\n          const newContainer = SugarElement.fromHtml('<div data-mce-bogus=\"all\" class=\"mce-offscreen-selection\"></div>', doc);\n          set$2(newContainer, 'id', realSelectionId);\n          append$1(body, newContainer);\n          return newContainer;\n        });\n        const newRange = dom.createRng();\n        empty(realSelectionContainer);\n        append(realSelectionContainer, [\n          SugarElement.fromText(nbsp, doc),\n          SugarElement.fromDom(targetClone),\n          SugarElement.fromText(nbsp, doc)\n        ]);\n        newRange.setStart(realSelectionContainer.dom.firstChild, 1);\n        newRange.setEnd(realSelectionContainer.dom.lastChild, 0);\n        setAll(realSelectionContainer, { top: dom.getPos(node, editor.getBody()).y + 'px' });\n        focus$1(realSelectionContainer);\n        const sel = selection.getSel();\n        if (sel) {\n          sel.removeAllRanges();\n          sel.addRange(newRange);\n        }\n        return newRange;\n      };\n      const selectElement = elm => {\n        const targetClone = elm.cloneNode(true);\n        const e = editor.dispatch('ObjectSelected', {\n          target: elm,\n          targetClone\n        });\n        if (e.isDefaultPrevented()) {\n          return null;\n        }\n        const range = setupOffscreenSelection(elm, e.targetClone);\n        const nodeElm = SugarElement.fromDom(elm);\n        each$e(descendants(SugarElement.fromDom(editor.getBody()), `*[${ elementSelectionAttr }]`), elm => {\n          if (!eq(nodeElm, elm)) {\n            remove$b(elm, elementSelectionAttr);\n          }\n        });\n        if (!dom.getAttrib(elm, elementSelectionAttr)) {\n          elm.setAttribute(elementSelectionAttr, '1');\n        }\n        selectedElement = elm;\n        hideFakeCaret();\n        return range;\n      };\n      const setElementSelection = (range, forward) => {\n        if (!range) {\n          return null;\n        }\n        if (range.collapsed) {\n          if (!isRangeInCaretContainer(range)) {\n            const dir = forward ? 1 : -1;\n            const caretPosition = getNormalizedRangeEndPoint(dir, rootNode, range);\n            const beforeNode = caretPosition.getNode(!forward);\n            if (isFakeCaretTarget(beforeNode)) {\n              return showCaret(dir, beforeNode, forward ? !caretPosition.isAtEnd() : false, false);\n            }\n            const afterNode = caretPosition.getNode(forward);\n            if (isFakeCaretTarget(afterNode)) {\n              return showCaret(dir, afterNode, forward ? false : !caretPosition.isAtEnd(), false);\n            }\n          }\n          return null;\n        }\n        let startContainer = range.startContainer;\n        let startOffset = range.startOffset;\n        const endOffset = range.endOffset;\n        if (isText$a(startContainer) && startOffset === 0 && isContentEditableFalse(startContainer.parentNode)) {\n          startContainer = startContainer.parentNode;\n          startOffset = dom.nodeIndex(startContainer);\n          startContainer = startContainer.parentNode;\n        }\n        if (!isElement$6(startContainer)) {\n          return null;\n        }\n        if (endOffset === startOffset + 1 && startContainer === range.endContainer) {\n          const node = startContainer.childNodes[startOffset];\n          if (isFakeSelectionTargetElement(node)) {\n            return selectElement(node);\n          }\n        }\n        return null;\n      };\n      const removeElementSelection = () => {\n        if (selectedElement) {\n          selectedElement.removeAttribute(elementSelectionAttr);\n        }\n        descendant(SugarElement.fromDom(editor.getBody()), '#' + realSelectionId).each(remove$6);\n        selectedElement = null;\n      };\n      const destroy = () => {\n        fakeCaret.destroy();\n        selectedElement = null;\n      };\n      const hideFakeCaret = () => {\n        fakeCaret.hide();\n      };\n      if (!isRtc(editor)) {\n        registerEvents();\n      }\n      return {\n        showCaret,\n        showBlockCaretContainer,\n        hideFakeCaret,\n        destroy\n      };\n    };\n\n    const getNormalizedTextOffset = (container, offset) => {\n      let normalizedOffset = offset;\n      for (let node = container.previousSibling; isText$a(node); node = node.previousSibling) {\n        normalizedOffset += node.data.length;\n      }\n      return normalizedOffset;\n    };\n    const generatePath = (dom, root, node, offset, normalized) => {\n      if (isText$a(node) && (offset < 0 || offset > node.data.length)) {\n        return [];\n      }\n      const p = normalized && isText$a(node) ? [getNormalizedTextOffset(node, offset)] : [offset];\n      let current = node;\n      while (current !== root && current.parentNode) {\n        p.push(dom.nodeIndex(current, normalized));\n        current = current.parentNode;\n      }\n      return current === root ? p.reverse() : [];\n    };\n    const generatePathRange = (dom, root, startNode, startOffset, endNode, endOffset, normalized = false) => {\n      const start = generatePath(dom, root, startNode, startOffset, normalized);\n      const end = generatePath(dom, root, endNode, endOffset, normalized);\n      return {\n        start,\n        end\n      };\n    };\n    const resolvePath = (root, path) => {\n      const nodePath = path.slice();\n      const offset = nodePath.pop();\n      if (!isNumber(offset)) {\n        return Optional.none();\n      } else {\n        const resolvedNode = foldl(nodePath, (optNode, index) => optNode.bind(node => Optional.from(node.childNodes[index])), Optional.some(root));\n        return resolvedNode.bind(node => {\n          if (isText$a(node) && (offset < 0 || offset > node.data.length)) {\n            return Optional.none();\n          } else {\n            return Optional.some({\n              node,\n              offset\n            });\n          }\n        });\n      }\n    };\n    const resolvePathRange = (root, range) => resolvePath(root, range.start).bind(({\n      node: startNode,\n      offset: startOffset\n    }) => resolvePath(root, range.end).map(({\n      node: endNode,\n      offset: endOffset\n    }) => {\n      const rng = document.createRange();\n      rng.setStart(startNode, startOffset);\n      rng.setEnd(endNode, endOffset);\n      return rng;\n    }));\n    const generatePathRangeFromRange = (dom, root, range, normalized = false) => generatePathRange(dom, root, range.startContainer, range.startOffset, range.endContainer, range.endOffset, normalized);\n\n    const cleanEmptyNodes = (dom, node, isRoot) => {\n      if (node && dom.isEmpty(node) && !isRoot(node)) {\n        const parent = node.parentNode;\n        dom.remove(node);\n        cleanEmptyNodes(dom, parent, isRoot);\n      }\n    };\n    const deleteRng = (dom, rng, isRoot, clean = true) => {\n      const startParent = rng.startContainer.parentNode;\n      const endParent = rng.endContainer.parentNode;\n      rng.deleteContents();\n      if (clean && !isRoot(rng.startContainer)) {\n        if (isText$a(rng.startContainer) && rng.startContainer.data.length === 0) {\n          dom.remove(rng.startContainer);\n        }\n        if (isText$a(rng.endContainer) && rng.endContainer.data.length === 0) {\n          dom.remove(rng.endContainer);\n        }\n        cleanEmptyNodes(dom, startParent, isRoot);\n        if (startParent !== endParent) {\n          cleanEmptyNodes(dom, endParent, isRoot);\n        }\n      }\n    };\n    const getParentBlock = (editor, rng) => Optional.from(editor.dom.getParent(rng.startContainer, editor.dom.isBlock));\n    const resolveFromDynamicPatterns = (patternSet, block, beforeText) => {\n      const dynamicPatterns = patternSet.dynamicPatternsLookup({\n        text: beforeText,\n        block\n      });\n      return {\n        ...patternSet,\n        blockPatterns: getBlockPatterns(dynamicPatterns).concat(patternSet.blockPatterns),\n        inlinePatterns: getInlinePatterns(dynamicPatterns).concat(patternSet.inlinePatterns)\n      };\n    };\n    const getBeforeText = (dom, block, node, offset) => {\n      const rng = dom.createRng();\n      rng.setStart(block, 0);\n      rng.setEnd(node, offset);\n      return rng.toString();\n    };\n\n    const stripPattern = (dom, block, pattern) => {\n      const firstTextNode = textAfter(block, 0, block);\n      firstTextNode.each(spot => {\n        const node = spot.container;\n        scanRight(node, pattern.start.length, block).each(end => {\n          const rng = dom.createRng();\n          rng.setStart(node, 0);\n          rng.setEnd(end.container, end.offset);\n          deleteRng(dom, rng, e => e === block);\n        });\n      });\n    };\n    const applyPattern$1 = (editor, match) => {\n      const dom = editor.dom;\n      const pattern = match.pattern;\n      const rng = resolvePathRange(dom.getRoot(), match.range).getOrDie('Unable to resolve path range');\n      const isBlockFormatName = (name, formatter) => {\n        const formatSet = formatter.get(name);\n        return isArray$1(formatSet) && head(formatSet).exists(format => has$2(format, 'block'));\n      };\n      getParentBlock(editor, rng).each(block => {\n        if (pattern.type === 'block-format') {\n          if (isBlockFormatName(pattern.format, editor.formatter)) {\n            editor.undoManager.transact(() => {\n              stripPattern(editor.dom, block, pattern);\n              editor.formatter.apply(pattern.format);\n            });\n          }\n        } else if (pattern.type === 'block-command') {\n          editor.undoManager.transact(() => {\n            stripPattern(editor.dom, block, pattern);\n            editor.execCommand(pattern.cmd, false, pattern.value);\n          });\n        }\n      });\n      return true;\n    };\n    const sortPatterns = patterns => sort(patterns, (a, b) => b.start.length - a.start.length);\n    const findPattern$1 = (patterns, text) => {\n      const sortedPatterns = sortPatterns(patterns);\n      const nuText = text.replace(nbsp, ' ');\n      return find$2(sortedPatterns, pattern => text.indexOf(pattern.start) === 0 || nuText.indexOf(pattern.start) === 0);\n    };\n    const findPatterns$1 = (editor, block, patternSet, normalizedMatches) => {\n      var _a;\n      const dom = editor.dom;\n      const forcedRootBlock = getForcedRootBlock(editor);\n      if (!dom.is(block, forcedRootBlock)) {\n        return [];\n      }\n      const blockText = (_a = block.textContent) !== null && _a !== void 0 ? _a : '';\n      return findPattern$1(patternSet.blockPatterns, blockText).map(pattern => {\n        if (Tools.trim(blockText).length === pattern.start.length) {\n          return [];\n        }\n        return [{\n            pattern,\n            range: generatePathRange(dom, dom.getRoot(), block, 0, block, 0, normalizedMatches)\n          }];\n      }).getOr([]);\n    };\n    const applyMatches$1 = (editor, matches) => {\n      if (matches.length === 0) {\n        return;\n      }\n      const bookmark = editor.selection.getBookmark();\n      each$e(matches, match => applyPattern$1(editor, match));\n      editor.selection.moveToBookmark(bookmark);\n    };\n\n    const newMarker = (dom, id) => dom.create('span', {\n      'data-mce-type': 'bookmark',\n      id\n    });\n    const rangeFromMarker = (dom, marker) => {\n      const rng = dom.createRng();\n      rng.setStartAfter(marker.start);\n      rng.setEndBefore(marker.end);\n      return rng;\n    };\n    const createMarker = (dom, markerPrefix, pathRange) => {\n      const rng = resolvePathRange(dom.getRoot(), pathRange).getOrDie('Unable to resolve path range');\n      const startNode = rng.startContainer;\n      const endNode = rng.endContainer;\n      const textEnd = rng.endOffset === 0 ? endNode : endNode.splitText(rng.endOffset);\n      const textStart = rng.startOffset === 0 ? startNode : startNode.splitText(rng.startOffset);\n      const startParentNode = textStart.parentNode;\n      const endParentNode = textEnd.parentNode;\n      return {\n        prefix: markerPrefix,\n        end: endParentNode.insertBefore(newMarker(dom, markerPrefix + '-end'), textEnd),\n        start: startParentNode.insertBefore(newMarker(dom, markerPrefix + '-start'), textStart)\n      };\n    };\n    const removeMarker = (dom, marker, isRoot) => {\n      cleanEmptyNodes(dom, dom.get(marker.prefix + '-end'), isRoot);\n      cleanEmptyNodes(dom, dom.get(marker.prefix + '-start'), isRoot);\n    };\n\n    const isReplacementPattern = pattern => pattern.start.length === 0;\n    const matchesPattern = patternContent => (element, offset) => {\n      const text = element.data;\n      const searchText = text.substring(0, offset);\n      const startEndIndex = searchText.lastIndexOf(patternContent.charAt(patternContent.length - 1));\n      const startIndex = searchText.lastIndexOf(patternContent);\n      if (startIndex !== -1) {\n        return startIndex + patternContent.length;\n      } else if (startEndIndex !== -1) {\n        return startEndIndex + 1;\n      } else {\n        return -1;\n      }\n    };\n    const findPatternStartFromSpot = (dom, pattern, block, spot) => {\n      const startPattern = pattern.start;\n      const startSpot = repeatLeft(dom, spot.container, spot.offset, matchesPattern(startPattern), block);\n      return startSpot.bind(spot => {\n        if (spot.offset >= startPattern.length) {\n          const rng = dom.createRng();\n          rng.setStart(spot.container, spot.offset - startPattern.length);\n          rng.setEnd(spot.container, spot.offset);\n          return Optional.some(rng);\n        } else {\n          const offset = spot.offset - startPattern.length;\n          return scanLeft(spot.container, offset, block).map(nextSpot => {\n            const rng = dom.createRng();\n            rng.setStart(nextSpot.container, nextSpot.offset);\n            rng.setEnd(spot.container, spot.offset);\n            return rng;\n          }).filter(rng => rng.toString() === startPattern).orThunk(() => findPatternStartFromSpot(dom, pattern, block, point(spot.container, 0)));\n        }\n      });\n    };\n    const findPatternStart = (dom, pattern, node, offset, block, requireGap = false) => {\n      if (pattern.start.length === 0 && !requireGap) {\n        const rng = dom.createRng();\n        rng.setStart(node, offset);\n        rng.setEnd(node, offset);\n        return Optional.some(rng);\n      }\n      return textBefore(node, offset, block).bind(spot => {\n        const start = findPatternStartFromSpot(dom, pattern, block, spot);\n        return start.bind(startRange => {\n          var _a;\n          if (requireGap) {\n            if (startRange.endContainer === spot.container && startRange.endOffset === spot.offset) {\n              return Optional.none();\n            } else if (spot.offset === 0 && ((_a = startRange.endContainer.textContent) === null || _a === void 0 ? void 0 : _a.length) === startRange.endOffset) {\n              return Optional.none();\n            }\n          }\n          return Optional.some(startRange);\n        });\n      });\n    };\n    const findPattern = (editor, block, details, normalizedMatches) => {\n      const dom = editor.dom;\n      const root = dom.getRoot();\n      const pattern = details.pattern;\n      const endNode = details.position.container;\n      const endOffset = details.position.offset;\n      return scanLeft(endNode, endOffset - details.pattern.end.length, block).bind(spot => {\n        const endPathRng = generatePathRange(dom, root, spot.container, spot.offset, endNode, endOffset, normalizedMatches);\n        if (isReplacementPattern(pattern)) {\n          return Optional.some({\n            matches: [{\n                pattern,\n                startRng: endPathRng,\n                endRng: endPathRng\n              }],\n            position: spot\n          });\n        } else {\n          const resultsOpt = findPatternsRec(editor, details.remainingPatterns, spot.container, spot.offset, block, normalizedMatches);\n          const results = resultsOpt.getOr({\n            matches: [],\n            position: spot\n          });\n          const pos = results.position;\n          const start = findPatternStart(dom, pattern, pos.container, pos.offset, block, resultsOpt.isNone());\n          return start.map(startRng => {\n            const startPathRng = generatePathRangeFromRange(dom, root, startRng, normalizedMatches);\n            return {\n              matches: results.matches.concat([{\n                  pattern,\n                  startRng: startPathRng,\n                  endRng: endPathRng\n                }]),\n              position: point(startRng.startContainer, startRng.startOffset)\n            };\n          });\n        }\n      });\n    };\n    const findPatternsRec = (editor, patterns, node, offset, block, normalizedMatches) => {\n      const dom = editor.dom;\n      return textBefore(node, offset, dom.getRoot()).bind(endSpot => {\n        const text = getBeforeText(dom, block, node, offset);\n        for (let i = 0; i < patterns.length; i++) {\n          const pattern = patterns[i];\n          if (!endsWith(text, pattern.end)) {\n            continue;\n          }\n          const patternsWithoutCurrent = patterns.slice();\n          patternsWithoutCurrent.splice(i, 1);\n          const result = findPattern(editor, block, {\n            pattern,\n            remainingPatterns: patternsWithoutCurrent,\n            position: endSpot\n          }, normalizedMatches);\n          if (result.isSome()) {\n            return result;\n          }\n        }\n        return Optional.none();\n      });\n    };\n    const applyPattern = (editor, pattern, patternRange) => {\n      editor.selection.setRng(patternRange);\n      if (pattern.type === 'inline-format') {\n        each$e(pattern.format, format => {\n          editor.formatter.apply(format);\n        });\n      } else {\n        editor.execCommand(pattern.cmd, false, pattern.value);\n      }\n    };\n    const applyReplacementPattern = (editor, pattern, marker, isRoot) => {\n      const markerRange = rangeFromMarker(editor.dom, marker);\n      deleteRng(editor.dom, markerRange, isRoot);\n      applyPattern(editor, pattern, markerRange);\n    };\n    const applyPatternWithContent = (editor, pattern, startMarker, endMarker, isRoot) => {\n      const dom = editor.dom;\n      const markerEndRange = rangeFromMarker(dom, endMarker);\n      const markerStartRange = rangeFromMarker(dom, startMarker);\n      deleteRng(dom, markerStartRange, isRoot);\n      deleteRng(dom, markerEndRange, isRoot);\n      const patternMarker = {\n        prefix: startMarker.prefix,\n        start: startMarker.end,\n        end: endMarker.start\n      };\n      const patternRange = rangeFromMarker(dom, patternMarker);\n      applyPattern(editor, pattern, patternRange);\n    };\n    const addMarkers = (dom, matches) => {\n      const markerPrefix = generate$1('mce_textpattern');\n      const matchesWithEnds = foldr(matches, (acc, match) => {\n        const endMarker = createMarker(dom, markerPrefix + `_end${ acc.length }`, match.endRng);\n        return acc.concat([{\n            ...match,\n            endMarker\n          }]);\n      }, []);\n      return foldr(matchesWithEnds, (acc, match) => {\n        const idx = matchesWithEnds.length - acc.length - 1;\n        const startMarker = isReplacementPattern(match.pattern) ? match.endMarker : createMarker(dom, markerPrefix + `_start${ idx }`, match.startRng);\n        return acc.concat([{\n            ...match,\n            startMarker\n          }]);\n      }, []);\n    };\n    const findPatterns = (editor, block, node, offset, patternSet, normalizedMatches) => findPatternsRec(editor, patternSet.inlinePatterns, node, offset, block, normalizedMatches).fold(() => [], result => result.matches);\n    const applyMatches = (editor, matches) => {\n      if (matches.length === 0) {\n        return;\n      }\n      const dom = editor.dom;\n      const bookmark = editor.selection.getBookmark();\n      const matchesWithMarkers = addMarkers(dom, matches);\n      each$e(matchesWithMarkers, match => {\n        const block = dom.getParent(match.startMarker.start, dom.isBlock);\n        const isRoot = node => node === block;\n        if (isReplacementPattern(match.pattern)) {\n          applyReplacementPattern(editor, match.pattern, match.endMarker, isRoot);\n        } else {\n          applyPatternWithContent(editor, match.pattern, match.startMarker, match.endMarker, isRoot);\n        }\n        removeMarker(dom, match.endMarker, isRoot);\n        removeMarker(dom, match.startMarker, isRoot);\n      });\n      editor.selection.moveToBookmark(bookmark);\n    };\n\n    const handleEnter = (editor, patternSet) => {\n      const rng = editor.selection.getRng();\n      return getParentBlock(editor, rng).map(block => {\n        var _a;\n        const offset = Math.max(0, rng.startOffset);\n        const dynamicPatternSet = resolveFromDynamicPatterns(patternSet, block, (_a = block.textContent) !== null && _a !== void 0 ? _a : '');\n        const inlineMatches = findPatterns(editor, block, rng.startContainer, offset, dynamicPatternSet, true);\n        const blockMatches = findPatterns$1(editor, block, dynamicPatternSet, true);\n        if (blockMatches.length > 0 || inlineMatches.length > 0) {\n          editor.undoManager.add();\n          editor.undoManager.extra(() => {\n            editor.execCommand('mceInsertNewLine');\n          }, () => {\n            editor.insertContent(zeroWidth);\n            applyMatches(editor, inlineMatches);\n            applyMatches$1(editor, blockMatches);\n            const range = editor.selection.getRng();\n            const spot = textBefore(range.startContainer, range.startOffset, editor.dom.getRoot());\n            editor.execCommand('mceInsertNewLine');\n            spot.each(s => {\n              const node = s.container;\n              if (node.data.charAt(s.offset - 1) === zeroWidth) {\n                node.deleteData(s.offset - 1, 1);\n                cleanEmptyNodes(editor.dom, node.parentNode, e => e === editor.dom.getRoot());\n              }\n            });\n          });\n          return true;\n        }\n        return false;\n      }).getOr(false);\n    };\n    const handleInlineKey = (editor, patternSet) => {\n      const rng = editor.selection.getRng();\n      getParentBlock(editor, rng).map(block => {\n        const offset = Math.max(0, rng.startOffset - 1);\n        const beforeText = getBeforeText(editor.dom, block, rng.startContainer, offset);\n        const dynamicPatternSet = resolveFromDynamicPatterns(patternSet, block, beforeText);\n        const inlineMatches = findPatterns(editor, block, rng.startContainer, offset, dynamicPatternSet, false);\n        if (inlineMatches.length > 0) {\n          editor.undoManager.transact(() => {\n            applyMatches(editor, inlineMatches);\n          });\n        }\n      });\n    };\n    const checkKeyEvent = (codes, event, predicate) => {\n      for (let i = 0; i < codes.length; i++) {\n        if (predicate(codes[i], event)) {\n          return true;\n        }\n      }\n      return false;\n    };\n    const checkKeyCode = (codes, event) => checkKeyEvent(codes, event, (code, event) => {\n      return code === event.keyCode && !VK.modifierPressed(event);\n    });\n    const checkCharCode = (chars, event) => checkKeyEvent(chars, event, (chr, event) => {\n      return chr.charCodeAt(0) === event.charCode;\n    });\n\n    const setup$2 = editor => {\n      const charCodes = [\n        ',',\n        '.',\n        ';',\n        ':',\n        '!',\n        '?'\n      ];\n      const keyCodes = [32];\n      const getPatternSet = () => createPatternSet(getTextPatterns(editor), getTextPatternsLookup(editor));\n      const hasDynamicPatterns = () => hasTextPatternsLookup(editor);\n      editor.on('keydown', e => {\n        if (e.keyCode === 13 && !VK.modifierPressed(e) && editor.selection.isCollapsed()) {\n          const patternSet = getPatternSet();\n          const hasPatterns = patternSet.inlinePatterns.length > 0 || patternSet.blockPatterns.length > 0 || hasDynamicPatterns();\n          if (hasPatterns && handleEnter(editor, patternSet)) {\n            e.preventDefault();\n          }\n        }\n      }, true);\n      const handleInlineTrigger = () => {\n        if (editor.selection.isCollapsed()) {\n          const patternSet = getPatternSet();\n          const hasPatterns = patternSet.inlinePatterns.length > 0 || hasDynamicPatterns();\n          if (hasPatterns) {\n            handleInlineKey(editor, patternSet);\n          }\n        }\n      };\n      editor.on('keyup', e => {\n        if (checkKeyCode(keyCodes, e)) {\n          handleInlineTrigger();\n        }\n      });\n      editor.on('keypress', e => {\n        if (checkCharCode(charCodes, e)) {\n          Delay.setEditorTimeout(editor, handleInlineTrigger);\n        }\n      });\n    };\n\n    const setup$1 = editor => {\n      setup$2(editor);\n    };\n\n    const Quirks = editor => {\n      const each = Tools.each;\n      const BACKSPACE = VK.BACKSPACE, DELETE = VK.DELETE, dom = editor.dom, selection = editor.selection, parser = editor.parser;\n      const browser = Env.browser;\n      const isGecko = browser.isFirefox();\n      const isWebKit = browser.isChromium() || browser.isSafari();\n      const isiOS = Env.deviceType.isiPhone() || Env.deviceType.isiPad();\n      const isMac = Env.os.isMacOS() || Env.os.isiOS();\n      const setEditorCommandState = (cmd, state) => {\n        try {\n          editor.getDoc().execCommand(cmd, false, String(state));\n        } catch (ex) {\n        }\n      };\n      const isDefaultPrevented = e => {\n        return e.isDefaultPrevented();\n      };\n      const emptyEditorWhenDeleting = () => {\n        const serializeRng = rng => {\n          const body = dom.create('body');\n          const contents = rng.cloneContents();\n          body.appendChild(contents);\n          return selection.serializer.serialize(body, { format: 'html' });\n        };\n        const allContentsSelected = rng => {\n          const selection = serializeRng(rng);\n          const allRng = dom.createRng();\n          allRng.selectNode(editor.getBody());\n          const allSelection = serializeRng(allRng);\n          return selection === allSelection;\n        };\n        editor.on('keydown', e => {\n          const keyCode = e.keyCode;\n          if (!isDefaultPrevented(e) && (keyCode === DELETE || keyCode === BACKSPACE)) {\n            const isCollapsed = editor.selection.isCollapsed();\n            const body = editor.getBody();\n            if (isCollapsed && !dom.isEmpty(body)) {\n              return;\n            }\n            if (!isCollapsed && !allContentsSelected(editor.selection.getRng())) {\n              return;\n            }\n            e.preventDefault();\n            editor.setContent('');\n            if (body.firstChild && dom.isBlock(body.firstChild)) {\n              editor.selection.setCursorLocation(body.firstChild, 0);\n            } else {\n              editor.selection.setCursorLocation(body, 0);\n            }\n            editor.nodeChanged();\n          }\n        });\n      };\n      const selectAll = () => {\n        editor.shortcuts.add('meta+a', null, 'SelectAll');\n      };\n      const documentElementEditingFocus = () => {\n        if (!editor.inline) {\n          dom.bind(editor.getDoc(), 'mousedown mouseup', e => {\n            let rng;\n            if (e.target === editor.getDoc().documentElement) {\n              rng = selection.getRng();\n              editor.getBody().focus();\n              if (e.type === 'mousedown') {\n                if (isCaretContainer$2(rng.startContainer)) {\n                  return;\n                }\n                selection.placeCaretAt(e.clientX, e.clientY);\n              } else {\n                selection.setRng(rng);\n              }\n            }\n          });\n        }\n      };\n      const removeHrOnBackspace = () => {\n        editor.on('keydown', e => {\n          if (!isDefaultPrevented(e) && e.keyCode === BACKSPACE) {\n            if (!editor.getBody().getElementsByTagName('hr').length) {\n              return;\n            }\n            if (selection.isCollapsed() && selection.getRng().startOffset === 0) {\n              const node = selection.getNode();\n              const previousSibling = node.previousSibling;\n              if (node.nodeName === 'HR') {\n                dom.remove(node);\n                e.preventDefault();\n                return;\n              }\n              if (previousSibling && previousSibling.nodeName && previousSibling.nodeName.toLowerCase() === 'hr') {\n                dom.remove(previousSibling);\n                e.preventDefault();\n              }\n            }\n          }\n        });\n      };\n      const focusBody = () => {\n        if (!Range.prototype.getClientRects) {\n          editor.on('mousedown', e => {\n            if (!isDefaultPrevented(e) && e.target.nodeName === 'HTML') {\n              const body = editor.getBody();\n              body.blur();\n              Delay.setEditorTimeout(editor, () => {\n                body.focus();\n              });\n            }\n          });\n        }\n      };\n      const selectControlElements = () => {\n        const visualAidsAnchorClass = getVisualAidsAnchorClass(editor);\n        editor.on('click', e => {\n          const target = e.target;\n          if (/^(IMG|HR)$/.test(target.nodeName) && dom.getContentEditableParent(target) !== 'false') {\n            e.preventDefault();\n            editor.selection.select(target);\n            editor.nodeChanged();\n          }\n          if (target.nodeName === 'A' && dom.hasClass(target, visualAidsAnchorClass) && target.childNodes.length === 0) {\n            e.preventDefault();\n            selection.select(target);\n          }\n        });\n      };\n      const removeStylesWhenDeletingAcrossBlockElements = () => {\n        const getAttributeApplyFunction = () => {\n          const template = dom.getAttribs(selection.getStart().cloneNode(false));\n          return () => {\n            const target = selection.getStart();\n            if (target !== editor.getBody()) {\n              dom.setAttrib(target, 'style', null);\n              each(template, attr => {\n                target.setAttributeNode(attr.cloneNode(true));\n              });\n            }\n          };\n        };\n        const isSelectionAcrossElements = () => {\n          return !selection.isCollapsed() && dom.getParent(selection.getStart(), dom.isBlock) !== dom.getParent(selection.getEnd(), dom.isBlock);\n        };\n        editor.on('keypress', e => {\n          let applyAttributes;\n          if (!isDefaultPrevented(e) && (e.keyCode === 8 || e.keyCode === 46) && isSelectionAcrossElements()) {\n            applyAttributes = getAttributeApplyFunction();\n            editor.getDoc().execCommand('delete', false);\n            applyAttributes();\n            e.preventDefault();\n            return false;\n          } else {\n            return true;\n          }\n        });\n        dom.bind(editor.getDoc(), 'cut', e => {\n          if (!isDefaultPrevented(e) && isSelectionAcrossElements()) {\n            const applyAttributes = getAttributeApplyFunction();\n            Delay.setEditorTimeout(editor, () => {\n              applyAttributes();\n            });\n          }\n        });\n      };\n      const disableBackspaceIntoATable = () => {\n        editor.on('keydown', e => {\n          if (!isDefaultPrevented(e) && e.keyCode === BACKSPACE) {\n            if (selection.isCollapsed() && selection.getRng().startOffset === 0) {\n              const previousSibling = selection.getNode().previousSibling;\n              if (previousSibling && previousSibling.nodeName && previousSibling.nodeName.toLowerCase() === 'table') {\n                e.preventDefault();\n                return false;\n              }\n            }\n          }\n          return true;\n        });\n      };\n      const removeBlockQuoteOnBackSpace = () => {\n        editor.on('keydown', e => {\n          if (isDefaultPrevented(e) || e.keyCode !== VK.BACKSPACE) {\n            return;\n          }\n          let rng = selection.getRng();\n          const container = rng.startContainer;\n          const offset = rng.startOffset;\n          const root = dom.getRoot();\n          let parent = container;\n          if (!rng.collapsed || offset !== 0) {\n            return;\n          }\n          while (parent.parentNode && parent.parentNode.firstChild === parent && parent.parentNode !== root) {\n            parent = parent.parentNode;\n          }\n          if (parent.nodeName === 'BLOCKQUOTE') {\n            editor.formatter.toggle('blockquote', undefined, parent);\n            rng = dom.createRng();\n            rng.setStart(container, 0);\n            rng.setEnd(container, 0);\n            selection.setRng(rng);\n          }\n        });\n      };\n      const setGeckoEditingOptions = () => {\n        const setOpts = () => {\n          setEditorCommandState('StyleWithCSS', false);\n          setEditorCommandState('enableInlineTableEditing', false);\n          if (!getObjectResizing(editor)) {\n            setEditorCommandState('enableObjectResizing', false);\n          }\n        };\n        if (!isReadOnly$1(editor)) {\n          editor.on('BeforeExecCommand mousedown', setOpts);\n        }\n      };\n      const addBrAfterLastLinks = () => {\n        const fixLinks = () => {\n          each(dom.select('a'), node => {\n            var _a;\n            let parentNode = node.parentNode;\n            const root = dom.getRoot();\n            if ((parentNode === null || parentNode === void 0 ? void 0 : parentNode.lastChild) === node) {\n              while (parentNode && !dom.isBlock(parentNode)) {\n                if (((_a = parentNode.parentNode) === null || _a === void 0 ? void 0 : _a.lastChild) !== parentNode || parentNode === root) {\n                  return;\n                }\n                parentNode = parentNode.parentNode;\n              }\n              dom.add(parentNode, 'br', { 'data-mce-bogus': 1 });\n            }\n          });\n        };\n        editor.on('SetContent ExecCommand', e => {\n          if (e.type === 'setcontent' || e.command === 'mceInsertLink') {\n            fixLinks();\n          }\n        });\n      };\n      const setDefaultBlockType = () => {\n        editor.on('init', () => {\n          setEditorCommandState('DefaultParagraphSeparator', getForcedRootBlock(editor));\n        });\n      };\n      const isAllContentSelected = editor => {\n        const body = editor.getBody();\n        const rng = editor.selection.getRng();\n        return rng.startContainer === rng.endContainer && rng.startContainer === body && rng.startOffset === 0 && rng.endOffset === body.childNodes.length;\n      };\n      const normalizeSelection = () => {\n        editor.on('keyup focusin mouseup', e => {\n          if (!VK.modifierPressed(e) && !isAllContentSelected(editor)) {\n            selection.normalize();\n          }\n        }, true);\n      };\n      const showBrokenImageIcon = () => {\n        editor.contentStyles.push('img:-moz-broken {' + '-moz-force-broken-image-icon:1;' + 'min-width:24px;' + 'min-height:24px' + '}');\n      };\n      const restoreFocusOnKeyDown = () => {\n        if (!editor.inline) {\n          editor.on('keydown', () => {\n            if (document.activeElement === document.body) {\n              editor.getWin().focus();\n            }\n          });\n        }\n      };\n      const bodyHeight = () => {\n        if (!editor.inline) {\n          editor.contentStyles.push('body {min-height: 150px}');\n          editor.on('click', e => {\n            let rng;\n            if (e.target.nodeName === 'HTML') {\n              rng = editor.selection.getRng();\n              editor.getBody().focus();\n              editor.selection.setRng(rng);\n              editor.selection.normalize();\n              editor.nodeChanged();\n            }\n          });\n        }\n      };\n      const blockCmdArrowNavigation = () => {\n        if (isMac) {\n          editor.on('keydown', e => {\n            if (VK.metaKeyPressed(e) && !e.shiftKey && (e.keyCode === 37 || e.keyCode === 39)) {\n              e.preventDefault();\n              const selection = editor.selection.getSel();\n              selection.modify('move', e.keyCode === 37 ? 'backward' : 'forward', 'lineboundary');\n            }\n          });\n        }\n      };\n      const tapLinksAndImages = () => {\n        editor.on('click', e => {\n          let elm = e.target;\n          do {\n            if (elm.tagName === 'A') {\n              e.preventDefault();\n              return;\n            }\n          } while (elm = elm.parentNode);\n        });\n        editor.contentStyles.push('.mce-content-body {-webkit-touch-callout: none}');\n      };\n      const blockFormSubmitInsideEditor = () => {\n        editor.on('init', () => {\n          editor.dom.bind(editor.getBody(), 'submit', e => {\n            e.preventDefault();\n          });\n        });\n      };\n      const removeAppleInterchangeBrs = () => {\n        parser.addNodeFilter('br', nodes => {\n          let i = nodes.length;\n          while (i--) {\n            if (nodes[i].attr('class') === 'Apple-interchange-newline') {\n              nodes[i].remove();\n            }\n          }\n        });\n      };\n      const refreshContentEditable = noop;\n      const isHidden = () => {\n        if (!isGecko || editor.removed) {\n          return false;\n        }\n        const sel = editor.selection.getSel();\n        return !sel || !sel.rangeCount || sel.rangeCount === 0;\n      };\n      const setupRtc = () => {\n        if (isWebKit) {\n          documentElementEditingFocus();\n          selectControlElements();\n          blockFormSubmitInsideEditor();\n          selectAll();\n          if (isiOS) {\n            restoreFocusOnKeyDown();\n            bodyHeight();\n            tapLinksAndImages();\n          }\n        }\n        if (isGecko) {\n          focusBody();\n          setGeckoEditingOptions();\n          showBrokenImageIcon();\n          blockCmdArrowNavigation();\n        }\n      };\n      const setup = () => {\n        removeBlockQuoteOnBackSpace();\n        emptyEditorWhenDeleting();\n        if (!Env.windowsPhone) {\n          normalizeSelection();\n        }\n        if (isWebKit) {\n          documentElementEditingFocus();\n          selectControlElements();\n          setDefaultBlockType();\n          blockFormSubmitInsideEditor();\n          disableBackspaceIntoATable();\n          removeAppleInterchangeBrs();\n          if (isiOS) {\n            restoreFocusOnKeyDown();\n            bodyHeight();\n            tapLinksAndImages();\n          } else {\n            selectAll();\n          }\n        }\n        if (isGecko) {\n          removeHrOnBackspace();\n          focusBody();\n          removeStylesWhenDeletingAcrossBlockElements();\n          setGeckoEditingOptions();\n          addBrAfterLastLinks();\n          showBrokenImageIcon();\n          blockCmdArrowNavigation();\n          disableBackspaceIntoATable();\n        }\n      };\n      if (isRtc(editor)) {\n        setupRtc();\n      } else {\n        setup();\n      }\n      return {\n        refreshContentEditable,\n        isHidden\n      };\n    };\n\n    const DOM$6 = DOMUtils.DOM;\n    const appendStyle = (editor, text) => {\n      const body = SugarElement.fromDom(editor.getBody());\n      const container = getStyleContainer(getRootNode(body));\n      const style = SugarElement.fromTag('style');\n      set$2(style, 'type', 'text/css');\n      append$1(style, SugarElement.fromText(text));\n      append$1(container, style);\n      editor.on('remove', () => {\n        remove$6(style);\n      });\n    };\n    const getRootName = editor => editor.inline ? editor.getElement().nodeName.toLowerCase() : undefined;\n    const removeUndefined = obj => filter$4(obj, v => isUndefined(v) === false);\n    const mkParserSettings = editor => {\n      const getOption = editor.options.get;\n      const blobCache = editor.editorUpload.blobCache;\n      return removeUndefined({\n        allow_conditional_comments: getOption('allow_conditional_comments'),\n        allow_html_data_urls: getOption('allow_html_data_urls'),\n        allow_svg_data_urls: getOption('allow_svg_data_urls'),\n        allow_html_in_named_anchor: getOption('allow_html_in_named_anchor'),\n        allow_script_urls: getOption('allow_script_urls'),\n        allow_unsafe_link_target: getOption('allow_unsafe_link_target'),\n        convert_fonts_to_spans: getOption('convert_fonts_to_spans'),\n        fix_list_elements: getOption('fix_list_elements'),\n        font_size_legacy_values: getOption('font_size_legacy_values'),\n        forced_root_block: getOption('forced_root_block'),\n        forced_root_block_attrs: getOption('forced_root_block_attrs'),\n        preserve_cdata: getOption('preserve_cdata'),\n        remove_trailing_brs: getOption('remove_trailing_brs'),\n        inline_styles: getOption('inline_styles'),\n        root_name: getRootName(editor),\n        validate: true,\n        blob_cache: blobCache,\n        document: editor.getDoc()\n      });\n    };\n    const mkSchemaSettings = editor => {\n      const getOption = editor.options.get;\n      return removeUndefined({\n        custom_elements: getOption('custom_elements'),\n        extended_valid_elements: getOption('extended_valid_elements'),\n        invalid_elements: getOption('invalid_elements'),\n        invalid_styles: getOption('invalid_styles'),\n        schema: getOption('schema'),\n        valid_children: getOption('valid_children'),\n        valid_classes: getOption('valid_classes'),\n        valid_elements: getOption('valid_elements'),\n        valid_styles: getOption('valid_styles'),\n        verify_html: getOption('verify_html'),\n        padd_empty_block_inline_children: getOption('format_empty_lines')\n      });\n    };\n    const mkSerializerSettings = editor => {\n      const getOption = editor.options.get;\n      return {\n        ...mkParserSettings(editor),\n        ...mkSchemaSettings(editor),\n        ...removeUndefined({\n          url_converter: getOption('url_converter'),\n          url_converter_scope: getOption('url_converter_scope'),\n          element_format: getOption('element_format'),\n          entities: getOption('entities'),\n          entity_encoding: getOption('entity_encoding'),\n          indent: getOption('indent'),\n          indent_after: getOption('indent_after'),\n          indent_before: getOption('indent_before')\n        })\n      };\n    };\n    const createParser = editor => {\n      const parser = DomParser(mkParserSettings(editor), editor.schema);\n      parser.addAttributeFilter('src,href,style,tabindex', (nodes, name) => {\n        const dom = editor.dom;\n        const internalName = 'data-mce-' + name;\n        let i = nodes.length;\n        while (i--) {\n          const node = nodes[i];\n          let value = node.attr(name);\n          if (value && !node.attr(internalName)) {\n            if (value.indexOf('data:') === 0 || value.indexOf('blob:') === 0) {\n              continue;\n            }\n            if (name === 'style') {\n              value = dom.serializeStyle(dom.parseStyle(value), node.name);\n              if (!value.length) {\n                value = null;\n              }\n              node.attr(internalName, value);\n              node.attr(name, value);\n            } else if (name === 'tabindex') {\n              node.attr(internalName, value);\n              node.attr(name, null);\n            } else {\n              node.attr(internalName, editor.convertURL(value, name, node.name));\n            }\n          }\n        }\n      });\n      parser.addNodeFilter('script', nodes => {\n        let i = nodes.length;\n        while (i--) {\n          const node = nodes[i];\n          const type = node.attr('type') || 'no/type';\n          if (type.indexOf('mce-') !== 0) {\n            node.attr('type', 'mce-' + type);\n          }\n        }\n      });\n      if (shouldPreserveCData(editor)) {\n        parser.addNodeFilter('#cdata', nodes => {\n          var _a;\n          let i = nodes.length;\n          while (i--) {\n            const node = nodes[i];\n            node.type = 8;\n            node.name = '#comment';\n            node.value = '[CDATA[' + editor.dom.encode((_a = node.value) !== null && _a !== void 0 ? _a : '') + ']]';\n          }\n        });\n      }\n      parser.addNodeFilter('p,h1,h2,h3,h4,h5,h6,div', nodes => {\n        let i = nodes.length;\n        const nonEmptyElements = editor.schema.getNonEmptyElements();\n        while (i--) {\n          const node = nodes[i];\n          if (node.isEmpty(nonEmptyElements) && node.getAll('br').length === 0) {\n            node.append(new AstNode('br', 1));\n          }\n        }\n      });\n      return parser;\n    };\n    const autoFocus = editor => {\n      const autoFocus = getAutoFocus(editor);\n      if (autoFocus) {\n        Delay.setEditorTimeout(editor, () => {\n          let focusEditor;\n          if (autoFocus === true) {\n            focusEditor = editor;\n          } else {\n            focusEditor = editor.editorManager.get(autoFocus);\n          }\n          if (focusEditor && !focusEditor.destroyed) {\n            focusEditor.focus();\n            focusEditor.selection.scrollIntoView();\n          }\n        }, 100);\n      }\n    };\n    const moveSelectionToFirstCaretPosition = editor => {\n      const root = editor.dom.getRoot();\n      if (!editor.inline && (!hasAnyRanges(editor) || editor.selection.getStart(true) === root)) {\n        firstPositionIn(root).each(pos => {\n          const node = pos.getNode();\n          const caretPos = isTable$2(node) ? firstPositionIn(node).getOr(pos) : pos;\n          editor.selection.setRng(caretPos.toRange());\n        });\n      }\n    };\n    const initEditor = editor => {\n      editor.bindPendingEventDelegates();\n      editor.initialized = true;\n      fireInit(editor);\n      editor.focus(true);\n      moveSelectionToFirstCaretPosition(editor);\n      editor.nodeChanged({ initial: true });\n      const initInstanceCallback = getInitInstanceCallback(editor);\n      if (isFunction(initInstanceCallback)) {\n        initInstanceCallback.call(editor, editor);\n      }\n      autoFocus(editor);\n    };\n    const getStyleSheetLoader$1 = editor => editor.inline ? editor.ui.styleSheetLoader : editor.dom.styleSheetLoader;\n    const makeStylesheetLoadingPromises = (editor, css, framedFonts) => {\n      const promises = [getStyleSheetLoader$1(editor).loadAll(css)];\n      if (editor.inline) {\n        return promises;\n      } else {\n        return promises.concat([editor.ui.styleSheetLoader.loadAll(framedFonts)]);\n      }\n    };\n    const loadContentCss = editor => {\n      const styleSheetLoader = getStyleSheetLoader$1(editor);\n      const fontCss = getFontCss(editor);\n      const css = editor.contentCSS;\n      const removeCss = () => {\n        styleSheetLoader.unloadAll(css);\n        if (!editor.inline) {\n          editor.ui.styleSheetLoader.unloadAll(fontCss);\n        }\n      };\n      const loaded = () => {\n        if (editor.removed) {\n          removeCss();\n        } else {\n          editor.on('remove', removeCss);\n        }\n      };\n      if (editor.contentStyles.length > 0) {\n        let contentCssText = '';\n        Tools.each(editor.contentStyles, style => {\n          contentCssText += style + '\\r\\n';\n        });\n        editor.dom.addStyle(contentCssText);\n      }\n      const allStylesheets = Promise.all(makeStylesheetLoadingPromises(editor, css, fontCss)).then(loaded).catch(loaded);\n      const contentStyle = getContentStyle(editor);\n      if (contentStyle) {\n        appendStyle(editor, contentStyle);\n      }\n      return allStylesheets;\n    };\n    const preInit = editor => {\n      const doc = editor.getDoc(), body = editor.getBody();\n      firePreInit(editor);\n      if (!shouldBrowserSpellcheck(editor)) {\n        doc.body.spellcheck = false;\n        DOM$6.setAttrib(body, 'spellcheck', 'false');\n      }\n      editor.quirks = Quirks(editor);\n      firePostRender(editor);\n      const directionality = getDirectionality(editor);\n      if (directionality !== undefined) {\n        body.dir = directionality;\n      }\n      const protect = getProtect(editor);\n      if (protect) {\n        editor.on('BeforeSetContent', e => {\n          Tools.each(protect, pattern => {\n            e.content = e.content.replace(pattern, str => {\n              return '<!--mce:protected ' + escape(str) + '-->';\n            });\n          });\n        });\n      }\n      editor.on('SetContent', () => {\n        editor.addVisual(editor.getBody());\n      });\n      editor.on('compositionstart compositionend', e => {\n        editor.composing = e.type === 'compositionstart';\n      });\n    };\n    const loadInitialContent = editor => {\n      if (!isRtc(editor)) {\n        editor.load({\n          initial: true,\n          format: 'html'\n        });\n      }\n      editor.startContent = editor.getContent({ format: 'raw' });\n    };\n    const initEditorWithInitialContent = editor => {\n      if (editor.removed !== true) {\n        loadInitialContent(editor);\n        initEditor(editor);\n      }\n    };\n    const contentBodyLoaded = editor => {\n      const targetElm = editor.getElement();\n      let doc = editor.getDoc();\n      if (editor.inline) {\n        DOM$6.addClass(targetElm, 'mce-content-body');\n        editor.contentDocument = doc = document;\n        editor.contentWindow = window;\n        editor.bodyElement = targetElm;\n        editor.contentAreaContainer = targetElm;\n      }\n      const body = editor.getBody();\n      body.disabled = true;\n      editor.readonly = isReadOnly$1(editor);\n      if (!editor.readonly) {\n        if (editor.inline && DOM$6.getStyle(body, 'position', true) === 'static') {\n          body.style.position = 'relative';\n        }\n        body.contentEditable = 'true';\n      }\n      body.disabled = false;\n      editor.editorUpload = EditorUpload(editor);\n      editor.schema = Schema(mkSchemaSettings(editor));\n      editor.dom = DOMUtils(doc, {\n        keep_values: true,\n        url_converter: editor.convertURL,\n        url_converter_scope: editor,\n        update_styles: true,\n        root_element: editor.inline ? editor.getBody() : null,\n        collect: editor.inline,\n        schema: editor.schema,\n        contentCssCors: shouldUseContentCssCors(editor),\n        referrerPolicy: getReferrerPolicy(editor),\n        onSetAttrib: e => {\n          editor.dispatch('SetAttrib', e);\n        }\n      });\n      editor.parser = createParser(editor);\n      editor.serializer = DomSerializer(mkSerializerSettings(editor), editor);\n      editor.selection = EditorSelection(editor.dom, editor.getWin(), editor.serializer, editor);\n      editor.annotator = Annotator(editor);\n      editor.formatter = Formatter(editor);\n      editor.undoManager = UndoManager(editor);\n      editor._nodeChangeDispatcher = new NodeChange(editor);\n      editor._selectionOverrides = SelectionOverrides(editor);\n      setup$o(editor);\n      setup$6(editor);\n      setup$m(editor);\n      if (!isRtc(editor)) {\n        setup$5(editor);\n        setup$1(editor);\n      }\n      const caret = setup$b(editor);\n      setup$p(editor, caret);\n      setup$n(editor);\n      setup$q(editor);\n      setup$7(editor);\n      const setupRtcThunk = setup$s(editor);\n      preInit(editor);\n      setupRtcThunk.fold(() => {\n        loadContentCss(editor).then(() => initEditorWithInitialContent(editor));\n      }, setupRtc => {\n        editor.setProgressState(true);\n        loadContentCss(editor).then(() => {\n          setupRtc().then(_rtcMode => {\n            editor.setProgressState(false);\n            initEditorWithInitialContent(editor);\n            bindEvents(editor);\n          }, err => {\n            editor.notificationManager.open({\n              type: 'error',\n              text: String(err)\n            });\n            initEditorWithInitialContent(editor);\n            bindEvents(editor);\n          });\n        });\n      });\n    };\n    const initContentBody = (editor, skipWrite) => {\n      if (!editor.inline) {\n        editor.getElement().style.visibility = editor.orgVisibility;\n      }\n      if (!skipWrite && !editor.inline) {\n        const iframe = editor.iframeElement;\n        const binder = bind$1(SugarElement.fromDom(iframe), 'load', () => {\n          binder.unbind();\n          editor.contentDocument = iframe.contentDocument;\n          contentBodyLoaded(editor);\n        });\n        if (Env.browser.isFirefox()) {\n          const doc = editor.getDoc();\n          doc.open();\n          doc.write(editor.iframeHTML);\n          doc.close();\n        } else {\n          iframe.srcdoc = editor.iframeHTML;\n        }\n      } else {\n        contentBodyLoaded(editor);\n      }\n    };\n\n    const DOM$5 = DOMUtils.DOM;\n    const createIframeElement = (id, title, customAttrs, tabindex) => {\n      const iframe = SugarElement.fromTag('iframe');\n      tabindex.each(t => set$2(iframe, 'tabindex', t));\n      setAll$1(iframe, customAttrs);\n      setAll$1(iframe, {\n        id: id + '_ifr',\n        frameBorder: '0',\n        allowTransparency: 'true',\n        title\n      });\n      add$2(iframe, 'tox-edit-area__iframe');\n      return iframe;\n    };\n    const getIframeHtml = editor => {\n      let iframeHTML = getDocType(editor) + '<html><head>';\n      if (getDocumentBaseUrl(editor) !== editor.documentBaseUrl) {\n        iframeHTML += '<base href=\"' + editor.documentBaseURI.getURI() + '\" />';\n      }\n      iframeHTML += '<meta http-equiv=\"Content-Type\" content=\"text/html; charset=UTF-8\" />';\n      const bodyId = getBodyId(editor);\n      const bodyClass = getBodyClass(editor);\n      const translatedAriaText = editor.translate(getIframeAriaText(editor));\n      if (getContentSecurityPolicy(editor)) {\n        iframeHTML += '<meta http-equiv=\"Content-Security-Policy\" content=\"' + getContentSecurityPolicy(editor) + '\" />';\n      }\n      iframeHTML += '</head>' + `<body id=\"${ bodyId }\" class=\"mce-content-body ${ bodyClass }\" data-id=\"${ editor.id }\" aria-label=\"${ translatedAriaText }\">` + '<br>' + '</body></html>';\n      return iframeHTML;\n    };\n    const createIframe = (editor, boxInfo) => {\n      const iframeTitle = editor.translate('Rich Text Area');\n      const tabindex = getOpt(SugarElement.fromDom(editor.getElement()), 'tabindex').bind(toInt);\n      const ifr = createIframeElement(editor.id, iframeTitle, getIframeAttrs(editor), tabindex).dom;\n      ifr.onload = () => {\n        ifr.onload = null;\n        editor.dispatch('load');\n      };\n      editor.contentAreaContainer = boxInfo.iframeContainer;\n      editor.iframeElement = ifr;\n      editor.iframeHTML = getIframeHtml(editor);\n      DOM$5.add(boxInfo.iframeContainer, ifr);\n    };\n    const init$1 = (editor, boxInfo) => {\n      createIframe(editor, boxInfo);\n      if (boxInfo.editorContainer) {\n        boxInfo.editorContainer.style.display = editor.orgDisplay;\n        editor.hidden = DOM$5.isHidden(boxInfo.editorContainer);\n      }\n      editor.getElement().style.display = 'none';\n      DOM$5.setAttrib(editor.id, 'aria-hidden', 'true');\n      initContentBody(editor);\n    };\n\n    const DOM$4 = DOMUtils.DOM;\n    const initPlugin = (editor, initializedPlugins, plugin) => {\n      const Plugin = PluginManager.get(plugin);\n      const pluginUrl = PluginManager.urls[plugin] || editor.documentBaseUrl.replace(/\\/$/, '');\n      plugin = Tools.trim(plugin);\n      if (Plugin && Tools.inArray(initializedPlugins, plugin) === -1) {\n        if (editor.plugins[plugin]) {\n          return;\n        }\n        try {\n          const pluginInstance = Plugin(editor, pluginUrl) || {};\n          editor.plugins[plugin] = pluginInstance;\n          if (isFunction(pluginInstance.init)) {\n            pluginInstance.init(editor, pluginUrl);\n            initializedPlugins.push(plugin);\n          }\n        } catch (e) {\n          pluginInitError(editor, plugin, e);\n        }\n      }\n    };\n    const trimLegacyPrefix = name => {\n      return name.replace(/^\\-/, '');\n    };\n    const initPlugins = editor => {\n      const initializedPlugins = [];\n      each$e(getPlugins(editor), name => {\n        initPlugin(editor, initializedPlugins, trimLegacyPrefix(name));\n      });\n    };\n    const initIcons = editor => {\n      const iconPackName = Tools.trim(getIconPackName(editor));\n      const currentIcons = editor.ui.registry.getAll().icons;\n      const loadIcons = {\n        ...IconManager.get('default').icons,\n        ...IconManager.get(iconPackName).icons\n      };\n      each$d(loadIcons, (svgData, icon) => {\n        if (!has$2(currentIcons, icon)) {\n          editor.ui.registry.addIcon(icon, svgData);\n        }\n      });\n    };\n    const initTheme = editor => {\n      const theme = getTheme(editor);\n      if (isString(theme)) {\n        const Theme = ThemeManager.get(theme);\n        editor.theme = Theme(editor, ThemeManager.urls[theme]) || {};\n        if (isFunction(editor.theme.init)) {\n          editor.theme.init(editor, ThemeManager.urls[theme] || editor.documentBaseUrl.replace(/\\/$/, ''));\n        }\n      } else {\n        editor.theme = {};\n      }\n    };\n    const initModel = editor => {\n      const model = getModel(editor);\n      const Model = ModelManager.get(model);\n      editor.model = Model(editor, ModelManager.urls[model]);\n    };\n    const renderFromLoadedTheme = editor => {\n      const render = editor.theme.renderUI;\n      return render ? render() : renderThemeFalse(editor);\n    };\n    const renderFromThemeFunc = editor => {\n      const elm = editor.getElement();\n      const theme = getTheme(editor);\n      const info = theme(editor, elm);\n      if (info.editorContainer.nodeType) {\n        info.editorContainer.id = info.editorContainer.id || editor.id + '_parent';\n      }\n      if (info.iframeContainer && info.iframeContainer.nodeType) {\n        info.iframeContainer.id = info.iframeContainer.id || editor.id + '_iframecontainer';\n      }\n      info.height = info.iframeHeight ? info.iframeHeight : elm.offsetHeight;\n      return info;\n    };\n    const createThemeFalseResult = (element, iframe) => {\n      return {\n        editorContainer: element,\n        iframeContainer: iframe,\n        api: {}\n      };\n    };\n    const renderThemeFalseIframe = targetElement => {\n      const iframeContainer = DOM$4.create('div');\n      DOM$4.insertAfter(iframeContainer, targetElement);\n      return createThemeFalseResult(iframeContainer, iframeContainer);\n    };\n    const renderThemeFalse = editor => {\n      const targetElement = editor.getElement();\n      return editor.inline ? createThemeFalseResult(null) : renderThemeFalseIframe(targetElement);\n    };\n    const renderThemeUi = editor => {\n      const elm = editor.getElement();\n      editor.orgDisplay = elm.style.display;\n      if (isString(getTheme(editor))) {\n        return renderFromLoadedTheme(editor);\n      } else if (isFunction(getTheme(editor))) {\n        return renderFromThemeFunc(editor);\n      } else {\n        return renderThemeFalse(editor);\n      }\n    };\n    const augmentEditorUiApi = (editor, api) => {\n      const uiApiFacade = {\n        show: Optional.from(api.show).getOr(noop),\n        hide: Optional.from(api.hide).getOr(noop),\n        isEnabled: Optional.from(api.isEnabled).getOr(always),\n        setEnabled: state => {\n          if (!editor.mode.isReadOnly()) {\n            Optional.from(api.setEnabled).each(f => f(state));\n          }\n        }\n      };\n      editor.ui = {\n        ...editor.ui,\n        ...uiApiFacade\n      };\n    };\n    const init = editor => {\n      editor.dispatch('ScriptsLoaded');\n      initIcons(editor);\n      initTheme(editor);\n      initModel(editor);\n      initPlugins(editor);\n      const renderInfo = renderThemeUi(editor);\n      augmentEditorUiApi(editor, Optional.from(renderInfo.api).getOr({}));\n      editor.editorContainer = renderInfo.editorContainer;\n      appendContentCssFromSettings(editor);\n      if (editor.inline) {\n        initContentBody(editor);\n      } else {\n        init$1(editor, {\n          editorContainer: renderInfo.editorContainer,\n          iframeContainer: renderInfo.iframeContainer\n        });\n      }\n    };\n\n    const DOM$3 = DOMUtils.DOM;\n    const hasSkipLoadPrefix = name => name.charAt(0) === '-';\n    const loadLanguage = (scriptLoader, editor) => {\n      const languageCode = getLanguageCode(editor);\n      const languageUrl = getLanguageUrl(editor);\n      if (!I18n.hasCode(languageCode) && languageCode !== 'en') {\n        const url = isNotEmpty(languageUrl) ? languageUrl : `${ editor.editorManager.baseURL }/langs/${ languageCode }.js`;\n        scriptLoader.add(url).catch(() => {\n          languageLoadError(editor, url, languageCode);\n        });\n      }\n    };\n    const loadTheme = (editor, suffix) => {\n      const theme = getTheme(editor);\n      if (isString(theme) && !hasSkipLoadPrefix(theme) && !has$2(ThemeManager.urls, theme)) {\n        const themeUrl = getThemeUrl(editor);\n        const url = themeUrl ? editor.documentBaseURI.toAbsolute(themeUrl) : `themes/${ theme }/theme${ suffix }.js`;\n        ThemeManager.load(theme, url).catch(() => {\n          themeLoadError(editor, url, theme);\n        });\n      }\n    };\n    const loadModel = (editor, suffix) => {\n      const model = getModel(editor);\n      if (model !== 'plugin' && !has$2(ModelManager.urls, model)) {\n        const modelUrl = getModelUrl(editor);\n        const url = isString(modelUrl) ? editor.documentBaseURI.toAbsolute(modelUrl) : `models/${ model }/model${ suffix }.js`;\n        ModelManager.load(model, url).catch(() => {\n          modelLoadError(editor, url, model);\n        });\n      }\n    };\n    const getIconsUrlMetaFromUrl = editor => Optional.from(getIconsUrl(editor)).filter(isNotEmpty).map(url => ({\n      url,\n      name: Optional.none()\n    }));\n    const getIconsUrlMetaFromName = (editor, name, suffix) => Optional.from(name).filter(name => isNotEmpty(name) && !IconManager.has(name)).map(name => ({\n      url: `${ editor.editorManager.baseURL }/icons/${ name }/icons${ suffix }.js`,\n      name: Optional.some(name)\n    }));\n    const loadIcons = (scriptLoader, editor, suffix) => {\n      const defaultIconsUrl = getIconsUrlMetaFromName(editor, 'default', suffix);\n      const customIconsUrl = getIconsUrlMetaFromUrl(editor).orThunk(() => getIconsUrlMetaFromName(editor, getIconPackName(editor), ''));\n      each$e(cat([\n        defaultIconsUrl,\n        customIconsUrl\n      ]), urlMeta => {\n        scriptLoader.add(urlMeta.url).catch(() => {\n          iconsLoadError(editor, urlMeta.url, urlMeta.name.getOrUndefined());\n        });\n      });\n    };\n    const loadPlugins = (editor, suffix) => {\n      const loadPlugin = (name, url) => {\n        PluginManager.load(name, url).catch(() => {\n          pluginLoadError(editor, url, name);\n        });\n      };\n      each$d(getExternalPlugins$1(editor), (url, name) => {\n        loadPlugin(name, url);\n        editor.options.set('plugins', getPlugins(editor).concat(name));\n      });\n      each$e(getPlugins(editor), plugin => {\n        plugin = Tools.trim(plugin);\n        if (plugin && !PluginManager.urls[plugin] && !hasSkipLoadPrefix(plugin)) {\n          loadPlugin(plugin, `plugins/${ plugin }/plugin${ suffix }.js`);\n        }\n      });\n    };\n    const isThemeLoaded = editor => {\n      const theme = getTheme(editor);\n      return !isString(theme) || isNonNullable(ThemeManager.get(theme));\n    };\n    const isModelLoaded = editor => {\n      const model = getModel(editor);\n      return isNonNullable(ModelManager.get(model));\n    };\n    const loadScripts = (editor, suffix) => {\n      const scriptLoader = ScriptLoader.ScriptLoader;\n      const initEditor = () => {\n        if (!editor.removed && isThemeLoaded(editor) && isModelLoaded(editor)) {\n          init(editor);\n        }\n      };\n      loadTheme(editor, suffix);\n      loadModel(editor, suffix);\n      loadLanguage(scriptLoader, editor);\n      loadIcons(scriptLoader, editor, suffix);\n      loadPlugins(editor, suffix);\n      scriptLoader.loadQueue().then(initEditor, initEditor);\n    };\n    const getStyleSheetLoader = (element, editor) => instance.forElement(element, {\n      contentCssCors: hasContentCssCors(editor),\n      referrerPolicy: getReferrerPolicy(editor)\n    });\n    const render = editor => {\n      const id = editor.id;\n      I18n.setCode(getLanguageCode(editor));\n      const readyHandler = () => {\n        DOM$3.unbind(window, 'ready', readyHandler);\n        editor.render();\n      };\n      if (!EventUtils.Event.domLoaded) {\n        DOM$3.bind(window, 'ready', readyHandler);\n        return;\n      }\n      if (!editor.getElement()) {\n        return;\n      }\n      const element = SugarElement.fromDom(editor.getElement());\n      const snapshot = clone$4(element);\n      editor.on('remove', () => {\n        eachr(element.dom.attributes, attr => remove$b(element, attr.name));\n        setAll$1(element, snapshot);\n      });\n      editor.ui.styleSheetLoader = getStyleSheetLoader(element, editor);\n      if (!isInline(editor)) {\n        editor.orgVisibility = editor.getElement().style.visibility;\n        editor.getElement().style.visibility = 'hidden';\n      } else {\n        editor.inline = true;\n      }\n      const form = editor.getElement().form || DOM$3.getParent(id, 'form');\n      if (form) {\n        editor.formElement = form;\n        if (hasHiddenInput(editor) && !isTextareaOrInput(editor.getElement())) {\n          DOM$3.insertAfter(DOM$3.create('input', {\n            type: 'hidden',\n            name: id\n          }), id);\n          editor.hasHiddenInput = true;\n        }\n        editor.formEventDelegate = e => {\n          editor.dispatch(e.type, e);\n        };\n        DOM$3.bind(form, 'submit reset', editor.formEventDelegate);\n        editor.on('reset', () => {\n          editor.resetContent();\n        });\n        if (shouldPatchSubmit(editor) && !form.submit.nodeType && !form.submit.length && !form._mceOldSubmit) {\n          form._mceOldSubmit = form.submit;\n          form.submit = () => {\n            editor.editorManager.triggerSave();\n            editor.setDirty(false);\n            return form._mceOldSubmit(form);\n          };\n        }\n      }\n      editor.windowManager = WindowManager(editor);\n      editor.notificationManager = NotificationManager(editor);\n      if (isEncodingXml(editor)) {\n        editor.on('GetContent', e => {\n          if (e.save) {\n            e.content = DOM$3.encode(e.content);\n          }\n        });\n      }\n      if (shouldAddFormSubmitTrigger(editor)) {\n        editor.on('submit', () => {\n          if (editor.initialized) {\n            editor.save();\n          }\n        });\n      }\n      if (shouldAddUnloadTrigger(editor)) {\n        editor._beforeUnload = () => {\n          if (editor.initialized && !editor.destroyed && !editor.isHidden()) {\n            editor.save({\n              format: 'raw',\n              no_events: true,\n              set_dirty: false\n            });\n          }\n        };\n        editor.editorManager.on('BeforeUnload', editor._beforeUnload);\n      }\n      editor.editorManager.add(editor);\n      loadScripts(editor, editor.suffix);\n    };\n\n    const sectionResult = (sections, settings) => ({\n      sections: constant(sections),\n      options: constant(settings)\n    });\n    const deviceDetection = detect$2().deviceType;\n    const isPhone = deviceDetection.isPhone();\n    const isTablet = deviceDetection.isTablet();\n    const normalizePlugins = plugins => {\n      if (isNullable(plugins)) {\n        return [];\n      } else {\n        const pluginNames = isArray$1(plugins) ? plugins : plugins.split(/[ ,]/);\n        const trimmedPlugins = map$3(pluginNames, trim$3);\n        return filter$5(trimmedPlugins, isNotEmpty);\n      }\n    };\n    const extractSections = (keys, options) => {\n      const result = bifilter(options, (value, key) => {\n        return contains$2(keys, key);\n      });\n      return sectionResult(result.t, result.f);\n    };\n    const getSection = (sectionResult, name, defaults = {}) => {\n      const sections = sectionResult.sections();\n      const sectionOptions = get$a(sections, name).getOr({});\n      return Tools.extend({}, defaults, sectionOptions);\n    };\n    const hasSection = (sectionResult, name) => {\n      return has$2(sectionResult.sections(), name);\n    };\n    const getSectionConfig = (sectionResult, name) => {\n      return hasSection(sectionResult, name) ? sectionResult.sections()[name] : {};\n    };\n    const getMobileOverrideOptions = (mobileOptions, isPhone) => {\n      const defaultMobileOptions = {\n        table_grid: false,\n        object_resizing: false,\n        resize: false,\n        toolbar_mode: get$a(mobileOptions, 'toolbar_mode').getOr('scrolling'),\n        toolbar_sticky: false\n      };\n      const defaultPhoneOptions = { menubar: false };\n      return {\n        ...defaultMobileOptions,\n        ...isPhone ? defaultPhoneOptions : {}\n      };\n    };\n    const getExternalPlugins = (overrideOptions, options) => {\n      var _a;\n      const userDefinedExternalPlugins = (_a = options.external_plugins) !== null && _a !== void 0 ? _a : {};\n      if (overrideOptions && overrideOptions.external_plugins) {\n        return Tools.extend({}, overrideOptions.external_plugins, userDefinedExternalPlugins);\n      } else {\n        return userDefinedExternalPlugins;\n      }\n    };\n    const combinePlugins = (forcedPlugins, plugins) => [\n      ...normalizePlugins(forcedPlugins),\n      ...normalizePlugins(plugins)\n    ];\n    const getPlatformPlugins = (isMobileDevice, sectionResult, desktopPlugins, mobilePlugins) => {\n      if (isMobileDevice && hasSection(sectionResult, 'mobile')) {\n        return mobilePlugins;\n      } else {\n        return desktopPlugins;\n      }\n    };\n    const processPlugins = (isMobileDevice, sectionResult, defaultOverrideOptions, options) => {\n      const forcedPlugins = normalizePlugins(defaultOverrideOptions.forced_plugins);\n      const desktopPlugins = normalizePlugins(options.plugins);\n      const mobileConfig = getSectionConfig(sectionResult, 'mobile');\n      const mobilePlugins = mobileConfig.plugins ? normalizePlugins(mobileConfig.plugins) : desktopPlugins;\n      const platformPlugins = getPlatformPlugins(isMobileDevice, sectionResult, desktopPlugins, mobilePlugins);\n      const combinedPlugins = combinePlugins(forcedPlugins, platformPlugins);\n      return Tools.extend(options, {\n        forced_plugins: forcedPlugins,\n        plugins: combinedPlugins\n      });\n    };\n    const isOnMobile = (isMobileDevice, sectionResult) => {\n      return isMobileDevice && hasSection(sectionResult, 'mobile');\n    };\n    const combineOptions = (isMobileDevice, isPhone, defaultOptions, defaultOverrideOptions, options) => {\n      var _a;\n      const deviceOverrideOptions = isMobileDevice ? { mobile: getMobileOverrideOptions((_a = options.mobile) !== null && _a !== void 0 ? _a : {}, isPhone) } : {};\n      const sectionResult = extractSections(['mobile'], deepMerge(deviceOverrideOptions, options));\n      const extendedOptions = Tools.extend(defaultOptions, defaultOverrideOptions, sectionResult.options(), isOnMobile(isMobileDevice, sectionResult) ? getSection(sectionResult, 'mobile') : {}, { external_plugins: getExternalPlugins(defaultOverrideOptions, sectionResult.options()) });\n      return processPlugins(isMobileDevice, sectionResult, defaultOverrideOptions, extendedOptions);\n    };\n    const normalizeOptions = (defaultOverrideOptions, options) => combineOptions(isPhone || isTablet, isPhone, options, defaultOverrideOptions, options);\n\n    const addVisual = (editor, elm) => addVisual$1(editor, elm);\n\n    const registerExecCommands$3 = editor => {\n      const toggleFormat = (name, value) => {\n        editor.formatter.toggle(name, value);\n        editor.nodeChanged();\n      };\n      const toggleAlign = align => () => {\n        each$e('left,center,right,justify'.split(','), name => {\n          if (align !== name) {\n            editor.formatter.remove('align' + name);\n          }\n        });\n        if (align !== 'none') {\n          toggleFormat('align' + align);\n        }\n      };\n      editor.editorCommands.addCommands({\n        JustifyLeft: toggleAlign('left'),\n        JustifyCenter: toggleAlign('center'),\n        JustifyRight: toggleAlign('right'),\n        JustifyFull: toggleAlign('justify'),\n        JustifyNone: toggleAlign('none')\n      });\n    };\n    const registerQueryStateCommands$1 = editor => {\n      const alignStates = name => () => {\n        const selection = editor.selection;\n        const nodes = selection.isCollapsed() ? [editor.dom.getParent(selection.getNode(), editor.dom.isBlock)] : selection.getSelectedBlocks();\n        return exists(nodes, node => isNonNullable(editor.formatter.matchNode(node, name)));\n      };\n      editor.editorCommands.addCommands({\n        JustifyLeft: alignStates('alignleft'),\n        JustifyCenter: alignStates('aligncenter'),\n        JustifyRight: alignStates('alignright'),\n        JustifyFull: alignStates('alignjustify')\n      }, 'state');\n    };\n    const registerCommands$a = editor => {\n      registerExecCommands$3(editor);\n      registerQueryStateCommands$1(editor);\n    };\n\n    const registerCommands$9 = editor => {\n      editor.editorCommands.addCommands({\n        'Cut,Copy,Paste': command => {\n          const doc = editor.getDoc();\n          let failed;\n          try {\n            doc.execCommand(command);\n          } catch (ex) {\n            failed = true;\n          }\n          if (command === 'paste' && !doc.queryCommandEnabled(command)) {\n            failed = true;\n          }\n          if (failed || !doc.queryCommandSupported(command)) {\n            let msg = editor.translate(`Your browser doesn't support direct access to the clipboard. ` + 'Please use the Ctrl+X/C/V keyboard shortcuts instead.');\n            if (Env.os.isMacOS() || Env.os.isiOS()) {\n              msg = msg.replace(/Ctrl\\+/g, '\\u2318+');\n            }\n            editor.notificationManager.open({\n              text: msg,\n              type: 'error'\n            });\n          }\n        }\n      });\n    };\n\n    const trimOrPadLeftRight = (dom, rng, html) => {\n      const root = SugarElement.fromDom(dom.getRoot());\n      if (needsToBeNbspLeft(root, CaretPosition.fromRangeStart(rng))) {\n        html = html.replace(/^ /, '&nbsp;');\n      } else {\n        html = html.replace(/^&nbsp;/, ' ');\n      }\n      if (needsToBeNbspRight(root, CaretPosition.fromRangeEnd(rng))) {\n        html = html.replace(/(&nbsp;| )(<br( \\/)>)?$/, '&nbsp;');\n      } else {\n        html = html.replace(/&nbsp;(<br( \\/)?>)?$/, ' ');\n      }\n      return html;\n    };\n\n    const processValue$1 = value => {\n      if (typeof value !== 'string') {\n        const details = Tools.extend({\n          paste: value.paste,\n          data: { paste: value.paste }\n        }, value);\n        return {\n          content: value.content,\n          details\n        };\n      }\n      return {\n        content: value,\n        details: {}\n      };\n    };\n    const trimOrPad = (editor, value) => {\n      const selection = editor.selection;\n      const dom = editor.dom;\n      if (/^ | $/.test(value)) {\n        return trimOrPadLeftRight(dom, selection.getRng(), value);\n      } else {\n        return value;\n      }\n    };\n    const insertAtCaret = (editor, value) => {\n      const {content, details} = processValue$1(value);\n      preProcessSetContent(editor, {\n        ...details,\n        content: trimOrPad(editor, content),\n        format: 'html',\n        set: false,\n        selection: true\n      }).each(args => {\n        const insertedContent = insertContent$1(editor, args.content, details);\n        postProcessSetContent(editor, insertedContent, args);\n        editor.addVisual();\n      });\n    };\n\n    const registerCommands$8 = editor => {\n      editor.editorCommands.addCommands({\n        mceCleanup: () => {\n          const bm = editor.selection.getBookmark();\n          editor.setContent(editor.getContent());\n          editor.selection.moveToBookmark(bm);\n        },\n        insertImage: (_command, _ui, value) => {\n          insertAtCaret(editor, editor.dom.createHTML('img', { src: value }));\n        },\n        insertHorizontalRule: () => {\n          editor.execCommand('mceInsertContent', false, '<hr>');\n        },\n        insertText: (_command, _ui, value) => {\n          insertAtCaret(editor, editor.dom.encode(value));\n        },\n        insertHTML: (_command, _ui, value) => {\n          insertAtCaret(editor, value);\n        },\n        mceInsertContent: (_command, _ui, value) => {\n          insertAtCaret(editor, value);\n        },\n        mceSetContent: (_command, _ui, value) => {\n          editor.setContent(value);\n        },\n        mceReplaceContent: (_command, _ui, value) => {\n          editor.execCommand('mceInsertContent', false, value.replace(/\\{\\$selection\\}/g, editor.selection.getContent({ format: 'text' })));\n        },\n        mceNewDocument: () => {\n          editor.setContent('');\n        }\n      });\n    };\n\n    const legacyPropNames = {\n      'font-size': 'size',\n      'font-family': 'face'\n    };\n    const isFont = isTag('font');\n    const getSpecifiedFontProp = (propName, rootElm, elm) => {\n      const getProperty = elm => getRaw$1(elm, propName).orThunk(() => {\n        if (isFont(elm)) {\n          return get$a(legacyPropNames, propName).bind(legacyPropName => getOpt(elm, legacyPropName));\n        } else {\n          return Optional.none();\n        }\n      });\n      const isRoot = elm => eq(SugarElement.fromDom(rootElm), elm);\n      return closest$2(SugarElement.fromDom(elm), elm => getProperty(elm), isRoot);\n    };\n    const normalizeFontFamily = fontFamily => fontFamily.replace(/[\\'\\\"\\\\]/g, '').replace(/,\\s+/g, ',');\n    const getComputedFontProp = (propName, elm) => Optional.from(DOMUtils.DOM.getStyle(elm, propName, true));\n    const getFontProp = propName => (rootElm, elm) => Optional.from(elm).map(SugarElement.fromDom).filter(isElement$7).bind(element => getSpecifiedFontProp(propName, rootElm, element.dom).or(getComputedFontProp(propName, element.dom))).getOr('');\n    const getFontSize = getFontProp('font-size');\n    const getFontFamily = compose(normalizeFontFamily, getFontProp('font-family'));\n\n    const findFirstCaretElement = editor => firstPositionIn(editor.getBody()).bind(caret => {\n      const container = caret.container();\n      return Optional.from(isText$a(container) ? container.parentNode : container);\n    });\n    const getCaretElement = editor => Optional.from(editor.selection.getRng()).bind(rng => {\n      const root = editor.getBody();\n      const atStartOfNode = rng.startContainer === root && rng.startOffset === 0;\n      return atStartOfNode ? Optional.none() : Optional.from(editor.selection.getStart(true));\n    });\n    const bindRange = (editor, binder) => getCaretElement(editor).orThunk(curry(findFirstCaretElement, editor)).map(SugarElement.fromDom).filter(isElement$7).bind(binder);\n    const mapRange = (editor, mapper) => bindRange(editor, compose1(Optional.some, mapper));\n\n    const fromFontSizeNumber = (editor, value) => {\n      if (/^[0-9.]+$/.test(value)) {\n        const fontSizeNumber = parseInt(value, 10);\n        if (fontSizeNumber >= 1 && fontSizeNumber <= 7) {\n          const fontSizes = getFontStyleValues(editor);\n          const fontClasses = getFontSizeClasses(editor);\n          if (fontClasses.length > 0) {\n            return fontClasses[fontSizeNumber - 1] || value;\n          } else {\n            return fontSizes[fontSizeNumber - 1] || value;\n          }\n        } else {\n          return value;\n        }\n      } else {\n        return value;\n      }\n    };\n    const normalizeFontNames = font => {\n      const fonts = font.split(/\\s*,\\s*/);\n      return map$3(fonts, font => {\n        if (font.indexOf(' ') !== -1 && !(startsWith(font, '\"') || startsWith(font, `'`))) {\n          return `'${ font }'`;\n        } else {\n          return font;\n        }\n      }).join(',');\n    };\n    const fontNameAction = (editor, value) => {\n      const font = fromFontSizeNumber(editor, value);\n      editor.formatter.toggle('fontname', { value: normalizeFontNames(font) });\n      editor.nodeChanged();\n    };\n    const fontNameQuery = editor => mapRange(editor, elm => getFontFamily(editor.getBody(), elm.dom)).getOr('');\n    const fontSizeAction = (editor, value) => {\n      editor.formatter.toggle('fontsize', { value: fromFontSizeNumber(editor, value) });\n      editor.nodeChanged();\n    };\n    const fontSizeQuery = editor => mapRange(editor, elm => getFontSize(editor.getBody(), elm.dom)).getOr('');\n\n    const lineHeightQuery = editor => mapRange(editor, elm => {\n      const root = SugarElement.fromDom(editor.getBody());\n      const specifiedStyle = closest$2(elm, elm => getRaw$1(elm, 'line-height'), curry(eq, root));\n      const computedStyle = () => {\n        const lineHeight = parseFloat(get$7(elm, 'line-height'));\n        const fontSize = parseFloat(get$7(elm, 'font-size'));\n        return String(lineHeight / fontSize);\n      };\n      return specifiedStyle.getOrThunk(computedStyle);\n    }).getOr('');\n    const lineHeightAction = (editor, lineHeight) => {\n      editor.formatter.toggle('lineheight', { value: String(lineHeight) });\n      editor.nodeChanged();\n    };\n\n    const registerExecCommands$2 = editor => {\n      const toggleFormat = (name, value) => {\n        editor.formatter.toggle(name, value);\n        editor.nodeChanged();\n      };\n      editor.editorCommands.addCommands({\n        'Bold,Italic,Underline,Strikethrough,Superscript,Subscript': command => {\n          toggleFormat(command);\n        },\n        'ForeColor,HiliteColor': (command, _ui, value) => {\n          toggleFormat(command, { value });\n        },\n        'BackColor': (_command, _ui, value) => {\n          toggleFormat('hilitecolor', { value });\n        },\n        'FontName': (_command, _ui, value) => {\n          fontNameAction(editor, value);\n        },\n        'FontSize': (_command, _ui, value) => {\n          fontSizeAction(editor, value);\n        },\n        'LineHeight': (_command, _ui, value) => {\n          lineHeightAction(editor, value);\n        },\n        'Lang': (command, _ui, lang) => {\n          var _a;\n          toggleFormat(command, {\n            value: lang.code,\n            customValue: (_a = lang.customCode) !== null && _a !== void 0 ? _a : null\n          });\n        },\n        'RemoveFormat': command => {\n          editor.formatter.remove(command);\n        },\n        'mceBlockQuote': () => {\n          toggleFormat('blockquote');\n        },\n        'FormatBlock': (_command, _ui, value) => {\n          toggleFormat(isString(value) ? value : 'p');\n        },\n        'mceToggleFormat': (_command, _ui, value) => {\n          toggleFormat(value);\n        }\n      });\n    };\n    const registerQueryValueCommands = editor => {\n      const isFormatMatch = name => editor.formatter.match(name);\n      editor.editorCommands.addCommands({\n        'Bold,Italic,Underline,Strikethrough,Superscript,Subscript': command => isFormatMatch(command),\n        'mceBlockQuote': () => isFormatMatch('blockquote')\n      }, 'state');\n      editor.editorCommands.addQueryValueHandler('FontName', () => fontNameQuery(editor));\n      editor.editorCommands.addQueryValueHandler('FontSize', () => fontSizeQuery(editor));\n      editor.editorCommands.addQueryValueHandler('LineHeight', () => lineHeightQuery(editor));\n    };\n    const registerCommands$7 = editor => {\n      registerExecCommands$2(editor);\n      registerQueryValueCommands(editor);\n    };\n\n    const registerCommands$6 = editor => {\n      editor.editorCommands.addCommands({\n        mceAddUndoLevel: () => {\n          editor.undoManager.add();\n        },\n        mceEndUndoLevel: () => {\n          editor.undoManager.add();\n        },\n        Undo: () => {\n          editor.undoManager.undo();\n        },\n        Redo: () => {\n          editor.undoManager.redo();\n        }\n      });\n    };\n\n    const registerCommands$5 = editor => {\n      editor.editorCommands.addCommands({\n        Indent: () => {\n          indent(editor);\n        },\n        Outdent: () => {\n          outdent(editor);\n        }\n      });\n      editor.editorCommands.addCommands({ Outdent: () => canOutdent(editor) }, 'state');\n    };\n\n    const registerCommands$4 = editor => {\n      const applyLinkToSelection = (_command, _ui, value) => {\n        const linkDetails = isString(value) ? { href: value } : value;\n        const anchor = editor.dom.getParent(editor.selection.getNode(), 'a');\n        if (isObject(linkDetails) && isString(linkDetails.href)) {\n          linkDetails.href = linkDetails.href.replace(/ /g, '%20');\n          if (!anchor || !linkDetails.href) {\n            editor.formatter.remove('link');\n          }\n          if (linkDetails.href) {\n            editor.formatter.apply('link', linkDetails, anchor);\n          }\n        }\n      };\n      editor.editorCommands.addCommands({\n        unlink: () => {\n          if (editor.selection.isCollapsed()) {\n            const elm = editor.dom.getParent(editor.selection.getStart(), 'a');\n            if (elm) {\n              editor.dom.remove(elm, true);\n            }\n            return;\n          }\n          editor.formatter.remove('link');\n        },\n        mceInsertLink: applyLinkToSelection,\n        createLink: applyLinkToSelection\n      });\n    };\n\n    const registerExecCommands$1 = editor => {\n      editor.editorCommands.addCommands({\n        'InsertUnorderedList,InsertOrderedList': command => {\n          editor.getDoc().execCommand(command);\n          const listElm = editor.dom.getParent(editor.selection.getNode(), 'ol,ul');\n          if (listElm) {\n            const listParent = listElm.parentNode;\n            if (listParent && /^(H[1-6]|P|ADDRESS|PRE)$/.test(listParent.nodeName)) {\n              const bm = editor.selection.getBookmark();\n              editor.dom.split(listParent, listElm);\n              editor.selection.moveToBookmark(bm);\n            }\n          }\n        }\n      });\n    };\n    const registerQueryStateCommands = editor => {\n      editor.editorCommands.addCommands({\n        'InsertUnorderedList,InsertOrderedList': command => {\n          const list = editor.dom.getParent(editor.selection.getNode(), 'ul,ol');\n          return list && (command === 'insertunorderedlist' && list.tagName === 'UL' || command === 'insertorderedlist' && list.tagName === 'OL');\n        }\n      }, 'state');\n    };\n    const registerCommands$3 = editor => {\n      registerExecCommands$1(editor);\n      registerQueryStateCommands(editor);\n    };\n\n    const registerCommands$2 = editor => {\n      editor.editorCommands.addCommands({\n        insertParagraph: () => {\n          insertBreak(blockbreak, editor);\n        },\n        mceInsertNewLine: (_command, _ui, value) => {\n          insert(editor, value);\n        },\n        InsertLineBreak: (_command, _ui, _value) => {\n          insertBreak(linebreak, editor);\n        }\n      });\n    };\n\n    const registerCommands$1 = editor => {\n      editor.editorCommands.addCommands({\n        mceSelectNodeDepth: (_command, _ui, value) => {\n          let counter = 0;\n          editor.dom.getParent(editor.selection.getNode(), node => {\n            if (isElement$6(node) && counter++ === value) {\n              editor.selection.select(node);\n              return false;\n            } else {\n              return true;\n            }\n          }, editor.getBody());\n        },\n        mceSelectNode: (_command, _ui, value) => {\n          editor.selection.select(value);\n        },\n        selectAll: () => {\n          const editingHost = editor.dom.getParent(editor.selection.getStart(), isContentEditableTrue$3);\n          if (editingHost) {\n            const rng = editor.dom.createRng();\n            rng.selectNodeContents(editingHost);\n            editor.selection.setRng(rng);\n          }\n        }\n      });\n    };\n\n    const registerExecCommands = editor => {\n      editor.editorCommands.addCommands({\n        mceRemoveNode: (_command, _ui, value) => {\n          const node = value !== null && value !== void 0 ? value : editor.selection.getNode();\n          if (node !== editor.getBody()) {\n            const bm = editor.selection.getBookmark();\n            editor.dom.remove(node, true);\n            editor.selection.moveToBookmark(bm);\n          }\n        },\n        mcePrint: () => {\n          editor.getWin().print();\n        },\n        mceFocus: (_command, _ui, value) => {\n          focus(editor, value === true);\n        },\n        mceToggleVisualAid: () => {\n          editor.hasVisual = !editor.hasVisual;\n          editor.addVisual();\n        }\n      });\n    };\n    const registerCommands = editor => {\n      registerCommands$a(editor);\n      registerCommands$9(editor);\n      registerCommands$6(editor);\n      registerCommands$1(editor);\n      registerCommands$8(editor);\n      registerCommands$4(editor);\n      registerCommands$5(editor);\n      registerCommands$2(editor);\n      registerCommands$3(editor);\n      registerCommands$7(editor);\n      registerExecCommands(editor);\n    };\n\n    class EditorCommands {\n      constructor(editor) {\n        this.commands = {\n          state: {},\n          exec: {},\n          value: {}\n        };\n        this.editor = editor;\n      }\n      execCommand(command, ui = false, value, args) {\n        const editor = this.editor;\n        const lowerCaseCommand = command.toLowerCase();\n        const skipFocus = args === null || args === void 0 ? void 0 : args.skip_focus;\n        if (editor.removed) {\n          return false;\n        }\n        if (lowerCaseCommand !== 'mcefocus') {\n          if (!/^(mceAddUndoLevel|mceEndUndoLevel)$/i.test(lowerCaseCommand) && !skipFocus) {\n            editor.focus();\n          } else {\n            restore(editor);\n          }\n        }\n        const eventArgs = editor.dispatch('BeforeExecCommand', {\n          command,\n          ui,\n          value\n        });\n        if (eventArgs.isDefaultPrevented()) {\n          return false;\n        }\n        const func = this.commands.exec[lowerCaseCommand];\n        if (isFunction(func)) {\n          func(lowerCaseCommand, ui, value);\n          editor.dispatch('ExecCommand', {\n            command,\n            ui,\n            value\n          });\n          return true;\n        }\n        return false;\n      }\n      queryCommandState(command) {\n        if (this.editor.quirks.isHidden() || this.editor.removed) {\n          return false;\n        }\n        const lowerCaseCommand = command.toLowerCase();\n        const func = this.commands.state[lowerCaseCommand];\n        if (isFunction(func)) {\n          return func(lowerCaseCommand);\n        }\n        return false;\n      }\n      queryCommandValue(command) {\n        if (this.editor.quirks.isHidden() || this.editor.removed) {\n          return '';\n        }\n        const lowerCaseCommand = command.toLowerCase();\n        const func = this.commands.value[lowerCaseCommand];\n        if (isFunction(func)) {\n          return func(lowerCaseCommand);\n        }\n        return '';\n      }\n      addCommands(commandList, type = 'exec') {\n        const commands = this.commands;\n        each$d(commandList, (callback, command) => {\n          each$e(command.toLowerCase().split(','), command => {\n            commands[type][command] = callback;\n          });\n        });\n      }\n      addCommand(command, callback, scope) {\n        const lowerCaseCommand = command.toLowerCase();\n        this.commands.exec[lowerCaseCommand] = (_command, ui, value) => callback.call(scope !== null && scope !== void 0 ? scope : this.editor, ui, value);\n      }\n      queryCommandSupported(command) {\n        const lowerCaseCommand = command.toLowerCase();\n        if (this.commands.exec[lowerCaseCommand]) {\n          return true;\n        } else {\n          return false;\n        }\n      }\n      addQueryStateHandler(command, callback, scope) {\n        this.commands.state[command.toLowerCase()] = () => callback.call(scope !== null && scope !== void 0 ? scope : this.editor);\n      }\n      addQueryValueHandler(command, callback, scope) {\n        this.commands.value[command.toLowerCase()] = () => callback.call(scope !== null && scope !== void 0 ? scope : this.editor);\n      }\n    }\n\n    const internalContentEditableAttr = 'data-mce-contenteditable';\n    const toggleClass = (elm, cls, state) => {\n      if (has(elm, cls) && !state) {\n        remove$8(elm, cls);\n      } else if (state) {\n        add$2(elm, cls);\n      }\n    };\n    const setEditorCommandState = (editor, cmd, state) => {\n      try {\n        editor.getDoc().execCommand(cmd, false, String(state));\n      } catch (ex) {\n      }\n    };\n    const setContentEditable = (elm, state) => {\n      elm.dom.contentEditable = state ? 'true' : 'false';\n    };\n    const switchOffContentEditableTrue = elm => {\n      each$e(descendants(elm, '*[contenteditable=\"true\"]'), elm => {\n        set$2(elm, internalContentEditableAttr, 'true');\n        setContentEditable(elm, false);\n      });\n    };\n    const switchOnContentEditableTrue = elm => {\n      each$e(descendants(elm, `*[${ internalContentEditableAttr }=\"true\"]`), elm => {\n        remove$b(elm, internalContentEditableAttr);\n        setContentEditable(elm, true);\n      });\n    };\n    const removeFakeSelection = editor => {\n      Optional.from(editor.selection.getNode()).each(elm => {\n        elm.removeAttribute('data-mce-selected');\n      });\n    };\n    const restoreFakeSelection = editor => {\n      editor.selection.setRng(editor.selection.getRng());\n    };\n    const toggleReadOnly = (editor, state) => {\n      const body = SugarElement.fromDom(editor.getBody());\n      toggleClass(body, 'mce-content-readonly', state);\n      if (state) {\n        editor.selection.controlSelection.hideResizeRect();\n        editor._selectionOverrides.hideFakeCaret();\n        removeFakeSelection(editor);\n        editor.readonly = true;\n        setContentEditable(body, false);\n        switchOffContentEditableTrue(body);\n      } else {\n        editor.readonly = false;\n        setContentEditable(body, true);\n        switchOnContentEditableTrue(body);\n        setEditorCommandState(editor, 'StyleWithCSS', false);\n        setEditorCommandState(editor, 'enableInlineTableEditing', false);\n        setEditorCommandState(editor, 'enableObjectResizing', false);\n        if (hasEditorOrUiFocus(editor)) {\n          editor.focus();\n        }\n        restoreFakeSelection(editor);\n        editor.nodeChanged();\n      }\n    };\n    const isReadOnly = editor => editor.readonly;\n    const registerFilters = editor => {\n      editor.parser.addAttributeFilter('contenteditable', nodes => {\n        if (isReadOnly(editor)) {\n          each$e(nodes, node => {\n            node.attr(internalContentEditableAttr, node.attr('contenteditable'));\n            node.attr('contenteditable', 'false');\n          });\n        }\n      });\n      editor.serializer.addAttributeFilter(internalContentEditableAttr, nodes => {\n        if (isReadOnly(editor)) {\n          each$e(nodes, node => {\n            node.attr('contenteditable', node.attr(internalContentEditableAttr));\n          });\n        }\n      });\n      editor.serializer.addTempAttr(internalContentEditableAttr);\n    };\n    const registerReadOnlyContentFilters = editor => {\n      if (editor.serializer) {\n        registerFilters(editor);\n      } else {\n        editor.on('PreInit', () => {\n          registerFilters(editor);\n        });\n      }\n    };\n    const isClickEvent = e => e.type === 'click';\n    const allowedEvents = ['copy'];\n    const isReadOnlyAllowedEvent = e => contains$2(allowedEvents, e.type);\n    const getAnchorHrefOpt = (editor, elm) => {\n      const isRoot = elm => eq(elm, SugarElement.fromDom(editor.getBody()));\n      return closest$3(elm, 'a', isRoot).bind(a => getOpt(a, 'href'));\n    };\n    const processReadonlyEvents = (editor, e) => {\n      if (isClickEvent(e) && !VK.metaKeyPressed(e)) {\n        const elm = SugarElement.fromDom(e.target);\n        getAnchorHrefOpt(editor, elm).each(href => {\n          e.preventDefault();\n          if (/^#/.test(href)) {\n            const targetEl = editor.dom.select(`${ href },[name=\"${ removeLeading(href, '#') }\"]`);\n            if (targetEl.length) {\n              editor.selection.scrollIntoView(targetEl[0], true);\n            }\n          } else {\n            window.open(href, '_blank', 'rel=noopener noreferrer,menubar=yes,toolbar=yes,location=yes,status=yes,resizable=yes,scrollbars=yes');\n          }\n        });\n      } else if (isReadOnlyAllowedEvent(e)) {\n        editor.dispatch(e.type, e);\n      }\n    };\n    const registerReadOnlySelectionBlockers = editor => {\n      editor.on('ShowCaret', e => {\n        if (isReadOnly(editor)) {\n          e.preventDefault();\n        }\n      });\n      editor.on('ObjectSelected', e => {\n        if (isReadOnly(editor)) {\n          e.preventDefault();\n        }\n      });\n    };\n\n    const nativeEvents = Tools.makeMap('focus blur focusin focusout click dblclick mousedown mouseup mousemove mouseover beforepaste paste cut copy selectionchange ' + 'mouseout mouseenter mouseleave wheel keydown keypress keyup input beforeinput contextmenu dragstart dragend dragover ' + 'draggesture dragdrop drop drag submit ' + 'compositionstart compositionend compositionupdate touchstart touchmove touchend touchcancel', ' ');\n    class EventDispatcher {\n      constructor(settings) {\n        this.bindings = {};\n        this.settings = settings || {};\n        this.scope = this.settings.scope || this;\n        this.toggleEvent = this.settings.toggleEvent || never;\n      }\n      static isNative(name) {\n        return !!nativeEvents[name.toLowerCase()];\n      }\n      fire(name, args) {\n        return this.dispatch(name, args);\n      }\n      dispatch(name, args) {\n        const lcName = name.toLowerCase();\n        const event = normalize$3(lcName, args !== null && args !== void 0 ? args : {}, this.scope);\n        if (this.settings.beforeFire) {\n          this.settings.beforeFire(event);\n        }\n        const handlers = this.bindings[lcName];\n        if (handlers) {\n          for (let i = 0, l = handlers.length; i < l; i++) {\n            const callback = handlers[i];\n            if (callback.removed) {\n              continue;\n            }\n            if (callback.once) {\n              this.off(lcName, callback.func);\n            }\n            if (event.isImmediatePropagationStopped()) {\n              return event;\n            }\n            if (callback.func.call(this.scope, event) === false) {\n              event.preventDefault();\n              return event;\n            }\n          }\n        }\n        return event;\n      }\n      on(name, callback, prepend, extra) {\n        if (callback === false) {\n          callback = never;\n        }\n        if (callback) {\n          const wrappedCallback = {\n            func: callback,\n            removed: false\n          };\n          if (extra) {\n            Tools.extend(wrappedCallback, extra);\n          }\n          const names = name.toLowerCase().split(' ');\n          let i = names.length;\n          while (i--) {\n            const currentName = names[i];\n            let handlers = this.bindings[currentName];\n            if (!handlers) {\n              handlers = [];\n              this.toggleEvent(currentName, true);\n            }\n            if (prepend) {\n              handlers = [\n                wrappedCallback,\n                ...handlers\n              ];\n            } else {\n              handlers = [\n                ...handlers,\n                wrappedCallback\n              ];\n            }\n            this.bindings[currentName] = handlers;\n          }\n        }\n        return this;\n      }\n      off(name, callback) {\n        if (name) {\n          const names = name.toLowerCase().split(' ');\n          let i = names.length;\n          while (i--) {\n            const currentName = names[i];\n            let handlers = this.bindings[currentName];\n            if (!currentName) {\n              each$d(this.bindings, (_value, bindingName) => {\n                this.toggleEvent(bindingName, false);\n                delete this.bindings[bindingName];\n              });\n              return this;\n            }\n            if (handlers) {\n              if (!callback) {\n                handlers.length = 0;\n              } else {\n                const filteredHandlers = partition$2(handlers, handler => handler.func === callback);\n                handlers = filteredHandlers.fail;\n                this.bindings[currentName] = handlers;\n                each$e(filteredHandlers.pass, handler => {\n                  handler.removed = true;\n                });\n              }\n              if (!handlers.length) {\n                this.toggleEvent(name, false);\n                delete this.bindings[currentName];\n              }\n            }\n          }\n        } else {\n          each$d(this.bindings, (_value, name) => {\n            this.toggleEvent(name, false);\n          });\n          this.bindings = {};\n        }\n        return this;\n      }\n      once(name, callback, prepend) {\n        return this.on(name, callback, prepend, { once: true });\n      }\n      has(name) {\n        name = name.toLowerCase();\n        const binding = this.bindings[name];\n        return !(!binding || binding.length === 0);\n      }\n    }\n\n    const getEventDispatcher = obj => {\n      if (!obj._eventDispatcher) {\n        obj._eventDispatcher = new EventDispatcher({\n          scope: obj,\n          toggleEvent: (name, state) => {\n            if (EventDispatcher.isNative(name) && obj.toggleNativeEvent) {\n              obj.toggleNativeEvent(name, state);\n            }\n          }\n        });\n      }\n      return obj._eventDispatcher;\n    };\n    const Observable = {\n      fire(name, args, bubble) {\n        return this.dispatch(name, args, bubble);\n      },\n      dispatch(name, args, bubble) {\n        const self = this;\n        if (self.removed && name !== 'remove' && name !== 'detach') {\n          return normalize$3(name.toLowerCase(), args !== null && args !== void 0 ? args : {}, self);\n        }\n        const dispatcherArgs = getEventDispatcher(self).dispatch(name, args);\n        if (bubble !== false && self.parent) {\n          let parent = self.parent();\n          while (parent && !dispatcherArgs.isPropagationStopped()) {\n            parent.dispatch(name, dispatcherArgs, false);\n            parent = parent.parent ? parent.parent() : undefined;\n          }\n        }\n        return dispatcherArgs;\n      },\n      on(name, callback, prepend) {\n        return getEventDispatcher(this).on(name, callback, prepend);\n      },\n      off(name, callback) {\n        return getEventDispatcher(this).off(name, callback);\n      },\n      once(name, callback) {\n        return getEventDispatcher(this).once(name, callback);\n      },\n      hasEventListeners(name) {\n        return getEventDispatcher(this).has(name);\n      }\n    };\n\n    const DOM$2 = DOMUtils.DOM;\n    let customEventRootDelegates;\n    const getEventTarget = (editor, eventName) => {\n      if (eventName === 'selectionchange') {\n        return editor.getDoc();\n      }\n      if (!editor.inline && /^mouse|touch|click|contextmenu|drop|dragover|dragend/.test(eventName)) {\n        return editor.getDoc().documentElement;\n      }\n      const eventRoot = getEventRoot(editor);\n      if (eventRoot) {\n        if (!editor.eventRoot) {\n          editor.eventRoot = DOM$2.select(eventRoot)[0];\n        }\n        return editor.eventRoot;\n      }\n      return editor.getBody();\n    };\n    const isListening = editor => !editor.hidden && !isReadOnly(editor);\n    const fireEvent = (editor, eventName, e) => {\n      if (isListening(editor)) {\n        editor.dispatch(eventName, e);\n      } else if (isReadOnly(editor)) {\n        processReadonlyEvents(editor, e);\n      }\n    };\n    const bindEventDelegate = (editor, eventName) => {\n      if (!editor.delegates) {\n        editor.delegates = {};\n      }\n      if (editor.delegates[eventName] || editor.removed) {\n        return;\n      }\n      const eventRootElm = getEventTarget(editor, eventName);\n      if (getEventRoot(editor)) {\n        if (!customEventRootDelegates) {\n          customEventRootDelegates = {};\n          editor.editorManager.on('removeEditor', () => {\n            if (!editor.editorManager.activeEditor) {\n              if (customEventRootDelegates) {\n                each$d(customEventRootDelegates, (_value, name) => {\n                  editor.dom.unbind(getEventTarget(editor, name));\n                });\n                customEventRootDelegates = null;\n              }\n            }\n          });\n        }\n        if (customEventRootDelegates[eventName]) {\n          return;\n        }\n        const delegate = e => {\n          const target = e.target;\n          const editors = editor.editorManager.get();\n          let i = editors.length;\n          while (i--) {\n            const body = editors[i].getBody();\n            if (body === target || DOM$2.isChildOf(target, body)) {\n              fireEvent(editors[i], eventName, e);\n            }\n          }\n        };\n        customEventRootDelegates[eventName] = delegate;\n        DOM$2.bind(eventRootElm, eventName, delegate);\n      } else {\n        const delegate = e => {\n          fireEvent(editor, eventName, e);\n        };\n        DOM$2.bind(eventRootElm, eventName, delegate);\n        editor.delegates[eventName] = delegate;\n      }\n    };\n    const EditorObservable = {\n      ...Observable,\n      bindPendingEventDelegates() {\n        const self = this;\n        Tools.each(self._pendingNativeEvents, name => {\n          bindEventDelegate(self, name);\n        });\n      },\n      toggleNativeEvent(name, state) {\n        const self = this;\n        if (name === 'focus' || name === 'blur') {\n          return;\n        }\n        if (self.removed) {\n          return;\n        }\n        if (state) {\n          if (self.initialized) {\n            bindEventDelegate(self, name);\n          } else {\n            if (!self._pendingNativeEvents) {\n              self._pendingNativeEvents = [name];\n            } else {\n              self._pendingNativeEvents.push(name);\n            }\n          }\n        } else if (self.initialized && self.delegates) {\n          self.dom.unbind(getEventTarget(self, name), name, self.delegates[name]);\n          delete self.delegates[name];\n        }\n      },\n      unbindAllNativeEvents() {\n        const self = this;\n        const body = self.getBody();\n        const dom = self.dom;\n        if (self.delegates) {\n          each$d(self.delegates, (value, name) => {\n            self.dom.unbind(getEventTarget(self, name), name, value);\n          });\n          delete self.delegates;\n        }\n        if (!self.inline && body && dom) {\n          body.onload = null;\n          dom.unbind(self.getWin());\n          dom.unbind(self.getDoc());\n        }\n        if (dom) {\n          dom.unbind(body);\n          dom.unbind(self.getContainer());\n        }\n      }\n    };\n\n    const stringListProcessor = value => {\n      if (isString(value)) {\n        return {\n          value: value.split(/[ ,]/),\n          valid: true\n        };\n      } else if (isArrayOf(value, isString)) {\n        return {\n          value,\n          valid: true\n        };\n      } else {\n        return {\n          valid: false,\n          message: `The value must be a string[] or a comma/space separated string.`\n        };\n      }\n    };\n    const getBuiltInProcessor = type => {\n      const validator = (() => {\n        switch (type) {\n        case 'array':\n          return isArray$1;\n        case 'boolean':\n          return isBoolean;\n        case 'function':\n          return isFunction;\n        case 'number':\n          return isNumber;\n        case 'object':\n          return isObject;\n        case 'string':\n          return isString;\n        case 'string[]':\n          return stringListProcessor;\n        case 'object[]':\n          return val => isArrayOf(val, isObject);\n        case 'regexp':\n          return val => is$4(val, RegExp);\n        default:\n          return always;\n        }\n      })();\n      return value => processValue(value, validator, `The value must be a ${ type }.`);\n    };\n    const isBuiltInSpec = spec => isString(spec.processor);\n    const getErrorMessage = (message, result) => {\n      const additionalText = isEmpty$3(result.message) ? '' : `. ${ result.message }`;\n      return message + additionalText;\n    };\n    const isValidResult = result => result.valid;\n    const processValue = (value, processor, message = '') => {\n      const result = processor(value);\n      if (isBoolean(result)) {\n        return result ? {\n          value: value,\n          valid: true\n        } : {\n          valid: false,\n          message\n        };\n      } else {\n        return result;\n      }\n    };\n    const processDefaultValue = (name, defaultValue, processor) => {\n      if (!isUndefined(defaultValue)) {\n        const result = processValue(defaultValue, processor);\n        if (isValidResult(result)) {\n          return result.value;\n        } else {\n          console.error(getErrorMessage(`Invalid default value passed for the \"${ name }\" option`, result));\n        }\n      }\n      return undefined;\n    };\n    const create$5 = (editor, initialOptions) => {\n      const registry = {};\n      const values = {};\n      const setValue = (name, value, processor) => {\n        const result = processValue(value, processor);\n        if (isValidResult(result)) {\n          values[name] = result.value;\n          return true;\n        } else {\n          console.warn(getErrorMessage(`Invalid value passed for the ${ name } option`, result));\n          return false;\n        }\n      };\n      const register = (name, spec) => {\n        const processor = isBuiltInSpec(spec) ? getBuiltInProcessor(spec.processor) : spec.processor;\n        const defaultValue = processDefaultValue(name, spec.default, processor);\n        registry[name] = {\n          ...spec,\n          default: defaultValue,\n          processor\n        };\n        const initValue = get$a(values, name).orThunk(() => get$a(initialOptions, name));\n        initValue.each(value => setValue(name, value, processor));\n      };\n      const isRegistered = name => has$2(registry, name);\n      const get = name => get$a(values, name).orThunk(() => get$a(registry, name).map(spec => spec.default)).getOrUndefined();\n      const set = (name, value) => {\n        if (!isRegistered(name)) {\n          console.warn(`\"${ name }\" is not a registered option. Ensure the option has been registered before setting a value.`);\n          return false;\n        } else {\n          const spec = registry[name];\n          if (spec.immutable) {\n            console.error(`\"${ name }\" is an immutable option and cannot be updated`);\n            return false;\n          } else {\n            return setValue(name, value, spec.processor);\n          }\n        }\n      };\n      const unset = name => {\n        const registered = isRegistered(name);\n        if (registered) {\n          delete values[name];\n        }\n        return registered;\n      };\n      const isSet = name => has$2(values, name);\n      return {\n        register,\n        isRegistered,\n        get,\n        set,\n        unset,\n        isSet\n      };\n    };\n\n    const defaultModes = [\n      'design',\n      'readonly'\n    ];\n    const switchToMode = (editor, activeMode, availableModes, mode) => {\n      const oldMode = availableModes[activeMode.get()];\n      const newMode = availableModes[mode];\n      try {\n        newMode.activate();\n      } catch (e) {\n        console.error(`problem while activating editor mode ${ mode }:`, e);\n        return;\n      }\n      oldMode.deactivate();\n      if (oldMode.editorReadOnly !== newMode.editorReadOnly) {\n        toggleReadOnly(editor, newMode.editorReadOnly);\n      }\n      activeMode.set(mode);\n      fireSwitchMode(editor, mode);\n    };\n    const setMode = (editor, availableModes, activeMode, mode) => {\n      if (mode === activeMode.get()) {\n        return;\n      } else if (!has$2(availableModes, mode)) {\n        throw new Error(`Editor mode '${ mode }' is invalid`);\n      }\n      if (editor.initialized) {\n        switchToMode(editor, activeMode, availableModes, mode);\n      } else {\n        editor.on('init', () => switchToMode(editor, activeMode, availableModes, mode));\n      }\n    };\n    const registerMode = (availableModes, mode, api) => {\n      if (contains$2(defaultModes, mode)) {\n        throw new Error(`Cannot override default mode ${ mode }`);\n      }\n      return {\n        ...availableModes,\n        [mode]: {\n          ...api,\n          deactivate: () => {\n            try {\n              api.deactivate();\n            } catch (e) {\n              console.error(`problem while deactivating editor mode ${ mode }:`, e);\n            }\n          }\n        }\n      };\n    };\n\n    const create$4 = editor => {\n      const activeMode = Cell('design');\n      const availableModes = Cell({\n        design: {\n          activate: noop,\n          deactivate: noop,\n          editorReadOnly: false\n        },\n        readonly: {\n          activate: noop,\n          deactivate: noop,\n          editorReadOnly: true\n        }\n      });\n      registerReadOnlyContentFilters(editor);\n      registerReadOnlySelectionBlockers(editor);\n      return {\n        isReadOnly: () => isReadOnly(editor),\n        set: mode => setMode(editor, availableModes.get(), activeMode, mode),\n        get: () => activeMode.get(),\n        register: (mode, api) => {\n          availableModes.set(registerMode(availableModes.get(), mode, api));\n        }\n      };\n    };\n\n    const each$2 = Tools.each, explode = Tools.explode;\n    const keyCodeLookup = {\n      f1: 112,\n      f2: 113,\n      f3: 114,\n      f4: 115,\n      f5: 116,\n      f6: 117,\n      f7: 118,\n      f8: 119,\n      f9: 120,\n      f10: 121,\n      f11: 122,\n      f12: 123\n    };\n    const modifierNames = Tools.makeMap('alt,ctrl,shift,meta,access');\n    const isModifier = key => key in modifierNames;\n    const parseShortcut = pattern => {\n      const shortcut = {};\n      const isMac = Env.os.isMacOS() || Env.os.isiOS();\n      each$2(explode(pattern.toLowerCase(), '+'), value => {\n        if (isModifier(value)) {\n          shortcut[value] = true;\n        } else {\n          if (/^[0-9]{2,}$/.test(value)) {\n            shortcut.keyCode = parseInt(value, 10);\n          } else {\n            shortcut.charCode = value.charCodeAt(0);\n            shortcut.keyCode = keyCodeLookup[value] || value.toUpperCase().charCodeAt(0);\n          }\n        }\n      });\n      const id = [shortcut.keyCode];\n      let key;\n      for (key in modifierNames) {\n        if (shortcut[key]) {\n          id.push(key);\n        } else {\n          shortcut[key] = false;\n        }\n      }\n      shortcut.id = id.join(',');\n      if (shortcut.access) {\n        shortcut.alt = true;\n        if (isMac) {\n          shortcut.ctrl = true;\n        } else {\n          shortcut.shift = true;\n        }\n      }\n      if (shortcut.meta) {\n        if (isMac) {\n          shortcut.meta = true;\n        } else {\n          shortcut.ctrl = true;\n          shortcut.meta = false;\n        }\n      }\n      return shortcut;\n    };\n    class Shortcuts {\n      constructor(editor) {\n        this.shortcuts = {};\n        this.pendingPatterns = [];\n        this.editor = editor;\n        const self = this;\n        editor.on('keyup keypress keydown', e => {\n          if ((self.hasModifier(e) || self.isFunctionKey(e)) && !e.isDefaultPrevented()) {\n            each$2(self.shortcuts, shortcut => {\n              if (self.matchShortcut(e, shortcut)) {\n                self.pendingPatterns = shortcut.subpatterns.slice(0);\n                if (e.type === 'keydown') {\n                  self.executeShortcutAction(shortcut);\n                }\n              }\n            });\n            if (self.matchShortcut(e, self.pendingPatterns[0])) {\n              if (self.pendingPatterns.length === 1) {\n                if (e.type === 'keydown') {\n                  self.executeShortcutAction(self.pendingPatterns[0]);\n                }\n              }\n              self.pendingPatterns.shift();\n            }\n          }\n        });\n      }\n      add(pattern, desc, cmdFunc, scope) {\n        const self = this;\n        const func = self.normalizeCommandFunc(cmdFunc);\n        each$2(explode(Tools.trim(pattern)), pattern => {\n          const shortcut = self.createShortcut(pattern, desc, func, scope);\n          self.shortcuts[shortcut.id] = shortcut;\n        });\n        return true;\n      }\n      remove(pattern) {\n        const shortcut = this.createShortcut(pattern);\n        if (this.shortcuts[shortcut.id]) {\n          delete this.shortcuts[shortcut.id];\n          return true;\n        }\n        return false;\n      }\n      normalizeCommandFunc(cmdFunc) {\n        const self = this;\n        const cmd = cmdFunc;\n        if (typeof cmd === 'string') {\n          return () => {\n            self.editor.execCommand(cmd, false, null);\n          };\n        } else if (Tools.isArray(cmd)) {\n          return () => {\n            self.editor.execCommand(cmd[0], cmd[1], cmd[2]);\n          };\n        } else {\n          return cmd;\n        }\n      }\n      createShortcut(pattern, desc, cmdFunc, scope) {\n        const shortcuts = Tools.map(explode(pattern, '>'), parseShortcut);\n        shortcuts[shortcuts.length - 1] = Tools.extend(shortcuts[shortcuts.length - 1], {\n          func: cmdFunc,\n          scope: scope || this.editor\n        });\n        return Tools.extend(shortcuts[0], {\n          desc: this.editor.translate(desc),\n          subpatterns: shortcuts.slice(1)\n        });\n      }\n      hasModifier(e) {\n        return e.altKey || e.ctrlKey || e.metaKey;\n      }\n      isFunctionKey(e) {\n        return e.type === 'keydown' && e.keyCode >= 112 && e.keyCode <= 123;\n      }\n      matchShortcut(e, shortcut) {\n        if (!shortcut) {\n          return false;\n        }\n        if (shortcut.ctrl !== e.ctrlKey || shortcut.meta !== e.metaKey) {\n          return false;\n        }\n        if (shortcut.alt !== e.altKey || shortcut.shift !== e.shiftKey) {\n          return false;\n        }\n        if (e.keyCode === shortcut.keyCode || e.charCode && e.charCode === shortcut.charCode) {\n          e.preventDefault();\n          return true;\n        }\n        return false;\n      }\n      executeShortcutAction(shortcut) {\n        return shortcut.func ? shortcut.func.call(shortcut.scope) : null;\n      }\n    }\n\n    const create$3 = () => {\n      const buttons = {};\n      const menuItems = {};\n      const popups = {};\n      const icons = {};\n      const contextMenus = {};\n      const contextToolbars = {};\n      const sidebars = {};\n      const add = (collection, type) => (name, spec) => {\n        collection[name.toLowerCase()] = {\n          ...spec,\n          type\n        };\n      };\n      const addIcon = (name, svgData) => icons[name.toLowerCase()] = svgData;\n      return {\n        addButton: add(buttons, 'button'),\n        addGroupToolbarButton: add(buttons, 'grouptoolbarbutton'),\n        addToggleButton: add(buttons, 'togglebutton'),\n        addMenuButton: add(buttons, 'menubutton'),\n        addSplitButton: add(buttons, 'splitbutton'),\n        addMenuItem: add(menuItems, 'menuitem'),\n        addNestedMenuItem: add(menuItems, 'nestedmenuitem'),\n        addToggleMenuItem: add(menuItems, 'togglemenuitem'),\n        addAutocompleter: add(popups, 'autocompleter'),\n        addContextMenu: add(contextMenus, 'contextmenu'),\n        addContextToolbar: add(contextToolbars, 'contexttoolbar'),\n        addContextForm: add(contextToolbars, 'contextform'),\n        addSidebar: add(sidebars, 'sidebar'),\n        addIcon,\n        getAll: () => ({\n          buttons,\n          menuItems,\n          icons,\n          popups,\n          contextMenus,\n          contextToolbars,\n          sidebars\n        })\n      };\n    };\n\n    const registry = () => {\n      const bridge = create$3();\n      return {\n        addAutocompleter: bridge.addAutocompleter,\n        addButton: bridge.addButton,\n        addContextForm: bridge.addContextForm,\n        addContextMenu: bridge.addContextMenu,\n        addContextToolbar: bridge.addContextToolbar,\n        addIcon: bridge.addIcon,\n        addMenuButton: bridge.addMenuButton,\n        addMenuItem: bridge.addMenuItem,\n        addNestedMenuItem: bridge.addNestedMenuItem,\n        addSidebar: bridge.addSidebar,\n        addSplitButton: bridge.addSplitButton,\n        addToggleButton: bridge.addToggleButton,\n        addGroupToolbarButton: bridge.addGroupToolbarButton,\n        addToggleMenuItem: bridge.addToggleMenuItem,\n        getAll: bridge.getAll\n      };\n    };\n\n    const DOM$1 = DOMUtils.DOM;\n    const extend = Tools.extend, each$1 = Tools.each;\n    class Editor {\n      constructor(id, options, editorManager) {\n        this.plugins = {};\n        this.contentCSS = [];\n        this.contentStyles = [];\n        this.loadedCSS = {};\n        this.isNotDirty = false;\n        this.composing = false;\n        this.destroyed = false;\n        this.hasHiddenInput = false;\n        this.iframeElement = null;\n        this.initialized = false;\n        this.readonly = false;\n        this.removed = false;\n        this.startContent = '';\n        this._pendingNativeEvents = [];\n        this._skinLoaded = false;\n        this.editorManager = editorManager;\n        this.documentBaseUrl = editorManager.documentBaseURL;\n        extend(this, EditorObservable);\n        const self = this;\n        this.id = id;\n        this.hidden = false;\n        const normalizedOptions = normalizeOptions(editorManager.defaultOptions, options);\n        this.options = create$5(self, normalizedOptions);\n        register$7(self);\n        const getOption = this.options.get;\n        if (getOption('deprecation_warnings')) {\n          logWarnings(options, normalizedOptions);\n        }\n        const suffix = getOption('suffix');\n        if (suffix) {\n          editorManager.suffix = suffix;\n        }\n        this.suffix = editorManager.suffix;\n        const baseUrl = getOption('base_url');\n        if (baseUrl) {\n          editorManager._setBaseUrl(baseUrl);\n        }\n        this.baseUri = editorManager.baseURI;\n        const referrerPolicy = getReferrerPolicy(self);\n        if (referrerPolicy) {\n          ScriptLoader.ScriptLoader._setReferrerPolicy(referrerPolicy);\n          DOMUtils.DOM.styleSheetLoader._setReferrerPolicy(referrerPolicy);\n        }\n        AddOnManager.languageLoad = getOption('language_load');\n        AddOnManager.baseURL = editorManager.baseURL;\n        this.setDirty(false);\n        this.documentBaseURI = new URI(getDocumentBaseUrl(self), { base_uri: this.baseUri });\n        this.baseURI = this.baseUri;\n        this.inline = isInline(self);\n        this.hasVisual = isVisualAidsEnabled(self);\n        this.shortcuts = new Shortcuts(this);\n        this.editorCommands = new EditorCommands(this);\n        registerCommands(this);\n        const cacheSuffix = getOption('cache_suffix');\n        if (cacheSuffix) {\n          Env.cacheSuffix = cacheSuffix.replace(/^[\\?\\&]+/, '');\n        }\n        this.ui = {\n          registry: registry(),\n          styleSheetLoader: undefined,\n          show: noop,\n          hide: noop,\n          setEnabled: noop,\n          isEnabled: always\n        };\n        this.mode = create$4(self);\n        editorManager.dispatch('SetupEditor', { editor: this });\n        const setupCallback = getSetupCallback(self);\n        if (isFunction(setupCallback)) {\n          setupCallback.call(self, self);\n        }\n      }\n      render() {\n        render(this);\n      }\n      focus(skipFocus) {\n        this.execCommand('mceFocus', false, skipFocus);\n      }\n      hasFocus() {\n        return hasFocus(this);\n      }\n      translate(text) {\n        return I18n.translate(text);\n      }\n      getParam(name, defaultVal, type) {\n        const options = this.options;\n        if (!options.isRegistered(name)) {\n          if (isNonNullable(type)) {\n            options.register(name, {\n              processor: type,\n              default: defaultVal\n            });\n          } else {\n            options.register(name, {\n              processor: always,\n              default: defaultVal\n            });\n          }\n        }\n        return !options.isSet(name) && !isUndefined(defaultVal) ? defaultVal : options.get(name);\n      }\n      hasPlugin(name, loaded) {\n        const hasPlugin = contains$2(getPlugins(this), name);\n        if (hasPlugin) {\n          return loaded ? PluginManager.get(name) !== undefined : true;\n        } else {\n          return false;\n        }\n      }\n      nodeChanged(args) {\n        this._nodeChangeDispatcher.nodeChanged(args);\n      }\n      addCommand(name, callback, scope) {\n        this.editorCommands.addCommand(name, callback, scope);\n      }\n      addQueryStateHandler(name, callback, scope) {\n        this.editorCommands.addQueryStateHandler(name, callback, scope);\n      }\n      addQueryValueHandler(name, callback, scope) {\n        this.editorCommands.addQueryValueHandler(name, callback, scope);\n      }\n      addShortcut(pattern, desc, cmdFunc, scope) {\n        this.shortcuts.add(pattern, desc, cmdFunc, scope);\n      }\n      execCommand(cmd, ui, value, args) {\n        return this.editorCommands.execCommand(cmd, ui, value, args);\n      }\n      queryCommandState(cmd) {\n        return this.editorCommands.queryCommandState(cmd);\n      }\n      queryCommandValue(cmd) {\n        return this.editorCommands.queryCommandValue(cmd);\n      }\n      queryCommandSupported(cmd) {\n        return this.editorCommands.queryCommandSupported(cmd);\n      }\n      show() {\n        const self = this;\n        if (self.hidden) {\n          self.hidden = false;\n          if (self.inline) {\n            self.getBody().contentEditable = 'true';\n          } else {\n            DOM$1.show(self.getContainer());\n            DOM$1.hide(self.id);\n          }\n          self.load();\n          self.dispatch('show');\n        }\n      }\n      hide() {\n        const self = this;\n        if (!self.hidden) {\n          self.save();\n          if (self.inline) {\n            self.getBody().contentEditable = 'false';\n            if (self === self.editorManager.focusedEditor) {\n              self.editorManager.focusedEditor = null;\n            }\n          } else {\n            DOM$1.hide(self.getContainer());\n            DOM$1.setStyle(self.id, 'display', self.orgDisplay);\n          }\n          self.hidden = true;\n          self.dispatch('hide');\n        }\n      }\n      isHidden() {\n        return this.hidden;\n      }\n      setProgressState(state, time) {\n        this.dispatch('ProgressState', {\n          state,\n          time\n        });\n      }\n      load(args = {}) {\n        const self = this;\n        const elm = self.getElement();\n        if (self.removed) {\n          return '';\n        }\n        if (elm) {\n          const loadArgs = {\n            ...args,\n            load: true\n          };\n          const value = isTextareaOrInput(elm) ? elm.value : elm.innerHTML;\n          const html = self.setContent(value, loadArgs);\n          if (!loadArgs.no_events) {\n            self.dispatch('LoadContent', {\n              ...loadArgs,\n              element: elm\n            });\n          }\n          return html;\n        } else {\n          return '';\n        }\n      }\n      save(args = {}) {\n        const self = this;\n        let elm = self.getElement();\n        if (!elm || !self.initialized || self.removed) {\n          return '';\n        }\n        const getArgs = {\n          ...args,\n          save: true,\n          element: elm\n        };\n        let html = self.getContent(getArgs);\n        const saveArgs = {\n          ...getArgs,\n          content: html\n        };\n        if (!saveArgs.no_events) {\n          self.dispatch('SaveContent', saveArgs);\n        }\n        if (saveArgs.format === 'raw') {\n          self.dispatch('RawSaveContent', saveArgs);\n        }\n        html = saveArgs.content;\n        if (!isTextareaOrInput(elm)) {\n          if (args.is_removing || !self.inline) {\n            elm.innerHTML = html;\n          }\n          const form = DOM$1.getParent(self.id, 'form');\n          if (form) {\n            each$1(form.elements, elm => {\n              if (elm.name === self.id) {\n                elm.value = html;\n                return false;\n              } else {\n                return true;\n              }\n            });\n          }\n        } else {\n          elm.value = html;\n        }\n        saveArgs.element = getArgs.element = elm = null;\n        if (saveArgs.set_dirty !== false) {\n          self.setDirty(false);\n        }\n        return html;\n      }\n      setContent(content, args) {\n        return setContent(this, content, args);\n      }\n      getContent(args) {\n        return getContent(this, args);\n      }\n      insertContent(content, args) {\n        if (args) {\n          content = extend({ content }, args);\n        }\n        this.execCommand('mceInsertContent', false, content);\n      }\n      resetContent(initialContent) {\n        if (initialContent === undefined) {\n          setContent(this, this.startContent, { format: 'raw' });\n        } else {\n          setContent(this, initialContent);\n        }\n        this.undoManager.reset();\n        this.setDirty(false);\n        this.nodeChanged();\n      }\n      isDirty() {\n        return !this.isNotDirty;\n      }\n      setDirty(state) {\n        const oldState = !this.isNotDirty;\n        this.isNotDirty = !state;\n        if (state && state !== oldState) {\n          this.dispatch('dirty');\n        }\n      }\n      getContainer() {\n        const self = this;\n        if (!self.container) {\n          self.container = self.editorContainer || DOM$1.get(self.id + '_parent');\n        }\n        return self.container;\n      }\n      getContentAreaContainer() {\n        return this.contentAreaContainer;\n      }\n      getElement() {\n        if (!this.targetElm) {\n          this.targetElm = DOM$1.get(this.id);\n        }\n        return this.targetElm;\n      }\n      getWin() {\n        const self = this;\n        if (!self.contentWindow) {\n          const elm = self.iframeElement;\n          if (elm) {\n            self.contentWindow = elm.contentWindow;\n          }\n        }\n        return self.contentWindow;\n      }\n      getDoc() {\n        const self = this;\n        if (!self.contentDocument) {\n          const win = self.getWin();\n          if (win) {\n            self.contentDocument = win.document;\n          }\n        }\n        return self.contentDocument;\n      }\n      getBody() {\n        var _a, _b;\n        const doc = this.getDoc();\n        return (_b = (_a = this.bodyElement) !== null && _a !== void 0 ? _a : doc === null || doc === void 0 ? void 0 : doc.body) !== null && _b !== void 0 ? _b : null;\n      }\n      convertURL(url, name, elm) {\n        const self = this, getOption = self.options.get;\n        const urlConverterCallback = getUrlConverterCallback(self);\n        if (isFunction(urlConverterCallback)) {\n          return urlConverterCallback.call(self, url, elm, true, name);\n        }\n        if (!getOption('convert_urls') || elm === 'link' || isObject(elm) && elm.nodeName === 'LINK' || url.indexOf('file:') === 0 || url.length === 0) {\n          return url;\n        }\n        if (getOption('relative_urls')) {\n          return self.documentBaseURI.toRelative(url);\n        }\n        url = self.documentBaseURI.toAbsolute(url, getOption('remove_script_host'));\n        return url;\n      }\n      addVisual(elm) {\n        addVisual(this, elm);\n      }\n      remove() {\n        remove$1(this);\n      }\n      destroy(automatic) {\n        destroy(this, automatic);\n      }\n      uploadImages() {\n        return this.editorUpload.uploadImages();\n      }\n      _scanForImages() {\n        return this.editorUpload.scanForImages();\n      }\n    }\n\n    const DOM = DOMUtils.DOM;\n    const each = Tools.each;\n    let boundGlobalEvents = false;\n    let beforeUnloadDelegate;\n    let editors = [];\n    const globalEventDelegate = e => {\n      const type = e.type;\n      each(EditorManager.get(), editor => {\n        switch (type) {\n        case 'scroll':\n          editor.dispatch('ScrollWindow', e);\n          break;\n        case 'resize':\n          editor.dispatch('ResizeWindow', e);\n          break;\n        }\n      });\n    };\n    const toggleGlobalEvents = state => {\n      if (state !== boundGlobalEvents) {\n        const DOM = DOMUtils.DOM;\n        if (state) {\n          DOM.bind(window, 'resize', globalEventDelegate);\n          DOM.bind(window, 'scroll', globalEventDelegate);\n        } else {\n          DOM.unbind(window, 'resize', globalEventDelegate);\n          DOM.unbind(window, 'scroll', globalEventDelegate);\n        }\n        boundGlobalEvents = state;\n      }\n    };\n    const removeEditorFromList = targetEditor => {\n      const oldEditors = editors;\n      editors = filter$5(editors, editor => {\n        return targetEditor !== editor;\n      });\n      if (EditorManager.activeEditor === targetEditor) {\n        EditorManager.activeEditor = editors.length > 0 ? editors[0] : null;\n      }\n      if (EditorManager.focusedEditor === targetEditor) {\n        EditorManager.focusedEditor = null;\n      }\n      return oldEditors.length !== editors.length;\n    };\n    const purgeDestroyedEditor = editor => {\n      if (editor && editor.initialized && !(editor.getContainer() || editor.getBody()).parentNode) {\n        removeEditorFromList(editor);\n        editor.unbindAllNativeEvents();\n        editor.destroy(true);\n        editor.removed = true;\n      }\n    };\n    const isQuirksMode = document.compatMode !== 'CSS1Compat';\n    const EditorManager = {\n      ...Observable,\n      baseURI: null,\n      baseURL: null,\n      defaultOptions: {},\n      documentBaseURL: null,\n      suffix: null,\n      majorVersion: '6',\n      minorVersion: '2.0',\n      releaseDate: '2022-09-08',\n      i18n: I18n,\n      activeEditor: null,\n      focusedEditor: null,\n      setup() {\n        const self = this;\n        let baseURL = '';\n        let suffix = '';\n        let documentBaseURL = URI.getDocumentBaseUrl(document.location);\n        if (/^[^:]+:\\/\\/\\/?[^\\/]+\\//.test(documentBaseURL)) {\n          documentBaseURL = documentBaseURL.replace(/[\\?#].*$/, '').replace(/[\\/\\\\][^\\/]+$/, '');\n          if (!/[\\/\\\\]$/.test(documentBaseURL)) {\n            documentBaseURL += '/';\n          }\n        }\n        const preInit = window.tinymce || window.tinyMCEPreInit;\n        if (preInit) {\n          baseURL = preInit.base || preInit.baseURL;\n          suffix = preInit.suffix;\n        } else {\n          const scripts = document.getElementsByTagName('script');\n          for (let i = 0; i < scripts.length; i++) {\n            const src = scripts[i].src || '';\n            if (src === '') {\n              continue;\n            }\n            const srcScript = src.substring(src.lastIndexOf('/'));\n            if (/tinymce(\\.full|\\.jquery|)(\\.min|\\.dev|)\\.js/.test(src)) {\n              if (srcScript.indexOf('.min') !== -1) {\n                suffix = '.min';\n              }\n              baseURL = src.substring(0, src.lastIndexOf('/'));\n              break;\n            }\n          }\n          if (!baseURL && document.currentScript) {\n            const src = document.currentScript.src;\n            if (src.indexOf('.min') !== -1) {\n              suffix = '.min';\n            }\n            baseURL = src.substring(0, src.lastIndexOf('/'));\n          }\n        }\n        self.baseURL = new URI(documentBaseURL).toAbsolute(baseURL);\n        self.documentBaseURL = documentBaseURL;\n        self.baseURI = new URI(self.baseURL);\n        self.suffix = suffix;\n        setup$v(self);\n      },\n      overrideDefaults(defaultOptions) {\n        const baseUrl = defaultOptions.base_url;\n        if (baseUrl) {\n          this._setBaseUrl(baseUrl);\n        }\n        const suffix = defaultOptions.suffix;\n        if (suffix) {\n          this.suffix = suffix;\n        }\n        this.defaultOptions = defaultOptions;\n        const pluginBaseUrls = defaultOptions.plugin_base_urls;\n        if (pluginBaseUrls !== undefined) {\n          each$d(pluginBaseUrls, (pluginBaseUrl, pluginName) => {\n            AddOnManager.PluginManager.urls[pluginName] = pluginBaseUrl;\n          });\n        }\n      },\n      init(options) {\n        const self = this;\n        let result;\n        const invalidInlineTargets = Tools.makeMap('area base basefont br col frame hr img input isindex link meta param embed source wbr track ' + 'colgroup option table tbody tfoot thead tr th td script noscript style textarea video audio iframe object menu', ' ');\n        const isInvalidInlineTarget = (options, elm) => options.inline && elm.tagName.toLowerCase() in invalidInlineTargets;\n        const createId = elm => {\n          let id = elm.id;\n          if (!id) {\n            id = get$a(elm, 'name').filter(name => !DOM.get(name)).getOrThunk(DOM.uniqueId);\n            elm.setAttribute('id', id);\n          }\n          return id;\n        };\n        const execCallback = name => {\n          const callback = options[name];\n          if (!callback) {\n            return;\n          }\n          return callback.apply(self, []);\n        };\n        const findTargets = options => {\n          if (Env.browser.isIE() || Env.browser.isEdge()) {\n            initError('TinyMCE does not support the browser you are using. For a list of supported' + ' browsers please see: https://www.tiny.cloud/docs/tinymce/6/support/#supportedwebbrowsers');\n            return [];\n          } else if (isQuirksMode) {\n            initError('Failed to initialize the editor as the document is not in standards mode. ' + 'TinyMCE requires standards mode.');\n            return [];\n          } else if (isString(options.selector)) {\n            return DOM.select(options.selector);\n          } else if (isNonNullable(options.target)) {\n            return [options.target];\n          } else {\n            return [];\n          }\n        };\n        let provideResults = editors => {\n          result = editors;\n        };\n        const initEditors = () => {\n          let initCount = 0;\n          const editors = [];\n          let targets;\n          const createEditor = (id, options, targetElm) => {\n            const editor = new Editor(id, options, self);\n            editors.push(editor);\n            editor.on('init', () => {\n              if (++initCount === targets.length) {\n                provideResults(editors);\n              }\n            });\n            editor.targetElm = editor.targetElm || targetElm;\n            editor.render();\n          };\n          DOM.unbind(window, 'ready', initEditors);\n          execCallback('onpageload');\n          targets = unique$1(findTargets(options));\n          Tools.each(targets, elm => {\n            purgeDestroyedEditor(self.get(elm.id));\n          });\n          targets = Tools.grep(targets, elm => {\n            return !self.get(elm.id);\n          });\n          if (targets.length === 0) {\n            provideResults([]);\n          } else {\n            each(targets, elm => {\n              if (isInvalidInlineTarget(options, elm)) {\n                initError('Could not initialize inline editor on invalid inline target element', elm);\n              } else {\n                createEditor(createId(elm), options, elm);\n              }\n            });\n          }\n        };\n        DOM.bind(window, 'ready', initEditors);\n        return new Promise(resolve => {\n          if (result) {\n            resolve(result);\n          } else {\n            provideResults = editors => {\n              resolve(editors);\n            };\n          }\n        });\n      },\n      get(id) {\n        if (arguments.length === 0) {\n          return editors.slice(0);\n        } else if (isString(id)) {\n          return find$2(editors, editor => {\n            return editor.id === id;\n          }).getOr(null);\n        } else if (isNumber(id)) {\n          return editors[id] ? editors[id] : null;\n        } else {\n          return null;\n        }\n      },\n      add(editor) {\n        const self = this;\n        const existingEditor = self.get(editor.id);\n        if (existingEditor === editor) {\n          return editor;\n        }\n        if (existingEditor === null) {\n          editors.push(editor);\n        }\n        toggleGlobalEvents(true);\n        self.activeEditor = editor;\n        self.dispatch('AddEditor', { editor });\n        if (!beforeUnloadDelegate) {\n          beforeUnloadDelegate = e => {\n            const event = self.dispatch('BeforeUnload');\n            if (event.returnValue) {\n              e.preventDefault();\n              e.returnValue = event.returnValue;\n              return event.returnValue;\n            }\n          };\n          window.addEventListener('beforeunload', beforeUnloadDelegate);\n        }\n        return editor;\n      },\n      createEditor(id, options) {\n        return this.add(new Editor(id, options, this));\n      },\n      remove(selector) {\n        const self = this;\n        let editor;\n        if (!selector) {\n          for (let i = editors.length - 1; i >= 0; i--) {\n            self.remove(editors[i]);\n          }\n          return;\n        }\n        if (isString(selector)) {\n          each(DOM.select(selector), elm => {\n            editor = self.get(elm.id);\n            if (editor) {\n              self.remove(editor);\n            }\n          });\n          return;\n        }\n        editor = selector;\n        if (isNull(self.get(editor.id))) {\n          return null;\n        }\n        if (removeEditorFromList(editor)) {\n          self.dispatch('RemoveEditor', { editor });\n        }\n        if (editors.length === 0) {\n          window.removeEventListener('beforeunload', beforeUnloadDelegate);\n        }\n        editor.remove();\n        toggleGlobalEvents(editors.length > 0);\n        return editor;\n      },\n      execCommand(cmd, ui, value) {\n        var _a;\n        const self = this;\n        const editorId = isObject(value) ? (_a = value.id) !== null && _a !== void 0 ? _a : value.index : value;\n        switch (cmd) {\n        case 'mceAddEditor': {\n            if (!self.get(editorId)) {\n              const editorOptions = value.options;\n              new Editor(editorId, editorOptions, self).render();\n            }\n            return true;\n          }\n        case 'mceRemoveEditor': {\n            const editor = self.get(editorId);\n            if (editor) {\n              editor.remove();\n            }\n            return true;\n          }\n        case 'mceToggleEditor': {\n            const editor = self.get(editorId);\n            if (!editor) {\n              self.execCommand('mceAddEditor', false, value);\n              return true;\n            }\n            if (editor.isHidden()) {\n              editor.show();\n            } else {\n              editor.hide();\n            }\n            return true;\n          }\n        }\n        if (self.activeEditor) {\n          return self.activeEditor.execCommand(cmd, ui, value);\n        }\n        return false;\n      },\n      triggerSave: () => {\n        each(editors, editor => {\n          editor.save();\n        });\n      },\n      addI18n: (code, items) => {\n        I18n.add(code, items);\n      },\n      translate: text => {\n        return I18n.translate(text);\n      },\n      setActive(editor) {\n        const activeEditor = this.activeEditor;\n        if (this.activeEditor !== editor) {\n          if (activeEditor) {\n            activeEditor.dispatch('deactivate', { relatedTarget: editor });\n          }\n          editor.dispatch('activate', { relatedTarget: activeEditor });\n        }\n        this.activeEditor = editor;\n      },\n      _setBaseUrl(baseUrl) {\n        this.baseURL = new URI(this.documentBaseURL).toAbsolute(baseUrl.replace(/\\/+$/, ''));\n        this.baseURI = new URI(this.baseURL);\n      }\n    };\n    EditorManager.setup();\n\n    const setup = () => {\n      const dataValue = value$2();\n      const FakeClipboardItem = items => ({\n        items,\n        types: keys(items),\n        getType: type => get$a(items, type).getOrUndefined()\n      });\n      const write = data => {\n        dataValue.set(data);\n      };\n      const read = () => dataValue.get().getOrUndefined();\n      const clear = dataValue.clear;\n      return {\n        FakeClipboardItem,\n        write,\n        read,\n        clear\n      };\n    };\n    const FakeClipboard = setup();\n\n    const min = Math.min, max = Math.max, round = Math.round;\n    const relativePosition = (rect, targetRect, rel) => {\n      let x = targetRect.x;\n      let y = targetRect.y;\n      const w = rect.w;\n      const h = rect.h;\n      const targetW = targetRect.w;\n      const targetH = targetRect.h;\n      const relChars = (rel || '').split('');\n      if (relChars[0] === 'b') {\n        y += targetH;\n      }\n      if (relChars[1] === 'r') {\n        x += targetW;\n      }\n      if (relChars[0] === 'c') {\n        y += round(targetH / 2);\n      }\n      if (relChars[1] === 'c') {\n        x += round(targetW / 2);\n      }\n      if (relChars[3] === 'b') {\n        y -= h;\n      }\n      if (relChars[4] === 'r') {\n        x -= w;\n      }\n      if (relChars[3] === 'c') {\n        y -= round(h / 2);\n      }\n      if (relChars[4] === 'c') {\n        x -= round(w / 2);\n      }\n      return create$2(x, y, w, h);\n    };\n    const findBestRelativePosition = (rect, targetRect, constrainRect, rels) => {\n      for (let i = 0; i < rels.length; i++) {\n        const pos = relativePosition(rect, targetRect, rels[i]);\n        if (pos.x >= constrainRect.x && pos.x + pos.w <= constrainRect.w + constrainRect.x && pos.y >= constrainRect.y && pos.y + pos.h <= constrainRect.h + constrainRect.y) {\n          return rels[i];\n        }\n      }\n      return null;\n    };\n    const inflate = (rect, w, h) => {\n      return create$2(rect.x - w, rect.y - h, rect.w + w * 2, rect.h + h * 2);\n    };\n    const intersect = (rect, cropRect) => {\n      const x1 = max(rect.x, cropRect.x);\n      const y1 = max(rect.y, cropRect.y);\n      const x2 = min(rect.x + rect.w, cropRect.x + cropRect.w);\n      const y2 = min(rect.y + rect.h, cropRect.y + cropRect.h);\n      if (x2 - x1 < 0 || y2 - y1 < 0) {\n        return null;\n      }\n      return create$2(x1, y1, x2 - x1, y2 - y1);\n    };\n    const clamp = (rect, clampRect, fixedSize) => {\n      let x1 = rect.x;\n      let y1 = rect.y;\n      let x2 = rect.x + rect.w;\n      let y2 = rect.y + rect.h;\n      const cx2 = clampRect.x + clampRect.w;\n      const cy2 = clampRect.y + clampRect.h;\n      const underflowX1 = max(0, clampRect.x - x1);\n      const underflowY1 = max(0, clampRect.y - y1);\n      const overflowX2 = max(0, x2 - cx2);\n      const overflowY2 = max(0, y2 - cy2);\n      x1 += underflowX1;\n      y1 += underflowY1;\n      if (fixedSize) {\n        x2 += underflowX1;\n        y2 += underflowY1;\n        x1 -= overflowX2;\n        y1 -= overflowY2;\n      }\n      x2 -= overflowX2;\n      y2 -= overflowY2;\n      return create$2(x1, y1, x2 - x1, y2 - y1);\n    };\n    const create$2 = (x, y, w, h) => {\n      return {\n        x,\n        y,\n        w,\n        h\n      };\n    };\n    const fromClientRect = clientRect => {\n      return create$2(clientRect.left, clientRect.top, clientRect.width, clientRect.height);\n    };\n    const Rect = {\n      inflate,\n      relativePosition,\n      findBestRelativePosition,\n      intersect,\n      clamp,\n      create: create$2,\n      fromClientRect\n    };\n\n    const awaiter = (resolveCb, rejectCb, timeout = 1000) => {\n      let done = false;\n      let timer = null;\n      const complete = completer => (...args) => {\n        if (!done) {\n          done = true;\n          if (timer !== null) {\n            clearTimeout(timer);\n            timer = null;\n          }\n          completer.apply(null, args);\n        }\n      };\n      const resolve = complete(resolveCb);\n      const reject = complete(rejectCb);\n      const start = (...args) => {\n        if (!done && timer === null) {\n          timer = setTimeout(() => reject.apply(null, args), timeout);\n        }\n      };\n      return {\n        start,\n        resolve,\n        reject\n      };\n    };\n    const create$1 = () => {\n      const tasks = {};\n      const resultFns = {};\n      const load = (id, url) => {\n        const loadErrMsg = `Script at URL \"${ url }\" failed to load`;\n        const runErrMsg = `Script at URL \"${ url }\" did not call \\`tinymce.Resource.add('${ id }', data)\\` within 1 second`;\n        if (tasks[id] !== undefined) {\n          return tasks[id];\n        } else {\n          const task = new Promise((resolve, reject) => {\n            const waiter = awaiter(resolve, reject);\n            resultFns[id] = waiter.resolve;\n            ScriptLoader.ScriptLoader.loadScript(url).then(() => waiter.start(runErrMsg), () => waiter.reject(loadErrMsg));\n          });\n          tasks[id] = task;\n          return task;\n        }\n      };\n      const add = (id, data) => {\n        if (resultFns[id] !== undefined) {\n          resultFns[id](data);\n          delete resultFns[id];\n        }\n        tasks[id] = Promise.resolve(data);\n      };\n      const unload = id => {\n        delete tasks[id];\n      };\n      return {\n        load,\n        add,\n        unload\n      };\n    };\n    const Resource = create$1();\n\n    const create = () => (() => {\n      let data = {};\n      let keys = [];\n      const storage = {\n        getItem: key => {\n          const item = data[key];\n          return item ? item : null;\n        },\n        setItem: (key, value) => {\n          keys.push(key);\n          data[key] = String(value);\n        },\n        key: index => {\n          return keys[index];\n        },\n        removeItem: key => {\n          keys = keys.filter(k => k === key);\n          delete data[key];\n        },\n        clear: () => {\n          keys = [];\n          data = {};\n        },\n        length: 0\n      };\n      Object.defineProperty(storage, 'length', {\n        get: () => keys.length,\n        configurable: false,\n        enumerable: false\n      });\n      return storage;\n    })();\n\n    let localStorage;\n    try {\n      const test = '__storage_test__';\n      localStorage = window.localStorage;\n      localStorage.setItem(test, test);\n      localStorage.removeItem(test);\n    } catch (e) {\n      localStorage = create();\n    }\n    var LocalStorage = localStorage;\n\n    const publicApi = {\n      geom: { Rect },\n      util: {\n        Delay,\n        Tools,\n        VK,\n        URI,\n        EventDispatcher,\n        Observable,\n        I18n,\n        LocalStorage,\n        ImageUploader\n      },\n      dom: {\n        EventUtils,\n        TreeWalker: DomTreeWalker,\n        TextSeeker,\n        DOMUtils,\n        ScriptLoader,\n        RangeUtils,\n        Serializer: DomSerializer,\n        StyleSheetLoader,\n        ControlSelection,\n        BookmarkManager,\n        Selection: EditorSelection,\n        Event: EventUtils.Event\n      },\n      html: {\n        Styles,\n        Entities,\n        Node: AstNode,\n        Schema,\n        DomParser,\n        Writer,\n        Serializer: HtmlSerializer\n      },\n      Env,\n      AddOnManager,\n      Annotator,\n      Formatter,\n      UndoManager,\n      EditorCommands,\n      WindowManager,\n      NotificationManager,\n      EditorObservable,\n      Shortcuts,\n      Editor,\n      FocusManager,\n      EditorManager,\n      DOM: DOMUtils.DOM,\n      ScriptLoader: ScriptLoader.ScriptLoader,\n      PluginManager,\n      ThemeManager,\n      ModelManager,\n      IconManager,\n      Resource,\n      FakeClipboard,\n      trim: Tools.trim,\n      isArray: Tools.isArray,\n      is: Tools.is,\n      toArray: Tools.toArray,\n      makeMap: Tools.makeMap,\n      each: Tools.each,\n      map: Tools.map,\n      grep: Tools.grep,\n      inArray: Tools.inArray,\n      extend: Tools.extend,\n      walk: Tools.walk,\n      resolve: Tools.resolve,\n      explode: Tools.explode,\n      _addCacheSuffix: Tools._addCacheSuffix\n    };\n    const tinymce = Tools.extend(EditorManager, publicApi);\n\n    const exportToModuleLoaders = tinymce => {\n      if (typeof module === 'object') {\n        try {\n          module.exports = tinymce;\n        } catch (_) {\n        }\n      }\n    };\n    const exportToWindowGlobal = tinymce => {\n      window.tinymce = tinymce;\n      window.tinyMCE = tinymce;\n    };\n    exportToWindowGlobal(tinymce);\n    exportToModuleLoaders(tinymce);\n\n})();\n"],"mappings":"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"},"metadata":{},"sourceType":"script"}