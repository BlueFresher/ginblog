{"ast":null,"code":"import { Url } from '../../plugin/http';\nexport default {\n  props: ['id'],\n  data() {\n    return {\n      artInfo: {\n        id: 0,\n        title: '',\n        cid: undefined,\n        desc: '',\n        content: '',\n        imf: ''\n      },\n      CateList: [],\n      upUrl: Url + '/upload',\n      headers: {}\n    };\n  },\n  created() {\n    this.getCateList();\n    this.headers = {\n      Authorization: `Bearer ${window.sessionStorage.getItem('token')}`\n    };\n  },\n  methods: {\n    // 查询分类列表\n    async getCateList() {\n      const {\n        data: res\n      } = await this.$http.get('category');\n      console.log(res);\n      if (res.status != 200) return this.$message.error(res.message);\n      this.Catelist = res.data;\n    },\n    // 选择分类\n    cateChange(value) {\n      this.artInfo.cid = value;\n    },\n    // 上传图片\n    upChange(info) {\n      if (info.file.status !== 'uploading') {\n        // console.log(info.file, info.fileList);\n      }\n      if (info.file.status === 'done') {\n        this.$message.success(`图片上传成功`);\n        const imgUrl = info.file.response.Url;\n        this.artInfo.img = imgUrl;\n      } else if (info.file.status === 'error') {\n        this.$message.error(`图片上传失败`);\n      }\n    }\n  }\n};","map":{"version":3,"mappings":"AAyCA;AACA;EACAA;EACAC;IACA;MACAC;QACAC;QACAC;QACAC;QACAC;QACAC;QACAC;MACA;MACAC;MACAC;MACAC;IACA;EACA;EACAC;IACA;IACA;MAAAC;IAAA;EACA;EACAC;IACA;IACA;MACA;QAAAb;MAAA;MACAc;MACA;MACA;IACA;IACA;IACAC;MACA;IACA;IACA;IACAC;MACA;QACA;MACA;MACA;QACA;QACA;QACA;MACA;QACA;MACA;IACA;EACA;AACA","names":["props","data","artInfo","id","title","cid","desc","content","imf","CateList","upUrl","headers","created","Authorization","methods","console","cateChange","upChange"],"sourceRoot":"src/components/article","sources":["AddArt.vue"],"sourcesContent":["<template>\n    <div>\n        <a-card>\n            <h3>{{id? '编辑文章':'新增文章页面'}}</h3>\n            <a-form-model :model=\"artInfo\">\n                <a-form-model-item label=\"文章标题\">\n                    <a-input style=\"width:300px\" v-model=\"artInfo.title\"></a-input>\n                </a-form-model-item>\n                <a-form-model-item label=\"文章分类\">\n                    <a-select style=\"width:200px\" v-model=\"artInfo.cid\" placeholder=\"请选择分类\" @change=\"cateChange\"\n                    listType=\"picture\" :defaultFielList=\"fileList\">\n                        <a-select-option v-for=\"item in CateList\" key=\"item.id\" value=\"item.id\">{{item.name}}</a-select-option>\n                    </a-select>\n                </a-form-model-item>\n                <a-form-model-item label=\"文章描述\">\n                    <a-input type=\"textarea\"></a-input>\n                </a-form-model-item>\n                <a-form-model-item label=\"文章缩略图\">\n                    <a-upload\n                    name=\"file\"\n                    :multiple=\"false\"\n                    :action=\"upUrl\"\n                    :headers=\"headers\"\n                    @change=\"upChange\"\n                  >\n                    <a-button> <a-icon type=\"upload\" /> 点击上传 </a-button>\n                  </a-upload>\n                </a-form-model-item>\n                <a-form-model-item label=\"文章内容\">\n                    <a-input v-model=\"artInfo.content\"></a-input>\n                </a-form-model-item>\n                <a-form-model-item>\n                    <a-button type=\"danger\" style=\"margin-right:15px\">提交</a-button>\n                    <a-button type=\"danger\">取消</a-button>\n                </a-form-model-item>\n            </a-form-model>\n        </a-card>\n    </div>\n</template>\n\n<script>\nimport { Url } from '../../plugin/http'\nexport default {\n    props:['id'],\n    data() {\n        return {\n            artInfo:{\n                id:0,\n                title:'',\n                cid:undefined,\n                desc:'',\n                content:'',\n                imf:'',\n            },\n            CateList:[],\n            upUrl: Url + '/upload',\n            headers:{}\n        }\n    },\n    created(){\n        this.getCateList()\n        this.headers = {Authorization: `Bearer ${window.sessionStorage.getItem('token')}`}\n    },\n    methods:{\n        // 查询分类列表\n        async getCateList() {\n            const { data:res } = await this.$http.get('category')\n            console.log(res)\n            if (res.status != 200) return this.$message.error(res.message)\n            this.Catelist = res.data\n        },\n        // 选择分类\n        cateChange(value){\n            this.artInfo.cid = value\n        },\n        // 上传图片\n        upChange(info) {\n            if (info.file.status !== 'uploading') {\n                // console.log(info.file, info.fileList);\n            }\n            if (info.file.status === 'done') {\n                this.$message.success(`图片上传成功`);\n                const imgUrl =  info.file.response.Url\n                this.artInfo.img = imgUrl\n            } else if (info.file.status === 'error') {\n                this.$message.error(`图片上传失败`);\n            }\n        },\n    }\n}\n</script>"]},"metadata":{},"sourceType":"module"}