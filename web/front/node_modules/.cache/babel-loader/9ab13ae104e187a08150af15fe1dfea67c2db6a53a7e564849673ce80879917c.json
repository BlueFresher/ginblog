{"ast":null,"code":"export default {\n  props: ['id'],\n  data() {\n    return {\n      artInfo: {},\n      commentList: [],\n      comment: {\n        content: ''\n      },\n      headers: {\n        username: '',\n        user_id: 0\n      },\n      queryParam: {\n        pagesize: 5,\n        pagenum: 1\n      }\n    };\n  },\n  created() {\n    this.getArtInfo();\n    this.getCommentList();\n    this.headers = {\n      username: window.sessionStorage.getItem('username'),\n      user_id: window.sessionStorage.getItem('user_id')\n    };\n  },\n  methods: {\n    // 查询文章\n    async getArtInfo() {\n      const {\n        data: res\n      } = await this.$http.get(`article/info/${this.id}`);\n      this.artInfo = res.data;\n      // console.log(res)\n    },\n\n    async getCommentList() {\n      const {\n        data: res\n      } = await this.$http.get(`commentfront/${this.id}`, {\n        params: {\n          pagesize: this.queryParam.pagesize,\n          pagenum: this.queryParam.pagenum\n        }\n      });\n      console.log(res);\n      this.commentList = res.data;\n    },\n    async pushComment() {\n      const {\n        data: res\n      } = await this.$http.post('addcomment', {\n        article_id: parseInt(this.id),\n        content: this.comment.content,\n        user_id: parseInt(this.headers.user_id),\n        usernanme: this.headers.username\n      });\n      if (res.status !== 200) return this.$message.error(res.message);\n      // this.$message.success('评论成功，待审核后显示')\n      this.$router.go(0);\n    }\n  }\n};","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}